(function(config){!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).AMap=factory()}(this,function(){"use strict";var shared,worker,AMap;function define(_,chunk){var factory,workerUrl;shared?worker?(workerUrl='var sharedChunk = {key:"'+config[0]+'",db:"'+(config[14]||"")+'",nebulaVersion:"'+(config[15]||"")+'",movingDraw:'+Boolean(window.movingDraw)+',host:"'+config[2]+'",}; ('+shared+")(sharedChunk); ("+worker+")(sharedChunk);",factory={key:config[0],movingDraw:window.movingDraw},shared(factory),factory=chunk(factory),workerUrl="undefined"!=typeof URL?window.URL.createObjectURL(new Blob([workerUrl],{type:"text/javascript"})):"",(AMap=factory(config)).getConfig().workerUrl=workerUrl):worker=chunk:shared=chunk}define(["exports"],function(exports){var extend=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n,i,a=Array.prototype.slice.call(arguments,1),o=0,s=a.length;o<s;o+=1)for(var u in n=a[o]||{})n.hasOwnProperty(u)&&("function"==typeof(i=n[u])&&t.prototype?t.prototype[u]=i:t[u]=i);return t};function isBrowser(){return"undefined"!=typeof window&&"undefined"!=typeof document}function isWasmSuppport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var t=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1}var testWepP=function(t){var e=new Image;e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",e.onload=e.onerror=function(){t(2===e.height)}};function isWorkerEnv(){try{return document,!1}catch(t){return!0}}function getSupport(e){var t={runSupport:(new Date).getTime()},r=isWasmSuppport(),n=navigator.userAgent.toLowerCase(),a=!0,o=(i=function(t){return-1!==n.indexOf(t)})("macintosh"),s=i("ipad;")||i("ipad "),u=i("ipod touch;"),c=i("iphone;")||i("iphone "),f=c||s||u,l=(o||f)&&i("safari")&&i("version/"),h=i("macwechat"),d=i("windowswechat"),v={touch:!1,mac:o,Ue:!1,webkit:!1,$e:!1,scale:1,android:!1,DW:isWorkerEnv(),wasm:r,safari:l,AQ:h,gQ:d,amapRunTime:t};if(isBrowser()){var g=window,p=(b=document).documentElement,y=/([a-z0-9]*\d+[a-z0-9]*)/,m="google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),w="ActiveXObject"in g,T=0!=window.detectRetina&&("devicePixelRatio"in g&&1<g.devicePixelRatio||w&&"matchMedia"in g&&g.matchMedia("(min-resolution:144dpi)")&&g.matchMedia("(min-resolution:144dpi)").matches),x=i("windows nt"),A=(n.search(/windows nt [1-5]\./),n.search(/windows nt 5\.[12]/),i("windows nt 10"),i("windows phone")),M=i("Mb2345Browser"),S=(f&&n.search(/ os [456]_/),f&&n.search(/ os [4-8]_/),f&&n.search(/ os [78]_/),f&&i("os 8_"),f&&i("os 10_")),P=i("android"),I=0;P&&(I=parseInt(n.split("android")[1])||0);var $=P&&I<4,C=(P&&5<=I||n.search(/android 4.4/),P?"android":f?"ios":x?"windows":o?"mac":"other"),k=w&&!g.XMLHttpRequest,N=w&&!b.querySelector,L=w&&!b.addEventListener,_=w&&i("msie 9"),O=w&&i("msie 10"),E=w&&i("rv:11"),U=L||_,j=i("edge"),R=(i("qtweb"),i("ucbrowser")),D=i("alipay")||P&&R,F=(i("miuibrowser"),i("micromessenger")),B=i("dingtalk"),G=i("mqqbrowser"),z=i("baidubrowser"),V=i("crios/"),H=i("chrome/"),W=!((H||V)&&i("chromium"))&&(H&&30<parseInt(n.split("chrome/")[1])||V&&30<parseInt(n.split("crios/")[1])),q=i("firefox"),X=q&&27<parseInt(n.split("firefox/")[1]),Y=l&&7<parseInt(n.split("version/")[1]),K=(f&&i("aliapp"),P||f||A||i("mobile")),Z="ontouchstart"in b,Q=g.navigator&&g.navigator.msPointerEnabled&&!!g.navigator.msMaxTouchPoints,J=g.navigator&&!!g.navigator.maxTouchPoints,tt=!Z&&(J||Q),et=Z||tt,u=function(){if(!K)return g.devicePixelRatio||1;var t=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;t=window.parent.document.getElementsByTagName("meta")}catch(t){return 1}for(var e=t.length-1;0<=e;--e)if("viewport"===t[e].name){var i,a,r=t[e].content,n=void 0;return-1!==r.indexOf("initial-scale")&&(n=parseFloat(r.split("initial-scale=")[1])),i=-1!==r.indexOf("minimum-scale")?parseFloat(r.split("minimum-scale=")[1]):0,a=-1!==r.indexOf("maximum-scale")?parseFloat(r.split("maximum-scale=")[1]):1/0,n?i<=a?a<n?a:n<i?i:n:(console&&console.log&&console.log("viewport参数不合法"),null):i<=a?1<=i?1:Math.min(a,1):(console&&console.log&&console.log("viewport参数不合法"),null)}}(),rt=T&&(!K||!!u&&1<=u),h=w&&"transition"in p.style,d=!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,nt=b.createElement("canvas"),it=!(!nt||!nt.getContext),I=window.URL||window.webkitURL,at=!0!==window.disableWorker&&!w&&!(R&&P&&!W)&&window.Worker&&I&&I.createObjectURL&&window.Blob,ot="",st="",ut=0,V=0!=window.higtQualityRender||!T,A=window.movingDraw,ct={alpha:!0,antialias:V,depth:!0,stencil:!0},b=(Z=function(){if(!it||!at)return!1;for(var t=["webgl","experimental-webgl","moz-webgl"],e=null,r=0;r<t.length;r+=1){try{e=nt.getContext(t[r],ct)}catch(t){}if(e){if(e.drawingBufferWidth!==nt.width||e.drawingBufferHeight!==nt.height)return!1;if(!e.getShaderPrecisionFormat||!e.getParameter||!e.getExtension)return!1;ut=e.getParameter(e.MAX_RENDERBUFFER_SIZE);var n=e.getParameter(e.MAX_VIEWPORT_DIMS);if(!n)return!1;if(ut=Math.min(ut,n[0],n[1]),l&&"mac"==C&&(ut=Math.min(ut,4096)),n=Math.max(screen.width,screen.height),rt&&(n*=Math.min(2,window.devicePixelRatio||1)),ut<n)return!1;if(e.getShaderPrecisionFormat(35632,36338).precision<23||e.getShaderPrecisionFormat(35633,36338).precision<23)return!1;if(n=function(t){if(!t)return null;var e=null;if(0<=(t=(t=(r=(t=t.toLowerCase()).match(/angle \((.*)\)/))?(t=r[1]).replace(/\s*direct3d.*$/,""):t).replace(/\s*\([^\)]*wddm[^\)]*\)/,"")).indexOf("intel"))return e=["Intel"],0<=t.indexOf("mobile")&&e.push("Mobile"),(0<=t.indexOf("gma")||0<=t.indexOf("graphics media accelerator"))&&e.push("GMA"),0<=t.indexOf("haswell")?e.push("Haswell"):0<=t.indexOf("ivy")?e.push("HD 4000"):0<=t.indexOf("sandy")?e.push("HD 3000"):0<=t.indexOf("ironlake")?e.push("HD"):(0<=t.indexOf("hd")&&e.push("HD"),(n=t.match(y))&&e.push(n[1].toUpperCase())),e.join(" ");if(0<=t.indexOf("nvidia")||0<=t.indexOf("quadro")||0<=t.indexOf("geforce")||0<=t.indexOf("nvs"))return e=["nVidia"],0<=t.indexOf("geforce")&&e.push("geForce"),0<=t.indexOf("quadro")&&e.push("Quadro"),0<=t.indexOf("nvs")&&e.push("NVS"),t.match(/\bion\b/)&&e.push("ION"),t.match(/gtx\b/)?e.push("GTX"):t.match(/gts\b/)?e.push("GTS"):t.match(/gt\b/)?e.push("GT"):t.match(/gs\b/)?e.push("GS"):t.match(/ge\b/)?e.push("GE"):t.match(/fx\b/)&&e.push("FX"),(n=t.match(y))&&e.push(n[1].toUpperCase().replace("GS","")),0<=t.indexOf("titan")?e.push("TITAN"):0<=t.indexOf("ti")&&e.push("Ti"),e.join(" ");if(0<=t.indexOf("amd")||0<=t.indexOf("ati")||0<=t.indexOf("radeon")||0<=t.indexOf("firegl")||0<=t.indexOf("firepro")){var n,r,e=["AMD"];return 0<=t.indexOf("mobil")&&e.push("Mobility"),0<=(r=t.indexOf("radeon"))&&e.push("Radeon"),0<=t.indexOf("firepro")?e.push("FirePro"):0<=t.indexOf("firegl")&&e.push("FireGL"),0<=t.indexOf("hd")&&e.push("HD"),(n=(t=0<=r?t.substring(r):t).match(y))&&e.push(n[1].toUpperCase().replace("HD","")),e.join(" ")}return t.substring(0,100)}(st=e.getExtension("WEBGL_debug_renderer_info")?e.getParameter(37446):null)){if(-1<n.indexOf("google swiftshader"))return a=!1;if(-1!==m.indexOf(n))return!1}return ot=t[r],!0}}return!1})(),I=void 0===e[8]||e[8],V=window.Uint8Array&&I&&!window.forbidenWebGL&&b&&(window.forceWebGL||(W||X||Y||j||F||B)&&"other"!=C),b=window.forceWebGLBaseRender||V?"w":"d",W=i("webkit"),X="WebKitCSSMatrix"in g&&"m11"in new window.WebKitCSSMatrix,Y="MozPerspective"in p.style,B="vV"in p.style,i=h||X||Y||B,p=void 0!==e[12]?e[12]:null,e=!0;try{void 0===g.localStorage?e=!1:(ft=(new Date).getTime()+"",g.localStorage.setItem("_test",ft),g.localStorage.getItem("_test")!==ft&&(e=!1),g.localStorage.removeItem("_test"))}catch(t){e=!1}var ft=parseInt(n.split("chrome/")[1]),v={iPad:s,iPhone:c,size:c?100:P?200:500,mac:o,windows:x,ios:f,uT:S,android:P,android23:$,cT:D,plat:C,baidu:z,qq:G,safari:l,wechat:F,ie:w,ie6:k,ie7:N,ie9:_,ie10:O,ielt9:L,fT:U,ie11:E,edge:j,hT:w&&!E,lT:M,RL:e,vT:p,geolocation:K||w&&!L||j,SL:R,uc:R&&!H,chrome:H,gT:!0,firefox:q,hardwareAccEnabled:a,$e:K,mobileWebkit:K&&W,mobileWebkit3d:K&&X,mobileOpera:K&&g.opera,Ue:T,bT:u,Mr:rt,touch:et,msPointer:Q,pointer:J,yT:tt,pT:H&&57<=ft,mT:!K&&H&&64<=ft,webkit:W,ie3d:h,webkit3d:X,gecko3d:Y,opera3d:B,any3d:i,isSvg:d,isCanvas:it,isWorker:at,TT:!1,isWebGL:V,AT:ot,xT:ct,ST:st,wT:ut,MT:!1,movingDraw:A,baseRender:I?b:"d",scale:T?2:1,getContext:function(t,e){var r={};return extend(r,ct),extend(r,e),t.getContext(ot,r)},mH:!1,wasm:r,amapRunTime:t,sY:Z};testWepP(function(t){v.mH=t})}return v}var Browser=getSupport("undefined"==typeof config?[]:config);"undefined"!=typeof createImageBitmap&&"undefined"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);var canceledWorkerFetch=Boolean(Browser.DW?!Browser.safari&&!Browser.AQ&&!Browser.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"):!Browser.safari&&!Browser.AQ&&!Browser.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty("signal"));Browser.LZ=canceledWorkerFetch,Browser.amapRunTime={workerTime:{}};var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty.call(t,symToStringTag),r=t[symToStringTag];try{var n=!(t[symToStringTag]=void 0)}catch(t){}var i=nativeObjectToString.call(t);return n&&(e?t[symToStringTag]=r:delete t[symToStringTag]),i}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol?Symbol.toStringTag:void 0;function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(t)?getRawTag:objectToString)(t)}function isObjectLike(t){return null!=t&&"object"==typeof t}var symbolTag="[object Symbol]";function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&baseGetTag(t)==symbolTag}function arrayMap(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var isArray=Array.isArray,INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if("string"==typeof t)return t;if(isArray(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return"0"==e&&1/t==-INFINITY?"-0":e}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var e=t.length;e--&&reWhitespace.test(t.charAt(e)););return e}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if("string"!=typeof(t=isObject(t)?isObject(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e:t))return 0===t?t:+t;t=baseTrim(t);var e=reIsBinary.test(t);return e||reIsOctal.test(t)?freeParseInt(t.slice(2),e?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){return t?(t=toNumber(t))!==INFINITY$1&&t!==-INFINITY$1?t==t?t:0:(t<0?-1:1)*MAX_INTEGER:0===t?t:0}function toInteger(t){var e=toFinite(t),t=e%1;return e==e?t?e-t:e:0}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){return!!isObject(t)&&((t=baseGetTag(t))==funcTag||t==genTag||t==asyncTag||t==proxyTag)}var coreJsData=root["__core-js_shared__"],maskSrcKey=(Ab=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||""),Ab?"Symbol(src)_1."+Ab:""),Ab;function isMasked(t){return maskSrcKey&&maskSrcKey in t}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){return isObject(t)&&!isMasked(t)&&(isFunction(t)?reIsNative:reIsHostCtor).test(toSource(t))}function getValue(t,e){return null==t?void 0:t[e]}function getNative(t,e){return baseIsNative(e=getValue(t,e))?e:void 0}var WeakMap=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(t){return isObject(t)?objectCreate?objectCreate(t):(Mb.prototype=t,t=new Mb,Mb.prototype=void 0,t):{}};function Mb(){}function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function copyArray(t,e){var r=-1,n=t.length;for(e=e||Array(n);++r<n;)e[r]=t[r];return e}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(r){var n=0,i=0;return function(){var t=nativeNow(),e=HOT_SPAN-(t-i);if(i=t,0<e){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),baseSetToString=defineProperty?function(t,e){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function baseFindIndex(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,e){var r=typeof t;return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==r||"symbol"!=r&&reIsUint.test(t))&&-1<t&&t%1==0&&t<e}function baseAssignValue(t,e,r){"__proto__"==e&&defineProperty?defineProperty(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function eq(t,e){return t===e||t!=t&&e!=e}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(t,e,r){var n=t[e];hasOwnProperty$2.call(t,e)&&eq(n,r)&&(void 0!==r||e in t)||baseAssignValue(t,e,r)}function copyObject(t,e,r,n){var i=!r;r=r||{};for(var a=-1,o=e.length;++a<o;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;(i?baseAssignValue:assignValue)(r,s,u=void 0===u?t[s]:u)}return r}var nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var t=arguments,e=-1,r=nativeMax(t.length-o,0),n=Array(r);++e<r;)n[e]=t[o+e];for(var e=-1,i=Array(o+1);++e<o;)i[e]=t[e];return i[o]=s(n),apply(a,this,i)}}function baseRest(t,e){return setToString(overRest(t,e,identity),t+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isIterateeCall(t,e,r){if(isObject(r)){var n=typeof e;return("number"==n?isArrayLike(r)&&isIndex(e,r.length):"string"==n&&e in r)&&eq(r[e],t)}}function createAssigner(s){return baseRest(function(t,e){var r=-1,n=e.length,i=1<n?e[n-1]:void 0,a=2<n?e[2]:void 0,i=3<s.length&&"function"==typeof i?(n--,i):void 0;for(a&&isIterateeCall(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var o=e[r];o&&s(t,o,r,i)}return t})}var objectProto$4=Object.prototype;function isPrototype(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||objectProto$4)}function baseTimes(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$3.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")};function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Zb:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb("util").types;return t||freeProcess&&freeProcess.tg&&freeProcess.tg("util")}catch(t){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.rg,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(t,e){var r,n=isArray(t),i=!n&&isArguments(t),a=!n&&!i&&isBuffer(t),o=!n&&!i&&!a&&isTypedArray(t),s=n||i||a||o,u=s?baseTimes(t.length,String):[],c=u.length;for(r in t)!e&&!hasOwnProperty$4.call(t,r)||s&&("length"==r||a&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||isIndex(r,c))||u.push(r);return u}function overArg(e,r){return function(t){return e(r(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e,r=[];for(e in Object(t))hasOwnProperty$5.call(t,e)&&"constructor"!=e&&r.push(e);return r}function keys(t){return(isArrayLike(t)?arrayLikeKeys:baseKeys)(t)}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,assign=createAssigner(function(t,e){if(isPrototype(e)||isArrayLike(e))copyObject(e,keys(e),t);else for(var r in e)hasOwnProperty$6.call(e,r)&&assignValue(t,r,e[r])});function nativeKeysIn(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function baseKeysIn(t){if(!isObject(t))return nativeKeysIn(t);var e,r=isPrototype(t),n=[];for(e in t)("constructor"!=e||!r&&hasOwnProperty$7.call(t,e))&&n.push(e);return n}function keysIn(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,e){if(!isArray(t)){var r=typeof t;return"number"==r||"symbol"==r||"boolean"==r||null==t||isSymbol(t)||reIsPlainProp.test(t)||!reIsDeepProp.test(t)||null!=e&&t in Object(e)}}var nativeCreate=getNative(Object,"create");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){return t=this.has(t)&&delete this.ng[t],this.size-=t?1:0,t}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashGet(t){var e=this.ng;if(nativeCreate){var r=e[t];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$8.call(e,t)?e[t]:void 0}var objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas(t){var e=this.ng;return nativeCreate?void 0!==e[t]:hasOwnProperty$9.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var r=this.ng;return this.size+=this.has(t)?0:1,r[t]=nativeCreate&&void 0===e?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function listCacheClear(){this.ng=[],this.size=0}function assocIndexOf(t,e){for(var r=t.length;r--;)if(eq(t[r][0],e))return r;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.ng;return!((t=assocIndexOf(e,t))<0||(t==e.length-1?e.pop():splice.call(e,t,1),--this.size,0))}function listCacheGet(t){var e=this.ng;return(t=assocIndexOf(e,t))<0?void 0:e[t][1]}function listCacheHas(t){return-1<assocIndexOf(this.ng,t)}function listCacheSet(t,e){var r=this.ng,n=assocIndexOf(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ListCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0,this.ng={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function getMapData(t,e){return t=t.ng,isKeyable(e)?t["string"==typeof e?"string":"hash"]:t.map}function mapCacheDelete(t){return t=getMapData(this,t).delete(t),this.size-=t?1:0,t}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var r=getMapData(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function MapCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(n,i){if("function"!=typeof n||null!=i&&"function"!=typeof i)throw new TypeError(FUNC_ERROR_TEXT);function a(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;return r.has(e)?r.get(e):(t=n.apply(this,t),a.cache=r.set(e,t)||r,t)}return a.cache=new(memoize.Cache||MapCache),a}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var e=(t=memoize(t,function(t){return e.size===MAX_MEMOIZE_SIZE&&e.clear(),t})).cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(rePropName,function(t,e,r,n){i.push(r?n.replace(reEscapeChar,"$1"):e||t)}),i});function toString(t){return null==t?"":baseToString(t)}function castPath(t,e){return isArray(t)?t:isKey(t,e)?[t]:stringToPath(toString(t))}var INFINITY$2=1/0;function toKey(t){if("string"==typeof t||isSymbol(t))return t;var e=t+"";return"0"==e&&1/t==-INFINITY$2?"-0":e}function baseGet(t,e){for(var r=0,n=(e=castPath(e,t)).length;null!=t&&r<n;)t=t[toKey(e[r++])];return r&&r==n?t:void 0}function get(t,e,r){return void 0===(e=null==t?void 0:baseGet(t,e))?r:e}function arrayPush(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var getPrototype=overArg(Object.getPrototypeOf,Object);function stackClear(){this.ng=new ListCache,this.size=0}function stackDelete(t){var e=this.ng,t=e.delete(t);return this.size=e.size,t}function stackGet(t){return this.ng.get(t)}function stackHas(t){return this.ng.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,e){var r=this.ng;if(r instanceof ListCache){var n=r.ng;if(!Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([t,e]),this.size=++r.size,this;r=this.ng=new MapCache(n)}return r.set(t,e),this.size=r.size,this}function Stack(t){t=this.ng=new ListCache(t),this.size=t.size}function baseAssign(t,e){return t&&copyObject(e,keys(e),t)}function baseAssignIn(t,e){return t&&copyObject(e,keysIn(e),t)}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Zb:void 0,allocUnsafe=Buffer$1?Buffer$1.ig:void 0;function cloneBuffer(t,e){return e?t.slice():(e=t.length,e=allocUnsafe?allocUnsafe(e):new t.constructor(e),t.eg(e),e)}function arrayFilter(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function stubArray(){return[]}var objectProto$c=Object.prototype,propertyIsEnumerable$1=objectProto$c.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray;function copySymbols(t,e){return copyObject(t,getSymbols(t),e)}var nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(t){for(var e=[];t;)arrayPush(e,getSymbols(t)),t=getPrototype(t);return e}:stubArray;function copySymbolsIn(t,e){return copyObject(t,getSymbolsIn(t),e)}function baseGetAllKeys(t,e,r){return e=e(t),isArray(t)?e:arrayPush(e,r(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn,getSymbolsIn)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1)&&(getTag=function(t){var e=baseGetTag(t);if(t=(t=e==objectTag$1?t.constructor:void 0)?toSource(t):"")switch(t){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return e});var getTag$1=getTag,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty;function initCloneArray(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&hasOwnProperty$a.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(t){var e=new t.constructor(t.byteLength);return new Uint8Array$1(e).set(new Uint8Array$1(t)),e}function cloneDataView(t,e){return e=e?cloneArrayBuffer(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var e=new t.constructor(t.source,reFlags.exec(t));return e.lastIndex=t.lastIndex,e}var symbolProto$1=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf?Object(symbolValueOf.call(t)):{}}function cloneTypedArray(t,e){return e=e?cloneArrayBuffer(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,e,r){var n=t.constructor;switch(e){case arrayBufferTag$1:return cloneArrayBuffer(t);case boolTag$1:case dateTag$1:return new n(+t);case dataViewTag$2:return cloneDataView(t,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,r);case mapTag$2:return new n;case numberTag$1:case stringTag$1:return new n(t);case regexpTag$1:return cloneRegExp(t);case setTag$2:return new n;case symbolTag$1:return cloneSymbol(t)}}function initCloneObject(t){return"function"!=typeof t.constructor||isPrototype(t)?{}:baseCreate(getPrototype(t))}var mapTag$3="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$3}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$3="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$3}var nodeIsSet=nodeUtil&&nodeUtil.og,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(r,n,i,t,e,a){var o,s=n&CLONE_DEEP_FLAG,u=n&CLONE_FLAT_FLAG,c=n&CLONE_SYMBOLS_FLAG;if(void 0!==(o=i?e?i(r,t,e,a):i(r):o))return o;if(!isObject(r))return r;var f=isArray(r);if(f){if(o=initCloneArray(r),!s)return copyArray(r,o)}else{var l=getTag$1(r),t=l==funcTag$2||l==genTag$1;if(isBuffer(r))return cloneBuffer(r,s);if(l==objectTag$2||l==argsTag$2||t&&!e){if(o=u||t?{}:initCloneObject(r),!s)return u?copySymbolsIn(r,baseAssignIn(o,r)):copySymbols(r,baseAssign(o,r))}else{if(!cloneableTags[l])return e?r:{};o=initCloneByTag(r,l,s)}}if(s=(a=a||new Stack).get(r))return s;a.set(r,o),isSet(r)?r.forEach(function(t){o.add(baseClone(t,n,i,t,r,a))}):isMap(r)&&r.forEach(function(t,e){o.set(e,baseClone(t,n,i,e,r,a))});var h=f?void 0:(c?u?getAllKeysIn:getAllKeys:u?keysIn:keys)(r);return arrayEach(h||r,function(t,e){h&&(t=r[e=t]),assignValue(o,e,baseClone(t,n,i,e,r,a))}),o}cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$4]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$2]=cloneableTags[setTag$4]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var CLONE_SYMBOLS_FLAG$1=4;function clone(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$2)}var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(t){return this.ng.set(t,HASH_UNDEFINED$2),this}function setCacheHas(t){return this.ng.has(t)}function SetCache(t){var e=-1,r=null==t?0:t.length;for(this.ng=new MapCache;++e<r;)this.add(t[e])}function arraySome(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(t,e,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG,s=t.length;if(s!=(u=e.length)&&!(o&&s<u))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var f=-1,l=!0,h=r&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var d,v=t[f],g=e[f];if(void 0!==(d=n?o?n(g,v,f,e,t,a):n(v,g,f,t,e,a):d)){if(d)continue;l=!1;break}if(h){if(!arraySome(e,function(t,e){if(!cacheHas(h,e)&&(v===t||i(v,t,r,n,a)))return h.push(e)})){l=!1;break}}else if(v!==g&&!i(v,g,r,n,a)){l=!1;break}}return a.delete(t),a.delete(e),l}function mapToArray(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}function setToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$5="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$2=Symbol?Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag(t,e,r,n,i,a,o){switch(r){case dataViewTag$4:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag$3:return!(t.byteLength!=e.byteLength||!a(new Uint8Array$1(t),new Uint8Array$1(e)));case boolTag$3:case dateTag$3:case numberTag$3:return eq(+t,+e);case errorTag$2:return t.name==e.name&&t.message==e.message;case regexpTag$3:case stringTag$3:return t==e+"";case mapTag$5:var s=mapToArray;case setTag$5:if(s=s||setToArray,t.size!=e.size&&!(n&COMPARE_PARTIAL_FLAG$1))return!1;var u=o.get(t);return u?u==e:(n|=COMPARE_UNORDERED_FLAG$1,o.set(t,e),s=equalArrays(s(t),s(e),n,i,a,o),o.delete(t),s);case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(t)==symbolValueOf$1.call(e)}return!1}var COMPARE_PARTIAL_FLAG$2=1,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty;function equalObjects(t,e,r,n,i,a){var o=r&COMPARE_PARTIAL_FLAG$2,s=getAllKeys(t),u=s.length;if(u!=getAllKeys(e).length&&!o)return!1;for(var c=u;c--;){var f=s[c];if(!(o?f in e:hasOwnProperty$b.call(e,f)))return!1}var l=a.get(t),h=a.get(e);if(l&&h)return l==e&&h==t;var d=!0;a.set(t,e),a.set(e,t);for(var v=o;++c<u;){var g,b=t[f=s[c]],p=e[f];if(!(void 0===(g=n?o?n(p,b,f,e,t,a):n(b,p,f,t,e,a):g)?b===p||i(b,p,r,n,a):g)){d=!1;break}v=v||"constructor"==f}return!d||v||(l=t.constructor)!=(h=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof l&&l instanceof l&&"function"==typeof h&&h instanceof h)&&(d=!1),a.delete(t),a.delete(e),d}var COMPARE_PARTIAL_FLAG$3=1,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",objectTag$3="[object Object]",objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty;function baseIsEqualDeep(t,e,r,n,i,a){var o=isArray(t),s=isArray(e),u=o?arrayTag$2:getTag$1(t),c=s?arrayTag$2:getTag$1(e),f=(u=u==argsTag$3?objectTag$3:u)==objectTag$3,s=(c=c==argsTag$3?objectTag$3:c)==objectTag$3;if((c=u==c)&&isBuffer(t)){if(!isBuffer(e))return!1;f=!(o=!0)}return c&&!f?(a=a||new Stack,o||isTypedArray(t)?equalArrays(t,e,r,n,i,a):equalByTag(t,e,u,r,n,i,a)):r&COMPARE_PARTIAL_FLAG$3||(f=f&&hasOwnProperty$c.call(t,"__wrapped__"),s=s&&hasOwnProperty$c.call(e,"__wrapped__"),!f&&!s)?!!c&&equalObjects(t,e,r,n,i,a=a||new Stack):i(f?t.value():t,s?e.value():e,r,n,a=a||new Stack)}function baseIsEqual(t,e,r,n,i){return t===e||(null==t||null==e||!isObjectLike(t)&&!isObjectLike(e)?t!=t&&e!=e:baseIsEqualDeep(t,e,r,n,baseIsEqual,i))}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=r[i])[0],c=t[u],f=s[1];if(o&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l,h=new Stack;if(!(void 0===(l=n?n(c,f,u,t,e,h):l)?baseIsEqual(f,c,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,n,h):l))return!1}}return!0}function isStrictComparable(t){return t==t&&!isObject(t)}function getMatchData(t){for(var e=keys(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,isStrictComparable(i)]}return e}function matchesStrictComparable(e,r){return function(t){return null!=t&&t[e]===r&&(void 0!==r||e in Object(t))}}function baseMatches(e){var r=getMatchData(e);return 1==r.length&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(t){return t===e||baseIsMatch(t,e,r)}}function baseHasIn(t,e){return null!=t&&e in Object(t)}function hasPath(t,e,r){for(var n=-1,i=(e=castPath(e,t)).length,a=!1;++n<i;){var o=toKey(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&isLength(i)&&isIndex(o,i)&&(isArray(t)||isArguments(t))}function hasIn(t,e){return null!=t&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(r,n){return isKey(r)&&isStrictComparable(n)?matchesStrictComparable(toKey(r),n):function(t){var e=get(t,r);return void 0===e&&e===n?hasIn(t,r):baseIsEqual(n,e,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return"function"==typeof t?t:null==t?identity:"object"==typeof t?isArray(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(u){return function(t,e,r){for(var n=-1,i=Object(t),a=r(t),o=a.length;o--;){var s=a[u?o:++n];if(!1===e(i[s],s,i))break}return t}}var baseFor=createBaseFor();function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(a,o){return function(t,e){if(null==t)return t;if(!isArrayLike(t))return a(t,e);for(var r=t.length,n=o?r:-1,i=Object(t);(o?n--:++n<r)&&!1!==e(i[n],n,i););return t}}var baseEach=createBaseEach(baseForOwn);function castFunction(t){return"function"==typeof t?t:identity}function forEach(t,e){return(isArray(t)?arrayEach:baseEach)(t,castFunction(e))}function arrayEvery(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function baseEvery(t,n){var i=!0;return baseEach(t,function(t,e,r){return i=!!n(t,e,r)}),i}function every(t,e,r){return(isArray(t)?arrayEvery:baseEvery)(t,baseIteratee(e=r&&isIterateeCall(t,e,r)?void 0:e))}function baseFilter(t,n){var i=[];return baseEach(t,function(t,e,r){n(t,e,r)&&i.push(t)}),i}function filter(t,e){return(isArray(t)?arrayFilter:baseFilter)(t,baseIteratee(e))}function createFind(a){return function(t,e,r){var n,i=Object(t);return isArrayLike(t)||(n=baseIteratee(e),t=keys(t),e=function(t){return n(i[t],t,i)}),-1<(r=a(t,e,r))?i[n?t[r]:r]:void 0}}var nativeMax$1=Math.max;function findIndex(t,e,r){var n=null==t?0:t.length;return n?((r=null==r?0:toInteger(r))<0&&(r=nativeMax$1(n+r,0)),baseFindIndex(t,baseIteratee(e),r)):-1}var find=createFind(findIndex);function baseMap(t,n){var i=-1,a=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(t,e,r){a[++i]=n(t,e,r)}),a}function map(t,e){return(isArray(t)?arrayMap:baseMap)(t,baseIteratee(e))}function forIn(t,e){return null==t?t:baseFor(t,castFunction(e),keysIn)}var mapTag$6="[object Map]",setTag$6="[object Set]",objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function isEmpty(t){if(null==t)return!0;if(isArrayLike(t)&&(isArray(t)||"string"==typeof t||"function"==typeof t.splice||isBuffer(t)||isTypedArray(t)||isArguments(t)))return!t.length;var e,r=getTag$1(t);if(r==mapTag$6||r==setTag$6)return!t.size;if(isPrototype(t))return!baseKeys(t).length;for(e in t)if(hasOwnProperty$d.call(t,e))return!1;return!0}function isEqual(t,e){return baseIsEqual(t,e)}function isUndefined(t){return void 0===t}function baseSome(t,n){var i;return baseEach(t,function(t,e,r){return!(i=n(t,e,r))}),!!i}function some(t,e,r){return(isArray(t)?arraySome:baseSome)(t,baseIteratee(e=r&&isIterateeCall(t,e,r)?void 0:e))}var projections={},Projection=(sg.prototype.moveWithPixel=function(t,e,r){var n=this.getResolution(r),r=e[0]*n,n=e[1]*n,t=this.project(t[0],t[1]);return this.unproject(t[0]+r,t[1]+n)},sg.prototype.moveWithPos=function(t,e){return e=[(t=this.project(t[0],t[1]))[0]+e[0],t[1]+e[1]],this.unproject(e[0],e[1])},sg);function sg(t,e,r,n){this.project=e,this.unproject=r,this.getResolution=n,projections[t]=this}var ProjectionManager={getProjection:function(t){return projections[t]}},LngLat=new Projection("EPSG:4326",function(t,e){return[t,e]},function(t,e){return[t,e]},function(t){return.703125/Math.pow(2,t)}),SphericalMercator=(Rg=Math.PI/180,Sg=180/Math.PI,Tg=6378137,new Projection("EPSG:3857",function(t,e){var r=85.0511287798;return e=Math.max(Math.min(r,e),-r),t*=Rg,e*=Rg,e=Math.log(Math.tan(Math.PI/4+e/2)),[t*Tg,e*Tg]},function(t,e){return[t/Tg*Sg,(2*Math.atan(Math.exp(e/Tg))-Math.PI/2)*Sg]},function(t){return 156543.03392804097/Math.pow(2,t)})),Rg,Sg,Tg,LCS=(g6.prototype.setMap=function(t){this.map=t},g6.prototype.getSize=function(){return[this.lg,this.dg]},g6.prototype.getNum=function(){return[this.cg,this.vg]},g6.prototype.getLocalByLnglat=function(t){var e,t=(e=ProjectionManager.getProjection("EPSG:3857")).project.apply(e,t);return this.getLocalByCoord(t)},g6.prototype.getLocalByCoord=function(t){var e=Math.floor(t[0]/this.lg),r=Math.floor(t[1]/this.dg),n=this.getLocalCenterByXY(e,r);return{Sa:[t[0]-n.center[0],t[1]-n.center[1]],x:e,y:r,center:n.center,Ro:n.Ro}},g6.prototype.getLocalCenterByXY=function(t,e){var r={x:t,y:e,center:[0,0],Ro:[0,0,0,0]};return r.center=[(t+.5)*this.lg,(e+.5)*this.dg],r.Ro=[t*this.lg,e*this.dg,(t+1)*this.lg,(e+1)*this.dg],r},g6.prototype.getDeltaCoord=function(t){var e=this.getLocalByCoord(t);return[t[0]-e.center[0],t[1]-e.center[1]]},g6);function g6(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this.cg=128,this.vg=128,this.lg=(this.hg[2]-this.hg[0])/this.cg,this.dg=(this.hg[3]-this.hg[1])/this.vg}var lcs=new LCS,E4326=ProjectionManager.getProjection("EPSG:4326"),E3857=ProjectionManager.getProjection("EPSG:3857"),HALF_WORLD_SIZE=20037508.342789244,LngLat$1={Ro:[-180,-90,180,90],project:function(t,e,r){return e=E4326.project(t,e),this.transform(e[0],e[1],r)},unproject:function(t,e,r){return r=this.Xs(t,e,r),E4326.unproject(r[0],r[1])},transform:function(t,e,r){var n=void 0===r?180:256<<r,a=this.Ro[2]-this.Ro[0],r=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/a*(2*n),e=n-(e-this.Ro[1])/r*n]},Xs:function(t,e,r){return[t=360*(t/(2*(r=void 0===r?180:256<<r))-.5),e=180*-(e/r-.5)]},nt:function(t,e,r){return this.Xs(t,e,r)},wu:function(t,e,r){return this.Xs(t,e,r)},yo:function(t,e,r){var n=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),i=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3])),a=t%this.Ro[3],o=e%this.Ro[3],o=this.transform(a,o,r);return t=this.wu(t,t,r)[0]*n+o[0],e=this.wu(e,e,r)[1]*i+o[1],[t-(r=this.transform(0,0,r))[0],e-r[1]]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,n){var i=n.X(t[0],t[1]);return[(r=n.X(t[0]+e,t[1]+r))[0]-i[0],r[1]-i[1]]}},SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(t,e,r){return e=E3857.project(t,e),this.transform(e[0],e[1],r)},unproject:function(t,e,r){return r=this.Xs(t,e,r),E3857.unproject(r[0],r[1])},transform:function(t,e,r){t=Math.min(20037508.342789244,Math.max(t,-20037508.342789244)),e=Math.min(20037508.342789244,Math.max(e,-20037508.342789244));var n=void 0===r?40075016.68557849:256*Math.pow(2,r),i=this.Ro[2]-this.Ro[0],r=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/i*n,e=n-(e-this.Ro[1])/r*n]},Xs:function(t,e,r){return[t=(t/(r=void 0===r?40075016.68557849:256*Math.pow(2,r))-.5)*this.Ro[2]*2,e=-(e/r-.5)*this.Ro[2]*2]},nt:function(t,e,r,n){return[t=this.Xs(t,e,r)[0]-this.Ro[0],e=this.Ro[2]-this.Xs(t,e,r)[1]]},wu:function(t,e,r,n){var i=n.center,a=n.size,n=(n.rotation||0)/180*Math.PI,e=(t=this.transform(t,e,r))[0],t=t[1],r=e-(i=this.transform(i[0],i[1],r))[0],e=t-i[1],t=Math.sqrt(Math.pow(r,2)+Math.pow(e,2)),i=0==e?Math.PI/2:Math.atan(Math.abs(r/e)),n=r*e<=0?i+n:i-n,e=0<e?1:-1;return[a[0]/2+t*Math.sin(0<r?n:-n),a[1]/2+t*Math.cos(n)*e]},yo:function(t,e,r,n){var i=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),a=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3])),o=t%this.Ro[3],s=e%this.Ro[3],o=this.transform(o,s,r),r=(s=this.transform(0,0,r))[0],s=s[1];return[(t=r*i+o[0])-r,(e=s*a+o[1])-s]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,n){var i=n.X(t[0],t[1]);return[(r=n.X(t[0]+e,t[1]+r))[0]-i[0],r[1]-i[1]]}},transform={"EPSG:4326":LngLat$1,"EPSG:3857":SphericalMercator$1},LocalZoom=13,LocalTileZoom=12,AMapStyleSource="",zoomRange=[2,26],CONSTS={ID:"__id__",Rp:zoomRange[1],Mp:zoomRange[0],jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:360,t1:300,e1:30,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:zoomRange,icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,retina:!0,zooms:zoomRange},text:{type:"billboard",direction:"top",offset:[0,0],zooms:zoomRange,style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],sp:4,Cd:.78125,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",ic:1,ud:13,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:"sdf",RB:"sdfJson",FN:"version"},G7,G7=exports.n0||(exports.n0={});G7.nebula="nebula",G7.nebulaLabel="nebulaLabel";var DangerousFontSize=24,H7,H7=exports.cY||(exports.cY={});H7[H7.dynamic=0]="dynamic",H7[H7.icon=1]="icon";var EnumLabelFragType={icon:0,bg:6,tq:8,text:2},defaultCap=["butt","butt"],I7,I7=exports.uc||(exports.uc={});I7.BLOB="blob",I7.TOLOAD="toload",I7.LOADING="loading",I7.LOADED="loaded",I7.UNLOADED="unloaded",I7.ERROR="error",I7.RELOADING="reloading",I7.UNCOMBINED="uncombined",I7.COMBINING="combining",I7.COMBINED="combined";var tmp1=4294901760,tmp2=65535;function getUploadName(t,e){return((t=tmp1-(t<<16))+(e=tmp2-e)).toString(16)}function staticSDFTileKeyToKey(t){var e=map(t.split(","),function(t){return parseInt(t,10)}),r=e[1],t=e[2];return e[0]<10?"lesszoom10":(10===e[0]||(12===e[0]?(r=Math.floor(r/4),t=Math.floor(t/4)):14===e[0]?(r=Math.floor(r/16),t=Math.floor(t/16)):15===e[0]&&(r=Math.floor(r/32),t=Math.floor(t/32))),getUploadName(r,t))}var labelsUtil={Bj:function(t){var e,r={};for(e in t=void 0===t?{}:t)t.hasOwnProperty(e)&&(r[e]=1);return r},zj:function(t,e){t.gs=e,t.qj=e.options||{},t.Wj=e.Wj||{},t.Fs=e.Fs||{},t.Gj=e.Gj||{},t.Hj=e.Hj||{},t.Vj=e.Vj||{},t.$j=e.$j||0},Yj:function(t,e){void 0===t&&(t=[NaN,NaN,NaN,NaN]),void 0===e&&(e=[0,0,0,1]);for(var r=0;r<t.length;r++){var n=t[r];isNaN(n)&&(t[r]=e[r])}return t},Kj:function(t){return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]},Xj:function(t,e){for(var r=[],n=(e=void 0===e?{}:e).qw,i=e.Aw,a=e.complete,o=0,s=t;o<s.length;o++){var u=s[o],u=new Promise(u);r.push(u)}var c=0;Promise.all(r).then(function(){n&&n.apply(void 0,arguments),a&&!c&&(c=1,a.apply(void 0,arguments))}).catch(function(){i&&i.apply(void 0,arguments),a&&!c&&(c=1,a.apply(void 0,arguments))})},Jj:function(t,e){var r=t[0],i=void 0===(n=t[1])?0:n,n=void 0===(a=e[0])?0:a,a=void 0===(a=e[1])?0:a;return t=(void 0===r?0:r)<=n?n<=i?a<i?[n,a]:[n,i]:null:labelsUtil.Jj(e,t)},measureText:function(t,e,r,n){if(void 0===e&&(e=""),"3D"===(n=void 0===n?"3D":n))return t.measureText(e,r)},lnglatToContainer:function(t,e){return(void 0===(e=e.zoom)?20:e)<LocalZoom?t:(e=lcs.getLocalByCoord(t),vector.Ip(t,e.center))},Sd:function(t,e){var r=t[0],t=void 0===(n=t[1])?0:n,n=e[0],e=void 0===(e=e[1])?0:e,r=Math.abs((void 0===n?0:n)-(void 0===r?0:r)),t=Math.abs(e-t);return Math.sqrt(Math.pow(r,2)+Math.pow(t,2))},getAngle:function(t,e){var r=t[0],n=t[1],t=e[0],n=(void 0===(e=e[1])?0:e)-(void 0===n?0:n);return 0==(r=(void 0===t?0:t)-(void 0===r?0:r))?n<0?3*Math.PI/2:Math.PI/2:0===(n=Math.atan(n/r))||0<n?0<=r?n:n+Math.PI:0<r?2*Math.PI+n:Math.PI+n},Fd:function(t,e,r){for(var n=t[0],i=void 0===n?0:n,a=void 0===(t=t[1])?0:t,o=(void 0===(t=e[0])?0:t)-i,s=(void 0===(e=e[1])?0:e)-a,u=[],c=0;c<r;)u.push([i+o/(r+1)*(c+1),a+s/(r+1)*(c+1)]),c++;return u},OG:function(t,e,r){return 0===r?t:[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]},Ed:function(t,e){void 0===e&&(e="ch");var r=(t=void 0===t?[]:t).length;if(!r)return!1;var n=t[0],i=t[4<=r?Math.floor(r/4*3):r-1],a=n[0],t=n[1],i=[(r=i[0])-a,(n=i[1])-t];return(i="ch"===e&&1<Math.abs((n-t)/(r-a))?vector.Zj(i,[0,1]):vector.Zj(i,[1,0]))<0},Nd:function(t,e,r){var n,i=t[0],a=t[1],o=e[0],e=((t=e[1])-a)/(o-i),a=[o-i,t-a];return 1<Math.abs(e)&&"x"!==r?(n=0<vector.Zj(a,[0,-1])?vector.Qj(a,[0,-1]):vector.Qj(a,[0,1]),0<e&&(n=-n)):(n=0<vector.Zj(a,[1,0])?vector.Qj(a,[1,0]):vector.Qj(a,[-1,0]),e<0&&(n=-n)),n},Od:function(t,e,r){var n=r*Math.sin(e),e=r*Math.cos(e);return[t[0]+e,t[1]+n]},jd:function(t,e,r,n){var i=vector.Ip(t,e),a=vector.length(i),t=vector.Ip(r,e),r=vector.length(t),i=vector.Zj(i,t),i=Math.acos(i/(a*r)),r=Math.PI-i,i=a*Math.sin(r),r=a*Math.cos(r),n=Math.sqrt(Math.pow(n,2)-Math.pow(i,2))-r,i=0===t[0]?0<t[1]?Math.PI/2:-Math.PI/2:Math.atan(t[1]/t[0]),r=Math.abs(n*Math.sin(i)),n=n*Math.cos(i),i=vector.Zj(t,[1,0]),t=vector.Zj(t,[0,1]);return vector.add(e,[0<=i?n:-n,0<=t?r:-r])},rank:function(t){for(var e=[],r=0;r<t.length;r++){var n=parseFloat(t[r]);n<0?(t.splice(r--,1),e.push(n)):t[r]=n}return t.sort(function(t,e){return t-e}),e.concat(t)},$p:function(t){var e=CONSTS.Mp,r=CONSTS.Rp;return t[1]>=zoomRange[1]&&(t[1]=r),t[0]<=zoomRange[0]&&(t[0]=e),t},toString:function(t,e){void 0===e&&(e=4);var r="";if(!t)return r;for(var n=0,i=t;n<i.length;n++){var a=i[n];r+=(a+"").length<e?a:a.toFixed(e)}return r},xf:function(t,e){var r,n,i,a=[],o=e.ja,s=e.Fa,u=e.Oa,c=e.Ea;for(r in t)t.hasOwnProperty(r)&&r!==CONSTS.gH&&r!==CONSTS.FN&&r!==CONSTS.RB&&("shields"!==r&&o?(i=r.split("-"),n=parseInt(i[1],10),i=parseInt(i[2],10),o<=n&&n<=u&&s<=i&&i<=c&&a.push(t[r])):a.push(t[r]));return a.length?a:t},EQ:function(t,e){for(var r=[],n=e.length,i=0;i<n-1;i++){var a=t.substring(e[i],e[i+1]);r.push(a)}return n?r:t.split("")},aQ:function(t){for(var e=[],r=0;r<t.length;r++){for(var n=t[r],i=[],a=0;a<n.length;a++){var o=n.charCodeAt(a);i.push(o)}var s=i.join("|");e.push(s)}return e},tQ:function(t,e,r){var n="",i=[],a="";if(t.name)if(t.JQ&&0<t.JQ.length)n=getSpiltLineWithSpiltIndex(t.name,t.JQ),a="ch";else if(r){var o=r.lineBreak(t.name,{from:"labelsLayer",CO:[]}),s=0,u="";if(2<=o.oQ.length){for(var c=1,f=o.oQ.length-1;c<f;c++)u+=t.name.slice(s,o.oQ[c])+" ",s=o.oQ[c];u+=t.name.slice(s)}else u=t.name;n=u,a="ch"}else n=t.name,a="ch";else{switch(e){case"en":n=t.name_en,i=t.iQ,a="en";break;case"local":n=t.QQ,i=t.$G,a=t.CQ;break;default:n=t.BQ,a="ch"}n||(t.name_en?(n=t.name_en,i=t.iQ,a="en"):t.QQ&&(n=t.QQ,i=t.$G,a=t.QQ))}return{name:n,$G:i,type:a}}},vector={add:function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=t[n]+e[n];return r},Ip:function(t,e){for(var r=[],n=0;n<t.length;n++)r.push(t[n]-e[n]);return r},multiply:function(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var a=i[n];r.push(a*e)}return r},Up:function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=t[n]/e;return r},tA:function(t){return this.multiply(t,-1)},Zj:function(t,e){var r=t[0],n=t[1];return(void 0===r?0:r)*(void 0===(t=e[0])?0:t)+(void 0===n?0:n)*(void 0===(e=e[1])?0:e)},Qj:function(t,e){var r=vector.Zj(t,e),t=vector.length(t),e=vector.length(e);return Math.acos(r/(t*e))},length:function(t){var e=t[0],t=t[1];return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}},noop=function(t){};function getSpiltLineWithSpiltIndex(t,e){if(e.shift(),0===e.length)return t;for(var r="",n=0,i=0,a=e.length;i<a;i++)r+=t.substr(n,e[i]-n)+" ",n=e[i];return r+t.substr(e[e.length-1])}var XHR={send:function(t,e){void 0===e&&(e={});var r=new XMLHttpRequest,i=void 0===(n=e.qw)?noop:n,o=void 0===(a=e.Aw)?noop:a,n=e.Me,a=e.method,e=e.content;return r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var t=r.response;try{i(t)}catch(t){o(t)}}else 404===r.status&&(r.abort(),o(Error("404")))},r.onerror=function(t){r.abort(),o(t)},r.open(a||"GET",t,!0),r.responseType=n||"json",r.send(e||void 0),r}},scale=Browser.scale,LabelsRenderUtil={getBounds:function(t,e){var r=(e=void 0===e?{}:e).zoom,n=e.centerCoord,i=(e.view,[150*scale,150*scale,150*scale,150*scale]),o=(a=t.boundsCoord)[0],s=a[1],u=a[2],c=a[3],t=this.nt(0,0,r,e),a=vector.Ip(this.nt(i[0],i[1],r,e),t),t=vector.Ip(this.nt(i[2],i[3],r,e),t),n=(r=LocalZoom<=r?n:[0,0])[0],r=r[1];return[[o-n-Math.abs(t[1]),s-r-Math.abs(t[0])],[u-n+Math.abs(a[1]),c-r+Math.abs(a[0])]]},gz:function(t,e){var r=e[0],n=e[1],i=t[0],e=t[1],t=i-r[0],r=e-r[1],i=n[0]-i,e=n[1]-e;return 0<=t&&0<=r&&0<=i&&0<=e},getRank:function(t,e){var r=(e=void 0===e?{}:e).forceShow,e=e._z,t=(t.data||{}).rank||1;return void 0!==r&&r?t-1e5:(void 0===e?0:e)/100*2e5+t},wu:function(t,e,r,n){if(void 0===t&&(t=0),void 0===e&&(e=0),n){var i=n.viewState,a=n.size,o=n.transform,s=n.view,u=n.viewMode,c=n.centerCoord,n=n.positionType;return"2D"!==u?"relative"===(void 0===n?"relative":n)?s.H(t,e):s._u(t,e):(a={center:i.centerCoord,rotation:i.rotation,size:a},c=(i=i.optimalZoom>=LocalZoom?c:[0,0])[0],i=i[1],o.wu(t+c,e+i,r,a))}},r0:function(t,e,r,n,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),i){var a=i.viewState,o=i.size,s=i.transform,u=i.view,c=i.viewMode,f=i.centerCoord,i=i.positionType;return"2D"!==c?"relative"===(void 0===i?"relative":i)?u.H(t,e,r):u._u(t,e,r):(o={center:a.centerCoord,rotation:a.rotation,size:o},f=(a=a.optimalZoom>=LocalZoom?f:[0,0])[0],a=a[1],s.wu(t+f,e+a,n,o))}},kz:function(t,e,r,n){if(void 0===t&&(t=[]),n=(n=void 0===n?{}:n).centerCoord,e<LocalZoom&&LocalZoom<=r){for(var i=n[0],a=n[1],o=[],s=0,u=t;s<u.length;s++){var c=u[s];o.push([c[0]-i,c[1]-a])}return o}return t},nt:function(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0);var i=n.view,a=n.transform;return"2D"===n.viewMode?a.nt(t,e,r):i.X(t,e)},MG:function(t,e){return t<LocalZoom-1?[0,0]:e}};function isLngLat(t){return t&&"AMap.LngLat"===t.className}function isPixel(t){return t&&"AMap.Pixel"===t.className}function isSize(t){return t&&"AMap.Size"===t.className}function isLayer(t){return Boolean(t&&t.el&&"AMap.Layer"===t.el)}function isVectorLayer(t){return t&&"AMap.VectorLayer"===t.CLASS_NAME}function isOverlay(t){return t&&t.className&&Util.startsWith(t.className,"Overlay")}function isOverlayGroup(t){return t&&("Overlay.OverlayGroup"===t.className||"Overlay.GeoJSON"===t.className)}function isCircleMarker(t){return t&&t.className&&"Overlay.CircleMarker"===t.className}function isPolyline(t){return t&&t.className&&"Overlay.Polyline"===t.className}function isBezierCurve(t){return t&&t.className&&"Overlay.BezierCurve"===t.className}function isBounds(t){return t&&"AMap.Bounds"===t.className}function isNumber(t){return"number"==typeof+(t=+t)&&!isNaN(t)}function isNumberArray(t){return Array.isArray(t)&&isNumber(t[0])}function isNumberArrayArray(t){return Array.isArray(t)&&isNumberArray(t[0])}function isNumberArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArray(t[0])}function isNumberArrayArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArrayArray(t[0])}function isLnglatLike(t){return isLngLat(t)||isNumberArray(t)}function isLnglatLikeArray(t){return Array.isArray(t)&&isLnglatLike(t[0])}function isLnglatLikeArrayArray(t){return Array.isArray(t)&&isLnglatLikeArray(t[0])}function isLnglatLikeArrayArrayArray(t){return Array.isArray(t)&&isLnglatLikeArrayArray(t[0])}function isInnerLabelsLayer(t){return t&&"AMap.Inner.LabelsLayer"===t.CLASS_NAME}function isUndefined$1(t){return void 0===t}function calcTileMectorBounds(t,e,r){var n=ProjectionManager.getProjection("EPSG:3857"),i=Math.pow(2,t),a=(e=(a=360/i)*e-180)+a,t=(r=(t=180/i)*(i-r-1)-90)+t;return[r=(e=n.project(e,r))[0],e=e[1],(t=n.project(a,t))[0],t[1]]}function parseLngLatData(t){if(Array.isArray(t)){if(!Array.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=parseLngLatData(t[r])}return t}function jsonLngLatData(t){if(isLngLat(t))return[t.getLng(),t.getLat()];if(Array.isArray(t)){for(var e=t.slice(0),r=0;r<e.length;r+=1)e[r]=jsonLngLatData(e[r]);return e}return t}var Coordinate={lr:function(t,e){for(var r=1/0,n=0,i=1,a=e.length;i<a;n=i,i+=1)r=Math.min(r,this.ur(t,[e[n],e[i]]));return Math.sqrt(r)},ur:function(t,e){return this.cr(t,this.closestOnSegment(t,e))},cr:function(t,e){var r=t[0]-e[0];return r*r+(e=t[1]-e[1])*e},pr:function(t,e,r,n){if(n=n||1e-6,r[0]!==e[0])return i=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]),e=(r[1]-e[1])/(r[0]-e[0])*(t[0]-e[0])+e[1],Math.abs(e-t[1])<n&&t[0]>=i&&t[0]<=a;var i=Math.min(e[1],r[1]),a=Math.max(e[1],r[1]);return Math.abs(t[0]-r[0])<n&&t[1]>=i&&t[1]<=a},closestOnSegment:function(t,e){var r,n=t[0],i=t[1],a=e[0],o=e[1],s=a[0],u=a[1],t=o[0],o=(e=o[1])-u,o=(i=0==(a=t-s)&&0==o?0:(a*(n-s)+o*(i-u))/(a*a+o*o||0))<=0?(r=s,u):1<=i?(r=t,e):(r=s+i*a,u+i*o);return[r,o]},isClockwise:function(t){for(var e,r,n=t.length,i=0,a=t[n-1],o=a[0],s=a[1],u=0;u<n;u+=1)i+=((e=(r=t[u])[0])-o)*((r=r[1])+s),o=e,s=r;return 0<i},ss:function(t,e,r){for(var n=t[0],i=t[1],a=!1,o=e.length,s=0,u=o-1;s<o;u=s,s+=1){var c=!1,f=e[s][0],l=e[s][1],h=e[u][0],d=e[u][1];if(f===n&&l===i||h===n&&d===i)return!!r;if(l<i==i<=d){if(n===(f=(h-f)*(i-l)/(d-l)+f))return!!r;c=n<f}c&&(a=!a)}return a},dr:function(t,e){for(var r,n=function(t,e,r){return(r[0]-e[0])*(t[1]-e[1])>(r[1]-e[1])*(t[0]-e[0])},i=function(t,e,r,n){var i=[t[0]-e[0],t[1]-e[1]],a=[r[0]-n[0],r[1]-n[1]],e=t[0]*e[1]-t[1]*e[0],r=r[0]*n[1]-r[1]*n[0],n=1/(i[0]*a[1]-i[1]*a[0]);return[(e*a[0]-r*i[0])*n,(e*a[1]-r*i[1])*n]},a=t,o=e[e.length-2],s=0,u=e.length-1;s<u;s++){for(var c=e[s],f=a,a=[],l=f[f.length-1],h=0,d=f.length;h<d;h++)n(r=f[h],o,c)?(n(l,o,c)||a.push(i(o,c,l,r)),a.push(r)):n(l,o,c)&&a.push(i(o,c,l,r)),l=r;o=c}return a.length<3?[]:(a.push(a[0]),a)}},Pixel=($o.prototype.getX=function(){return this.x},$o.prototype.round=function(){return new $o(Math.round(this.x),Math.round(this.y))},$o.prototype.getY=function(){return this.y},$o.prototype.toString=function(){return this.x+","+this.y},$o.prototype.equals=function(t){return t instanceof $o&&Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=1e-9},$o.prototype.toArray=function(){return[this.x,this.y]},$o.prototype.subtract=function(t,e){return new $o(this.x-t.x,this.y-t.y,e)},$o.prototype.multiplyBy=function(t,e){return new $o(this.x*t,this.y*t,e)},$o.prototype.direction=function(){var t=this.x,e=this.y;if(0===t&&0===e)return null;if(0===t)return 0<e?90:270;var r=180*Math.atan(e/t)/Math.PI;return t<0&&0<e||t<0&&e<0?180+r:0<t&&e<0?360+r:r},$o.prototype.toJSON=function(){return[this.x,this.y]},$o);function $o(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Pixel",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.x=r?Math.round(t):Number(t),this.y=r?Math.round(e):Number(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.gP&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var dist=createCommonjsModule(function(t,e){!function(t){function n(t,e){return e<t?1:t<e?-1:0}function b(e,r){void 0===r&&(r=!1),this.bP=e=void 0===e?n:e,this.yP=null,this._size=0,this.mP=!!r}var vt={size:{configurable:!0}};b.prototype.TP=function(e){var r=e.right;r&&(e.right=r.left,r.left&&(r.left.parent=e),r.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.left=e),e.parent=r},b.prototype.wP=function(e){var r=e.left;r&&(e.left=r.right,r.right&&(r.right.parent=e),r.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.right=e),e.parent=r},b.prototype.AP=function(e){for(;e.parent;){var r=e.parent;r.parent?r.left===e&&r.parent.left===r?(this.wP(r.parent),this.wP(r)):r.right===e&&r.parent.right===r?(this.TP(r.parent),this.TP(r)):r.left===e&&r.parent.right===r?(this.wP(r),this.TP(r)):(this.TP(r),this.wP(r)):r.left===e?this.wP(r):this.TP(r)}},b.prototype.xP=function(e){for(var r,n,a,o;e.parent;)(n=(r=e.parent).parent)&&n.parent?((o=n.parent).left===n?o.left=e:o.right=e,e.parent=o):(e.parent=null,this.yP=e),a=e.left,o=e.right,e===r.left?(n&&(n.left===r?(r.right?(n.left=r.right,n.left.parent=n):n.left=null,(r.right=n).parent=r):(a?(n.right=a).parent=n:n.right=null,(e.left=n).parent=e)),o?(r.left=o).parent=r:r.left=null,(e.right=r).parent=e):(n&&(n.right===r?(r.left?(n.right=r.left,n.right.parent=n):n.right=null,(r.left=n).parent=r):(o?(n.left=o).parent=n:n.left=null,(e.right=n).parent=e)),a?(r.right=a).parent=r:r.right=null,(e.left=r).parent=e)},b.prototype.replace=function(e,r){e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.parent=e.parent)},b.prototype.MP=function(e){if(e=void 0===e?this.yP:e)for(;e.left;)e=e.left;return e},b.prototype.SP=function(e){if(e=void 0===e?this.yP:e)for(;e.right;)e=e.right;return e},b.prototype.Xc=function(e,r){var n=this.yP,i=null,a=this.bP;if(this.mP)for(;n;){if(0===a((i=n).key,e))return;n=a(n.key,e)<0?n.right:n.left}else for(;n;)n=a((i=n).key,e)<0?n.right:n.left;return n={key:e,data:r,left:null,right:null,parent:i},i?a(i.key,n.key)<0?i.right=n:i.left=n:this.yP=n,this.xP(n),this._size++,n},b.prototype.find=function(e){for(var r=this.yP,n=this.bP;r;){var i=n(r.key,e);if(i<0)r=r.right;else{if(!(0<i))return r;r=r.left}}return null},b.prototype.contains=function(e){for(var r=this.yP,n=this.bP;r;){var i=n(e,r.key);if(0===i)return!0;r=i<0?r.left:r.right}return!1},b.prototype.remove=function(n){var r=this.find(n);return!!r&&(this.xP(r),r.left?r.right?((n=this.MP(r.right)).parent!==r&&(this.replace(n,n.right),n.right=r.right,n.right.parent=n),this.replace(r,n),n.left=r.left,n.left.parent=n):this.replace(r,r.left):this.replace(r,r.right),this._size--,!0)},b.prototype.removeNode=function(e){return!!e&&(this.xP(e),e.left?e.right?((r=this.MP(e.right)).parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0);var r},b.prototype.$P=function(i){var n,a=this.find(i);a&&(this.xP(a),n=a.left,i=a.right,a=null,n&&(n.parent=null,a=this.SP(n),this.xP(a),this.yP=a),i&&(n?a.right=i:this.yP=i,i.parent=a),this._size--)},b.prototype.pop=function(){var e=this.yP,r=null;if(e){for(;e.left;)e=e.left;r={key:e.key,data:e.data},this.remove(e.key)}return r},b.prototype.next=function(e){var r=e;if(r)if(r.right)for(r=r.right;r&&r.left;)r=r.left;else for(r=e.parent;r&&r.right===e;)r=(e=r).parent;return r},b.prototype.NM=function(e){var r=e;if(r)if(r.left)for(r=r.left;r&&r.right;)r=r.right;else for(r=e.parent;r&&r.left===e;)r=(e=r).parent;return r},b.prototype.forEach=function(e){for(var r=this.yP,n=[],i=!1,a=0;!i;)r?(n.push(r),r=r.left):0<n.length?(e(r=n.pop(),a++),r=r.right):i=!0;return this},b.prototype.range=function(e,r,n,i){for(var a=[],o=this.bP,s=this.yP;0!==a.length||s;)if(s)a.push(s),s=s.left;else{if(0<o((s=a.pop()).key,r))break;if(0<=o(s.key,e)&&n.call(i,s))return this;s=s.right}return this},b.prototype.keys=function(){for(var e=this.yP,r=[],n=[],i=!1;!i;)e?(r.push(e),e=e.left):0<r.length?(e=r.pop(),n.push(e.key),e=e.right):i=!0;return n},b.prototype.values=function(){for(var e=this.yP,r=[],n=[],i=!1;!i;)e?(r.push(e),e=e.left):0<r.length?(e=r.pop(),n.push(e.data),e=e.right):i=!0;return n},b.prototype.at=function(e){for(var r=this.yP,n=[],i=!1,a=0;!i;)if(r)n.push(r),r=r.left;else if(0<n.length){if(r=n.pop(),a===e)return r;a++,r=r.right}else i=!0;return null},b.prototype.load=function(e,r,n){if(void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=e.length;return n&&function c(t,e,r,n,i){if(!(n<=r)){for(var a=t[r+n>>1],o=r-1,s=n+1;;){for(;i(t[++o],a)<0;);for(;0<i(t[--s],a););if(s<=o)break;var u=t[o];t[o]=t[s],t[s]=u,u=e[o],e[o]=e[s],e[s]=u}c(t,e,r,s,i),c(t,e,s+1,n,i)}}(e,r,0,i-1,this.bP),this.yP=function f(c,e,r,n,i){var o=i-n;if(0<o)return o=n+Math.floor(o/2),(c={key:e[o],data:r[o],parent:c}).left=f(c,e,r,n,o),c.right=f(c,e,r,o+1,i),c;return null}(null,e,r,0,i),this._size=i,this},b.prototype.min=function(){var e=this.MP(this.yP);return e?e.key:null},b.prototype.max=function(){var e=this.SP(this.yP);return e?e.key:null},b.prototype.isEmpty=function(){return null===this.yP},vt.size.get=function(){return this._size},b.LP=function(e,r,n,i,a){return new b(n,a).load(e,r,i)},Object.defineProperties(b.prototype,vt);var o=0,u=1,l=2,h=3,p=0,s=1,y=2,d=3;function m(t,n,r){null===n?(t.PP=!1,t.OP=!0):(t._P===n._P?(t.PP=!n.PP,t.OP=n.OP):(t.PP=!n.OP,t.OP=n.NP()?!n.PP:n.PP),n&&(t.CP=!i(n,r)||n.NP()?n.CP:n));n=i(t,r);t.hN=n?function(t,e){var i,r=!t.PP,n=!t.OP;switch(e){case p:i=r&&n;break;case s:i=r||n;break;case d:i=r^n;break;case y:i=t._P?r&&!n:n&&!r}return i?1:-1}(t,r):0}function i(t,e){switch(t.type){case o:switch(e){case p:return!t.OP;case s:return t.OP;case y:return t._P&&t.OP||!t._P&&!t.OP;case d:return!0}break;case l:return e===p||e===s;case h:return e===y;case u:return!1}return!1}function v(e,r,n,i,a){this.left=r,this.point=e,this.IP=n,this._P=i,this.type=a||o,this.PP=!1,this.OP=!1,this.CP=null,this.hN=0,this.lN=-1,this.dN=-1,this.DP=!0}vt={EP:{configurable:!0}};function g(t,e){return t[0]===e[0]&&t[1]===e[1]}v.prototype.FP=function(e){var r=this.point,n=this.IP.point;return this.left?0<(r[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(r[1]-e[1]):0<(n[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(n[1]-e[1])},v.prototype.RP=function(e){return!this.FP(e)},v.prototype.NP=function(){return this.point[0]===this.IP.point[0]},vt.EP.get=function(){return 0!==this.hN},v.prototype.clone=function(){var e=new v(this.point,this.left,this.IP,this._P,this.type);return e.UP=this.UP,e.hN=this.hN,e.CP=this.CP,e.DP=this.DP,e.PP=this.PP,e.OP=this.OP,e},Object.defineProperties(v.prototype,vt);var vt=11102230246251565e-32,O=134217729;function U(t,e,r,n,i){var a,o,s,u,c=e[0],f=n[0],l=0,h=0;c<f==-c<f?(a=c,c=e[++l]):(a=f,f=n[++h]);var d=0;if(l<t&&h<r)for(c<f==-c<f?(s=a-((o=c+a)-c),c=e[++l]):(s=a-((o=f+a)-f),f=n[++h]),a=o,0!==s&&(i[d++]=s);l<t&&h<r;)c<f==-c<f?(s=a-((o=a+c)-(u=o-a))+(c-u),c=e[++l]):(s=a-((o=a+f)-(u=o-a))+(f-u),f=n[++h]),a=o,0!==s&&(i[d++]=s);for(;l<t;)s=a-((o=a+c)-(u=o-a))+(c-u),c=e[++l],a=o,0!==s&&(i[d++]=s);for(;h<r;)s=a-((o=a+f)-(u=o-a))+(f-u),f=n[++h],a=o,0!==s&&(i[d++]=s);return 0===a&&0!==d||(i[d++]=a),d}function T(t){return new(commonjsGlobal.Float64Array?Float64Array:Array)(t)}var F=T(4),B=T(8),G=T(12),z=T(16),V=T(4);function M(t,e,r,n,i,a){var o=(e-a)*(r-i),c=(t-i)*(n-a),u=o-c;if(0==o||0==c||0<o!=0<c)return u;c=Math.abs(o+c);return Math.abs(u)>=33306690738754716e-32*c?u:-function(s,u,r,n,c,f,o){var l,g,b,p,y,m,T,x,A,M,S=s-c,_=r-c,I=u-f,$=n-f,w=S*$,h=O*S,d=h-(h-S),v=S-d;F[0]=(T=v*(b=$-(g=(h=O*$)-(h-$)))-(w-d*g-v*g-d*b))-((p=T-(A=(v=I-(d=(h=O*I)-(h-I)))*(b=_-(g=(h=O*_)-(h-_)))-((x=I*_)-d*g-v*g-d*b)))+(l=T-p))+(l-A),F[1]=(m=w-((y=w+p)-(l=y-w))+(p-l))-((p=m-x)+(l=m-p))+(l-x),F[2]=y-((M=y+p)-(l=M-y))+(p-l),F[3]=M;var C=function(t,e){for(var r=e[0],n=1;n<t;n++)r+=e[n];return r}(4,F),k=22204460492503146e-32*o;return k<=C||k<=-C?C:(s=s-(S+(l=s-S))+(l-c),c=r-(_+(l=r-_))+(l-c),u=u-(I+(l=u-I))+(l-f),f=n-($+(l=n-$))+(l-f),0==s&&0==u&&0==c&&0==f||(k=11093356479670487e-47*o+33306690738754706e-32*Math.abs(C))<=(C+=S*f+$*s-(I*c+_*u))||k<=-C?C:(V[0]=(T=(v=s-(d=(h=O*s)-(h-s)))*(b=$-(g=(h=O*$)-(h-$)))-((w=s*$)-d*g-v*g-d*b))-((p=T-(A=(v=u-(d=(h=O*u)-(h-u)))*(b=_-(g=(h=O*_)-(h-_)))-((x=u*_)-d*g-v*g-d*b)))+(l=T-p))+(l-A),V[1]=(m=w-((y=w+p)-(l=y-w))+(p-l))-((p=m-x)+(l=m-p))+(l-x),V[2]=y-((M=y+p)-(l=M-y))+(p-l),V[3]=M,_=U(4,F,4,V,B),V[0]=(T=(v=S-(d=(h=O*S)-(h-S)))*(b=f-(g=(h=O*f)-(h-f)))-((w=S*f)-d*g-v*g-d*b))-((p=T-(A=(v=I-(d=(h=O*I)-(h-I)))*(b=c-(g=(h=O*c)-(h-c)))-((x=I*c)-d*g-v*g-d*b)))+(l=T-p))+(l-A),V[1]=(m=w-((y=w+p)-(l=y-w))+(p-l))-((p=m-x)+(l=m-p))+(l-x),V[2]=y-((M=y+p)-(l=M-y))+(p-l),V[3]=M,_=U(_,B,4,V,G),V[0]=(T=(v=s-(d=(h=O*s)-(h-s)))*(b=f-(g=(h=O*f)-(h-f)))-((w=s*f)-d*g-v*g-d*b))-((p=T-(A=(v=u-(d=(h=O*u)-(h-u)))*(b=c-(g=(h=O*c)-(h-c)))-((x=u*c)-d*g-v*g-d*b)))+(l=T-p))+(l-A),V[1]=(m=w-((y=w+p)-(l=y-w))+(p-l))-((p=m-x)+(l=m-p))+(l-x),V[2]=y-((M=y+p)-(l=M-y))+(p-l),V[3]=M,_=U(_,G,4,V,z),z[_-1]))}(t,e,r,n,i,a,c)}function S(t,e,n){n=M(t[0],t[1],e[0],e[1],n[0],n[1]);return 0<n?-1:n<0?1:0}function P(t,e){var r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r){return t.left!==e.left?t.left?1:-1:0!==S(r,t.IP.point,e.IP.point)?t.FP(e.IP.point)?-1:1:!t._P&&e._P?1:-1}(t,e,r)}function $(t,i,r){var n=new v(i,!1,t,t._P),i=new v(i,!0,t.IP,t._P);return g(t.point,t.IP.point)&&console.warn("what is that, a collapsed segment?",t),n.UP=i.UP=t.UP,0<P(i,t.IP)&&(t.IP.left=!0,i.left=!1),t.IP.IP=i,t.IP=n,r.push(i),r.push(n),r}function C(t,e){return t[0]*e[1]-t[1]*e[0]}function k(t,e){return t[0]*e[0]+t[1]*e[1]}function L(t,e,r){var s=function(t,h,r,d,i){var a=[h[0]-t[0],h[1]-t[1]],p=[d[0]-r[0],d[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var v=[r[0]-t[0],r[1]-t[1]],c=C(a,p),b=k(a,a);if(0<c*c){h=C(v,p)/c;if(h<0||1<h)return null;d=C(v,a)/c;return d<0||1<d?null:0==h||1==h?i?null:[s(t,h,a)]:0==d||1==d?i?null:[s(r,d,p)]:[s(t,h,a)]}return 0<(c=C(v,a))*c?null:(v=k(a,v)/b,p=v+k(a,p)/b,b=Math.min(v,p),p=Math.max(v,p),b<=1&&0<=p?1===b?i?null:[s(t,0<b?b:0,a)]:0===p?i?null:[s(t,p<1?p:1,a)]:i&&0===b&&1===p?null:[s(t,0<b?b:0,a),s(t,p<1?p:1,a)]:null)}(t.point,t.IP.point,e.point,e.IP.point),o=s?s.length:0;if(0===o)return 0;if(1===o&&(g(t.point,e.point)||g(t.IP.point,e.IP.point)))return 0;if(2===o&&t._P===e._P)return 0;if(1===o)return g(t.point,s[0])||g(t.IP.point,s[0])||$(t,s[0],r),g(e.point,s[0])||g(e.IP.point,s[0])||$(e,s[0],r),1;var a=[],o=!1,s=!1;return g(t.point,e.point)?o=!0:1===P(t,e)?a.push(e,t):a.push(t,e),g(t.IP.point,e.IP.point)?s=!0:1===P(t.IP,e.IP)?a.push(e.IP,t.IP):a.push(t.IP,e.IP),o&&s||o?(e.type=u,t.type=e.PP===t.PP?l:h,o&&!s&&$(a[1].IP,a[0].point,r),2):(s?$(a[0],a[1].point,r):a[0]!==a[3].IP?($(a[0],a[1].point,r),$(a[1],a[2].point,r)):($(a[0],a[1].point,r),$(a[3].IP,a[2].point,r)),3)}function _(t,e){if(t===e)return 0;if(0!==S(t.point,t.IP.point,e.point)||0!==S(t.point,t.IP.point,e.IP.point))return g(t.point,e.point)?t.FP(e.IP.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===P(t,e)?e.RP(t.point)?-1:1:t.FP(e.point)?-1:1;if(t._P!==e._P)return t._P?-1:1;var r=t.point,n=e.point;return r[0]===n[0]&&r[1]===n[1]?(r=t.IP.point,n=e.IP.point,r[0]===n[0]&&r[1]===n[1]?0:t.UP>e.UP?1:-1):1===P(t,e)?1:-1}function W(){this.points=[],this.vN=[],this.gN=null,this.depth=null}function K(t){for(var s=function(t){for(var e,i,a=[],r=0,n=t.length;r<n;r++)((e=t[r]).left&&e.EP||!e.left&&e.IP.EP)&&a.push(e);for(var o=!1;!o;)for(o=!0,r=0,n=a.length;r<n;r++)r+1<n&&1===P(a[r],a[r+1])&&(i=a[r],a[r]=a[r+1],a[r+1]=i,o=!1);for(r=0,n=a.length;r<n;r++)(e=a[r]).lN=r;for(r=0,n=a.length;r<n;r++)(e=a[r]).left||(i=e.lN,e.lN=e.IP.lN,e.IP.lN=i);return a}(t),u={},c=[],r=function(){if(!u[o]){var e=c.length,t=function(a,e,r){var u,n=new W;return null!=a.CP?(a=(u=a.CP).dN,0<u.hN?null!=(u=e[a]).gN?(e[u=u.gN].vN.push(r),n.gN=u,n.depth=e[a].depth):(e[a].vN.push(r),n.gN=a,n.depth=e[a].depth+1):(n.gN=null,n.depth=e[a].depth)):(n.gN=null,n.depth=0),n}(s[o],c,e),r=function(t){u[t]=!0,s[t].dN=e},n=o,i=o,a=s[o].point;for(t.points.push(a);;)if(r(n),r(n=s[n].lN),t.points.push(s[n].point),(n=function(t,e,r,n){var o,i=t+1,a=e[t].point,s=e.length;for(i<s&&(o=e[i].point);i<s&&o[0]===a[0]&&o[1]===a[1];){if(!r[i])return i;o=e[++i].point}for(i=t-1;r[i]&&n<i;)i--;return i}(n,s,u,i))==i)break;c.push(t)}},o=0,e=s.length;o<e;o++)r();return c}W.prototype.pN=function(){return null==this.gN};var Z=J,vt=J;function J(t,e){if(!(this instanceof J))return new J(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||tt,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this.zP(r)}function tt(t,e){return t<e?-1:e<t?1:0}J.prototype={push:function(t){this.data.push(t),this.length++,this.El(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this.zP(0)),this.data.pop(),t}},GP:function(){return this.data[0]},El:function(t){for(var e=this.data,r=this.compare,n=e[t];0<t;){var i=t-1>>1,a=e[i];if(0<=r(n,a))break;e[t]=a,t=i}e[t]=n},zP:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var a=1+(t<<1),o=a+1,s=e[a];if(o<this.length&&r(e[o],s)<0&&(s=e[a=o]),0<=r(s,i))break;e[t]=s,t=a}e[t]=i}},Z.default=vt;var et=Math.max,rt=Math.min,nt=0;function it(t,e,r,n,i,a){for(var o=0,s=t.length-1;o<s;o++){var d=t[o],h=t[o+1],f=new v(d,!1,void 0,e),l=new v(h,!1,f,e);f.IP=l,d[0]===h[0]&&d[1]===h[1]||(f.UP=l.UP=r,a||(f.DP=!1,l.DP=!1),0<P(f,l)?l.left=!0:f.left=!0,h=d[0],d=d[1],i[0]=rt(i[0],h),i[1]=rt(i[1],d),i[2]=et(i[2],h),i[3]=et(i[3],d),n.push(f),n.push(l))}}var ot=[];function st(t,e,r){var n=null;return t.length*e.length==0&&(r===p?n=ot:r===y?n=t:r!==s&&r!==d||(n=0===t.length?e:t)),n}function ut(t,e,r,n,i){var a=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(i===p?a=ot:i===y?a=t:i!==s&&i!==d||(a=t.concat(e))),a}function ct(t,e,r){var n=st(t="number"==typeof t[0][0][0]?[t]:t,e="number"==typeof e[0][0][0]?[e]:e,r);if(n)return n===ot?null:n;var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=function(t,e,r,n,i){for(var o,s,f,l,a=new Z(null,P),u=0,c=t.length;u<c;u++)for(f=0,l=(o=t[u]).length;f<l;f++)(s=0===f)&&nt++,it(o[f],!0,nt,a,r,s);for(u=0,c=e.length;u<c;u++)for(f=0,l=(o=e[u]).length;f<l;f++)s=0===f,(s=i===y?!1:s)&&nt++,it(o[f],!1,nt,a,n,s);return a}(t,e,i,a,r);if(n=ut(t,e,i,a,r))return n===ot?null:n;for(var u=K(function(t,n,i,a){for(var o=new b(_),s=[],u=Math.min(n[2],i[2]);0!==t.length;){var l,c,f,d,g,h=t.pop();if(s.push(h),a===p&&h.point[0]>u||a===y&&h.point[0]>n[2])break;h.left?(f=c=o.Xc(h),c=c!==(l=o.MP())?o.NM(c):null,f=o.next(f),m(h,d=c?c.key:null,a),f&&2===L(h,f.key,t)&&(m(h,d,a),m(h,f.key,a)),c&&2===L(c.key,h,t)&&(m(d,(g=(g=c)!==l?o.NM(g):null)?g.key:null,a),m(h,d,a))):(h=h.IP,f=c=o.find(h),c&&f&&(c=c!==l?o.NM(c):null,f=o.next(f),o.remove(h),f&&c&&L(c.key,f.key,t)))}return s}(o,i,a,r)),c=[],f=0;f<u.length;f++){var l=u[f];if(l.pN()){for(var h=[l.points],d=0;d<l.vN.length;d++){var v=l.vN[d];h.push(u[v].points)}c.push(h)}}return c}vt={VP:s,BP:y,HP:p,WP:d};t.ZP=function(t,e){return ct(t,e,y)},t.qP=function(t,e){return ct(t,e,p)},t.YP=vt,t.union=function(t,e){return ct(t,e,s)},t.xor=function(t,e){return ct(t,e,d)},Object.defineProperty(t,"gP",{value:!0})}(e)}),martinez=unwrapExports(dist),Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(t,e){var r=function(t){switch(t){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}(t);return{project:function(t){return Util.isArray(t)&&(t=new LngLat$2(t[0],t[1])),r.project(t.lng,t.lat)},unproject:function(t){return Util.isArray(t)&&(t=new Pixel(t[0],t[1])),r.unproject(t.x,t.y)},normalizePoint:function(t){return Util.parseLngLatData(t)},distance:function(t,e){if(e=this.normalizePoint(e),Util.isArray(e))return this.distanceToLine(t,e);t=this.normalizePoint(t);var r=Const.vr,n=Math.cos,i=t.lat*r,a=t.lng*r,t=e.lat*r,e=e.lng*r,r=2*Const.yr,a=e-a,t=(1-n(t-i)+(1-n(a))*n(i)*n(t))/2;return r*Math.asin(Math.sqrt(t))},ringArea:function(t){t=this.normalizeLine(t);var e=Const.yr*Const.vr,r=0,n=t,i=n.length;if(i<3)return 0;for(var a=0;a<i-1;a+=1){var o=n[a],s=n[a+1],u=o.lng*e*Math.cos(o.lat*Const.vr),c=o.lat*e,o=s.lng*e*Math.cos(s.lat*Const.vr);r+=u*(s.lat*e)-o*c}var f=n[a],l=n[0],h=f.lng*e*Math.cos(f.lat*Const.vr),t=f.lat*e,f=l.lng*e*Math.cos(l.lat*Const.vr);return r+=h*(l.lat*e)-f*t,.5*Math.abs(r)},sphericalCalotteArea:function(t){var e=Const.yr,t=e-e*Math.cos(t/e);return 2*Math.PI*e*t}}}function getPlanarCrs(){return{normalizePoint:function(t){return t&&t.x&&t.y?[t.x,t.y]:t},distance:function(t,e){var r=t[0]-e[0],e=t[1]-e[1];return Math.sqrt(r*r+e*e)},project:function(t){return t},unproject:function(t){return t},ringArea:function(t){for(var e=[0,0],r=[0,0],n=0,i=t[0],a=t.length,o=2;o<a;o++){var s=t[o-1],u=t[o];e[0]=i[0]-u[0],e[1]=i[1]-u[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],n+=e[0]*r[1]-e[1]*r[0]}return n/2}}}function isClockwise(t){for(var e=0,r=t.length,n=0;n<r-1;n++){var i,a=t[n];e+=((i=t[n+1])[0]-a[0])*(i[1]+a[1])}return t[r-1][0]===t[0][0]&&t[r-1][1]===t[0][1]||(a=t[r-1],e+=((i=t[0])[0]-a[0])*(i[1]+a[1])),0<e}var GeometryUtilCls=(Bz.prototype.clone=function(t){return new Bz(assign({},this._opts,t))},Bz.prototype.isPoint=function(t){return t&&(t instanceof LngLat$2||Util.isArray(t)&&!isNaN(t[0]))},Bz.prototype.normalizePoint=function(t){return t},Bz.prototype.normalizeLine=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.normalizePoint(t[r]));return e},Bz.prototype.normalizeMultiLines=function(t){for(var e=[],r=0,n=(t=Util.isArray(t)&&this.isPoint(t[0])?[t]:t).length;r<n;r++)e.push(this.normalizeLine(t[r]));return e},Bz.prototype.setCrs=function(t){t=t&&t.project&&t.unproject?t:"plane"===t?getPlanarCrs():getSphericalCrs(t,this._opts.maxZoom),assign(this,t)},Bz.prototype.distance=function(t,e){throw new Error("distance Not implemented!")},Bz.prototype.xr=function(t,e){t=this.normalizeLine(t);for(var r=[],n=0,i=(t=this.isPoint(t[0])?t:t[0]).length;n<i;n++)r.push(this.project(t[n]));return!0===e?r=this.makesureClockwise(r):!1===e&&(r=this.makesureClockwise(r)).reverse(),r},Bz.prototype.br=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.unproject(t[r]));return e},Bz.prototype.closestOnSegment=function(t,e,r){return r=Coordinate.closestOnSegment(this.project(t),this.xr([e,r])),this.unproject(r)},Bz.prototype.closestOnLine=function(t,e){for(var r,n=1/0,i=0,a=(e=this.normalizeLine(e)).length;i<a-1;i++){var o=this.closestOnSegment(t,e[i],e[i+1]),s=this.distance(t,o);s<n&&(n=s,r=o)}return r},Bz.prototype.distanceToSegment=function(t,e,r){return this.distanceToLine(t,[e,r])},Bz.prototype.distanceToLine=function(t,e){e=this.normalizeLine(e);for(var r=1/0,n=0,i=(e=this.isPoint(e[0])?e:e[0]).length;n<i-1;n++)var a=this.closestOnSegment(t,e[n],e[n+1]),r=Math.min(r,this.distance(t,a));return r},Bz.prototype.distanceToPolygon=function(t,e){return this.isPointInRing(t,e)?0:this.distanceToLine(t,e)},Bz.prototype.isPointOnSegment=function(t,e,r,n){return(!n&&0!==n||n<0)&&(n=this._opts.onSegmentTolerance),this.distanceToSegment(t,e,r)<=n},Bz.prototype.isPointOnLine=function(t,e,r){for(var n=0,i=(e=this.normalizeLine(e)).length;n<i-1;n++)if(this.isPointOnSegment(t,e[n],e[n+1],r))return!0;return!1},Bz.prototype.isPointOnRing=function(t,e,r){for(var n=0,i=(e=this.normalizeLine(e)).length;n<i;n++)if(this.isPointOnSegment(t,e[n],e[n===i-1?0:n+1],r))return!0;return!1},Bz.prototype.isPointOnPolygon=function(t,e,r){for(var n=0,i=(e=this.normalizeMultiLines(e)).length;n<i;n++)if(this.isPointOnRing(t,e[n],r))return!0;return!1},Bz.prototype.makesureClockwise=function(t){return isClockwise(t)||(t=[].concat(t)).reverse(),t},Bz.prototype.makesureAntiClockwise=function(t){return isClockwise(t)&&(t=[].concat(t)).reverse(),t},Bz.prototype.pointInRing=function(t,e,r){for(var n=!1,i=0;i<e.length&&!n;i++)if(s(t,e[i][0],r)){for(var a=!1,o=1;o<e[i].length&&!a;)s(t,e[i][o],!r)&&(a=!0),o++;a||(n=!0)}function s(t,e,r){for(var n=!1,i=0,a=(e=e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]?e.slice(0,e.length-1):e).length-1;i<e.length;a=i++){var o=e[i][0],s=e[i][1],u=e[a][0],c=e[a][1];if(t[1]*(o-u)+s*(u-t[0])+c*(t[0]-o)==0&&(o-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!r;s>t[1]!=c>t[1]&&t[0]<(u-o)*(t[1]-s)/(c-s)+o&&(n=!n)}return n}return n},Bz.prototype.isPointInBbox=function(t,e){for(var r=1/0,n=1/0,i=-1/0,a=-1/0,o=0;o<e.length;o++)var s=e[o],r=Math.min(r,s[0]),i=Math.max(i,s[0]),n=Math.min(n,s[1]),a=Math.max(a,s[1]);return t[0]>r&&t[0]<i&&t[1]>n&&t[1]<a},Bz.prototype.isPointInRing=function(t,e){return e=this.normalizeLine(e),e=this.xr(e,!0),Coordinate.ss(this.project(t),e,!1)},Bz.prototype.isRingInRing=function(t,e){for(var r=0,n=t.length;r<n;r++)if(!this.isPointInRing(t[r],e))return!1;return!0},Bz.prototype.isRingInRingByOutsea=function(t,e){for(var r=0,n=t.length;r<n;r++)if(this.isPointInRing(t[r],e))return!0;for(r=0,n=e.length;r<n;r++)if(this.isPointInRing(e[r],t))return!0;return!1},Bz.prototype.isRingInRingByMapbox=function(t,e){for(var r=0,n=t.length;r<n;r++)if(!this.isPointInRing(t[r],e))return!1;return!0},Bz.prototype.isRingInRingByMapboxB=function(t,e){for(var r=0,n=t.length;r<n;r++)if(this.isPointInRing(t[r],e))return!0;return!1},Bz.prototype.isPixelRingInRing=function(t,e){for(var r=0,n=t.length;r<n;r++)if(Coordinate.ss(t[r],e,!1))return!0;return!1},Bz.prototype.isPointInPolygon=function(t,e){for(var r,n=0,i=(e=this.normalizeMultiLines(e)).length;n<i&&(r=this.isPointInRing(t,e[n]),r=0<n?!r:r);n+=1);return Boolean(r)},Bz.prototype.isPointInPolygons=function(t,e){for(var r=0;r<e.length;r++){for(var n=e[r],i=void 0,a=0,o=(n=this.normalizeMultiLines(n)).length;a<o&&(i=this.isPointInRing(t,n[a]),i=0<a?!i:i);a+=1);if(i)return!0}return!1},Bz.prototype.doesSegmentsIntersect=function(t,e,r,n){t=(i=this.xr([t,e,r,n]))[0],e=i[1],r=i[2];var a=!1,o=((n=i[3])[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]);return 0!=(t=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]))&&(i/=t,0<=(t=o/t)&&t<=1&&0<=i&&i<=1&&(a=!0)),a},Bz.prototype.doesSegmentLineIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeLine(r)).length;n<i-1;n++)if(this.doesSegmentsIntersect(t,e,r[n],r[n+1]))return!0;return!1},Bz.prototype.doesSegmentRingIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeLine(r)).length;n<i;n++)if(this.doesSegmentsIntersect(t,e,r[n],r[n===i-1?0:n+1]))return!0;return!1},Bz.prototype.doesSegmentPolygonIntersect=function(t,e,r){for(var n=0,i=(r=this.normalizeMultiLines(r)).length;n<i;n++)if(this.doesSegmentRingIntersect(t,e,r[n]))return!0;return!1},Bz.prototype.doesLineLineIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)if(this.doesSegmentLineIntersect(t[r],t[r+1],e))return!0;return!1},Bz.prototype.doesLineRingIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)if(this.doesSegmentRingIntersect(t[r],t[r+1],e))return!0;return!1},Bz.prototype.doesPolygonPolygonIntersect=function(t,e){return!!(this.doesRingRingIntersect(e,t)||this.isRingInRing(t,e)||this.isRingInRing(e,t))},Bz.prototype.doesRingRingIntersect=function(t,e){for(var r=0,n=(t=this.normalizeLine(t)).length;r<n;r++)if(this.doesSegmentRingIntersect(t[r],t[r===n-1?0:r+1],e))return!0;return!1},Bz.prototype.along=function(t,e){for(var r=0,n=0;n<t.length-1;n+=1){var i=this.distance(t[n],t[n+1]);if(!(i+r<e)){var a=(e-r)/i;return[t[n][0]+a*(t[n+1][0]-t[n][0]),t[n][1]+a*(t[n+1][1]-t[n][1]),n]}r+=i}return null},Bz.prototype.gr=function(t,e){for(var a,r=function(t){return(c[0]-o[0])*(t[1]-o[1])>(c[1]-o[1])*(t[0]-o[0])},n=function(){var t=[o[0]-c[0],o[1]-c[1]],e=[l[0]-a[0],l[1]-a[1]],r=o[0]*c[1]-o[1]*c[0],n=l[0]*a[1]-l[1]*a[0],i=1/(t[0]*e[1]-t[1]*e[0]);return[(r*e[0]-n*t[0])*i,(r*e[1]-n*t[1])*i]},i=t=this.makesureAntiClockwise(t),o=(e=this.makesureClockwise(e))[e.length-1],s=0,u=e.length;s<u;s++){for(var c=e[s],f=i,i=[],l=f[f.length-1],h=0,d=f.length;h<d;h++)r(a=f[h])?(r(l)||i.push(n()),i.push(a)):r(l)&&i.push(n()),l=a;o=c}return i},Bz.prototype.ringRingClip=function(t,e){return t=this.xr(t),e=this.xr(e),isEqual(t[0],t[t.length-1])||t.push(t[0].slice()),isEqual(e[0],e[e.length-1])||e.push(e[0].slice()),(e=martinez.qP([t],[e]))&&e[0]&&e[0][0]?this.br(e[0][0]):[]},Bz.prototype.ringArea=function(t){throw new Error("distance Not implemented!")},Bz.prototype.distanceOfLine=function(t){for(var e=0,r=0,n=(t=this.normalizeLine(t)).length;r<n-1;r++)e+=this.distance(t[r],t[r+1]);return e},Bz.prototype.isClockwise=function(t){return isClockwise(t=this.xr(t))},Bz.prototype.typePolygon=function(t){return isArray(t)&&isArray(t[0])?2===t[0][0].length||t[0][0]instanceof LngLat$2?"Polygon":2<t[0][0].length&&(2===t[0][0][0].length||t[0][0][0]instanceof LngLat$2)?"MultiPolygon":"never":"never"},Bz);function Bz(t){this.CLASS_NAME="AMap.GeometryUtil",this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:zoomRange[1]},t),this.setCrs(this._opts.crs)}var GeometryUtilInstance=new GeometryUtilCls({}),PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance.setCrs("plane");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isPointInBbox:GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointInPolygons:GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)},PlaneGeometryUtil={distance:PlaneGeometryUtilInstance.distance.bind(PlaneGeometryUtilInstance),ringArea:PlaneGeometryUtilInstance.ringArea.bind(PlaneGeometryUtilInstance),isClockwise:PlaneGeometryUtilInstance.isClockwise.bind(PlaneGeometryUtilInstance),typePolygon:PlaneGeometryUtilInstance.typePolygon.bind(PlaneGeometryUtilInstance),makesureClockwise:PlaneGeometryUtilInstance.makesureClockwise.bind(PlaneGeometryUtilInstance),makesureAntiClockwise:PlaneGeometryUtilInstance.makesureAntiClockwise.bind(PlaneGeometryUtilInstance),distanceOfLine:PlaneGeometryUtilInstance.distanceOfLine.bind(PlaneGeometryUtilInstance),ringRingClip:PlaneGeometryUtilInstance.ringRingClip.bind(PlaneGeometryUtilInstance),doesSegmentsIntersect:PlaneGeometryUtilInstance.doesSegmentsIntersect.bind(PlaneGeometryUtilInstance),doesSegmentLineIntersect:PlaneGeometryUtilInstance.doesSegmentLineIntersect.bind(PlaneGeometryUtilInstance),doesSegmentRingIntersect:PlaneGeometryUtilInstance.doesSegmentRingIntersect.bind(PlaneGeometryUtilInstance),doesSegmentPolygonIntersect:PlaneGeometryUtilInstance.doesSegmentPolygonIntersect.bind(PlaneGeometryUtilInstance),doesLineLineIntersect:PlaneGeometryUtilInstance.doesLineLineIntersect.bind(PlaneGeometryUtilInstance),doesLineRingIntersect:PlaneGeometryUtilInstance.doesLineRingIntersect.bind(PlaneGeometryUtilInstance),doesRingRingIntersect:PlaneGeometryUtilInstance.doesRingRingIntersect.bind(PlaneGeometryUtilInstance),pointInRing:PlaneGeometryUtilInstance.pointInRing.bind(PlaneGeometryUtilInstance),isPointInRing:PlaneGeometryUtilInstance.isPointInRing.bind(PlaneGeometryUtilInstance),isPointInBbox:PlaneGeometryUtilInstance.isPointInBbox.bind(PlaneGeometryUtilInstance),isRingInRing:PlaneGeometryUtilInstance.isRingInRing.bind(PlaneGeometryUtilInstance),isPointInPolygon:PlaneGeometryUtilInstance.isPointInPolygon.bind(PlaneGeometryUtilInstance),isPointInPolygons:PlaneGeometryUtilInstance.isPointInPolygons.bind(PlaneGeometryUtilInstance),isPointOnSegment:PlaneGeometryUtilInstance.isPointOnSegment.bind(PlaneGeometryUtilInstance),isPointOnLine:PlaneGeometryUtilInstance.isPointOnLine.bind(PlaneGeometryUtilInstance),isPointOnRing:PlaneGeometryUtilInstance.isPointOnRing.bind(PlaneGeometryUtilInstance),isPointOnPolygon:PlaneGeometryUtilInstance.isPointOnPolygon.bind(PlaneGeometryUtilInstance),closestOnSegment:PlaneGeometryUtilInstance.closestOnSegment.bind(PlaneGeometryUtilInstance),closestOnLine:PlaneGeometryUtilInstance.closestOnLine.bind(PlaneGeometryUtilInstance),distanceToSegment:PlaneGeometryUtilInstance.distanceToSegment.bind(PlaneGeometryUtilInstance),distanceToLine:PlaneGeometryUtilInstance.distanceToLine.bind(PlaneGeometryUtilInstance)},LngLat$2=(wD.from=function(t){return isLngLat(t)?new wD(t.KL,t.kT):new wD(t[0],t[1])},wD.prototype.setLng=function(t){return this.KL=t,this.lng=Math.round(1e6*t)/1e6,this},wD.prototype.setLat=function(t){return this.kT=t,this.lat=Math.round(1e6*t)/1e6,this},wD.prototype.getLng=function(){return this.lng},wD.prototype.getLat=function(){return this.lat},wD.prototype.equals=function(t){return(t=parseLngLatData(t))instanceof wD&&Math.max(Math.abs(this.kT-t.kT),Math.abs(this.KL-t.KL))<=1e-9},wD.prototype.add=function(t,e){return new wD(this.KL+t.KL,this.kT+t.kT,e)},wD.prototype.subtract=function(t,e){return new wD(this.KL-t.KL,this.kT-t.kT,e)},wD.prototype.divideBy=function(t,e){return new wD(this.KL/t,this.kT/t,e)},wD.prototype.multiplyBy=function(t,e){return new wD(this.KL*t,this.kT*t,e)},wD.prototype.offset=function(t,e){if(isNaN(t)||isNaN(e))throw Error("valid offset args, require number");return t=2*Math.asin(Math.sin(Math.round(t)/12756274)/Math.cos(this.kT*Math.PI/180)),t=this.KL+180*t/Math.PI,e=2*Math.asin(Math.round(e)/12756274),new wD(t,this.kT+180*e/Math.PI)},wD.prototype.toString=function(){return this.lng+","+this.lat},wD.prototype.toArray=function(){return[this.lng,this.lat]},wD.prototype.toJSON=function(){return[this.lng,this.lat]},wD.prototype.distanceTo=function(t){return GeometryUtil.distance(this,t)},wD.prototype.distance=function(t){return GeometryUtil.distance(this,t)},wD);function wD(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.LngLat",isNumberArray(t)?(t=parseFloat(t[0]),e=parseFloat(t[1])):(e=parseFloat(e),t=parseFloat(t)),isNaN(t)||isNaN(e))throw Error("Invalid Object: LngLat("+t+", "+e+")");!0!==r&&(e=Math.max(Math.min(e,90),-90),t=(t+180)%360+(t<-180||180===t?180:-180)),this.kT=e,this.KL=t,this.lng=Math.round(1e6*t)/1e6,this.lat=Math.round(1e6*e)/1e6,this.pos=ProjectionManager.getProjection("EPSG:3857").project(t,e)}var Size=(VD.prototype.getWidth=function(){return this.width},VD.prototype.getHeight=function(){return this.height},VD.prototype.toString=function(){return this.width+","+this.height},VD.prototype.toArray=function(){return[this.width,this.height]},VD);function VD(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Size",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.width=r?Math.round(t):Number(t),this.height=r?Math.round(e):Number(e)}var easing=(ZD={},$D=4,aE=1e-7,bE=10,eE="function"==typeof Float32Array,function(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var t=arguments.toString();if(ZD[t])return ZD[t];if(a===e&&o===r)return mE;for(var s=new(eE?Float32Array:Array)(11),n=0;n<11;++n)s[n]=iE(.1*n,a,o);return ZD[t]=function(t){return 0===t?0:1===t?1:iE(function(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+(t-s[--r])/(s[r+1]-s[r])*.1,i=jE(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<$D;++i){var a=jE(e,r,n);if(0===a)return e;e-=(iE(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=iE(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>aE&&++s<bE;);return o}(t,e,e+.1,a,o)}(t),e,r)}}),ZD,$D,aE,bE,eE;function fE(t,e){return 1-3*e+3*t}function iE(t,e,r){return((fE(e,r)*t+(3*r-6*e))*t+3*e)*t}function jE(t,e,r){return 3*fE(e,r)*t*t+2*(3*r-6*e)*t+3*e}function mE(t){return t}function getQuadBezierValue(t,e,r,n){if(1<=t)return n;var i=1-t;return i*i*e+2*i*t*r+t*t*n}function cubic(t,e,r,n,i){if(1<=t)return i;var a=3*(r.pos[0]-e.pos[0]),o=3*(n.pos[0]-r.pos[0])-a,s=i.pos[0]-e.pos[0]-a-o,u=3*(r.pos[1]-e.pos[1]),r=3*(n.pos[1]-r.pos[1])-u,i=i.pos[1]-e.pos[1]-u-r,a=s*Math.pow(t,3)+o*Math.pow(t,2)+a*t+e.pos[0],e=i*Math.pow(t,3)+r*Math.pow(t,2)+u*t+e.pos[1];return ProjectionManager.getProjection("EPSG:3857").unproject(a,e)}function quad(t,e,r,n){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t,e.pos[0],r.pos[0],n.pos[0]),getQuadBezierValue(t,e.pos[1],r.pos[1],n.pos[1]))}function p20CoordsToLngLat(t,e){return Array.isArray(e)&&(e=new Pixel(e[0],e[1])),t.containerTolnglat(e,20)}function getSplitNum(t,e){for(var n=[3,300],r=Math.max(2,4),i=0,a=0,o=0,s=t.length;o<s-1;o++){var u=t[o],c=t[o+1];i+=Math.abs(c.pos[0]-u.pos[0]),a+=Math.abs(c.pos[1]-u.pos[1])}return Math.min(n[1],Math.max(n[0],Math.round(Math.max(i,a)/e/r)))}function interpolateCoords(t,e){var r=null;switch(e.length){case 3:r=quad;break;case 4:r=cubic;break;default:return null}for(var n=[],i=[0].concat(e),a=1;a<t-2;a++)i[0]=a/t,n.push(r.apply(null,i));return n.push(e[e.length-1]),n}function getCoordsWithControlPoints(t,e,r,n){var i=null;return t&&r&&r.length&&((t=[t]).push.apply(t,r),t.push(e),t.length,i=interpolateCoords(getSplitNum(t,n),t)),i||[e]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(t,e){for(var r=[],n=0,i=t.length;n<i;n+=1)r.push.apply(r,getCoordsWithControlPoints(t[n-1],t[n],t[n].controlPoints,e));return r},fg:function(t,e,r,n){for(var i=this.xb(t,e,r,n),a=[],o=0,s=i.length;o<s;o++)a.push(p20CoordsToLngLat(e,i[o]));return a}},globalInstance=self,lG,lG=exports.zB||(exports.zB={});lG.LITE="lite",lG.LEFT="left",lG.ALL="all",lG.NONE="";var TagMap={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"},colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Util=function(){var n,o,e,r,i,u={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(e=!0===Browser.DW,r=1e5,i="_amap_id",function(t){return t[i]=e?++r:--r,t[i]}),singlton:function(t){return l.Single[t]||new t},getOptimalZoom:function(t){return t<Math.floor(t)+.8?Math.floor(t):Math.ceil(t)},join:function(t,e){if(t.join)return t.join(e);var r,n=[];for(r in t)t.hasOwnProperty(r)&&n.push(r+"="+(t[r]||""));return n.join(e)},getGuid:function(t,e){return void 0===e&&(e=10),(t||"")+Math.round(Math.random()*Math.pow(10,e))+"_"+(new Date).getTime()},uuid:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),function(t,e){var r,a,n=o,i=[];if(e=(e=void 0===e?62:e)||n.length,t=void 0===t?0:t)for(r=0;r<t;r++)i[r]=n[0|Math.random()*e];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(a=0|16*Math.random(),i[r]=n[19===r?3&a|8:a]);return i.join("")}),endsWith:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)===e},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(e){e.startTime=new Date,e.jg=[];var n=(new Date).getTime();e.id=l.requestAnimFrame(function r(){var t=(new Date).getTime();e.jg.push(t-n),n=t,e.id=l.requestAnimFrame(r)})},cancel:function(t){t.id&&l.cancelAnimFrame(t.id)},stop:function(t){t.Ag=Date.now()-t.startTime,this.cancel(t),t.Mg=Math.round(1e3/(t.Ag/(t.jg.length+1)))}},kg:function(t,e,r,n,i){if(void 0===i&&(i=!1),t===e)return e;switch(n=void 0===n?"linear":n){case"ease":r=BezierUtil.sg(.25,.1,.25,1)(r);break;case"ease-in":r=BezierUtil.sg(.42,0,1,1)(r);break;case"ease-out":r=BezierUtil.sg(0,0,.58,1)(r);break;case"ease-in-out":r=BezierUtil.sg(.42,0,.58,1)(r)}return t+=(e-t)*r,i&&(t>>=0),t},createObjectURL:function(t,e){void 0===e&&(e="text/javascript; charset=utf-8");var r=null;try{r=(globalInstance.URL||globalInstance.webkitURL).createObjectURL(new Blob([t],{type:e}))}catch(t){r=null}return r},revokeObjectURL:function(t){try{(globalInstance.URL||globalInstance.webkitURL).revokeObjectURL(t)}catch(t){}},Og:function(t){for(var e={},r=0,n=t.length;r<n;r++)e[t[r]]=r;return e},EV:function(t,e){var r=Math.pow(2,e),e=180/r;return[Math.floor(t[0]/(360/r))+r/2,r/2-Math.ceil(t[1]/e)]},WY:function(t,e,r){void 0===r&&(r=!1);var n=[t[0],t[3]],i=[t[2],t[1]],t=this.EV(n,e),n=this.EV(i,e),i=t[0],a=t[1],o=n[0],s=n[1];if(r)return{ja:i,Fa:a,Oa:o,Ea:s,z:e};this.Pa={ja:i,Fa:a,Oa:o,Ea:s,z:e};for(var u=[],c=i;c<=o;c+=1)for(var f=a;f<=s;f+=1)u.push([e,c,f]);return u},xg:function(t){var e={};if(l.is(t,"object"))for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e},Ig:function(t,e){if(e.length<5e4)t.push.apply(t,e);else for(var r=0,n=e.length;r<n;r+=1)t.push(e[r])},clone:function(t){if("object"!=typeof t||null===t)return t;if(t.Tg||this.is(t,"Float32Array")||this.is(t,"Uint16Array"))return t;var e,r=this.isArray(t)?[]:{};for(e in t)t.hasOwnProperty(e)&&(r[e]=l.clone(t[e]));return r},isInteger:function(t){return(0|t)===t},vB:function(t){return!isNaN(t)},setPrototypeOf:"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(t,e){for(var r in e)t[r]=e[r]},isFunction:function(t){return"function"==typeof t},_g:function(t,e){if(void 0===e&&(e="webgl"),!t)return t;for(var r=[],n=0,i=t.length;n<i;n+=2){var a=parseInt(t.substr(n,2),16);("webgl"===e||"rgba"===e&&0===n)&&(a=this.format(a/255,3)),r.push(a)}return r.push(r.shift()),r},Sg:function(){},keys:"function"==typeof Object.keys?Object.keys:function(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e);return r},map:function(n,i,a){void 0===a&&(a=null);var o=[];return n&&n.length?(l.Cg(n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[1];o[r]=i.apply(a||n,t)}),o):n},forEach:function(t,e){if(t&&t.length){var r=t.length;if(0<r&&(e(t[0],0),1<r)){e(t[1],1);for(var n=2;n<r;n++)e(t[n],n)}}},Cg:function(t,e,r){if(void 0===r&&(r=null),t&&t.length)for(var n=0,i=t.length;n<i&&!1!==e.call(r,t[n],n,t);n++);},find:function(t,e,r){void 0===r&&(r=null);for(var n=0,i=t.length;n<i;n++)if("function"==typeof e){if(e.call(r,t[n],n,t))return t[n]}else if(t[n]===e)return t[n];return null},isDOM:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},Eg:function(t,e){for(var r,n,i="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM",a="v5"<(e=e||"v5")?(r=i.length,512):(i=i.substr(0,r=27),333),o=[],s=NaN,u=0,c=t.length;u<c;u++)n=t[u],n=i.indexOf(n),s=isNaN(s)?n*r:(o.push(s+n-a),NaN);return o},Ng:function(t,e){for(var r=512<e.length?Math.round(Math.pow(e.length,.5)):e.length,n=Math.ceil(e.length/r),i=0;i<n;i+=1){var a=r*i,o=a+r;o>e.length&&(o=e.length);for(var s=a;s<o;s+=1)t(e[s])}},Lg:function(t){if(/^rgba\(/.test(t))return this.Dg(t);var e=this.colorNameToHex(t),t=e;return"#"===e[0]&&(3===(e=e.substring(1)).length&&(e=e.replace(/./g,function(t){return t+t})),t=this.argbHex2Rgba(8===e.length?e:"ff"+e)),this.Dg(t)},colorNameToHex:function(t){return"string"==typeof(t=(t=void 0===t?"":t).toLowerCase())&&colorNameDist[t]||t},Rg:function(t,e,r){var n=Math.floor(r/2),i=r-n;return[r,t&(n=(1<<n)-1<<i)|e&(i=(1<<i)-1),e&n|t&i]},Pg:function(t){return t?encodeURIComponent(t):""},getStyle:function(t,e,r,n){var i=t[e].i[r];if(void 0===i)return null;if(t=t[e].s,"number"==typeof i)return t[i];for(;void 0===i[n.toString()]&&!(--n<3););return"number"==typeof(e=i[n.toString()])?t[e]:null},Dg:function(t){return(t=t.split(","))[0]=parseFloat(t[0].split("rgba(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t[3]=parseFloat(t[3]),t},Ug:function(t){return(t=t.split(","))[0]=parseFloat(t[0].split("rgb(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t},Bg:function(t){return"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},color2Rgba:function(t){return this.Bg(this.color2RgbaArray(t))},color2RgbaArray:function(t){if(t instanceof Array)return 3==t.length&&t.push(1),t;var e=this.colorNameToHex(t);if(0==e.indexOf("rgb("))return(r=this.Ug(e)).push(1),r;if(0==e.indexOf("rgba("))return this.Dg(e);if(0!=e.indexOf("#")){if(0!==e.indexOf("hsla"))return 0===e.indexOf("hsl")?(n=t.substr(4).split(","),i=parseInt(n[0],10)/360,a=parseInt(n[1],10)/100,o=parseInt(n[2],10)/100,this.GQ(i,a,o,1)):3!==e.length?6==e.length?this.zg(e):8==e.length?this.qg(e):void 0:(o=e.replace(/./g,function(t){return t+t}),this.zg(o));var n=t.substr(5).split(","),i=parseInt(n[0],10)/360,a=parseInt(n[1],10)/100,o=parseInt(n[2],10)/100,r=parseFloat(n[3]);return this.GQ(i,a,o,r)}if(4!==e.length)return 7==e.length?this.zg(e.substr(1)):9==e.length?(e=e.substr(1),this.qg(e)):void 0;o=e.substr(1).replace(/./g,function(t){return t+t});return this.zg(o)},GQ:function(t,e,r,n){var i,a,o;return 0===e?i=a=o=r:(i=this.uQ(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),r,t+1/3),a=this.uQ(e,r,t),o=this.uQ(e,r,t-1/3)),[i,a,o,n]},uQ:function(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},rgbHex2Rgba:function(t){return t.startsWith("#")&&(t=t.slice(1)),l.argbHex2Rgba("ff"+t)},argbHex2Rgba:function(t){for(var e=[],r=0,n=(t=t.startsWith("#")?t.slice(1):t).length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push((e.shift()/255).toFixed(2)),"rgba("+e.join(",")+")"},Opacity2Rgba:function(t,e){var r=e;return e&&e[3]&&t&&(e[3]=Math.floor(255*t)),r},Hex2Rgba:function(t){if("string"!=typeof t)return!1;for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push(parseInt(e.shift())),e},zg:function(t){return this.uE(t+"ff")},qg:function(t){for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(parseInt(t.substr(r,2),16)/255);return e.push(e.shift()),e},uE:function(t){return[((t=parseInt(t,16))>>24&255)/255,(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},Wg:function(t,e){return 0<=e&&t.splice(e,1),t},startsWith:function(t,e){return t.startsWith?t.startsWith(e):t.substr(0,e.length)===e},deleteItemFromArray:function(t,e){return e=l.indexOf(t,e),l.Wg(t,e)},deleteItemFromArrayByIndex:function(t,e){return l.Wg(t,e)},filter:function(t,r,n){var i=[];return l.Cg(t,function(t,e){r.call(n,t,e)&&i.push(t)}),i},indexOf:function(t,e){if(!t||!t.length)return-1;if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},Gg:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)==e},bind:(n=!1,Boolean(Function.prototype.bind)&&(n=!0),function(t,e){var r=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return n?r?(r.unshift(e),t.bind.apply(t,r)):t.bind(e):function(){return t.apply(e,r||arguments)}}),setOptions:function(t,e){return t.opts=assign({},t.opts,e=e||{}),t.opts},yn:function(t,e,r){return"function"==typeof e?this.Hg(t,!0,this.Vg(e,r,1)):this.Hg(t,!0)},Hg:function(r,n,i,t,e,a,o){var s;if(void 0!==(s=i?e?i(r,t,e):i(r):s))return s;if(!this.$g(r))return r;var u=this.isArray(r);if(u){if(s=this.Yg(r),!n)return this.Kg(r,s)}else{var c=Object.prototype.toString.call(r),t="[object Function]"==c;if("[object Object]"!=c&&"[object Arguments]"!=c&&(!t||e))return e?r:{};if(s=this.Xg(t?{}:r),!n)return this.baseAssign(s,r)}o=o||[];for(var f=(a=a||[]).length;f--;)if(a[f]==r)return o[f];return a.push(r),o.push(s),(u?this.Zg:this.Qg)(r,function(t,e){s[e]=l.Hg(t,n,i,e,r,a,o)}),s},baseAssign:function(t,e){return null==e?t:this.tM(e,Object.keys(e),t)},$g:function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},rM:function(t){return!!t&&"object"==typeof t},nM:function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},Yg:function(t){var e=t.length,r=new Array(e);return e&&"string"==typeof t[0]&&Object.hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Kg:function(t,e){var r=-1,n=t.length;for(e=e||Array(n);++r<n;)e[r]=t[r];return e},Xg:function(t){return new(t="function"==typeof(t=t.constructor)&&t instanceof t?t:Object)},Vg:function(a,o,t){if("function"!=typeof a)return this.identity;if(void 0===o)return a;switch(t){case 1:return function(t){return a.call(o,t)};case 3:return function(t,e,r){return a.call(o,t,e,r)};case 4:return function(t,e,r,n){return a.call(o,t,e,r,n)};case 5:return function(t,e,r,n,i){return a.call(o,t,e,r,n,i)}}return function(){return a.apply(o,arguments)}},Zg:function(t,e){for(var r=-1,n=t.length;++r<n&&!1!==e(t[r],r,t););return t},identity:function(t){return t},iM:function(u){return function(t,e,r){for(var n=l.eM(t),i=r(t),a=i.length,o=u?a:-1;u?o--:++o<a;){var s=i[o];if(!1===e(n[s],s,n))break}return t}},Qg:function(t,e){return l.iM()(t,e,Object.keys)},eM:function(t){return l.$g(t)?t:Object(t)},tM:function(t,e,r){r=r||{};for(var n=-1,i=e.length;++n<i;){var a=e[n];r[a]=t[a]}return r},oM:function(){return!1},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},sM:function(t,e,r,n){var i,a,o,s,u,c,f;return s=n?(i=0,o=this.uM,function(){if((a=o())-i<e)return!1;i=a,t.apply(r,arguments)}):(f=function(){u=!1,c&&(s.apply(r,c),c=!1)},function(){u?c=arguments:(u=!0,t.apply(r,arguments),setTimeout(f,e))})},format:function(t,e){return t===t<<0?t:+parseFloat(t+"").toFixed(e||0)},isArray:Array.isArray||function(t){return this.is(t,"array")},is:function(t,e){return Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()===e.toLowerCase()},includes:"function"==typeof Array.prototype.includes?function(t,e){return t.includes(e)}:function(t,e){return-1!==this.indexOf(t,e)},fM:function(t){var e=0;if(0===t.length)return e;for(var r=0,n=t.length;r<n;r+=1)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e},hM:function(t,e){e=e?Math.ceil(parseInt(e.substr(6))/24):1;for(var r="",n=0,i=t.length;n<i;n++)r+=String.fromCharCode((t.charCodeAt(n)-256-e+65535)%65535);return r},cM:function(t,e){var r=(t+"").slice(-2),n=(e+"").slice(-2);t=t.slice(0,-2),e=e.slice(0,-2);var i=parseInt((n+r).slice(1)),a=Math.ceil(i/250)%2?1:-1,i=1<i/500?1:-1;return t-=parseInt("1"+r)/3e3*a,e-=parseInt("1"+n)/3e3*i,new LngLat$2(parseFloat(t).toFixed(5),parseFloat(e).toFixed(5))},vM:function(t){return"undefined"!=typeof JSON&&JSON.stringify?l.fM(JSON.stringify(t)):null},lM:function(t,e){var r="_amap_hash";return!e&&t.hasOwnProperty(r)||(e=l.vM(t))&&(t[r]=e),t[r]},parseLngLatData:function(t){if(l.isArray(t)){if(!l.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=l.parseLngLatData(t[r])}return t},dM:function(t){for(var e=[],r=0,n=t.length;r<n;r+=1)e[r]=[t[r].x,t[r].y];return e},bM:function(t){return l.isArray(t)?new Size(t[0],t[1]):t},hp:function(t,e){var r,n=[0,0],i=l.getOptimalZoom(e.viewState.zoom);return t&&LocalZoom<=i?(r=lcs.getSize(),i=e.viewState.centerCoord,e=lcs.getLocalByCoord([i[0],i[1]]),i=t.x-e.x,e=t.y-e.y,0!=i&&(i*=r[0],n[0]=i),0!=e&&(e*=r[1],n[1]=e)):t&&(n[0]+=t.center[0],n[1]+=t.center[1]),n},dS:function(t,e){return t>=e[0]&&t<=e[1]},kD:function(t,e,r){return void 0===r&&(r=!1),t=(t=void 0===t?"":t).split(",")[0]||"",!r&&t&&e&&TagMap[e]||"all"},VF:function(t,e,r){return!(r=void 0!==r&&r)&&t&&e&&TagMap[e]||"all"},LD:function(t,e){return!(!t||!e)&&(t=this.iN(t),this.iN(e)<=t)},SD:function(t){var e;switch(t=void 0===t?"all":t){case"lite":e=0;break;case"left":e=1;break;default:e=2}return e},pW:function(t){var e;switch(t=void 0===t?2:t){case 0:e=exports.zB.LITE;break;case 1:e=exports.zB.LEFT;break;default:e=exports.zB.ALL}return e},iN:function(t){var e=0;switch(t){case"lite":e=0;break;case"left":e=1;break;case"all":e=2}return e}};!function(){var n=0;function t(t){var e=+new Date,r=Math.max(0,(Browser.android?50:20)-(e-n));return n=e+r,globalInstance.setTimeout(t,50)}function e(t){globalInstance.clearTimeout(t)}if(Browser.DW){var i=t,r=e;return u.requestAnimFrame=function(t,e,r,n){if(!r)return i(function(){e?l.bind(t,e).call(e,n):t()});e?l.bind(t,e).call(e,n):t()},u.cancelAnimFrame=function(t){t&&r.call(globalInstance,t)}}function a(t){for(var e,r=["webkit","moz","o","ms"],n=0;n<r.length&&!e;n+=1)e=globalInstance[r[n]+t];return e}var o=globalInstance.requestAnimationFrame||a("RequestAnimationFrame")||t,s=globalInstance.cancelAnimationFrame||a("CancelAnimationFrame")||a("CancelRequestAnimationFrame")||e;u.requestAnimFrame=function(t,e,r,n){if(!r)return o(function(){e?l.bind(t,e).call(e,n):t()});e?l.bind(t,e).call(e,n):t()},u.cancelAnimFrame=function(t){t&&s.call(globalInstance,t)}}(),Browser.DW||(u.requestIdleCallback=globalInstance.requestIdleCallback?function(t,e){return globalInstance.requestIdleCallback(t,e)}:function(t,e){void 0===e&&(e={});var r=l.uM();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(l.uM()-r))}})},e.timeout||0)},u.cancelIdleCallback=globalInstance.cancelIdleCallback?function(t){return globalInstance.cancelIdleCallback(t)}:function(t){clearTimeout(t)});var l=u;return l}(),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function __decorate(t,e,r,n){var i,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.yV)o=Reflect.yV(t,e,r,n);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(o=(a<3?i(o):3<a?i(e,r,o):i(e,r))||o);return 3<a&&o&&Object.defineProperty(e,r,o),o}function __spreadArrays(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}exports.Ln=function(){return exports.Ln=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},exports.Ln.apply(this,arguments)};var LabelFormat=(IO.prototype.Ns=function(t,e){e.lang&&(this.lang=e.lang)},IO.prototype.rV=function(t,e){return t},IO.prototype.Ws=function(t,e){for(var r=this.Es,e=labelsUtil.EQ(t=void 0===t?"":t,e=void 0===e?[]:e),n=labelsUtil.aQ(e),i=0;i<n.length;i++)r[n[i]]=1},IO.id="labelFormat",IO);function IO(){this.Fs={},this.Es={},this.Ts=[]}function noop$1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var URLObject="undefined"!=typeof window?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}},MockMap=(VO.prototype.has=function(t){return Boolean(this.gV[t])},VO.prototype.set=function(t,e){return this.gV[t]=e},VO.prototype.get=function(t){return this.gV[t]},VO.prototype.pV=function(t){delete this.gV[t]},VO.prototype.clear=function(){this.gV={}},VO.prototype.forEach=function(t){for(var e in this.gV)this.gV.hasOwnProperty(e)&&t(this.gV[e])},VO);function VO(){this.gV={}}var AdaptorMap=globalInstance.Map||MockMap,SmartTypedArray=(bP.prototype.set=function(t){this.check(t)&&(t.length<this.uf?this.value.set(t):(this.cf(t.length),this.value.set(t),this.length=t.length))},bP.prototype.check=function(t){if(Array.isArray(t))return!0;var e=!1;switch(this.type){case"uint8":e=t instanceof Uint8Array;break;case"int8":e=t instanceof Int8Array;break;case"uint16":e=t instanceof Uint16Array;break;case"int16":e=t instanceof Int16Array;break;case"uint32":e=t instanceof Uint32Array;break;case"int32":e=t instanceof Int32Array;break;case"float32":e=t instanceof Float32Array;break;case"float64":e=t instanceof Float64Array;break;default:e=!1}return e},bP.prototype.subarray=function(t,e){return this.value.subarray(t,e)},bP.prototype.ff=function(t){this.uf<t&&this.cf(t),this.length=t},bP.prototype.cf=function(t){var e=this.pf(),r=this.value;return this.value=new e(t),r&&this.value.set(r),this.uf=t,this.value},bP.prototype.pf=function(){var t=Float32Array;switch(this.type){case"uint8":t=Uint8Array;break;case"int8":t=Int8Array;break;case"uint16":t=Uint16Array;break;case"int16":t=Int16Array;break;case"uint32":t=Uint32Array;break;case"int32":t=Int32Array;break;case"float32":t=Float32Array;break;case"float64":t=Float64Array;break;default:t=Float32Array}return t},__decorate([InnerClass("SmartTypedArray")],bP)),oP;function bP(t,e){void 0===e&&(e=1024),this.type=t,this.length=0,this.uf=0,this.value=this.cf(e)}oP=exports.dY||(exports.dY={}),oP[oP.fontWidth=0]="fontWidth",oP[oP.fontHeight=1]="fontHeight",oP[oP.horiBearingX=2]="horiBearingX",oP[oP.horiBearingY=3]="horiBearingY",oP[oP.horiAdvance=4]="horiAdvance",oP[oP.posX=5]="posX",oP[oP.posY=6]="posY",oP[oP.iconWidth=7]="iconWidth",oP[oP.iconHeight=8]="iconHeight";var INF=1e20,ControlChars=[[0,31],[127,159]],ZeroWidthChars=[[8203,8207]],f=new SmartTypedArray("float64",4096),d=new SmartTypedArray("float64",4096),z=new SmartTypedArray("float64",4096),v=new SmartTypedArray("float64",4096),ua=navigator.userAgent,TinySDF=(pP.prototype.bU=function(t){this.size=t||[],this.xU(),this.mU()},pP.prototype.Ce=function(t){var e=this.size,r=e[0],n=e[1],i=r*n,a=this.Nz;if(a){a.clearRect(0,0,r,n),a.fillText(t,this.buffer,this.wU);var o=a.getImageData(0,0,r,n),s=new Uint8ClampedArray(i),u=new Array(9).fill(0);if(u[0]=1,u[1]=1,e=t.charCodeAt(0),this.RU(e))return{bitmap:s,info:u};for(var c,f=INF,l=INF,h=0,d=0,v=0;v<i;v++){var g=v-(c=Math.floor(v/r))*r,b=o.data[4*v+3]/255;0<b&&(c<f&&(f=c),g<l&&(l=g),h<c&&(h=c),d<g&&(d=g)),this.TU.value[v]=1==b?0:0==b?INF:Math.pow(Math.max(0,.5-b),2),this.AU.value[v]=1==b?INF:0==b?0:Math.pow(Math.max(0,b-.5),2)}for(a=this.buffer,u=this.getWidth(t,d-l),t=void 0,t=32===e?[6,6,0,-21,9,0,0,r,n]:[u,h-f,l,-f+a,u,l-3,f-3,r,n],edt(this.TU.value,r,n),edt(this.AU.value,r,n),v=0;v<i;v++){var p=this.TU.value[v]-this.AU.value[v],p=Math.max(0,Math.min(255,Math.round(255-255*(p/this.radius+this.MU))));s[v]=p}return{bitmap:s,info:t}}return{}},pP.prototype.getWidth=function(t,e){var r;switch(t){case"y":case"A":case"T":case"V":case"W":case"Y":r=e;break;default:r=e+2}return r},pP.prototype.measureText=function(t){return this.Nz.measureText(t)},pP.prototype.xU=function(){var t=this.size;this.canvas||(this.canvas=document.createElement("canvas")),this.canvas.width=t[0],this.canvas.height=t[1],this.Nz=this.canvas.getContext("2d"),this.Nz&&(this.Nz.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.Nz.textBaseline="middle",this.Nz.fillStyle="black")},pP.prototype.mU=function(){var t=this.size,e=t[0];(e=e*(t=t[1]))>this.AU.uf&&(this.AU.ff(e),this.TU.ff(e)),e=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows"),this.wU=Math.round(t/2*(e?1.2:1))},pP.prototype.RU=function(t){var e=this.SU(t,ControlChars),t=this.SU(t,ZeroWidthChars);return e||t},pP.prototype.SU=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(t>=i[0]&&t<=i[1])return!0}},pP);function pP(t,e,r,n,i,a,o){this.fontSize=t||24,this.buffer=void 0===r?3:r,this.MU=i||.25,this.fontFamily=a||"sans-serif",this.fontWeight=o||"lighter",this.radius=n||8,this.size=e,this.xU(),n=e[0]*e[1],this.TU=new SmartTypedArray("float64",n),this.AU=new SmartTypedArray("float64",n),n=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows"),this.wU=Math.round(e[1]/2*(n?1.2:1))}function expandTypeArray(t){f.ff(t),d.ff(t),z.ff(t),v.ff(t)}function edt(t,e,r){f.uf<r&&expandTypeArray(r);for(var n=0;n<e;n++){for(var i=0;i<r;i++)f.value[i]=t[i*e+n];for(edt1d(f.value,d.value,v.value,z.value,r),i=0;i<r;i++)t[i*e+n]=d.value[i]}for(f.uf<e&&expandTypeArray(r),i=0;i<r;i++){for(n=0;n<e;n++)f.value[n]=t[i*e+n];for(edt1d(f.value,d.value,v.value,z.value,e),n=0;n<e;n++)t[i*e+n]=Math.sqrt(d.value[n])}}function edt1d(t,e,r,n,i){n[r[0]=0]=-INF,n[1]=+INF;for(var a=1,o=0;a<i;a++){for(var s=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=n[o];)o--,s=(t[a]+a*a-(t[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);r[++o]=a,n[o]=s,n[o+1]=+INF}for(o=a=0;a<i;a++){for(;n[o+1]<a;)o++;e[a]=(a-r[o])*(a-r[o])+t[r[o]]}}var LangConf={ch:{type:"ch",size:[32,32],fontSize:24,name:"中文简体"},en:{type:"en",size:[32,32],fontSize:24,name:"英文"},th:{type:"th",size:[32,32],fontSize:24,name:"泰语"},my:{type:"my",size:[56,56],fontSize:24,name:"缅甸语"},ja:{type:"ja",size:[32,32],fontSize:24,name:"日文"},km:{type:"km",size:[40,40],fontSize:24,name:"高棉语"},PU:{type:"lao",size:[40,40],fontSize:24,name:"老挝语"},$U:{type:"arabic",size:[40,40],fontSize:24,name:"阿拉伯语"},default:{type:"ch",size:[32,32],fontSize:24,name:"汉语"}},Lang=(HQ.prototype.Ce=function(t){return this.type===LangConf.PU.type?(this.width=10*Math.floor(this.NU.measureText(t).width/10)+10+LangConf.PU.fontSize/2,this.NU.bU([this.width,this.height])):(this.type===LangConf.my.type||this.type===LangConf.PU.type||this.type===LangConf.th.type||this.type===LangConf.$U.type||this.type===LangConf.km.type)&&1<t.length&&(this.width=Math.floor(this.CU.size[0]*t.length*.5),this.NU.bU([this.width,this.height])),this.NU.Ce(t)},HQ);function HQ(t){var r=(e=this.CU=t).type,t=e.size,e=e.fontSize;this.type=r,r=this.width=t[0],t=this.height=t[1],this.NU=new TinySDF(e,[r,t],(r-e)/2,8,.25,"PingFang SC","normal")}var LangManager=(QQ.gG=function(t){return t=t.split("|"),t=parseInt(t[0],10),this.IU(t)},QQ.kU=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return QQ.gG(e.join("|"))},QQ.LU=function(t){return t=QQ.kU(t),-1!==QQ.EU.indexOf(t)},QQ.IU=function(t){return 32<t&&t<591?"en":4096<=t&&t<=4255?"my":3584<=t&&t<=3711?"th":6016<=t&&t<=6143?"km":3712<=t&&t<=3839?"lao":1536<=t&&t<=1791?"arabic":"ch"},QQ.prototype.D$=function(t){var e,r=this.OU[t=void 0===t?"ch":t];return r||(e=LangConf[t]||LangConf.default,r=new Lang(e),this.OU[t]=r),r},QQ.EU=[LangConf.my.type,LangConf.km.type,LangConf.PU.type],QQ);function QQ(){this.OU={}}var CHN=[["90.398619","47.62125"],["90.493569","47.512157"],["90.491338","47.430787"],["90.552986","47.391174"],["90.522859","47.318461"],["90.584915","47.224989"],["90.782025","47.019194"],["90.923517","46.97996"],["90.986624","46.807403"],["91.082926","46.722064"],["91.051812","46.596604"],["91.100242","46.564068"],["91.102624","46.537196"],["90.935125","46.300398"],["91.032801","46.126363"],["91.055181","46.011658"],["90.741148","45.713536"],["90.699563","45.544726"],["90.700228","45.504993"],["90.795887","45.449956"],["90.832257","45.31629"],["90.919719","45.26871"],["90.920899","45.225065"],["91.136978","45.244316"],["91.253943","45.164928"],["91.372068","45.142003"],["91.45689","45.18485"],["91.624753","45.098124"],["92.062061","45.11548"],["92.497694","45.030848"],["92.887666","45.075869"],["93.513157","44.997233"],["94.22699","44.694971"],["94.374082","44.542037"],["94.620202","44.47394"],["94.737532","44.366876"],["95.002041","44.282908"],["95.42701","44.324539"],["95.440292","44.292217"],["95.365491","44.054053"],["95.549126","44.026335"],["95.883651","43.431746"],["95.911953","43.287656"],["96.385653","42.919774"],["96.41151","42.75927"],["97.176454","42.824161"],["98.198333","42.682435"],["99.505985","42.597497"],["99.964106","42.676693"],["100.259793","42.666107"],["100.320604","42.718863"],["100.867753","42.700052"],["101.814637","42.530852"],["102.090733","42.250567"],["102.451458","42.173439"],["102.716911","42.181644"],["103.426452","41.910629"],["103.858223","41.830321"],["104.537873","41.903108"],["104.55755","41.881352"],["104.554117","41.69046"],["104.929798","41.682608"],["105.010371","41.620463"],["105.220141","41.778353"],["105.732529","41.977008"],["106.776853","42.319288"],["107.167833","42.354897"],["107.458928","42.487147"],["107.937949","42.433308"],["108.241189","42.489425"],["108.84269","42.425722"],["109.022141","42.487574"],["109.290662","42.465227"],["109.534657","42.500548"],["109.723763","42.60669"],["110.100045","42.671172"],["110.420666","42.80617"],["111.005001","43.354829"],["111.446257","43.521761"],["111.555004","43.519925"],["111.780481","43.697712"],["111.925235","43.719055"],["111.936243","43.796237"],["111.863286","43.902314"],["111.643689","44.039247"],["111.386948","44.360034"],["111.610923","44.793044"],["111.742544","44.988614"],["111.9942","45.118751"],["112.435906","45.103062"],["112.61512","44.956037"],["112.806373","44.882816"],["113.624854","44.775834"],["113.896701","44.9424"],["114.104283","44.984106"],["114.437113","45.233044"],["114.543629","45.41585"],["114.742713","45.46746"],["114.977202","45.40645"],["115.36123","45.421513"],["115.688202","45.487095"],["116.023886","45.712008"],["116.163919","45.717567"],["116.251037","45.785617"],["116.213851","45.874652"],["116.246574","45.98171"],["116.56904","46.316673"],["116.83033","46.413023"],["117.353361","46.390324"],["117.41533","46.528251"],["117.39222","46.582448"],["117.411768","46.610108"],["117.618878","46.628442"],["117.72387","46.549579"],["118.312433","46.768455"],["118.774374","46.71799"],["118.828619","46.795917"],["118.912926","46.804113"],["118.941979","46.764971"],["119.028625","46.769292"],["119.119864","46.669494"],["119.724391","46.623078"],["119.791059","46.707882"],["119.884572","46.701717"],["119.896224","46.880494"],["119.836485","46.899381"],["119.742007","47.13776"],["119.30249","47.404711"],["119.315214","47.461827"],["119.134262","47.517476"],["119.10804","47.64174"],["118.755577","47.747779"],["118.55396","47.96464"],["118.177657","48.02096"],["117.82558","47.987997"],["117.388809","47.612384"],["117.082887","47.796869"],["116.816533","47.867783"],["116.452289","47.808327"],["116.270714","47.845797"],["115.938377","47.653883"],["115.559971","47.900966"],["115.500727","48.161305"],["115.791907","48.279437"],["115.776629","48.537807"],["116.042275","48.826715"],["116.024444","48.890046"],["116.709459","49.880215"],["117.07866","49.723328"],["117.482128","49.648667"],["117.801998","49.554185"],["117.858689","49.620567"],["118.068073","49.643304"],["118.210831","49.759243"],["118.358674","49.80286"],["118.37378","49.853853"],["118.468623","49.857768"],["118.559926","49.957101"],["119.082034","50.01451"],["119.311051","50.169532"],["119.328389","50.327724"],["119.175332","50.320094"],["119.103534","50.373674"],["119.103642","50.409488"],["119.224019","50.469114"],["119.262214","50.625767"],["119.470096","50.763554"],["119.480245","50.910299"],["119.734497","51.106944"],["119.73542","51.228925"],["119.789064","51.243368"],["119.787948","51.298691"],["119.896417","51.365189"],["119.889615","51.410731"],["119.950318","51.426267"],["120.067241","51.699773"],["120.632029","51.963004"],["120.755196","52.16206"],["120.733974","52.23734"],["120.60276","52.318868"],["120.688398","52.529211"],["120.459208","52.615218"],["120.046556","52.554881"],["120.004778","52.785297"],["120.275145","52.889292"],["120.877526","53.323248"],["121.231921","53.310391"],["122.338707","53.534212"],["122.443142","53.474191"],["122.84101","53.486577"],["123.278553","53.592823"],["123.480492","53.533829"],["123.518364","53.587614"],["123.901491","53.509565"],["124.129157","53.379309"],["124.260864","53.404185"],["124.447374","53.252351"],["124.696798","53.233398"],["124.854212","53.143501"],["124.877429","53.19179"],["125.14374","53.233437"],["125.500989","53.129213"],["125.53472","53.084642"],["125.631731","53.108131"],["125.776978","53.000452"],["125.732839","52.906456"],["125.842016","52.927481"],["125.973551","52.795444"],["126.049747","52.829373"],["126.137295","52.788424"],["126.136093","52.7501"],["126.082878","52.727183"],["126.094744","52.66376"],["126.01078","52.632295"],["126.225078","52.557751"],["126.227546","52.502887"],["126.28664","52.498733"],["126.378071","52.405299"],["126.365626","52.334723"],["126.460233","52.313556"],["126.457937","52.278438"],["126.370797","52.21752"],["126.587327","52.146539"],["126.544647","52.022831"],["126.483493","52.004144"],["126.489866","51.963387"],["126.757379","51.72942"],["126.769931","51.638237"],["126.737959","51.604012"],["126.870396","51.541384"],["126.8313","51.449554"],["126.939726","51.411373"],["126.952021","51.35238"],["127.007918","51.339647"],["126.930671","51.194554"],["126.950047","51.077214"],["127.328668","50.761993"],["127.324612","50.674039"],["127.399564","50.585975"],["127.336199","50.480736"],["127.39435","50.441709"],["127.374866","50.346296"],["127.622938","50.242265"],["127.624762","50.159938"],["127.524126","50.053819"],["127.569466","49.832087"],["127.686474","49.798414"],["127.716987","49.69577"],["127.838395","49.617717"],["128.185065","49.56898"],["128.533065","49.633229"],["128.791094","49.618148"],["128.84167","49.562161"],["128.811865","49.506248"],["129.022107","49.485245"],["129.11165","49.389985"],["129.230032","49.429552"],["129.343135","49.392234"],["129.383497","49.461849"],["129.526126","49.451932"],["129.593332","49.316758"],["129.745059","49.313625"],["129.972146","49.057136"],["130.243692","48.89923"],["130.444579","48.939218"],["130.526934","48.889044"],["130.693552","48.907086"],["130.705612","48.869994"],["130.580449","48.630526"],["130.630317","48.609845"],["130.648105","48.52472"],["130.790884","48.525345"],["130.778868","48.413864"],["130.875106","48.300724"],["130.708423","48.108792"],["130.914073","47.945556"],["131.01546","47.736076"],["131.552374","47.750448"],["131.621768","47.692216"],["131.711934","47.740348"],["131.958075","47.703033"],["131.995368","47.741041"],["132.235458","47.739381"],["132.340472","47.796162"],["132.546873","47.750881"],["132.655685","47.89209"],["132.654505","47.979308"],["132.811511","47.967327"],["133.097413","48.158185"],["133.473394","48.128346"],["133.728504","48.281365"],["134.199908","48.411499"],["134.519091","48.448618"],["134.797053","48.402511"],["134.903462","48.476549"],["135.111473","48.465979"],["135.087461","48.366044"],["134.70854","48.235879"],["134.705815","48.142967"],["134.587133","47.991745"],["134.802439","47.732613"],["134.805079","47.701502"],["134.584837","47.454022"],["134.327302","47.405829"],["134.203448","47.309543"],["134.189801","47.25835"],["134.258273","47.190339"],["134.25029","47.096963"],["134.160018","47.066453"],["134.091868","46.968583"],["134.042215","46.633997"],["133.892806","46.477753"],["133.978872","46.404235"],["133.938468","46.35728"],["133.943124","46.251663"],["133.734856","46.143924"],["133.77584","46.068467"],["133.698828","45.924364"],["133.509421","45.823745"],["133.533154","45.779212"],["133.488886","45.719859"],["133.513906","45.69461"],["133.496869","45.599732"],["133.229721","45.489276"],["133.168674","45.414886"],["133.124621","45.258199"],["133.158975","45.105773"],["132.946351","44.989767"],["131.996377","45.226214"],["131.893723","45.301592"],["131.80903","45.186922"],["131.72307","45.208468"],["131.688416","45.166214"],["131.716461","45.107939"],["131.507506","44.942491"],["131.131804","44.90387"],["131.021662","44.839439"],["131.137726","44.723122"],["131.338398","44.056058"],["131.273661","43.974086"],["131.248341","43.566337"],["131.344342","43.514183"],["131.346252","43.391702"],["131.236002","43.22857"],["131.242955","43.131057"],["131.13749","43.018486"],["131.168904","42.923466"],["131.065779","42.901952"],["131.05005","42.834641"],["130.673962","42.819219"],["130.46123","42.731347"],["130.617421","42.685874"],["130.650616","42.595365"],["130.604267","42.509264"],["130.661752","42.412289"],["130.553477","42.421191"],["130.507536","42.571366"],["130.42958","42.523293"],["130.416105","42.590452"],["130.235238","42.692151"],["130.237405","42.873951"],["130.125611","42.876169"],["130.075765","42.911319"],["130.092008","42.956423"],["129.933178","42.975108"],["129.878311","42.92378"],["129.795163","42.719399"],["129.815032","42.601778"],["129.735103","42.411401"],["129.607751","42.418118"],["129.55415","42.330996"],["129.383025","42.403749"],["129.268527","42.323223"],["129.222093","42.257635"],["129.2434","42.19201"],["128.992774","42.075243"],["128.959644","41.997184"],["128.121765","41.974471"],["128.183949","41.746614"],["128.336234","41.608881"],["128.268621","41.434008"],["128.127944","41.337429"],["128.00482","41.417516"],["127.65285","41.377517"],["127.537794","41.447986"],["127.248116","41.454805"],["127.234962","41.492217"],["127.08566","41.544545"],["127.128081","41.592273"],["127.012339","41.679643"],["127.035706","41.702541"],["126.914964","41.778689"],["126.809177","41.669562"],["126.74607","41.691325"],["126.612003","41.629975"],["126.529799","41.412013"],["126.562243","41.368516"],["126.557908","41.33825"],["126.45328","41.325763"],["126.3043","41.139979"],["126.148946","41.070584"],["126.132917","40.990783"],["126.041744","40.924117"],["126.041787","40.876401"],["125.721896","40.840697"],["125.681319","40.80754"],["125.712733","40.774611"],["125.686641","40.761853"],["125.582743","40.75319"],["125.423162","40.624246"],["125.310595","40.636606"],["125.022783","40.521123"],["125.06057","40.46396"],["124.907556","40.445935"],["124.374311","40.078794"],["124.388452","39.905638"],["123.741782","39.10294"],["123.282201","38.058466"],["124.24299","31.368588"],["124.714351","29.508006"],["125.072136","25.859069"],["124.935837","25.676612"],["123.836839","25.5127"],["122.751321","24.515956"],["121.947788","22.070621"],["121.867355","21.383021"],["119.827087","18.177352"],["119.026527","16.873489"],["119.11665","15.951676"],["119.101406","14.063252"],["119.100623","12.209516"],["119.07742","11.23357"],["116.011301","7.678721"],["114.941852","6.182877"],["114.229887","5.47862"],["113.86269","4.692236"],["112.795642","3.695169"],["111.953841","3.231846"],["109.894631","3.714037"],["108.659956","4.748032"],["107.925439","5.91737"],["107.96348","6.895899"],["108.555028","9.28242"],["110.128544","11.338543"],["109.983314","12.44102"],["109.806102","13.535124"],["109.636428","14.636855"],["109.78629","15.402577"],["109.449813","15.723154"],["108.117871","17.258818"],["107.310076","18.842045"],["107.374728","19.467179"],["108.051095","20.114414"],["108.328478","21.187373"],["108.278139","21.403412"],["108.107378","21.47839"],["107.943356","21.509097"],["107.849844","21.619412"],["107.547355","21.55724"],["107.470751","21.571209"],["107.451932","21.615722"],["107.357798","21.570152"],["107.289755","21.702532"],["107.207551","21.682454"],["106.998789","21.79714"],["107.015655","21.907972"],["106.951239","21.893876"],["106.768184","21.978429"],["106.703854","21.935422"],["106.674027","21.941175"],["106.664565","22.266461"],["106.643493","22.30484"],["106.538715","22.328641"],["106.53142","22.460275"],["106.592939","22.622033"],["106.708553","22.615477"],["106.793547","22.794758"],["106.548972","22.899047"],["106.304634","22.830954"],["106.190543","22.951201"],["106.088791","22.966118"],["105.867991","22.889816"],["105.712488","23.033058"],["105.550311","23.045755"],["105.530806","23.163759"],["105.330691","23.346393"],["105.249667","23.237422"],["105.089657","23.231409"],["104.951169","23.149476"],["104.843495","23.101267"],["104.893084","22.94393"],["104.747257","22.79551"],["104.567764","22.813411"],["104.371855","22.65974"],["104.249053","22.720536"],["104.237015","22.806132"],["104.137495","22.783462"],["104.078336","22.740585"],["104.017096","22.520843"],["103.962035","22.492019"],["103.666692","22.741534"],["103.525093","22.580551"],["103.458703","22.648987"],["103.394201","22.751092"],["103.341286","22.767397"],["103.306804","22.661878"],["103.215652","22.621855"],["103.205309","22.536362"],["103.107505","22.486567"],["103.076606","22.416444"],["102.91784","22.456309"],["102.840786","22.583305"],["102.610223","22.696625"],["102.558017","22.673838"],["102.493515","22.738071"],["102.424293","22.676273"],["102.446694","22.621241"],["102.327948","22.511268"],["102.278531","22.386786"],["102.142661","22.36867"],["102.03475","22.427651"],["101.942096","22.415036"],["101.8765","22.355136"],["101.764791","22.472926"],["101.700847","22.453176"],["101.694624","22.349917"],["101.579332","22.223979"],["101.631925","21.988099"],["101.718335","21.962549"],["101.79863","21.848016"],["101.778824","21.73654"],["101.856952","21.62392"],["101.847124","21.595911"],["101.773932","21.558438"],["101.760328","21.349162"],["101.862724","21.239522"],["101.764727","21.115389"],["101.663511","21.164623"],["101.587808","21.146813"],["101.574161","21.209359"],["101.53264","21.221881"],["101.293538","21.149214"],["101.203866","21.206559"],["101.216612","21.289294"],["101.114173","21.403592"],["101.183052","21.497378"],["101.111941","21.560533"],["101.095719","21.734009"],["100.901892","21.659343"],["100.747526","21.494902"],["100.586185","21.423588"],["100.468576","21.433695"],["100.414267","21.504705"],["100.248806","21.434534"],["100.115855","21.481604"],["100.078626","21.591362"],["100.11579","21.654357"],["100.010068","21.666462"],["99.916813","21.811046"],["99.968591","21.972539"],["99.950867","22.023392"],["99.699748","22.008512"],["99.585378","22.083453"],["99.19384","22.094388"],["99.129961","22.147006"],["99.24403","22.347694"],["99.226069","22.407775"],["99.348979","22.505302"],["99.289627","22.751963"],["99.429595","22.858203"],["99.422858","22.95454"],["99.521735","22.955884"],["99.488432","23.051046"],["99.336512","23.101188"],["99.258964","23.048934"],["99.10449","23.057463"],["98.99924","23.151389"],["98.858693","23.167152"],["98.89811","23.292382"],["98.844295","23.323341"],["98.878284","23.4184"],["98.821571","23.466061"],["98.773527","23.530055"],["98.849638","23.617887"],["98.774085","23.751823"],["98.656368","23.775684"],["98.63961","23.801661"],["98.649909","23.978332"],["98.828974","24.077833"],["98.83893","24.109859"],["98.594849","24.051324"],["98.534853","24.098401"],["98.118939","24.06406"],["97.652578","23.812007"],["97.500916","23.916402"],["97.507889","23.946076"],["97.703905","24.12772"],["97.7321","24.242073"],["97.646012","24.307132"],["97.678134","24.384313"],["97.653759","24.420913"],["97.528617","24.403523"],["97.504349","24.421636"],["97.520614","24.750904"],["97.686181","24.867223"],["97.726886","24.872596"],["97.701159","24.901891"],["97.691374","25.085579"],["97.816257","25.289948"],["97.844152","25.297669"],["97.93803","25.249897"],["98.122308","25.413237"],["98.152177","25.643055"],["98.313818","25.589382"],["98.380058","25.615679"],["98.510756","25.863626"],["98.635018","25.83211"],["98.668857","25.860517"],["98.546226","26.121072"],["98.648708","26.171346"],["98.686366","26.138757"],["98.648","26.279486"],["98.751404","26.620222"],["98.701365","26.849746"],["98.733852","27.033154"],["98.685272","27.065508"],["98.663149","27.194049"],["98.708661","27.325701"],["98.657935","27.422786"],["98.67244","27.532116"],["98.574979","27.540164"],["98.537407","27.61841"],["98.464022","27.631357"],["98.417695","27.512725"],["98.29766","27.498051"],["98.144388","27.832814"],["98.155954","27.920407"],["98.109477","27.953809"],["98.111","28.123353"],["97.991245","28.182664"],["97.984571","28.253152"],["97.904449","28.328541"],["97.775702","28.306704"],["97.650433","28.498038"],["97.537651","28.471615"],["97.537544","28.300942"],["97.374809","28.215134"],["97.340262","28.085365"],["97.441328","28.020526"],["97.41045","27.866111"],["97.271254","27.865238"],["97.104206","27.710621"],["97.074959","27.716851"],["96.959302","27.833554"],["96.799979","27.862962"],["96.485238","28.041967"],["96.435456","28.122218"],["96.282742","28.11548"],["96.254032","28.195619"],["96.011753","28.160892"],["95.866721","28.266533"],["95.747824","28.246895"],["95.417182","28.118906"],["95.304315","27.916842"],["94.898787","27.716889"],["94.531603","27.567615"],["94.290032","27.552854"],["93.888688","27.17204"],["93.845987","27.008916"],["93.571308","26.909059"],["92.944937","26.862668"],["92.647405","26.922873"],["92.093539","26.830122"],["92.094247","26.952103"],["91.998589","27.089524"],["92.083004","27.299047"],["92.034273","27.387239"],["91.995907","27.444668"],["91.729424","27.433927"],["91.566002","27.518015"],["91.534996","27.644815"],["91.602566","27.75719"],["91.514804","27.82382"],["91.562676","27.867913"],["91.468799","27.914302"],["91.441784","27.98019"],["91.319818","28.026891"],["91.09123","27.815659"],["90.700164","28.042914"],["90.592875","27.992071"],["90.457885","28.016188"],["90.284765","28.126494"],["90.15898","28.149257"],["90.026414","28.108761"],["89.808083","28.209972"],["89.741178","28.14466"],["89.620585","28.133666"],["89.394701","27.853894"],["89.261577","27.776101"],["89.129934","27.494282"],["89.208705","27.359876"],["89.003119","27.183627"],["88.914757","27.261172"],["88.754318","27.459692"],["88.742559","27.575756"],["88.824484","27.683585"],["88.858366","27.84585"],["88.817167","27.989323"],["88.749833","28.04227"],["88.643789","28.079175"],["88.414536","27.948938"],["88.164768","27.927649"],["88.119621","27.836742"],["87.844298","27.914245"],["87.731731","27.773994"],["87.596998","27.78341"],["87.555606","27.832169"],["87.226918","27.783961"],["87.114007","27.809055"],["87.017899","27.921014"],["86.741974","28.007834"],["86.699681","28.06541"],["86.621253","28.036683"],["86.583402","28.057988"],["86.53626","27.935498"],["86.410089","27.875861"],["86.21079","27.953771"],["86.168518","28.117581"],["86.115561","28.075237"],["86.149271","27.905693"],["85.994046","27.879218"],["85.944521","27.932939"],["85.832512","28.151055"],["85.730202","28.210313"],["85.701256","28.320003"],["85.608344","28.222546"],["85.501399","28.296408"],["85.379283","28.245137"],["85.108273","28.308745"],["85.080035","28.467918"],["85.159664","28.55567"],["85.153999","28.618263"],["85.06716","28.641711"],["84.995663","28.560816"],["84.851232","28.539159"],["84.68178","28.609315"],["84.624424","28.696084"],["84.465938","28.711423"],["84.389849","28.828396"],["84.202845","28.880867"],["84.21602","29.009754"],["84.163899","29.035197"],["84.138279","29.170731"],["84.156046","29.210987"],["84.110534","29.218441"],["84.085858","29.266484"],["83.922973","29.294016"],["83.658078","29.134976"],["83.571818","29.151918"],["83.232014","29.552591"],["83.070545","29.578981"],["82.920063","29.684809"],["82.816744","29.661877"],["82.675381","29.739992"],["82.684436","29.800693"],["82.605515","29.811846"],["82.541184","29.930689"],["82.159367","30.045582"],["82.174859","30.141657"],["82.084479","30.216893"],["82.077913","30.310431"],["81.993091","30.291904"],["81.637645","30.413095"],["81.562006","30.34101"],["81.44238","30.380465"],["81.419613","30.185719"],["81.306617","30.138261"],["81.279452","29.994378"],["81.11603","30.010804"],["80.995588","30.23662"],["80.302677","30.539587"],["80.0878","30.543727"],["79.94236","30.672449"],["79.868267","30.834188"],["79.825373","30.839126"],["79.673774","30.945519"],["79.593372","30.894565"],["79.4033","31.036535"],["79.346716","31.001927"],["79.336288","30.933391"],["79.224193","30.920174"],["79.170227","30.981969"],["79.092743","30.963258"],["78.986249","31.027673"],["78.96668","31.157988"],["78.856924","31.281503"],["78.783796","31.274131"],["78.728542","31.344273"],["78.757918","31.433515"],["78.697536","31.51499"],["78.804524","31.611708"],["78.62458","31.82264"],["78.722126","31.927562"],["78.578596","31.999524"],["78.497701","32.11424"],["78.432641","32.118838"],["78.402622","32.220389"],["78.4762","32.31131"],["78.36638","32.528271"],["78.381336","32.554898"],["78.75176","32.731065"],["78.809223","32.496551"],["78.976872","32.364195"],["79.005883","32.376536"],["79.080126","32.394077"],["79.114029","32.491665"],["79.279168","32.61355"],["79.272795","32.713951"],["79.195912","32.779409"],["79.222884","32.93039"],["79.135616","33.001861"],["79.1289","33.16414"],["78.818901","33.407102"],["78.715496","33.540948"],["78.723736","33.604683"],["78.656015","33.65053"],["78.749506","33.746395"],["78.715582","33.972994"],["78.631468","34.014908"],["78.635867","34.100789"],["78.894839","34.171104"],["78.97243","34.341399"],["78.867137","34.336615"],["78.698266","34.491737"],["78.566988","34.478543"],["78.527312","34.539705"],["78.430667","34.514354"],["78.403587","34.570207"],["78.247139","34.615374"],["78.238835","34.685346"],["78.179204","34.722162"],["78.172767","34.964414"],["78.056982","35.102584"],["77.985699","35.231108"],["77.986279","35.376996"],["78.060694","35.455461"],["77.904546","35.435236"],["77.815948","35.484733"],["77.688854","35.41908"],["77.389219","35.439747"],["77.300084","35.509365"],["77.189727","35.490691"],["76.844516","35.637645"],["76.746969","35.630442"],["76.675837","35.721674"],["76.57151","35.752903"],["76.552477","35.878323"],["76.372211","35.795695"],["76.149781","35.797227"],["76.124933","35.947734"],["75.922673","36.058952"],["75.911558","36.150212"],["76.037836","36.25097"],["75.962627","36.325913"],["75.987883","36.449905"],["75.852334","36.642976"],["75.645268","36.740208"],["75.442793","36.696296"],["75.389578","36.92691"],["75.229053","36.936669"],["75.144038","36.993436"],["74.896481","36.905551"],["74.830134","37.022531"],["74.731107","36.999897"],["74.690745","37.052831"],["74.559724","37.004866"],["74.481919","37.046871"],["74.437845","37.120308"],["74.499922","37.266966"],["74.739861","37.314987"],["74.866312","37.253902"],["75.109062","37.372562"],["75.102367","37.44057"],["74.921629","37.536802"],["74.864573","37.654148"],["74.964759","37.773242"],["74.890065","37.834937"],["74.908884","37.982278"],["74.777327","38.153069"],["74.761705","38.335766"],["74.838288","38.415972"],["74.834661","38.466073"],["74.630191","38.571841"],["74.373536","38.625873"],["74.159667","38.646204"],["74.103234","38.581"],["74.111817","38.521998"],["74.000838","38.494528"],["73.77285","38.599147"],["73.670411","38.8621"],["73.725193","38.95749"],["73.802719","38.951449"],["73.807654","38.986017"],["73.72221","39.008697"],["73.473516","39.38863"],["73.616295","39.498494"],["73.852308","39.511093"],["73.918183","39.600828"],["73.897347","39.705585"],["73.808942","39.800228"],["73.93934","39.994893"],["73.923182","40.040084"],["74.206402","40.150079"],["74.349396","40.120697"],["74.57305","40.295485"],["74.65313","40.30568"],["74.68538","40.371234"],["74.834146","40.370645"],["74.764109","40.445837"],["74.82522","40.547706"],["74.991968","40.485604"],["75.234225","40.478276"],["75.595829","40.68866"],["75.623209","40.675235"],["75.670288","40.537172"],["75.761075","40.482617"],["75.702088","40.361506"],["75.718331","40.319244"],["75.831778","40.356634"],["75.909498","40.327457"],["75.962198","40.405801"],["76.169136","40.4108"],["76.276231","40.468254"],["76.350474","40.381058"],["76.518981","40.485522"],["76.629574","40.63177"],["76.618888","40.769281"],["76.705191","40.836687"],["76.738064","40.970777"],["76.866853","41.052415"],["77.002079","41.102703"],["77.174621","41.038594"],["77.761016","41.051719"],["77.819595","41.177071"],["78.104789","41.252161"],["78.153155","41.41058"],["78.633699","41.494773"],["78.691227","41.573398"],["79.204752","41.752489"],["79.314144","41.836204"],["79.760721","41.919283"],["79.886034","42.062214"],["80.133162","42.067184"],["80.141101","42.212865"],["80.253518","42.271926"],["80.176806","42.427971"],["80.233755","42.509043"],["80.134728","42.629333"],["80.233669","42.836907"],["80.527124","42.908804"],["80.358446","43.012006"],["80.363209","43.05597"],["80.77054","43.196057"],["80.751915","43.283969"],["80.657952","43.321619"],["80.722024","43.489763"],["80.498157","43.799783"],["80.367136","44.112086"],["80.382199","44.282371"],["80.320637","44.484489"],["80.375676","44.600628"],["80.200903","44.711915"],["80.153825","44.809898"],["79.982829","44.769908"],["79.863417","44.896027"],["79.863911","44.925979"],["80.099001","45.081976"],["80.380783","45.073778"],["80.472493","45.151008"],["80.593643","45.1361"],["80.723355","45.20611"],["80.897505","45.157969"],["81.777248","45.412611"],["81.933761","45.262246"],["82.295816","45.254845"],["82.544253","45.206065"],["82.569401","45.340669"],["82.52743","45.402307"],["82.265496","45.514783"],["82.238288","45.626914"],["82.311373","45.780155"],["82.319655","45.956177"],["82.440763","46.003982"],["82.822452","46.775333"],["83.012309","47.24291"],["83.148286","47.241861"],["83.371532","47.179737"],["83.583899","47.087891"],["83.927865","46.999324"],["84.753106","47.038661"],["84.955001","46.896507"],["85.227256","47.083274"],["85.529079","47.087102"],["85.670679","47.295094"],["85.656817","47.416255"],["85.581307","47.505664"],["85.500433","48.023314"],["85.564678","48.210504"],["85.778117","48.445159"],["86.21609","48.461326"],["86.297393","48.520485"],["86.571493","48.56921"],["86.745751","48.738276"],["86.72689","48.79468"],["86.785169","48.850936"],["86.706676","48.980358"],["86.708565","49.011387"],["86.889625","49.162344"],["87.145572","49.183316"],["87.435358","49.10582"],["87.476878","49.120484"],["87.490826","49.169134"],["87.836187","49.198616"],["87.895432","49.115877"],["87.87024","49.056222"],["87.9406","48.974696"],["87.803872","48.87904"],["88.125672","48.72326"],["88.023491","48.591881"],["88.35763","48.495848"],["88.450756","48.423234"],["88.527102","48.435337"],["88.631537","48.352171"],["88.608513","48.280466"],["88.657844","48.207172"],["88.828926","48.136652"],["88.942652","48.146274"],["89.088199","48.017358"],["89.571383","48.066881"],["89.777999","47.863838"],["90.077548","47.910676"],["90.155997","47.747389"],["90.399628","47.669347"],["90.413575","47.647046"],["90.398619","47.62125"]],JPN=[["145.824681","43.408601"],["145.802708","43.198731"],["145.188847","43.068449"],["144.992667","42.907867"],["143.970938","42.890345"],["143.384543","42.351736"],["143.299399","41.875506"],["142.95333","42.100071"],["142.391844","42.272669"],["141.369501","42.535185"],["140.832544","42.147648"],["141.028863","41.945699"],["141.296655","41.765675"],["141.564447","41.265171"],["141.675004","40.481173"],["141.829516","40.300647"],["141.982619","40.122464"],["142.142627","39.594221"],["142.025897","39.368452"],["142.021777","39.317473"],["141.850783","38.901626"],["140.939308","35.65669"],["139.436268","34.193845"],["137.347075","34.1603"],["135.63835","33.29272"],["133.488103","32.70897"],["131.614016","31.325292"],["130.633951","28.842845"],["127.785048","25.789008"],["126.597333","26.344784"],["128.404011","28.563857"],["128.940636","30.856318"],["128.544464","32.79621"],["129.194642","34.475467"],["129.324698","34.765641"],["129.502255","34.700627"],["129.480282","33.855809"],["130.439605","33.915587"],["130.801388","34.159716"],["130.791882","34.445506"],["131.121471","34.437578"],["131.298124","34.567727"],["132.535148","35.287335"],["132.978675","36.154847"],["133.268559","36.366209"],["134.710796","35.708808"],["135.303308","35.794165"],["136.404389","36.456814"],["136.612743","37.37546"],["137.409252","37.580348"],["137.291471","36.906421"],["137.982237","37.126821"],["138.504087","37.383552"],["138.758146","37.83898"],["139.207212","38.04151"],["139.310081","38.315743"],["139.737028","38.85997"],["139.403318","39.234917"],["139.952634","39.328459"],["140.002073","39.745742"],["139.695586","39.824208"],["139.679107","40.025361"],["139.935912","40.077921"],["140.001079","40.309807"],["139.922802","40.434311"],["139.828954","40.646676"],["139.95008","40.766604"],["139.957833","41.432491"],["140.001779","42.027933"],["139.389291","42.038134"],["139.346719","42.242877"],["139.63099","42.291658"],["139.72712","42.641155"],["139.942098","42.710048"],["140.194783","42.842098"],["140.30396","42.856193"],["140.309453","43.306551"],["140.393224","43.399418"],["140.61976","43.355264"],["140.788732","43.238558"],["140.923314","43.24556"],["141.029058","43.24356"],["141.083989","43.216544"],["141.141667","43.185513"],["141.336675","43.240561"],["141.328435","43.731771"],["141.350408","43.792272"],["141.594854","43.937818"],["141.565334","44.291761"],["141.70541","44.45177"],["141.708157","44.742196"],["141.683437","45.002047"],["141.226594","45.076599"],["141.053559","45.165748"],["140.987641","45.335905"],["140.943696","45.481498"],["141.201589","45.501064"],["141.972005","45.52416"],["142.341996","45.204477"],["142.567215","45.014513"],["142.747966","44.801094"],["143.487122","44.343678"],["144.463587","44.078617"],["144.874201","44.098345"],["145.125513","44.222478"],["145.300832","44.391445"],["145.487445","44.320885"],["145.111163","43.848378"],["145.420933","43.545126"],["145.451146","43.393635"]],EAST=[["73.757316","29.95798"],["73.045185","28.989136"],["72.434431","28.60931"],["72.060098","28.097836"],["71.631749","27.60702"],["70.67236","27.593264"],["69.82743","27.041579"],["70.337045","26.566045"],["70.070655","26.098932"],["70.070655","25.85946"],["70.290717","25.713457"],["70.626599","25.671708"],["70.68451","25.201036"],["70.974064","24.791642"],["70.811914","24.612763"],["70.139151","24.465923"],["69.268014","24.435423"],["68.313114","24.267539"],["67.911051","23.808548"],["68.547651","23.00912"],["69.11724","22.684917"],["68.748682","22.406416"],["69.301519","21.536417"],["70.153052","20.55461"],["71.170222","20.332219"],["72.234349","21.204506"],["72.501752","21.087142"],["72.627589","19.003767"],["72.973641","16.878922"],["74.267757","13.888898"],["75.369075","10.48118"],["76.976429","7.781262"],["78.374805","8.242836"],["79.427902","9.641233"],["80.513091","10.734685"],["80.254133","11.953377"],["80.702994","13.082541"],["80.402232","15.312175"],["82.991824","16.887862"],["85.259974","19.051683"],["87.784208","21.10679"],["89.263244","21.658877"],["89.121009","23.437218"],["88.869364","23.717994"],["88.93501","24.317619"],["88.267603","24.596482"],["88.727129","25.073086"],["89.186656","25.132532"],["88.891246","25.626788"],["88.650542","25.666241"],["88.201956","25.892841"],["88.420778","26.12883"],["88.54113","26.285892"],["89.241361","26.020727"],["89.613359","25.863309"],["89.657124","25.330477"],["90.190932","25.070998"],["91.175632","25.051175"],["91.811935","25.05221"],["92.234344","24.983507"],["92.104658","24.649259"],["91.844714","24.363456"],["91.46563","24.215373"],["90.999897","23.839459"],["91.216517","23.054471"],["91.389672","22.300847"],["92.125338","20.623521"],["93.946113","18.753448"],["92.823675","16.135717"],["91.224276","9.998681"],["93.522355","5.752403"],["96.409859","0.991383"],["100.048825","-3.72227"],["104.60328","-7.736835"],["114.01025","-9.967468"],["123.433702","-11.032285"],["123.717523","-10.536628"],["124.427075","-10.257467"],["125.004217","-9.79418"],["125.026253","-9.527403"],["125.12788","-9.406056"],["125.031601","-9.358561"],["124.946021","-9.216037"],["125.026253","-9.168516"],["125.192065","-9.13155"],["125.181368","-8.982538"],["124.999509","-8.987821"],["124.919277","-8.924418"],["125.095787","-8.596662"],["125.555784","-8.088612"],["125.721597","-8.120384"],["127.292232","-8.326419"],["132.424841","-8.447132"],["139.646777","-8.512957"],["141.039618","-9.209048"],["141.025347","-6.894209"],["140.978655","-6.887392"],["140.92235","-6.851943"],["140.912737","-6.791946"],["140.905871","-6.737397"],["140.850939","-6.695117"],["140.903124","-6.59554"],["140.945696","-6.509588"],["141.000442","-6.341825"],["140.971754","-2.322171"],["131.63417","2.671779"],["125.182746","17.665698"],["120.512231","19.243264"],["119.486602","16.550429"],["119.820154","12.379244"],["115.293339","5.77989"],["114.675587","4.850295"],["114.550618","4.735342"],["113.923024","4.60805"],["113.581092","3.881824"],["113.423754","3.763395"],["113.138025","3.427757"],["112.798973","3.119213"],["111.886744","2.960093"],["109.608393","3.016867"],["108.771364","3.935896"],["107.181008","7.101455"],["110.509765","12.398562"],["108.171244","18.449712"],["108.482399","21.923911"],["106.042422","23.36869"],["103.861684","23.500971"],["101.853026","22.51803"],["101.964992","22.453371"],["102.079606","22.467488"],["102.100842","22.366033"],["102.192713","22.264854"],["102.457234","22.052786"],["102.482552","21.991854"],["102.505944","21.933096"],["102.598494","21.858522"],["102.635027","21.768076"],["102.625285","21.706993"],["102.652076","21.663993"],["102.749497","21.641356"],["102.798208","21.673047"],["102.841349","21.836472"],["102.857688","21.688772"],["102.936435","21.684707"],["102.971433","21.587108"],["102.897061","21.530145"],["102.831439","21.416153"],["102.853313","21.363197"],["102.770191","21.249074"],["102.905811","20.975636"],["103.219101","20.747931"],["103.517772","20.714677"],["103.809332","20.581588"],["103.928404","20.796397"],["104.17602","20.868718"],["104.456453","20.674762"],["104.597217","20.649539"],["104.494205","20.561152"],["104.33078","20.448774"],["104.574769","20.381484"],["104.658948","20.213054"],["104.76838","20.149846"],["104.838529","20.181454"],["104.938282","20.043215"],["104.745932","19.888842"],["104.790827","19.817585"],["104.656142","19.725166"],["104.580381","19.643265"],["104.41625","19.738372"],["104.315236","19.711959"],["104.004834","19.776374"],["103.978829","19.601517"],["104.057089","19.487272"],["103.795479","19.292317"],["104.05618","19.205901"],["104.303857","19.041792"],["104.509718","18.953592"],["104.638381","18.819682"],["104.82816","18.734411"],["105.081179","18.714495"],["105.090265","18.561021"],["105.010482","18.494337"],["105.215532","18.232365"],["105.507333","18.022503"],["105.673181","17.706155"],["105.959258","17.411042"],["106.393016","16.974064"],["106.530565","16.907086"],["106.511314","16.705452"],["106.610307","16.485756"],["106.704089","16.360817"],["106.855183","16.430793"],["106.917705","16.245803"],["107.074009","16.275813"],["107.178212","16.130721"],["107.386617","15.975505"],["107.256364","15.895346"],["107.157745","15.729918"],["107.270294","15.538977"],["107.541111","15.371176"],["107.598724","15.119441"],["107.495192","15.087312"],["107.421241","14.973038"],["107.491494","14.719275"],["107.439728","14.558285"],["107.365777","14.619117"],["107.28443","14.576179"],["107.125343","14.454386"],["107.058787","14.468707"],["106.862816","14.336197"],["106.714913","14.443644"],["106.640961","14.525985"],["106.467176","14.622607"],["106.385829","14.475868"],["106.219438","14.500928"],["106.189858","14.42932"],["106.104814","14.407834"],["105.956911","14.346944"],["105.993887","14.192854"],["106.138092","14.056594"],["106.067838","13.984846"],["105.938423","13.948964"],["105.860774","14.067355"],["105.570516","14.196239"],["105.40579","14.123984"],["105.307739","14.207645"],["105.23322","14.257067"],["105.284207","14.321679"],["105.397946","14.336879"],["105.499919","14.435654"],["105.550906","14.617894"],["105.535217","14.773437"],["105.660723","14.90613"],["105.629347","15.019802"],["105.511685","15.118269"],["105.543062","15.182626"],["105.660723","15.2848"],["105.543062","15.368016"],["105.641113","15.40205"],["105.652879","15.526792"],["105.672489","15.723201"],["105.433244","15.866611"],["105.419865","16.077323"],["105.134284","16.158015"],["105.05029","16.303179"],["104.798307","16.56635"],["104.815106","16.791639"],["104.807079","17.064937"],["104.834545","17.357467"],["104.746654","17.518618"],["104.392993","17.569592"],["104.221867","17.790865"],["104.071113","18.043041"],["103.989584","18.196169"],["103.880878","18.236734"],["103.692584","18.269917"],["103.616878","18.310466"],["103.546996","18.349162"],["103.428584","18.336313"],["103.370348","18.277339"],["103.302336","18.221647"],["103.237773","18.102183"],["103.207191","18.040806"],["103.105249","17.937384"],["102.938746","17.875949"],["102.914959","17.827432"],["102.813018","17.765959"],["102.687291","17.753015"],["102.568359","17.830667"],["102.510593","17.840371"],["102.422244","17.921219"],["102.310109","17.960013"],["102.204769","17.995566"],["102.143605","18.066652"],["101.987295","17.966477"],["101.868364","17.927685"],["101.647491","17.811257"],["101.148809","17.535022"],["101.023374","17.599797"],["101.039054","17.808912"],["101.175591","17.993048"],["101.212078","18.10208"],["101.219896","18.173904"],["101.206865","18.240749"],["101.212078","18.344679"],["101.107829","18.394147"],["101.092192","18.45349"],["101.206865","18.578877"],["101.31372","18.655442"],["101.272021","18.741845"],["101.272021","18.830671"],["101.311114","18.939171"],["101.370997","19.079681"],["101.298023","19.148632"],["101.279779","19.212632"],["101.22818","19.375675"],["101.230424","19.441269"],["101.295484","19.487804"],["101.29997","19.591402"],["101.239397","19.633668"],["101.145173","19.587175"],["101.093574","19.629442"],["100.94102","19.650571"],["100.893907","19.65691"],["100.864742","19.616763"],["100.835578","19.570265"],["100.770518","19.534326"],["100.611233","19.574493"],["100.584312","19.52164"],["100.525983","19.540669"],["100.46541","19.637894"],["100.436245","19.777288"],["100.541687","19.91867"],["100.597773","20.190526"],["100.502946","20.195053"],["100.428788","20.262059"],["100.379218","20.36601"],["100.329779","20.413638"],["100.244635","20.387895"],["100.173224","20.317079"],["100.160865","20.244943"],["100.114789","20.260301"],["100.107922","20.315689"],["100.155988","20.507461"],["100.211891","20.650056"],["100.290818","20.736459"],["100.399973","20.811825"],["100.562866","20.788277"],["100.673701","20.899705"],["100.59616","20.954029"],["100.751867","21.254036"],["100.998402","21.338663"],["101.211622","21.580378"],["101.209043","21.846211"],["100.909901","21.894492"],["100.207565","21.580378"],["100.051491","22.159742"],["99.466212","22.436515"],["99.71333","23.024318"],["99.352488","23.281431"],["99.03983","24.3247"],["98.101855","24.95993"],["98.855913","25.608485"],["98.911088","26.812993"],["98.892697","27.483968"],["98.340947","27.826069"],["98.120247","28.377665"],["97.586888","28.733061"],["97.108705","28.329109"],["96.658506","27.787659"],["96.296725","28.010502"],["95.847241","28.136253"],["95.288126","27.787659"],["94.685158","27.233428"],["93.281889","26.647032"],["92.037851","26.720259"],["90.141229","26.820605"],["88.984724","26.833974"],["88.731159","27.080308"],["88.794435","27.331629"],["88.741186","27.914582"],["88.223484","27.953015"],["88.169108","27.50057"],["87.774017","27.262697"],["88.215457","26.870398"],["87.783036","26.535989"],["87.047344","26.702224"],["84.777332","27.310285"],["83.539214","27.665305"],["82.385985","27.880248"],["81.010299","28.662263"],["80.547568","29.001896"],["81.345045","30.304903"],["80.749935","31.185747"],["80.056967","31.015739"],["79.215234","31.178494"],["78.991224","31.346766"],["79.254658","31.656243"],["78.835019","31.979804"],["78.65109","32.12011"],["78.595912","32.240756"],["78.591313","32.400075"],["78.669483","32.54361"],["78.739513","32.426665"],["78.84424","32.288005"],["79.067657","32.24668"],["79.277111","32.470789"],["79.395802","32.676713"],["79.235221","33.233259"],["79.011803","33.47819"],["78.84424","33.681772"],["79.182009","34.336185"],["78.821102","34.565916"],["78.428537","34.758609"],["78.294895","34.940474"],["78.23791","35.530039"],["77.722544","35.628785"],["77.294994","35.609184"],["76.821489","35.701892"],["76.684572","35.988603"],["76.399329","35.919333"],["76.159724","35.933192"],["76.165429","36.20986"],["76.074151","36.366207"],["75.999987","36.641347"],["75.714744","36.787688"],["75.562518","36.805399"],["75.481245","36.811057"],["75.45651","36.950968"],["75.253968","37.023882"],["75.084541","37.066268"],["74.894884","37.084426"],["74.735572","37.122745"],["74.643309","37.074934"],["74.566145","37.033976"],["74.549925","36.938948"],["74.491692","37.015218"],["74.377803","36.998366"],["74.261908","36.915016"],["74.132106","36.91687"],["74.057933","36.840851"],["73.967535","36.853836"],["73.925813","36.892775"],["73.808039","36.908632"],["73.728388","36.920709"],["73.639124","36.911926"],["73.699986","36.820121"],["73.765904","36.814624"],["73.833196","36.776135"],["73.853795","36.743128"],["73.834569","36.711208"],["73.735692","36.736525"],["73.657414","36.707906"],["73.599736","36.711208"],["73.57227","36.735425"],["73.517339","36.729922"],["73.397862","36.757433"],["73.319585","36.738726"],["73.241307","36.720664"],["73.175389","36.732772"],["73.112218","36.71516"],["73.032567","36.686532"],["73.039433","36.651284"],["73.060033","36.609405"],["73.036687","36.564195"],["73.002355","36.529994"],["72.958409","36.507921"],["72.944676","36.475904"],["72.886998","36.474799"],["72.855412","36.448292"],["72.848546","36.400777"],["72.832334","36.374217"],["72.796629","36.362053"],["72.685258","36.303681"],["72.663286","36.274901"],["72.574022","36.267151"],["72.461412","36.175196"],["73.530389","35.809316"],["74.170542","35.420826"],["74.340245","35.055408"],["73.9237","34.612198"],["73.676858","34.332391"],["73.880481","33.422673"],["74.651862","32.906095"],["75.747223","32.542685"],["75.623802","32.256112"],["74.975842","31.968632"],["74.759855","31.732749"],["74.759855","30.955369"],["74.327882","30.584206"],["74.18929","30.224947"],["74.035013","29.864372"]],getOutseaData=function(t){return t&&"mapbox"===t?{boundsP16:[[CHN]],nebulaOutSea:[]}:{boundsP16:[[CHN],[JPN],[EAST]],nebulaOutSea:[[JPN],[EAST]]}},geoUtil=new GeometryUtilCls({}),CONSTS$1={sV:"https://webapi.amap.com/style_icon/sprite_v8@2x.png",EU:[LangConf.my.type,LangConf.km.type,LangConf.PU.type,LangConf.th.type,LangConf.$U.type]},MapboxLabelFormat=(dR=LabelFormat,__extends(eR,dR),eR.prototype.Ns=function(t,e){return dR.prototype.Ns.call(this,t,e),this.rV(t,e)},eR.prototype.rV=function(t,e){var r,n,i=(t.data||{}).poilabel||[],a=t.road||[],o={},s=this.hV(t);for(r in i)i.hasOwnProperty(r)&&(n=i[r],n=this.nV(n,s,e.zoom,e.VQ),o[r]=n);return this.oV(a,{}),o},eR.prototype.nV=function(t,e,r,n){for(var i=[],a=this.kQ,o=0,s=t;o<s.length;o++){var u,c,f,l,h,d,v,g=s[o],b=g.name,p=g.position,y=g.id,m=g.minzoom,w=g.maxzoom,T=g.style,x=void 0===T?{}:T;"mapbox"!==n&&9<=r&&e&&!this.uV(p[0])||(u=x.lV,c=x.th,f=x.ih,l=x.nh,d=x.qU,h=x.eh,g=void 0===(v=x.textAnchor)?"bottom":v,T=x.rh,x.sh,v=x.Kr,x=x.Qr,m=[m,w],w=null,l&&d&&h&&(this.Fs[CONSTS$1.sV]=1,w=[{image:CONSTS$1.sV,size:[d[6]/2,d[7]/2],clipOrigin:[d[4],d[5]],clipSize:[d[6],d[7]]}]),l=null,b&&v&&(a[v]||(a[v]=Util.color2RgbaArray(v)),h=a[v],d=void 0,v=0,a[x]||(a[x]=Util.color2RgbaArray(x||"")),a[x]&&(d=a[x],v=3),x=this.fV(b)?[0,b.length]:[],this.Ws(b,x),l={txt:b,$G:x,direction:g||"center",offset:[0,0],style:{fontSize:T,fillColor:h,strokeColor:d,strokeWidth:v,fold:!1}}),m={data:{id:y,name:b,txt:b,position:p[0],positionType:"relative",zooms:[c,f],extData:{id:y,type:"poi"}},opts:{zIndex:u,zooms:m,visible:!0}},w&&(m.opts.icon=w),l&&(m.opts.text=l),(m.opts.text||m.opts.icon)&&i.push(m))}return i},eR.prototype.oV=function(t,e){for(var r=0,n=t;r<n.length;r++){var i=n[r].name,a=this.fV(i)?[0,i.length]:[];i&&this.Ws(i,a)}},eR.prototype.DQ=function(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var o=(a=i[n]).path,s=a.name||"",u=labelsUtil.aQ(s.split("")),c=a.distance||1e5,l=void 0===(f=(a.style&&a.style[1],(g=a.style||{}).th))?zoomRange[0]:f,d=void 0===(h=g.ih)?zoomRange[1]:h,v=g.Kr,a=g.Qr,f=g.rh,h=g.zIndex,g=g.Hr;s&&o&&o.length&&r.push({path:o,positionType:"absolute",name:s,$G:[],CO:u,rank:h,BG:void 0===g?"name_en":g,distance:c,zooms:[l,d],style:{fontSize:f||12,fillColor:v,strokeColor:a}})}return r},eR.prototype.fV=function(t){return t=LangManager.kU(t),-1!==CONSTS$1.EU.indexOf(t)},eR.prototype.uV=function(t){for(var e=ProjectionManager.getProjection("EPSG:3857").unproject(t[0],t[1]),r=getOutseaData("mapbox").boundsP16,n=0;n<r.length;n++){var i=r[n];if(geoUtil.isPointInPolygon(e,i[0]))return!1}return!0},eR.prototype.hV=function(t){return t=[[(t=t.Ro)[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]],this.cV(t)},eR.prototype.cV=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],n=ProjectionManager.getProjection("EPSG:3857").unproject(n[0],n[1]);e.push(n)}for(var i=getOutseaData("mapbox").boundsP16,a=0;a<i.length;a++){var o=i[a];if(geoUtil.isRingInRingByMapboxB(e,o[0]))return!0}return!1},eR.id="mapbox",eR),dR;function eR(t){var e=dR.call(this)||this;return e.kQ={},e}var Color=(eT=dT,dT.Wb=function(t,e){return{rgba:t.rgba}},dT.Gb=function(t){return new eT(t.rgba)},dT.FV=function(t,e){var n=(r=this.DV(t[0],t[1],t[2],t[3]))[0],i=r[1],t=r[2],r=r[3];return this.GQ(n+=(.5<n?-.5:.5)*e*.35,i-=(i-.5)*e*.35*5,t-=(t-.5)*e*.35,r)},dT.DV=function(t,e,r,n){var i,a,o,s=Math.max(t,e,r),u=Math.min(t,e,r),c=(s+u)/2;if(s===u)i=a=0;else{switch(o=s-u,a=.5<c?o/(2-s-u):o/(s+u),s){case t:i=(e-r)/o+(e<r?6:0);break;case e:i=(r-t)/o+2;break;case r:i=(t-e)/o+4}i/=6}return[i,a,c,n]},dT.uQ=function(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},dT.GQ=function(t,e,r,n){var i,a,o;return 0===e?i=a=o=r:(i=this.uQ(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),r,t+1/3),a=this.uQ(e,r,t),o=this.uQ(e,r,t-1/3)),[i,a,o,n]},dT.Hb=function(t,e){void 0===e&&(e=[]);for(var r=0,n=t.length;r<n;r+=2)e[r/2]=parseInt(t.substr(r,2),16);return e},dT.Yx=function(t){return t.startsWith("#")&&(t=t.substr(1)),colorNames[t]?eT.Hb(colorNames[t].substr(1)):1===t.length?eT.Hb(t+t+t+t+t+t):3===t.length?eT.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):6===t.length?eT.Hb(t):[0,0,0]},dT.normalize=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e[r]=t[r]/255;return e},dT.create=function(t){return t?new eT(t):null},dT.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]},dT.prototype.Vb=function(t){"string"==typeof t?colorNames[t]?this.Hb(colorNames[t].substr(1)):0!==t.length&&(1!==(t=t.startsWith("#")?t.substr(1):t).length?3!==t.length?6!==t.length?8!==t.length?t.startsWith("rgba(")?this.Yb(colorNames[t].substr(1)):t.startsWith("rgb(")&&this.Kb(colorNames[t].substr(1)):this.$b(t):this.Hb(t):this.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):this.Hb(t+t+t+t+t+t)):t instanceof Array&&(this.rgba[0]=t[0],this.rgba[1]=t[1],this.rgba[2]=t[2],this.rgba[3]=t[3]||255)},dT.prototype.Hb=function(t){this.$b(t+"FF")},dT.prototype.$b=function(t){for(var e=0,r=t.length;e<r;e+=2)this.rgba[e/2]=parseInt(t.substr(e,2),16)},dT.prototype.Kb=function(t){t=t.split(","),this.rgba[0]=parseInt(t[0].substr(4),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255},dT.prototype.Yb=function(t){t=t.split(","),this.rgba[0]=parseInt(t[0].substr(5),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255*parseFloat(t[3])<<0},eT=__decorate([InnerClass("Color")],dT),eT),eT;function dT(t){this.type="AMap.Color",this.rgba=[],this.Vb(t)}var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},NebulaLabelFormat=(fU=LabelFormat,__extends(gU,fU),gU.prototype.Ns=function(t,e){return e.lang&&(this.lang=e.lang),this._opts=e,this.bt=e.zoom,this.WW=e.ZL,this.rV(t,e.R_)},gU.prototype.rV=function(t,e){var r,n,i=t.data||{},a=i.poilabel||[],o={},s=t.cQ;for(r in a)a.hasOwnProperty(r)&&(n=this.nV(a[r],{aV:t.zo.z<10,cQ:s,R_:e}),o[r]=n);return i=i.roadName||[],i=this.oV(i,{R_:e}),o.eA=i,o},gU.prototype.nV=function(t,e){for(var r,n,i,a,o,s,u,c,f,l=CONSTS.Lj,h=l.file,d=l.size,v=CONSTS.Mp,b=CONSTS.Pp,p=CONSTS.jp,y=this._opts.scale,m=(e=void 0===e?{}:e).aV,w=e.cQ,T=this.bt,x=[],A=this.lang,M=!w&&5<=T,S=0,P=t;S<P.length;S++){var I=P[S],$=I.cw,C=I.ew,k=I.pos,N=(X=labelsUtil.tQ(I,A,M?e.R_:void 0)).name,L=X.$G||[],_=I.rank,O=I.minzoom||v,E=(m?zoomRange[1]:I.maxzoom,I.Fp),U=I.Ep;if(3===O&&(O=2),(10002!==E||28!==U)&&(r=this.oA(E,U,this.WW))&&(n=1<y||9<r.fontSize?r.fontSize:9,s=r.iconFile,u=r.showMode,c=r.forceShow,f=r.zIndex,G=r.zooms,j=labelsUtil.Jj([O,zoomRange[1]],G))){for(var j,R=(j=labelsUtil.$p(j))[0],D=[],F={};R<=j[1];){var B=this.vn.dn(E,U,R);B&&"0"!==B.iconID&&(K=B.iconID,-1===D.indexOf(K)&&(D.push(K),F[K]=[]),F[K].push(R)),R++}(10002!==E||20!==U&&18!==U)&&16<n&&(n=15);var G=[j[0]-b,j[1]+p];10002===E&&(13===U||18===U)&&G[0]<=3&&(G[0]=2.5);for(var z,V=s&&"https"+h[s],_={data:{id:$?$+U:"",position:k,name:N,txt:N,rank:_,BG:X.type,extData:{Lp:E,Ap:U,id:$,type:"poi",bz:C}},opts:{type:"billboard",angle:0,forceShow:c,zIndex:f,visible:!0,zooms:G}},H=r.xOffset||0,W=r.yOffset||0,q=[],X=void 0,$=[0,0],Y=0;Y<D.length;Y++){var K=D[Y],Z=s&&this.aA(parseInt(K,10)),Q=d,J=labelsUtil.$p(F[K]),tt=1;!N||"152"!==K&&"153"!==K&&"154"!==K||(tt=N.length<=2?1:N.length/2),z=vector.Up(Q,2),V&&q.push({type:"image",image:V,clipOrigin:vector.add(Z,[0,0]),clipSize:Q,size:[z[0]*tt,z[1]],anchor:[10-20*H/24,10-20*W/24],angle:0,retina:!0,zooms:[J[0]-b,J[J.length-1]+p]})}N&&($="曾母暗沙"===N?(X="top",[0,5]):q.length&&q[0].image?(K=D[0],w&&(X="bottom",$=[0,0]),"北京"===N?(X="top",[0,3]):"澳门"===N?(X="left",[0,-2]):"合肥"===N||"太原"===N||"西安"===N||"郑州"===N||"杭州"===N||"台北"===N||"加德满都"===N?(X="bottom",[0,-3]):10002!==E||31!==U&&32!==U&&34!==U&&5!==U?1===u||"152"!==K&&"153"!==K&&"154"!==K?(X="right",[0,-2]):(X="center",[0,-1]):(X="right",[-3,-3])):(X="center",[H,W])),(G=this.uA[C=""+E+U])?(i=G.faceColor,a=G.borderColor,o=G.holoColor):(i=r.faceColor&&Color.normalize(r.faceColor.rgba),a=r.borderColor&&Color.normalize(r.borderColor.rgba),o=3===r.showMode?r.holoColor&&Color.normalize(r.holoColor.rgba):null,this.uA[C]={faceColor:i,borderColor:a,holoColor:o}),$=N?{direction:X,offset:$,$G:L,style:{fontSize:n,strokeWidth:2,padding:[0,1,0,1],fold:!w&&5<=T}}:{},_.opts&&(_.opts.icon=q,_.opts.text=$),V&&(this.Fs[V]=1),N&&this.Ws(N,L),x.push(_),r=null}}return x},gU.prototype.oV=function(t,e){for(var r=CONSTS.Lj,n=r.file,i=r.size,a=CONSTS.Mp,o=CONSTS.Rp,s=CONSTS.Pp,u=CONSTS.jp,c=[],f=this._opts.scale,l=this.lang,h=(e=void 0===e?{}:e)&&e.R_&&e.R_.protocol||"https",d=0,v=t;d<v.length;d++){var g,b=v[d],p=b.path,y=b.rank,m=b.minzoom||a,w=b.maxzoom||o,T=b.shield,x=b.shieldType,A=labelsUtil.tQ(b,l),M=A.name,S=A.$G;M&&this.Ws(M,S),T&&((g=Math.floor(p.length/2))<1||(b=[p[g-1],p[g]],(p=this.oA(40001,S=x,this.WW))&&(g=1<f||9<p.fontSize?p.fontSize:9,x=p.faceColor,p=p.iconID,m={data:{id:Util.stamp(this),position:b,positionType:"relative",name:M,txt:T,rank:y,BG:A.type,extData:{type:"shield",Lp:40001,Ap:S}},opts:{type:"billboard",angle:0,zooms:[m-s,w+u],visible:!0}},w=this.aA(parseInt(p,10)),p=1<T.length/4?T.length/4:1,p={type:"image",image:h+n[0],clipOrigin:w,clipSize:i,size:[24*(p=1<f?p:9*p/7),24],anchor:"center",angle:0,retina:!0},x=T?{direction:"center",offset:[0,0],style:{fontSize:g,fillColor:x&&Color.normalize(x.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{},m.opts&&(m.opts.text=x,m.opts.icon=[p]),T&&this.Ws(T),c.push(m))))}return c},gU.prototype.DQ=function(t,e){for(var s,r=CONSTS.Mp,n=CONSTS.Rp,i=CONSTS.Pp,a=CONSTS.jp,o=this.WW=e.zoom,u=[],c=this.lang,f=0,l=t;f<l.length;f++){var h,d,v,g,b,p,y,m,w,T,x,A=l[f],M=A.id,S=(m=labelsUtil.tQ(A,c)).name,P=m.$G||[];S&&(h=m.type,w=labelsUtil.EQ(S,P),d=labelsUtil.aQ(w),v=A.rank,g=A.Fp,b=A.Ep,s=A.distance||0,p=A.minzoom||r,y=A.maxzoom||n,m=(x=(T=this.vn.dn(g,b,o))&&T[1]||{}).fontSize,w=x.faceColor,T=x.borderColor,p=(x=labelsUtil.$p([p,y]))[0],y=20<=(y=x[1])?zoomRange[1]:y,S&&M&&m&&w&&(b={id:M,positionType:"relative",name:S,$G:P,CO:d,rank:v,BG:h,distance:s,zooms:[p-i,y+a],path:0<A.path.length?A.path:void 0,style:{fontSize:m,fillColor:vector.Up(w.rgba,255),strokeColor:T&&vector.Up(T.rgba,255)},extData:{mainkey:g,subkey:b}},u.push(b)))}return u},gU.prototype.aA=function(t){var r=(e=CONSTS.Lj).Rj,n=e.size,e=Math.floor(t/r);return t%10==0&&--e,[(t-r*e-1)*n[0],e*n[1]]},gU.prototype.oA=function(t,e,r){var n=[3,20],i=this.vn.dn(t,e,r),a=this.vn.mn(t,e);if(!i)for(var o=1;(n[0]<=r-o||r+o<=n[1])&&!(i=(i=this.vn.dn(t,e,r-o))||this.vn.dn(t,e,r+o));)o++;return i&&(i.zooms=a),i},gU.prototype.mN=function(t,e){var r=[0,0];if("0"===t)switch(e){case"3":r=[6,6];break;case"4":case"5":case"6":r=[9,9]}return r},gU.prototype.TN=function(t,e,r){var n=r=void 0===r?[0,0]:r;if("0"===t)switch(e){case"3":n=[30,30];break;case"4":case"5":case"6":n=[20,20]}return n},gU.id=exports.n0.nebulaLabel,gU),fU,tX;function gU(t){var e=fU.call(this)||this;return e.bt=20,e.WW=20,e._opts={},e.uA={},e.vn=t.vn,e}tX=exports.TileState||(exports.TileState={}),tX.TOLOAD="toload",tX.LOADING="loading",tX.LOADED="loaded",tX.UNLOADED="unloaded",tX.ERROR="error",tX.RELOADING="reloading";var TileCoord=(vX=uX,uX.prototype.s0=function(t){var e=t-this.z,r=Math.floor(Math.pow(2,e)*this.x),e=Math.floor(Math.pow(2,e)*this.y);return new vX(t,r,e)},vX=__decorate([InnerClass("TileCoord")],uX),vX),vX;function uX(t,e,r){this.x=e,this.y=r,this.z=t,this.key=t+","+e+","+r}var Tile=(DX.YH=function(t){return t.status===exports.TileState.LOADED||t.status===exports.TileState.RELOADING},DX.prototype.destroy=function(){},DX.prototype.nG=function(t){this.type=t},__decorate([InnerClass("Tile")],DX));function DX(t){this.type="tile",this.Ro=[0,0,0,0],this.stamp=0,this.zo=t,this.status=exports.TileState.TOLOAD,this._v=null,this.data={}}var NebulaTile=(HX=Tile,__extends(IX,HX),Object.defineProperty(IX.prototype,"tag",{get:function(){return this.nN},set:function(t){this.aN=this.tag,this.nN=t},enumerable:!1,configurable:!0}),Object.defineProperty(IX.prototype,"gB",{get:function(){return this.VN},set:function(t){this.BN=this.gB,this.VN=t},enumerable:!1,configurable:!0}),Object.defineProperty(IX.prototype,"data",{get:function(){var t=[];return this.qc&&this.qc.Dc?t.push(this.qc):(this.sN&&t.push(this.sN),this.uN&&t.push(this.uN)),this.lU&&this.lU.Dc?t.push(this.lU):(this.fU&&t.push(this.fU),this.cU&&t.push(this.cU)),this.zN&&this.zN.labels?t.push(this.zN):(this.HN&&t.push(this.HN),this.WN&&t.push(this.WN)),this.dU&&this.dU.labels?t.push(this.dU):(this.vU&&t.push(this.vU),this.gU&&t.push(this.gU)),t},set:function(t){},enumerable:!1,configurable:!0}),IX.prototype.xa=function(t,e){if(void 0===e&&(e=exports.zB.ALL),Object.keys(t))switch(e){case exports.zB.LITE:this.uN=exports.Ln(exports.Ln({},this.uN),t);break;case exports.zB.LEFT:this.sN=exports.Ln(exports.Ln({},this.sN),t);break;default:exports.zB.ALL,this.qc=exports.Ln(exports.Ln({},this.qc),t)}},IX.prototype.JE=function(t,e){if(void 0===e&&(e=exports.zB.ALL),Object.keys(t))switch(e){case exports.zB.LITE:this.cU=exports.Ln(exports.Ln({},this.cU),t);break;case exports.zB.LEFT:this.fU=exports.Ln(exports.Ln({},this.fU),t);break;default:exports.zB.ALL,this.lU=exports.Ln(exports.Ln({},this.lU),t)}},IX.prototype.rO=function(t,e){if(void 0===e&&(e=exports.zB.ALL),Object.keys(t))switch(e){case exports.zB.LITE:this.WN=exports.Ln(exports.Ln({},this.WN),t);break;case exports.zB.LEFT:this.HN=exports.Ln(exports.Ln({},this.HN),t);break;default:exports.zB.ALL,this.zN=exports.Ln(exports.Ln({},this.zN),t)}},IX.prototype.qE=function(t,e){if(void 0===e&&(e=exports.zB.ALL),Object.keys(t))switch(e){case exports.zB.LITE:this.gU=exports.Ln(exports.Ln({},this.gU),t);break;case exports.zB.LEFT:this.vU=exports.Ln(exports.Ln({},this.vU),t);break;default:exports.zB.ALL,this.dU=exports.Ln(exports.Ln({},this.dU),t)}},IX.prototype.ID=function(t){t&&(t.uN&&(this.uN=t.uN),t.sN&&(this.sN=t.sN),t.qc&&(this.qc=t.qc),t.WN&&(this.WN=t.WN),t.HN&&(this.HN=t.HN),t.zN&&(this.zN=t.zN))},IX.prototype.rN=function(){this.aN?this.nN=this.aN:this.nN=exports.zB.NONE,this.BN&&(this.VN=this.BN,this.nN=exports.zB.NONE)},IX.prototype.AB=function(){var t=[];return this.qc&&this.qc.road&&this.zN&&this.zN.labels?t.push(this.qc):(this.sN&&this.sN.road&&this.HN&&this.HN.labels&&t.push(this.sN),this.uN&&this.uN.road&&this.WN&&this.WN.labels&&t.push(this.uN)),t},IX.prototype.LY=function(t,e){for(var r=0,n=this.data;r<n.length;r++){var i=n[r];i.Dc&&i.Dc.upload(t,!0),i.$c&&i.$c.upload(t,!0),i.A_&&i.A_.upload(t,!0),i.FD&&i.FD.upload(t,!0)}},IX.prototype.destroy=function(){var t=this.data;if(t)for(var e=0,r=t;e<r.length;e++){var n=r[e];if(n.Dc&&(n.Dc.destroy(),delete n.Dc),n.$c&&(n.$c.destroy(),delete n.$c),n.labels){for(var i=0,a=n.labels;i<a.length;i++)a[i].destroy();delete n.labels}n.Ta=!1,delete n.gf}},IX.prototype.KE=function(t){for(var e,r=this.data,n=[],i=0,a=t;i<a.length;i++)(o=a[i]).road&&n.push(o.road);for(var o,s=0,u=r;s<u.length;s++)(o=u[s]).XE&&(e=o.XE,this.pU(n,e))},IX.prototype.reload=function(){delete this.lU,delete this.cU,delete this.fU,delete this.zN,delete this.WN,delete this.HN,delete this.VN,this.BN=exports.zB.NONE},IX.prototype.pU=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r],a=i.id;if(i.path)break;for(var o=0,s=t;o<s.length;o++){var u=s[o];i.path=this.yU(u,a)}}},IX.prototype.yU=function(t,e){for(var r=0,n=t;r<n.length;r++){var i=n[r];if(i.id===e)return i.path}},IX.prototype.oN=function(){var t=this.qc;return!!(t=Object.keys(t||{})).length&&(1!==t.length||"sdfLoaded"!==t[0])},__decorate([InnerClass("NebulaTile")],IX)),HX;function IX(){var t=null!==HX&&HX.apply(this,arguments)||this;return t.type="nebula",t.region="world",t.aN=exports.zB.NONE,t.BN=exports.zB.NONE,t}var RasterTile=(JY=Tile,__extends(KY,JY),KY.prototype.destroy=function(){var t=this.data;t&&(t.texture&&(t.texture.destroy(),delete t.texture),t.zs&&(t.zs.context.deleteBuffer(t.zs),delete t.zs),t.Js&&(t.Js.destroy(),delete t.Js))},KY),JY;function KY(){var t=null!==JY&&JY.apply(this,arguments)||this;return t.type="raster",t}var VectorTile=(NY=Tile,__extends(OY,NY),OY.prototype.destroy=function(){var t=this.data;t&&(t.$c&&(t.$c.destroy(),delete t.$c),t.Uc&&delete t.Uc)},__decorate([InnerClass("VectorTile")],OY)),NY;function OY(){var t=null!==NY&&NY.apply(this,arguments)||this;return t.type="vector",t}function quickselect(t,e,r,n,i){quickselectStep(t,e,r||0,n||t.length-1,i||defaultCompare)}function quickselectStep(t,e,r,n,i){for(;r<n;){var a,o,s,u;600<n-r&&(a=n-r+1,o=e-r+1,u=Math.log(a),s=.5*Math.exp(2*u/3),u=.5*Math.sqrt(u*s*(a-s)/a)*(o-a/2<0?-1:1),quickselectStep(t,e,Math.max(r,Math.floor(e-o*s/a+u)),Math.min(n,Math.floor(e+(a-o)*s/a+u)),i));var c=t[e],f=r,l=n;for(swap(t,r,e),0<i(t[n],c)&&swap(t,r,n);f<l;){for(swap(t,f,l),f++,l--;i(t[f],c)<0;)f++;for(;0<i(t[l],c);)l--}0===i(t[r],c)?swap(t,r,l):swap(t,++l,n),l<=e&&(r=l+1),e<=l&&(n=l-1)}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function defaultCompare(t,e){return t<e?-1:e<t?1:0}var _rbush_2_0_2_rbush=rbush,default_1=rbush,Status,maa,M;function rbush(t,e){if(!(this instanceof rbush))return new rbush(t,e);this.Bc=Math.max(4,t||9),this.Wc=Math.max(2,Math.ceil(.4*this.Bc)),e&&this.Gc(e),this.clear()}function findItem(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function calcBBox(t,e){distBBox(t,0,t.children.length,e,t)}function distBBox(t,e,r,n,i){(i=i||createNode(null)).ja=1/0,i.Fa=1/0,i.Oa=-1/0,i.Ea=-1/0;for(var a,o=e;o<r;o++)a=t.children[o],extend$1(i,t.Zc?n(a):a);return i}function extend$1(t,e){return t.ja=Math.min(t.ja,e.ja),t.Fa=Math.min(t.Fa,e.Fa),t.Oa=Math.max(t.Oa,e.Oa),t.Ea=Math.max(t.Ea,e.Ea),t}function compareNodeMinX(t,e){return t.ja-e.ja}function compareNodeMinY(t,e){return t.Fa-e.Fa}function bboxArea(t){return(t.Oa-t.ja)*(t.Ea-t.Fa)}function bboxMargin(t){return t.Oa-t.ja+(t.Ea-t.Fa)}function enlargedArea(t,e){return(Math.max(e.Oa,t.Oa)-Math.min(e.ja,t.ja))*(Math.max(e.Ea,t.Ea)-Math.min(e.Fa,t.Fa))}function intersectionArea(t,e){var r=Math.max(t.ja,e.ja),n=Math.max(t.Fa,e.Fa),i=Math.min(t.Oa,e.Oa),e=Math.min(t.Ea,e.Ea);return Math.max(0,i-r)*Math.max(0,e-n)}function contains(t,e){return t.ja<=e.ja&&t.Fa<=e.Fa&&e.Oa<=t.Oa&&e.Ea<=t.Ea}function intersects(t,e){return e.ja<=t.Oa&&e.Fa<=t.Ea&&e.Oa>=t.ja&&e.Ea>=t.Fa}function createNode(t){return{children:t,height:1,Zc:!0,ja:1/0,Fa:1/0,Oa:-1/0,Ea:-1/0}}function multiSelect(t,e,r,n,i){for(var a,o=[e,r];o.length;)(r=o.pop())-(e=o.pop())<=n||(quickselect(t,a=e+Math.ceil((r-e)/n/2)*n,e,r,i),o.push(e,a,a,r))}function getModule(){return M=M||{nS:function(clsName,clsText){try{eval(clsText)}catch(e){throw e}},eS:{iS:"1688471456632",BY:!Browser.DW&&config[13]}},M}rbush.prototype={all:function(){return this.qc(this.data,[])},search:function(t){var e=this.data,r=[],n=this.Yc;if(!intersects(t,e))return r;for(var i,a,o,s,u=[];e;){for(i=0,a=e.children.length;i<a;i++)o=e.children[i],intersects(t,s=e.Zc?n(o):o)&&(e.Zc?r.push(o):contains(t,s)?this.qc(o,r):u.push(o));e=u.pop()}return r},Vc:function(t){var e=this.data,r=this.Yc;if(!intersects(t,e))return!1;for(var n,i,a,o,s=[];e;){for(n=0,i=e.children.length;n<i;n++)if(a=e.children[n],intersects(t,o=e.Zc?r(a):a)){if(e.Zc||contains(t,o))return!0;s.push(a)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this.Wc){for(var e=0,r=t.length;e<r;e++)this.Xc(t[e]);return this}var n,i=this.Hc(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===i.height?this.Jc(this.data,i):(this.data.height<i.height&&(n=this.data,this.data=i,i=n),this.Kc(i,this.data.height-i.height-1,!0)):this.data=i,this},Xc:function(t){return t&&this.Kc(t,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,a,o=this.data,s=this.Yc(t),u=[],c=[];o||u.length;){if(o||(o=u.pop(),n=u[u.length-1],r=c.pop(),a=!0),o.Zc&&-1!==(i=findItem(t,o.children,e)))return o.children.splice(i,1),u.push(o),this.Qc(u),this;a||o.Zc||!contains(o,s)?n?(r++,o=n.children[r],a=!1):o=null:(u.push(o),c.push(r),o=(n=o).children[r=0])}return this},Yc:function(t){return t},tf:compareNodeMinX,if:compareNodeMinY,toJSON:function(){return this.data},ef:function(t){return this.data=t,this},qc:function(t,e){for(var r=[];t;)t.Zc?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},Hc:function(t,e,r,n){var i,a=r-e+1,o=this.Bc;if(a<=o)return calcBBox(i=createNode(t.slice(e,r+1)),this.Yc),i;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(i=createNode([])).Zc=!1,i.height=n;var s,u,c,f,l=Math.ceil(a/o),h=l*Math.ceil(Math.sqrt(o));for(multiSelect(t,e,r,h,this.tf),s=e;s<=r;s+=h)for(multiSelect(t,s,c=Math.min(s+h-1,r),l,this.if),u=s;u<=c;u+=l)f=Math.min(u+l-1,c),i.children.push(this.Hc(t,u,f,n-1));return calcBBox(i,this.Yc),i},nf:function(t,e,r,n){for(var i,a,o,s,u,c,f,l;n.push(e),!e.Zc&&n.length-1!==r;){for(f=l=1/0,i=0,a=e.children.length;i<a;i++)u=bboxArea(o=e.children[i]),(c=enlargedArea(t,o)-u)<l?(l=c,f=u<f?u:f,s=o):c===l&&u<f&&(f=u,s=o);e=s||e.children[0]}return e},Kc:function(t,e,r){var n=this.Yc,r=r?t:n(t),i=[];for((n=this.nf(r,this.data,e,i)).children.push(t),extend$1(n,r);0<=e&&i[e].children.length>this.Bc;)this.af(i,e),e--;this.sf(r,i,e)},af:function(t,e){var r=t[e],n=r.children.length,i=this.Wc;this.rf(r,i,n),n=this.hf(r,i,n),(n=createNode(r.children.splice(n,r.children.length-n))).height=r.height,n.Zc=r.Zc,calcBBox(r,this.Yc),calcBBox(n,this.Yc),e?t[e-1].children.push(n):this.Jc(r,n)},Jc:function(t,e){this.data=createNode([t,e]),this.data.height=t.height+1,this.data.Zc=!1,calcBBox(this.data,this.Yc)},hf:function(t,e,r){for(var n,i,a,o,s,u=o=1/0,c=e;c<=r-e;c++)i=intersectionArea(n=distBBox(t,0,c,this.Yc),a=distBBox(t,c,r,this.Yc)),a=bboxArea(n)+bboxArea(a),i<u?(u=i,s=c,o=a<o?a:o):i===u&&a<o&&(o=a,s=c);return s},rf:function(t,e,r){var n=t.Zc?this.tf:compareNodeMinX,i=t.Zc?this.if:compareNodeMinY;this.lf(t,e,r,n)<this.lf(t,e,r,i)&&t.children.sort(n)},lf:function(t,e,r,n){t.children.sort(n);for(var i,a=this.Yc,o=distBBox(t,0,e,a),s=distBBox(t,r-e,r,a),u=bboxMargin(o)+bboxMargin(s),c=e;c<r-e;c++)i=t.children[c],extend$1(o,t.Zc?a(i):i),u+=bboxMargin(o);for(c=r-e-1;e<=c;c--)i=t.children[c],extend$1(s,t.Zc?a(i):i),u+=bboxMargin(s);return u},sf:function(t,e,r){for(var n=r;0<=n;n--)extend$1(e[n],t)},Qc:function(t){for(var e,r=t.length-1;0<=r;r--)0===t[r].children.length?0<r?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():calcBBox(t[r],this.Yc)},Gc:function(t){var e=["return a"," - b",";"];this.tf=new Function("a","b",e.join(t[0])),this.if=new Function("a","b",e.join(t[1])),this.Yc=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},_rbush_2_0_2_rbush.default=default_1,maa=Status=Status||{},maa.loading="loading",maa.loaded="loaded";var M=getModule(),Queue=(naa.prototype.add=function(t,e){for(var r=t.length,n=0,i=function(){(n+=1)===r&&e&&e()},a=0,o=t;a<o.length;a++){var s=o[a];this._add(s,i)}},naa.prototype.has=function(t){return(t=this.tT[t])&&t.status===Status.loaded},naa.prototype.finish=function(t){if(t=this.tT[t]){t.status=Status.loaded;for(var e=0,r=t.pI;e<r.length;e++){var n=r[e];n&&n()}}},naa.prototype._add=function(t,e){var r=this.tT[t];r?r.status===Status.loading?r.pI.push(e):e():this.tT[t]={pI:[e],status:Status.loading}},naa);function naa(){this.tT={}}var Module=getModule();function InnerClass(e){return function(t){getModule()[e]=t}}getModule().MapboxLabelFormat=MapboxLabelFormat,getModule().NebulaLabelFormat=NebulaLabelFormat,getModule()._LocalZoom={Ra:13,za:12,Ge:""},getModule().Support=Browser,getModule().geo={lcs:lcs,ProjectionManager:ProjectionManager},getModule().transform=transform,getModule().Util=Util,getModule().TileState=exports.TileState,getModule().assign=assign,getModule().labelsUtil=labelsUtil,getModule().LabelsRenderUtil=LabelsRenderUtil,getModule().vector=vector,getModule().rbush=_rbush_2_0_2_rbush,getModule().lodash={map:map,find:find,assign:assign,every:every,some:some};var isSupportFloat32Array="undefined"!=typeof Float32Array;isSupportFloat32Array||(window.Float32Array=void 0,setMatrixArrayType(Array));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;function setMatrixArrayType(t){ARRAY_TYPE=t}function fromValues(t,e,r,n){var i=new ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function create(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function identity$1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function invert(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],v=e[12],g=e[13],b=e[14],p=e[15],y=r*s-n*o,m=r*u-i*o,w=r*c-a*o,T=n*u-i*s,x=n*c-a*s,A=i*c-a*u,M=f*g-l*v,S=f*b-h*v,P=f*p-d*v,I=l*b-h*g,$=l*p-d*g,C=h*p-d*b;return(e=y*C-m*$+w*I+T*P-x*S+A*M)?(t[0]=(s*C-u*$+c*I)*(e=1/e),t[1]=(i*$-n*C-a*I)*e,t[2]=(g*A-b*x+p*T)*e,t[3]=(h*x-l*A-d*T)*e,t[4]=(u*P-o*C-c*S)*e,t[5]=(r*C-i*P+a*S)*e,t[6]=(b*w-v*A-p*m)*e,t[7]=(f*A-h*w+d*m)*e,t[8]=(o*$-s*P+c*M)*e,t[9]=(n*P-r*$-a*M)*e,t[10]=(v*x-g*w+p*y)*e,t[11]=(l*w-f*x-d*y)*e,t[12]=(s*S-o*I-u*M)*e,t[13]=(r*I-n*S+i*M)*e,t[14]=(g*m-v*T-b*y)*e,t[15]=(f*T-l*m+h*y)*e,t):null}function multiply(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],v=e[11],g=e[12],b=e[13],p=e[14],y=e[15],m=r[0],w=r[1],T=r[2],e=r[3];return t[0]=m*n+w*s+T*l+e*g,t[1]=m*i+w*u+T*h+e*b,t[2]=m*a+w*c+T*d+e*p,t[3]=m*o+w*f+T*v+e*y,m=r[4],w=r[5],T=r[6],e=r[7],t[4]=m*n+w*s+T*l+e*g,t[5]=m*i+w*u+T*h+e*b,t[6]=m*a+w*c+T*d+e*p,t[7]=m*o+w*f+T*v+e*y,m=r[8],w=r[9],T=r[10],e=r[11],t[8]=m*n+w*s+T*l+e*g,t[9]=m*i+w*u+T*h+e*b,t[10]=m*a+w*c+T*d+e*p,t[11]=m*o+w*f+T*v+e*y,m=r[12],w=r[13],T=r[14],e=r[15],t[12]=m*n+w*s+T*l+e*g,t[13]=m*i+w*u+T*h+e*b,t[14]=m*a+w*c+T*d+e*p,t[15]=m*o+w*f+T*v+e*y,t}function getTranslation(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function perspective(t,e,r,n,i){return e=1/Math.tan(e/2),t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(e=1/(n-i)),t[14]=2*i*n*e):(t[10]=-1,t[14]=-2*n),t}function ortho(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1,t}function lookAt(t,e,r,n){var i,a=e[0],o=e[1],s=e[2],u=n[0],c=n[1],f=n[2],l=r[0],h=r[1],d=r[2];return Math.abs(a-l)<EPSILON&&Math.abs(o-h)<EPSILON&&Math.abs(s-d)<EPSILON?identity$1(t):(i=a-l,e=o-h,n=s-d,l=c*(n*=r=1/Math.hypot(i,e,n))-f*(e*=r),h=f*(i*=r)-u*n,d=u*e-c*i,(r=Math.hypot(l,h,d))?(l*=r=1/r,h*=r,d*=r):d=h=l=0,f=e*d-n*h,u=n*l-i*d,c=i*h-e*l,(r=Math.hypot(f,u,c))?(f*=r=1/r,u*=r,c*=r):c=u=f=0,t[0]=l,t[1]=f,t[2]=i,t[3]=0,t[4]=h,t[5]=u,t[6]=e,t[7]=0,t[8]=d,t[9]=c,t[10]=n,t[11]=0,t[12]=-(l*a+h*o+d*s),t[13]=-(f*a+u*o+c*s),t[14]=-(i*a+e*o+n*s),t[15]=1,t)}function equals(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],v=t[12],g=t[13],b=t[14],p=t[15],y=e[0],m=e[1],w=e[2],T=e[3],x=e[4],A=e[5],M=e[6],S=e[7],P=e[8],I=e[9],$=e[10],C=e[11],k=e[12],N=e[13],t=e[14],e=e[15];return Math.abs(r-y)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-m)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-A)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-M)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-S)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-P)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-I)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-$)<=EPSILON*Math.max(1,Math.abs(h),Math.abs($))&&Math.abs(d-C)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(v-k)<=EPSILON*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(g-N)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(b-t)<=EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(p-e)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(e))}function create$1(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fromValues$1(t,e,r){var n=new ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function set(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function subtract(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function cross(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],e=r[1],r=r[2];return t[0]=i*r-a*e,t[1]=a*o-n*r,t[2]=n*e-i*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var sub=subtract,forEach$1=(J1a=create$1(),function(t,e,r,n,i,a){var o,s;for(e=e||3,r=r||0,s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)J1a[0]=t[o],J1a[1]=t[o+1],J1a[2]=t[o+2],i(J1a,J1a,a),t[o]=J1a[0],t[o+1]=J1a[1],t[o+2]=J1a[2];return t}),J1a;function create$2(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function fromValues$2(t,e,r,n){var i=new ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function scale$1(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function transformMat4(t,e,r){var n=e[0],i=e[1],a=e[2],e=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*e,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*e,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*e,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*e,t}var forEach$2=(gca=create$2(),function(t,e,r,n,i,a){var o,s;for(e=e||4,r=r||0,s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)gca[0]=t[o],gca[1]=t[o+1],gca[2]=t[o+2],gca[3]=t[o+3],i(gca,gca,a),t[o]=gca[0],t[o+1]=gca[1],t[o+2]=gca[2],t[o+3]=gca[3];return t}),gca;function create$3(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function clone$1(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function fromValues$3(t,e){var r=new ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function copy$1(t,e){return t[0]=e[0],t[1]=e[1],t}function set$1(t,e,r){return t[0]=e,t[1]=r,t}function add(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function subtract$1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function multiply$1(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function scale$2(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function distance(t,e){var r=e[0]-t[0],t=e[1]-t[1];return Math.hypot(r,t)}function negate(t,e){return t[0]=-e[0],t[1]=-e[1],t}function normalize(t,e){var r=e[0],n=e[1];return 0<(n=r*r+n*n)&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function dot(t,e){return t[0]*e[0]+t[1]*e[1]}function cross$1(t,e,r){return r=e[0]*r[1]-e[1]*r[0],t[0]=t[1]=0,t[2]=r,t}function transformMat2(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t}function rotate(t,e,r,n){var i=e[0]-r[0],a=e[1]-r[1],e=Math.sin(n),n=Math.cos(n);return t[0]=i*n-a*e+r[0],t[1]=i*e+a*n+r[1],t}function angle(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],e=i*i+a*a;return 1<(e=(r*i+n*a)*(t=0<(t=r*r+n*n)?1/Math.sqrt(t):t)*(0<e?1/Math.sqrt(e):e))?0:e<-1?Math.PI:Math.acos(e)}function equals$1(t,e){var r=t[0],n=t[1],t=e[0],e=e[1];return Math.abs(r-t)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(n-e)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}var sub$1=subtract$1,mul=multiply$1,dist$1=distance,forEach$3=(D2a=create$3(),function(t,e,r,n,i,a){var o,s;for(e=e||2,r=r||0,s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)D2a[0]=t[o],D2a[1]=t[o+1],i(D2a,D2a,a),t[o]=D2a[0],t[o+1]=D2a[1];return t}),D2a,Event=(M2a.addListener=function(t,e,r){t.on(e,r)},M2a.trigger=function(t,e,r){t.emit(e,r)},M2a.clearListeners=function(t,e){t.clearEvents(e)},M2a.addDomListener=function(t,e,r){t.addEventListener(e,r)},M2a.extend=function(t,r,n){forEach(t="string"==typeof t?[t]:t,function(e){r.on(e,function(t){n.emit(e,t)})})},M2a.prototype.on=function(t,e,r,n){void 0===r&&(r=this),void 0===n&&(n=!1);for(var i=0,a=Array.isArray(t)?t:[t];i<a.length;i++){var o=a[i];this._on(o,e,r,n)}return this},M2a.prototype.off=function(t,e,r){void 0===r&&(r=this);var n=this.vI;if(t in n)for(var i=0;i<n[t].length;i+=1)if(n[t][i].fn===e&&n[t][i].context===r)return n[t].splice(i,1),this;return this},M2a.prototype.hasEvents=function(t,e,r){void 0===r&&(r=this);var n=this.vI;if(t&&e&&t in n)for(var i=0;i<n[t].length;i+=1)if(n[t][i].fn===e&&n[t][i].context===r)return!0;return!1},M2a.prototype.clearEvents=function(t){return t?this.vI[t]&&delete this.vI[t]:this.vI={},this},M2a.prototype.emit=function(t,e){if(void 0===e&&(e={}),!(t in this.vI))return this;for(var r=exports.Ln(exports.Ln({},e),{type:t}),n=this.vI[t],i=0,a=n.length;i<a;i+=1){var o=n[i];o.fn&&(o.fn.call(o.context,r),o.once&&(this.vI[t].splice(i,1),--i,--a))}return 0===n.length&&delete this.vI[t],this},M2a.prototype.getEvents=function(){return this.vI},M2a.prototype._on=function(t,e,r,n){if(void 0===n&&(n=!1),this.hasEvents(t,e,r=void 0===r?this:r))return this;var i=this.vI;return i[t]=i[t]||[],i[t].push({fn:e,context:r||this,once:n}),this},M2a);function M2a(){this.vI={}}var NebulaTileCoord=(Gda=[-180,-90],Hda=[180,90],Ida=Hda[0]-Gda[0],Jda=Hda[1]-Gda[1],{ga:function(t,e,r,n){void 0===n&&(n="lnglat");var i=Math.pow(2,r),a=Ida/i,r=Jda/i,i=ProjectionManager.getProjection("EPSG:3857");return"lnglat"===n?[t*a+Gda[0],Hda[1]-e*r,(t+1)*a+Gda[0],Hda[1]-(e+1)*r]:"EPSG:3857"!==n?[0,0,0,0]:(n=i.project(t*a+Gda[0],Hda[1]-e*r),r=i.project((t+1)*a+Gda[0],Hda[1]-(e+1)*r),[n[0],n[1],r[0],r[1]])}}),Gda,Hda,Ida,Jda,ComputeTileRange=(Vda.ha=function(t,e){for(var r=[t[0],t[3]],n=[t[2],t[1]],t=this.Ga(r,e),r=this.Ga(n,e),n=t[0],i=t[1],a=r[0],o=r[1],s=[],u=n;u<=a;u+=1)for(var c=i;c<=o;c+=1)s.push([e,u,c]);return s},Vda.Ga=function(t,e){var r=Math.pow(2,e),e=180/r;return[Math.floor(t[0]/(360/r))+r/2,r/2-Math.ceil(t[1]/e)]},Vda.ra=function(t){return{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14}[t]},Vda);function Vda(){}var Task=(q3a.prototype._H=function(t){this.children.push(t)},q3a);function q3a(t){var r=this;this.xN=t,this.cancel=function(){r.xN&&r.xN.cancel();for(var t=0,e=r.children;t<e.length;t++)e[t].cancel.apply(r)},this.children=[]}var LabelPlacement=(x3a.prototype.nO=function(t,e){this.iO=(e=void 0===e?{}:e).from||"inner",labelsUtil.zj(this,t),this.eO(e)},x3a.prototype.destroy=function(){},x3a.prototype.oO=function(){return this.gs.aO()},x3a.prototype.uO=function(){return this.oO().viewMode,!0},x3a.prototype.eO=function(t){var e,r,n,i,a,o=(t=void 0===t?{}:t).center,s=this.Gj||{},u=this.Vj||{},c=this.Hj||{},f=this.iO,l=0;for(e in s)s.hasOwnProperty(e)&&e&&(a=s[e]||{},c[e]=this.sO(e,a),u[e]=this.fO(e,a,c[e],{from:f,center:o}),r=a.data.txt,n=(i=a.opts).icon,i=i.text||{},a=a.CO,r&&a&&(l+=a.length+1,i.style&&i.style.borderWidth&&(l+=4)),n&&n.length&&n[0].image&&(l+=n.length));this.$j=l,this.Vj=u,this.Hj=c},x3a.prototype.hO=function(t,e){var r=CONSTS.Mp,n=CONSTS.Rp,i=(t=void 0===t?[]:t)[0]||r,t=t[1]||n;return[(r=(e=void 0===e?[]:e)[0]||r)<i?i:r,t<(n=e[1]||n)?t:n]},x3a.prototype.cO=function(t,e){var r={};return r.type=(t=void 0===t?{}:t).type||e.type,r.image=t.image||"",r.clipOrigin=t.clipOrigin||e.clipOrigin,r.clipSize=t.clipSize,r.size=t.size,r.offset=t.offset,r.anchor=t.anchor||e.anchor,r.angel=t.angel||e.angel,r.retina=t.retina||e.retina,r.zooms=t.zooms||e.zooms,r},x3a.prototype.vO=function(t,e){var r={};r.type=(t=void 0===t?{}:t).type||e.type,r.direction=t.direction||e.direction,r.offset=t.offset||e.offset,r.zooms=t.zooms||e.zooms;var n=e.style,i=t.style||{};return r.style={},r.style.fontFamily=i.fontFamily||n.fontFamily,r.style.fontSize=i.fontSize||n.fontSize,r.style.fontWeight=i.fontWeight||n.fontWeight,r.style.fillColor=i.fillColor||n.fillColor,e=i.strokeColor,isUndefined(t=i.strokeWidth)&&isUndefined(e)?r.style.strokeWidth=n.strokeWidth:isUndefined(t)&&!isUndefined(e)?r.style.strokeWidth=1:r.style.strokeWidth=i.strokeWidth,r.style.borderColor=i.borderColor,r.style.borderWidth=i.borderWidth,r.style.strokeColor=i.strokeColor||n.strokeColor,r.style.borderColor=i.borderColor||n.borderColor,r.style.backgroundColor=i.backgroundColor,r.style.padding=i.padding||n.padding,r.style.fold=void 0!==i.fold&&i.fold,r},x3a.prototype.lO=function(t){return[(t=(this.ac.Fs||{})[t]||{}).width||36,t.height||36]},x3a.prototype.dO=function(t,e){var r=CONSTS.sj;return(r=this.cO(t,r.icon)).zooms=t.zooms||e.bO,e=this.hO(e.zooms,r.zooms),r.zooms=e,r.size&&r.clipSize||(t=(e=this.lO(t.image||""))[0]||0,e=e[1]||0,r.size||(r.size=[t,e]),r.clipSize||(r.clipSize=[t,e])),r},x3a.prototype.pO=function(t,e){var r=CONSTS.sj,n=this.vO(t=void 0===t?{}:t,r.text);return n.zooms=t.zooms||e.bO,r=n.direction,t=e.yO,t=(r=this.mO(r||"",t)).textAlign,r=r.verticalAlign,n.style&&(n.style.textAlign=t,n.style.verticalAlign=r),e=this.hO(e.zooms,n.zooms),n.zooms=e,n},x3a.prototype.sO=function(t,e){var n=(r=e.data)&&r.txt,a=(i=e.opts||{}).angle||0,o=isUndefined(i.opacity)?1:i.opacity,s=i.icon,r=i.text,e=i.zooms,i=i.visible,u={angle:a,opacity:o,zooms:this.options.zooms,bO:e},c=[];if(s)for(var f=0,l=s;f<l.length;f++){var h=l[f];c.push(this.dO(h,u))}return u.yO=!!s,(r=n?this.pO(r,u):null)&&(r.txt=n),i={icon:c,text:r,visible:i},"labelsLayer"===this.iO&&(i.showText=1,i.showIcon=1),i},x3a.prototype.gO=function(t){if(this.oO().zoom<LocalZoom)return t;var e=lcs.getLocalByCoord(t);return vector.Ip(t,e.center)},x3a.prototype.wO=function(t,e){if(!e||!e.image)return{size:[0,0],origin:t,anchorOffset:[0,0],coords:t};var r=CONSTS.sj.icon,n=e.size||this.lO(e.image),r=e.anchor||r.anchor;return{size:n,origin:t,anchorOffset:r=this._getAnchorOffset(n,r),coords:vector.add(t,r)}},x3a.prototype.MO=function(t,u,r){if("text"!==(t=void 0===t?"icon":t))return i=u.size,u.coords,{x:(a=u.c)[0],y:a[1],width:(i=void 0===i?[]:i)[0]||0,height:i[1]||0};var n=u.origin,i=(u.start,r.padding),a=r.c,o=void 0,u=i.offsetX,t=i.offsetY,r=i.w,i=i.h,s=this.uO()?(o=a[0],a[1]):(o=n[0],n[1]);return{x:o+u,y:s+t,width:r,height:i}},x3a.prototype._getAnchorOffset=function(t,e){var r=CONSTS.JM,n=t[0]||0,i=t[1]||0;if("[object Array]"===Object.prototype.toString.apply(e)){var t=e[0],a=e[1];if("number"==typeof t&&"number"==typeof a)return vector.tA(e)}else if("string"==typeof e){var e=(a=e.split("-"))[0],a=a[1],o=0,s=0;switch(e!==r.ij||a||(e=r.nj,a=r.ij),a){case r.LEFT:o=0;break;case r.ij:o=-n/2;break;case r.QM:o=-n;break;default:o=0}switch(e){case r.ZM:s=0;break;case r.nj:s=-i/2;break;case r.tj:s=-i;break;default:s=0}return[o,s]}return[0,0]},x3a.prototype.jO=function(t){return this._getAnchorOffset(t.size||[0,0],"middle-center")},x3a.prototype.AO=function(t,e,r,n){var i,o=CONSTS.JM,s=(n=void 0===n?{}:n).kO,u=void 0===s?0:s,f=void 0!==(c=n.yO)&&c,l=n.padding,h=n.lines,c=(s=this.jO(t))[0]||0,n=s[1]||0,d=(s=t.anchorOffset||[])[0]||0,v=s[1]||0,g=(t=t.size||[])[0]||0,b=t[1]||0,p=d-c,y=v-n,m=l[0],w=l[1],T=l[2],x=l[3],A=.8*u;switch(r){case o.ZM:a=f?(i=p,v-T-.2*u-(M=A*h+3*(h-1))):(i=d+x,v+m);break;case o.QM:var M=A/2*h+1.5*(h-1),a=f?(i=d+g+x,y-M):(i=d-w,v-M-T);break;case o.tj:a=f?(i=p,v+b+m):(i=d+x,v-T-(M=A*h+3*(h-1)));break;case o.LEFT:M=A/2*h+1.5*(h-1);a=f?(i=d-w,y-M):(i=d+x,v-M-T);break;case o.nj:case o.ij:a=f?(i=d+g/2,y-(M=A/2*h+1.5*(h-1))):(i=d,v-(M=A/2*h+1.5*(h-1))-T);break;default:i=d,a=v-(M=A/2*h+1.5*(h-1))-T}return[i,a]},x3a.prototype.OO=function(t,e){var r,n,i=CONSTS.JM,a=(e=void 0===e?{}:e).xO,o=(e.kO,e.yO),s=e.direction,u=e.lines,c=e.size,f=(e.IO,t[0]||0),l=t[1]||0;switch(this.mO(s,o).textAlign){case i.LEFT:r=f,n=l;break;case i.QM:r=f-a,n=l;break;case i.ij:r=f-a/2,n=l}return{x:r,y:n,w:a,h:this.TO(c,u),FO:f,_O:l}},x3a.prototype.mO=function(t,e){var r,n,i=CONSTS.JM;if(e)switch(t){case i.LEFT:r=i.QM;break;case i.QM:r=i.LEFT;break;case i.ZM:case i.tj:default:r=i.ij,n=i.tj}else switch(t){case i.LEFT:case i.ij:case i.QM:r=t,n=i.tj;break;case i.ZM:case i.tj:case i.nj:default:r=i.LEFT,n=t}return{textAlign:r,verticalAlign:n}},x3a.prototype.TO=function(t,e){return void 0===t&&(t=12),(t*=5/4)*(e=void 0===e?1:e)+3*(e-1)},x3a.prototype.CT=function(t,e){return this.Mf?this.Mf.measureText(t,e):this.NT?(this.NT.font=(e||12)+"px",this.NT.measureText(t.join("")).width):0},x3a.prototype.SO=function(t,e,r){if(!e||!r.txt)return{origin:t.origin,offset:[0,0],coords:t.coords,start:{}};var i=(n=CONSTS.sj.text).direction,a=n.offset,o=n.style,s=r.yO,u=r.CO,c=e.direction||i,f=e.offset||a,i=(n=e.style||o).fontSize||12,a=n.padding||o.padding,e=!1===n.fold?100:o.fj,n=r.txt.length,u=(o=this.Mf.lineBreak(r.txt,{fontSize:i,CO:u,type:r.BG||"ch",fj:e,YQ:this.NT,from:r.from})).lines.length,r=this.TO(i,1),n={xO:o.maxWidth,kO:r,yO:s,direction:c,padding:a,fj:e,lines:u,size:i,IO:n},c=this.AO(t,t.size,c,n),c=vector.add(c,f),f=vector.add(t.origin,c),n=this.OO(f,n);return{origin:t.origin,offset:c,coords:f,start:n}},x3a.prototype.EO=function(t,e,r){if(!e||!r.txt)return{offsetX:0,offsetY:0,w:0,h:0};var n,i,a=CONSTS.JM,o=CONSTS.sj,s=(t.coords,t.start),u=(t=void 0===(t=t.offset)?[]:t)[0],c=t[1],f=s.w,t=s.h,s=r.yO,o=(r=o.text).direction,r=r.style,o=e.direction||o,l=(e=(e.style||r).padding||r.padding)[0],r=e[1],h=e[2],d=e[3];if(s)switch(o){case a.ZM:n=u-f/2-d,i=c-l;break;case a.QM:n=u-d,i=c-l;break;case a.tj:n=u-f/2-d,i=c-l;break;case a.LEFT:n=u-f-d,i=c-l;break;case a.nj:case a.ij:n=u-f/2-d,i=c-l;break;default:n=u-f/2-d,i=c+h}else switch(o){case a.ZM:n=u-d,i=c+h;break;case a.QM:n=u-f-d,i=c+h;break;case a.tj:case a.LEFT:n=u-d,i=c+h;break;case a.nj:case a.ij:n=u-f/2-d,i=c-l;break;default:n=u-f/2-d,i=c+h}return{offsetX:n,offsetY:i,w:f+d+r,h:t+l+h}},x3a.prototype.fO=function(t,e,r,n){var i=(n=void 0===n?{}:n).from,a=n.center,o=e.data,s=e.opts||{},u=o.position,c=o.txt,f=s.icon,s=r.text,r=e.CO,e=this.oO().zoom;return a[2]=a[2]||0,e="inner"!==i||"relative"!==o.positionType&&LocalZoom<=e?vector.Ip(u,a):u,a=vector.add(e,[0,0]),u=!!f,{origin:e,icon:f=this.wO(a,f&&f[0]),text:n=this.SO(f,s,{CO:r,txt:c,yO:u,BG:o.BG,from:n.from}),padding:this.EO(n,s,{txt:c,yO:u})}},x3a);function x3a(t){this.options={},this.Gj={},this.Hj={},this.Vj={},this.Wj={},this.$j=0,this.render=null,this.NO={},this.ac=t.z_,this.Mf=t.R_,this.io=t.canvas,this.NT=t.Nz}var LabelGroup=(oga.prototype.nT=function(t){if(!t)return"";var e=t.fontSize,n=void 0===(r=t.fillColor)?CONSTS.COLOR.Uj:r,a=void 0===(i=t.strokeColor)?CONSTS.COLOR.Uj:i,r=t.strokeWidth,i=t.backgroundColor,t=t.borderColor,r=labelsUtil.toString(n)+labelsUtil.toString(a)+(i?labelsUtil.toString(i):""+(t?labelsUtil.toString(t):""))+e+r;return this.AS(r),this.oT[r]},oga.prototype.AS=function(t){this.oT[t]||(this.oT[t]=this.index++)},oga);function oga(){this.oT={},this.index=1}var labelGroup=new LabelGroup,isSupportFloat64Array="undefined"!=typeof Float64Array,isSupportFloat32Array$1="undefined"!=typeof Float32Array;isSupportFloat64Array?setMatrixArrayType(Float64Array):isSupportFloat32Array$1?setMatrixArrayType(Float32Array):(window.Float32Array=void 0,setMatrixArrayType(Array));var RESIZE_MULTIPLIER=2,DEFAULT_CAPACITY=128,StructArray=(Bga.Wb=function(t,e){return t.trim(),e&&(t.pM=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Bga.Gb=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.yM=t.arrayBuffer.byteLength/this.Rb,e.mM(),e},Bga.prototype.trim=function(){this.length!==this.yM&&(this.yM=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.constructor.Rb),this.mM())},Bga.prototype.resize=function(t){this.gM(t),this.length=t},Bga.prototype.gM=function(t){t>this.yM&&(this.yM=Math.max(t,Math.floor(this.yM*RESIZE_MULTIPLIER),DEFAULT_CAPACITY),t=this.wM,this.arrayBuffer=new ArrayBuffer(this.yM*this.constructor.Rb),this.mM(),t&&this.wM.set(t))},Bga);function Bga(){this.pM=!1,this.yM=-1,this.length=0}var FillArray=(Jga=StructArray,__extends(Kga,Jga),Kga.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},Kga.prototype.MM=function(t,e,r){this.Mb[t*=2]=e,this.Mb[1+t]=r},Kga.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},Kga.Rb=8,Kga),Jga;function Kga(){var t=Jga.call(this)||this;return t.pM=!1,t.resize(0),t}var FillExtrusionArray=(Tga=StructArray,__extends(Uga,Tga),Uga.prototype.kb=function(t,e,r,n,i,a){var o=this.length;this.resize(o+1),this.MM(o,t,e,r,n,i,a)},Uga.prototype.MM=function(t,e,r,n,i,a,o){var s=8*t;this.Mb[s]=e,this.Mb[1+s]=r,this.Mb[2+s]=n,this.Mb[3+s]=i,this.Mb[4+s]=a[0],this.Mb[5+s]=a[1],this.Mb[6+s]=a[2],this.jM[14+(t*=16)]=o[0],this.jM[15+t]=o[1]},Uga.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},Uga.Rb=32,Uga),Tga;function Uga(){var t=Tga.call(this)||this;return t.pM=!1,t.resize(0),t}var LinesIndexArray=(k6a=StructArray,__extends(l6a,k6a),l6a.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},l6a.prototype.MM=function(t,e,r){this.jM[t*=2]=e,this.jM[1+t]=r},l6a.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},l6a.Rb=4,l6a),k6a;function l6a(){var t=k6a.call(this)||this;return t.length=0,t.resize(0),t}var LinesIndexArrayUint=(u6a=StructArray,__extends(v6a,u6a),v6a.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},v6a.prototype.MM=function(t,e,r){this.UI[t*=2]=e,this.UI[1+t]=r},v6a.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},v6a.Rb=8,v6a),u6a;function v6a(){var t=u6a.call(this)||this;return t.length=0,t.resize(0),t}var LineArrayBuffer=(E6a=StructArray,__extends(F6a,E6a),F6a.prototype.kb=function(t,e,r,n){var i=this.length;this.resize(i+1),this.MM(i,t,e,r,n)},F6a.prototype.MM=function(t,e,r,n,i){t*=this.constructor.Rb/4,this.Mb[t]=e[0],this.Mb[1+t]=e[1],this.Mb[2+t]=r[0],this.Mb[3+t]=r[1],this.Mb[4+t]=n,this.Mb[5+t]=i[0],this.Mb[6+t]=i[1]},F6a.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},F6a.Rb=28,F6a),E6a;function F6a(){var t=E6a.call(this)||this;return t.resize(0),t}var TriangleIndexArray=(U6a=StructArray,__extends(V6a,U6a),V6a.prototype.kb=function(t,e,r){var n=this.length;this.resize(n+1),this.MM(n,t,e,r)},V6a.prototype.MM=function(t,e,r,n){this.jM[t*=3]=e,this.jM[1+t]=r,this.jM[2+t]=n},V6a.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},V6a.Rb=6,V6a),U6a;function V6a(){var t=U6a.call(this)||this;return t.resize(0),t}var TriangleIndexArrayUint=(eha=StructArray,__extends(fha,eha),fha.prototype.kb=function(t,e,r){var n=this.length;this.resize(n+1),this.MM(n,t,e,r)},fha.prototype.MM=function(t,e,r,n){this.UI[t*=3]=e,this.UI[1+t]=r,this.UI[2+t]=n},fha.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},fha.Rb=12,fha),eha;function fha(){var t=eha.call(this)||this;return t.resize(0),t}var SymbolArray=(qha=StructArray,__extends(rha,qha),rha.prototype.kb=function(t,e,r){var n=this.length;this.resize(this.length+1),this.MM(n,t,e,r)},rha.prototype.MM=function(t,e,r,n){var i=13*t;this.Mb[i]=e,this.Mb[1+i]=r;var a=n.color,t=n.borderColor,e=n.radius,r=n.borderWidth;this.Mb[2+i]=e,this.Mb[3+i]=r,this.Mb[4+i]=a[0],this.Mb[5+i]=a[1],this.Mb[6+i]=a[2],this.Mb[7+i]=a[3],this.Mb[8+i]=t[0],this.Mb[9+i]=t[1],this.Mb[10+i]=t[2],this.Mb[11+i]=t[3],this.Mb[12+i]=+(n.visible&&n.filter)},rha.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},rha.Rb=52,rha),qha;function rha(){var t=qha.call(this)||this;return t.pM=!1,t.resize(0),t}var SimpleSymbolArray=(Gha=StructArray,__extends(Hha,Gha),Hha.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},Hha.prototype.MM=function(t,e,r){this.Mb[t*=2]=e,this.Mb[1+t]=r},Hha.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},Hha.Rb=4,Hha),Gha;function Hha(){var t=Gha.call(this)||this;return t.pM=!1,t.resize(0),t}var SmartArrayBuffer=(Qha.prototype.update=function(t){var e,r,n;0!==t.length&&this.AM&&(e="ARRAY_BUFFER"===this.type,r=this.AM.gl,n=(e?this.AM.de:this.AM.me).current,(e?this.AM.de:this.AM.me).set(this.buffer),this.uf<t.byteLength?(r.bufferData(r[this.type],t,r.STATIC_DRAW),this.byteLength=t.byteLength,this.uf=t.byteLength):(r.bufferSubData(r[this.type],0,t),this.byteLength=t.byteLength),(e?this.AM.de:this.AM.me).set(n))},Qha.prototype.destroy=function(){this.buffer&&this.AM&&this.AM.deleteBuffer(this.buffer)},Qha.prototype.TX=function(){this.AM=null},__decorate([InnerClass("SmartArrayBuffer")],Qha));function Qha(t,e,r,n){void 0===n&&(n="ARRAY_BUFFER"),this.AM=t,this.kM=r,this.type=n,t&&(this.buffer="ARRAY_BUFFER"===n?t.fe(e,r,"DYNAMIC_DRAW"):t.ve(e),this.uf=e.byteLength,this.byteLength=e.byteLength)}var COS_HALF_SHARP_CORNER=Math.cos(Math.PI/180*75),prepMatClockwise=fromValues(0,-1,1,0),perpMatCounterClockwise=fromValues(0,1,-1,0);function perpCounterClockwise(t,e){transformMat2(t,e,perpMatCounterClockwise)}function perpClockwise(t,e){transformMat2(t,e,prepMatClockwise)}var minRoundAngle=Math.PI/9,emptyVec2=create$3(),emptyVec3=create$1(),prevPos=create$3(),currentPos=create$3(),nextPos=create$3(),tmpPos=create$3(),currentNormal=create$3(),nextNormal=create$3(),distance$1=0,nextDir=create$3(),currentDir=create$3(),negateCurrentNormal=create$3(),lineJoin,lineCap,currentNormal_addLineVertex=create$3(),leftNormal=create$3(),rightNormal=create$3(),offsetLeft=create$3(),offsetRight=create$3(),joinNormal_addMiter=create$3(),tmp_addTiangleVertex=create$1(),currentNormal_addTiangleVertex=create$3(),nextNormal_addTiangleVertex=create$3(),normal_addTiangleVertex=create$3(),tmp_addRoundVertex=create$1(),currentNormal_addRoundVertex=create$3(),nextNormal_addRoundVertex=create$3(),tmpNormal_addRoundVertex=create$3(),roundCenter_addRoundVertex=create$3(),CoreLineBucket=(b7a.OM=function(t,e,r){sub$1(t,e,r),normalize(t,t),perpCounterClockwise(t,t)},b7a.xM=function(t,e,r){add(t,e,r),0===t[0]&&0===t[1]||normalize(t,t)},b7a.prototype.hb=function(t,e){if(t.length<4)return{Iw:0,distance:0};"auto"===(e=void(distance$1=0)===e?{X_:1,lineJoin:"miter",lineCap:"butt"}:e).lineJoin&&(e.lineJoin="miter"),lineJoin=e.lineJoin,lineCap=e.lineCap||"butt";for(var r,n=this.Qx.length,i=0,a=t.length;i<a;i+=2)0===i?(currentPos[0]=t[i],currentPos[1]=t[i+1],nextPos[0]=t[i+2],nextPos[1]=t[i+3],b7a.OM(nextNormal,nextPos,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,e.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),copy$1(prevPos,currentPos)):i===a-2?(currentPos[0]=t[i],currentPos[1]=t[i+1],r=dist$1(currentPos,prevPos),distance$1+=r,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*e.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")):(currentPos[0]=t[i],currentPos[1]=t[i+1],nextPos[0]=t[i+2],nextPos[1]=t[i+3],b7a.OM(nextNormal,nextPos,currentPos),0===nextNormal[0]&&0===nextNormal[1]||(r=dist$1(currentPos,prevPos),distance$1+=r,sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(prevPos,currentPos),copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)));return{Iw:3*(this.Qx.length-n),distance:distance$1}},b7a.prototype.g0=function(t,e){if(t.length<2)return{Iw:0,distance:0};"auto"===(e=void(distance$1=0)===e?{X_:1,lineJoin:"miter",lineCap:"butt"}:e).lineJoin&&(e.lineJoin="miter"),lineJoin=e.lineJoin,lineCap=e.lineCap||"butt";for(var r,n=this.Qx.length,i=0,a=t.length;i<a;i++)0===i?(currentPos[0]=t[i][0],currentPos[1]=t[i][1],nextPos[0]=t[i+1][0],nextPos[1]=t[i+1][1],b7a.OM(nextNormal,nextPos,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,e.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),copy$1(prevPos,currentPos)):i===a-1?(currentPos[0]=t[i][0],currentPos[1]=t[i][1],r=dist$1(currentPos,prevPos),distance$1+=r,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*e.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")):(currentPos[0]=t[i][0],currentPos[1]=t[i][1],nextPos[0]=t[i+1][0],nextPos[1]=t[i+1][1],b7a.OM(nextNormal,nextPos,currentPos),0===nextNormal[0]&&0===nextNormal[1]||(r=dist$1(currentPos,prevPos),distance$1+=r,sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(prevPos,currentPos),copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)));return{Iw:3*(this.Qx.length-n),distance:distance$1}},b7a.prototype.eD=function(t,e,r){if(void 0===r&&(r=3e3),t.length<4)return{Iw:0,distance:0};"auto"===(e=void(distance$1=0)===e?{X_:1,lineJoin:"miter",lineCap:"butt"}:e).lineJoin&&(e.lineJoin="miter"),lineJoin=e.lineJoin,lineCap=e.lineCap||"butt";for(var n=this.Qx.length,i=0,a=t.length;i<a;i+=2)if(0===i)currentPos[0]=t[i],currentPos[1]=t[i+1],nextPos[0]=t[i+2],nextPos[1]=t[i+3],b7a.OM(nextNormal,nextPos,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,e.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),copy$1(prevPos,currentPos);else if(i===a-2){tmpPos[0]=t[i],tmpPos[1]=t[i+1];var o=dist$1(tmpPos,prevPos);copy$1(tmpPos,prevPos);for(var s=0;r<o-s;)tmpPos[0]=tmpPos[0]+currentDir[0]*r,tmpPos[1]=tmpPos[1]+currentDir[1]*r,s+=r,this.IM(tmpPos,currentNormal,nextNormal,distance$1+s,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,nextNormal,distance$1+s,currentDir,!0,0,"miter");currentPos[0]=t[i],currentPos[1]=t[i+1],distance$1+=o,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*e.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")}else if(currentPos[0]=t[i],currentPos[1]=t[i+1],nextPos[0]=t[i+2],nextPos[1]=t[i+3],b7a.OM(nextNormal,nextPos,currentPos),0!==nextNormal[0]||0!==nextNormal[1]){var u=dist$1(currentPos,prevPos);for(copy$1(tmpPos,prevPos),s=0;r<u-s;)tmpPos[0]=tmpPos[0]+currentDir[0]*r,tmpPos[1]=tmpPos[1]+currentDir[1]*r,s+=r,this.IM(tmpPos,currentNormal,currentNormal,distance$1+s,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,currentNormal,distance$1+s,currentDir,!0,0,"miter");currentPos[0]=t[i],currentPos[1]=t[i+1],distance$1+=u,sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(prevPos,currentPos),copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)}return{Iw:3*(this.Qx.length-n),distance:distance$1}},b7a.prototype.Nx=function(t,e){if(void 0===e&&(e={lineJoin:"miter"}),t.length<2)return{Iw:0,distance:0};for(var r,n,i=this.Qx.length,a=0,o=t.length;a<o;a++)0===a?(copy$1(currentPos,t[a]),r=t[a+1],n=t[o-2],b7a.OM(nextNormal,r,currentPos),b7a.OM(currentNormal,currentPos,n),sub$1(nextDir,r,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(currentDir,nextDir),copy$1(currentNormal,nextNormal),copy$1(prevPos,currentPos)):a===o-1?(copy$1(currentPos,t[a]),copy$1(nextPos,t[1]),distance$1+=dist$1(currentPos,prevPos),b7a.OM(nextNormal,nextPos,currentPos),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin)):(copy$1(currentPos,t[a]),copy$1(nextPos,t[a+1]),distance$1+=dist$1(currentPos,prevPos),b7a.OM(nextNormal,nextPos,currentPos),sub$1(nextDir,nextPos,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(prevPos,currentPos),copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir));return{Iw:3*(this.Qx.length-i),distance:distance$1}},b7a.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.destroy(),delete this.zs),this.Pc&&(this.Pc.destroy(),delete this.Pc)},b7a.prototype.IM=function(t,e,r,n,i,a,o,s){copy$1(joinNormal_addMiter,emptyVec2),b7a.xM(joinNormal_addMiter,e,r);var u=dot(joinNormal_addMiter,e);scale$2(joinNormal_addMiter,joinNormal_addMiter,1/u);var c=0,f=0;o&&(f=c=o),"bevel"===s||"miter"===s&&u<COS_HALF_SHARP_CORNER?a?this.SM(t,r,n,c,f,i):(this.SM(t,e,n,c,f,i),this._M=this._b.length-2,this.e2=this._M-1,this.e1=this.e2-1,this.Qx.kb(this.e1,this.e2,this._M),this.e1=this.e2,this.e2=this._M,this._M=this._M+1,this.Qx.kb(this.e1,this.e2,this._M),this.CM(t,e,r,n)):"round"===s?a?this.SM(t,r,n,c,f,i):(this.SM(t,e,n,c,f,i),this._M=this._b.length-2,this.e2=this._M-1,this.e1=this.e2-1,this.Qx.kb(this.e1,this.e2,this._M),this.e1=this.e2,this.e2=this._M,this._M=this._M+1,this.Qx.kb(this.e1,this.e2,this._M),this.DI(t,e,r,n)):(this.SM(t,joinNormal_addMiter,n,c,f,i),a||(this._M=this._b.length-2,this.e2=this._M-1,this.e1=this.e2-1,this.Qx.kb(this.e1,this.e2,this._M),this.e1=this.e2,this.e2=this._M,this._M=this._M+1,this.Qx.kb(this.e1,this.e2,this._M)))},b7a.prototype.SM=function(t,e,r,n,i,a){copy$1(currentNormal_addLineVertex,e),copy$1(leftNormal,currentNormal_addLineVertex),copy$1(rightNormal,currentNormal_addLineVertex),copy$1(offsetLeft,emptyVec2),copy$1(offsetRight,emptyVec2),scale$2(rightNormal,currentNormal_addLineVertex,-1),n&&(perpCounterClockwise(offsetLeft,leftNormal),scale$2(offsetLeft,offsetLeft,n),add(leftNormal,offsetLeft,leftNormal)),i&&(perpClockwise(offsetRight,rightNormal),scale$2(offsetRight,offsetRight,i),add(rightNormal,offsetRight,rightNormal)),this._b.kb(t,leftNormal,r,a),this._b.kb(t,rightNormal,r,a)},b7a.prototype.CM=function(t,e,r,n){void 0===n&&(n=0),copy(tmp_addTiangleVertex,emptyVec3),copy$1(currentNormal_addTiangleVertex,e),copy$1(nextNormal_addTiangleVertex,r),copy$1(normal_addTiangleVertex,emptyVec2),cross$1(tmp_addTiangleVertex,currentNormal_addTiangleVertex,nextNormal_addTiangleVertex),r=0<tmp_addTiangleVertex[2],this._b.kb(t,normal_addTiangleVertex,n,normal_addTiangleVertex),r&&(negate(currentNormal_addTiangleVertex,currentNormal_addTiangleVertex),negate(nextNormal_addTiangleVertex,nextNormal_addTiangleVertex)),this._b.kb(t,currentNormal_addTiangleVertex,n,normal_addTiangleVertex),this._b.kb(t,nextNormal_addTiangleVertex,n,normal_addTiangleVertex),this._M=this._b.length-1,this.e2=this._M-1,this.e1=this.e2-1,this.Qx.kb(this.e1,this.e2,this._M)},b7a.prototype.DI=function(t,e,r,n){void 0===n&&(n=0),copy(tmp_addRoundVertex,emptyVec3),copy$1(currentNormal_addRoundVertex,e),copy$1(nextNormal_addRoundVertex,r);var i=angle(currentNormal_addRoundVertex,nextNormal_addRoundVertex);cross$1(tmp_addRoundVertex,currentNormal_addRoundVertex,nextNormal_addRoundVertex);var a=0<tmp_addRoundVertex[2],o=[];o.push(currentNormal_addRoundVertex);for(var s=minRoundAngle;s<i;s+=minRoundAngle){var u=create$3();rotate(u,currentNormal_addRoundVertex,fromValues$3(0,0),a?s:-1*s),o.push(u)}o.push(nextNormal_addRoundVertex),a&&forEach(o,function(t){negate(t,t)}),copy$1(roundCenter_addRoundVertex,emptyVec2),this._b.kb(t,roundCenter_addRoundVertex,n,roundCenter_addRoundVertex);var c=this._b.length-1;this._b.kb(t,o[0],n,roundCenter_addRoundVertex),this._M=this._b.length-1,this.e2=this._M-1;for(var f=1,l=o.length;f<l;f++)this._b.kb(t,o[f],n,roundCenter_addRoundVertex),this._M=this._b.length-1,this.e2=this._M-1,this.Qx.kb(c,this.e2,this._M)},b7a);function b7a(){this._b=new LineArrayBuffer,this.e1=this.e2=this._M=-1,this.uploaded=!1}var PolylineBucket=(uia=CoreLineBucket,__extends(via,uia),via.prototype.upload=function(t,e){void 0===e&&(e=!1),this.uploaded||(this.uploaded=!0,this.zs?this.zs.update(this._b.Mb):this.zs=new SmartArrayBuffer(t,this._b.Mb,LineArrayBuffer.Rb),this.Pc?this.Pc.update(this.Qx.UI):this.Pc=new SmartArrayBuffer(t,this.Qx.UI,32,"ELEMENT_ARRAY_BUFFER"),e&&(delete this.Qx,delete this._b))},via.prototype.reset=function(){this.uploaded=!1,this._b=new LineArrayBuffer,this.Qx=new TriangleIndexArrayUint,this.e1=this.e2=this._M=-1,this.uploaded=!1},via),uia;function via(){var t=uia.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t}var earcut_1=earcut,default_1$1=earcut;function earcut(t,e,r){r=r||2;var n,i,a,o,s,u=e&&e.length,c=u?e[0]*r:t.length,f=linkedList(t,0,c,r,!0),l=[];if(!f||f.next===f.NM)return l;if(u&&(f=eliminateHoles(t,e,f,r)),t.length>80*r){for(var h=n=t[0],d=i=t[1],v=r;v<c;v+=r)(a=t[v])<h&&(h=a),(o=t[v+1])<d&&(d=o),n<a&&(n=a),i<o&&(i=o);s=0!==(s=Math.max(n-h,i-d))?1/s:0}return earcutLinked(f,l,r,h,d,s),l}function linkedList(t,e,r,n,i){var a,o;if(i===0<signedArea(t,e,r,n))for(a=e;a<r;a+=n)o=insertNode(a,t[a],t[a+1],o);else for(a=r-n;e<=a;a-=n)o=insertNode(a,t[a],t[a+1],o);return o&&equals$2(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(t,e){if(!t)return t;e=e||t;var r,n=t;do{if(r=!1,n.LM||!equals$2(n,n.next)&&0!==area(n.NM,n,n.next))n=n.next;else{if(removeNode(n),(n=e=n.NM)===n.next)break;r=!0}}while(r||n!==e);return e}function earcutLinked(t,e,r,n,i,a,o){if(t){!o&&a&&indexCurve(t,n,i,a);for(var s,u,c=t;t.NM!==t.next;)if(s=t.NM,u=t.next,a?isEarHashed(t,n,i,a):isEar(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),removeNode(t),t=u.next,c=u.next;else if((t=u)===c){o?1===o?earcutLinked(t=cureLocalIntersections(filterPoints(t),e,r),e,r,n,i,a,2):2===o&&splitEarcut(t,e,r,n,i,a):earcutLinked(filterPoints(t),e,r,n,i,a,1);break}}}function isEar(t){var e=t.NM,r=t,n=t.next;if(!(0<=area(e,r,n))){for(var i=t.next.next;i!==t.NM;){if(pointInTriangle(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=area(i.NM,i,i.next))return;i=i.next}return 1}}function isEarHashed(t,e,r,n){var i=t.NM,a=t,o=t.next;if(!(0<=area(i,a,o))){for(var s=(i.x<a.x?i.x<o.x?i:o:a.x<o.x?a:o).x,u=(i.y<a.y?i.y<o.y?i:o:a.y<o.y?a:o).y,c=(i.x>a.x?i.x>o.x?i:o:a.x>o.x?a:o).x,f=(i.y>a.y?i.y>o.y?i:o:a.y>o.y?a:o).y,l=zOrder(s,u,e,r,n),h=zOrder(c,f,e,r,n),d=t.DM,v=t.RM;d&&d.z>=l&&v&&v.z<=h;){if(d!==t.NM&&d!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;if(d=d.DM,v!==t.NM&&v!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}for(;d&&d.z>=l;){if(d!==t.NM&&d!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;d=d.DM}for(;v&&v.z<=h;){if(v!==t.NM&&v!==t.next&&pointInTriangle(i.x,i.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}return 1}}function cureLocalIntersections(t,e,r){var n=t;do{var i=n.NM,a=n.next.next}while(!equals$2(i,a)&&intersects$1(i,n,n.next,a)&&locallyInside(i,a)&&locallyInside(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),removeNode(n),removeNode(n.next),n=t=a),(n=n.next)!==t);return filterPoints(n)}function splitEarcut(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.NM;){if(o.i!==s.i&&isValidDiagonal(o,s)){var u=splitPolygon(o,s),o=filterPoints(o,o.next),u=filterPoints(u,u.next);return earcutLinked(o,e,r,n,i,a),earcutLinked(u,e,r,n,i,a),0}s=s.next}}while((o=o.next)!==t)}function eliminateHoles(t,e,r,n){for(var i,a=[],o=0,s=e.length;o<s;o++)(i=linkedList(t,e[o]*n,o<s-1?e[o+1]*n:t.length,n,!1))===i.next&&(i.LM=!0),a.push(getLeftmost(i));for(a.sort(compareX),o=0;o<a.length;o++)r=filterPoints(r=eliminateHole(a[o],r),r.next);return r}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){var r=findHoleBridge(t,e);if(!r)return e;var n=splitPolygon(r,t),t=filterPoints(r,r.next);return filterPoints(n,n.next),e===r?t:e}function findHoleBridge(t,e){var r,n=e,i=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&o<s){if((o=s)===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}}while((n=n.next)!==e);if(!r)return null;if(i===o)return r;for(var u,c=r,f=r.x,l=r.y,h=1/0,n=r;i>=n.x&&n.x>=f&&i!==n.x&&pointInTriangle(a<l?i:o,a,f,l,a<l?o:i,a,n.x,n.y)&&(u=Math.abs(a-n.y)/(i-n.x),locallyInside(n,t)&&(u<h||u===h&&(n.x>r.x||n.x===r.x&&sectorContainsSector(r,n)))&&(r=n,h=u)),(n=n.next)!==c;);return r}function sectorContainsSector(t,e){return area(t.NM,t,e.NM)<0&&area(e.next,t,t.next)<0}function indexCurve(t,e,r,n){for(var i=t;null===i.z&&(i.z=zOrder(i.x,i.y,e,r,n)),i.DM=i.NM,i.RM=i.next,(i=i.next)!==t;);i.DM.RM=null,i.DM=null,sortLinked(i)}function sortLinked(t){var e,r,n,i,a,o,s,u,c=1;do{for(r=t,a=t=null,o=0;r;){for(o++,n=r,e=s=0;e<c&&(s++,n=n.RM);e++);for(u=c;0<s||0<u&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(r=(i=r).RM,s--):(n=(i=n).RM,u--),a?a.RM=i:t=i,i.DM=a,a=i;r=n}}while(a.RM=null,c*=2,1<o);return t}function zOrder(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){for(var e=t,r=t;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),(e=e.next)!==t;);return r}function pointInTriangle(t,e,r,n,i,a,o,s){return 0<=(i-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(r-o)*(e-s)&&0<=(r-o)*(a-s)-(i-o)*(n-s)}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.NM.i!==e.i&&!intersectsPolygon(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)&&(area(t.NM,t,e.NM)||area(t,e.NM,e))||equals$2(t,e)&&0<area(t.NM,t,t.next)&&0<area(e.NM,e,e.next))}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals$2(t,e){return t.x===e.x&&t.y===e.y}function intersects$1(t,e,r,n){var i=sign(area(t,e,r)),a=sign(area(t,e,n)),o=sign(area(r,n,t)),s=sign(area(r,n,e));return i!==a&&o!==s||0===i&&onSegment(t,r,e)||0===a&&onSegment(t,n,e)||0===o&&onSegment(r,t,n)||0===s&&onSegment(r,e,n)}function onSegment(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function sign(t){return 0<t?1:t<0?-1:0}function intersectsPolygon(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects$1(r,r.next,t,e))return 1}while((r=r.next)!==t)}function locallyInside(t,e){return area(t.NM,t,t.next)<0?0<=area(t,e,t.next)&&0<=area(t,t.NM,e):area(t,e,t.NM)<0||area(t,t.next,e)<0}function middleInside(t,e){for(var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==t;);return n}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),n=new Node(e.i,e.x,e.y),i=t.next,a=e.NM;return(t.next=e).NM=t,(r.next=i).NM=r,(n.next=r).NM=n,(a.next=n).NM=a,n}function insertNode(t,e,r,n){return r=new Node(t,e,r),n?(r.next=n.next,(r.NM=n).next.NM=r,n.next=r):(r.NM=r).next=r,r}function removeNode(t){t.next.NM=t.NM,t.NM.next=t.next,t.DM&&(t.DM.RM=t.RM),t.RM&&(t.RM.DM=t.DM)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.NM=null,this.next=null,this.z=null,this.DM=null,this.RM=null,this.LM=!1}function signedArea(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}earcut.PM=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(signedArea(t,0,a,r));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*r,f=s<u-1?e[s+1]*r:t.length;o-=Math.abs(signedArea(t,c,f,r))}for(var l=0,s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,v=n[s+2]*r;l+=Math.abs((t[h]-t[v])*(t[1+d]-t[1+h])-(t[h]-t[d])*(t[1+v]-t[1+h]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},earcut.UM=function(t){for(var e=t[0][0].length,r={rp:[],BM:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.rp.push(t[i][a][o]);0<i&&(n+=t[i-1].length,r.BM.push(n))}return r},earcut_1.default=default_1$1;var CoreFillBucket=(rka.prototype.Nx=function(t,e){if(t.length<6)return 0;for(var r=this.Qx.length,n=this._b.length,i=earcut_1(t,e),a=0,o=i.length;a<o;a+=3)this.Qx.kb(n+i[a],n+i[a+1],n+i[a+2]);for(a=0,o=t.length;a<o;a+=2)this._b.kb(t[a],t[a+1]);return 0<(r=3*(this.Qx.length-r))&&(this.uploaded=!1),r},rka.prototype.Ew=function(t){if(t.length<2)return 0;for(var e=this.qM.length,r=this.zM.length,n=0,i=t.length;n<i;n+=2)this.zM.kb(t[n][0],t[n][1]),this.zM.kb(t[n+1][0],t[n+1][1]),this.qM.kb(r+n,r+n+1);return 0<(e=2*(this.qM.length-e))&&(this.uploaded=!1),e},rka.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.Ec&&(this.Ec.context.deleteBuffer(this.Ec),delete this.Ec),this.Nc&&(this.Nc.context.deleteBuffer(this.Nc),delete this.Nc)},rka);function rka(){this._b=new FillArray,this.zM=new FillArray,this.uploaded=!1}var PolygonBucket=(Gka=CoreFillBucket,__extends(Hka,Gka),Hka.prototype.upload=function(t,e){void 0===e&&(e=!1),this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,FillArray.Rb),this.Pc=t.ve(this.Qx.UI),this.Ec=t.fe(this.zM.Mb,LinesIndexArray.Rb),this.Nc=t.ve(this.qM.UI),e&&(delete this.Qx,delete this._b,delete this.zM,delete this.qM))},Hka.prototype.reset=function(){this._b=new FillArray,this.zM=new FillArray,this.Qx=new TriangleIndexArrayUint,this.qM=new LinesIndexArrayUint,this.uploaded=!1},Hka),Gka;function Hka(){var t=Gka.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t.qM=new LinesIndexArrayUint,t}var FaceTextureCoord={empty:fromValues$3(-1,-1),Gm:fromValues$3(1,1),qm:fromValues$3(0,1),Nm:fromValues$3(1,0),Um:fromValues$3(0,0)},MaxInfo={Gm:create$3(),qm:create$3(),Nm:create$3(),Um:create$3()},floorHeight=6,FillExtrusionBucket=(Lka.prototype.tz=function(t,e,r){void 0===e&&(e=100);for(var n=[],i=[],a=t.length,o=0;o<a;o+=2)i[s=o/2*3]=t[o],i[s+1]=t[o+1],i[s+2]=0;for(var s,o=0;o<a;o+=2)n[s=o/2*3]=t[o],n[s+1]=t[o+1],n[s+2]=e;return this.Nx(n,e,r)+this.RI(i,n,r)},Lka.prototype.RI=function(t,e,r){var n=e.length,i=e[2],a=this._b.length;t=t.concat(t.slice(0,3)),e=e.concat(e.slice(0,3));for(var o=0;o<n-3;o+=3){var s=Math.abs(t[o]-t[o+3]),u=Math.abs(t[o+1]-t[o+4]),c=Math.round(i),u=Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(u,2)));0<(c=fromValues$3(Math.ceil(u/floorHeight),Math.round(c/floorHeight)))[1]?(mul(MaxInfo.qm,FaceTextureCoord.qm,c),mul(MaxInfo.Gm,FaceTextureCoord.Gm,c),mul(MaxInfo.Um,FaceTextureCoord.Um,c),mul(MaxInfo.Nm,FaceTextureCoord.Nm,c)):(set$1(MaxInfo.qm,-1,-1),set$1(MaxInfo.Gm,-1,-1),set$1(MaxInfo.Um,-1,-1),set$1(MaxInfo.Nm,-1,-1)),c=this.zI(t.slice(o,o+3),t.slice(o+3,o+6),e.slice(o+3,o+6)),this._b.kb(t[o],t[o+1],t[o+2],i,c,MaxInfo.qm),this._b.kb(e[o+3],e[o+4],e[o+5],i,c,MaxInfo.Nm),this._b.kb(t[o+3],t[o+4],t[o+5],i,c,MaxInfo.Gm),this._b.kb(t[o],t[o+1],t[o+2],i,c,MaxInfo.qm),this._b.kb(e[o],e[o+1],e[o+2],i,c,MaxInfo.Um),this._b.kb(e[o+3],e[o+4],e[o+5],i,c,MaxInfo.Nm)}return 0<(a=this._b.length-a)&&(this.uploaded=!1),a},Lka.prototype.Nx=function(t,e,r){if(t.length<9)return 0;for(var n=this._b.length,i=earcut_1(t,r,3),a=i.length-1;0<=a;a--){var o=3*i[a];this._b.kb(t[o],t[1+o],t[2+o],e,fromValues$1(0,0,1),FaceTextureCoord.empty)}return 0<(n=this._b.length-n)&&(this.uploaded=!1),n},Lka.prototype.zI=function(t,e,r){var n=fromValues$1(t[0],t[1],t[2]),i=fromValues$1(e[0],e[1],e[2]),a=fromValues$1(r[0],r[1],r[2]),t=create$1(),e=create$1(),r=create$1();return sub(e,n,i),sub(r,a,i),cross(t,e,r),t},Lka.prototype.upload=function(t,e){void 0===e&&(e=!1),this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,FillExtrusionArray.Rb),e&&delete this._b)},Lka.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc)},Lka.prototype.reset=function(){this._b=new FillExtrusionArray,this.uploaded=!1},Lka);function Lka(){this._b=new FillExtrusionArray,this.uploaded=!1}var StyleParser=(Ala.Wb=function(t){return{style:JSON.stringify(t.styles),TY:t.TY}},Ala.Gb=function(t){var e=new Ala(t.TY);return e.jY(JSON.parse(t.style)),e},Ala.mV=function(t){var e,r={};for(e in t)if(t.hasOwnProperty(e)){var n=t[e],i=void 0;switch(e[0]){case"1":i=Ala.Xe;break;case"2":i=Ala.rn,n.type="road";break;case"3":i=Ala.cn;break;case"4":i=Ala.un;break;case"5":i=Ala.ln,n.type="building"}if(i){var o=(a=n.key)[0],a=a[1];void 0===r[o]&&(r[o]={});for(var s=(r[o][a]=n).browserStyle,u=0,c=s.length;u<c;u+=1){var f=s[u];if(s[u]=i(f),void 0===n.z)switch(e[0]){case"2":n.z=(s[u]?s[u][0]:n).z;break;case"1":case"3":case"4":case"5":n.z=s[u].z;break;default:n.z=-1}}Ala.Sn(n)}else delete t[e]}return r},Ala.$V=function(t){var e,r={};for(e in t)if(t.hasOwnProperty(e)){var n=t[e],i=void 0;switch(e[0]){case"1":i=Ala.Xe;break;case"2":i=Ala.rn,n.type="road";break;case"3":i=Ala.cn;break;case"4":i=Ala.un;break;case"5":i=Ala.ln,n.type="building"}if(i){var o=(a=e.split(":"))[0],a=a[1];void 0===r[o]&&(r[o]={});for(var s=(r[o][a]=n).browserStyle,u=0,c=s.length;u<c;u+=1){var f=s[u];if(s[u]=i(f),void 0===n.z)switch(e[0]){case"2":n.z=(s[u]?s[u][0]:n).z;break;case"1":case"3":case"4":case"5":n.z=s[u].z;break;default:n.z=-1}}Ala.Sn(n)}else delete t[e]}return r},Ala.SZ=function(t){for(var e=t.stylemaps,r=e.length,n={},i=0;i<r;i++){var a=e[i],o=a.key[0],s=a.key[1],u={};void 0===n[o]&&(n[o]={}),(n[o][s]=u).browserStyle=a.browserStyle;for(var c={},f=a.levelStyleMapping.length,l=0;l<f;l+=2){var h=a.levelStyleMapping[l],d=a.levelStyleMapping[l+1];c[h]=d}u.levelStyleMapping=c;var v=void 0;switch(o[0]){case"1":v=Ala.Xe;break;case"2":v=Ala.rn,u.type="road";break;case"3":v=Ala.cn;break;case"4":v=Ala.un;break;case"5":v=Ala.ln,u.type="building"}for(var g=u.browserStyle,b=0,p=g.length;b<p;b+=1){var y=g[b];if(g[b]=v(y),void 0===u.z)switch(o[0]){case"2":u.z=(g[b]?g[b][0]:u).z;break;case"1":case"3":case"4":case"5":u.z=g[b].z;break;default:u.z=-1}}Ala.Sn(u)}return n},Ala.Je=function(t){if(!t)return null;if(t&&"0"!==t){if(8!==t.length||(t=t.slice(2)+t.slice(0,2)),this.yQ&&this.yQ[t])return Color.create(this.yQ[t]);var e=Color.create(t);return this.yQ||(this.yQ={}),this.yQ[t]||(this.yQ[t]=e.rgba.slice(0)),e}return null},Ala.Sn=function(t){if(void 0!==t.levelStyleMapping[3]&&(t.levelStyleMapping[2]=t.levelStyleMapping[3]),void 0!==t.levelStyleMapping[20]&&(t.levelStyleMapping[21]=t.levelStyleMapping[20],t.levelStyleMapping[22]=t.levelStyleMapping[20],t.levelStyleMapping[23]=t.levelStyleMapping[20],t.levelStyleMapping[24]=t.levelStyleMapping[20],t.levelStyleMapping[25]=t.levelStyleMapping[20],t.levelStyleMapping[26]=t.levelStyleMapping[20],t.levelStyleMapping[27]=t.levelStyleMapping[20],t.levelStyleMapping[28]=t.levelStyleMapping[20],t.levelStyleMapping[29]=t.levelStyleMapping[20],t.levelStyleMapping[30]=t.levelStyleMapping[20]),"building"===t.type&&t.levelStyleMapping&&(delete t.levelStyleMapping[15],delete t.levelStyleMapping[16]),"road"===t.type&&void 0!==t.levelStyleMapping[20]){var e=t.browserStyle,r=t.levelStyleMapping[20],n=e[r];if(n)for(var i=1;i<=10;i++){var a=[];a.push(exports.Ln({},n[0])),a.push(exports.Ln({},n[1])),a[0].roadWidth=a[0].roadWidth*Math.pow(2,i),a[0].borderWidth=a[0].borderWidth*Math.pow(2,i),t.browserStyle.push(a),t.levelStyleMapping[i+20]=r+i}}},Ala.prototype._Q=function(){return Boolean(this.styles)},Ala.prototype.jY=function(t){this.styles=t},Ala.prototype.clearStyleCache=function(){this.EI=-1,this.CI.clear()},Ala.prototype.setStyle=function(t){this.Ve=t,this.clearStyleCache()},Ala.prototype.EY=function(t){this.RV=t},Ala.prototype.MS=function(t){if(this.RV)return this.RV[t]},Ala.prototype.kF=function(t){this.bN=t},Ala.prototype.dn=function(t,e,r){if(this.styles){if(this.SI(t,e,r))return this.CI.get((t<<16)+e);if(this.jk(t,e,r)){var n=this.Ak(t,e,r,this.Ve)||null;return this.CI.set((t<<16)+e,n),n}return n=this.kk(t,e,r)||null,this.CI.set((t<<16)+e,n),n}},Ala.prototype.MF=function(t,e){var r=this.bN;if(!r||!r[t])return null;if(r[t].styles&&r[t].styles.color){var n,i,a=Util.getOptimalZoom(e),o={};for(n in r[t].styles.color.nodesObj)r[t].styles.color.nodesObj.hasOwnProperty(n)&&(o[(i=r[t].styles.color.nodesObj[n]).zoom]=i.value);return o[a=this._k(o,a)]?Util.Hex2Rgba(o[a]):null}return r[t].color?(a=r[t].color,Util.Hex2Rgba(a)):void 0},Ala.prototype.nX=function(t,e,r,n){var i=this.Ve;return i&&i[t]&&i[t][e]?(t=i[t][e]).styles&&t.styles[r]?(n=Util.getOptimalZoom(n),(n=this._k(t.styles[r].nodesObj,n))&&t.styles[r].nodesObj[n]?t.styles[r].nodesObj[n]:null):"visible"===r||t[r]&&(t.visible||"3"!==e)?t[r]:void 0:null},Ala.prototype.Ok=function(t,e,r){return void 0!==this.styles[t]&&(e=this.styles[t][e])&&void 0!==(r=e.levelStyleMapping[r])?e.browserStyle[r]:null},Ala.prototype.xk=function(t,e,r){if(void 0===this.styles[t])return null;if(void 0===this.styles[t][e])return null;if(void 0===this.styles[t][e].levelStyleMapping)return null;if(void 0===this.styles[t][e].browserStyle)return null;var n=this.styles[t][e].levelStyleMapping,i=this.styles[t][e].browserStyle,a=Math.floor(r);if(a===(t=Math.ceil(r))){var o=i[n[a]];if(o){var s=g=cloneDeep(o);return g instanceof Array&&(s=g[0]),g}return null}if(e=r-a<.8?a:t,o=i[n[a]],n=i[n[t]],(o||n)&&(o||e!==a)&&(!o||n||e!==t)&&(o||!n||a!==e)){if(!o&&n){var u=g=cloneDeep(n);g instanceof Array&&(u=g[0]);for(var c,f,l=Object.keys(u),h=0;h<l.length;h++)-1<(d=l[h]).indexOf("Color")&&u[d]&&u[d].rgba?(f=(r-a-.8)/.2,c=Math.floor(u[d].rgba[3]*f),u[d].rgba[3]=c):-1<d.indexOf("Width")&&(u[d]=u[d]*(f=(r-a-.8)/.2));return g}if(o&&n){s=g=cloneDeep(o),u=n,g instanceof Array&&(s=g[0]),g instanceof Array&&(u=n[0]);for(var d,v,l=Object.keys(s),h=0;h<l.length;h++)-1<(d=l[h]).indexOf("Width")&&(v=(r-a)*(u[d]-s[d])+s[d],s[d]=v);return g}if(!o||n)return null;var g,s=g=cloneDeep(o);return g instanceof Array&&(s=g[0]),g}},Ala.prototype.Ik=function(t,e,r){var n=[];return n[0]=t[0]+(e[0]-t[0])*r,n[1]=t[1]+(e[1]-t[1])*r,n[2]=t[2]+(e[2]-t[2])*r,n[3]=t[3]+(e[3]-t[3])*r,n},Ala.prototype.kk=function(t,e,r){var n=t.toString()[0];return"1"!==n&&"4"!==n?this.xk(t,e,r):(r=Util.getOptimalZoom(r),this.Ok(t,e,r))},Ala.prototype.Ak=function(t,e,r,n){var i=r,a=n[t][e]||n[t].all,o=null;if(a.styles){var s=Util.getOptimalZoom(r);if(a.styles.visible&&(n=this._k(a.styles.visible.nodesObj,s))){var u=a.styles.visible.nodesObj[n];if(void 0!==u&&!1===u)return null}for(var c=(u=cloneDeep(this.styles[t][e])).levelStyleMapping,f=u.browserStyle,l=Object.keys(a.styles),h=0;h<l.length;h++){var d=l[h],v=a.styles[d],g=null;if(v.transitional&&"linear"===v.transitional){var b,p=this.Tk(v.nodesObj,r);if(!p||!p[0])continue;if(!(i=p[0]))continue;if(void 0===(b=c[s]))continue;o=f[b],1===p.length?g=v.nodesObj[i]:"color"===d&&(g=this.Fk(p,v.nodesObj,r))}else{if(!(i=this._k(v.nodesObj,s)))continue;if(void 0===(b=c[s]))continue;o=f[b],g=v.nodesObj[i]}if(!o)return null;var y=t.toString()[0],m=this.uP(a,s);if("1"===y){if(!m)return null;this.NI(d,g,o,t,e)}else"2"===y?(this.Sk(d,g,o),!m&&o&&o[1]&&(o[1]=null)):"4"===y?this.LI(d,g,o):this.Ck(d,g,o)}}else{if(void 0!==a.visible&&!1===a.visible)return null;if(void 0===(b=(c=this.styles[t][e].levelStyleMapping)[i=Util.getOptimalZoom(i)]))return null;if(!this.styles[t][e].browserStyle[b])return null;for(o=(f=(u=cloneDeep(this.styles[t][e])).browserStyle)[b],l=Object.keys(a),m=this.uP(a,i),h=0;h<l.length;h++){if(d=l[h],!o)return null;if("1"===(y=t.toString()[0])){if(!m)return null;this.NI(d,a[d],o,t,e)}else"2"===y?(this.Sk(d,a[d],o),!m&&o&&o[1]&&(o[1]=null)):"4"===y?this.LI(d,a[d],o):this.Ck(d,a[d],o)}}return o},Ala.prototype.mn=function(t,e){return void 0===this.styles[t]?null:(e=this.styles[t][e])?(e=e.levelStyleMapping||{},e=Object.keys(e),[parseInt(e[0],10),parseInt(e[e.length-1],10)]):[]},Ala.prototype.Lw=function(t,e){return void 0!==this.styles[t]&&(e=this.styles[t][e])?e.z:null},Ala.prototype.mW=function(t,e,r){return 2===Math.floor(t/1e4)&&(e=this.xk(t,e,r))&&e[0]?(r=["butt","butt"],-1<(e=e[0]).roadStyle.indexOf("roundcap")?r[0]="round":-1<e.roadStyle.indexOf("squarecap")&&(r[0]="square"),-1<e.borderStyle.indexOf("roundcap")?r[1]="round":-1<e.borderStyle.indexOf("squarecap")&&(r[1]="square"),r):defaultCap},Ala.prototype.destroy=function(){this.styles&&(this.styles={})},Ala.prototype.uP=function(t,e){var r=!0;return t.styles&&t.styles.showLabel?(e=this._k(t.styles.showLabel.nodesObj,e),void 0!==(e=t.styles.showLabel.nodesObj[e])&&!1===e&&(r=!1)):void 0!==t.showLabel&&!1===t.showLabel&&(r=!1),r},Ala.prototype.SI=function(t,e,r){return r=this.TY?Math.floor(r):Math.floor(r*(16.8<=r?100:10)),this.EI!==r&&(this.EI=r,this.CI.clear()),this.CI.has((t<<16)+e)},Ala.prototype.jk=function(t,e,r){return!!(this.Ve&&this.Ve[t]&&(this.Ve[t][e]||this.Ve[t].all)&&this.styles&&this.styles[t]&&this.styles[t][e])},Ala.prototype.Fk=function(t,e,r){var n=Util.Hex2Rgba(e[t[0]]),e=Util.Hex2Rgba(e[t[1]]),t=(r-t[0])/(t[1]-t[0]);return[Math.floor(n[0]+t*(e[0]-n[0])),Math.floor(n[1]+t*(e[1]-n[1])),Math.floor(n[2]+t*(e[2]-n[2])),Math.floor(n[3]+t*(e[3]-n[3]))]},Ala.prototype.UV=function(t){for(var e={},r=0;r<t.length;r++){t[r];var n=t[r].zoom,i=t[r].value;e[n]=i}return e},Ala.prototype.Tk=function(t,e){var r=[];if(t[e])return r.push(e),r;for(var n=!0,i=Math.floor(e);n&&0<i;){if(t[i]){r.push(i),n=!1;break}i--}for(i=Math.ceil(e),n=!0;n&&i<25;){if(t[i]){r.push(i),n=!1;break}i++}return r},Ala.prototype._k=function(t,e){if(!t)return null;if(!isUndefined$1(t[e]))return e;for(var r=!0,n=e;r&&0<n;)if(t[--n]||!1===t[n]||""===t[n]){r=!1;break}if(!r)return n;for(n=e;r&&n<25;)if(t[++n]||!1===t[n]||""===t[n]){r=!1;break}return r?null:n},Ala.prototype.Ck=function(t,e,r){var n=null;switch(t){case"color":case"fillColor":n=e,Array.isArray(e)||(n=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor=new Color(n)),r.faceColor.rgba=n;break;case"fontSize":r.fontSize=e;break;case"texture":r.texture=e?AMap.getConfig().protocol+"://"+e:"";break;case"backgroundColor":if(n=Util.Hex2Rgba(e),!r.holoColor)return;r.holoColor.rgba=n;break;case"strokeColor":n=Util.Hex2Rgba(e),r.borderColor||(r.borderColor=new Color(n)),r.borderColor.rgba=n;break;case"showIcon":!1===e&&r.iconID&&(r.iconID="0")}},Ala.prototype.LI=function(t,e,r){var n=null;switch(t){case"textFillColor":n=e,Array.isArray(e)||(n=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor=new Color(n)),r.faceColor.rgba=n;break;case"fontSize":r.fontSize=e;break;case"backgroundColor":if(n=Util.Hex2Rgba(e),!r.holoColor)return;r.holoColor.rgba=n;break;case"textStrokeColor":n=Util.Hex2Rgba(e),r.borderColor||(r.borderColor=new Color(n)),r.borderColor.rgba=n;break;case"showIcon":!1===e&&r.iconID&&(r.iconID="0");break;case"showLabel":r.showText=e?1:0}},Ala.prototype.NI=function(t,e,r,n,i){var a=null;switch(t){case"showIcon":!1===e&&r.iconID&&(r.iconID="0");break;case"textFillColor":a=e,Array.isArray(e)||(a=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor=new Color(a)),r.faceColor.rgba=a;break;case"fontSize":r.fontSize=e;break;case"backgroundColor":if(a=Util.Hex2Rgba(e),!r.holoColor)return void(10002!==n||8!==i&&37!==i||(r.holoColor=new Color(a)));r.holoColor.rgba=a;break;case"textStrokeColor":a=Util.Hex2Rgba(e),r.borderColor||(r.borderColor=new Color(a)),r.borderColor.rgba=a;break;case"sel-highlight":r["sel-highlight"]=!0===e;break;case"sel-textFillColor":a=Util.Hex2Rgba(e),r["sel-textFillColor"]=map(a,function(t){return t/255});break;case"sel-textStrokeColor":a=Util.Hex2Rgba(e),r["sel-textStrokeColor"]=map(a,function(t){return t/255});break;case"label-bg":r["label-bg"]=!0===e;break;case"label-bgColor":if(a=Util.Hex2Rgba(e),!r.holoColor)return void(10002!==n||8!==i&&37!==i||(r.holoColor=new Color(a)));r.holoColor.rgba=a;break;case"showLabel":r.showText=e?1:0}},Ala.prototype.Sk=function(t,e,r){var n,i=null;switch(t){case"color":case"fillColor":i=Util.Hex2Rgba(e),r[0]&&(r[0].roadColor||(r[0].roadColor=new Color(i)),r[0].roadColor.rgba=i);break;case"fillOpacity":r[0]&&r[0].roadColor&&r[0].roadColor.rgba&&(n=r[0].roadColor.rgba,i=Util.Opacity2Rgba(e,n),r[0].roadColor.rgba=i);break;case"fillWidth":r[0]&&(r[0].roadWidth=e);break;case"strokeColor":i=Util.Hex2Rgba(e),r[0]&&(r[0].borderColor||(r[0].borderColor=new Color(i)),r[0].borderColor.rgba=i);break;case"strokeWidth":r[0]&&(r[0].borderWidth=e);break;case"textFillColor":r[1]&&(i=Util.Hex2Rgba(e),r[1].faceColor||(r[1].faceColor=new Color(i)),r[1].faceColor.rgba=i);break;case"textStrokeColor":r[1]&&(i=Util.Hex2Rgba(e),r[1].borderColor||(r[1].borderColor=new Color(i)),r[1].borderColor.rgba=i);break;case"fontSize":r[1]&&(r[1].fontSize=e);break;case"showLabel":r.showText=e?1:0}},Ala.Xe=function(t){var e=t.split("&");return(t={}).iconID=e[0],t.fontSize=parseInt(e[1],10),t.faceColor=Ala.Je(e[2]),t.borderColor=Ala.Je(e[3]),t.holoColor=Ala.Je(e[4]),t.showMode=parseInt(e[6],10),t.showText=2===t.showMode?0:1,t.forceShow=parseInt(e[7],10),t.clickEnable=parseInt(e[8],10),t.xOffset=parseInt(e[9],10),t.yOffset=parseInt(e[10],10),t.iconFile=e[5],t},Ala.rn=function(t){var e=t.split("|"),r=e[0].split("&"),t={};e[0]?(t.roadWidth=parseInt(r[0],10),t.roadColor=Ala.Je(r[1]),t.roadStyle=r[2]||"",t.borderWidth=parseInt(r[3],10),t.borderColor=Ala.Je(r[4]),t.borderStyle=r[5]||"",t.z=parseInt(r[6],10),t.roadStyle&&t.roadStyle.indexOf&&(0===t.roadStyle.indexOf("dash")?(t.roadDash=t.roadStyle.substring(4).slice(1,-1).split(","),t.roadDash=map(t.roadDash,function(t){return parseInt(t,10)}),2===t.roadDash.length&&(r=t.roadDash).push.apply(r,t.roadDash)):0<t.roadStyle.indexOf("railway")||t.roadStyle.indexOf("dash_crewel")),t.borderStyle&&t.borderStyle.indexOf&&(0===t.borderStyle.indexOf("dash")?(t.borderDash=t.borderStyle.substring(4).slice(1,-1).split(","),t.borderDash=map(t.borderDash,function(t){return parseInt(t,10)}),2===t.borderDash.length&&(n=t.borderDash).push.apply(n,t.borderDash)):0<t.borderStyle.indexOf("railway")||t.borderStyle.indexOf("dash_crewel"))):(t.roadWidth=0,t.roadColor=Ala.Je("00000000"),t.roadStyle="",t.borderWidth=0,t.borderColor=Ala.Je("00000000"),t.borderStyle="",t.z=0);var n={};return e[1]&&(e=e[1].split("&"),n.iconID="",n.fontSize=parseInt(e[1],10),n.faceColor=Ala.Je(e[2]),n.borderColor=Ala.Je(e[3]),n.z=parseInt(e[4],10)),[t,n]},Ala.ln=function(t){var e=t.split("&");return(t={}).faceColor=Ala.Je(e[0]),t.borderWidth=parseInt(e[1],10),t.borderColor=Ala.Je(e[2]),t.wallColor1=Ala.Je(e[3]),t.wallColor2=Ala.Je(e[4]),t.opacity=parseFloat(e[5]),t.z=parseInt(e[6],10),t},Ala.un=function(t){var e=t.split("&");return(t={}).iconID=e[0],t.fontSize=parseInt(e[1],10),t.faceColor=Ala.Je(e[2]),t.borderColor=Ala.Je(e[3]),t.holoColor=null,t.z=parseInt(e[5],10),t},Ala.cn=function(t){var e=t.split("&");return(t={}).faceColor=Ala.Je(e[0]),t.borderWidth=0,t.borderColor=null,t.z=parseInt(e[3],10),t},Ala);function Ala(t){this.TY=t,this.CI=new AdaptorMap,this.Ve=null,this.RV=null,this.bN=null}var NebulaSegements=(aqa.prototype.add=function(t,e,r,n,i,a,o,s){this.WM.eT(t,e,i,n)&&a===this.WM.bz&&o+""==this.WM.roofColor+""&&s+""==this.WM.wallColor+""||(this.GM=t,this.HM=e,this.VM+=this.WM?this.WM.length:0,this.WM=new LineSegement(t,e,this.VM,n,i,a,o,s),this.jc.push(this.WM)),this.WM.add(r)},aqa.prototype.reset=function(){this.WM=new LineSegement(-1,-1,-1,-1,-1)},aqa);function aqa(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0,this.WM=new LineSegement(-1,-1,-1,-1,-1)}var LineSegement=(jqa.prototype.add=function(t){this.length+=t},jqa.prototype.eT=function(t,e,r,n){return this.mainkey===t&&this.subkey===e&&this.maxzoom===r&&this.minzoom===n},jqa);function jqa(t,e,r,n,i,a,o,s){this.mainkey=t,this.subkey=e,this.offset=r,this.minzoom=n,this.maxzoom=i,this.bz=a,this.roofColor=o,this.wallColor=s,this.length=0}var PolygonSegements=(xqa.prototype.add=function(t){this.jc.push({length:t,offset:this.VM}),this.VM+=t},xqa.prototype.reset=function(){this.jc=[],this.VM=0},xqa.prototype.destroy=function(){this.jc&&0<this.jc.length&&(this.jc=[])},xqa);function xqa(){this.jc=[],this.VM=0}var VectorTileFeature=function(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this.fA=t,this.hA=-1,this.cA=n,this.vA=i,t.nw(readFeature,this,e)};function readFeature(t,e,r){1===t?e.id=r.ow():2===t?readTag(r,e):3===t?e.type=r.ow():4===t&&(e.hA=r.pos)}function readTag(t,e){for(var r=t.ow()+t.pos;t.pos<r;){var n=e.cA[t.ow()],i=e.vA[t.ow()];e.properties[n]=i}}function classifyRings(t){var e=t.length;if(e<=1)return[t];for(var r,n=[],i=[],a=0;a<e;a++){var o=signedArea$1(t[a]);0!==o&&((r=void 0===r?o<0:r)===o<0?(i&&n.push(i),i=[t[a]]):i.push(t[a]))}return i&&n.push(i),n}function signedArea$1(t){for(var e,r,n=0,i=0,a=t.length,o=a-1;i<a;o=i++)e=t[i],n+=((r=t[o]).x-e.x)*(e.y+r.y);return n}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.Dw=function(){var t=this.fA;t.pos=this.hA;for(var e,r=t.ow()+t.pos,n=1,i=0,a=0,o=0,s=[],u=[];t.pos<r;)if(i<=0&&(n=7&(e=t.ow()),i=e>>3),i--,1===n||2===n)a+=t.lA(),o+=t.lA(),1===n&&(u&&0<u.length&&s.push(u),u=[]),u.push([a,o]);else{if(7!==n)throw new Error("unknown command "+n);u&&u.push([u[0][0],u[0][1]])}return u&&0<u.length&&s.push(u),this.lines=s},VectorTileFeature.prototype.Ro=function(){var t=this.fA;t.pos=this.hA;for(var e,r=t.ow()+t.pos,n=1,i=0,a=0,o=0,s=1/0,u=-1/0,c=1/0,f=-1/0;t.pos<r;)if(i<=0&&(n=7&(e=t.ow()),i=e>>3),i--,1===n||2===n)(a+=t.lA())<s&&(s=a),u<a&&(u=a),(o+=t.lA())<c&&(c=o),f<o&&(f=o);else if(7!==n)throw new Error("unknown command "+n);return[s,c,u,f]},VectorTileFeature.prototype.dA=function(t,e,r){var n,i=this.extent*Math.pow(2,r),a=this.extent*t,o=this.extent*e,s=this.Dw(),e=VectorTileFeature.types[this.type];function u(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+o)/i;t[e]=[360*(r.x+a)/i-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:for(var c=[],f=0;f<s.length;f++)c[f]=s[f][0];u(s=c);break;case 2:for(f=0;f<s.length;f++)u(s[f]);break;case 3:for(s=classifyRings(s),f=0;f<s.length;f++)for(n=0;n<s[f].length;n++)u(s[f][n])}return 1===s.length?s=s[0]:e="Multi"+e,e={type:"Feature",geometry:{type:e,coordinates:s},properties:this.properties},"id"in this&&(e.id=this.id),e};var VectorTileLayer=function(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this.fA=t,this.cA=[],this.vA=[],this.Cw=[],t.nw(readLayer,this,e),this.length=this.Cw.length};function readLayer(t,e,r){15===t?e.version=r.ow():1===t?e.name=r.aw():5===t?e.extent=r.ow():2===t?e.Cw.push(r.pos):3===t?e.cA.push(r.aw()):4===t&&e.vA.push(readValueMessage(r))}function readValueMessage(t){for(var e=null,r=t.ow()+t.pos;t.pos<r;)var n=t.ow()>>3,e=1==n?t.aw():2==n?t.pA():3==n?t.yA():4==n?t.mA():5==n?t.ow():6==n?t.lA():7==n?t.vw():null;return e}VectorTileLayer.prototype.Gw=function(t){if(t<0||t>=this.Cw.length)throw new Error("feature index out of bounds");return this.fA.pos=this.Cw[t],t=this.fA.ow()+this.fA.pos,new VectorTileFeature(this.fA,t,this.extent,this.cA,this.vA)};var VectorTile$1=function(t,e){this.type="vector",this.layers=t.nw(readTile,{},e)};function readTile(t,e,r){3!==t||(r=new VectorTileLayer(r,r.ow()+r.pos)).length&&(e[r.name]=r)}VectorTile$1.Wb=function(t){return t},VectorTile$1.Gb=function(t){return t},VectorTile$1.prototype.nG=function(t){this.type=t};var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,Pbf=(bsa.prototype.destroy=function(){this.gA=new Uint8Array(0)},bsa.prototype.nw=function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.ow(),i=n>>3,a=this.pos;this.type=7&n,t(i,e,this),this.pos===a&&this.wA(n)}return e},bsa.prototype.MA=function(t,e){return this.nw(t,e,this.ow()+this.pos)},bsa.prototype.jA=function(){var t=readUInt32(this.gA,this.pos);return this.pos+=4,t},bsa.prototype.AA=function(){var t=readInt32(this.gA,this.pos);return this.pos+=4,t},bsa.prototype.kA=function(){var t=readUInt32(this.gA,this.pos)+readUInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},bsa.prototype.OA=function(){var t=readUInt32(this.gA,this.pos)+readInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},bsa.prototype.pA=function(){var t=this.xA(this.gA,this.pos,!0,23,4);return this.pos+=4,t},bsa.prototype.yA=function(){var t=this.xA(this.gA,this.pos,!0,52,8);return this.pos+=8,t},bsa.prototype.ow=function(t){var e=this.gA,r=e[this.pos++],n=127&r;return r<128?n:(n|=(127&(r=e[this.pos++]))<<7,r<128?n:(n|=(127&(r=e[this.pos++]))<<14,r<128?n:(n|=(127&(r=e[this.pos++]))<<21,r<128?n:readVarintRemainder(n|=(15&e[this.pos])<<28,t,this))))},bsa.prototype.mA=function(){return this.ow(!0)},bsa.prototype.lA=function(){var t=this.ow();return t%2==1?(t+1)/-2:t/2},bsa.prototype.vw=function(){return Boolean(this.ow())},bsa.prototype.aw=function(){var t=this.ow()+this.pos,e=readUtf8(this.gA,this.pos,t);return this.pos=t,e},bsa.prototype.mw=function(){var t=this.ow()+this.pos,e=this.gA.subarray(this.pos,t);return this.pos=t,e},bsa.prototype.tw=function(t,e){var r=readPackedEnd(this);for(t=t||[];this.pos<r;)t.push(this.ow(e));return t},bsa.prototype.IA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.lA());return t},bsa.prototype.TA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.vw());return t},bsa.prototype.FA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.pA());return t},bsa.prototype._A=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.yA());return t},bsa.prototype.SA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.jA());return t},bsa.prototype.CA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.AA());return t},bsa.prototype.EA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.kA());return t},bsa.prototype.NA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.OA());return t},bsa.prototype.wA=function(t){(t&=7)===bsa.LA||(t===bsa.DA?this.pos=this.ow()+this.pos:t===bsa.RA?this.pos+=4:t===bsa.PA&&(this.pos+=8))},bsa.prototype.UA=function(t,e){this.BA(t<<3|e)},bsa.prototype.zA=function(t){for(var e,r=this.length||16;r<this.pos+t;)r*=2;r!==this.length&&((e=new Uint8Array(r)).set(this.gA),this.gA=e,this.length=r)},bsa.prototype.finish=function(){return this.length=this.pos,this.pos=0,this.gA.subarray(0,this.length)},bsa.prototype.qA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},bsa.prototype.WA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},bsa.prototype.GA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},bsa.prototype.HA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},bsa.prototype.BA=function(t){268435455<(t=+t||0)||t<0?writeBigVarint(t,this):(this.zA(4),this.gA[this.pos++]=127&t|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=t>>>7&127))))},bsa.prototype.VA=function(t){this.BA(t<0?2*-t-1:2*t)},bsa.prototype.$A=function(t){this.BA(Boolean(t))},bsa.prototype.YA=function(t){t=String(t),this.zA(4*t.length),this.pos++;var e=this.pos;this.pos=writeUtf8(this.gA,t,this.pos),128<=(t=this.pos-e)&&makeRoomForExtraLength(e,t,this),this.pos=e-1,this.BA(t),this.pos+=t},bsa.prototype.KA=function(t){this.zA(4),this.XA(this.gA,t,this.pos,!0,23,4),this.pos+=4},bsa.prototype.JA=function(t){this.zA(8),this.XA(this.gA,t,this.pos,!0,52,8),this.pos+=8},bsa.prototype.ZA=function(t){var e=t.length;this.BA(e),this.zA(e);for(var r=0;r<e;r++)this.gA[this.pos++]=t[r]},bsa.prototype.QA=function(t,e){this.pos++;var r=this.pos;t(e,this),128<=(e=this.pos-r)&&makeRoomForExtraLength(r,e,this),this.pos=r-1,this.BA(e),this.pos+=e},bsa.prototype.fw=function(t,e,r){this.UA(t,bsa.DA),this.QA(e,r)},bsa.prototype.tk=function(t,e){this.fw(t,writePackedVarint,e)},bsa.prototype.rk=function(t,e){this.fw(t,writePackedSVarint,e)},bsa.prototype.nk=function(t,e){this.fw(t,writePackedBoolean,e)},bsa.prototype.ik=function(t,e){this.fw(t,writePackedFloat,e)},bsa.prototype.ek=function(t,e){this.fw(t,writePackedDouble,e)},bsa.prototype.ak=function(t,e){this.fw(t,writePackedFixed32,e)},bsa.prototype.uk=function(t,e){this.fw(t,writePackedSFixed32,e)},bsa.prototype.sk=function(t,e){this.fw(t,writePackedFixed64,e)},bsa.prototype.fk=function(t,e){this.fw(t,writePackedSFixed64,e)},bsa.prototype.ww=function(t,e){this.UA(t,bsa.DA),this.ZA(e)},bsa.prototype.hk=function(t,e){this.UA(t,bsa.RA),this.qA(e)},bsa.prototype.ck=function(t,e){this.UA(t,bsa.RA),this.WA(e)},bsa.prototype.vk=function(t,e){this.UA(t,bsa.PA),this.GA(e)},bsa.prototype.lk=function(t,e){this.UA(t,bsa.PA),this.HA(e)},bsa.prototype.rw=function(t,e){this.UA(t,bsa.LA),this.BA(e)},bsa.prototype.dk=function(t,e){this.UA(t,bsa.LA),this.VA(e)},bsa.prototype.uw=function(t,e){this.UA(t,bsa.DA),this.YA(e)},bsa.prototype.bk=function(t,e){this.UA(t,bsa.RA),this.KA(e)},bsa.prototype.pk=function(t,e){this.UA(t,bsa.PA),this.JA(e)},bsa.prototype.hw=function(t,e){this.rw(t,Boolean(e))},bsa.prototype.xA=function(t,e,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?i-1:0,h=r?-1:1,r=t[e+l];for(l+=h,a=r&(1<<-f)-1,r>>=-f,f+=s;0<f;a=256*a+t[e+l],l+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=n;0<f;o=256*o+t[e+l],l+=h,f-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,n),a-=c}return(r?-1:1)*o*Math.pow(2,a-n)},bsa.prototype.XA=function(t,e,r,n,i,a){var o,s,u=8*a-i-1,c=(1<<u)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,d=n?1:-1,a=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-o))<1&&(o--,n*=2),2<=(e+=1<=o+f?l/n:l*Math.pow(2,1-f))*n&&(o++,n/=2),c<=o+f?(s=0,o=c):1<=o+f?(s=(e*n-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));8<=i;t[r+h]=255&s,h+=d,s/=256,i-=8);for(o=o<<i|s,u+=i;0<u;t[r+h]=255&o,h+=d,o/=256,u-=8);t[r+h-d]|=128*a},bsa.LA=0,bsa.PA=1,bsa.DA=2,bsa.RA=5,bsa);function bsa(t){this.gA=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.gA.length}function readVarintRemainder(t,e,r){var n=r.gA,i=n[r.pos++],a=(112&i)>>4;if(i<128)return toNum(t,a,e);if(a|=(127&(i=n[r.pos++]))<<3,i<128)return toNum(t,a,e);if(a|=(127&(i=n[r.pos++]))<<10,i<128)return toNum(t,a,e);if(a|=(127&(i=n[r.pos++]))<<17,i<128)return toNum(t,a,e);if(a|=(127&(i=n[r.pos++]))<<24,i<128)return toNum(t,a,e);if(a|=(1&(i=n[r.pos++]))<<31,i<128)return toNum(t,a,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(t){return t.type===Pbf.DA?t.ow()+t.pos:t.pos+1}function toNum(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function writeBigVarint(t,e){var r,n;if(0<=t?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:n=n+1|(r=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.zA(10),writeBigVarintLow(r,n,e),writeBigVarintHigh(n,e)}function writeBigVarintLow(t,e,r){r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,r.gA[r.pos]=127&(t>>>=7)}function writeBigVarintHigh(t,e){var r=(7&t)<<4;e.gA[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t)))))}function makeRoomForExtraLength(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.zA(n);for(var i=r.pos-1;t<=i;i--)r.gA[i+n]=r.gA[i]}function writePackedVarint(t,e){for(var r=0;r<t.length;r++)e.BA(t[r])}function writePackedSVarint(t,e){for(var r=0;r<t.length;r++)e.VA(t[r])}function writePackedFloat(t,e){for(var r=0;r<t.length;r++)e.KA(t[r])}function writePackedDouble(t,e){for(var r=0;r<t.length;r++)e.JA(t[r])}function writePackedBoolean(t,e){for(var r=0;r<t.length;r++)e.$A(t[r])}function writePackedFixed32(t,e){for(var r=0;r<t.length;r++)e.qA(t[r])}function writePackedSFixed32(t,e){for(var r=0;r<t.length;r++)e.WA(t[r])}function writePackedFixed64(t,e){for(var r=0;r<t.length;r++)e.GA(t[r])}function writePackedSFixed64(t,e){for(var r=0;r<t.length;r++)e.HA(t[r])}function readUInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function writeInt32(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function readInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function readUtf8(t,e,r){for(var n="",i=e;i<r;){var a=t[i],o=null,s=239<a?4:223<a?3:191<a?2:1;if(r<i+s)break;var u,c=void 0,f=void 0;1===s?a<128&&(o=a):2===s?128==(192&(c=t[i+1]))&&(o=(31&a)<<6|63&c)<=127&&(o=null):3===s?(c=t[i+1],f=t[i+2],128==(192&c)&&128==(192&f)&&((o=(15&a)<<12|(63&c)<<6|63&f)<=2047||55296<=o&&o<=57343)&&(o=null)):4===s&&(c=t[i+1],f=t[i+2],u=t[i+3],128==(192&c)&&128==(192&f)&&128==(192&u)&&((o=(15&a)<<18|(63&c)<<12|(63&f)<<6|63&u)<=65535||1114112<=o)&&(o=null)),null===o?(o=65533,s=1):65535<o&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),n+=String.fromCharCode(o),i+=s}return n}function writeUtf8(t,e,r){for(var n=0,i=void 0,a=void 0;n<e.length;n++){if(55295<(i=e.charCodeAt(n))&&i<57344){if(!a){56319<i||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):a=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,a=i;continue}i=a-55296<<10|i-56320|65536,a=null}else a&&(t[r++]=239,t[r++]=191,t[r++]=189,a=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}var StyleOptionsBuilding=function(){this.hideWithoutStyle=!1,this.areas=[]},VectorTileSegements=(ewa.prototype.add=function(t,e,r,n,i){VTLineSegement.getKey(t,e,i,n)!==(this.WM?this.WM.getKey():"-1")&&(this.VM+=this.WM?this.WM.length:0,this.WM=new VTLineSegement(t,e,this.VM,n,i),this.jc.push(this.WM)),this.WM.add(r)},ewa);function ewa(){this.jc=[],this.VM=0}var VTLineSegement=(mwa.getKey=function(t,e,r,n){return t+":"+e+":"+r+":"+n},mwa.prototype.add=function(t){this.length+=t},mwa.prototype.getKey=function(){return this.mainkey+":"+this.subkey+":"+this.maxzoom+":"+this.minzoom},mwa);function mwa(t,e,r,n,i){this.mainkey=t,this.subkey=e,this.offset=r,this.minzoom=n,this.maxzoom=i,this.length=0}var MapboxSegements=(xwa.prototype.add=function(t,e){MBLineSegement.getKey(t),this.WM&&this.WM.getKey(),this.GM=t,this.VM+=this.WM?this.WM.length:0,this.WM=new MBLineSegement(t,this.VM),this.jc.push(this.WM),this.WM.add(e)},xwa);function xwa(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0}var MBLineSegement=(Cwa.getKey=function(t){return""+t},Cwa.prototype.add=function(t){this.length+=t},Cwa.prototype.getKey=function(){return""+this.style},Cwa),ImageDataWraperType,Hwa;function Cwa(t,e){this.style=t,this.offset=e,this.length=0}Hwa=ImageDataWraperType=ImageDataWraperType||{},Hwa.base64="base64",Hwa.arraybuffer="arraybuffer",Hwa.bitmap="bitmap",Hwa.empty="empty";var ImageDataWraper=(Iwa.AV=function(t){return createImageBitmap(new Blob([new Uint8Array(t)]))},Iwa.Wb=function(t){var e={data:t.data,type:t.type,status:t.status,IV:t.IV,hash:t.hash};return t.transform(),e},Iwa.prototype.transform=function(){this.IV=!0,this.type===ImageDataWraperType.bitmap&&(this.data="")},Iwa.prototype.destroy=function(){"destroyed"!==this.status&&(this.type===ImageDataWraperType.arraybuffer&&URLObject.revokeObjectURL(this.data),this.data="",this.status="destroyed")},Iwa.prototype.IZ=function(t){var e;this.type===ImageDataWraperType.bitmap?t(this.data):((e=new Image).crossOrigin="",e.onload=function(){t(e)},e.src=this.data)},Iwa);function Iwa(t,e,r){this.hash=t,this.IV=!1,"string"!=typeof e?r&&r.imageBitmap?(this.type=ImageDataWraperType.bitmap,this.status="success",this.data=e):(r=new Blob([e],{type:"image/png"}),(r=URLObject.createObjectURL(r))?(this.data=r,this.type=ImageDataWraperType.arraybuffer,this.status="success"):(this.data="",this.type=ImageDataWraperType.arraybuffer,this.status="error")):(this.data=e,this.type=ImageDataWraperType.base64,this.status="success")}var EmptyImageDataWraper=new ImageDataWraper("","");EmptyImageDataWraper.type=ImageDataWraperType.empty;var CircleBucket=(Twa.prototype.wb=function(t,e){var r=this._b.length;return this._b.kb(t[0],t[1],e),this._b.length-r},Twa.prototype.upload=function(t){this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,SymbolArray.Rb))},Twa.prototype.destroy=function(){this.uploaded=!1,this.zs&&this.zs.context&&(this.zs.context.deleteBuffer(this.zs),delete this.zs)},Twa.prototype.reset=function(){this._b=new SymbolArray,this.uploaded=!1},Twa);function Twa(){this._b=new SymbolArray,this.uploaded=!1}var SimpleCircleBucket=(Zwa.prototype.wb=function(t){var e=this._b.length;return this._b.kb(t[0],t[1]),this._b.length-e},Zwa.prototype.upload=function(t){this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,SimpleSymbolArray.Rb))},Zwa.prototype.destroy=function(){this.uploaded=!1,this.zs&&this.zs.context&&(this.zs.context.deleteBuffer(this.zs),delete this.zs)},Zwa.prototype.reset=function(){this._b=new SimpleSymbolArray,this.uploaded=!1},Zwa);function Zwa(){this._b=new SimpleSymbolArray,this.uploaded=!1}var DistrictLayerStyle=function(){this["stroke-width"]="",this["coastline-stroke"]="",this["nation-stroke"]="",this["province-stroke"]="",this["city-stroke"]="",this["county-stroke"]="",this.fill=""},registry={};function register(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"yk",{value:t,writable:!1}),registry[t]={mk:e,gk:r.gk||[],wk:r.wk||[]}}function serialize(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(Browser.imageBitmap&&t instanceof ImageBitmap)return e&&e.indexOf(t)<0&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],i=0,a=t;i<a.length;i++){var o=a[i];n.push(serialize(o,e))}return n}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var s=(r=t.constructor).yk;if(!s)throw new Error("can't serialize object of unregistered class");var u,c=void 0;if(r.Wb)c=r.Wb(t,e);else{for(var f in c={},t)t.hasOwnProperty(f)&&(0<=registry[s].gk.indexOf(f)||(u=t[f],c[f]=0<=registry[s].wk.indexOf(f)?u:serialize(u,e)));t instanceof Error&&(c.message=t.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(c.$name=s),c}function deserialize(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof ImageData||Browser.imageBitmap&&t instanceof ImageBitmap)return t;if(Array.isArray(t))return map(t,deserialize);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var e=t.$name||"Object",r=registry[e].mk;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.Gb)return r.Gb(t);for(var n=Object.create(r.prototype),i=0,a=Object.keys(t);i<a.length;i++){var o,s=a[i];"$name"!==s&&(o=t[s],n[s]=0<=registry[e].wk.indexOf(s)?o:deserialize(o))}return n}register("Object",Object),register("LineArrayBuffer",LineArrayBuffer),register("TriangleIndexArray",TriangleIndexArray),register("TriangleIndexArrayUint",TriangleIndexArrayUint),register("PolylineBucket",PolylineBucket),register("LinesIndexArray",LinesIndexArray),register("LinesIndexArrayUint",LinesIndexArrayUint),register("FillArray",FillArray),register("PolygonBucket",PolygonBucket),register("CircleBucket",CircleBucket),register("SymbolArray",SymbolArray),register("FillExtrusionBucket",FillExtrusionBucket),register("FillExtrusionArray",FillExtrusionArray),register("SmartArrayBuffer",SmartArrayBuffer),register("Color",Color),register("Segements",NebulaSegements),register("VectorTileSegements",VectorTileSegements),register("VTLineSegement",VTLineSegement),register("LineSegement",LineSegement),register("PolygonSegements",PolygonSegements),register("VectorTile",VectorTile$1),register("VectorTileLayer",VectorTileLayer),register("VectorTileFeature",VectorTileFeature),register("Pbf",Pbf),register("StyleOptionsBuilding",StyleOptionsBuilding),register("DistrictStyleOptions",DistrictLayerStyle),register("MapboxSegements",MapboxSegements),register("MBLineSegement",MBLineSegement),register("ImageDataWraper",ImageDataWraper),register("TileCoord",TileCoord),register("Tile",Tile),register("StyleParser",StyleParser);var LabelTextStyle=(zxa.BV=function(t,e){var r=DangerousFontSize,i=void 0===(n=t.fontSize)?12:n,a=t.fillColor,o=t.strokeColor,u=void 0===(s=t.strokeWidth)?0:s,f=void 0===(c=t.backgroundColor)?0:c,n=t.borderColor,s=labelsUtil.Yj(Util.color2RgbaArray(s=void 0===a?[0,0,0,1]:a)),f=f?labelsUtil.Yj(Util.color2RgbaArray(f)):[0,0,0,0],o=labelsUtil.Yj(Util.color2RgbaArray(o),[.988,.988,.988,1]),n=labelsUtil.Yj(Util.color2RgbaArray(n),[.988,.988,.988,1]),c=(i=i||12)<10?.78125:205/256,t=0,a=0;return u&&(a=c*(1-(u=10<u*e?10:u)/10.1)),t=1.4142*(t=r<i||1<e?1.7:1.5)/i,c+=1.5/256*(e-1),(e=new Float32Array(28)).set(s,0),e.set(o,4),e[8]=t,e[9]=a,e[10]=c,e.set(f,11),e.set(n,15),e[19]=1,e.set(s,20),e.set(o,24),e},zxa.prototype.GV=function(t){switch(t){case"fillColor":return this.origin.slice(0,4);case"strokeColor":return this.origin.slice(4,8);case"backgroundColor":return this.origin.slice(11,15);case"borderColor":return this.origin.slice(15,19);case"u_gamma":return this.origin[8];case"u_borderBuffer":return this.origin[9];case"u_buffer":return this.origin[10];case"u_fontSizeFactor":return this.origin[19];case"u_highlightFillColor":return this.origin.slice(20,24);case"u_highlightStrokeColor":return this.origin.slice(24,28);default:return}},zxa.prototype.VV=function(t,e){switch(t){case"u_fontSizeFactor":this.origin[19]=e;break;case"fillColor":this.origin.set(e,0);break;case"strokeColor":this.origin.set(e,4);break;case"backgroundColor":this.origin.set(e,11);break;case"borderColor":this.origin.set(e,8);break;case"u_highlightFillColor":this.origin.set(e,20);break;case"u_highlightStrokeColor":this.origin.set(e,24)}},zxa);function zxa(t){this.origin=t}register("LabelTextStyle",LabelTextStyle);var angle$1=0,LabelBucket=(Wxa.prototype.rQ=function(t,e){var n=void 0===(r=e.from)?"inner":r,i=CONSTS.ud;labelsUtil.zj(this,t),this.iO=n;var r=this.Mf&&"SDFManagerBase"!==this.Mf.CLASS_NAME,a=this.DO;r&&(a.rp=new Float32Array(this.$j*i*6));var o=this.Gj,s=this.Hj,u=this.Vj;if(!s||!u)return null;var t=assign(this.options,e),n=this.RO(o),c=isUndefined(t.opacity)?1:t.opacity;if(r){for(var f,l=0,h=0,d=0,v=n;d<v.length;d++){for(var g=v[d],b=void 0,p=0,y=g;p<y.length&&!((b=s[y[p]])&&b.text&&b.text.style);p++);var m={vd:[]},w=this.ym().KO;b&&b.text&&b.text.style?(T=b.text.style||{},m.vd=new LabelTextStyle(LabelTextStyle.BV(T,void 0===w?1:w))):(m.vd=new LabelTextStyle(new Float32Array(28)),m.vd.VV("u_fontSizeFactor",1)),f=h,m.start=f;var w=isUndefined(w=(T=o[g[0]].opts||{}).opacity)?1:w,T=T.icon&&T.icon[0]&&T.icon[0].image;m.opacity=w,m.opacity*=c,a.pp.push(m),m.dp=[];for(var x=0,A=g;x<A.length;x++){var M=A[x],S=o[M].CO||[],P={height:o[M]&&o[M].opts.height||0,from:e.from},I=this.PO(M,u[M],s[M],a,P),$=this.zV(M,u[M],s[M],o[M],a,P,S),S=this.BO(M,u[M],s[M],o[M],a,S,P);m.dp.push({id:M,Rd:S,icon:I,bg:$,kd:P=6*(S+I+$)}),h+=P*i}m.end=h,m.pd=T,l+=T=h-f,a.bd.push(T)}a.up=l}return a.Fz=n,this.DO=a},Wxa.prototype.destroy=function(){},Wxa.prototype.ym=function(){return this.gs.aO()},Wxa.prototype.zO=function(t){if(!t)return[];var e=this.qO;return e[t]||(e=labelsUtil.Kj(parseInt(t,10)),this.qO[t]=e,this.qO[t])},Wxa.prototype.RO=function(t){var e,r,n,i,a,o,s,u={},c=this.Gj,f=this.iO;for(e in t)t.hasOwnProperty(e)&&(i=(r=c[e]).data||{},o=(s=r.opts||{}).zIndex,a=s.forceShow,v=i.rank,v=a?v-1e5:v,n=isUndefined(s.opacity)?1:s.opacity,s=void 0===(a=(i=this.Hj[e]||{}).text)?{}:a,a=i.icon,u[i=("labelsLayer"===f?o||v:o)||1]=u[i]||{},o=s&&s.style||"",s=void 0,"labelsLayer"===f?(s=o?labelGroup.nT(o)+n:s,s+=a&&a[0]&&a[0].image?a[0].image:""):s=r.data.extData.Lp?(r.data.extData.Lp<<16)+r.data.extData.Ap:o?labelGroup.nT(o)+n:"-1-"+n,u[i][s]||(u[i][s]=[]),u[i][s].push(e));for(var l=[],h=0,d=labelsUtil.rank(Object.keys(u));h<d.length;h++)for(var v,g=u[v=d[h]],b=0,p=Object.keys(g).sort();b<p.length;b++){var y=p[b];l.push(g[y])}return l},Wxa.prototype.WO=function(t,e){var r=Util.WorldAxesCenter;return[t-r.x,e-r.y]},Wxa.prototype.GO=function(t){return t},Wxa.prototype.HO=function(t,e,r,n,i){var a=i.VO,s=void 0===(o=i.type)?EnumLabelFragType.icon:o,u=i.zooms,c=i.height,l=void 0===(f=e.icon)?[]:f,h=CONSTS.ud,d=this.$O,v=0,g=0;(b=this.ac.getImage(r.image))&&(v=b.startX||0,g=b.startY||0);var p,y,m=a[0],w=a[1],T=u[0],x=u[1],A=exports.cY.icon,o=l.anchorOffset,i=r.size,e=r.clipSize,f=r.clipOrigin,b=i[0],a=i[1],u=e[0],l=e[1],i=f[0],e=f[1],o=(f=this.GO(o))[0]||0,f=f[1]||0;(r=r.offset)&&(y=r instanceof Array||void 0===r.x||void 0===r.y?(p=r[0],r[1]):(p=r.x,r.y)),void 0!==p&&(o+=p),void 0!==y&&(f+=y),n.set([o,f,i=v+i,e=g+e,m,w,A,s,T,x,c,angle$1,0,o+b,f,i+u,e,m,w,A,s,T,x,c,angle$1,0,o,a+f,i,e+l,m,w,A,s,T,x,c,angle$1,0,o+b,f,i+u,e,m,w,A,s,T,x,c,angle$1,0,o+b,a+f,i+u,e+l,m,w,A,s,T,x,c,angle$1,0,o,a+f,i,e+l,m,w,A,s,T,x,c,angle$1,0],d),this.$O+=6*h},Wxa.prototype.PO=function(t,e,r,n,i){if(!e||!r)return 0;var a=e.icon,s=void 0===(o=r.icon)?[]:o;if(!s.length||!s[0].image)return 0;for(var o=(r=(void 0===a?{}:a).origin)[0],a=r[1],u=(r[2],this.WO(o,a)),c=i.height,f=0,l=s;f<l.length;f++){var h=l[f];this.HO(t,e,h,n.rp,{VO:u,zooms:h.zooms,height:c}),delete h.clipOrigin,delete h.clipSize,delete h.size,delete h.image,delete h.type,delete h.anchor,delete h.retina}return s.length},Wxa.prototype.YO=function(t,e,r,n,i){var a=i.VO,s=void 0===(o=i.type)?EnumLabelFragType.bg:o,u=i.zooms,c=i.height,f=CONSTS.ud,l=CONSTS.Kp,h=this.$O,d=e.padding,v=a[0],o=a[1],i=u[0],e=u[1],a=d.w,u=d.h,l=d.offsetX-l.buffer,d=d.offsetY;if(n.set([l,d,0,0,v,o,0,s,i,e,c,angle$1,0,l+a,d,0,0,v,o,0,s,i,e,c,angle$1,0,l,u+d,0,0,v,o,0,s,i,e,c,angle$1,0,l+a,d,0,0,v,o,0,s,i,e,c,angle$1,0,l+a,u+d,0,0,v,o,0,s,i,e,c,angle$1,0,l,u+d,0,0,v,o,0,s,i,e,c,angle$1,0],h),this.$O+=6*f,h=this.$O,r=r.text.style.borderWidth){for(var g=[l,d,a,u,v,o,r,i,e,c,angle$1],b=0;b<4;b++)g[11]=b,this.sT(g,n,h),h+=6*f;this.$O=h}},Wxa.prototype.sT=function(t,e,r){var n=(t=void 0===t?{}:t)[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=t[9],d=t[10],v=t[11],t=EnumLabelFragType.tq,g=0,b=0,p=0,y=0,m=0,w=0,T=0,x=0;switch(v){case 0:y=b=i-c,m=g=n+0,T=p=n+a,x=w=i+0;break;case 1:p=(g=n+a)+c,y=b=i-c,T=(m=n+a)+c,x=w=i+o+c;break;case 2:m=g=n+0,T=p=n+a,x=w=(y=b=i+o)+c;break;case 3:g=n-c,y=b=i-c,m=(p=n)-c,T=n,x=w=i+o+c}e.set([g,b,0,0,s,u,0,t,f,l,h,d,0,p,y,0,0,s,u,0,t,f,l,h,d,0,m,w,0,0,s,u,0,t,f,l,h,d,0,p,y,0,0,s,u,0,t,f,l,h,d,0,m,w,0,0,s,u,0,t,f,l,h,d,0,T,x,0,0,s,u,0,t,f,l,h,d,0],r)},Wxa.prototype.UO=function(t,e,r,n,i){if(!e||!r)return 0;var a=CONSTS.Mp,o=CONSTS.Rp,s=e.text,u=(r.text||{}).zooms;if(!r.text||!s.origin)return 0;var c=s.origin,f=c[0],s=c[1],i=(c[2],i.height);return this.YO(t,e,r,n.rp,{VO:[f,s],zooms:void 0===u?[a,o]:u,height:i}),i=1,r.text.style.borderWidth&&(i+=4),i},Wxa.prototype.zV=function(t,e,r,n,i,a,o){if(!e||!r)return 0;var s=CONSTS.Mp,u=CONSTS.Rp,c=r,f=e.text.offset,d=void 0===(h=(l=c.text||{}).style)?{}:h,h=void 0===(h=(l.type,l.direction))?"left":h,s=void 0===(l=l.zooms)?[s,u]:l;if(!c.text||!c.text.style)return 0;if(o.length,u=!1===d.fold?100:6,l=this.Mf.lineBreak(c.text.txt,{fontSize:d.fontSize,CO:n.CO,type:n.data&&n.data.BG||"ch",fj:u,from:a.from}),o={direction:h,size:d.fontSize,yO:c.icon.length&&c.icon[0].image},c=(u=(n=e.text).origin)[0],e=u[1],u[2],!r.text||!n.origin)return 0;var u=[c,e],n=a.height,c=EnumLabelFragType.bg,v=CONSTS.ud,g=this.$O,e=u[0],a=u[1],u=s[0],s=s[1],b=i.rp,i=l.maxWidth+6,l=d.fontSize*l.width.length+8,o=this.XV(i,h,o.yO),o=f[0]+o[0]-1,f=f[1]-2;if(b.set([o,f,0,0,e,a,0,c,u,s,n,angle$1,0,o+i,f,0,0,e,a,0,c,u,s,n,angle$1,0,o,l+f,0,0,e,a,0,c,u,s,n,angle$1,0,o+i,f,0,0,e,a,0,c,u,s,n,angle$1,0,o+i,l+f,0,0,e,a,0,c,u,s,n,angle$1,0,o,l+f,0,0,e,a,0,c,u,s,n,angle$1,0],g),this.$O+=6*v,g=this.$O,r=r.text.style.borderWidth){for(var p=[o,f,i,l,e,a,r,u,s,n,angle$1],y=0;y<4;y++)p[11]=y,this.sT(p,b,g),g+=6*v;return this.$O=g,5}return 1},Wxa.prototype.CT=function(t,e){return this.Mf?this.Mf.measureText(t,e):this.NT?(this.NT.font=(e||12)+"px",this.NT.measureText(t.join("")).width):0},Wxa.prototype.XO=function(t,e){var r=CONSTS.JM,r=void 0===(n=(e=void 0===e?{}:e).direction)?r.LEFT:n,n=e.size,e=void 0!==(e=e.yO)&&e,n=this.CT(t=void 0===t?[]:t,void 0===n?DangerousFontSize:n);return this.XV(n,r,e)},Wxa.prototype.XV=function(t,e,r){void 0===r&&(r=!1);var n=0,i=0;switch(e){case(r=CONSTS.JM).LEFT:n=-t,i=0;break;case r.QM:i=n=0;break;case r.ZM:case r.tj:n=-t/2,i=0;break;case r.ij:case r.nj:n=-t/2,i=0;break;default:i=n=0}return[n,i]},Wxa.prototype.JO=function(t,e,r,n){var i,a,o,s,u,c,f,l,h,d,v,g=CONSTS.ud,b=this.$O,p=n.size,y=n.VO,m=n.type,w=void 0===m?EnumLabelFragType.text:m,T=(n.id,n.zooms),x=n.height,A=CONSTS.Kp,M=this.Mf.mz(e);M&&(i=M.index,a=M.pos,o=M.char,s=y[0],u=y[1],c=T[0],f=T[1],o||(console.log("!metric",e,String.fromCharCode(e)),o=this.Mf.mz(32).char),l=p/A.size,h=o[0],d=o[1],o[2],o[3],o[4],v=o[5],m=o[6],n=A.buffer,0<h&&0<d&&(y=+((M=r.x)+((h+=2*n)-n)*l),e=+((T=r.y)+((d+=2*n)+m)*l),A=p=0,v=(p+=a.startX)+v,A=(A+=a.startY)+m,t.set([n=M-n*l,m=+(T+m*l),v,A,s,u,i,w,c,f,x,angle$1,0,y,m,v+h,A,s,u,i,w,c,f,x,angle$1,0,n,e,v,A+d,s,u,i,w,c,f,x,angle$1,0,n,e,v,A+d,s,u,i,w,c,f,x,angle$1,0,y,m,v+h,A,s,u,i,w,c,f,x,angle$1,0,y,e,v+h,A+d,s,u,i,w,c,f,x,angle$1,0],b),this.$O+=6*g),r.x=r.x+(o[0]+CONSTS.ic)*l)},Wxa.prototype.BO=function(t,e,r,n,i,a,o){if(!(e&&r&&r.text&&r.text.txt))return 0;var s=CONSTS.Mp,u=CONSTS.Rp,c=r,l=(f=e.text).origin,h=f.offset,f=void 0===(e=(r=c.text||{}).style)?{}:e,e=void 0===(e=(r.type,r.direction))?"left":e,d=void 0===(r=r.zooms)?[s,u]:r,v=a,r=l[0],a=l[1];if(l[2],!c.text||!c.text.style)return 0;for(var g=v.length,b=g,l=!1===f.fold?100:6,p=((l=this.Mf.lineBreak(c.text.txt,{fontSize:f.fontSize,CO:(n=void 0===n?{}:n).CO,type:n.data&&n.data.BG||"ch",fj:l,from:o.from})).lines.length,l.oQ),y=f.fontSize,m={direction:e,size:y,yO:c.icon.length&&c.icon[0].image},w=[r,a],T={x:0,y:0},x=o.height,A=-1,M=0,S=0;S<g;S++){var P=v[S],I=this.eQ(p,M);M+=P.split("|").length;var $=this.nQ(v,p[I],p[I+1]),$=v.slice.apply(v,$),$=this.XO($,m),$=vector.add(h,$);if(0===I&&0===S&&(T.x=$[0],T.y=$[1]),I&&(T.y=$[1]+(y+3)*I,A!==I)){if("32"===P){b--;continue}T.x=$[0]}A=I,this.JO(i.rp,P,T,{size:y,VO:w,id:t,zooms:d,height:x})}return b},Wxa.prototype.nQ=function(t,e,r){for(var n=0,i=0,a=0,o=t.length,s=0;s<o;s++){for(var u=t[s].split("|").length,c=0;c<u;c++){var f=a+c;f===e&&(n=s),f===r&&(i=s)}a+=u}return[n,i=a<=r?o:i]},Wxa.prototype.eQ=function(t,e){for(var r=(t=void 0===t?[]:t).length,n=0;n<r-1;n++)if(e>=t[n]&&e<t[n+1])return n;return 0},Wxa);function Wxa(t){this.DO={rp:[],pp:[],bd:[],up:0},this.ZO=[],this.options={},this.Gj={},this.Hj={},this.Vj={},this.QO={},this.tI={},this.Fs={},this.$j=0,this.qO={},this.$O=0,this.rI={},this.iO="inner",this._id=Util.stamp(this),this.Mf=t.R_,this.ac=t.z_,this.io=t.canvas,this.NT=t.Nz}var DefaultLabelsLayerOpts={opacity:1,collision:!0,animation:!0},Labels=(bFa.prototype.Ns=function(t,e){var r=(e=void 0===e?{}:e).zoom,n=e.center,i=e.from;return this.nI=t,this.iI=!0,this.iO=i,this.eI.zoom=r||20,this.oI(),this.hu=n,this.uI(e)},bFa.prototype.aO=function(){return this.eI},bFa.prototype.zL=function(t){return this.Wj[t]},bFa.prototype.uI=function(t){var e=this.iO,e={center:this.hu,from:e};if(assign(e,t=void 0===t?{}:t),this.sI.nO(this,e),this.$j=this.sI.$j,t=this.fI.rQ(this,e)){var r={},n={},e=t.Fz||{};delete t.Fz;var i,a,o,s,u,c,f,l=this.Gj;if("inner"!==this.iO)return{Nf:l,style:this.Hj,coords:this.Vj,rp:t,zp:this.zp,Fz:e};for(i in l)l.hasOwnProperty(i)&&(a=l[i],o=this.Vj[i],s=(f=a.data).extData,u=f.position,c=f.name,f=f.rank,r[i]={data:{position:u,name:c,rank:f,extData:{type:s.type,id:s.id,Lp:s.Lp,Ap:s.Ap,bz:s.bz}}},n[i]={origin:o.origin,icon:{anchorOffset:o.icon.anchorOffset,size:o.icon.size},padding:o.padding},a.opts&&(r[i].opts={zooms:a.opts.zooms}));return{Nf:r,style:this.Hj,coords:n,rp:t,zp:this.zp,Fz:e}}},bFa.prototype.oI=function(){for(var t=this.nI,e=this.Gj||{},r=this.Wj,n=this.zp,i=CONSTS.Mp,a=CONSTS.Rp,o=CONSTS.Pp,s=CONSTS.jp,u=0,c=t;u<c.length;u++){var f=c[u],l=f.data.id,h=f.opts&&f.opts.zooms||[],d=void 0===(d=h[0])?i:d,v=void 0===(h=h[1])?a:h,g=isUndefined(r[l])?Util.stamp(this):r[l];l&&(r[l]=g);for(var b=Math.ceil(d-o);b<=v+s;)n[b]||(n[b]=[]),n[b].push(g),b++;e[g]=f,e[g].CO=this.Ws(f),this.hI(f)}if("undefined"!=typeof Uint32Array)for(var p in n)n.hasOwnProperty(p)&&(n[p]=new Uint32Array(n[p]));this.Gj=e},bFa.prototype.hI=function(t){var e=this.Fs;(t=(t=t.opts.icon)&&t.image||"")&&(e[t]=1)},bFa.prototype.Ws=function(t){this.Es;var e=t.data.txt||"",t=(t.opts&&t.opts.text||{}).$G||[],t=labelsUtil.EQ(e,t);return labelsUtil.aQ(t)},bFa);function bFa(t){if(this.CLASS_NAME="AMap.LabelsLayer",this.Gj={},this.Hj={},this.Vj={},this.Fs={},this.Es={},this.Wj={},this.$j=0,this.zp={},this.render=null,this.eI={},this.nI=[],this.cI=!1,this.iI=!1,this.iO="",this.cI=!1,this._opts=assign({},DefaultLabelsLayerOpts,{opacity:t.opacity}),this.Mf=t.R_,this.ac=t.z_,this.PN=t.info||{},!this.Mf||"SDFManagerBase"===this.Mf.CLASS_NAME)try{var e=this.io=document.createElement("canvas"),r=void 0;e&&(r=this.NT=e.getContext("2d")),t.canvas=e,t.Nz=r}catch(t){console.log("canvas 初始化失败")}this.sI=new LabelPlacement(t),this.fI=new LabelBucket(t)}var DynamicVerticeStyle=function(){},DynamicVertice=(lGa.Wb=function(t,e){var r={zo:t.zo,coords:t.coords,Nf:t.Nf,style:t.style};return{JSON:JSON.stringify(r),kV:{rp:serialize(t.rp,e),zp:serialize(t.zp,e)}}},lGa.Gb=function(t){var e=JSON.parse(t.JSON);return t.kV.rp.pp=deserialize(t.kV.rp.pp),e.rp=t.kV.rp,e.zp=t.kV.zp,new lGa(e.zo,e)},lGa.prototype.upload=function(t){this.buffer||(this.buffer=t.fe(this.rp.rp,CONSTS.sp))},lGa.prototype.destroy=function(){this.buffer&&(this.buffer.context.deleteBuffer(this.buffer),delete this.buffer)},lGa);function lGa(t,e){this.zo=t,this.Nf=e.Nf,this.style=e.style,Object.setPrototypeOf(this.style,new DynamicVerticeStyle),this.coords=e.coords,this.rp=e.rp,this.zp=e.zp}function feature(t,e,r){var n={type:"Feature"};return 0!==(r=void 0===r?{}:r).id&&!r.id||(n.id=r.id),r.Ro&&(n.Ro=r.Ro),n.properties=e||{},n.geometry=t,n}function polygon(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:t},e,r)}function lineString(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:t},e,r)}function multiLineString(t,e,r){return feature({type:"MultiLineString",coordinates:t},e,r=void 0===r?{}:r)}function multiPolygon(t,e,r){return feature({type:"MultiPolygon",coordinates:t},e,r=void 0===r?{}:r)}function getGeom(t){return"Feature"===t.type?t.geometry:t}function lineclip(t,e,r){var n,i,a,o,s,u=t.length,c=bitCode(t[0],e),f=[];for(r=r||[],n=1;n<u;n++){for(o=t[n-1],i=a=bitCode(s=t[n],e);;){if(!(c|i)){f.push(o),i!==a?(f.push(s),n<u-1&&(r.push(f),f=[])):n===u-1&&f.push(s);break}if(c&i)break;c?c=bitCode(o=intersect(o,s,c,e),e):i=bitCode(s=intersect(o,s,i,e),e)}c=a}return f.length&&r.push(f),r}function polygonclip(t,e){for(var r,n,i,a,o,s,u=1;u<=8;u*=2){for(r=[],i=!(bitCode(n=t[t.length-1],e)&u),a=0;a<t.length;a++)(s=!(bitCode(o=t[a],e)&u))!==i&&r.push(intersect(n,o,u,e)),s&&r.push(o),n=o,i=s;if(!(t=r).length)break}return r}function intersect(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function bitCode(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function bboxClip(t,e){var r=getGeom(t),n=r.type,i="Feature"===t.type?t.properties:{},a=r.coordinates;switch(n){case"LineString":case"MultiLineString":var o=[];return(a="LineString"===n?[a]:a).forEach(function(t){lineclip(t,e,o)}),1===o.length?lineString(o[0],i):multiLineString(o,i);case"Polygon":return polygon(clipPolygon(a,e),i);case"MultiPolygon":return multiPolygon(a.map(function(t){return clipPolygon(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}}function clipPolygon(t,e){for(var r=[],n=0,i=t;n<i.length;n++){var a=polygonclip(i[n],e);0<a.length&&(a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]||a.push(a[0]),4<=a.length&&r.push(a))}return r}register("DynamicVertice",DynamicVertice);var DEF_NDS_MAX_COORD=2147483648,DEF_DEGREE_MAX_COORD=180,MKT=20037508.342789244;function tileInnerCoord2LngLat(t,e,r,n){var a=r+(i=getTileSWCoord(t,e))[0],i=n+i[1];return r=a<<(e=getCoordShift(t.z,e)),n=i<<e,[coord2Degree(r=0<a&&r<0?DEF_NDS_MAX_COORD-1:r),coord2Degree(n)]}function LngLat2TileInnerCoord(t,e,r,n,i){var a=degree2Coord(r),o=degree2Coord(n),n=a>>(r=getCoordShift(i.z,e)),r=o>>r;return[n-(e=getTileSWCoord(i,e))[0],r-e[1]]}var cache={};function lnglat2WGSCoord2(t){if(cache[t])return cache[t];var e=33-t,r=degree2Coord(180)/(1<<e),e=degree2Coord(90)/(1<<e),n=0<r?Math.floor(.5+r):Math.floor(r-.5),i=0<e?Math.floor(.5+e):Math.floor(e-.5);return cache[t]=[2*n,2*i],cache[t]}function getWorldSize(t,e){return lnglat2WGSCoord2(t+e)}function getTileSWCoord(t,e){var n=(r=getWorldSize(t.z,e))[0],e=r[1],r=1<<t.z;return[-n/2+t.x*n/r,e/2-(t.y+1)*e/r]}function degree2Coord(t){return Math.floor(t*DEF_NDS_MAX_COORD/DEF_DEGREE_MAX_COORD+.5)}function coord2Degree(t){return t*DEF_DEGREE_MAX_COORD/DEF_NDS_MAX_COORD}function getCoordShift(t,e){return 33-e-t}function getMVTTileBbox(t,e,r,n,i){return[t*(i=void 0===i?256:i)*n-MKT,-((e+1)*i*n-MKT),(t+1)*i*n-MKT,-(e*i*n-MKT)]}var MapboxVTSourceWorker=(GIa.prototype.bw=function(t,e,r,n,i,a){var o=this,s={point:{},line:{},polygon:{},polyhedron:{},label:{}},u=new XMLHttpRequest;return u.onreadystatechange=function(){var t;4!==u.readyState||200!==u.status&&204!==u.status||(s.point=o.AX(i.point),s.line=o.AX(i.line),s.polygon=o.AX(i.polygon),s.polyhedron=o.AX(i.polyhedron),s.label=o.AX(i.label),t=new VectorTile$1(new Pbf(new Uint8Array(u.response))),t=o.Ow(t,{x:e.x,y:e.y,z:e.z,projectionId:r,tileSize:n},s),a(null,exports.Ln({zo:e},t)))},u.responseType="arraybuffer",u.open("GET",t,!0),u.send(),{cancel:function(){u.abort()}}},GIa.prototype.mX=function(t,e,r){var n={point:{},line:{},polygon:{},polyhedron:{},label:{}};n.point=this.AX(e.point),n.line=this.AX(e.line),n.polygon=this.AX(e.polygon),n.polyhedron=this.AX(e.polyhedron),n.label=this.AX(e.label),this.xw(t,n,!0),this.zw(t,n,!0),this.nz(t,n,!0),this.SX(t,n,!0),this.u2(t,n,!0),r&&r(null,t)},GIa.prototype.Ow=function(l,t,e){var r=t.x,n=t.y,i=t.z,a=t.tileSize,o=t.projectionId;l.z=i,l.x=r,l.y=n;var h=ProjectionManager.getProjection(o),t=h.getResolution(i);l.projectionId=o,l.Ro=getMVTTileBbox(r,n,i,t,a),l.zS=lcs.getLocalByCoord([l.Ro[0],l.Ro[1]]),l.visible={point:{},line:{},polygon:{},label:{},polyhedron:{}};var s=ProjectionManager.getProjection(o).getResolution(i);return forIn(l.layers,function(f){var t=f.Cw;f.Ah=[],f.scale=s*a/f.extent;var e=transform[o].Xs(a*r,a*n,i);f.ox=e[0],f.oy=e[1],forEach(t,function(t,e){if((t=f.Gw(e)).Dw(),f.Ah.push(t),t.lines&&0<t.lines.length){t.Rw=[],t.c2=[];for(var r=0,n=t.lines.length;r<n;r++){for(var i=[],a=[],o=0,s=t.lines[r].length;o<s;o++){var u=[f.ox+f.scale*t.lines[r][o][0],f.oy-f.scale*t.lines[r][o][1]],c=[u[0]-l.zS.center[0],u[1]-l.zS.center[1]];a.push(h.unproject(u[0],u[1])),i.push(c)}t.Rw.push(i),t.c2.push(a)}}})}),this.uW(l),this.xw(l,e),this.zw(l,e),this.nz(l,e),this.SX(l,e),this.u2(l,e),l},GIa.prototype.uW=function(t){for(var e in t.polygons={},t.polygonOut={},t.polyhedrons={},t.polylines={},t.points={},t.layers)if(t.layers.hasOwnProperty(e)){for(var r=t.layers[e],n=[],i=[],a=[],o=[],s=[],u=0;u<r.Ah.length;u+=1){var c=r.Ah[u];if(3==+c.type&&c.Rw){for(var f=c.Rw,l=c.c2,h=[],d=this.f2(c),v=d.l2,g=d.height,b=0;b<f.length;b++)PlaneGeometryUtilInstance.isClockwise(f[b])?h.push([b]):h.length&&h[h.length-1].push(b);for(var p=0;p<h.length;p++){var y=h[p];if(1<y.length)if(v){for(var m=[],w=[],T=0;T<y.length;T++){var x=l[y[T]];if(P=this.d2(t,x)){0<T&&m.push(w.length/2);for(var A=[],M=0;M<P.length;M++){var S=P[M];A.unshift(S[0],S[1])}w.push.apply(w,A)}}a.push({_id_:Util.getGuid("amap_"),properties:c.properties,path:w,LQ:m,height:g})}else{for(m=[],w=[],T=0;T<y.length;T++){var P=f[y[T]];for(0<T&&m.push(w.length/2),M=0;M<P.length;M++){var I=P[M];w.push(I[0],I[1])}i.push({properties:c.properties,path:P,_id_:Util.getGuid("amap_")})}n.push({properties:c.properties,path:w,LQ:m})}else if(v){if(w=[],x=l[y[0]],P=this.d2(t,x)){for(M=0;M<P.length;M++){var $=P[M];w.unshift($[0],$[1])}a.push({_id_:Util.getGuid("amap_"),properties:c.properties,path:w,height:g})}}else{for(w=[],P=f[y[0]],M=0;M<P.length;M++){var C=P[M];w.push(C[0],C[1])}n.push({properties:c.properties,path:w}),i.push({properties:c.properties,path:P,_id_:Util.getGuid("amap_")})}}}else if(2==+c.type&&c.Rw)for(var k=0,N=c.Rw.length;k<N;k++)o.push({properties:c.properties,path:c.Rw[k],_id_:Util.getGuid("amap_")});else if(1==+c.type&&c.Rw)for(l=c.c2,p=0;p<c.Rw.length;p++)s.push({_id_:Util.getGuid("amap_"),properties:c.properties,path:c.Rw[p],lnglat:__spreadArrays(l[0][0])});delete c.c2}t.polygons[e]=n,t.polygonOut[e]=i,t.polyhedrons[e]=a,t.polylines[e]=o,t.points[e]=s}delete t.layers},GIa.prototype.xw=function(t,e,r){if(void 0===r&&(r=!1),!t||!t.$c||r){var n=new VectorTileSegements;t.Uc=n,r||(t.$c=new PolylineBucket);var i=e.line.sourceLayer,a=t.polylines;if(a)for(var o in t.visible.line[i]=[],a)if(!i||i===o)for(var u=a[o],c=0,f=u.length;c<f;c++){var l=u[c],h=this.Mn(e.line,l.properties),d=h.color,v=h.lineWidth,g=h.dash,b=+(h.visible||!h.filter);t.visible.line[i]||(t.visible.line[i]=[]),b&&t.visible.line[i].push(l._id_),d[3]*=b,r?n.add(d+":"+v+":"+g,0,l.v2,0,22):(b=(h=t.$c.g0(l.path,{X_:0,lineJoin:"round",lineCap:"butt"})).Iw,h=h.distance,0<b&&(l.v2=b,n.add(d+":"+v+":"+g,0,b,0,22),l.distance=h))}}},GIa.prototype.zw=function(t,e,r){if(void 0===r&&(r=!1),!t||!t.Dc||r){var n=new VectorTileSegements;t.Oc=n;var i=new VectorTileSegements;t.Fc=i,r||(t.Dc=new PolygonBucket,t.pX=new PolylineBucket);var a=e.polygon.sourceLayer,o=t.polygons;if(o){for(var s in o)if(!a||a===s)for(var u=0,c=(v=o[s]).length;u<c;u++){var f,l=v[u],h=+((g=this.Mn(e.polygon,l.properties)).visible||!g.filter);g.color[3]*=h,r?n.add(g.color+"",0,l.v2,0,22):0<(f=t.Dc.Nx(l.path,l.LQ))&&(l.v2=f,n.add(g.color+"",0,f,0,22))}var d=t.polygonOut;for(s in d)if(!a||a===s)for(var v,u=0,c=(v=d[s]).length;u<c;u++){var g,b,p,y=v[u],h=+((g=this.Mn(e.polygon,y.properties)).visible||!g.filter);t.visible.polygon[a]||(t.visible.polygon[a]=[]),h&&t.visible.polygon[a].push(y._id_),g.borderWidth*=h,r?i.add(g.borderColor+":"+g.dash+":"+g.borderWidth,0,y.v2,0,22):(b=(p=t.pX.g0(y.path,{X_:0,lineJoin:"round",lineCap:"butt"})).Iw,p=p.distance,0<b&&(y.v2=b,i.add(g.borderColor+":"+g.dash+":"+g.borderWidth,0,b,0,22),y.distance=p))}}}},GIa.prototype.nz=function(t,e,r){if(void 0===r&&(r=!1),!t||!t.A_||r){var n=new NebulaSegements;t.E0=n,r||(t.A_=new FillExtrusionBucket);var i=e.polyhedron.sourceLayer,a=t.polyhedrons;if(a)for(var o in t.visible.polyhedron[i]=[],a)if(!i||i===o)for(var u=a[o],c=0,f=u.length;c<f;c++){var l=u[c],h=l.properties,d=this.Mn(e.polyhedron,void 0===h?{}:h),h=+(d.visible||!d.filter);t.visible.polyhedron[i]||(t.visible.polyhedron[i]=[]),h?t.visible.polyhedron[i].push(l._id_):(d.topColor=void 0,d.sideColor=void 0,d.texture=""),r?n.add(l._id_,1e3,l.v2,0,22,d.texture,d.topColor,d.sideColor):0<(h=t.A_.tz(l.path,l.height,l.LQ))&&(l.v2=h,n.add(l._id_,1e3,h,0,22,d.texture,d.topColor,d.sideColor))}}},GIa.prototype.SX=function(t,e,r){if(void 0===r&&(r=!1),!t||!t.dX||r){var n=t.IX,n=new VectorTileSegements;t.IX=n,t.dX=new CircleBucket;var i=e.point.sourceLayer,a=t.points;if(a)for(var o in t.visible.point[i]=[],a)if(!i||i===o)for(var u=a[o],c=0,f=u.length;c<f;c++){var l=u[c],h=this.Mn(e.point,l.properties);t.visible.point[i]||(t.visible.point[i]=[]),t.visible.point[i].push(l._id_),0<(h=t.dX.wb(l.path[0],h))&&n.add("point",0,h,0,22)}}},GIa.prototype.u2=function(t,e,r){if(void 0===r&&(r=!1),!t||!t.labels||r){t.labels=[];var n=e.label.sourceLayer;t.visible.label[n]=[];var i=t.points[n];if(i)for(var a=0,o=i.length;a<o;a++){var s=i[a],c=(u=this.f2(s)).height,f=u.l2,u=this.Mn(e.label,s.properties);t.visible.label[n].push(s._id_),t.labels.push(exports.Ln(exports.Ln({},u),{position:f?__spreadArrays(s.lnglat,[c+1]):s.lnglat}))}}},GIa.prototype.Mn=function(t,e){var r,n={visible:!0,filter:!0};for(r in t){var i=t[r];n[r]="style"===r||"icon"===r||"text"===r?this.Mn(i,e):"function"==typeof i?i()(e,t.injection):i,-1<r.toLowerCase().indexOf("color")&&(n[r]=Util.color2RgbaArray(n[r])),"filter"===r&&(n.filter=this.$X(e,i))}return n},GIa.prototype.AX=function(t){var e,r={};for(e in t){var n=t[e];n.indexOf&&-1<n.indexOf("function")?(n=n.replace("function","return function"),r[e]=new Function(n)):r[e]="style"===e||"icon"===e||"text"===e?this.AX(n):n}return r},GIa.prototype.$X=function(t,e){if(!e)return!0;var r=e[0],n=e[1],i=e[2],a=t[r];switch(n){case"in":return-1<i.indexOf(a);case"out":return i.indexOf(a)<0}return!0},GIa.prototype.d2=function(t,e){var r=t.projectionId,n=t.zS,i=t.Ro,a=ProjectionManager.getProjection(r),o=i[0],t=i[1],r=i[2],i=i[3],i=__spreadArrays(a.unproject(o,t),a.unproject(r,i)),s=null===(i=bboxClip(polygon([e]),i).geometry)||void 0===i?void 0:i.coordinates[0];if(!s)return s;for(var u=[],c=0;c<s.length;c++){var f=s[c],f=a.project(f[0],f[1]);u.push([f[0]-n.center[0],f[1]-n.center[1]])}return u},GIa.prototype.f2=function(t){var e=(t="Y"===(e=t.properties||{})._AS_CUBE&&e._HEIGHT_PROP)?+e[e._HEIGHT_PROP]:0;return{l2:t,height:e=Number.isNaN(e)||e<0?0:e}},GIa);function GIa(){}var Ring={read:function(t,e){return t.nw(Ring.iw,{path:[]},e)},iw:function(t,e,r){0===t&&r.tw(e.path,!0)},write:function(t,e){if(t.path)for(var r=0;r<t.path.length;r++)e.rw(0,t.path[r])}},Building={read:function(t,e){return t.nw(Building.iw,{minzoom:0,maxzoom:0,path:[],height:0,ew:"",altitude:0},e)},iw:function(t,e,r){0===t?e.minzoom=r.ow():1===t?e.maxzoom=r.ow():2===t?e.path.push(Ring.read(r,r.ow()+r.pos)):3===t?e.height=r.ow():4===t?e.ew=r.aw():5===t&&(e.altitude=r.ow())},write:function(t,e){if(t.minzoom&&e.rw(0,t.minzoom),t.maxzoom&&e.rw(1,t.maxzoom),t.path)for(var r=0;r<t.path.length;r++)e.fw(2,Ring.write,t.path[r]);t.height&&e.rw(3,t.height),t.ew&&e.uw(4,t.ew),t.altitude&&e.rw(5,t.altitude)}},BuildingSameStyle={read:function(t,e){return t.nw(BuildingSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(t,e,r){0===t?e.mainkey=r.ow():1===t?e.subkey=r.ow():2===t?e.items.push(Building.read(r,r.ow()+r.pos)):3===t&&(e.resolution=r.ow())},write:function(t,e){if(t.mainkey&&e.rw(0,t.mainkey),t.subkey&&e.rw(1,t.subkey),t.items)for(var r=0;r<t.items.length;r++)e.fw(2,Building.write,t.items[r]);t.resolution&&e.rw(3,t.resolution)}},buildingLayer={read:function(t,e){return t.nw(buildingLayer.iw,{building:[]},e)},iw:function(t,e,r){0===t&&e.building.push(BuildingSameStyle.read(r,r.ow()+r.pos))},write:function(t,e){if(t.building)for(var r=0;r<t.building.length;r++)e.fw(0,BuildingSameStyle.write,t.building[r])}},Poi={read:function(t,e){return t.nw(Poi.IQ,{minzoom:0,maxzoom:0,pos:[],cw:"",ew:"",name:"",rank:0,BQ:"",name_en:"",QQ:"",CQ:"",$G:[],iQ:[],JQ:[]},e)},IQ:function(t,e,r){0===t?e.minzoom=r.ow():1===t?e.maxzoom=r.ow():2===t?r.tw(e.pos,!0):3===t?e.cw=r.aw():4===t?e.ew=r.aw():5===t?e.name=r.aw():6===t?e.rank=r.ow():7===t?e.BQ=r.aw():8===t?e.name_en=r.aw():9===t?e.QQ=r.aw():10===t?e.CQ=r.aw():11===t?r.tw(e.$G):12===t?r.tw(e.iQ):13===t&&r.tw(e.JQ)},write:function(t,e){if(t.minzoom&&e.rw(0,t.minzoom),t.maxzoom&&e.rw(1,t.maxzoom),t.pos)for(var r=0;r<t.pos.length;r++)e.rw(2,t.pos[r]);if(t.cw&&e.uw(3,t.cw),t.ew&&e.uw(4,t.ew),t.name&&e.uw(5,t.name),t.rank&&e.rw(6,t.rank),t.BQ&&e.uw(7,t.BQ),t.name_en&&e.uw(8,t.name_en),t.QQ&&e.uw(9,t.QQ),t.CQ&&e.uw(10,t.CQ),t.$G)for(r=0;r<t.$G.length;r++)e.rw(11,t.$G[r]);if(t.iQ)for(r=0;r<t.iQ.length;r++)e.rw(12,t.iQ[r]);if(t.JQ)for(r=0;r<t.JQ.length;r++)e.rw(13,t.JQ[r])}},PoiSameStyle={read:function(t,e){return t.nw(PoiSameStyle.IQ,{mainkey:0,subkey:0,items:[],resolution:0},e)},IQ:function(t,e,r){0===t?e.mainkey=r.ow():1===t?e.subkey=r.ow():2===t?e.items.push(Poi.read(r,r.ow()+r.pos)):3===t&&(e.resolution=r.ow())},write:function(t,e){if(t.mainkey&&e.rw(0,t.mainkey),t.subkey&&e.rw(1,t.subkey),t.items)for(var r=0;r<t.items.length;r++)e.fw(2,Poi.write,t.items[r]);t.resolution&&e.rw(3,t.resolution)}},PoiLayer={read:function(t,e){return t.nw(PoiLayer.IQ,{poilabel:[]},e)},IQ:function(t,e,r){0===t&&e.poilabel.push(PoiSameStyle.read(r,r.ow()+r.pos))},write:function(t,e){if(t.poilabel)for(var r=0;r<t.poilabel.length;r++)e.fw(0,PoiSameStyle.write,t.poilabel[r])}},Ring$1={read:function(t,e){return t.nw(Ring$1.iw,{path:[]},e)},iw:function(t,e,r){0===t&&r.tw(e.path,!0)},write:function(t,e){if(t.path)for(var r=0;r<t.path.length;r++)e.rw(0,t.path[r])}},Region={read:function(t,e){return t.nw(Region.iw,{minzoom:0,maxzoom:0,path:[],sw:""},e)},iw:function(t,e,r){0===t?e.minzoom=r.ow():1===t?e.maxzoom=r.ow():2===t?e.path.push(Ring$1.read(r,r.ow()+r.pos)):3===t&&(e.sw=r.aw())},write:function(t,e){if(t.minzoom&&e.rw(0,t.minzoom),t.maxzoom&&e.rw(1,t.maxzoom),t.path)for(var r=0;r<t.path.length;r++)e.fw(2,Ring$1.write,t.path[r]);t.sw&&e.uw(3,t.sw)}},RegionSameStyle={read:function(t,e){return t.nw(RegionSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(t,e,r){0===t?e.mainkey=r.ow():1===t?e.subkey=r.ow():2===t?e.items.push(Region.read(r,r.ow()+r.pos)):3===t&&(e.resolution=r.ow())},write:function(t,e){if(t.mainkey&&e.rw(0,t.mainkey),t.subkey&&e.rw(1,t.subkey),t.items)for(var r=0;r<t.items.length;r++)e.fw(2,Region.write,t.items[r]);t.resolution&&e.rw(3,t.resolution)}},regionLayer={read:function(t,e){return t.nw(regionLayer.iw,{region:[]},e)},iw:function(t,e,r){0===t&&e.region.push(RegionSameStyle.read(r,r.ow()+r.pos))},write:function(t,e){if(t.region)for(var r=0;r<t.region.length;r++)e.fw(0,RegionSameStyle.write,t.region[r])}},Road={read:function(t,e){return t.nw(Road.iw,{minzoom:0,maxzoom:0,path:[],shield:"",shieldType:0,name:"",rank:0,name_en:"",BQ:"",QQ:"",CQ:"",$G:[],iQ:[]},e)},iw:function(t,e,r){0===t?e.minzoom=r.ow():1===t?e.maxzoom=r.ow():2===t?r.tw(e.path,!0):3===t?e.shield=r.aw():4===t?e.shieldType=r.ow():5===t?e.name=r.aw():6===t?e.rank=r.ow():7===t?e.BQ=r.aw():8===t?e.name_en=r.aw():9===t?e.QQ=r.aw():10===t?e.CQ=r.aw():11===t?r.tw(e.$G):12===t&&(e.id=r.ow())},write:function(t,e){if(t.minzoom&&e.rw(0,t.minzoom),t.maxzoom&&e.rw(1,t.maxzoom),t.path)for(var r=0;r<t.path.length;r++)e.rw(2,t.path[r]);if(t.shield&&e.uw(3,t.shield),t.shieldType&&e.rw(4,t.shieldType),t.name&&e.uw(5,t.name),t.rank&&e.rw(6,t.rank),t.BQ&&e.uw(7,t.BQ),t.name_en&&e.uw(8,t.name_en),t.QQ&&e.uw(9,t.QQ),t.CQ&&e.uw(10,t.CQ),t.$G)for(r=0;r<t.$G.length;r++)e.rw(11,t.$G[r]);t.id&&e.rw(12,t.id)}},RoadSameStyle={read:function(t,e){return t.nw(RoadSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(t,e,r,n){0===t?e.mainkey=r.ow():1===t?e.subkey=r.ow():2===t?e.items.push(Road.read(r,r.ow()+r.pos)):3===t&&(e.resolution=r.ow())},write:function(t,e){if(t.mainkey&&e.rw(0,t.mainkey),t.subkey&&e.rw(1,t.subkey),t.items)for(var r=0;r<t.items.length;r++)e.fw(2,Road.write,t.items[r]);t.resolution&&e.rw(3,t.resolution)}},roadLayer={read:function(t,e){return t.nw(roadLayer.iw,{road:[]},e)},iw:function(t,e,r,n){0===t&&e.road.push(RoadSameStyle.read(r,r.ow()+r.pos))},write:function(t,e){if(t.road)for(var r=0;r<t.road.length;r++)e.fw(0,RoadSameStyle.write,t.road[r])}},roadNameLayer={read:function(t,e){return t.nw(roadNameLayer.iw,{roadName:[]},e)},iw:function(t,e,r,n){0===t&&e.roadName.push(RoadSameStyle.read(r,r.ow()+r.pos))},write:function(t,e){if(t.roadName)for(var r=0;r<t.road.length;r++)e.fw(0,RoadSameStyle.write,t.roadName[r])}},Result={read:function(t,e){return t.nw(Result.IQ,{tiles:[],version:"",status:!1,db:""},e)},IQ:function(t,e,r){0===t?e.tiles.push(Result.Gh.read(r,r.ow()+r.pos)):1===t?e.version=r.aw():2===t?e.status=r.vw():3===t&&(e.db=r.aw())},write:function(t,e){if(t.tiles)for(var r=0;r<t.tiles.length;r++)e.fw(0,Result.Gh.write,t.tiles[r]);t.version&&e.uw(1,t.version),t.status&&e.hw(2,t.status),t.db&&e.uw(3,t.db)},Gh:{}};Result.Gh.read=function(t,e){return t.nw(Result.Gh.IQ,{z:0,x:0,y:0,layers:[],t:0},e)},Result.Gh.IQ=function(t,e,r){0===t?e.z=r.ow():1===t?e.x=r.ow():2===t?e.y=r.ow():3===t?e.layers.push(Result.Gh.lw.read(r,r.ow()+r.pos)):4===t&&(e.t=r.ow())},Result.Gh.write=function(t,e){if(t.z&&e.rw(0,t.z),t.x&&e.rw(1,t.x),t.y&&e.rw(2,t.y),t.layers)for(var r=0;r<t.layers.length;r++)e.fw(3,Result.Gh.lw.write,t.layers[r]);t.t&&e.rw(4,t.t)},Result.Gh.lw={},Result.Gh.lw.read=function(t,e){return t.nw(Result.Gh.lw.IQ,{z:0,x:0,y:0,type:0,d:null,t:0},e)},Result.Gh.lw.IQ=function(t,e,r){0===t?e.z=r.ow():1===t?e.x=r.ow():2===t?e.y=r.ow():3===t?e.type=r.ow():4===t?e.d=r.mw():5===t&&(e.t=r.ow())},Result.Gh.lw.write=function(t,e){t.z&&e.rw(0,t.z),t.x&&e.rw(1,t.x),t.y&&e.rw(2,t.y),t.type&&e.rw(3,t.type),t.d&&e.ww(4,t.d),t.t&&e.rw(5,t.t)};var Style={read:function(t,e){return t.nw(Style.IQ,{bgColor:"",zn:0,xV:"",stylemaps:[],test:0},e)},IQ:function(t,e,r){1===t?e.bgColor=r.aw():2===t?e.zn=r.ow(!0):3===t?e.xV=r.aw():4===t?e.stylemaps.push(Style.SV.read(r,r.ow()+r.pos)):5===t&&(e.test=r.ow(!0))},write:function(t,e){if(t.bgColor&&e.uw(1,t.bgColor),t.zn&&e.rw(2,t.zn),t.xV&&e.uw(3,t.xV),t.stylemaps)for(var r=0;r<t.stylemaps.length;r++)e.fw(4,Style.SV.write,t.stylemaps[r]);t.test&&e.rw(5,t.test)},SV:{}};Style.SV.read=function(t,e){return t.nw(Style.SV.IQ,{key:[],browserStyle:[],levelStyleMapping:[]},e)},Style.SV.IQ=function(t,e,r){1===t?e.key.push(r.aw()):2===t?e.browserStyle.push(r.aw()):3===t&&r.tw(e.levelStyleMapping,!0)},Style.SV.write=function(t,e){if(t.key)for(var r=0;r<t.key.length;r++)e.uw(1,t.key[r]);if(t.browserStyle)for(r=0;r<t.browserStyle.length;r++)e.uw(2,t.browserStyle[r]);if(t.levelStyleMapping)for(r=0;r<t.levelStyleMapping.length;r++)e.rw(3,t.levelStyleMapping[r])};var decodeStyle=function(t){return t=new Pbf(t),Style.read(t)},decodePois=function(t){return t=new Pbf(t),PoiLayer.read(t)},decodeRoads=function(t){return t=new Pbf(t),roadLayer.read(t)},decodeRoadNames=function(t){return t=new Pbf(t),roadNameLayer.read(t)},decodeRegions=function(t){return t=new Pbf(t),regionLayer.read(t)},decodeBuildings=function(t){return t=new Pbf(t),buildingLayer.read(t)},decodeTiles=function(t){for(var t=new Pbf(t),e=(t=Result.read(t)).tiles,r=0,n=e.length;r<n;r+=1)for(var i=e[r].layers,a=0,o=i.length;a<o;a+=1)switch(i[a].type){case 0:i[a].d=decodePois(i[a].d);break;case 1:i[a].d=decodeRoads(i[a].d);break;case 2:i[a].d=decodeRegions(i[a].d);break;case 3:i[a].d=decodeBuildings(i[a].d);break;case 4:i[a].d=decodeRoadNames(i[a].d)}return t},CONSTS$2={_U:["th","my"]},SDFManagerBase=(NPa=Event,__extends(OPa,NPa),OPa.jU=function(t){return t=LangManager.gG(t+""),-1!==CONSTS$2._U.indexOf(t)},OPa.prototype.FU=function(t){for(var e=[],r=0,n=t;r<n.length;r++){var i=n[r];LangManager.gG(i+""),e.push(i)}return{UU:e,DU:[]}},OPa.prototype.measureText=function(t,e,r){if(r){r.font=(e||12)+"px";for(var n="",i=0,a=t;i<a.length;i++){var o=a[i];n+=String.fromCharCode(o)}return r.measureText(n).width}return 0},OPa.prototype.lineBreak=function(t,e){var n=void 0===(r=(e=void 0===e?{}:e).fontSize)?12:r,i=e.maxWidth,a=e.CO,o=e.fj,r=void 0===o?6:o,s=void 0===(o=e.type)?"en":o,u=e.YQ,c=(t=void 0===t?"":t).split(" "),f=[],i=i||90,l=0,h=[],d=[],v=[0];if("labelsLayer"===e.from){for(var g=t.length,b=Math.ceil(g/r),p=Math.ceil(g/b),y=void 0,m=0,w=0;w<b;w++){h[w]||(h[w]=[m]),0===w?y=a.slice(0,m=g%p||p):(y=a.slice(m,m+p),m+=p);var T=this.measureText(y,n,u);d.push(T),h[w].push(m)}for(w=0;w<h.length;w++){var x=h[w];v.push(x[x.length-1])}}else if("ch"===s)for(w=m=0;w<c.length;w++){for(var x=c[w],y=[],A=0;A<x.length;A++)y.push(x.charCodeAt(A));T=this.measureText(y,n,u),d.push(T),h.push([m,m+x.length+1]),m+=x.length+1,v.push(m)}else{for(w=0;w<c.length;w++){var M=c[w],y=[];if("en"===s)for(var S=0;S<M.length;S++)y.push(M.charCodeAt(S));else{var P=-1===(P=a.indexOf("32",l))?a.length:P;y=a.slice(l,P),l=P+1}T=this.measureText(y,n,u),f.push(T)}for(r=Math.max.apply(Math,f),h=(i=this.GU(f,i<r?r:i)).lines,d=i.BU,w=0;w<h.length;w++){var x=h[w],I=c.slice(x[0],x[x.length-1]+1).join(" "),$=t.indexOf(I),I=I.length-1;v.push($+I+1)}}return{lines:h,oQ:v,width:d,maxWidth:Math.max.apply(Math,d)}},OPa.prototype.GU=function(t,e){for(var r=[],n=0,i=0,a=[],o=0,s=t.length,u=0;u<s;u++){var c=t[u];i+=c,r[n]||(r[n]=[]),e<i&&(r[++n]=[],a.push(o),o=i=0),r[n].push(u),o+=c,u===s-1&&a.push(o)}return{lines:r,BU:a}},OPa.prototype.destroy=function(){},OPa),NPa,LoadFlag,ZQa,$Qa;function OPa(){var t=NPa.call(this)||this;return t.CLASS_NAME="SDFManagerBase",t}ZQa=LoadFlag=LoadFlag||{},ZQa.TEXTUREFINISH="TEXTUREFINISH",ZQa.UNLOAD="unload",ZQa.LOADING="loading",ZQa.LOADED="loaded",ZQa.FAIL="fail",$Qa=exports.qu||(exports.qu={}),$Qa.AllLoaded="AllLoaded",$Qa.AllUnLoaded="AllUnLoaded",$Qa.SomeLoading="SomeLoading",$Qa.AllLoading="AllLoading";var SDFManagerWorker=(_Qa=SDFManagerBase,__extends(aRa,_Qa),aRa.prototype.vW=function(t,e){var n=void 0===(r=e.tiles)?[]:r,i=e.cb,a=e.optimalZoom,r=void 0===(r=e.tags)?[]:r,o=e.stamp;this.cN=a,this.fN[o]||(this.fN[o]=r);for(var s=0;s<n.length;s++){var u=n[s],c=this.Zu(t);e.result=c,this.loadData(t,{tile:u,result:c,cb:i,optimalZoom:a,stamp:o,i:s})}},aRa.prototype.loadData=function(t,e){var r=this,n=e.cb,i=e.tile,a=e.result,o=(e.optimalZoom,e.stamp),s=e.i,u=a||this.Zu(t);switch(u.status){case exports.qu.AllLoaded:n([]);break;case exports.qu.AllUnLoaded:var c=this.Yu(n,{tile:i,stamp:o,index:s});this.MI(u.Vu,function(t){r.Xu[c]=t=void 0===t?{}:t,r.Hu()});break;case exports.qu.SomeLoading:var f=this.Yu(n,{tile:i,stamp:o,index:s});this.MI(u.Vu,function(t){r.Xu[f]=t=void 0===t?{}:t,r.Hu()});break;case exports.qu.AllLoading:var l=this.Yu(n,{tile:i,stamp:o,index:s});this.Xu[l]=[],this.Hu()}},aRa.prototype.mz=function(t){var e=this.info||{};return e[t]&&(e=e[t]).pos&&e.info[t]?{key:t,index:exports.cY.dynamic,char:e.info[t],pos:e.pos}:null},aRa.prototype.measureText=function(t,e){for(var r=CONSTS.ic,n=0,i=this.info,a=e/this._size,o=this.nc,s=0,u=t;s<u.length;s++){var c=u[s],f=void 0,l=c;(f=o.get(l))||!i.hasOwnProperty(l)||(l=i[l].info[l])&&this.nc.set(c,f=l[4]),n+=(f+r)*a}return n},aRa.prototype.Ju=function(t){for(var e={},r=0,n=t;r<n.length;r++){var i=n[r],a=i.range,o=i.info,s=i.pos;(i=this.info)[a],i[a]={info:((i={})[a]=o,i),pos:s},this.range.push(a),e[a]=1}return e},aRa.prototype.AI=function(t,e){this.info[t]&&(this.info[t].pos=e)},aRa.prototype.MI=function(e,r){var n=this;void 0===e&&(e=[]);for(var t=CONSTS.Mj,i=0,a=e;i<a.length;i++){var o=a[i];this._c[o]=!0}for(var s=[],u=0,c=this.FU(e),f=c.UU,l=c.DU,h=l.length,d=Math.ceil(h/CONSTS.Mj);u<d;){var v=t*u,v=l.slice(v,h<v+t?h:v+t),v=this.xI(v);s.push(v),u++}s.push(this.pG(f)),Promise.all(s).then(function(t){n.II(e),t=n.zU(t),n.Ju(t),r(t)})},aRa.prototype.pG=function(t){var r=this;return new Promise(function(e){r._parent.loadWordsByFront({Es:t,cb:function(t){e(t)}})})},aRa.prototype.xI=function(t){var a=this,e=this.fc()+("/getsdfdata?chars="+t.join(",").split(",").join("|"));return new Promise(function(n,i){XHR.send(e,{Me:"json",method:"get",qw:function(t){var e,r;t&&t.info?(e=a.vc(t.info),r=new ImageDataWraper(e,t.url),t.url=r,n({range:e,info:t})):i(null)},error:function(){i(null)}})})},aRa.prototype.fc=function(){var t=CONSTS.pc,e=this.protocol+t[this.dc];return this.dc=(this.dc+1)%t.length,e},aRa.prototype.vc=function(t){void 0===t&&(t={});var e=map(Object.keys(t),function(t){return parseInt(t,10)});return e.sort(function(t,e){return t-e}),e=2<=(t=e.length)?e[0]+"-"+e[t-1]:1===t?""+e[0]:""},aRa.prototype.gc=function(t){var e=this.range||[],r=this.info||{};if(-1!==e.indexOf(t))return!0;for(var n=parseInt(t,10),i=0,a=e;i<a.length;i++){var o=a[i];if(o.indexOf("-")<0){if(n===+o&&(r[o]&&r[o].info||{})[t])return!0}else{var s=o.split("-"),u=parseInt(s[0]||"",10),s=parseInt(s[1]||"",10);if(u<=n&&n<=s&&(r[o]&&r[o].info||{})[t])return!0}}return!1},aRa.prototype.wc=function(t){return this._c[t]},aRa.prototype.Zu=function(t){for(var e=[],r=0,n=0,i=0,a=t;i<a.length;i++){var o=a[i];this.gc(o)||(this.wc(o)?n+=1:(r+=1,e.push(o)))}return 0===n&&0===r?{status:exports.qu.AllLoaded,Vu:e}:0<r&&0===n?{status:exports.qu.AllUnLoaded,Vu:e}:0===r&&0<n?{status:exports.qu.AllLoading,Vu:e}:{status:exports.qu.SomeLoading,Vu:e}},aRa.prototype.Yu=function(t,e){void 0===e&&(e={});var r=this.yc+=1;return this.xc.push(r),this.bc[r]=t,this.bc[r]={cb:t,params:e},r},aRa.prototype.Hu=function(){var t,e,r=this.xc[0];!r||(t=this.Xu[r])&&(this.xc.shift(),(e=this.bc[r])?e.cb(t):console.error("sdf task error"),delete this.Xu[r],delete this.bc[r],this.Hu())},aRa.prototype.II=function(t){for(var e=0,r=t;e<r.length;e++){var n=r[e];delete this._c[n]}},aRa.prototype.zU=function(t){for(var e=[],r=0,n=t=void 0===t?[]:t;r<n.length;r++){var i=n[r];if(Array.isArray(i))for(var a=0,o=i;a<o.length;a++){var s=o[a];e.push(s)}else e.push(i)}return e},aRa),_Qa,FTa;function aRa(t){var e=_Qa.call(this)||this;return e.CLASS_NAME="SDFManagerWorker",e.protocol="https",e.range=[],e.info={},e.dc=0,e._c={},e._size=24,e.nc=new AdaptorMap,e.xc=[],e.bc={},e.Xu={},e.yc=1,e.fN={},e.ac=t.z_,e._parent=t.parent,e}FTa=exports.vY||(exports.vY={}),FTa[FTa.stop=0]="stop",FTa[FTa.finish=1]="finish",FTa[FTa.pause=2]="pause";var TaskManager=(GTa=Event,__extends(HTa,GTa),HTa.prototype.register=function(t,e,r){if(this.CV[t])throw Error("TaskManager: Exist Task Creator");this.CV[t]={PV:e,OV:r}},HTa.prototype.add=function(t,e){if(!this.CV[t])throw Error("TaskManager: Not Exist Task Type");var r=this.CV[t],t=this.id++,e=r.PV(e);return this.LV.push({UQ:e,OV:{id:t,kY:r.OV.kY}}),t},HTa.prototype.XQ=function(t,e,r){void 0===e&&(e={kY:1/0}),void 0===r&&(r=!1);var n=this.id++;return r?this.LV.unshift({UQ:t,OV:{id:this.id++,kY:e.kY}}):this.LV.push({UQ:t,OV:{id:this.id++,kY:e.kY}}),n},HTa.prototype.exec=function(t){this.jV();for(var e=t,r=Date.now();0<e;){var n=this.LV.shift();if(!n)break;var i=n.UQ.play(e);n.UQ.status===exports.vY.finish?this.emit("task:"+n.OV.id,{data:i}):this.LV.unshift(n),e=t-(Date.now()-r),0===this.LV.length&&this.emit("taskclear",!0)}},HTa.prototype.xY=function(){return 0<this.LV.length},HTa.prototype.destroy=function(){this.LV=[]},HTa.prototype.clear=function(e){this.LV=e?this.LV.filter(function(t){return t.UQ.type===e}):[]},HTa.prototype.jV=function(){this.LV.sort(function(t,e){return t.OV.kY-e.OV.kY})},HTa),GTa;function HTa(){var t=null!==GTa&&GTa.apply(this,arguments)||this;return t.id=0,t.LV=[],t._V={},t.CV={},t}var Actor=(cUa.prototype.send=function(t,e,r,n){var i=this,a=r?this.dI+":"+this.bI:null;this.bI+=2,r&&a&&(this.pI[a]=r);var o=[],s=serialize(e,o);if(this.target.postMessage({yI:n,mI:this.dI,type:t,id:String(a),data:s},o),r)return{cancel:function(){i.target.postMessage({yI:n,mI:i.dI,type:"<cancel>",id:String(a),key:e.ya}),a&&delete i.pI[a]}}},cUa.prototype.gI=function(t){var n=this;Browser.DW&&"destroy"===t.data.type&&self.close();var i,e,a=(t=t.data).id;t.yI&&this.dI!==t.yI||("<cancel>"===t.type?(e=this.pI[t.id],delete this.pI[t.id],e&&e("<cancel>")):"<response>"===t.type?(e=this.pI[t.id],delete this.pI[t.id],e&&t.error?e(deserialize(t.error)):e&&e(null,deserialize(t.data))):void 0!==t.id&&this.parent[t.type]&&(i=function(t,e){delete n.pI[a];var r=[],e=serialize(e,r);n.target.postMessage({mI:n.dI,type:"<response>",id:String(a),error:t?serialize(t):null,data:e},r),i=void 0},this.pI[t.id]=null,(e=this.parent[t.type](t.mI,deserialize(t.data),i))&&null===this.pI[t.id]&&(this.pI[t.id]=e.cancel)))},cUa.prototype.remove=function(){this.target.removeEventListener("message",this.gI,!1)},cUa);function cUa(t,e,r){this.UD=!1,this.gI=this.gI.bind(this),this.target=t,this.parent=e,this.dI=r,this.pI={},this.bI=Browser.DW?1:0,this.target.addEventListener("message",this.gI,!1)}var _aesJs_3_1_2_aesJs=createCommonjsModule(function(L,t){!function(){function r(t){return parseInt(t)===t}function n(t){if(r(t.length)){for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||255<t[e])return;return 1}}function a(t,e){if(t.buffer&&"Uint8Array"===t.name)return e?t.slice?t.slice():Array.prototype.slice.call(t):t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function u(t){return new Uint8Array(t)}function o(t,e,r,n,i){null==n&&null==i||(t=t.slice?t.slice(n,i):Array.prototype.slice.call(t,n,i)),e.set(t,r)}var i,t={n1:function(t){var e=[],r=0;for(t=encodeURI(t);r<t.length;){var n=t.charCodeAt(r++);37===n?(e.push(parseInt(t.substr(r,2),16)),r+=2):e.push(n)}return a(e)},i1:function(t){for(var e=[],r=0;r<t.length;){var n=t[r];n<128?(e.push(String.fromCharCode(n)),r++):191<n&&n<224?(e.push(String.fromCharCode((31&n)<<6|63&t[r+1])),r+=2):(e.push(String.fromCharCode((15&n)<<12|(63&t[r+1])<<6|63&t[r+2])),r+=3)}return e.join("")}},e=(i="0123456789abcdef",{n1:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},i1:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(i[(240&n)>>4]+i[15&n])}return e.join("")}}),l={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],c=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],f=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],v=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],b=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],p=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],m=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],T=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],x=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],A=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],M=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function S(t){for(var e=[],r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}function s(t){if(!(this instanceof s))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:a(t,!0)}),this.a1()}function P(t){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this.u1=new s(t)}function I(t,e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=u(16);this.c1=a(e,!0),this.u1=new s(t)}function $(t,e,r){if(!(this instanceof $))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=u(16);this.f1=r=r||1,this.h1=a(e,!0),this.u1=new s(t)}function C(t,e){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=u(16);this.l1=a(e,!0),this.d1=16,this.u1=new s(t)}function k(t){if(!(this instanceof k))throw Error("Counter must be instanitated with `new`");"number"==typeof(t=0===t||t?t:1)?(this.v1=u(16),this.VV(t)):this.g1(t)}function N(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof k||(e=new k(e)),this.v1=e,this.b1=null,this.w1=16,this.u1=new s(t)}s.prototype.a1=function(){var t=l[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this.o1=[],this.s1=[];for(var e=0;e<=t;e++)this.o1.push([0,0,0,0]),this.s1.push([0,0,0,0]);for(var r,n=4*(t+1),i=this.key.length/4,a=S(this.key),e=0;e<i;e++)this.o1[r=e>>2][e%4]=a[e],this.s1[t-r][e%4]=a[e];for(var o,s=0,u=i;u<n;){if(o=a[i-1],a[0]^=d[o>>16&255]<<24^d[o>>8&255]<<16^d[255&o]<<8^d[o>>24&255]^h[s]<<24,s+=1,8!=i)for(e=1;e<i;e++)a[e]^=a[e-1];else{for(e=1;e<i/2;e++)a[e]^=a[e-1];for(o=a[i/2-1],a[i/2]^=d[255&o]^d[o>>8&255]<<8^d[o>>16&255]<<16^d[o>>24&255]<<24,e=i/2+1;e<i;e++)a[e]^=a[e-1]}for(e=0;e<i&&u<n;)this.o1[c=u>>2][f=u%4]=a[e],this.s1[t-c][f]=a[e++],u++}for(var c=1;c<t;c++)for(var f=0;f<4;f++)o=this.s1[c][f],this.s1[c][f]=T[o>>24&255]^x[o>>16&255]^A[o>>8&255]^M[255&o]},s.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this.o1.length-1,r=[0,0,0,0],n=S(t),i=0;i<4;i++)n[i]^=this.o1[0][i];for(var a=1;a<e;a++){for(i=0;i<4;i++)r[i]=f[n[i]>>24&255]^v[n[(i+1)%4]>>16&255]^g[n[(i+2)%4]>>8&255]^b[255&n[(i+3)%4]]^this.o1[a][i];n=r.slice()}for(var o,s=u(16),i=0;i<4;i++)o=this.o1[e][i],s[4*i]=255&(d[n[i]>>24&255]^o>>24),s[4*i+1]=255&(d[n[(i+1)%4]>>16&255]^o>>16),s[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^o>>8),s[4*i+3]=255&(d[255&n[(i+3)%4]]^o);return s},s.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this.s1.length-1,r=[0,0,0,0],n=S(t),i=0;i<4;i++)n[i]^=this.s1[0][i];for(var a=1;a<e;a++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^y[n[(i+3)%4]>>16&255]^m[n[(i+2)%4]>>8&255]^w[255&n[(i+1)%4]]^this.s1[a][i];n=r.slice()}for(var o,s=u(16),i=0;i<4;i++)o=this.s1[e][i],s[4*i]=255&(c[n[i]>>24&255]^o>>24),s[4*i+1]=255&(c[n[(i+3)%4]>>16&255]^o>>16),s[4*i+2]=255&(c[n[(i+2)%4]>>8&255]^o>>8),s[4*i+3]=255&(c[255&n[(i+1)%4]]^o);return s},P.prototype.encrypt=function(t){if((t=a(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=u(t.length),r=u(16),n=0;n<t.length;n+=16)o(t,r,0,n,n+16),o(r=this.u1.encrypt(r),e,n);return e},P.prototype.decrypt=function(t){if((t=a(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=u(t.length),r=u(16),n=0;n<t.length;n+=16)o(t,r,0,n,n+16),o(r=this.u1.decrypt(r),e,n);return e},I.prototype.encrypt=function(t){if((t=a(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=u(t.length),r=u(16),n=0;n<t.length;n+=16){o(t,r,0,n,n+16);for(var i=0;i<16;i++)r[i]^=this.c1[i];this.c1=this.u1.encrypt(r),o(this.c1,e,n)}return e},I.prototype.decrypt=function(t){if((t=a(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=u(t.length),r=u(16),n=0;n<t.length;n+=16){o(t,r,0,n,n+16);for(var r=this.u1.decrypt(r),i=0;i<16;i++)e[n+i]=r[i]^this.c1[i];o(t,this.c1,0,n,n+16)}return e},$.prototype.encrypt=function(t){if(t.length%this.f1!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e=a(t,!0),r=0;r<e.length;r+=this.f1){for(var n=this.u1.encrypt(this.h1),i=0;i<this.f1;i++)e[r+i]^=n[i];o(this.h1,this.h1,0,this.f1),o(e,this.h1,16-this.f1,r,r+this.f1)}return e},$.prototype.decrypt=function(t){if(t.length%this.f1!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e=a(t,!0),r=0;r<e.length;r+=this.f1){for(var n=this.u1.encrypt(this.h1),i=0;i<this.f1;i++)e[r+i]^=n[i];o(this.h1,this.h1,0,this.f1),o(t,this.h1,16-this.f1,r,r+this.f1)}return e},C.prototype.decrypt=C.prototype.encrypt=function(t){for(var e=a(t,!0),r=0;r<e.length;r++)16===this.d1&&(this.l1=this.u1.encrypt(this.l1),this.d1=0),e[r]^=this.l1[this.d1++];return e},k.prototype.VV=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;0<=e;--e)this.v1[e]=t%256,t=parseInt(t/256)},k.prototype.g1=function(t){if(16!=(t=a(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this.v1=t},k.prototype.m1=function(){for(var t=15;0<=t;t--){if(255!==this.v1[t]){this.v1[t]++;break}this.v1[t]=0}},N.prototype.decrypt=N.prototype.encrypt=function(t){for(var e=a(t,!0),r=0;r<e.length;r++)16===this.w1&&(this.b1=this.u1.encrypt(this.v1.v1),this.w1=0,this.v1.m1()),e[r]^=this.b1[this.w1++];return e},t={T1:s,Counter:k,M1:{S1:P,A1:I,P1:$,I1:C,C1:N},N1:{O1:e,_1:t},padding:{L1:{pad:function(t){var e=16-(t=a(t,!0)).length%16,r=u(t.length+e);o(t,r);for(var n=t.length;n<r.length;n++)r[n]=e;return r},E1:function(t){if((t=a(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(16<e)throw new Error("PKCS#7 padding byte out of range");for(var r=t.length-e,n=0;n<e;n++)if(t[r+n]!==e)throw new Error("PKCS#7 invalid padding byte");var i=u(r);return o(t,i,0,0,r),i}}},U1:{j1:a,D1:u,B1:o}},L.exports=t}()}),crypt=createCommonjsModule(function(t){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={F1:function(t,e){return t<<e|t>>>32-e},R1:function(t,e){return t<<32-e|t>>>e},G1:function(t){if(t.constructor==Number)return 16711935&r.F1(t,8)|4278255360&r.F1(t,24);for(var e=0;e<t.length;e++)t[e]=r.G1(t[e]);return t},z1:function(t){for(var e=[];0<t;t--)e.push(Math.floor(256*Math.random()));return e},V1:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},X1:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},W1:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},H1:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},Y1:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(a.charAt(n>>>6*(3-i)&63)):e.push("=");return e.join("")},q1:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,n=0;r<t.length;n=++r%4)0!=n&&e.push((a.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|a.indexOf(t.charAt(r))>>>6-2*n);return e}};t.exports=r}),charenc={_1:{Q1:function(t){return charenc.K1.Q1(unescape(encodeURIComponent(t)))},Z1:function(t){return decodeURIComponent(escape(charenc.K1.Z1(t)))}},K1:{Q1:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},Z1:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}},charenc_1=charenc,_isBuffer_1_1_6_isBuffer=function(t){return null!=t&&(isBuffer$1(t)||isSlowBuffer(t)||!!t.J1)};function isBuffer$1(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function isSlowBuffer(t){return"function"==typeof t.d0&&"function"==typeof t.slice&&isBuffer$1(t.slice(0,0))}var md5=createCommonjsModule(function(t){function b(t,e){t.constructor==String?t=(e&&"binary"===e.encoding?w:y).Q1(t):m(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=p.V1(t),t=8*t.length,n=1732584193,i=-271733879,a=-1732584194,o=271733878,s=0;s<r.length;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8);r[t>>>5]|=128<<t%32,r[14+(64+t>>>9<<4)]=t;for(var u=b.v0,c=b.p0,f=b.y0,l=b.m0,s=0;s<r.length;s+=16){var h=n,d=i,v=a,g=o,n=u(n,i,a,o,r[s+0],7,-680876936),o=u(o,n,i,a,r[s+1],12,-389564586),a=u(a,o,n,i,r[s+2],17,606105819),i=u(i,a,o,n,r[s+3],22,-1044525330);n=u(n,i,a,o,r[s+4],7,-176418897),o=u(o,n,i,a,r[s+5],12,1200080426),a=u(a,o,n,i,r[s+6],17,-1473231341),i=u(i,a,o,n,r[s+7],22,-45705983),n=u(n,i,a,o,r[s+8],7,1770035416),o=u(o,n,i,a,r[s+9],12,-1958414417),a=u(a,o,n,i,r[s+10],17,-42063),i=u(i,a,o,n,r[s+11],22,-1990404162),n=u(n,i,a,o,r[s+12],7,1804603682),o=u(o,n,i,a,r[s+13],12,-40341101),a=u(a,o,n,i,r[s+14],17,-1502002290),n=c(n,i=u(i,a,o,n,r[s+15],22,1236535329),a,o,r[s+1],5,-165796510),o=c(o,n,i,a,r[s+6],9,-1069501632),a=c(a,o,n,i,r[s+11],14,643717713),i=c(i,a,o,n,r[s+0],20,-373897302),n=c(n,i,a,o,r[s+5],5,-701558691),o=c(o,n,i,a,r[s+10],9,38016083),a=c(a,o,n,i,r[s+15],14,-660478335),i=c(i,a,o,n,r[s+4],20,-405537848),n=c(n,i,a,o,r[s+9],5,568446438),o=c(o,n,i,a,r[s+14],9,-1019803690),a=c(a,o,n,i,r[s+3],14,-187363961),i=c(i,a,o,n,r[s+8],20,1163531501),n=c(n,i,a,o,r[s+13],5,-1444681467),o=c(o,n,i,a,r[s+2],9,-51403784),a=c(a,o,n,i,r[s+7],14,1735328473),n=f(n,i=c(i,a,o,n,r[s+12],20,-1926607734),a,o,r[s+5],4,-378558),o=f(o,n,i,a,r[s+8],11,-2022574463),a=f(a,o,n,i,r[s+11],16,1839030562),i=f(i,a,o,n,r[s+14],23,-35309556),n=f(n,i,a,o,r[s+1],4,-1530992060),o=f(o,n,i,a,r[s+4],11,1272893353),a=f(a,o,n,i,r[s+7],16,-155497632),i=f(i,a,o,n,r[s+10],23,-1094730640),n=f(n,i,a,o,r[s+13],4,681279174),o=f(o,n,i,a,r[s+0],11,-358537222),a=f(a,o,n,i,r[s+3],16,-722521979),i=f(i,a,o,n,r[s+6],23,76029189),n=f(n,i,a,o,r[s+9],4,-640364487),o=f(o,n,i,a,r[s+12],11,-421815835),a=f(a,o,n,i,r[s+15],16,530742520),n=l(n,i=f(i,a,o,n,r[s+2],23,-995338651),a,o,r[s+0],6,-198630844),o=l(o,n,i,a,r[s+7],10,1126891415),a=l(a,o,n,i,r[s+14],15,-1416354905),i=l(i,a,o,n,r[s+5],21,-57434055),n=l(n,i,a,o,r[s+12],6,1700485571),o=l(o,n,i,a,r[s+3],10,-1894986606),a=l(a,o,n,i,r[s+10],15,-1051523),i=l(i,a,o,n,r[s+1],21,-2054922799),n=l(n,i,a,o,r[s+8],6,1873313359),o=l(o,n,i,a,r[s+15],10,-30611744),a=l(a,o,n,i,r[s+6],15,-1560198380),i=l(i,a,o,n,r[s+13],21,1309151649),n=l(n,i,a,o,r[s+4],6,-145523070),o=l(o,n,i,a,r[s+11],10,-1120210379),a=l(a,o,n,i,r[s+2],15,718787259),i=l(i,a,o,n,r[s+9],21,-343485551),n=n+h>>>0,i=i+d>>>0,a=a+v>>>0,o=o+g>>>0}return p.G1([n,i,a,o])}var p=crypt,y=charenc_1._1,m=_isBuffer_1_1_6_isBuffer,w=charenc_1.K1;b.v0=function(t,e,r,n,i,a,o){return((o=t+(e&r|~e&n)+(i>>>0)+o)<<a|o>>>32-a)+e},b.p0=function(t,e,r,n,i,a,o){return((o=t+(e&n|r&~n)+(i>>>0)+o)<<a|o>>>32-a)+e},b.y0=function(t,e,r,n,i,a,o){return((o=t+(e^r^n)+(i>>>0)+o)<<a|o>>>32-a)+e},b.m0=function(t,e,r,n,i,a,o){return((o=t+(r^(e|~n))+(i>>>0)+o)<<a|o>>>32-a)+e},b.b0=16,b.w0=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);return t=p.X1(b(t,e)),e&&e.T0?t:e&&e.x0?w.Z1(t):p.W1(t)}});function pad(t){var e=PADDING[t.byteLength%16||0],r=new Uint8Array(t.byteLength+e.length);return r.set(t),r.set(e,t.byteLength),r}var PADDING=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]],BaseLevel=10;function getDirectoryByKey(t){return getIndexByKey(t).join("_")}function getIndexByKey(t){var e,r,n=(t=void 0===t?[]:t)[0],i=t[1],t=t[2],n=parseInt(n,10),i=parseInt(i,10),t=parseInt(t,10);return[n=0<=(n=n-BaseLevel)?(e=Math.floor(i/Math.pow(2,n)),r=Math.floor(t/Math.pow(2,n)),BaseLevel):(r=e=0,1),e,r]}function adaptorUserKey(t){var e=_aesJs_3_1_2_aesJs.N1._1.n1(t);if(16<e.length)throw Error("UserKey utf-8 byte length should less than 16");for(var r=new Array(16).fill(0),n=0,i=e.length;n<i;n++)r[n]=e[n];return r}var aeskey=adaptorUserKey("shandongyidong"),encoder=new _aesJs_3_1_2_aesJs.M1.S1(aeskey);function encrypt(t){return _aesJs_3_1_2_aesJs.N1.O1.i1(encoder.encrypt(pad(_aesJs_3_1_2_aesJs.N1._1.n1(t))))}function getOfflineNebulaUrl(t){return md5(getDirectoryByKey(t.split(",")))+"/"+encrypt(t.split(",").slice(0,3).join("_")+"_nebula")+".pbf"}function getOfflinePoiUrl(t){return md5(getDirectoryByKey(t.split(",")))+"/"+encrypt(t.split(",").slice(0,3).join("_")+"_poi")+".pbf"}var TaskPool=(QZa.prototype.nS=function(r,t){var n=this;return this.SN[r]=!0,this.listener[r]||(this.listener[r]=[]),t(function(t,e){n.$N(r,t,e)})},QZa.prototype.cancel=function(t){delete this.SN[t]},QZa.prototype.has=function(t){return Boolean(this.SN[t])},QZa.prototype.GN=function(t){return this.listener[t]&&0<this.listener[t].length},QZa.prototype.SH=function(t,e){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(e)},QZa.prototype.kN=function(t,e){!this.listener[t]||-1<(e=this.listener[t].indexOf(e))&&this.listener[t].splice(e,1)},QZa.prototype.$N=function(t,e,r){delete this.SN[t];var n=this.listener[t];if(delete this.listener[t],n)for(var i=0,a=n;i<a.length;i++)(0,a[i])(e,r)},QZa);function QZa(){this.listener={},this.SN={}}var StaticSDFManagerWorker=(j$a.prototype.loadData=function(t,o,r){var s=this,u=staticSDFTileKeyToKey(t);if(!u)return console.log("!key"),r(null,[void 0,null]),{cancel:noop$1};var c=this.fc(),f=c+u+".json",l=c+u+(o.mH?".webp":".png"),n=this.parent.protocol;if(void 0!==this._N[u]&&void 0!==this.NN[u])return r(null,[this._N[u],this.NN[u]]),{cancel:noop$1};function h(t,e){e&&(e.protocol=n),r(t,e)}var e=this.LN.has(u);return this.LN.SH(u,h),e?{cancel:function(){s.NW(t)}}:this.LN.nS(u,function(r){function n(t,e){r(null,e)}var i=0,a=[],t=s.ON(f,function(t,e){t?"404"!==t?(console.log(t),n(0,null)):(a[0]=e?{}:null,s._N[u]=a[0],2==++i&&n(0,a)):(a[0]=e,s._N[u]=e,2==++i&&n(0,a))}),e=s.IN(l,function(t,e){if(t||!e)"404"!==t?(console.log(t),n(0,e)):(a[1]=null,s.NN[u]=a[1],2==++i&&n(0,a));else if(!e||e.byteLength<128)a[1]=null,s.NN[u]=a[1],2==++i&&n(0,a);else if(o.imageBitmap)ImageDataWraper.AV(e).then(function(t){return"success"!==(t=new ImageDataWraper(l,t,{imageBitmap:!0})).status?(console.log("createObjectURL fail"),void r("createObjectURL fail",null)):(a[1]=t,s.NN[u]=t,void(2==++i&&n(0,a)))});else{if("success"!==(e=new ImageDataWraper(c,e)).status)return console.log("createObjectURL fail"),void n(0,null);a[1]=e,s.NN[u]=e,2==++i&&n(0,a)}});return"lesszoom10"!==u?{cancel:function(){s.LN.kN(u,h),s.LN.GN(u)||(t.abort(),e.abort(),s.LN.cancel(u)),h("cancel",null)}}:{cancel:function(){s.LN.kN(u,h),h("cancel",null)}}})},j$a.prototype.NW=function(t){var e=this.NN[t];e&&e.destroy(),delete this.NN[t],delete this._N[t]},j$a.prototype.zW=function(t){this._N={},this.NN={},this.jN=["://glyph.amap.com/sdf"+t+"/","://glyph01.amap.com/sdf"+t+"/","://glyph02.amap.com/sdf"+t+"/","://glyph03.amap.com/sdf"+t+"/","://glyph04.amap.com/sdf"+t+"/"]},j$a.prototype.ON=function(t,e){return this.CN.send(t,{Me:"json",method:"get",qw:function(t){e(null,t||null)},Aw:function(t){e(t&&t.message||"unknown error")}})},j$a.prototype.IN=function(t,e){return this.CN.send(t,{Me:"arraybuffer",method:"get",qw:function(t){t?e(null,t):e("empty data",null)},Aw:function(t){e(t&&t.message||"unknown error")}})},j$a.prototype.fc=function(){this.EN=this.EN%this.jN.length;var t=this.parent.protocol+this.jN[this.EN];return this.EN++,t},j$a);function j$a(t,e){this.parent=t,this.CN=e,this.jN=[],this.EN=0,this._N={},this.NN={},this.LN=new TaskPool,this.zW(this.parent.GW.db),this.parent.Uh.send("updateDataVersion",this.parent.GW.nebulaVersion)}var emptyObj={},SDFStaticTextureCache=(c_a.prototype.xH=function(t,e){void 0===e&&(e=!1);var r=staticSDFTileKeyToKey(t),n=this.RN[r];if(e){if(!n)return;n.indexOf(t)<0&&n.push(t)}return this.DN.getImage(r)},c_a.prototype.LB=function(t){return t=staticSDFTileKeyToKey(t),this.XN[t]||emptyObj},c_a.prototype.bH=function(n,i,a,o){var t,s=this,u=staticSDFTileKeyToKey(n);i.type===ImageDataWraperType.bitmap?i.IV?(t=this.DN.getImage(i.hash),o(null,t)):this.DN.addImageBitmap(i.data,{url:u,cb:function(t,e){var r;t||(i.destroy(),s.RN[u]||(s.RN[u]=[],s.XN[u]=a),(r=s.RN[u]).indexOf(n)<0&&r.push(n)),o(t,e)}}):this.DN.addImage(u,{url:i.data,cb:function(t,e){var r;t||(s.RN[u]||(s.RN[u]=[],s.XN[u]=a),(r=s.RN[u]).indexOf(n)<0&&r.push(n)),o(t,e)}})},c_a.prototype.kH=function(t){var e=staticSDFTileKeyToKey(t),r=this.RN[e];r?(0<=(t=r.indexOf(t))&&r.splice(t,1),0===r.length&&(this.DN.RH(e),this.UN.deleteTileStaticSDF(e),delete this.RN[e],delete this.XN[e])):delete this.XN[e]},c_a);function c_a(t,e,r){this.parent=t,this.DN=e,this.UN=r,this.RN={},this.XN={}}var RenderThread=(E_a.prototype.Yf=function(){this.Yv||(0<this.Jv&&this.Kv?(this.render(),this.Qv=Util.requestAnimFrame(this.Yf.bind(this))):(this.Jv<=0||!this.Kv)&&(this.Kv=!1,Util.cancelAnimFrame(this.Qv),this.Qv=0,this.Qv||this.check()&&(this.render(),this.setNeedUpdate(!0))),this.Jv--)},E_a.prototype.setNeedUpdate=function(t){this.Jv=5,t&&!this.Kv&&(this.Kv=t,Util.cancelAnimFrame(this.Qv),this.Qv=0,this.to()),this.Kv=t},E_a.prototype.to=function(){this.Qv||(this.Qv=Util.requestAnimFrame(this.Yf.bind(this)))},E_a.prototype.destroy=function(){this.Yv=!0},E_a);function E_a(t){this.Jv=5,this.Qv=0,this.Yv=!1,this.render=t.render,this.check=t.check}Uint8Array.prototype.fill||(Uint8Array.prototype.fill=Array.prototype.fill),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:function(t,e){return new Float32Array(Array.prototype.slice.call(this,t,e))}}),Float64Array.prototype.slice||Object.defineProperty(Float64Array.prototype,"slice",{value:function(t,e){return new Float64Array(Array.prototype.slice.call(this,t,e))}}),exports.Ge=AMapStyleSource,exports.Bh=Actor,exports.OZ=AdaptorMap,exports.bb=BezierUtil,exports.tc=CONSTS,exports._n=Color,exports.ZQ=ComputeTileRange,exports.hL=Coordinate,exports.PY=DangerousFontSize,exports.La=DynamicVertice,exports.Event=Event,exports.iz=FillExtrusionBucket,exports.GeometryUtil=GeometryUtil,exports.rW=GeometryUtilCls,exports.x_=HALF_WORLD_SIZE,exports.WQ=ImageDataWraper,exports.pZ=InnerClass,exports.eG=Labels,exports.LabelsRenderUtil=LabelsRenderUtil,exports.bG=LangManager,exports.LngLat=LngLat$2,exports.ZY=LngLat2TileInnerCoord,exports.za=LocalTileZoom,exports.Ra=LocalZoom,exports.MapboxLabelFormat=MapboxLabelFormat,exports.fQ=MapboxSegements,exports.bX=MapboxVTSourceWorker,exports.Module=Module,exports.NebulaLabelFormat=NebulaLabelFormat,exports._w=NebulaSegements,exports.pa=NebulaTile,exports.wa=NebulaTileCoord,exports.pw=Pbf,exports.Pixel=Pixel,exports.PlaneGeometryUtil=PlaneGeometryUtil,exports.kS=PlaneGeometryUtilInstance,exports.K_=PolygonBucket,exports.oE=PolygonSegements,exports.J_=PolylineBucket,exports.ProjectionManager=ProjectionManager,exports.tS=Queue,exports.Vs=RasterTile,exports.wY=RenderThread,exports.vG=SDFManagerBase,exports.jb=SDFManagerWorker,exports.LH=SDFStaticTextureCache,exports.e0=SimpleCircleBucket,exports.Size=Size,exports.yp=SmartArrayBuffer,exports.xW=StaticSDFManagerWorker,exports.StyleParser=StyleParser,exports.Support=Browser,exports.vH=Task,exports.MY=TaskManager,exports.IH=TaskPool,exports.Gh=Tile,exports.ca=TileCoord,exports.V=transform,exports.Util=Util,exports.Sw=VectorTile,exports.tW=VectorTile$1,exports.LW=VectorTileSegements,exports.Yw=XHR,exports.dZ=__decorate,exports.Ei=__extends,exports.Pt=__spreadArrays,exports.assign=assign,exports.jw=calcTileMectorBounds,exports.clone=clone,exports.Ex=clone$1,exports.yn=cloneDeep,exports.create=create$3,exports.Il=create,exports.Dl=create$1,exports.Zl=create$2,exports.CZ=decodeStyle,exports.KQ=decodeTiles,exports.equals=equals$1,exports.Ru=equals,exports.every=every,exports.extend=extend,exports.filter=filter,exports.find=find,exports.findIndex=findIndex,exports.forEach=forEach,exports.vx=forIn,exports.Bu=fromValues$2,exports.xd=fromValues$3,exports.$Q=getMVTTileBbox,exports.l0=getOfflineNebulaUrl,exports.I0=getOfflinePoiUrl,exports.vZ=getOutseaData,exports.Ol=getTranslation,exports.Ul=invert,exports.VB=isBezierCurve,exports.xs=isBounds,exports.sB=isCircleMarker,exports.isEmpty=isEmpty,exports.isEqual=isEqual,exports.isFunction=isFunction,exports.qG=isInnerLabelsLayer,exports.px=isLayer,exports.Bs=isLngLat,exports.iL=isLnglatLikeArray,exports.eL=isLnglatLikeArrayArray,exports.yL=isLnglatLikeArrayArrayArray,exports.vB=isNumber,exports.ys=isNumberArrayArray,exports.Ox=isNumberArrayArrayArray,exports.tL=isNumberArrayArrayArrayArray,exports.er=isOverlay,exports.RF=isOverlayGroup,exports.oy=isPixel,exports.GB=isPolyline,exports.ay=isSize,exports.FF=isVectorLayer,exports.jsonLngLatData=jsonLngLatData,exports.keys=keys,exports.labelsUtil=labelsUtil,exports.lcs=lcs,exports.lookAt=lookAt,exports.map=map,exports.multiply=multiply,exports.ou=ortho,exports.parseLngLatData=parseLngLatData,exports.perspective=perspective,exports.rbush=_rbush_2_0_2_rbush,exports.scale=scale$1,exports.set=set$1,exports.Pl=set,exports.some=some,exports.XY=tileInnerCoord2LngLat,exports.Gu=transformMat4,exports.vector=vector,exports.zoomRange=zoomRange}),define(["./shared"],function(polyfill){var _a,geoUtil=new polyfill.rW({}),LabelFormatMap=(_a={},_a[polyfill.NebulaLabelFormat.id]=polyfill.NebulaLabelFormat,_a.nebula=polyfill.NebulaLabelFormat,_a[polyfill.MapboxLabelFormat.id]=polyfill.MapboxLabelFormat,_a),NebulaSourceWorker=(a=polyfill.Event,polyfill.Ei(b,a),b.prototype.bind=function(){var y=this;this.on("styleReady",function(){var A=y.xQ.length;if(0<A){for(var i=0;i<A;i++){var g=(l=y.xQ[i]).data,I=l.projectionId,t=l.zoom,B=l.viewMode,Q=l.showBuildingBlock,C=l.mS,e=l.optimalZoom,o=l.ZL,E=l.cb,h=l.url;y.pQ(g,I,t,B,Q,C,e,o,E,h)}y.xQ=[]}var a=y.bQ.length;if(0<a){for(i=0;i<a;i++){var l,n=(l=y.bQ[i]).CD,r=l.cQ,s=l.data,I=l.projectionId,E=l.cb,w=l.UQ,c=l.mH,o=l.ZL;y.mQ(n,r,s,I,E,w,c,o)}y.bQ=[]}})},b.prototype.bw=function(g,A,I,t,B,i,Q,C,e,o,E,h,a){var l=this;if(void 0===a&&(a=!0),polyfill.Support.wasm&&a){if(!this.parent.PW)return void h("not init");a=A.join(";"),a=this.parent.PW.transform('["'+a+'","'+E+'"]'),g=g+("?key="+this.parent.key)+"&msg="+a}else g=g+("?key="+this.parent.key)+"&flds="+E+"&t="+A.join(";");return g+="&p=3",makeFetchRequest(this.parent.Uh,g,function(A,i){A?h(A):setTimeout(function(){l.pQ(i,B,I,C,e,Q,t,o,h,g)},10)})},b.prototype.pQ=function(A,g,I,t,B,Q,C,i,e,o){var E=this;if(this.parent.vn&&this.parent.vn._Q()){polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["data-decode-begin"]||(polyfill.Support.amapRunTime["data-decode-begin"]=(new Date).getTime()));var h=polyfill.KQ(new Uint8Array(A)),a=[];polyfill.forEach(h.tiles,function(A){var i=new polyfill.Gh(new polyfill.ca(A.z,A.x,A.y));i.data=E.kw(A,g,i),E.xw(i,I),E.zw(i,I,t,B),E.nz(i,Q,C),A=polyfill.Util.pW(A.t),a.push({zo:i.zo,ba:i.data,tag:A,version:h.version||""})});for(var l=[],n=this.parent.vn,r=void 0,s=0,w=a;s<w.length;s++){var c=w[s];if(c&&c.ba){if(c.ba.road){for(var y=[],x=0,p=c.ba.road;x<p.length;x++){var d=p[x],r=(r=n.dn(d.Fp,d.Ep,i))?r[1]:null;d.id&&r&&r.fontSize&&r.faceColor&&(delete d.gw,y.push({path:d.path,id:d.id}))}c.ba.road=y}delete c.ba.poilabel,delete c.ba.region,delete c.ba.building,delete c.ba.Mw}l.push(c)}polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["data-decode-end"]||(polyfill.Support.amapRunTime["data-decode-end"]=(new Date).getTime())),e(null,{nebulaDatas:l,amapRunTime:polyfill.Support.amapRunTime})}else this.xQ.push({data:A,projectionId:g,zoom:I,viewMode:t,showBuildingBlock:B,mS:Q,optimalZoom:C,ZL:i,cb:e,url:o})},b.prototype.mQ=function(A,i,g,I,t,B,Q,C,e){this.parent.vn?this.HQ(g,i,I,A,B,Q,C,t):this.bQ.push({CD:A,cQ:i,data:g,projectionId:I,cb:t,UQ:B,mH:Q,ZL:C})},b.prototype.bW=function(A,g,I,t,B,i,Q,C){var e,o=this;if(i)A+=polyfill.I0(g[0]),Q&&(E=Q.vectorTileServer,Q=Q.vectorTileParam,e=[],polyfill.forEach(Q,function(A,i){e.push(i+"="+A)}),A=E+polyfill.I0(g[0])+"?"+e.join("&"));else{if(polyfill.Support.wasm){if(!this.parent.PW)return void C("not init");var E=g.join(";"),E=this.parent.PW.transform('["'+E+'","poi,roadname"]');A=A+("?key="+this.parent.key)+"&msg="+E}else A=A+("?key="+this.parent.key)+"&flds=poi,roadname&t="+g.join(";");A+="&p=3"}this.WW=t;var h=-1!==A.indexOf("/oversea"),a=new polyfill.vH;return a._H(makeFetchRequest(this.parent.Uh,A,function(A,i){A?C(A):setTimeout(function(){o.mQ(g,h,i,I,C,a,B,t)},10)},!!i)),{cancel:a.cancel}},b.prototype.HQ=function(A,i,g,I,t,B,Q,C){var e=this,o=A.signature,E=polyfill.KQ(new Uint8Array(A));!i&&E.version&&this.parent.GW.nebulaVersion!==E.version&&(this.parent.GW.nebulaVersion=E.version,this.parent.GW.db=E.db,this.parent.IW.zW(this.parent.GW.db),this.parent.Uh.send("updateDataVersion",this.parent.GW.nebulaVersion));var h=[];polyfill.forEach(E.tiles,function(A){var i=new polyfill.Gh(new polyfill.ca(A.z,A.x,A.y));i.data=e.kw(A,g,i),A=polyfill.Util.pW(A.t),h.push({zo:i.zo,ba:i.data,tag:A,signature:o})});for(var a=[],l=0,n=h;l<n.length;l++){var r,s,w=n[l];w&&w.ba&&(r=w.ba.roadName,s=w.ba.poilabel,delete w.ba.poilabel,delete w.ba.Mw,a.push({zo:w.zo,ba:{roadName:r,poilabel:s},tag:w.tag,version:E.version||"",signature:w.signature}))}if(a.length){for(var c={},y=0,x=a;y<x.length;y++){var p=x[y],d=new polyfill.Gh(p.zo),f=polyfill.wa.ga(d.zo.x,d.zo.y,d.zo.z,"EPSG:3857");d.type="nebula",i&&(d.cQ=!0),f=polyfill.lcs.getLocalByCoord([f[0],f[1]]),d.localCoord=f,d.signature=p.signature,d.data=p.ba,(f=this.parent.params).showLabel,f=f.scale,p=p.tag,this.sQ[d.zo.key+","+p]={tile:d,params:{scale:f,tag:p}},c[d.zo.key+","+polyfill.Util.SD(p)]=!0,c.signature=o}C(null,c)}},b.prototype.OW=function(A){this.parent.Zw?this.on("once",A):A()},b.prototype.YE=function(A,i){polyfill.map(polyfill.ZQ.ha(i.bounds,polyfill.ZQ.ra(i.zoom)),function(A){return A.join(",")});var g=this.sQ,i=polyfill.Util.getOptimalZoom(this.WW);A(g,{ZL:this.WW,optimalZoom:i,cb:function(){}}),this.sQ={}},b.prototype.kw=function(A,i,g){var n=this,I={},r=polyfill.ProjectionManager.getProjection(i),i=polyfill.wa.ga(A.x,A.y,A.z,"EPSG:3857"),s=polyfill.lcs.getLocalByCoord([i[0],i[1]]).center;g.Mw=s,g.Ro=i;var w=g.zo.z;return polyfill.forEach(A.layers,function(h){var A,a=[],l=b.Wa[h.type];polyfill.forEach(h.d[l],function(o){o.items.sort(n.A0);var E=n.parent.vn.mW(o.mainkey,o.subkey,w);polyfill.forEach(o.items,function(A){switch(l){case"road":for(var i=0;i<A.path.length;i+=2){var g=A.path[i],I=A.path[i+1],t=polyfill.XY(h,o.resolution,g,I),t=r.project(t[0],t[1]);w>=polyfill.Ra&&(t[0]-=s[0],t[1]-=s[1]),A.path[i]=t[0],A.path[i+1]=t[1]}break;case"region":for(var B=A.path,Q=0;Q<B.length;Q+=1){for(var C=B[Q].path,e=[],i=0;i<C.length;i+=2)g=C[i],I=C[i+1],t=polyfill.XY(h,o.resolution,g,I),e[i]=t[0],e[i+1]=t[1],t=r.project(t[0],t[1]),w>=polyfill.Ra&&(t[0]-=s[0],t[1]-=s[1]),C[i]=t[0],C[i+1]=t[1];B[Q]=C}break;case"building":for(B=A.path,A.oW=[],Q=0;Q<B.length;Q+=1){for(C=B[Q].path,e=[],i=0;i<C.length;i+=2)g=C[i],I=C[i+1],t=polyfill.XY(h,o.resolution,g,I),e[i]=t[0],e[i+1]=t[1],t=r.project(t[0],t[1]),w>=polyfill.Ra&&(t[0]-=s[0],t[1]-=s[1]),C[i]=t[0],C[i+1]=t[1];B[Q]=C,A.oW[Q]=e}break;case"poilabel":case"roadName":if(A.pos&&(e=polyfill.XY(h,o.resolution,A.pos[0],A.pos[1]),A.pos=r.project(e[0],e[1])),A.path){if(A.shield){e=polyfill.XY(h,o.resolution,A.path[0],A.path[1]),t=r.project(e[0],e[1]),w>=polyfill.Ra&&(t[0]-=s[0],t[1]-=s[1]),A.path[0]=t[0],A.path[1]=t[1];break}for(i=0;i<A.path.length;i+=2)g=A.path[i],I=A.path[i+1],t=polyfill.XY(h,o.resolution,g,I),t=r.project(t[0],t[1]),w>=polyfill.Ra&&(t[0]-=s[0],t[1]-=s[1]),A.path[i]=t[0],A.path[i+1]=t[1]}}A.du=o.resolution,A.Fp=o.mainkey,A.Ep=o.subkey,A.zIndex=n.parent.vn.Lw(o.mainkey,o.subkey),A.lineCap=E[0],A.RQ=E[1],A.gw={z:h.z,y:h.y,x:h.x},a.push(A)})}),"poilabel"!==l?n.Tw(a):n.Na(a),"poilabel"===l?(A=h.z+"-"+h.x+"-"+h.y,I[l]?I[l][A]?I[l][A].push.apply(I[l][A],a):I[l][A]=a:(I[l]={},I[l][A]=a)):I[l]?I[l].push.apply(I[l],a):I[l]=a}),I.Mw=s,I},b.prototype.A0=function(A,i){return A.minzoom-i.minzoom||A.maxzoom-i.maxzoom},b.prototype.Tw=function(A){return A.sort(function(A,i){return A.zIndex-i.zIndex}),A},b.prototype.Na=function(A){return A.sort(function(A,i){return A.rank-i.rank}),A},b.prototype.xw=function(A,i){var g=A.data,I=new polyfill._w;if(g.Uc=I,!g.$c){g.$c=new polyfill.J_,g.road=g.road||[];var t=A.Mw.slice(0);if(A.zo.z<=polyfill.za&&(t[0]=0,t[1]=0),g.road.push({name:"",rank:1,maxzoom:polyfill.zoomRange[1],minzoom:polyfill.zoomRange[0],path:[A.Ro[0]-t[0],A.Ro[1]-t[1],A.Ro[2]-t[0],A.Ro[1]-t[1],A.Ro[2]-t[0],A.Ro[3]-t[1],A.Ro[0]-t[0],A.Ro[3]-t[1],A.Ro[0]-t[0],A.Ro[1]-t[1]],Fp:-2,Ep:-2,shield:"",shieldType:0,du:13,lineCap:"butt",RQ:"butt"}),g.road)for(var B=0,Q=g.road;B<Q.length;B++){var C=Q[B],e=C.path,e=(o=g.$c.hb(e,{X_:"butt"===C.lineCap?0:.9,lineCap:C.lineCap,lineJoin:"auto"})).Iw,o=o.distance;0<e&&(I.add(C.Fp,C.Ep,e,C.minzoom,C.maxzoom),C.distance=o)}}},b.prototype.zw=function(A,i,g,I){var t=A.data,B=new polyfill._w;if(t.Oc=B,t.Fc=new polyfill._w,!t.Dc){t.Dc=new polyfill.K_,t.region=t.region||[];var Q=A.Mw.slice(0);if(A.zo.z<=polyfill.za&&(Q[0]=0,Q[1]=0),t.region.unshift({maxzoom:polyfill.zoomRange[1],minzoom:polyfill.zoomRange[0],path:[[A.Ro[0]-Q[0],A.Ro[1]-Q[1],A.Ro[2]-Q[0],A.Ro[1]-Q[1],A.Ro[2]-Q[0],A.Ro[3]-Q[1],A.Ro[0]-Q[0],A.Ro[3]-Q[1],A.Ro[0]-Q[0],A.Ro[1]-Q[1]]],Fp:30001,Ep:1}),t.region)for(var C=0,e=t.region;C<e.length;C++)for(var o=e[C],E=0,h=o.path;E<h.length;E++)(v=h[E]).push(v[0],v[1]),0<(M=t.Dc.Nx(v))&&B.add(o.Fp,o.Ep,M,o.minzoom,o.maxzoom);if(!I&&t.building){if(t.FD)return;t.FD=new polyfill.K_,t.BD=new polyfill._w;for(var a=t.BD,l=0,n=t.building;l<n.length;l++){var r=n[l],w=(s=polyfill.jw(r.gw.z,r.gw.x,r.gw.y))[0],c=s[1],y=s[2],s=s[3];A.Mw&&(w-=A.Mw[0],y-=A.Mw[0],c-=A.Mw[1],s-=A.Mw[1]);for(var x=Math.floor(w),p=Math.floor(y),d=Math.floor(c),f=Math.floor(s),D=0,R=r.path;D<R.length;D++){var v=R[D];0<(M=t.FD.Nx(v))&&a.add(r.Fp,r.Ep,M,r.minzoom,r.maxzoom,r.ew||"indoor_out_building")}for(var u=0,G=r.path;u<G.length;u++){var S=G[u];S.push(S[0],S[1]);for(var v=[],b=0,F=S.length;b<F-2;b+=2)v.push(polyfill.xd(S[b],S[b+1])),v.push(polyfill.xd(S[b+2],S[b+3]));for(var k=[],b=0,F=v.length;b<F;b+=2){var M,Y=v[b][0],N=v[b][1],J=v[b+1][0],U=v[b+1][1],L=Math.floor(Y),H=Math.floor(N);(Y!==J||L!==x&&L!==p)&&(N!==U||H!==d&&H!==f)?k.push(v[b],v[b+1]):(0<(M=t.Dc.Ew(k))&&t.Fc.add(r.Fp,r.Ep,M,r.minzoom,r.maxzoom,r.ew||"indoor_out_building"),k=[])}0<k.length&&0<(M=t.Dc.Ew(k))&&t.Fc.add(r.Fp,r.Ep,M,r.minzoom,r.maxzoom,r.ew)}}}if(t.building){for(var K=[],m=0,q=t.building;m<q.length;m++)if((r=q[m]).ew)if(-1<r.ew.indexOf("|"))for(var W=r.ew.split("|"),b=0;b<W.length;b++)K.push(W[b]);else K.push(r.ew);t.indoorInfo||(t.indoorInfo=[]),t.indoorInfo=K}}},b.prototype.nz=function(A,i,g){void 0===i&&(i={});var I=A.data;if(I.C_=new polyfill._w,!I.A_){I.A_=new polyfill.iz;var t=i.hideWithoutStyle,B=i.areas;if(I.building)for(var Q=0,C=I.building;Q<C.length;Q++)for(var e=C[Q],o=0;o<e.path.length;o++){var E=e.path[o],h=e.oW[o];E.push(E[0],E[1]),h.push(h[0],h[1]);for(var a=[],l=0;l<h.length;l+=2)a.push([h[l],h[l+1]]);if(B){for(var n,r=!1,s=!1,w={},c=0;c<B.length;c++){var y=B[c],x=y.path;geoUtil.isRingInRing(a,x)&&(r=!0,!y.visible&&void 0!==y.visible||(s=!0,w={roofColor:polyfill.Util.color2RgbaArray(y.color1),wallColor:polyfill.Util.color2RgbaArray(y.color2)}))}!r&&t||r&&!s||0<(n=I.A_.tz(E,e.height))&&I.C_.add(e.Fp,e.Ep,n,e.minzoom,e.maxzoom,e.ew,w.roofColor,w.wallColor)}else 0<(n=I.A_.tz(E,e.height))&&I.C_.add(e.Fp,e.Ep,n,e.minzoom,e.maxzoom,e.ew)}}},b.prototype.hQ=function(A,i){if(A)for(var g=this.SQ(A)||[],I=0,t=g=new LabelFormatMap[A.type]({vn:this.parent.vn}).DQ(g,{zoom:i});I<t.length;I++){var B=t[I],Q=B.CO;B.EG||(B.EG={});for(var C=0,e=Q;C<e.length;C++){var o=e[C],E=this.parent.R_.mz(o);B.EG[o]=E}}return g},b.prototype.SQ=function(A){return A.data&&A.data.roadName||A.Dh},b.Pw=[1,0,1,0],b.Wa={0:"poilabel",1:"road",2:"region",3:"building",4:"roadName"},b),a;function b(A){var i=a.call(this)||this;return i.parent=A,i.id="nebula",i.sQ={},i.aW=null,i.WW=20,i.xQ=[],i.bQ=[],i.bind(),i}var hasWarning=!1;function makeFetchRequest(A,i,g,I,t){if(!polyfill.Support.safari&&!polyfill.Support.AQ&&!polyfill.Support.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal")){var B=new AbortController,Q=B.signal,Q=new self.Request(i,{method:"GET",referrer:"null"===self.location.origin?void 0:self.location.origin,signal:Q});return polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["data-request"]||(polyfill.Support.amapRunTime["data-request"]=(new Date).getTime())),fetch(Q).then(function(A){return polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["data-loaded"]||(polyfill.Support.amapRunTime["data-loaded"]=(new Date).getTime())),"application/x-protobuf"===A.headers.get("content-type")||I?A.arrayBuffer():A.json()}).then(function(A){A.info?hasWarning||(hasWarning=!0,console.log(i),console.log("<AMap JSAPI> KEY异常，错误信息："+A.info)):g(null,A)}).catch(function(A){"AbortError"!==A.name&&g(A.message||"unknown error")}),{cancel:function(){B.abort()}}}var C=A.send("request",i,function(A,i){A?("<cancel>"===A&&C&&C.cancel&&C.cancel(),C=void 0,g(A)):(C=void 0,g(null,i))});return C}var DistrictSourceWorker=function(){function DistrictSourceWorker(A){this.parent=A,this.fW={}}return DistrictSourceWorker.prototype.bw=function(A,i,g,I,t){var B=this,Q=new XMLHttpRequest;return Q.onreadystatechange=function(){var A;4!==Q.readyState||200!==Q.status&&204!==Q.status||(A=new polyfill.tW(new polyfill.pw(new Uint8Array(Q.response))),A=B.Ow(A,{x:i.x,y:i.y,z:i.z,projectionId:g,tileSize:I}),t(null,polyfill.Ln({zo:i},A)))},Q.open("GET",A,!0),Q.responseType="arraybuffer",Q.send(),{cancel:function(){Q.abort()}}},DistrictSourceWorker.prototype.Ow=function(o,A){var g=A.x,I=A.y,t=A.z,B=A.tileSize,Q=A.projectionId;o.z=t,o.x=g,o.y=I,A=polyfill.ProjectionManager.getProjection(Q).getResolution(t),o.Ro=polyfill.$Q(g,I,t,A,B),o.zS=polyfill.lcs.getLocalByCoord([o.Ro[0],o.Ro[1]]);var C=polyfill.ProjectionManager.getProjection(Q).getResolution(t);return polyfill.vx(o.layers,function(e){var A=e.Cw;e.Ah=[],e.scale=C*B/e.extent;var i=polyfill.V[Q].Xs(B*g,B*I,t);e.ox=i[0],e.oy=i[1],polyfill.forEach(A,function(A,i){if((A=e.Gw(i)).Dw(),e.Ah.push(A),A.lines&&0<A.lines.length){A.Rw=[];for(var g=0,I=A.lines.length;g<I;g++){for(var t=[],B=0,Q=A.lines[g].length;B<Q;B++){var C=[e.ox+e.scale*A.lines[g][B][0]-o.zS.center[0],e.oy-e.scale*A.lines[g][B][1]-o.zS.center[1]];t.push(C)}A.Rw.push(t)}}})}),this.uW(o),this.xw(o),this.zw(o),o},DistrictSourceWorker.prototype.uW=function(A){var i,g=[],I=[];for(i in A.layers)if(A.layers.hasOwnProperty(i))for(var t=A.layers[i],B=0;B<t.Ah.length;B+=1){var Q=t.Ah[B];if(3==+Q.type&&Q.Rw){for(var C=Q.Rw,e=[],o=0;o<C.length;o++)polyfill.kS.isClockwise(C[o])?e.push([o]):e.length&&e[e.length-1].push(o);for(var E=0;E<e.length;E++){var h=e[E];if(1<h.length){for(var a=[],l=[],n=0;n<h.length;n++){var r=C[h[n]];0<n&&a.push(l.length/2);for(var s=0;s<r.length;s++){var w=r[s];l.push(w[0],w[1])}}g.push({properties:Q.properties,path:l,LQ:a})}else{for(l=[],r=C[h[0]],s=0;s<r.length;s++){var c=r[s];l.push(c[0],c[1])}g.push({properties:Q.properties,path:l})}}}else if(3!==Q.type&&Q.Rw)for(var y=0;y<Q.Rw.length;y++)I.push({properties:Q.properties,path:Q.Rw[y]});this.cW(Q)}A.polygons=g,A.Dh=I,delete A.layers},DistrictSourceWorker.prototype.xw=function(A){if(!A||!A.$c){var i=new polyfill.LW;if(!A.$c&&(A.Uc=i,A.$c=new polyfill.J_,A.Dh))for(var g=0,I=A.Dh;g<I.length;g++){var t=I[g],B=JSON.stringify(t.properties),C=(Q=A.$c.g0(t.path,{X_:0,lineJoin:"round",lineCap:"butt"})).Iw,Q=Q.distance;0<C&&(i.add(B,0,C,0,22),t.distance=Q)}}},DistrictSourceWorker.prototype.zw=function(A){if(!A||!A.Dc){var i=new polyfill.LW;A.Oc=i,A.Dc=new polyfill.K_;for(var g=0,I=A.polygons;g<I.length;g++){var t=I[g],B=JSON.stringify(t.properties);0<(t=A.Dc.Nx(t.path,t.LQ))&&i.add(B,0,t,0,22)}}},DistrictSourceWorker.prototype.dW=function(A){switch(A){case 0:case 1:return"Nation_Border_China";case 2:return"Coastline_China";case 3:case 4:return"Province_Border_China";case 5:return"City_Border_China";case 6:return"County_Border_China";case 7:case 8:return"Nation_Border_Foreign";case 9:return"Coastline_Foreign";case 10:case 11:return"Nation_Border_Foreign";case 12:return"Province_Border_Foreign";default:return""}},DistrictSourceWorker.prototype.sW=function(code){return this.fW[code]||(this.fW[code]=eval("'"+code.replace(/\//g,"\\u")+"'")),this.fW[code]},DistrictSourceWorker.prototype.cW=function(A){A.properties.NAME_CHN&&(A.properties.NAME_CHN=this.sW(A.properties.NAME_CHN.trim())),A.properties.NAME_ENG&&(A.properties.NAME_ENG=A.properties.NAME_ENG.trim()),A.properties.level&&(A.properties.level=A.properties.level.trim()),A.properties.citycode&&A.properties.citycode.length&&(A.properties.citycode=A.properties.citycode.trim()),A.properties.type_=+A.properties.type,A.properties.feature_type_=+A.type,A.properties.type=this.dW(+A.properties.type)},DistrictSourceWorker}(),mbStyle={Hr:void 0,_r:{},kr:{"pedestrian-polygon":{width:128,height:128,x:0,y:0,pixelRatio:2,visible:!0},"turning-circle-outline":{width:92,height:92,x:128,y:0,pixelRatio:2,visible:!0},"turning-circle":{width:84,height:84,x:0,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-2":{width:40,height:80,x:84,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-3":{width:52,height:80,x:124,y:128,pixelRatio:2,visible:!0},"us-highway-business-2":{width:40,height:76,x:176,y:128,pixelRatio:2,visible:!0},"us-highway-business-3":{width:52,height:76,x:216,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-2":{width:40,height:76,x:268,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-3":{width:52,height:76,x:308,y:128,pixelRatio:2,visible:!0},"us-highway-truck-2":{width:40,height:76,x:360,y:128,pixelRatio:2,visible:!0},"us-highway-truck-3":{width:52,height:76,x:400,y:128,pixelRatio:2,visible:!0},"ae-f-route-3":{width:48,height:54,x:452,y:128,pixelRatio:2,visible:!0},"ae-s-route-4":{width:76,height:52,x:220,y:0,pixelRatio:2,visible:!0},"pe-national-2":{width:36,height:52,x:296,y:0,pixelRatio:2,visible:!0},"pe-national-3":{width:44,height:52,x:332,y:0,pixelRatio:2,visible:!0},"ae-national-3":{width:52,height:50,x:376,y:0,pixelRatio:2,visible:!0},"ae-national-4":{width:64,height:50,x:428,y:0,pixelRatio:2,visible:!0},"ae-d-route-3":{width:48,height:48,x:0,y:212,pixelRatio:2,visible:!0},"ae-d-route-4":{width:60,height:48,x:48,y:212,pixelRatio:2,visible:!0},"tw-provincial-2":{width:44,height:48,x:108,y:212,pixelRatio:2,visible:!0},"tw-provincial-3":{width:56,height:48,x:152,y:212,pixelRatio:2,visible:!0},"tw-provincial-expy-2":{width:44,height:48,x:208,y:212,pixelRatio:2,visible:!0},"tw-provincial-expy-3":{width:56,height:48,x:252,y:212,pixelRatio:2,visible:!0},"za-provincial-2":{width:48,height:48,x:308,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-2":{width:40,height:46,x:356,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-3":{width:52,height:46,x:396,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-4":{width:64,height:46,x:448,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-5":{width:76,height:46,x:0,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-2":{width:40,height:46,x:76,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-3":{width:52,height:46,x:116,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-4":{width:64,height:46,x:168,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-5":{width:76,height:46,x:232,y:260,pixelRatio:2,visible:!0},"br-federal-3":{width:52,height:44,x:308,y:260,pixelRatio:2,visible:!0},"hk-strategic-route-2":{width:36,height:44,x:360,y:260,pixelRatio:2,visible:!0},"in-national-2":{width:32,height:44,x:396,y:260,pixelRatio:2,visible:!0},"in-national-3":{width:40,height:44,x:428,y:260,pixelRatio:2,visible:!0},"in-national-4":{width:48,height:44,x:0,y:306,pixelRatio:2,visible:!0},"in-state-2":{width:32,height:44,x:48,y:306,pixelRatio:2,visible:!0},"in-state-3":{width:40,height:44,x:80,y:306,pixelRatio:2,visible:!0},"kr-natl-expy-2":{width:40,height:44,x:120,y:306,pixelRatio:2,visible:!0},"kr-natl-expy-3":{width:52,height:44,x:160,y:306,pixelRatio:2,visible:!0},"mx-federal-2":{width:36,height:44,x:212,y:306,pixelRatio:2,visible:!0},"mx-federal-3":{width:46,height:44,x:248,y:306,pixelRatio:2,visible:!0},"mx-federal-4":{width:56,height:44,x:294,y:306,pixelRatio:2,visible:!0},"mx-state-2":{width:36,height:44,x:350,y:306,pixelRatio:2,visible:!0},"mx-state-3":{width:46,height:44,x:386,y:306,pixelRatio:2,visible:!0},"mx-state-4":{width:56,height:44,x:432,y:306,pixelRatio:2,visible:!0},"pe-regional-3":{width:46,height:44,x:0,y:350,pixelRatio:2,visible:!0},"pe-regional-4":{width:56,height:44,x:46,y:350,pixelRatio:2,visible:!0},"tw-national-2":{width:42,height:44,x:102,y:350,pixelRatio:2,visible:!0},"us-interstate-2":{width:40,height:44,x:144,y:350,pixelRatio:2,visible:!0},"us-interstate-3":{width:52,height:44,x:184,y:350,pixelRatio:2,visible:!0},"us-interstate-4":{width:64,height:44,x:236,y:350,pixelRatio:2,visible:!0},"us-interstate-business-2":{width:40,height:44,x:300,y:350,pixelRatio:2,visible:!0},"us-interstate-business-3":{width:52,height:44,x:340,y:350,pixelRatio:2,visible:!0},"us-interstate-duplex-4":{width:64,height:44,x:392,y:350,pixelRatio:2,visible:!0},"us-interstate-duplex-5":{width:76,height:44,x:0,y:394,pixelRatio:2,visible:!0},"airfield-15":{width:42,height:42,x:456,y:350,pixelRatio:2,visible:!0},"airport-15":{width:42,height:42,x:76,y:394,pixelRatio:2,visible:!0},"alcohol-shop-15":{width:42,height:42,x:118,y:394,pixelRatio:2,visible:!0},"american-football-15":{width:42,height:42,x:160,y:394,pixelRatio:2,visible:!0},"amusement-park-15":{width:42,height:42,x:202,y:394,pixelRatio:2,visible:!0},"aquarium-15":{width:42,height:42,x:244,y:394,pixelRatio:2,visible:!0},"art-gallery-15":{width:42,height:42,x:286,y:394,pixelRatio:2,visible:!0},"attraction-15":{width:42,height:42,x:328,y:394,pixelRatio:2,visible:!0},"au-tourist-2":{width:40,height:42,x:370,y:394,pixelRatio:2,visible:!0},"au-tourist-3":{width:56,height:42,x:410,y:394,pixelRatio:2,visible:!0},"bakery-15":{width:42,height:42,x:466,y:394,pixelRatio:2,visible:!0},"bank-15":{width:42,height:42,x:468,y:260,pixelRatio:2,visible:!0},"bar-15":{width:42,height:42,x:0,y:438,pixelRatio:2,visible:!0},"basketball-15":{width:42,height:42,x:42,y:438,pixelRatio:2,visible:!0},"beach-15":{width:42,height:42,x:84,y:438,pixelRatio:2,visible:!0},"beer-15":{width:42,height:42,x:126,y:438,pixelRatio:2,visible:!0},"bicycle-15":{width:42,height:42,x:168,y:438,pixelRatio:2,visible:!0},"bowling-alley-15":{width:42,height:42,x:210,y:438,pixelRatio:2,visible:!0},"bridge-15":{width:42,height:42,x:252,y:438,pixelRatio:2,visible:!0},"cafe-15":{width:42,height:42,x:294,y:438,pixelRatio:2,visible:!0},"campsite-15":{width:42,height:42,x:336,y:438,pixelRatio:2,visible:!0},"car-15":{width:42,height:42,x:378,y:438,pixelRatio:2,visible:!0},"car-rental-15":{width:42,height:42,x:420,y:438,pixelRatio:2,visible:!0},"car-repair-15":{width:42,height:42,x:462,y:438,pixelRatio:2,visible:!0},"casino-15":{width:42,height:42,x:504,y:438,pixelRatio:2,visible:!0},"castle-15":{width:42,height:42,x:546,y:438,pixelRatio:2,visible:!0},"cemetery-15":{width:42,height:42,x:588,y:438,pixelRatio:2,visible:!0},"charging-station-15":{width:42,height:42,x:630,y:438,pixelRatio:2,visible:!0},"cinema-15":{width:42,height:42,x:672,y:438,pixelRatio:2,visible:!0},"clothing-store-15":{width:42,height:42,x:714,y:438,pixelRatio:2,visible:!0},"college-15":{width:42,height:42,x:756,y:438,pixelRatio:2,visible:!0},"communications-tower-15":{width:42,height:42,x:798,y:438,pixelRatio:2,visible:!0},"confectionery-15":{width:42,height:42,x:840,y:438,pixelRatio:2,visible:!0},"convenience-15":{width:42,height:42,x:882,y:438,pixelRatio:2,visible:!0},"dentist-15":{width:42,height:42,x:924,y:438,pixelRatio:2,visible:!0},"doctor-15":{width:42,height:42,x:966,y:438,pixelRatio:2,visible:!0},"dog-park-15":{width:42,height:42,x:488,y:306,pixelRatio:2,visible:!0},"drinking-water-15":{width:42,height:42,x:530,y:306,pixelRatio:2,visible:!0},"embassy-15":{width:42,height:42,x:572,y:306,pixelRatio:2,visible:!0},"farm-15":{width:42,height:42,x:614,y:306,pixelRatio:2,visible:!0},"fast-food-15":{width:42,height:42,x:656,y:306,pixelRatio:2,visible:!0},"fire-station-15":{width:42,height:42,x:698,y:306,pixelRatio:2,visible:!0},"fitness-centre-15":{width:42,height:42,x:740,y:306,pixelRatio:2,visible:!0},"fuel-15":{width:42,height:42,x:782,y:306,pixelRatio:2,visible:!0},"furniture-15":{width:42,height:42,x:824,y:306,pixelRatio:2,visible:!0},"garden-15":{width:42,height:42,x:866,y:306,pixelRatio:2,visible:!0},"globe-15":{width:42,height:42,x:908,y:306,pixelRatio:2,visible:!0},"golf-15":{width:42,height:42,x:950,y:306,pixelRatio:2,visible:!0},"grocery-15":{width:42,height:42,x:498,y:350,pixelRatio:2,visible:!0},"harbor-15":{width:42,height:42,x:540,y:350,pixelRatio:2,visible:!0},"hardware-15":{width:42,height:42,x:582,y:350,pixelRatio:2,visible:!0},"heliport-15":{width:42,height:42,x:624,y:350,pixelRatio:2,visible:!0},"horse-riding-15":{width:42,height:42,x:666,y:350,pixelRatio:2,visible:!0},"hospital-15":{width:42,height:42,x:708,y:350,pixelRatio:2,visible:!0},"ice-cream-15":{width:42,height:42,x:750,y:350,pixelRatio:2,visible:!0},"information-15":{width:42,height:42,x:792,y:350,pixelRatio:2,visible:!0},"jewelry-store-15":{width:42,height:42,x:834,y:350,pixelRatio:2,visible:!0},"laundry-15":{width:42,height:42,x:876,y:350,pixelRatio:2,visible:!0},"library-15":{width:42,height:42,x:918,y:350,pixelRatio:2,visible:!0},"lodging-15":{width:42,height:42,x:960,y:350,pixelRatio:2,visible:!0},"mobile-phone-15":{width:42,height:42,x:508,y:394,pixelRatio:2,visible:!0},"monument-15":{width:42,height:42,x:550,y:394,pixelRatio:2,visible:!0},"mountain-15":{width:42,height:42,x:592,y:394,pixelRatio:2,visible:!0},"museum-15":{width:42,height:42,x:634,y:394,pixelRatio:2,visible:!0},"music-15":{width:42,height:42,x:676,y:394,pixelRatio:2,visible:!0},"optician-15":{width:42,height:42,x:718,y:394,pixelRatio:2,visible:!0},"park-15":{width:42,height:42,x:760,y:394,pixelRatio:2,visible:!0},"parking-15":{width:42,height:42,x:802,y:394,pixelRatio:2,visible:!0},"parking-garage-15":{width:42,height:42,x:844,y:394,pixelRatio:2,visible:!0},"pharmacy-15":{width:42,height:42,x:886,y:394,pixelRatio:2,visible:!0},"picnic-site-15":{width:42,height:42,x:928,y:394,pixelRatio:2,visible:!0},"pitch-15":{width:42,height:42,x:970,y:394,pixelRatio:2,visible:!0},"place-of-worship-15":{width:42,height:42,x:510,y:260,pixelRatio:2,visible:!0},"playground-15":{width:42,height:42,x:552,y:260,pixelRatio:2,visible:!0},"police-15":{width:42,height:42,x:594,y:260,pixelRatio:2,visible:!0},"post-15":{width:42,height:42,x:636,y:260,pixelRatio:2,visible:!0},"prison-15":{width:42,height:42,x:678,y:260,pixelRatio:2,visible:!0},"ranger-station-15":{width:42,height:42,x:720,y:260,pixelRatio:2,visible:!0},"religious-buddhist-15":{width:42,height:42,x:762,y:260,pixelRatio:2,visible:!0},"religious-christian-15":{width:42,height:42,x:804,y:260,pixelRatio:2,visible:!0},"religious-jewish-15":{width:42,height:42,x:846,y:260,pixelRatio:2,visible:!0},"religious-muslim-15":{width:42,height:42,x:888,y:260,pixelRatio:2,visible:!0},"restaurant-15":{width:42,height:42,x:930,y:260,pixelRatio:2,visible:!0},"restaurant-noodle-15":{width:42,height:42,x:972,y:260,pixelRatio:2,visible:!0},"restaurant-pizza-15":{width:42,height:42,x:512,y:212,pixelRatio:2,visible:!0},"restaurant-seafood-15":{width:42,height:42,x:554,y:212,pixelRatio:2,visible:!0},"rocket-15":{width:42,height:42,x:596,y:212,pixelRatio:2,visible:!0},"school-15":{width:42,height:42,x:638,y:212,pixelRatio:2,visible:!0},"shoe-15":{width:42,height:42,x:680,y:212,pixelRatio:2,visible:!0},"shop-15":{width:42,height:42,x:722,y:212,pixelRatio:2,visible:!0},"skateboard-15":{width:42,height:42,x:764,y:212,pixelRatio:2,visible:!0},"slipway-15":{width:42,height:42,x:806,y:212,pixelRatio:2,visible:!0},"stadium-15":{width:42,height:42,x:848,y:212,pixelRatio:2,visible:!0},"suitcase-15":{width:42,height:42,x:890,y:212,pixelRatio:2,visible:!0},"swimming-15":{width:42,height:42,x:932,y:212,pixelRatio:2,visible:!0},"table-tennis-15":{width:42,height:42,x:974,y:212,pixelRatio:2,visible:!0},"tennis-15":{width:42,height:42,x:500,y:128,pixelRatio:2,visible:!0},"theatre-15":{width:42,height:42,x:542,y:128,pixelRatio:2,visible:!0},"toilet-15":{width:42,height:42,x:584,y:128,pixelRatio:2,visible:!0},"town-hall-15":{width:42,height:42,x:626,y:128,pixelRatio:2,visible:!0},"veterinary-15":{width:42,height:42,x:668,y:128,pixelRatio:2,visible:!0},"viewpoint-15":{width:42,height:42,x:710,y:128,pixelRatio:2,visible:!0},"volcano-15":{width:42,height:42,x:752,y:128,pixelRatio:2,visible:!0},"volleyball-15":{width:42,height:42,x:794,y:128,pixelRatio:2,visible:!0},"watch-15":{width:42,height:42,x:836,y:128,pixelRatio:2,visible:!0},"waterfall-15":{width:42,height:42,x:878,y:128,pixelRatio:2,visible:!0},"watermill-15":{width:42,height:42,x:920,y:128,pixelRatio:2,visible:!0},"windmill-15":{width:42,height:42,x:962,y:128,pixelRatio:2,visible:!0},"zoo-15":{width:42,height:42,x:492,y:0,pixelRatio:2,visible:!0},"au-national-highway-2":{width:40,height:40,x:534,y:0,pixelRatio:2,visible:!0},"au-national-highway-3":{width:52,height:40,x:574,y:0,pixelRatio:2,visible:!0},"au-national-route-2":{width:40,height:40,x:626,y:0,pixelRatio:2,visible:!0},"au-national-route-3":{width:52,height:40,x:666,y:0,pixelRatio:2,visible:!0},"au-national-route-4":{width:64,height:40,x:718,y:0,pixelRatio:2,visible:!0},"au-national-route-5":{width:76,height:40,x:782,y:0,pixelRatio:2,visible:!0},"au-national-route-6":{width:86,height:40,x:858,y:0,pixelRatio:2,visible:!0},"au-state-2":{width:36,height:40,x:944,y:0,pixelRatio:2,visible:!0},"au-state-3":{width:46,height:40,x:0,y:480,pixelRatio:2,visible:!0},"au-state-4":{width:58,height:40,x:46,y:480,pixelRatio:2,visible:!0},"au-state-5":{width:68,height:40,x:104,y:480,pixelRatio:2,visible:!0},"au-state-6":{width:78,height:40,x:172,y:480,pixelRatio:2,visible:!0},"br-state-2":{width:40,height:40,x:250,y:480,pixelRatio:2,visible:!0},"br-state-3":{width:56,height:40,x:290,y:480,pixelRatio:2,visible:!0},"circle-white-2":{width:40,height:40,x:346,y:480,pixelRatio:2,visible:!0},"circle-white-3":{width:52,height:40,x:386,y:480,pixelRatio:2,visible:!0},"circle-white-4":{width:64,height:40,x:438,y:480,pixelRatio:2,visible:!0},"hu-main-2":{width:40,height:40,x:502,y:480,pixelRatio:2,visible:!0},"hu-main-3":{width:52,height:40,x:542,y:480,pixelRatio:2,visible:!0},"hu-main-4":{width:64,height:40,x:594,y:480,pixelRatio:2,visible:!0},"hu-main-5":{width:76,height:40,x:658,y:480,pixelRatio:2,visible:!0},"hu-motorway-2":{width:40,height:40,x:734,y:480,pixelRatio:2,visible:!0},"hu-motorway-3":{width:52,height:40,x:774,y:480,pixelRatio:2,visible:!0},"marker-15":{width:24,height:40,x:826,y:480,pixelRatio:2,visible:!0},"nz-state-2":{width:36,height:40,x:850,y:480,pixelRatio:2,visible:!0},"nz-state-3":{width:46,height:40,x:886,y:480,pixelRatio:2,visible:!0},"ro-communal-2":{width:40,height:40,x:932,y:480,pixelRatio:2,visible:!0},"ro-communal-3":{width:52,height:40,x:972,y:480,pixelRatio:2,visible:!0},"ro-communal-4":{width:64,height:40,x:0,y:520,pixelRatio:2,visible:!0},"ro-county-3":{width:52,height:40,x:64,y:520,pixelRatio:2,visible:!0},"ro-county-4":{width:64,height:40,x:116,y:520,pixelRatio:2,visible:!0},"ro-national-2":{width:40,height:40,x:180,y:520,pixelRatio:2,visible:!0},"ro-national-3":{width:52,height:40,x:220,y:520,pixelRatio:2,visible:!0},"tw-county-township-2":{width:40,height:40,x:272,y:520,pixelRatio:2,visible:!0},"tw-county-township-3":{width:52,height:40,x:312,y:520,pixelRatio:2,visible:!0},"tw-county-township-4":{width:64,height:40,x:364,y:520,pixelRatio:2,visible:!0},"tw-county-township-5":{width:76,height:40,x:428,y:520,pixelRatio:2,visible:!0},"tw-county-township-6":{width:88,height:40,x:504,y:520,pixelRatio:2,visible:!0},"us-bia-2":{width:40,height:40,x:592,y:520,pixelRatio:2,visible:!0},"us-bia-3":{width:52,height:40,x:632,y:520,pixelRatio:2,visible:!0},"us-bia-4":{width:60,height:40,x:684,y:520,pixelRatio:2,visible:!0},"us-highway-2":{width:40,height:40,x:744,y:520,pixelRatio:2,visible:!0},"us-highway-3":{width:52,height:40,x:784,y:520,pixelRatio:2,visible:!0},"us-highway-4":{width:64,height:40,x:836,y:520,pixelRatio:2,visible:!0},"us-highway-alternate-2":{width:40,height:40,x:900,y:520,pixelRatio:2,visible:!0},"us-highway-alternate-3":{width:52,height:40,x:940,y:520,pixelRatio:2,visible:!0},"us-highway-duplex-3":{width:52,height:40,x:0,y:560,pixelRatio:2,visible:!0},"us-highway-duplex-4":{width:64,height:40,x:52,y:560,pixelRatio:2,visible:!0},"us-highway-duplex-5":{width:76,height:40,x:116,y:560,pixelRatio:2,visible:!0},"za-national-2":{width:40,height:40,x:192,y:560,pixelRatio:2,visible:!0},"za-national-3":{width:56,height:40,x:232,y:560,pixelRatio:2,visible:!0},"barcelona-metro":{width:38,height:38,x:288,y:560,pixelRatio:2,visible:!0},"boston-t":{width:38,height:38,x:326,y:560,pixelRatio:2,visible:!0},"de-s-bahn":{width:38,height:38,x:364,y:560,pixelRatio:2,visible:!0},"de-s-bahn.de-u-bahn":{width:70,height:38,x:402,y:560,pixelRatio:2,visible:!0},"delhi-metro":{width:38,height:38,x:472,y:560,pixelRatio:2,visible:!0},"kiev-metro":{width:38,height:38,x:510,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-2":{width:40,height:38,x:548,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-3":{width:52,height:38,x:588,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-4":{width:64,height:38,x:640,y:560,pixelRatio:2,visible:!0},"madrid-metro":{width:38,height:38,x:704,y:560,pixelRatio:2,visible:!0},"new-york-subway":{width:38,height:38,x:742,y:560,pixelRatio:2,visible:!0},"oslo-metro":{width:38,height:38,x:780,y:560,pixelRatio:2,visible:!0},"paris-metro":{width:38,height:38,x:818,y:560,pixelRatio:2,visible:!0},"paris-metro.paris-rer":{width:74,height:38,x:856,y:560,pixelRatio:2,visible:!0},"paris-rer":{width:38,height:38,x:930,y:560,pixelRatio:2,visible:!0},"paris-rer.paris-transilien":{width:70,height:38,x:0,y:600,pixelRatio:2,visible:!0},"road-closure":{width:38,height:38,x:70,y:600,pixelRatio:2,visible:!0},"stockholm-metro":{width:38,height:38,x:108,y:600,pixelRatio:2,visible:!0},"taipei-metro":{width:38,height:38,x:146,y:600,pixelRatio:2,visible:!0},"vienna-u-bahn":{width:38,height:38,x:184,y:600,pixelRatio:2,visible:!0},"kr-natl-hwy-2":{width:44,height:36,x:222,y:600,pixelRatio:2,visible:!0},"airfield-11":{width:34,height:34,x:266,y:600,pixelRatio:2,visible:!0},"airport-11":{width:34,height:34,x:300,y:600,pixelRatio:2,visible:!0},"alcohol-shop-11":{width:34,height:34,x:334,y:600,pixelRatio:2,visible:!0},"american-football-11":{width:34,height:34,x:368,y:600,pixelRatio:2,visible:!0},"amusement-park-11":{width:34,height:34,x:402,y:600,pixelRatio:2,visible:!0},"aquarium-11":{width:34,height:34,x:436,y:600,pixelRatio:2,visible:!0},"art-gallery-11":{width:34,height:34,x:470,y:600,pixelRatio:2,visible:!0},"attraction-11":{width:34,height:34,x:504,y:600,pixelRatio:2,visible:!0},"bakery-11":{width:34,height:34,x:538,y:600,pixelRatio:2,visible:!0},"bank-11":{width:34,height:34,x:572,y:600,pixelRatio:2,visible:!0},"bar-11":{width:34,height:34,x:606,y:600,pixelRatio:2,visible:!0},"basketball-11":{width:34,height:34,x:640,y:600,pixelRatio:2,visible:!0},"beach-11":{width:34,height:34,x:674,y:600,pixelRatio:2,visible:!0},"beer-11":{width:34,height:34,x:708,y:600,pixelRatio:2,visible:!0},"bicycle-11":{width:34,height:34,x:742,y:600,pixelRatio:2,visible:!0},"bicycle-share":{width:34,height:34,x:776,y:600,pixelRatio:2,visible:!0},"bowling-alley-11":{width:34,height:34,x:810,y:600,pixelRatio:2,visible:!0},"bridge-11":{width:34,height:34,x:844,y:600,pixelRatio:2,visible:!0},bus:{width:34,height:34,x:878,y:600,pixelRatio:2,visible:!0},"cafe-11":{width:34,height:34,x:912,y:600,pixelRatio:2,visible:!0},"campsite-11":{width:34,height:34,x:946,y:600,pixelRatio:2,visible:!0},"car-11":{width:34,height:34,x:980,y:600,pixelRatio:2,visible:!0},"car-rental-11":{width:34,height:34,x:968,y:560,pixelRatio:2,visible:!0},"car-repair-11":{width:34,height:34,x:980,y:0,pixelRatio:2,visible:!0},"casino-11":{width:34,height:34,x:0,y:638,pixelRatio:2,visible:!0},"castle-11":{width:34,height:34,x:34,y:638,pixelRatio:2,visible:!0},"cemetery-11":{width:34,height:34,x:68,y:638,pixelRatio:2,visible:!0},"charging-station-11":{width:34,height:34,x:102,y:638,pixelRatio:2,visible:!0},"chongqing-rail-transit":{width:50,height:34,x:136,y:638,pixelRatio:2,visible:!0},"cinema-11":{width:34,height:34,x:186,y:638,pixelRatio:2,visible:!0},"clothing-store-11":{width:34,height:34,x:220,y:638,pixelRatio:2,visible:!0},"college-11":{width:34,height:34,x:254,y:638,pixelRatio:2,visible:!0},"communications-tower-11":{width:34,height:34,x:288,y:638,pixelRatio:2,visible:!0},"confectionery-11":{width:34,height:34,x:322,y:638,pixelRatio:2,visible:!0},"convenience-11":{width:34,height:34,x:356,y:638,pixelRatio:2,visible:!0},"de-u-bahn":{width:34,height:34,x:390,y:638,pixelRatio:2,visible:!0},"dentist-11":{width:34,height:34,x:424,y:638,pixelRatio:2,visible:!0},"doctor-11":{width:34,height:34,x:458,y:638,pixelRatio:2,visible:!0},"dog-park-11":{width:34,height:34,x:492,y:638,pixelRatio:2,visible:!0},"drinking-water-11":{width:34,height:34,x:526,y:638,pixelRatio:2,visible:!0},"embassy-11":{width:34,height:34,x:560,y:638,pixelRatio:2,visible:!0},entrance:{width:34,height:34,x:594,y:638,pixelRatio:2,visible:!0},"farm-11":{width:34,height:34,x:628,y:638,pixelRatio:2,visible:!0},"fast-food-11":{width:34,height:34,x:662,y:638,pixelRatio:2,visible:!0},ferry:{width:34,height:34,x:696,y:638,pixelRatio:2,visible:!0},"fire-station-11":{width:34,height:34,x:730,y:638,pixelRatio:2,visible:!0},"fitness-centre-11":{width:34,height:34,x:764,y:638,pixelRatio:2,visible:!0},"fuel-11":{width:34,height:34,x:798,y:638,pixelRatio:2,visible:!0},"furniture-11":{width:34,height:34,x:832,y:638,pixelRatio:2,visible:!0},"garden-11":{width:34,height:34,x:866,y:638,pixelRatio:2,visible:!0},"globe-11":{width:34,height:34,x:900,y:638,pixelRatio:2,visible:!0},"golf-11":{width:34,height:34,x:934,y:638,pixelRatio:2,visible:!0},"grocery-11":{width:34,height:34,x:968,y:638,pixelRatio:2,visible:!0},"harbor-11":{width:34,height:34,x:0,y:672,pixelRatio:2,visible:!0},"hardware-11":{width:34,height:34,x:34,y:672,pixelRatio:2,visible:!0},"heliport-11":{width:34,height:34,x:68,y:672,pixelRatio:2,visible:!0},"hong-kong-mtr":{width:38,height:34,x:102,y:672,pixelRatio:2,visible:!0},"horse-riding-11":{width:34,height:34,x:140,y:672,pixelRatio:2,visible:!0},"hospital-11":{width:34,height:34,x:174,y:672,pixelRatio:2,visible:!0},"ice-cream-11":{width:34,height:34,x:208,y:672,pixelRatio:2,visible:!0},"information-11":{width:34,height:34,x:242,y:672,pixelRatio:2,visible:!0},"jewelry-store-11":{width:34,height:34,x:276,y:672,pixelRatio:2,visible:!0},"laundry-11":{width:34,height:34,x:310,y:672,pixelRatio:2,visible:!0},"library-11":{width:34,height:34,x:344,y:672,pixelRatio:2,visible:!0},"lodging-11":{width:34,height:34,x:378,y:672,pixelRatio:2,visible:!0},"marker-11":{width:24,height:34,x:412,y:672,pixelRatio:2,visible:!0},"mexico-city-metro":{width:34,height:34,x:436,y:672,pixelRatio:2,visible:!0},"milan-metro":{width:34,height:34,x:470,y:672,pixelRatio:2,visible:!0},"mobile-phone-11":{width:34,height:34,x:504,y:672,pixelRatio:2,visible:!0},"monument-11":{width:34,height:34,x:538,y:672,pixelRatio:2,visible:!0},"moscow-metro":{width:34,height:34,x:572,y:672,pixelRatio:2,visible:!0},"mountain-11":{width:34,height:34,x:606,y:672,pixelRatio:2,visible:!0},"museum-11":{width:34,height:34,x:640,y:672,pixelRatio:2,visible:!0},"music-11":{width:34,height:34,x:674,y:672,pixelRatio:2,visible:!0},"optician-11":{width:34,height:34,x:708,y:672,pixelRatio:2,visible:!0},"osaka-subway":{width:40,height:34,x:742,y:672,pixelRatio:2,visible:!0},"paris-transilien":{width:34,height:34,x:782,y:672,pixelRatio:2,visible:!0},"park-11":{width:34,height:34,x:816,y:672,pixelRatio:2,visible:!0},"parking-11":{width:34,height:34,x:850,y:672,pixelRatio:2,visible:!0},"parking-garage-11":{width:34,height:34,x:884,y:672,pixelRatio:2,visible:!0},"pharmacy-11":{width:34,height:34,x:918,y:672,pixelRatio:2,visible:!0},"philadelphia-septa":{width:38,height:34,x:952,y:672,pixelRatio:2,visible:!0},"picnic-site-11":{width:34,height:34,x:990,y:672,pixelRatio:2,visible:!0},"pitch-11":{width:34,height:34,x:0,y:706,pixelRatio:2,visible:!0},"place-of-worship-11":{width:34,height:34,x:34,y:706,pixelRatio:2,visible:!0},"playground-11":{width:34,height:34,x:68,y:706,pixelRatio:2,visible:!0},"police-11":{width:34,height:34,x:102,y:706,pixelRatio:2,visible:!0},"post-11":{width:34,height:34,x:136,y:706,pixelRatio:2,visible:!0},"prison-11":{width:34,height:34,x:170,y:706,pixelRatio:2,visible:!0},rail:{width:34,height:34,x:204,y:706,pixelRatio:2,visible:!0},"rail-light":{width:34,height:34,x:238,y:706,pixelRatio:2,visible:!0},"rail-metro":{width:34,height:34,x:272,y:706,pixelRatio:2,visible:!0},"ranger-station-11":{width:34,height:34,x:306,y:706,pixelRatio:2,visible:!0},"religious-buddhist-11":{width:34,height:34,x:340,y:706,pixelRatio:2,visible:!0},"religious-christian-11":{width:34,height:34,x:374,y:706,pixelRatio:2,visible:!0},"religious-jewish-11":{width:34,height:34,x:408,y:706,pixelRatio:2,visible:!0},"religious-muslim-11":{width:34,height:34,x:442,y:706,pixelRatio:2,visible:!0},"restaurant-11":{width:34,height:34,x:476,y:706,pixelRatio:2,visible:!0},"restaurant-noodle-11":{width:34,height:34,x:510,y:706,pixelRatio:2,visible:!0},"restaurant-pizza-11":{width:34,height:34,x:544,y:706,pixelRatio:2,visible:!0},"restaurant-seafood-11":{width:34,height:34,x:578,y:706,pixelRatio:2,visible:!0},"rocket-11":{width:34,height:34,x:612,y:706,pixelRatio:2,visible:!0},"san-francisco-bart":{width:34,height:34,x:646,y:706,pixelRatio:2,visible:!0},"school-11":{width:34,height:34,x:680,y:706,pixelRatio:2,visible:!0},"shoe-11":{width:34,height:34,x:714,y:706,pixelRatio:2,visible:!0},"shop-11":{width:34,height:34,x:748,y:706,pixelRatio:2,visible:!0},"singapore-mrt":{width:34,height:34,x:782,y:706,pixelRatio:2,visible:!0},"skateboard-11":{width:34,height:34,x:816,y:706,pixelRatio:2,visible:!0},"slipway-11":{width:34,height:34,x:850,y:706,pixelRatio:2,visible:!0},"stadium-11":{width:34,height:34,x:884,y:706,pixelRatio:2,visible:!0},"suitcase-11":{width:34,height:34,x:918,y:706,pixelRatio:2,visible:!0},"swimming-11":{width:34,height:34,x:952,y:706,pixelRatio:2,visible:!0},"table-tennis-11":{width:34,height:34,x:986,y:706,pixelRatio:2,visible:!0},"tennis-11":{width:34,height:34,x:0,y:740,pixelRatio:2,visible:!0},"theatre-11":{width:34,height:34,x:34,y:740,pixelRatio:2,visible:!0},"toilet-11":{width:34,height:34,x:68,y:740,pixelRatio:2,visible:!0},"tokyo-metro":{width:34,height:34,x:102,y:740,pixelRatio:2,visible:!0},"town-hall-11":{width:34,height:34,x:136,y:740,pixelRatio:2,visible:!0},"traffic-signal":{width:16,height:34,x:1002,y:638,pixelRatio:2,visible:!0},"veterinary-11":{width:34,height:34,x:170,y:740,pixelRatio:2,visible:!0},"viewpoint-11":{width:34,height:34,x:204,y:740,pixelRatio:2,visible:!0},"volcano-11":{width:34,height:34,x:238,y:740,pixelRatio:2,visible:!0},"volleyball-11":{width:34,height:34,x:272,y:740,pixelRatio:2,visible:!0},"washington-metro":{width:34,height:34,x:306,y:740,pixelRatio:2,visible:!0},"watch-11":{width:34,height:34,x:340,y:740,pixelRatio:2,visible:!0},"waterfall-11":{width:34,height:34,x:374,y:740,pixelRatio:2,visible:!0},"watermill-11":{width:34,height:34,x:408,y:740,pixelRatio:2,visible:!0},"windmill-11":{width:34,height:34,x:442,y:740,pixelRatio:2,visible:!0},"zoo-11":{width:34,height:34,x:476,y:740,pixelRatio:2,visible:!0},"ch-motorway-2":{width:44,height:32,x:510,y:740,pixelRatio:2,visible:!0},"ch-motorway-3":{width:56,height:32,x:554,y:740,pixelRatio:2,visible:!0},"de-motorway-2":{width:44,height:32,x:610,y:740,pixelRatio:2,visible:!0},"de-motorway-3":{width:56,height:32,x:654,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr":{width:72,height:32,x:710,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-tfl-rail.london-underground":{width:186,height:32,x:782,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-underground":{width:148,height:32,x:0,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-underground":{width:110,height:32,x:148,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground":{width:72,height:32,x:258,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-tfl-rail.london-underground":{width:148,height:32,x:330,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-underground":{width:110,height:32,x:478,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail":{width:72,height:32,x:588,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-overground":{width:110,height:32,x:660,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-underground":{width:110,height:32,x:770,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-underground":{width:72,height:32,x:880,y:774,pixelRatio:2,visible:!0},"gr-motorway-2":{width:44,height:32,x:952,y:774,pixelRatio:2,visible:!0},"gr-motorway-3":{width:56,height:32,x:968,y:740,pixelRatio:2,visible:!0},"gr-motorway-4":{width:68,height:32,x:0,y:806,pixelRatio:2,visible:!0},"hr-motorway-3":{width:56,height:32,x:68,y:806,pixelRatio:2,visible:!0},"hr-motorway-4":{width:68,height:32,x:124,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-2":{width:40,height:32,x:192,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-3":{width:52,height:32,x:232,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-4":{width:64,height:32,x:284,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-5":{width:76,height:32,x:348,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-6":{width:88,height:32,x:424,y:806,pixelRatio:2,visible:!0},"london-dlr":{width:40,height:32,x:512,y:806,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail":{width:78,height:32,x:552,y:806,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail.london-underground":{width:116,height:32,x:630,y:806,pixelRatio:2,visible:!0},"london-dlr.london-underground":{width:78,height:32,x:746,y:806,pixelRatio:2,visible:!0},"london-overground":{width:40,height:32,x:824,y:806,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail":{width:78,height:32,x:864,y:806,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail.london-underground":{width:116,height:32,x:0,y:838,pixelRatio:2,visible:!0},"london-overground.london-underground":{width:78,height:32,x:942,y:806,pixelRatio:2,visible:!0},"london-tfl-rail":{width:40,height:32,x:116,y:838,pixelRatio:2,visible:!0},"london-tfl-rail.london-underground":{width:78,height:32,x:156,y:838,pixelRatio:2,visible:!0},"london-underground":{width:40,height:32,x:234,y:838,pixelRatio:2,visible:!0},"si-motorway-2":{width:44,height:32,x:274,y:838,pixelRatio:2,visible:!0},wetland:{width:32,height:32,x:318,y:838,pixelRatio:2,visible:!0},"level-crossing":{width:30,height:30,x:350,y:838,pixelRatio:2,visible:!0},"default-2":{width:40,height:28,x:380,y:838,pixelRatio:2,visible:!0},"default-3":{width:52,height:28,x:420,y:838,pixelRatio:2,visible:!0},"default-4":{width:64,height:28,x:472,y:838,pixelRatio:2,visible:!0},"default-5":{width:76,height:28,x:536,y:838,pixelRatio:2,visible:!0},"default-6":{width:88,height:28,x:612,y:838,pixelRatio:2,visible:!0},"gb-national-rail":{width:34,height:28,x:700,y:838,pixelRatio:2,visible:!0},"motorway-exit-1":{width:40,height:28,x:734,y:838,pixelRatio:2,visible:!0},"motorway-exit-2":{width:40,height:28,x:774,y:838,pixelRatio:2,visible:!0},"motorway-exit-3":{width:52,height:28,x:814,y:838,pixelRatio:2,visible:!0},"motorway-exit-4":{width:64,height:28,x:866,y:838,pixelRatio:2,visible:!0},"motorway-exit-5":{width:76,height:28,x:930,y:838,pixelRatio:2,visible:!0},"motorway-exit-6":{width:88,height:28,x:0,y:870,pixelRatio:2,visible:!0},"motorway-exit-7":{width:100,height:28,x:88,y:870,pixelRatio:2,visible:!0},"motorway-exit-8":{width:112,height:28,x:188,y:870,pixelRatio:2,visible:!0},"motorway-exit-9":{width:124,height:28,x:300,y:870,pixelRatio:2,visible:!0},"rectangle-blue-2":{width:40,height:28,x:424,y:870,pixelRatio:2,visible:!0},"rectangle-blue-3":{width:52,height:28,x:464,y:870,pixelRatio:2,visible:!0},"rectangle-blue-4":{width:64,height:28,x:516,y:870,pixelRatio:2,visible:!0},"rectangle-green-2":{width:40,height:28,x:580,y:870,pixelRatio:2,visible:!0},"rectangle-green-3":{width:52,height:28,x:620,y:870,pixelRatio:2,visible:!0},"rectangle-green-4":{width:64,height:28,x:672,y:870,pixelRatio:2,visible:!0},"rectangle-green-5":{width:76,height:28,x:736,y:870,pixelRatio:2,visible:!0},"rectangle-green-6":{width:88,height:28,x:812,y:870,pixelRatio:2,visible:!0},"rectangle-red-2":{width:40,height:28,x:900,y:870,pixelRatio:2,visible:!0},"rectangle-red-3":{width:52,height:28,x:940,y:870,pixelRatio:2,visible:!0},"rectangle-red-4":{width:64,height:28,x:0,y:898,pixelRatio:2,visible:!0},"rectangle-white-2":{width:40,height:28,x:64,y:898,pixelRatio:2,visible:!0},"rectangle-white-3":{width:52,height:28,x:104,y:898,pixelRatio:2,visible:!0},"rectangle-white-4":{width:64,height:28,x:156,y:898,pixelRatio:2,visible:!0},"rectangle-white-5":{width:76,height:28,x:220,y:898,pixelRatio:2,visible:!0},"rectangle-white-6":{width:88,height:28,x:296,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-2":{width:40,height:28,x:384,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-3":{width:52,height:28,x:424,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-4":{width:64,height:28,x:476,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-5":{width:76,height:28,x:540,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-6":{width:88,height:28,x:616,y:898,pixelRatio:2,visible:!0},"border-dot-13":{width:26,height:26,x:992,y:870,pixelRatio:2,visible:!0},"dot-10":{width:22,height:22,x:704,y:898,pixelRatio:2,visible:!0},"dot-11":{width:22,height:22,x:726,y:898,pixelRatio:2,visible:!0},"dot-9":{width:22,height:22,x:748,y:898,pixelRatio:2,visible:!0},cliff:{width:16,height:14,x:770,y:898,pixelRatio:2,visible:!0},"oneway-large":{width:28,height:12,x:786,y:898,pixelRatio:2,visible:!0},"oneway-white-large":{width:28,height:12,x:814,y:898,pixelRatio:2,visible:!0},"oneway-small":{width:22,height:10,x:842,y:898,pixelRatio:2,visible:!0},"oneway-white-small":{width:22,height:10,x:864,y:898,pixelRatio:2,visible:!0}},VU:{"Latin-1 Supplement":function(A){return 128<=A&&A<=255},Arabic:function(A){return 1536<=A&&A<=1791},"Arabic Supplement":function(A){return 1872<=A&&A<=1919},"Arabic Extended-A":function(A){return 2208<=A&&A<=2303},"Hangul Jamo":function(A){return 4352<=A&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return 5120<=A&&A<=5759},Khmer:function(A){return 6016<=A&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return 6320<=A&&A<=6399},"General Punctuation":function(A){return 8192<=A&&A<=8303},"Letterlike Symbols":function(A){return 8448<=A&&A<=8527},"Number Forms":function(A){return 8528<=A&&A<=8591},"Miscellaneous Technical":function(A){return 8960<=A&&A<=9215},"Control Pictures":function(A){return 9216<=A&&A<=9279},"Optical Character Recognition":function(A){return 9280<=A&&A<=9311},"Enclosed Alphanumerics":function(A){return 9312<=A&&A<=9471},"Geometric Shapes":function(A){return 9632<=A&&A<=9727},"Miscellaneous Symbols":function(A){return 9728<=A&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return 11008<=A&&A<=11263},"CJK Radicals Supplement":function(A){return 11904<=A&&A<=12031},"Kangxi Radicals":function(A){return 12032<=A&&A<=12255},"Ideographic Description Characters":function(A){return 12272<=A&&A<=12287},"CJK Symbols and Punctuation":function(A){return 12288<=A&&A<=12351},Hiragana:function(A){return 12352<=A&&A<=12447},Katakana:function(A){return 12448<=A&&A<=12543},Bopomofo:function(A){return 12544<=A&&A<=12591},"Hangul Compatibility Jamo":function(A){return 12592<=A&&A<=12687},Kanbun:function(A){return 12688<=A&&A<=12703},"Bopomofo Extended":function(A){return 12704<=A&&A<=12735},"CJK Strokes":function(A){return 12736<=A&&A<=12783},"Katakana Phonetic Extensions":function(A){return 12784<=A&&A<=12799},"Enclosed CJK Letters and Months":function(A){return 12800<=A&&A<=13055},"CJK Compatibility":function(A){return 13056<=A&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return 13312<=A&&A<=19903},"Yijing Hexagram Symbols":function(A){return 19904<=A&&A<=19967},"CJK Unified Ideographs":function(A){return 19968<=A&&A<=40959},"Yi Syllables":function(A){return 40960<=A&&A<=42127},"Yi Radicals":function(A){return 42128<=A&&A<=42191},"Hangul Jamo Extended-A":function(A){return 43360<=A&&A<=43391},"Hangul Syllables":function(A){return 44032<=A&&A<=55215},"Hangul Jamo Extended-B":function(A){return 55216<=A&&A<=55295},"Private Use Area":function(A){return 57344<=A&&A<=63743},"CJK Compatibility Ideographs":function(A){return 63744<=A&&A<=64255},"Arabic Presentation Forms-A":function(A){return 64336<=A&&A<=65023},"Vertical Forms":function(A){return 65040<=A&&A<=65055},"CJK Compatibility Forms":function(A){return 65072<=A&&A<=65103},"Small Form Variants":function(A){return 65104<=A&&A<=65135},"Arabic Presentation Forms-B":function(A){return 65136<=A&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return 65280<=A&&A<=65519}},layers:[],styles:{},Mr:!0,Rr:function(A,i){var e,C=this;if(!A)return!1;e=A,this.styles.zr=[];for(var o=this,g=0,I=e.length;g<I;g+=1)!function(A){var t,B,g=e[A];g.zIndex=A,"line"===g.type&&(g.paint["line-width"]=void 0===g.paint["line-width"]?1:g.paint["line-width"]),g.paint["line-width"]&&(i=g.paint["line-width"],Q=0,g.paint["line-gap-width"]&&(Q=g.paint["line-gap-width"]),t=i,B=Q,o.styles.zr.push(i=function(g,i){var I=0;return B&&(I=C.HU(i,B,g)),g=C.HU(i,t,g),I?2*g+I:g}),g.paint["line-width"]=i,g.paint["line-width"].Cr=o.styles.zr.length-1,delete g.paint["line-gap-width"]);var i,I,Q=g["source-layer"];Q?(o.styles[Q]||(o.styles[Q]=[]),(i=g.filter)&&(g.filters=[],(I=function(A){if("all"!==A[0])"in"===A[0]||"!in"===A[0]?g.filters.push([A[0],A[1],A.slice(2)]):g.filters.push(A);else for(var i=1;i<A.length;i+=1)I(A[i])})(i)),o.styles[Q].push(g)):o.styles[g.id]=g}(g);this.backgroundColor=this.HU({},this.styles.land.paint["background-color"],12)},Ar:function(A,i,g,I){return I-=g,g=A-g,0==I?0:1===i?g/I:(Math.pow(i,g)-1)/(Math.pow(i,I)-1)},Sr:function(A,i,g){var I=i.base||1,t=i.stops;if(g<=t[0][0])return this.HU(A,t[0][1],g);if(g>=t[t.length-1][0])return this.HU(A,t[t.length-1][1],g);for(var B=1,Q=t.length;B<Q;B+=1)if(g>t[B-1][0]&&g<=t[B][0]){var C=this.HU(A,t[B-1][1],g),e=this.HU(A,t[B][1],g);if(C instanceof Array){for(var o=new Array(C.length),E=0;E<C.length;E+=1){var h=e[E]-C[E];o[E]=C[E]+this.Ar(g,I,t[B-1][0])*h}return o}return"number"!=typeof C?C:(h=e-C,C+this.Ar(g,I,t[B-1][0],t[B][0])*h)}},Lr:function(A,i){if(A){var g=void 0;if("string"==typeof A)g=A;else if(A.stops)for(var I=0,t=A.stops.length;I<t;I+=1){if(A.stops[I][0]>i){g=A.stops[I][1];break}g=A.stops[t-1][1]}else if("interpolate"===A[0]){for(var B=A.slice(3),Q=[],C=0;C<B.length;C+=2)Q.push([B[C],B[C+1]]);for(I=0,t=Q.length;I<t;I+=1){if(Q[I][0]>i){g=Q[I][1];break}g=Q[t-1][1]}}return g}},Tr:function(A,i){if(A){var g=void 0;if(A.stops)for(var I=0,t=A.stops.length;I<t;I+=1){if(A.stops[I][0]>i){g=A.stops[I][1];break}g=A.stops[t-1][1]}else g=A;return g}},Ir:function(A,i){var g;if(void 0===A)return 0;if("function"==typeof A)return A(i);if("number"!=typeof A){if(A.stops)g=this.Sr(A.base||1,A.stops,i);else if("interpolate"===A[0]){for(var I=A.slice(3),t=[],B=0;B<I.length;B+=2)t.push([I[B],I[B+1]]);g=this.Sr(1,t,i)}}else g=A;return g},Dr:function(A,i,g,I){var t;if(void 0===i)return i;i instanceof Array?t=i:i.stops&&(t=this.Sr(A,i,g));var B=new Array(t.length);return t.forEach(function(A,i){B[i]=A*I}),B},Pr:function(A,i,g){for(var I,t,B,Q,C,e,o,E,h,a,l,n,r,s="butt",w="butt",c="solid",y="solid",x=0,p=0,d=0;d<A.length;d+=1)"line"===A[d].type&&(void 0!==(B=A[d]).minzoom&&B.minzoom>i||void 0!==B.maxzoom&&B.maxzoom<i||(I=B.paint,t=B.layout,void 0===(B=I["line-opacity"])&&(B=1),(B=this.HU(g,B,i))&&(this.WU(A[d].id,"-low")?(Q=B,A[d].id,r=I["line-color"],C=this.HU(g,r,i),s=this.HU(g,t["line-cap"]||s,i),e=this.HU(g,I["line-width"],i),o=I["line-width"].Cr,this.Dr(g,I["line-dasharray"],i,e)&&(c="dashed"),p=Math.max(p,A[d].zIndex)):this.WU(A[d].id,"-case")||this.WU(A[d].id,"-tracks")?(E=!0,A[d].id,h=B,r=I["line-color"],a=this.HU(g,r,i),l=this.HU(g,I["line-width"],i),n=I["line-width"].Cr,w=this.HU(g,t["line-cap"]||w,i),this.Dr(g,I["line-dasharray"],i,l)&&(y="dashed"),x=Math.max(x,A[d].zIndex)):this.WU(A[d].id,"-bg")?(E=!0,A[d].id,h=B,r=I["line-color"],a=this.HU(g,r,i),w=this.HU(g,t["line-cap"]||w,i),l=this.HU(g,I["line-width"],i),n=I["line-width"].Cr,this.Dr(g,I["line-dasharray"],i,l)&&(y="dashed"),x=Math.max(x,A[d].zIndex)):(Q=B,A[d].id,r=I["line-color"],C=this.HU(g,r,i),s=this.HU(g,t["line-cap"]||s,i),e=this.HU(g,I["line-width"],i),o=I["line-width"].Cr,this.Dr(g,I["line-dasharray"],i,e)&&(c="dashed"),p=Math.max(p,A[d].zIndex)))));if(e)return{facezIndex:p,borderzIndex:x,faceStrokeStyle:c,faceOpacity:Q,faceDashArray:void 0,faceWidth:e,faceColor:C,faceLineCap:s,borderLineCap:w,isOutline:E,borderOpacity:h,borderStrokeStyle:y,borderDashArray:void 0,borderColor:a,borderWidth:l,faceWidthFunIndex:o,borderWidthFunIndex:n}},QU:function(A){return A instanceof Array&&-1<this.KU(["geometry-type","to-number","case","step","is-supported-script","concat","get","literal","match","interpolate","to-string","string","coalesce","has","+","==","!=",">","<",">=","<=","in","!in"],A[0])||"object"==typeof A&&A.stops},KU:function(A,i){if(!A||!A.length)return-1;if(A.indexOf)return A.indexOf(i);for(var g=0;g<A.length;g+=1)if(A[g]===i)return g;return-1},WU:function(A,i){return A.endsWith?A.endsWith(i):!(A.length<i.length)&&A.substr(A.length-i.length)===i},Vr:function(A,i,g){for(var I=0,t=0;t<A.length;t+=1){var B,Q,C,e,o,E,h=A[t];"line"===A[t].type?h.minzoom&&h.minzoom>i||(I=Math.max(I,h.zIndex),C=(o=h.paint)["line-color"],B=this.HU(g,C,i),Q=this.HU(g,o["line-width"],i),C=void 0===o["line-opacity"]?1:o["line-opacity"],e=this.HU(g,C,i)):"fill"===A[t].type&&(h.minzoom&&h.minzoom>i||(I=Math.max(I,h.zIndex),h=(o=h.paint)["fill-color"],E=this.HU(g,h,i)))}return{zIndex:I,fillColor:E,fillOpacity:1,strokeWeight:Q,strokeColor:B,strokeOpacity:e}},Xr:function(A,i,g){var I=A[0],t=I.paint,B=I.layout;if("symbol"===I.type){var Q=this.HU(g,t["text-color"],i),C=this.HU(g,t["text-halo-color"],i),e=this.HU(g,t["text-halo-width"],i),o=void 0===t["icon-opacity"]?1:t["icon-opacity"],E=this.HU(g,o,i),h=void 0===t["text-opacity"]?1:t["text-opacity"],a=this.HU(g,h,i),l=void 0,n=void 0;0===e&&(C=""),B["icon-image"]&&(l=this.HU(g,B["icon-image"],i),(s=this.kr[l])&&E&&(s.height,n=[-s.width/2,-s.height/2,s.width,s.height,s.x,s.y,s.width,s.height]));var r=this.HU(g,B["icon-rotation-alignment"],i),A=B["text-max-width"],o=this.HU(g,B["text-anchor"]||"center",i);(t=this.HU(g,B["text-font"],i)||"Microsoft YaHei")instanceof Array&&(t=t.join(" "));var h=B["text-offset"]?this.HU(g,B["text-offset"],i):[0,0],e=this.HU(g,B["text-size"],i),s="";return a&&B["text-field"]&&(s=this.HU(g,B["text-field"]||"{name}",i)),{zIndex:I.zIndex,Jr:r,Kr:Q||"black",Qr:C,th:(I.minzoom||1)+.5,ih:(I.maxzoom||20)+.5,eh:E,nh:l,qU:n,oh:A,textAnchor:o,ah:t,sh:h,rh:e,name:s}}},lh:function(A,i,g){var I=[],t=this.Pr(A,i,g);return t&&(t.type="line",I.push(t)),(g=this.uh(A,i,g)).length&&I.push.apply(I,g),I},uh:function(A,i,g){for(var I=[],t=0;t<A.length;t+=1){var B=this.Xr([A[t]],i,g);B&&I.push(B)}return I},YU:function(A,i,g){for(var I=1,t=i.length-1;I<t;I+=2)if(this.HU(A,i[I],g))return this.HU(A,i[I+1],g);return this.HU(A,i[i.length-1],g)},JU:function(A,i,g){var I=this.HU(A,i[1],g),t=this.HU(A,i[2],g);return[I,this.HU(A,i[3],g)].join(t)},ZU:function(A,i,g){var I=i[1],t=1;"exponential"===I[0]?t=I[1]:"linear"===I[0]&&(t=1);for(var B=i.slice(3),Q=[],C=0;C<B.length;C+=2)Q.push([B[C],B[C+1]]);return t=this.Sr(A,{base:t,stops:Q},g),this.HU(A,t,g)},XU:function(A,i,g){"zoom"===i[1][0]||"get"===i[1][0]&&(g=A.properties[i[1][1]]);for(var I=[],t=2,B=i.length;t<B;t+=2)I.push([parseFloat(i[t-1])||0,this.HU(A,i[t],g)]);if(g<I[0][0])return this.HU(A,I[0][1],g);if(g>=I[I.length-1][0])return this.HU(A,I[I.length-1][1],g);for(t=1,B=I.length;t<B;t+=1)if(g<=I[t][0])return this.HU(A,I[t-1][1],g)},tV:function(A,i,g){var I=this.HU(A,i[1],g);if(I){for(var t=2,B=i.length-1;t<B;t+=2)if(i[t]instanceof Array?-1!==this.KU(i[t],I):i[t]===I)return this.HU(A,i[t+1],g);return this.HU(A,i[i.length-1],g)}},HU:function(A,i,g){if(null==i)return null;var I=typeof i;if("number"==I||"boolean"==I)return i;if("function"==I)return i(g,A);if(!this.QU(i)){if("string"!=typeof i)return i;if(-1===this.KU(i,"{"))return i;for(var t,B=[],Q=0,C=0,e=i.length;C<e;C+=1)"{"===i[C]&&(Q=C),"}"===i[C]&&(t=C,B.push(i.substring(Q,t+1)));for(var o,C=0,e=B.length;C<e;C+=1){if(void 0===(o=A.properties[B[C].substring(1,B[C].length-1)]))return"";i=i.replace(B[C],o)}return i}if("literal"===i[0])return i[1];if(i.stops)return this.Sr(A,i,g);if("get"===i[0])return this.Hr&&"name"===i[1].substr(0,4)&&(A.properties["name_zh-Hant"]||A.properties["name_zh-Hans"])||A.properties[i[1]];if("to-number"===i[0])return parseFloat(this.HU(A,i[1],g));if("to-string"===i[0])return(o=this.HU(A,i[1],g))?o+"":"";if("string"===i[0])return(o=this.HU(A,i[1],g))?o+"":"";if("match"===i[0])return this.tV(A,i,g);if("case"===i[0])return this.YU(A,i,g);if("interpolate"===i[0])return this.ZU(A,i,g);if("concat"===i[0])return this.JU(A,i,g);if("step"===i[0])return this.XU(A,i,g);if("coalesce"!==i[0])return"+"===i[0]?this.HU(A,i[1],g)+this.HU(A,i[2],g):"has"===i[0]?void 0!==A.properties[i[1]]:"is-supported-script"===i[0]?this.iV(this.HU(A,i[1],g)):"=="===i[0]?this.HU(A,i[1],g)===this.HU(A,i[2],g):"!="===i[0]?this.HU(A,i[1],g)!==this.HU(A,i[2],g):">"===i[0]?this.HU(A,i[1],g)>this.HU(A,i[2],g):"<"===i[0]?this.HU(A,i[1],g)<this.HU(A,i[2],g):">="===i[0]?this.HU(A,i[1],g)>=this.HU(A,i[2],g):"<="===i[0]?this.HU(A,i[1],g)<=this.HU(A,i[2],g):"in"===i[0]?-1<this.KU(this.HU(A,i[2],g),this.HU(A,i[1],g)):"!in"===i[0]?-1===this.KU(this.HU(A,i[2],g),this.HU(A,i[1],g)):"geometry-type"===i[0]?3===A.type?"Polygon":2===A.type?"LineString":"Point":void 0;for(C=1;C<i.length;C+=1){var E=this.HU(A,i[C],g);if(E)return E}},eV:function(A,i){return!(!i&&(1424<=A&&A<=2303||this.VU["Arabic Presentation Forms-A"](A)||this.VU["Arabic Presentation Forms-B"](A))||2304<=A&&A<=3583||3840<=A&&A<=4255||this.VU.Khmer(A))},iV:function(A){if(!A)return!1;for(var i=0,g=A.length;i<g;i+=1){var I=A[i];if(!this.eV(I.charCodeAt(0),!1))return!1}return!0},getStyle:function(C,e,A,o){var i=C.type,E=(C.properties.class,C.properties.type,this),h=this.styles[e];if(h){var g=function(){for(var A=[],i=0,g=h.length;i<g;i+=1){var I=h[i];if(I.filters){for(var t=!0,B=0;B<I.filters.length;B+=1){var Q=I.filters[B];if(!E.HU(C,Q,o)){t=!1;break}}t&&A.push(I)}else I.id===e&&A.push(I)}return A}();if(g.length)return 1!==i?2===i?this.lh(g,o,C):3===i?this.Vr(g,o,C):void 0:this.Xr(g,o,C)}},fh:function(A,i){for(var g=1<<20-i.z,I=A.extent/256,t=0;t<A.style.length;t+=1){var B=A.style[t];if("line"!==B.type){var Q="";B.hh&&(Q=A.properties[B.hh]);for(var C=this.Mr,e=C?1.8*B.rh:B.rh,o=A.lines[0],E=1;E<A.lines.length;E+=1)o.length<A.lines[E].length&&(o=A.lines[E]);for(var h=[],a=0;a<o.length;a+=1){var l=[i.x*g*256+o[a][0]/I*g,256*i.y*g+o[a][1]/I*g];h.push(l)}var n=B.textAnchor;this._r.font=B.rh+"px "+B.ah;var r=this._r.measureText(Q).width,s=0,w=0,c=B.nh&&"viewport"===B.Jr;if(B.nh){var s=(-A.properties.dh||0)-100,y=polyfill.kS._S(h,polyfill.kS.distanceOfLine(h)/2)||[],x=y[2];"viewport"!==B.Jr&&1<h.length&&(w=360-(new polyfill.Pixel(h[x+1][0]-h[x][0],h[x+1][1]-h[x][1]).direction()||0)),h=[y[0],y[1]]}else{if(this.vh(o))continue;if(90<(p=new polyfill.Pixel(o[1][0]-o[0][0],o[1][1]-o[0][1]).direction()||0)&&p<270&&(h.reverse(),o.reverse()),s=-A.properties.dh-1e6,polyfill.kS.distanceOfLine(h)/g<1.5*r)continue}var d,p={margin:this.mh,foreign:!0,zIndex:B.zIndex,yh:w,rank:s,font:B.ah,Kr:B.Kr,Qr:B.Qr,rh:e,id:A.id,xh:h,name:Q,textAlign:"center",textBaseline:"center"===n?"middle":"top",bh:[],gh:new Array,wh:c,_h:!c,kh:!B.nh,th:B.th,Mh:!0,Rh:new Array,zh:!1,zoom:i.z};B.nh?(w=0,s=B.nh.replace("{maki}",A.properties.maki).replace("{shield}",A.properties.shield).replace("{reflen}",A.properties.reflen).replace("{network}",A.properties.network),(c=this.kr[s])&&B.eh&&(w=c.height,d=[-c.width/2,-c.height/2,c.width,c.height,c.x,c.y,c.width,c.height],p.gh.push(d)),Q&&(c=s=void 0,c="center"===n?(s=0,-e/2):s=t*(e+2)+w/2,p.Rh.push([Q,B.ah,e,B.Kr,B.Qr,0,0,!1,[0,s,C?1.8*r:r,e]]),p.gh.push(d=[-r/2,c,r,e])),(w||Q)&&(Q?p.id="mapbox_guideboard_"+polyfill.Util.stamp(p):(p.id="mapbox_singleway_"+polyfill.Util.stamp(p),p.zh=!0),i.labels.push(p))):Q&&(p.id="mapbox_roadname_"+polyfill.Util.stamp(p),i.labels.push(p))}}},Sh:function(A,i){var g=1<<20-i.z,I=A.extent/256,t=A.Ch.xh[0][0],B=A.properties[A.style.hh];if(B){var Q=this.Mr?2*A.style.rh:A.style.rh,g=[i.x*g*256+t[0]/I*g,256*i.y*g+t[1]/I*g],C=A.style.textAnchor,e={foreign:!0,margin:this.mh,zIndex:A.style.zIndex,rank:-A.properties.dh||0,id:A.id,xh:g,name:B,textAlign:"center",textBaseline:"center"===C?"middle":"top",bh:[],gh:new Array,yh:0,pos:[t[0]/I,t[1]/I],wh:!0,th:A.style.th,Mh:!0,Rh:new Array},o=0;A.style.nh&&(a=A.style.nh.replace("{maki}",A.properties.maki).replace("{shield}",A.properties.shield).replace("{reflen}",A.properties.reflen).replace("{network}",A.properties.network),(a=this.kr[a])&&A.style.eh&&(o=a.height,w=[-a.width/2,-a.height/2,a.width,a.height,a.x,a.y,a.width,a.height],e.gh=[w]));var E,a=B.indexOf("("),h=0<a?[B.substr(0,a),B.substr(a)]:20<B.length&&1<(E=B.split(" ")).length?(a=Math.floor(E.length/2),[E.slice(0,a).join(" "),E.slice(a).join(" ")]):[B];this._r.font=Q+"px "+A.style.ah;for(var l=0;l<h.length;l+=1){var n=h[l],r=this._r.measureText(n).width,s=void 0;e.Rh.push([n,A.style.ah,Q,A.style.Kr,A.style.Qr,0,0,!1,[0,s="center"===C?(-.5*h.length+l)*(Q+2):l*(Q+2)+o/2,r,Q]]);var w=[-r/2,s,r,Q];e.gh.push(w)}return i.labels.push(e),e}},Lh:function(A){var i,g=[],I=[];for(i in A.layers)if(A.layers.hasOwnProperty(i)){for(var t=A.layers[i],B=[],Q=0;Q<t.Ah.length;Q+=1)3==+(C=t.Ah[Q]).type?g.push(C):2==+C.type&&B.push(C);for(Q=0;Q<B.length;Q+=1){var C,e=(C=B[Q]).style;e.isOutline&&I.push([C,{zIndex:e.borderzIndex,Th:e.borderWidthFunIndex,strokeStyle:e.borderStrokeStyle,strokeOpacity:e.borderOpacity,strokeDasharray:e.borderDashArray,lineCap:e.borderLineCap,strokeWeight:e.borderWidth,strokeColor:e.borderColor}]),I.push([C,{zIndex:e.facezIndex,Th:e.faceWidthFunIndex,strokeStyle:e.faceStrokeStyle,strokeOpacity:e.faceOpacity,strokeDasharray:e.faceDashArray,lineCap:e.faceLineCap,strokeWeight:e.faceWidth,strokeColor:e.faceColor}])}}I.sort(function(A,i){return A[1].zIndex>i[1].zIndex?1:-1}),A.polygons=g,A.Dh=I,delete A.layers},Ph:function(A){A.type,A.lines},jh:function(A,i,g,I){this.mh=3;var t=i.vt;t.labels=[];var B,Q=[];for(B in t.layers)if(t.layers.hasOwnProperty(B)){var C=t.layers[B],e=C.Ah;Q.push(B);for(var o=0,E=e.length;o<E;o++){var h=e[o];h.Fh=C.name,h.style=this.getStyle(h,C.name,!0,t.z-1),h.style,this.Ph(h),h.style&&(1==+h.type||2==+h.type&&h.style.length&&(this.fh(h,t),"line"===h.style[0].type&&(h.style=h.style[0])))}}this.Lh(t),this.Eh||(this.Eh=!0),g.features=t.labels,t.labels=null,Q.length>this.layers.length&&(this.layers=Q),I(null,{vt:t})}},MapboxStyle=(kg.prototype.getMapboxStyle=function(){return mbStyle},kg);function kg(A){var i=null,g="";A&&((A=A.KG)&&A.styles&&(i=JSON.parse(A.styles).layers),A&&A.vectorMapForeign&&(g=A.vectorMapForeign)),mbStyle.Rr(i,g)}var MapboxSourceWorker=(qg.prototype.YE=function(A){var i=polyfill.Util.getOptimalZoom(this.WW);A(this.sQ,{ZL:this.WW,optimalZoom:i,cb:function(){}}),this.sQ={}},qg.prototype.bw=function(A,t,B,Q,i,g,C){var e=this,o=new XMLHttpRequest;return o.onreadystatechange=function(){var A,i,g,I;4===o.readyState&&200===o.status&&(g=new polyfill.pw(new Uint8Array(o.response)),(I=new polyfill.tW(g)).nG("mapbox"),A=t.z,i=t.x,g=t.y,I.data={},I=e.Ow(I,{x:t.x,y:t.y,z:t.z,projectionId:B,tileSize:Q}),e.wQ(I),I.zo=new polyfill.ca(A,i,g),e.FQ(I),delete I.road,C(null,polyfill.Ln({zo:t},I)))},o.open("GET",A,!0),o.responseType="arraybuffer",o.send(),{cancel:function(){o.abort()}}},qg.prototype.wQ=function(A){A.stencil={};var i=new polyfill.fQ;A.stencil.Oc=i,A.stencil.Dc=new polyfill.K_,A=A.stencil.Dc.Nx(A.MQ),i.add({},A)},qg.prototype.Ow=function(g,A){var I=A.x,t=A.y,o=A.z,B=A.tileSize,E=A.projectionId;g.z=o,g.x=I,g.y=t,A=polyfill.ProjectionManager.getProjection(E).getResolution(o),A=polyfill.$Q(I,t,o,A,B),g.Ro=A,g.MQ=[A[0],A[1],A[2],A[1],A[2],A[3],A[0],A[3]],g.zS=polyfill.lcs.getLocalByCoord([g.Ro[0],g.Ro[1]]),g.localCoord=g.zS;for(var Q=Object.keys(g.layers),i=0;i<Q.length;i++)!function(A){var e=g.layers[Q[A]],i=e.Cw,A=e.extent;e.Ah=[],e.scale=B/A,e.ox=B*I,e.oy=B*t,polyfill.forEach(i,function(A,i){if((A=e.Gw(i)).Dw(),e.Ah.push(A),A.lines&&A.lines.length&&(2===A.type||3===A.type||1===A.type)){A.Rw=[];for(var g=0,I=A.lines.length;g<I;g++){for(var t=[],B=0,Q=A.lines[g].length;B<Q;B++){var C=[e.ox+e.scale*A.lines[g][B][0],e.oy+e.scale*A.lines[g][B][1]],C=[(C=polyfill.V[E].Xs(C[0],C[1],o))[0],C[1]];t.push(C)}A.Rw.push(t)}}})}(i);return this.uW(g,o),this.xw(g),this.zw(g),g},qg.prototype.uW=function(A,i){var g,I=[],t=[],B=[],Q=(this.kQ,null);for(g in this.parent&&this.parent.QG&&(Q=this.parent.QG),this.$h=new MapboxStyle({KG:Q}).getMapboxStyle(),A.bgColor=this.$h.backgroundColor,A.layers)if(A.layers.hasOwnProperty(g))for(var C=A.layers[g],e=0;e<C.Ah.length;e+=1){var o,E=C.Ah[e],h=this.$h.getStyle(E,C.name,!0,i);h&&(E.style=h,3===E.type?I.push(E):2===E.type?t.push(E):1!==E.type||(o=h.name)&&((E={name:o,position:E.Rw[0],id:E.id,minzoom:h.th,maxzoom:h.ih}).style=h,B.push(E)))}t.sort(function(A,i){return A.style&&i.style&&A.style.zIndex>i.style.zIndex?1:-1}),I.sort(function(A,i){return A.style&&i.style&&A.style.zIndex>i.style.zIndex?1:-1}),A.polygons=I,A.Dh=t,A.data.poilabel=((Q={})[A.z+","+A.x+","+A.y]=B,Q),delete A.layers},qg.prototype.startsWith=function(A,i){return A.startsWith?A.startsWith(i):A.substr(0,i.length)===i},qg.prototype.argbHex2Rgba=function(A){for(var i=[],g=0,I=A.length;g<I;g+=2)i.push(parseInt(A.substr(g,2),16)/255);return i.push(i.shift()),i},qg.prototype.uQ=function(A,i,g){return g<0&&(g+=1),1<g&&--g,g<1/6?A+6*(i-A)*g:g<.5?i:g<2/3?A+(i-A)*(2/3-g)*6:A},qg.prototype.GQ=function(A,i,g,I){var t,B,Q;return 0===i?t=B=Q=g:(t=this.uQ(i=2*g-(g=g<.5?g*(1+i):g+i-g*i),g,A+1/3),B=this.uQ(i,g,A),Q=this.uQ(i,g,A-1/3)),[t,B,Q,I]},qg.prototype.color2RgbaArray=function(A,i){if(void 0===i&&(i=1),!A)return null;var g=A.toString();if(this.yQ[g])return this.yQ[g];if(A instanceof Array)return A;if(this.startsWith(A,"hsla")){var I=A.substr(5).split(","),t=parseInt(I[0],10)/360,B=parseInt(I[1],10)/100,Q=parseInt(I[2],10)/100,C=parseFloat(I[3]),e=this.GQ(t,B,Q,C);return this.yQ[g]=e}return this.startsWith(A,"hsl")?(I=A.substr(4).split(","),t=parseInt(I[0],10)/360,B=parseInt(I[1],10)/100,Q=parseInt(I[2],10)/100,e=this.GQ(t,B,Q,i),this.yQ[g]=e):this.startsWith(A,"#")?7===A.length?(e=this.argbHex2Rgba("ff"+A.substr(1)),this.yQ[g]=e):9===A.length?(e=this.argbHex2Rgba(A.substr(1)),this.yQ[g]=e):void 0:this.startsWith(A,"rgba")?(I=A.substr(5).split(","),[parseInt(I[0],10)/255,parseInt(I[1],10)/255,parseInt(I[2],10)/255,C=parseFloat(I[3])]):this.startsWith(A,"rgb")?(I=A.substr(4).split(","),[parseInt(I[0],10)/255,parseInt(I[1],10)/255,parseInt(I[2],10)/255,C=1]):void 0},qg.prototype.zw=function(A){if(!A||!A.Dc){var i=new polyfill.fQ;A.Oc=i,A.Dc=new polyfill.K_;var g={fillColor:this.color2RgbaArray(A.bgColor),zIndex:0},I=A.Dc.Nx(A.MQ);i.add(g,I);for(var t=0,B=A.polygons;t<B.length;t++){var Q=B[t],C=Q.style;if(C&&C.fillColor){C.fillColor=this.color2RgbaArray(C.fillColor);var e=Q.Rw;if(1<e.length){for(var o=[],E=0;E<e.length;E++)polyfill.kS.isClockwise(e[E])?o.push([E]):o.length&&o[o.length-1].push(E);for(var h=0;h<o.length;h++){var a=o[h];if(1<a.length){for(var l=[],n=[],r=0;r<a.length;r++){var s=e[a[r]];0<r&&l.push(n.length/2);for(var w=0;w<s.length;w++){var c=s[w];n.push(c[0],c[1])}}var y=A.Dc.Nx(n,l);i.add(C,y)}else{for(n=[],s=e[a[0]],w=0;w<s.length;w++){var x=s[w];n.push(x[0],x[1])}y=A.Dc.Nx(n),i.add(C,y)}}}else{for(var p=e.length,n=[],d=0;d<p;d++){var f=e[d];if(0<f.length)for(w=0;w<f.length;w++)h=f[w],n.push(h[0],h[1])}Q=A.Dc.Nx(n),i.add(C,Q)}}}delete A.polygons}},qg.prototype.xw=function(A){if(!A||!A.$c){var i=[],g=this.kQ;A.$c=new polyfill.J_;var I=new polyfill.fQ;A.Uc=I;for(var t=0,B=A.Dh;t<B.length;t++){var Q=B[t],C=Q.Rw,e=C.length,o=0,E=0;Q.style&&Q.style[0]&&Q.style[0].borderColor&&(Q.style[0].borderColor=this.color2RgbaArray(Q.style[0].borderColor)),Q.style&&Q.style[0]&&Q.style[0].faceColor&&(Q.style[0].faceColor=this.color2RgbaArray(Q.style[0].faceColor));for(var a=(h=Q.style||[])[0],l=h[1],n=0;n<e;n++){var r=C[n];if(0<r.length){for(var s=[],w=0;w<r.length;w++){var c=r[w];s.push(c[0],c[1])}var y=A.$c.hb(s,{X_:0,lineJoin:"miter",lineCap:"round"});o+=y.Iw,E+=y.distance}}if(0<o&&(I.add(Q.style,o),Q.distance=E),a&&a.borderColor&&(Q.style[0].borderColor=this.color2RgbaArray(a.borderColor)),a&&a.faceColor&&(Q.style[0].faceColor=this.color2RgbaArray(a.faceColor)),l&&(h=l.name||"")){Q=l.Kr,a=l.Qr,Q&&!g[Q]&&(g[Q]=polyfill.Util.color2RgbaArray(Q)),a&&!g[a]&&(g[a]=polyfill.Util.color2RgbaArray(a)),l.Kr=g[Q],l.Qr=g[a];for(var h,x=(h={style:l,path:[],name:h,distance:E}).path,p=0;p<e;p++)for(var d=C[p],w=0;w<d.length;w++)c=d[w],x.push(c[0],c[1]);i.push(h)}}A.road=i,delete A.Dh}},qg.prototype.FQ=function(A){var i,g={};for(i in A)A.hasOwnProperty(i)&&"fillBucket"!==i&&"fillSegements"!==i&&"lineBucket"!==i&&"lineSegements"!==i&&(g[i]=A[i]);this.sQ[A.zo.key]={tile:g,params:{scale:this.parent.params.scale,tag:"all"}}},qg),_a$1;function qg(A){this.parent=A,this.id="mapbox",this.sQ={},this.yQ={},this.kQ={}}var mapBoxSprite="https://webapi.amap.com/style_icon/sprite_v8@2x.png",DefaultIconInfo=(_a$1={TW:{img:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",width:512,height:1024,startX:0,startY:0,status:"loaded",type:"icon",ext:{hv:0}},RW:{img:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png",width:512,height:1024,startX:0,startY:1024,status:"loaded",type:"icon",ext:{hv:1}}},_a$1[mapBoxSprite]={img:mapBoxSprite,width:1024,height:926,startX:0,startY:2048,status:"loaded",type:"icon",ext:{hv:2}},_a$1),ImageManagerWorker=(o7=polyfill.Event,polyfill.Ei(p7,o7),p7.prototype.loadImage=function(A,i){var g=i.name,I=i.type,t=i.cb,B=g||A;(g=this.Fs[B])&&g.status===polyfill.uc.LOADED?t(g,i):g&&g.status===polyfill.uc.LOADING?(this.Mc[B]||(this.Mc[B]=[]),this.Mc[B].push({cb:t,opts:i})):("icon"===I&&(DefaultIconInfo[A]?i.hv=DefaultIconInfo[A].ext.hv:i.hv=this.Uw,this.Uw++),this.Rc(A,i))},p7.prototype.loadImages=function(A,i){var t=this,g=i.cb,B=i.type;if(0!==Object.keys(A).filter(function(A){return!t.Fs[A]}).length){var Q=[],C=[];if(A.length){for(var I=0,e=A;I<e.length;I++)!function(I){var A=new Promise(function(g,A){t.loadImage(I,{cb:function(A,i){C.push(t.Fs[I]),g()},type:B})});Q.push(A)}(e[I]);Promise.all(Q).then(function(){g(C)}).catch(function(){g(C)})}else g(C)}else g()},p7.prototype.Vw=function(A,i){var t=this,B=i.cb,Q=A.filter(function(A){return!t.Fs[A]});if(0!==Q.length){var g=[],C=[];if(A.length){for(var I=0,e=A;I<e.length;I++)!function(I){var A=new Promise(function(g,A){t.loadImage(I,{cb:function(A,i){C.push(t.Fs[I]),g()},type:"icon"})});g.push(A)}(e[I]);Promise.all(g).then(function(){var A=[];if(0<Q.length){for(var i=0,g=Q;i<g.length;i++){var I=g[i];A.push({url:I,data:t.getImage(I)})}t.emit("iconImageLoaded",{data:A})}B(C)}).catch(function(){B(C)})}else B(C)}else B([])},p7.prototype.getImage=function(A){return this.Fs[A=void 0===A?"":A]},p7.prototype.destory=function(){var A;this.Fs=((A={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,A[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,A)},p7.prototype.Rc=function(i,g){var I=this,t=g.name,A=g.ext,B=void 0===A?{}:A,Q=void 0===(A=g.type)?"other":A,C=g.cb,e=g.imageBitmap,o=this.Fs;o[t||i]={status:polyfill.uc.LOADING,startX:0,startY:1024*(g.hv||0),type:Q,height:0,width:0},polyfill.Yw.send(i,{Me:"arraybuffer",qw:function(A){e?(console.time("createImageBitmap"),createImageBitmap(new Blob([new Uint8Array(A)])).then(function(A){console.timeEnd("createImageBitmap"),A=new polyfill.WQ(i,A,{imageBitmap:!0}),I.qQ(t||i,A,C,g,Q,B)})):(A=new polyfill.WQ(i,A),I.qQ(t||i,A,C,g,Q,B))},Aw:function(A){console.log(A),o[A=t||i].status=polyfill.uc.ERROR,C(o[A],g)}})},p7.prototype.qQ=function(A,i,g,I,t,B){var Q=this.Fs;if("success"!==i.status)return console.error("createObjectURL fail"),Q[A].status=polyfill.uc.ERROR,void g(Q[A],I);if("icon"===t?(B.hv=I.hv,Q[A]=DefaultIconInfo[A]||{ext:B,type:t,startX:0,startY:1024*(I.hv||0),height:1024,width:512,status:polyfill.uc.LOADED},Q[A].data=i):Q[A]={ext:B,type:t,startX:0,startY:0,height:0,width:0,data:i,status:polyfill.uc.LOADED},g(Q[A],I),this.Mc[A]){for(var C=0,e=this.Mc[A];C<e.length;C++){var o=e[C];o.cb(Q[A],o.opts)}delete this.Mc[A]}},p7.prototype.Sc=function(A){var i,g=(A=void 0===A?{}:A).img,A=g&&g.context?(i=g.width||0,g.height||0):(i=A.width||0,A.height||0);return[i,A]},p7),o7;function p7(){var A,i=o7.call(this)||this;return i.Fs=((A={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,A[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,A),i.Cc=16,i.Uw=3,i.Hw={},i.Mc={},i}var Counter=(Vi=polyfill.Event,polyfill.Ei(Wi,Vi),Wi.prototype.TQ=function(){this.zQ+=1,this.zQ===this.OQ&&this.emit("count")},Wi.prototype.clear=function(){this.zQ=0},Wi),Vi,_a$2;function Wi(A){var i=Vi.call(this)||this;return i.OQ=A,i.zQ=0,i}var LabelFormatMap$1=(_a$2={},_a$2[polyfill.NebulaLabelFormat.id]=polyfill.NebulaLabelFormat,_a$2[polyfill.MapboxLabelFormat.id]=polyfill.MapboxLabelFormat,_a$2.nebula=polyfill.NebulaLabelFormat,_a$2),LabelWorker=(Zi=polyfill.Event,polyfill.Ei($i,Zi),$i.prototype.iW=function(B,Q){var E=this;void 0===Q&&(Q={}),this.MW.ZL=Q.ZL||polyfill.zoomRange[1];var A,h=[],a=(Q.cb,this.parent.langForeign),l=this;for(A in B)!function(A){var C,i,g,I,e,t,o;B.hasOwnProperty(A)&&(I=(i=B[A]).tile,A=(g=i.params).scale,i=g.tag,h.push(i),g={vn:l.parent.vn},A=(g=new LabelFormatMap$1[Q.id](g)).Ns(I,{ZL:l.MW.ZL,zoom:I.zo.z,scale:A,lang:a,VQ:l.parent.QZ}),C=[[I,g,A,i]],A=Object.keys(g.Fs),i=Object.keys(g.Es),g=[I],I=Date.now(),e=[],t=Q.optimalZoom,(o=new Counter(2)).on("count",function(){E.parent.jQ.XQ(new LoadDynamicsTask(E.parent.vn,t,E.R_,E.z_,e,Q,function(A){E.emit("dynamicTextVerticeLoadedByTile",{data:A.data,id:Q.id})}),void 0,!0),E.parent.yY.setNeedUpdate(!0)},null,!0),l.R_.vW(i,{tiles:g,optimalZoom:t,tags:h,stamp:I,cb:function(A){for(var i=0,g=C;i<g.length;i++){var t=(I=g[i])[0],B=I[1],Q=I[2],I=I[3];e.push({tile:t,gW:B,SW:Q,tag:I})}o.TQ()}}),l.wW(A)?o.TQ():l.z_.Vw(A,{type:"icon",cb:function(){o.TQ()}}))}(A)},$i.prototype.hW=function(A,i,g){var I=this;this.parent.jQ.XQ(new LoadDynamicsTask(this.parent.vn,this.MW.ZL,this.R_,this.z_,A,g,function(A){I.emit("dynamicTextVerticeLoadedByTile",{data:A.data,id:g.id})}),void 0,!0),this.parent.yY.setNeedUpdate(!0)},$i.prototype.wW=function(A){for(var i=this.hD,g=0,I=0,t=A=void 0===A?[]:A;I<t.length;I++){var B=t[I];-1!==i.indexOf(B)&&g++}return g===A.length},$i),Zi;function $i(A){var i=Zi.call(this)||this;return i.parent=A,i.MW={},i.hD=["https://vdata.amap.com/style_icon/2.0/icon-normal-big.png","https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],i.z_=A.z_,i.R_=A.R_,i}var LoadDynamicsTask=(W8.prototype.play=function(A){for(var i=A,g=Date.now();0<i&&this.offset!==this.data.length;){var I,B=[],Q=this.data[this.offset],C=Q.tile,e=Q.SW,o=(Q.gW,Q.tag),E=Object.keys(e).length,h={},a=0;if(0!==E){for(var l in e)e.hasOwnProperty(l)&&(I=e[l],I=new polyfill.eG({R_:this.R_,z_:this.z_}).Ns(I,{ZL:this.ZL,zoom:C.zo.z,from:"inner",center:C.localCoord.center}),h[l]=new polyfill.La(C.zo,I),++a===E&&(I=this.hQ(C,this.ZL),B.push({data:h,XE:I,tag:o})));this.offset++,this.cb({data:B}),i=A-(Date.now()-g)}else B.push({data:C.zo})}return this.offset,this.data.length,this.result},Object.defineProperty(W8.prototype,"status",{get:function(){return this.offset>=this.data.length?polyfill.vY.finish:polyfill.vY.pause},eb:!1,nb:!0}),W8.prototype.hQ=function(A,i){if(A)for(var g=this.SQ(A)||[],I=0,t=g=new LabelFormatMap$1[A.type]({vn:this.vn}).DQ(g,{zoom:i});I<t.length;I++){var B=t[I],Q=B.CO;B.EG||(B.EG={});for(var C=0,e=Q;C<e.length;C++){var o=e[C],E=this.R_.mz(o);B.EG[o]=E}}return g},W8.prototype.SQ=function(A){return A.data&&A.data.roadName||A.road},W8);function W8(A,i,g,I,t,B,Q){this.vn=A,this.ZL=i,this.R_=g,this.z_=I,this.data=t,this.params=B,this.cb=Q,this.type="LoadDynamicsTask",this.offset=0,this.result=[]}var InnerLabelsSourceWorker=(Hj.prototype.loadData=function(t,B){var Q=this,A=t.id===polyfill.n0.nebulaLabel?polyfill.n0.nebula:t.id;(A=this.parent.dQ(A))&&A.YE?A.YE(function(A,i){i.GW;var g=i.cb,I=i.ZL,i=i.optimalZoom;polyfill.isEmpty(A)?B&&B({}):Q.parent.yw.iW(A,{ZL:I,optimalZoom:i,id:t.id,cb:function(A){B(A),g&&g()}})},t):B&&B({})},Hj),StaticSourceID,Vj,EnumTextureIndex,Wj,ImageStatus,Xj;function Hj(A){this.parent=A,this.Mf=A.R_,this.ac=A.z_}Vj=StaticSourceID=StaticSourceID||{},Vj.nebula="nebula",Vj.nebulaLabel="nebulaLabel",Wj=EnumTextureIndex=EnumTextureIndex||{},Wj[Wj.dynamic=0]="dynamic",Wj[Wj.icon=1]="icon",Xj=ImageStatus=ImageStatus||{},Xj.BLOB="blob",Xj.TOLOAD="toload",Xj.LOADING="loading",Xj.LOADED="loaded",Xj.UNLOADED="unloaded",Xj.ERROR="error",Xj.RELOADING="reloading",Xj.UNCOMBINED="uncombined",Xj.COMBINING="combining",Xj.COMBINED="combined";var noop=function(A){},XHR={send:function(A,i){void 0===i&&(i={});var g=new XMLHttpRequest,t=void 0===(I=i.qw)?noop:I,Q=void 0===(B=i.Aw)?noop:B,I=i.Me,B=i.method,i=i.content;return g.onreadystatechange=function(){if(4===g.readyState&&200===g.status){var A=g.response;try{t(A)}catch(A){Q(A)}}else 404===g.status&&(g.abort(),Q(Error("404")))},g.onerror=function(A){g.abort(),Q(A)},g.open(B||"GET",A,!0),g.responseType=I||"json",g.send(i||void 0),g}};function parserFunc(A){var Y={TS:function(){this.PS=0}};Y.TS.prototype.create=function(A){this.OS&&this.PS===A||(this.OS=[]),this.PS=A,this.FS=0,this.BS=0},Y.TS.prototype.flush=function(){var A=this.FS-this.BS;if(0!==A){for(;A--;)this.ES.jS(this.OS[this.BS++]);this.FS>=this.PS&&(this.FS=0),this.BS=this.FS}},Y.TS.prototype.NS=function(){this.flush(),this.ES=null},Y.TS.prototype.US=function(A){this.NS(),this.ES=A},Y.TS.prototype.init=function(A){A||(this.BS=0,this.FS=0)},Y.TS.prototype.WS=function(A,i){var g=this.FS-A-1;for(g<0&&(g+=this.PS);i--;)g>=this.PS&&(g=0),this.OS[this.FS++]=this.OS[g++],this.FS>=this.PS&&this.flush()},Y.TS.prototype.GS=function(A){this.OS[this.FS++]=A,this.FS>=this.PS&&this.flush()},Y.TS.prototype.HS=function(A){return(A=this.FS-A-1)<0&&(A+=this.PS),this.OS[A]},Y.VS=function(){},Y.VS.prototype.US=function(A){this.ES=A},Y.VS.prototype.NS=function(){this.ES=null},Y.VS.prototype.init=function(){var A=5;for(this.ZS=0,this.YS=-1;A--;)this.ZS=this.ZS<<8|this.ES.JS()},Y.VS.prototype.XS=function(A){for(var i,g=0,I=A;I--;)this.YS>>>=1,i=this.ZS-this.YS>>>31,this.ZS-=this.YS&i-1,g=g<<1|1-i,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8);return g},Y.VS.prototype.qS=function(A,i){var g=A[i],I=(this.YS>>>11)*g;return(2147483648^this.ZS)<(2147483648^I)?(this.YS=I,A[i]+=2048-g>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),0):(this.YS-=I,this.ZS-=I,A[i]-=g>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),1)},Y.QS=function(A,i){for(;i--;)A[i]=1024},Y.KS=function(A){this.tR=[],this.iR=A},Y.KS.prototype.init=function(){Y.QS(this.tR,1<<this.iR)},Y.KS.prototype.decode=function(A){for(var i=1,g=this.iR;g--;)i=i<<1|A.qS(this.tR,i);return i-(1<<this.iR)},Y.KS.prototype.eR=function(A){for(var i,g=1,I=0,t=0;t<this.iR;++t)g=g<<1|(i=A.qS(this.tR,g)),I|=i<<t;return I},Y.nR=function(A,i,g,I){for(var t,B=1,Q=0,C=0;C<I;++C)B=B<<1|(t=g.qS(A,i+B)),Q|=t<<C;return Q},Y.oR=function(){this.rR=[],this.aR=[],this.sR=[],this.hR=new Y.KS(8),this.lR=0},Y.oR.prototype.create=function(A){for(;this.lR<A;++this.lR)this.aR[this.lR]=new Y.KS(3),this.sR[this.lR]=new Y.KS(3)},Y.oR.prototype.init=function(){var A=this.lR;for(Y.QS(this.rR,2);A--;)this.aR[A].init(),this.sR[A].init();this.hR.init()},Y.oR.prototype.decode=function(A,i){return 0===A.qS(this.rR,0)?this.aR[i].decode(A):0===A.qS(this.rR,1)?8+this.sR[i].decode(A):16+this.hR.decode(A)},Y.fR=function(){this.uR=[]},Y.fR.prototype.init=function(){Y.QS(this.uR,768)},Y.fR.prototype.cR=function(A){for(var i=1;(i=i<<1|A.qS(this.uR,i))<256;);return 255&i},Y.fR.prototype.dR=function(A,i){var g,I,t=1;do{if(g=i>>7&1,i<<=1,t=t<<1|(I=A.qS(this.uR,(1+g<<8)+t)),g!==I){for(;t<256;)t=t<<1|A.qS(this.uR,t);break}}while(t<256);return 255&t},Y.pR=function(){},Y.pR.prototype.create=function(A,i){var g;if(!this.vR||this.mR!==i||this.yR!==A)for(this.yR=A,this.xR=(1<<A)-1,this.mR=i,this.vR=[],g=1<<this.mR+this.yR;g--;)this.vR[g]=new Y.fR},Y.pR.prototype.init=function(){for(var A=1<<this.mR+this.yR;A--;)this.vR[A].init()},Y.pR.prototype.bR=function(A,i){return this.vR[((A&this.xR)<<this.mR)+((255&i)>>>8-this.mR)]},Y.gR=function(){this.wR=new Y.TS,this._R=new Y.VS,this.kR=[],this.MR=[],this.SR=[],this.RR=[],this.zR=[],this.CR=[],this.AR=[],this.IR=[],this.$R=new Y.KS(4),this.LR=new Y.oR,this.DR=new Y.oR,this.TR=new Y.pR,this.PR=-1,this.OR=-1,this.AR[0]=new Y.KS(6),this.AR[1]=new Y.KS(6),this.AR[2]=new Y.KS(6),this.AR[3]=new Y.KS(6)},Y.gR.prototype.FR=function(A){return!(A<0||(this.PR!==A&&(this.PR=A,this.OR=Math.max(this.PR,1),this.wR.create(Math.max(this.OR,4096))),0))},Y.gR.prototype.BR=function(A,i,g){var I=1<<g;return!(8<A||4<i||4<g||(this.TR.create(i,A),this.LR.create(I),this.DR.create(I),this.jR=I-1,0))},Y.gR.prototype.init=function(){var A=4;for(this.wR.init(!1),Y.QS(this.kR,192),Y.QS(this.CR,192),Y.QS(this.MR,12),Y.QS(this.SR,12),Y.QS(this.RR,12),Y.QS(this.zR,12),Y.QS(this.IR,114),this.TR.init();A--;)this.AR[A].init();this.LR.init(),this.DR.init(),this.$R.init(),this._R.init()},Y.gR.prototype.decode=function(A,i,g){var I,t,B,Q,C=0,e=0,o=0,E=0,h=0,a=0,l=0;for(this._R.US(A),this.wR.US(i),this.init();g<0||a<g;)if(Q=a&this.jR,0===this._R.qS(this.kR,(C<<4)+Q))B=this.TR.bR(a++,l),l=7<=C?B.dR(this._R,this.wR.HS(e)):B.cR(this._R),this.wR.GS(l),C=C<4?0:C-(C<10?3:6);else{if(1===this._R.qS(this.MR,C))(I=0)===this._R.qS(this.SR,C)?0===this._R.qS(this.CR,(C<<4)+Q)&&(C=C<7?9:11,I=1):(0===this._R.qS(this.RR,C)?t=o:(0===this._R.qS(this.zR,C)?t=E:(t=h,h=E),E=o),o=e,e=t),0===I&&(I=2+this.DR.decode(this._R,Q),C=C<7?8:11);else if(h=E,E=o,o=e,I=2+this.LR.decode(this._R,Q),C=C<7?7:10,4<=(B=this.AR[I<=5?I-2:3].decode(this._R))){if(e=(2|1&B)<<(Q=(B>>1)-1),B<14)e+=Y.nR(this.IR,e-B-1,this._R,Q);else if(e+=this._R.XS(Q-4)<<4,(e+=this.$R.eR(this._R))<0){if(-1===e)break;return!1}}else e=B;if(a<=e||e>=this.OR)return!1;this.wR.WS(e,I),a+=I,l=this.wR.HS(0)}return this.wR.flush(),this.wR.NS(),this._R.NS(),!0},Y.gR.prototype.ER=function(A){var i;return!(A.size<5)&&(i=A.JS(),!!this.BR(i%9,(i=~~(i/9))%5,~~(i/5))&&(i=A.JS(),i|=A.JS()<<8,i|=A.JS()<<16,i+=16777216*A.JS(),this.FR(i)))},Y.NR=function(A,i){var g,I=new Y.gR;if(!I.ER(A))throw new Error("Incorrect stream properties");if(g=A.JS(),g|=A.JS()<<8,g|=A.JS()<<16,g+=16777216*A.JS(),A.JS(),A.JS(),A.JS(),A.JS(),!I.decode(A,i,g))throw new Error("Error in data stream");return!0};var mA=1e-9;function qA(A,i,g){return function(A){for(var B,Q,g=0,I="",t=0,g=0;g<A.length;)(B=A[g])>>>7==0?("0"!==(Q=String.fromCharCode(A[g])).charCodeAt(0).toString(16)&&(I+=Q),g+=1):252==(252&B)?(t=(3&A[g])<<30,t|=(63&A[g+1])<<24,t|=(63&A[g+2])<<18,t|=(63&A[g+3])<<12,t|=(63&A[g+4])<<6,t|=63&A[g+5],I+=String.fromCharCode(t),g+=6):248==(248&B)?(t=(7&A[g])<<24,t|=(63&A[g+1])<<18,t|=(63&A[g+2])<<12,t|=(63&A[g+3])<<6,t|=63&A[g+4],I+=String.fromCharCode(t),g+=5):240==(240&B)?(t=(15&A[g])<<18,t|=(63&A[g+1])<<12,t|=(63&A[g+2])<<6,t|=63&A[g+3],I+=String.fromCharCode(t),g+=4):224==(224&B)?(t=(31&A[g])<<12,t|=(63&A[g+1])<<6,t|=63&A[g+2],I+=String.fromCharCode(t),g+=3):192==(192&B)?(t=(63&A[g])<<6,t|=63&A[g+1],I+=String.fromCharCode(t),g+=2):("0"!==(Q=String.fromCharCode(A[g])).charCodeAt(0).toString(16)&&(I+=Q),g+=1);return I.trim()}(A.subarray(i,g))}var I=new RegExp("^[+\\-]?[0-1]*[.]?[0-1]*$","gi");function WA(A,i){A=A.toString(),i=i.toString(),A=new Array(32-A.length+1).join("0")+A,i=new Array(32-i.length+1).join("0")+i;var g=I;return g.lastIndex=0,(A=(i+A).toString().match(g))?(g=-1===A[g=0].indexOf(".")?parseInt(A,2):g).toString(36).toUpperCase():"error"}A.getUnifyJson=function(A){var i=[];if(!(A instanceof ArrayBuffer)){var g={status:3,building:{},floor:{},id:""};return i.push(g),i}var I=new DataView(A),t=0,B=I.getInt16(t+=4,!1);t+=2;try{for(;0<B;){t+=4;var Q=I.getUint8(t);t+=1;for(var C=new ArrayBuffer(Q),e=new Uint8Array(C),o=0;o<Q;o++)e[o]=I.getUint8(t),t+=1;var E=qA(e,0,Q);t+=2;var h=I.getInt8(t);t+=1,0!==h&&((g={}).status=h,g.building={},g.floor={},g.id=E,i.push(g));var a=I.getInt32(t,!1);t+=4;var l=I.getInt32(t,!0);t+=4;var n=a-l;if(0!==l){for(var r=2078870821,s=8*Math.ceil(l/8),w=l%8,c=new ArrayBuffer(s),y=new Int32Array(c),x=0;8<=l;){var p=I.getInt32(t,!0),d=I.getInt32(t+4,!0),f=p^r,D=292664^d;y[x]=f,y[x+1]=D,x+=2,t+=8,l-=8}0!==l&&(p=I.getInt32(t,!0),d=I.getInt32(t+4,!0),f=p^r,D=292664^d,y[x]=f,y[x+1]=D,t+=l);for(var R=new Uint8Array(c),v=R.length,u=v-8+w,G=new Uint8Array(u),o=0;o<u;o++)G[o]=R[o];for(o=0;o<w;o++)G[u-w+o]=R[v-1-o];var S={data:G,offset:0,JS:function(){return this.data[this.offset++]}},b={data:[],offset:0,jS:function(A){this.data[this.offset++]=A}};Y.NR(S,b);for(var F=b.data,u=F.length,k=new ArrayBuffer(u),M=new Int8Array(k),o=0;o<u;o++)M[o]=F[o];(g=function(A){var i={},g={},I=new Uint8Array(A),t=new DataView(A),B=0;B+=4;var Q=t.getInt32(B+=4,!0);B+=4,B+=4,B+=4+(C=t.getInt32(B,!0));var E=WA(e=t.getUint32(B+=4,!0).toString(2),o=t.getUint32(B+4,!0).toString(2)),h=qA(I,B+=8,B+64),a=qA(I,B+=64,B+64),l=t.getInt8(B+=64),n=qA(I,B+=1,B+8),r=t.getInt16(B+=8,!0),s=t.getInt16(B+2,!0),w=t.getFloat32(B+=4,!0),c=t.getFloat32(B+4,!0);A=t.getFloat32(B+=8,!0);var C=t.getFloat32(B+4,!0),e=t.getFloat32(B+=8,!0),o=t.getFloat32(B+4,!0),y=t.getInt32(B+=8,!0),x=t.getInt32(B+=4,!0),p=t.getInt32(B+=4,!0);B+=4;for(var d=[],f=0;f<y;f++)d.push(t.getInt32(B,!0)),B+=4;for(var D=[],f=0;f<p;f++)D.push(t.getInt32(B,!0)),B+=4;for(var R=[],f=0;f<y;f++){var v=qA(I,B,B+48);R.push(v),B+=48}for(var u=[],f=0;f<y;f++){var G=qA(I,B,B+8);u.push(G),B+=8}for(var S=[],f=0;f<x;f++){var b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w;S.push([b,F]),B+=8}e={type:"Feature",geometry:{type:"Polygon",coordinates:[S]},properties:{pid:E,name_cn:h,name_en:a,default_floor:l,buildingtype:n,building_poi_style:[r,s],centerPoint:[c,w],left_bottom_Point:[A,C],width:e,height:o,numberofFloor:y,numberofGeoPoints:x,park_floor_count:p,floor_indexs:d,park_floors:D,floor_names:R,floor_nonas:u}};for(var k=0;k<Q;k++){var M=qA(I,B,B+8);B+=8;var Y=t.getInt8(B);B+=1,g[Y]={floor:{},shops:[],pubs:[],cons:[]};var N=t.getInt16(B,!0),J=t.getInt16(B+2,!0);B+=4;var U=t.getInt16(B,!0),L=t.getInt16(B+2,!0);B+=4;var H=t.getInt16(B,!0),K=t.getInt16(B+2,!0);B+=4;var m=t.getInt32(B,!0);B+=4;var q=t.getInt32(B,!0);B+=4;var W=t.getInt32(B,!0);B+=4;var Z=t.getInt32(B,!0);B+=4;for(var j=[],X=0;X<Z;X++){var z=t.getInt32(B,!0);B+=4;for(var T=[],O=0;O<z;O++)b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w,T.push([b,F]),B+=8;j.push(T)}var V="Polygon",P=j[0];1<Z&&(V="MultiPolygon",P=j),g[Y].floor={type:"Feature",geometry:{type:V,coordinates:[P]},properties:{namecode:M,index:Y,floor_region_type:[N,J],unhighlighted_floor_line_style:[U,L],highlighted_floor_line_style:[H,K],numberofShopCount:m,numberofPubCount:q,numberofConCount:W,floor_area_count:Z}};for(var _=[],$=0;$<m;$++){var AA=qA(I,B,B+128);B+=128;var iA,gA,IA=WA(iA=t.getUint32(B,!0).toString(2),gA=t.getUint32(B+4,!0).toString(2)),tA=qA(I,B+=8,B+24),BA=qA(I,B+=24,B+12);B+=12;var QA=t.getInt32(B,!0);B+=4;var CA=t.getFloat32(B,!0);B+=4;var eA=t.getInt8(B);B+=1;var oA=t.getInt16(B,!0),EA=t.getInt16(B+2,!0);B+=4;var hA=t.getInt16(B,!0),aA=t.getInt16(B+2,!0);B+=4,iA=t.getInt32(B,!0)*mA+c,gA=t.getInt32(B+4,!0)*mA+w,B+=8;var lA=t.getInt32(B,!0);B+=4;for(var nA=[],X=0;X<lA;X++)b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w,nA.push([b,F]),B+=8;_.push(gA={type:"Feature",geometry:{type:"Polygon",coordinates:[nA]},properties:{name:AA,pid:IA,cpid:tA,logo:BA,area:QA,rank:CA,height:eA,poitype:[oA,EA],regiontype:[hA,aA],font_anthor_point:[iA,gA],shop_point_number:lA}})}g[Y].shops=_;for(var rA=[],sA=0;sA<q;sA++){var wA=qA(I,B,B+24);B+=24;var cA,yA,xA=WA(cA=t.getUint32(B,!0).toString(2),yA=t.getUint32(B+4,!0).toString(2)),pA=qA(I,B+=8,B+48);B+=48;var dA=t.getFloat32(B,!0);B+=4,cA=t.getInt16(B,!0),yA=t.getInt16(B+2,!0),B+=4,b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w,B+=8,rA.push(yA={type:"Feature",geometry:{type:"Point",coordinates:[b,F]},properties:{cpid:wA,pid:xA,name:pA,rank:dA,poitype:[cA,yA]}})}g[Y].pubs=rA;for(var fA=[],DA=0;DA<W;DA++){var RA=qA(I,B,B+24);B+=24;var vA,uA,GA=WA(vA=t.getUint32(B,!0).toString(2),uA=t.getUint32(B+4,!0).toString(2)),SA=qA(I,B+=8,B+48);B+=48;var bA=t.getFloat32(B,!0);B+=4,vA=t.getInt16(B,!0),uA=t.getInt16(B+2,!0),B+=4,b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w,B+=8,fA.push(uA={type:"Feature",geometry:{type:"Point",coordinates:[b,F]},properties:{cpid:RA,pid:GA,name:SA,rank:bA,poitype:[vA,uA]}})}g[Y].cons=fA}o=t.getInt32(B+=4,!0);var FA=t.getInt32(B+=4+o,!0);B+=4;for(var kA=[],f=0;f<FA;f++)b=t.getInt32(B,!0)*mA+c,F=t.getInt32(B+4,!0)*mA+w,kA.push([b,F]),B+=8;e.properties.outside_outline=kA;var MA,YA={};for(MA in g)if(g.hasOwnProperty(MA)){for(YA.floor=g[MA].floor,O=0;O<g[MA].shops.length;O++){var NA=t.getInt16(B,!0);B+=2;var JA=t.getInt16(B,!0);B+=2,g[MA].shops[O].properties.zoom_min=NA,g[MA].shops[O].properties.zoom_max=JA}for(YA.shops=g[MA].shops,O=0;O<g[MA].pubs.length;O++){var UA=t.getInt16(B,!0);B+=2;var LA=t.getInt16(B,!0);B+=2,g[MA].pubs[O].properties.zoom_min=UA,g[MA].pubs[O].properties.zoom_max=LA}for(YA.pubs=g[MA].pubs,O=0;O<g[MA].cons.length;O++){var HA=t.getInt16(B,!0);B+=2;var KA=t.getInt16(B,!0);B+=2,g[MA].cons[O].properties.zoom_min=HA,g[MA].cons[O].properties.zoom_max=KA}YA.cons=g[MA].cons,i.floor=YA}return o=t.getInt32(B+=4,!0),o=t.getInt8(B+=4+o),B+=1,e.properties.UR=o,i.building=e,i}(k)).status=h,g.id=E,i.push(g)}t+=n,--B}}catch(A){}return i}}var obj={WR:parserFunc};parserFunc(obj);var IndoorMapBinDataParser=obj,OverlayWorker=(go.prototype.setPathWebgl=function(A,i){try{for(var g=new polyfill.K_,I=new polyfill.J_,t=new polyfill.oE,B=new polyfill.oE,Q=A.data,C=this.EW(Q[0][0][0]),e=0,o=Q;e<o.length;e++){for(var E=o[e],h=C.center,a=[],l=[],n=E[0],r=[],s=[],w=[],c=0,y=n;c<y.length;c++){var x=y[c],p=polyfill.ProjectionManager.getProjection("EPSG:3857").project(x[0],x[1]);a.push(p[0]-h[0],p[1]-h[1]),l.push(x)}for(var d=1,f=E.length;d<f;d++){for(var D=E[d],R=[],v=[],u=0,G=D;u<G.length;u++)x=G[u],polyfill.Bs(x)?(R.push(x.pos[0]-h[0],x.pos[1]-h[1]),v.push(x.toJSON())):(p=polyfill.ProjectionManager.getProjection("EPSG:3857").project(x[0],x[1]),R.push(p[0]-h[0],p[1]-h[1]),v.push(x));r.push(R),s.push(v)}for(var S=[],d=0,f=a.length;d<f;d+=2)S.push(polyfill.xd(a[d],a[d+1]));polyfill.equals(S[0],S[S.length-1])||S.push(polyfill.Ex(S[0]));for(var b=a.length,d=0;d<r.length;d++)w.push(b/2),b+=r[d].length,polyfill.Util.Ig(a,r[d]);var F=g.Nx(a,w);t.add(F);for(var k=I.Nx(S,{lineJoin:"miter"}).Iw,d=0;d<r.length;d++){for(var R=r[d],M=[],Y=0,f=R.length;Y<f;Y+=2)M.push(polyfill.xd(R[Y],R[Y+1]));M.push(polyfill.xd(R[0],R[1])),k+=I.Nx(M,{lineJoin:"miter"}).Iw}B.add(k)}i(null,{$c:I,Dc:g,Sx:C,Oc:t,Uc:B})}catch(A){i(A.message)}},go.prototype.AW=function(A,i){try{var g={},I=IndoorMapBinDataParser.getUnifyJson(A);if(!I)return!1;for(var t,B,Q,C,e,o,E,h=0;h<I.length;h++)0===I[h].status&&(B=(t=I[h]).floor,Q=t.building,C=t.status,e=t.id,o=B.floor.properties.index,g[e]||(g[e]={}),g[e].building=Q,g[e].data||(g[e].data={}),E={floor:B,status:C,id:e,building:Q},g[e].data[o]=E);i(null,g)}catch(A){i(A.message,null)}},go.prototype.EW=function(A){if(A)return A=polyfill.Bs(A)?polyfill.ProjectionManager.getProjection("EPSG:3857").project(A.KL,A.kT):polyfill.ProjectionManager.getProjection("EPSG:3857").project(A[0],A[1]),polyfill.lcs.getLocalByCoord(A)},go),wasm;function go(A){this.parent=A}var heap=new Array(32).fill(void 0);function getObject(A){return heap[A]}heap.push(void 0,null,!0,!1);var heap_next=heap.length;function dropObject(A){A<36||(heap[A]=heap_next,heap_next=A)}function takeObject(A){var i=getObject(A);return dropObject(A),i}var cachedTextDecoder=self.TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{};cachedTextDecoder.decode&&cachedTextDecoder.decode();var cachegetUint8Memory0=null;function getUint8Memory0(){return cachegetUint8Memory0=null===cachegetUint8Memory0||cachegetUint8Memory0.buffer!==wasm.memory.buffer?new Uint8Array(wasm.memory.buffer):cachegetUint8Memory0}function getStringFromWasm0(A,i){return cachedTextDecoder.decode(getUint8Memory0().subarray(A,A+i))}var WASM_VECTOR_LEN=0,cachedTextEncoder=self.TextEncoder?new TextEncoder:{},encodeString="function"==typeof cachedTextEncoder.encodeInto?function(A,i){return cachedTextEncoder.encodeInto(A,i)}:function(A,i){var g=cachedTextEncoder.encode(A);return i.set(g),{read:A.length,jW:g.length}};function passStringToWasm0(A,i,g){if(void 0===g){var I=cachedTextEncoder.encode(A),t=i(I.length);return getUint8Memory0().subarray(t,t+I.length).set(I),WASM_VECTOR_LEN=I.length,t}for(var B=A.length,Q=i(B),C=getUint8Memory0(),e=0;e<B;e++){var o=A.charCodeAt(e);if(127<o)break;C[Q+e]=o}return e!==B&&(Q=g(Q,B,B=e+3*(A=0!==e?A.slice(e):A).length),g=getUint8Memory0().subarray(Q+e,Q+B),e+=encodeString(A,g).jW),WASM_VECTOR_LEN=e,Q}var cachegetInt32Memory0=null;function getInt32Memory0(){return cachegetInt32Memory0=null===cachegetInt32Memory0||cachegetInt32Memory0.buffer!==wasm.memory.buffer?new Int32Array(wasm.memory.buffer):cachegetInt32Memory0}function addHeapObject(A){heap_next===heap.length&&heap.push(heap.length+1);var i=heap_next;return heap_next=heap[i],heap[i]=A,i}var RSAPublicKeyPair=(Hp.XW=function(A){var i=Object.create(Hp.prototype);return i.UW=A,i},Hp.prototype.VW=function(){var A=this.UW;this.UW=0,wasm.__wbg_rsapublickeypair_free(A)},Hp.prototype.init=function(){wasm.rsapublickeypair_init(this.UW)},Hp.prototype.encode=function(A){try{var i=passStringToWasm0(A,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),g=WASM_VECTOR_LEN;return wasm.rsapublickeypair_encode(8,this.UW,i,g),getStringFromWasm0(I=getInt32Memory0()[2],t=getInt32Memory0()[3])}finally{var I=getInt32Memory0()[2],t=getInt32Memory0()[3];wasm.__wbindgen_free(I,t)}},Hp);function Hp(){var A=wasm.rsapublickeypair_new();return Hp.XW(A)}function loadSync(A,i){var g=new WebAssembly.Module(A);return{module:A,instance:new WebAssembly.Instance(g,i)}}function initSync(A){var i={wbg:{}};return i.wbg.__wbg_new_59cb74e423758ede=function(){return addHeapObject(new Error)},i.wbg.__wbg_stack_558ba5917b466edd=function(A,i){var g=passStringToWasm0(getObject(i).stack,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),i=WASM_VECTOR_LEN;getInt32Memory0()[A/4+1]=i,getInt32Memory0()[A/4+0]=g},i.wbg.__wbg_error_4bb6c2a97407129a=function(A,i){try{console.error(getStringFromWasm0(A,i))}finally{wasm.__wbindgen_free(A,i)}},i.wbg.__wbindgen_object_drop_ref=function(A){takeObject(A)},i.wbg.__wbindgen_throw=function(A,i){throw new Error(getStringFromWasm0(A,i))},i=loadSync(A,i).instance,wasm=i.exports}var data="AGFzbQEAAAABaBBgAn9/AGACf38Bf2ADf39/AX9gA39/fwBgAX8AYAF/AX9gBH9/f38AYAAAYAV/f39/fwF/YAF/AX5gBX9/f39/AGAAAX9gBH9/f38Bf2AGf39/f39/AGAHf39/f39/fwF/YAJ+fwF/AqABBQN3YmcaX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGUACwN3YmccX193Ymdfc3RhY2tfNTU4YmE1OTE3YjQ2NmVkZAAAA3diZxxfX3diZ19lcnJvcl80YmI2YzJhOTc0MDcxMjlhAAADd2JnGl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmAAQDd2JnEF9fd2JpbmRnZW5fdGhyb3cAAAPSAdABAAUECgIAAggEAQEHAgMBAwAIAAQABQYEAAABBQ4DAAMPAwEAAQMACAELAAMGCgAGAwYBAwYBAAMAAAEBAwEBAAUGAAAFBwQBBgoDBAQBCAMDAwEBAwMBAQEBBQAAAQAFAwcAAAEGAAAFAwAAAgwAAwMNAwcAAAAEBAACCwwFBAAFAQABAAADAAAAAAMHAwAFAAAAAAIEBAUEBAMABAQEBQAAAQEBAwYFDAAAAAIBBAEBAwIDAQUFAwAHAQECAQcHAAEAAQEHAAkBBQEFCQkEAAQFAXABS0sFAwEAEQYJAX8BQYCAwAALB7IBCAZtZW1vcnkCABtfX3diZ19yc2FwdWJsaWNrZXlwYWlyX2ZyZWUAngEUcnNhcHVibGlja2V5cGFpcl9uZXcAgAEVcnNhcHVibGlja2V5cGFpcl9pbml0AIMBF3JzYXB1YmxpY2tleXBhaXJfZW5jb2RlADERX193YmluZGdlbl9tYWxsb2MAggESX193YmluZGdlbl9yZWFsbG9jAJkBD19fd2JpbmRnZW5fZnJlZQCwAQmEAQEAQQELStMBaKAB0wHMAdMBN9MBywHLAcsB0wGKAZgB0wFNzwHQAdMB0wFGzQHOAcIB0wGpAdMBtwEpYleGAaMBhgGGAdQB0wGxARNbiAHRAagBmgFppwF8xgGaASgzmwHSAWylAcwBWMABuQFMDr8BtAGyAVLTAdEBES1ewQHIAVzJAQqhtQLQAf05Af0BfyMAQeABayICJAAgAkE4aiABQYABQQBBEEHsk8AAEHYgAkFAayACKAI4IAIoAjwQJiACQTBqIAFBgAFBEEEgQfyTwAAQdiACQdAAaiACKAIwIAIoAjQQJiACQShqIAFBgAFBIEEwQYyUwAAQdiACQeAAaiACKAIoIAIoAiwQJiACQSBqIAFBgAFBMEHAAEGclMAAEHYgAkHwAGogAigCICACKAIkECYgAkEYaiABQYABQcAAQdAAQayUwAAQdiACQYABaiACKAIYIAIoAhwQJiACQRBqIAFBgAFB0ABB4ABBvJTAABB2IAJBkAFqIAIoAhAgAigCFBAmIAJBCGogAUGAAUHgAEHwAEHMlMAAEHYgAkGgAWogAigCCCACKAIMECYgAiABQYABQfAAQYABQdyUwAAQdiACQbABaiACKAIAIAIoAgQQJiACKAJAIQogAigCRCELIAIoAkghDCACKAJMIQ0gAkHYAWoiASACQdgAaiIDKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBARBZIAIoAsABIQ4gAigCxAEhDyACKALIASEQIAIoAswBIREgASACQegAaiIEKQMANwMAIAIgAikDYDcD0AEgAkHAAWogAkHQAWpBAhBZIAIoAsABIRIgAigCxAEhEyACKALIASEUIAIoAswBIRUgASACQfgAaiIFKQMANwMAIAIgAikDcDcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABIRYgAigCxAEhFyACKALIASEYIAIoAswBIRkgASACQYgBaiIGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASEaIAIoAsQBIRsgAigCyAEhHCACKALMASEdIAEgAkGYAWoiBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhHiACKALEASEfIAIoAsgBISAgAigCzAEhISABIAJBqAFqIggpAwA3AwAgAiACKQOgATcD0AEgAkHAAWogAkHQAWpBBhBZIAIoAsABISIgAigCxAEhIyACKALIASEkIAIoAswBISUgASACQbgBaiIJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQcQWSACKALAASEmIAIoAsQBIScgAigCyAEhKCACKALMASEpIAEgAikDSDcDACACIAIpA0A3A9ABIAJBwAFqIAJB0AFqQQEQWiACKALAASEqIAIoAsQBISsgAigCyAEhLCACKALMASEtIAMoAgAhLiACKAJQIS8gAigCVCEwIAIoAlwhMSABIAQpAwA3AwAgAiACKQNgNwPQASACQcABaiACQdABakEBEFkgAigCwAEhMiACKALEASEzIAIoAsgBITQgAigCzAEhNSABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakECEFkgAigCwAEhNiACKALEASE3IAIoAsgBITggAigCzAEhOSABIAYpAwA3AwAgAiACKQOAATcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABITogAigCxAEhOyACKALIASE8IAIoAswBIT0gASAHKQMANwMAIAIgAikDkAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASE+IAIoAsQBIT8gAigCyAEhQCACKALMASFBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhQiACKALEASFDIAIoAsgBIUQgAigCzAEhRSABIAkpAwA3AwAgAiACKQOwATcD0AEgAkHAAWogAkHQAWpBBhBZIAIoAsABIUYgAigCxAEhRyACKALIASFIIAIoAswBIUkgASACKQNINwMAIAIgAikDQDcD0AEgAkHAAWogAkHQAWpBAhBaIAIoAsABIUogAigCxAEhSyACKALIASFMIAIoAswBIU0gASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBARBaIAIoAsABIU4gAigCxAEhTyACKALIASFQIAIoAswBIVEgBCgCACFSIAIoAmAhUyACKAJkIVQgAigCbCFVIAEgBSkDADcDACACIAIpA3A3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASFWIAIoAsQBIVcgAigCyAEhWCACKALMASFZIAEgBikDADcDACACIAIpA4ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhWiACKALEASFbIAIoAsgBIVwgAigCzAEhXSABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABIV4gAigCxAEhXyACKALIASFgIAIoAswBIWEgASAIKQMANwMAIAIgAikDoAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASFiIAIoAsQBIWMgAigCyAEhZCACKALMASFlIAEgCSkDADcDACACIAIpA7ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhZiACKALEASFnIAIoAsgBIWggAigCzAEhaSABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEDEFogAigCwAEhaiACKALEASFrIAIoAsgBIWwgAigCzAEhbSABIAMpAwA3AwAgAiACKQNQNwPQASACQcABaiACQdABakECEFogAigCwAEhbiACKALEASFvIAIoAsgBIXAgAigCzAEhcSABIAQpAwA3AwAgAiACKQNgNwPQASACQcABaiACQdABakEBEFogAigCwAEhciACKALEASFzIAIoAsgBIXQgAigCzAEhdSAFKAIAIXYgAigCcCF3IAIoAnQheCACKAJ8IXkgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASF6IAIoAsQBIXsgAigCyAEhfCACKALMASF9IAEgBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhfiACKALEASF/IAIoAsgBIYABIAIoAswBIYEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEDEFkgAigCwAEhggEgAigCxAEhgwEgAigCyAEhhAEgAigCzAEhhQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASGGASACKALEASGHASACKALIASGIASACKALMASGJASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEEEFogAigCwAEhigEgAigCxAEhiwEgAigCyAEhjAEgAigCzAEhjQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBAxBaIAIoAsABIY4BIAIoAsQBIY8BIAIoAsgBIZABIAIoAswBIZEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQIQWiACKALAASGSASACKALEASGTASACKALIASGUASACKALMASGVASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakEBEFogAigCwAEhlgEgAigCxAEhlwEgAigCyAEhmAEgAigCzAEhmQEgBigCACGaASACKAKAASGbASACKAKEASGcASACKAKMASGdASABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBARBZIAIoAsABIZ4BIAIoAsQBIZ8BIAIoAsgBIaABIAIoAswBIaEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhogEgAigCxAEhowEgAigCyAEhpAEgAigCzAEhpQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQMQWSACKALAASGmASACKALEASGnASACKALIASGoASACKALMASGpASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEFEFogAigCwAEhqgEgAigCxAEhqwEgAigCyAEhrAEgAigCzAEhrQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBBBaIAIoAsABIa4BIAIoAsQBIa8BIAIoAsgBIbABIAIoAswBIbEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQMQWiACKALAASGyASACKALEASGzASACKALIASG0ASACKALMASG1ASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakECEFogAigCwAEhtgEgAigCxAEhtwEgAigCyAEhuAEgAigCzAEhuQEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQEQWiACKALAASG6ASACKALEASG7ASACKALIASG8ASACKALMASG9ASAHKAIAIb4BIAIoApABIb8BIAIoApQBIcABIAIoApwBIcEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEBEFkgAigCwAEhwgEgAigCxAEhwwEgAigCyAEhxAEgAigCzAEhxQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQIQWSACKALAASHGASACKALEASHHASACKALIASHIASACKALMASHJASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEGEFogAigCwAEhygEgAigCxAEhywEgAigCyAEhzAEgAigCzAEhzQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBRBaIAIoAsABIc4BIAIoAsQBIc8BIAIoAsgBIdABIAIoAswBIdEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQQQWiACKALAASHSASACKALEASHTASACKALIASHUASACKALMASHVASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakEDEFogAigCwAEh1gEgAigCxAEh1wEgAigCyAEh2AEgAigCzAEh2QEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQIQWiACKALAASHaASACKALEASHbASACKALIASHcASACKALMASHdASABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBARBaIAIoAsABId4BIAIoAsQBId8BIAIoAsgBIeABIAIoAswBIeEBIAgoAgAh4gEgAigCoAEh4wEgAigCpAEh5AEgAigCrAEh5QEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASHmASACKALEASHnASACKALIASHoASACKALMASHpASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEHEFogAigCwAEh6gEgAigCxAEh6wEgAigCyAEh7AEgAigCzAEh7QEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBhBaIAIoAsABIQMgAigCxAEh7gEgAigCyAEh7wEgAigCzAEh8AEgASAEKQMANwMAIAIgAikDYDcD0AEgAkHAAWogAkHQAWpBBRBaIAIoAsABIQQgAigCxAEh8QEgAigCyAEh8gEgAigCzAEh8wEgASAFKQMANwMAIAIgAikDcDcD0AEgAkHAAWogAkHQAWpBBBBaIAIoAsABIQUgAigCxAEh9AEgAigCyAEh9QEgAigCzAEh9gEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQMQWiACKALAASEGIAIoAsQBIfcBIAIoAsgBIfgBIAIoAswBIfkBIAEgBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakECEFogAigCwAEhByACKALEASH6ASACKALIASH7ASACKALMASH8ASABIAgpAwA3AwAgAiACKQOgATcD0AEgAkHAAWogAkHQAWpBARBaIAIoAsABIQEgAigCxAEhCCACKALIASH9ASACKALMASH+ASAAQewAaiDpAUGAgYKEeHEg5QFBwICBggRxIOEBQaDAgIECcSDdAUGQoMCAAXEg2QFBiJCgwABxINUBQYSIkCBxINEBQYKEiBBxIM0BQYGChAhxcnJycnJycjYCACAAQegAaiDoAUGAgYKEeHEg4gFBwICBggRxIOABQaDAgIECcSDcAUGQoMCAAXEg2AFBiJCgwABxINQBQYSIkCBxINABQYKEiBBxIMwBQYGChAhxcnJycnJycjYCACAAQeQAaiDnAUGAgYKEeHEg5AFBwICBggRxIN8BQaDAgIECcSDbAUGQoMCAAXEg1wFBiJCgwABxINMBQYSIkCBxIM8BQYKEiBBxIMsBQYGChAhxcnJycnJycjYCACAAIOYBQYCBgoR4cSDjAUHAgIGCBHEg3gFBoMCAgQJxINoBQZCgwIABcSDWAUGIkKDAAHEg0gFBhIiQIHEgzgFBgoSIEHEgygFBgYKECHFycnJycnJyNgJgIABB3ABqIMkBQYCBgoR4cSDFAUHAgIGCBHEgwQFBoMCAgQJxIL0BQZCgwIABcSC5AUGIkKDAAHEgtQFBhIiQIHEgsQFBgoSIEHEgrQFBgYKECHFycnJycnJyNgIAIABB2ABqIMgBQYCBgoR4cSDEAUHAgIGCBHEgvgFBoMCAgQJxILwBQZCgwIABcSC4AUGIkKDAAHEgtAFBhIiQIHEgsAFBgoSIEHEgrAFBgYKECHFycnJycnJyNgIAIABB1ABqIMcBQYCBgoR4cSDDAUHAgIGCBHEgwAFBoMCAgQJxILsBQZCgwIABcSC3AUGIkKDAAHEgswFBhIiQIHEgrwFBgoSIEHEgqwFBgYKECHFycnJycnJyNgIAIAAgxgFBgIGChHhxIMIBQcCAgYIEcSC/AUGgwICBAnEgugFBkKDAgAFxILYBQYiQoMAAcSCyAUGEiJAgcSCuAUGChIgQcSCqAUGBgoQIcXJycnJycnI2AlAgAEHMAGogqQFBgIGChHhxIKUBQcCAgYIEcSChAUGgwICBAnEgnQFBkKDAgAFxIJkBQYiQoMAAcSCVAUGEiJAgcSCRAUGChIgQcSCNAUGBgoQIcXJycnJycnI2AgAgAEHIAGogqAFBgIGChHhxIKQBQcCAgYIEcSCgAUGgwICBAnEgmgFBkKDAgAFxIJgBQYiQoMAAcSCUAUGEiJAgcSCQAUGChIgQcSCMAUGBgoQIcXJycnJycnI2AgAgAEHEAGogpwFBgIGChHhxIKMBQcCAgYIEcSCfAUGgwICBAnEgnAFBkKDAgAFxIJcBQYiQoMAAcSCTAUGEiJAgcSCPAUGChIgQcSCLAUGBgoQIcXJycnJycnI2AgAgACCmAUGAgYKEeHEgogFBwICBggRxIJ4BQaDAgIECcSCbAUGQoMCAAXEglgFBiJCgwABxIJIBQYSIkCBxII4BQYKEiBBxIIoBQYGChAhxcnJycnJycjYCQCAAQTxqIIkBQYCBgoR4cSCFAUHAgIGCBHEggQFBoMCAgQJxIH1BkKDAgAFxIHlBiJCgwABxIHVBhIiQIHEgcUGChIgQcSBtQYGChAhxcnJycnJycjYCACAAQThqIIgBQYCBgoR4cSCEAUHAgIGCBHEggAFBoMCAgQJxIHxBkKDAgAFxIHZBiJCgwABxIHRBhIiQIHEgcEGChIgQcSBsQYGChAhxcnJycnJycjYCACAAQTRqIIcBQYCBgoR4cSCDAUHAgIGCBHEgf0GgwICBAnEge0GQoMCAAXEgeEGIkKDAAHEgc0GEiJAgcSBvQYKEiBBxIGtBgYKECHFycnJycnJyNgIAIAAghgFBgIGChHhxIIIBQcCAgYIEcSB+QaDAgIECcSB6QZCgwIABcSB3QYiQoMAAcSByQYSIkCBxIG5BgoSIEHEgakGBgoQIcXJycnJycnI2AjAgAEEsaiBpQYCBgoR4cSBlQcCAgYIEcSBhQaDAgIECcSBdQZCgwIABcSBZQYiQoMAAcSBVQYSIkCBxIFFBgoSIEHEgTUGBgoQIcXJycnJycnI2AgAgAEEoaiBoQYCBgoR4cSBkQcCAgYIEcSBgQaDAgIECcSBcQZCgwIABcSBYQYiQoMAAcSBSQYSIkCBxIFBBgoSIEHEgTEGBgoQIcXJycnJycnI2AgAgAEEkaiBnQYCBgoR4cSBjQcCAgYIEcSBfQaDAgIECcSBbQZCgwIABcSBXQYiQoMAAcSBUQYSIkCBxIE9BgoSIEHEgS0GBgoQIcXJycnJycnI2AgAgACBmQYCBgoR4cSBiQcCAgYIEcSBeQaDAgIECcSBaQZCgwIABcSBWQYiQoMAAcSBTQYSIkCBxIE5BgoSIEHEgSkGBgoQIcXJycnJycnI2AiAgAEEcaiBJQYCBgoR4cSBFQcCAgYIEcSBBQaDAgIECcSA9QZCgwIABcSA5QYiQoMAAcSA1QYSIkCBxIDFBgoSIEHEgLUGBgoQIcXJycnJycnI2AgAgAEEYaiBIQYCBgoR4cSBEQcCAgYIEcSBAQaDAgIECcSA8QZCgwIABcSA4QYiQoMAAcSA0QYSIkCBxIC5BgoSIEHEgLEGBgoQIcXJycnJycnI2AgAgAEEUaiBHQYCBgoR4cSBDQcCAgYIEcSA/QaDAgIECcSA7QZCgwIABcSA3QYiQoMAAcSAzQYSIkCBxIDBBgoSIEHEgK0GBgoQIcXJycnJycnI2AgAgACBGQYCBgoR4cSBCQcCAgYIEcSA+QaDAgIECcSA6QZCgwIABcSA2QYiQoMAAcSAyQYSIkCBxIC9BgoSIEHEgKkGBgoQIcXJycnJycnI2AhAgACApQYCBgoR4cSAlQcCAgYIEcSAhQaDAgIECcSAdQZCgwIABcSAZQYiQoMAAcSAVQYSIkCBxIBFBgoSIEHEgDUGBgoQIcXJycnJycnI2AgwgACAoQYCBgoR4cSAkQcCAgYIEcSAgQaDAgIECcSAcQZCgwIABcSAYQYiQoMAAcSAUQYSIkCBxIBBBgoSIEHEgDEGBgoQIcXJycnJycnI2AgggACAnQYCBgoR4cSAjQcCAgYIEcSAfQaDAgIECcSAbQZCgwIABcSAXQYiQoMAAcSATQYSIkCBxIA9BgoSIEHEgC0GBgoQIcXJycnJycnI2AgQgACAmQYCBgoR4cSAiQcCAgYIEcSAeQaDAgIECcSAaQZCgwIABcSAWQYiQoMAAcSASQYSIkCBxIA5BgoSIEHEgCkGBgoQIcXJycnJycnI2AgAgAEH8AGogAigCvAFBgIGChHhxIP4BQcCAgYIEcSD8AUGgwICBAnEg+QFBkKDAgAFxIPYBQYiQoMAAcSDzAUGEiJAgcSDwAUGChIgQcSDtAUGBgoQIcXJycnJycnI2AgAgAEH4AGogCSgCAEGAgYKEeHEg/QFBwICBggRxIPsBQaDAgIECcSD4AUGQoMCAAXEg9QFBiJCgwABxIPIBQYSIkCBxIO8BQYKEiBBxIOwBQYGChAhxcnJycnJycjYCACAAQfQAaiACKAK0AUGAgYKEeHEgCEHAgIGCBHEg+gFBoMCAgQJxIPcBQZCgwIABcSD0AUGIkKDAAHEg8QFBhIiQIHEg7gFBgoSIEHEg6wFBgYKECHFycnJycnJyNgIAIAAgAigCsAFBgIGChHhxIAFBwICBggRxIAdBoMCAgQJxIAZBkKDAgAFxIAVBiJCgwABxIARBhIiQIHEgA0GChIgQcSDqAUGBgoQIcXJycnJycnI2AnAgAkHgAWokAAulCgILfwF+IwBBIGsiBiQAQQEhCAJAAkAgACgCGEEiIABBHGooAgAoAhARAQANAEH0n8AAIQQDQAJAIAQhCiAEQQFqIQMCQAJ/IAQsAAAiBUF/TARAAn8gA0GNoMAARgRAQQAhAUGNoMAADAELIAQtAAFBP3EhASAEQQJqIgMLIQQgASAFQR9xIglBBnRyIAVB/wFxIgtB3wFNDQEaAn8gBEGNoMAARgRAQQAhCEGNoMAADAELIAQtAABBP3EhCCAEQQFqIgMLIQUgCCABQQZ0ciIBIAlBDHRyIAtB8AFJDQEaAn8gBUGNoMAARgRAIAMhBEEADAELIAVBAWohBCAFLQAAQT9xCyAJQRJ0QYCA8ABxIAFBBnRyciIBQYCAxABHDQIMAwsgBUH/AXELIQEgAyEEC0ECIQMCQAJAAkACQCABQXdqIglBHksEQCABQdwARw0BDAILQfQAIQUCQAJAIAlBAWsOHgECAgACAgICAgICAgICAgICAgICAgICAgMCAgICAwQLQfIAIQUMAwtB7gAhBQwCCwJAIAEQGg0AAkAgAUGAgARPBEAgAUGAgAhJDQEgAUGQ/EdqQZD8C0kgAUG12XNqQbXbK0lyIAFB4ot0akHiC0kgAUGfqHRqQZ8YSXJyIAFB/v//AHFBnvAKRiABQd7idGpBDklyIAFBorJ1akEiSSABQcuRdWpBCk1ycnINAgwFCyABQdiswABBKUGqrcAAQaICQcyvwABBtQIQIUUNAQwECyABQYGywABBJkHNssAAQa8BQfyzwABBowMQIQ0DCyABQQFyZ0ECdkEHc61CgICAgNAAhCEMQQMhAwsgASEFCyAGQRk2AgQgBkH0n8AANgIAIAYgAjYCCCAGIAc2AgwCQAJAIAcgAkkNACACRSACQRlGckUEQCACQRlPDQEgAkH0n8AAaiwAAEG/f0wNAQsgB0UgB0EZRnJFBEAgB0EZTw0BIAdB9J/AAGosAABBv39MDQELIAAoAhggAkH0n8AAaiAHIAJrIAAoAhwoAgwRAgBFDQFBASEIDAULIAYgBkEMajYCGCAGIAZBCGo2AhQgBiAGNgIQIAZBEGoQnQEACwNAIAMhCUEBIQhB3AAhAkEBIQMCQAJ+AkACQAJAAkAgCUEBaw4DAQUAAgsCQAJAAkACQCAMQiCIp0H/AXFBAWsOBQMCAQAGBQsgDEL/////j2CDQoCAgIAwhCEMQQMhA0H1ACECDAcLIAxC/////49gg0KAgICAIIQhDEEDIQNB+wAhAgwGCyAFIAynIglBAnRBHHF2QQ9xIgNBMHIgA0HXAGogA0EKSRshAiAMQn98Qv////8PgyAMQoCAgIBwg4QgCQ0EGiAMQv////+PYINCgICAgBCEDAQLIAxC/////49ggyEMQQMhA0H9ACECDAQLQQAhAyAFIQIMAwsCf0EBIAFBgAFJDQAaQQIgAUGAEEkNABpBA0EEIAFBgIAESRsLIAdqIQIMBAsgDEL/////j2CDQoCAgIDAAIQLIQxBAyEDCyAAKAIYIAIgACgCHCgCEBEBAEUNAAsMAwsgByAKayAEaiEHIARBjaDAAEcNAQsLIAJFIAJBGUZyRQRAIAJBGU8NAiACQfSfwABqLAAAQb9/TA0CC0EBIQggACgCGCACQfSfwABqQRkgAmsgACgCHCgCDBECAA0AIAAoAhhBIiAAKAIcKAIQEQEAIQgLIAZBIGokACAIDwtB9J/AAEEZIAJBGUGoqsAAEAgAC/8IARJ/IwBB0MMAayIBJAAQeCABQSBqQQgQayABQRhqIAFBIGoQrwEgAUEwaiABKAIYIAEoAhwQOCABQUBrIAFBMGoQZyABQZAdaiABQUBrEAogAUGwGWogAUGQHWpBsAEQfxogAUHgGmogAUHAHmpBsAEQfxogAUGQHGpBgAEQlgEDQCACQbABRwRAIAFB8DVqIAJqIgRCADcBACAEQQhqQgA3AQAgAkEQaiECDAELC0EAIQIDQCACQbABRwRAIAFBoDdqIAJqIgRCADcBACAEQQhqQgA3AQAgAkEQaiECDAELCyABQZAdaiABQZAcakGAARB/GkEAIQIDQCACQYALRwRAIAFB0DhqIAJqIAFBkB1qQYABEH8aIAJBgAFqIQIMAQsLIAFBkB1qIAFBkBxqQYABEH8aQQAhAgNAIAJBgAtHBEAgAUHQAGogAmogAUGQHWpBgAEQfxogAkGAAWohAgwBCwsgAUGQM2ogAUHwNWpBsAEQfxogAUHANGogAUGgN2pBsAEQfxogAUGQHWogAUHQOGpBgAsQfxogAUGQKGogAUHQAGpBgAsQfxogAUEQakEAQQsQuAEgASABKQMQNwPQOAJAA0AgAUEIaiABQdA4ahBzIAEoAghFDQEgASgCDCILQQpNBEAgC0EEdCIFIAFBsBlqaiICKAIAIgQgAigCBCIIIAIoAggiCSACKAIMIgpBABAsIQYgBCAIIAkgCkEBECwhByAEIAggCSAKQQIQLCEDIAQgCCAJIApBAxAsIQwgBCAIIAkgCkEEECwhDSAEIAggCSAKQQUQLCEOIAQgCCAJIApBBhAsIQ8gAUGQHWogBWoiAkGOFmogBCAIIAkgCkEHECw7AQAgAkGMFmogDzsBACACQYoWaiAOOwEAIAJBiBZqIA07AQAgAkGGFmogDDsBACACQYQWaiADOwEAIAJBghZqIAc7AQAgAkGAFmogBjsBACABQeAaaiAFaiIDKAIAIgUgAygCBCIGIAMoAggiByADKAIMIgNBABAsIQwgBSAGIAcgA0EBECwhDSAFIAYgByADQQIQLCEOIAUgBiAHIANBAxAsIQ8gBSAGIAcgA0EEECwhECAFIAYgByADQQUQLCERIAUgBiAHIANBBhAsIRIgAkG+F2ogBSAGIAcgA0EHECw7AQAgAkG8F2ogEjsBACACQboXaiAROwEAIAJBuBdqIBA7AQAgAkG2F2ogDzsBACACQbQXaiAOOwEAIAJBshdqIA07AQAgAkGwF2ogDDsBACABQdAAaiAEIAggCSAKEDIgAUGQHWogC0EHdGogAUHQAGpBgAEQfyABQdAAaiAFIAYgByADEDJBgAtqIAFB0ABqQYABEH8aDAELCyALQQtBgIPAABBUAAsgAUHQAGogAUGQHWpB4BgQfxogAUGYHWoiAiABQShqKAIANgIAIAEgASkDIDcDkB0gABChASAAQQhqIAIoAgA2AgAgACABKQOQHTcCACAAQQE2AgwgAEEQaiABQdAAakHgGBB/GiABQdDDAGokAAuUCAEGfyMAQfAAayIFJAAgBSADNgIMIAUgAjYCCEEBIQkgASEHAkAgAUGBAkkNAEEAIAFrIQhBgAIhBgNAAkAgBiABTw0AIAAgBmosAABBv39MDQBBACEJIAYhBwwCCyAGQX9qIQdBACEJIAZBAUYNASAGIAhqIAchBkEBRw0ACwsgBSAHNgIUIAUgADYCECAFQQBBBSAJGzYCHCAFQbijwABBuKrAACAJGzYCGAJAAkACQAJAIAIgAUsiBiADIAFLckUEQCACIANLDQECQCACRSABIAJGckUEQCABIAJNDQEgACACaiwAAEFASA0BCyADIQILIAUgAjYCICACRSABIAJGcg0CIAFBAWohAwNAIAIgAUkEQCAAIAJqLAAAQUBODQQLIAJBf2ohBiACQQFGDQQgAiADRiAGIQJFDQALDAMLIAUgAiADIAYbNgIoIAVBxABqQQM2AgAgBUHcAGpBOzYCACAFQdQAakE7NgIAIAVCAzcCNCAFQeCqwAA2AjAgBUE6NgJMIAUgBUHIAGo2AkAgBSAFQRhqNgJYIAUgBUEQajYCUCAFIAVBKGo2AkgMAwsgBUHkAGpBOzYCACAFQdwAakE7NgIAIAVB1ABqQTo2AgAgBUHEAGpBBDYCACAFQgQ3AjQgBUGcq8AANgIwIAVBOjYCTCAFIAVByABqNgJAIAUgBUEYajYCYCAFIAVBEGo2AlggBSAFQQxqNgJQIAUgBUEIajYCSAwCCyACIQYLAkAgASAGRg0AQQEhBwJAAkACQCAAIAZqIggsAAAiAkF/TARAQQAhCSAAIAFqIgMhASADIAhBAWpHBEAgCC0AAUE/cSEJIAhBAmohAQsgAkEfcSEIIAJB/wFxQd8BSw0BIAkgCEEGdHIhAQwCCyAFIAJB/wFxNgIkIAVBKGohAgwCC0EAIQAgAyEHIAEgA0cEfyABQQFqIQcgAS0AAEE/cQUgAAsgCUEGdHIhACACQf8BcUHwAUkEQCAAIAhBDHRyIQEMAQtBACECIAMgB0cEfyAHLQAAQT9xBSACCyAIQRJ0QYCA8ABxIABBBnRyciIBQYCAxABGDQILIAUgATYCJEEBIQcgBUEoaiECIAFBgAFJDQBBAiEHIAFBgBBJDQBBA0EEIAFBgIAESRshBwsgBSAGNgIoIAUgBiAHajYCLCAFQcQAakEFNgIAIAVB7ABqQTs2AgAgBUHkAGpBOzYCACAFQdwAakE8NgIAIAVB1ABqQT02AgAgBUIFNwI0IAVB8KvAADYCMCAFIAI2AlggBUE6NgJMIAUgBUHIAGo2AkAgBSAFQRhqNgJoIAUgBUEQajYCYCAFIAVBJGo2AlAgBSAFQSBqNgJIDAELQd2jwABBKyAEEHcACyAFQTBqIAQQkwEAC8gGAQx/IABBEGooAgAhAwJAAkACQAJAIABBCGooAgAiDUEBRwRAIANBAUYNASAAKAIYIAEgAiAAQRxqKAIAKAIMEQIAIQMMAwsgA0EBRw0BCwJAIAJFBEBBACECDAELIAEgAmohByAAQRRqKAIAQQFqIQogASIDIQsDQCADQQFqIQUCQAJ/IAMsAAAiBEF/TARAAn8gBSAHRgRAQQAhCCAHDAELIAMtAAFBP3EhCCADQQJqIgULIQMgBEEfcSEJIAggCUEGdHIgBEH/AXEiDkHfAU0NARoCfyADIAdGBEBBACEMIAcMAQsgAy0AAEE/cSEMIANBAWoiBQshBCAMIAhBBnRyIQggCCAJQQx0ciAOQfABSQ0BGgJ/IAQgB0YEQCAFIQNBAAwBCyAEQQFqIQMgBC0AAEE/cQsgCUESdEGAgPAAcSAIQQZ0cnIiBEGAgMQARw0CDAQLIARB/wFxCyEEIAUhAwsgCkF/aiIKBEAgBiALayADaiEGIAMhCyADIAdHDQEMAgsLIARBgIDEAEYNAAJAIAZFIAIgBkZyRQRAQQAhAyAGIAJPDQEgASAGaiwAAEFASA0BCyABIQMLIAYgAiADGyECIAMgASADGyEBCyANQQFGDQAMAgtBACEFIAIEQCACIQQgASEDA0AgBSADLQAAQcABcUGAAUZqIQUgA0EBaiEDIARBf2oiBA0ACwsgAiAFayAAKAIMIgdPDQFBACEGQQAhBSACBEAgAiEEIAEhAwNAIAUgAy0AAEHAAXFBgAFGaiEFIANBAWohAyAEQX9qIgQNAAsLIAUgAmsgB2oiAyEEAkACQAJAQQAgAC0AICIFIAVBA0YbQQFrDgMBAAECCyADQQF2IQYgA0EBakEBdiEEDAELQQAhBCADIQYLIAZBAWohAwJAA0AgA0F/aiIDRQ0BIAAoAhggACgCBCAAKAIcKAIQEQEARQ0AC0EBDwsgACgCBCEFQQEhAyAAKAIYIAEgAiAAKAIcKAIMEQIADQAgBEEBaiEDIAAoAhwhASAAKAIYIQADQCADQX9qIgNFBEBBAA8LIAAgBSABKAIQEQEARQ0AC0EBDwsgAw8LIAAoAhggASACIABBHGooAgAoAgwRAgAL7gYBB38jAEGwA2siAiQAIAJBQGsQUCACQThqQQBBBBC4ASACIAIpAzg3A/ABAkACQAJAAkADQCACQTBqIAJB8AFqEHMgAigCMEUEQCACQShqQQRBLBC4ASACIAIpAyg3A/ABAkACQAJAAkACQAJAA0ACQCACQSBqIAJB8AFqEHMgAigCIEUEQCACQfABahBQIAJB+AFqIAJByABqKQMANwMAIAIgAikDQDcD8AEgAkEYakEBQQoQuAEgAiACKQMYNwOgAwNAIAJBEGogAkGgA2oQcyACKAIQRQ0CIAIoAhQhASACQQhqQQBBBBC4ASACIAIpAwg3A6gDA0AgAiACQagDahBzIAIoAgBFDQEgAUEKSw0JIAIoAgQiA0EDSw0KIANBAnQiAyABQQR0IgQgAkHwAWpqaiACQUBrIARqIANqKAIAEEk2AgAMAAsACwALIAIoAiQiA0F/aiIBQQJ2IQQgAUErSw0CIAJBQGsgBEEEdGogAUEDcUECdGooAgAhASADQQNxIgdFBEAgAUEYdxCFASEEIANBAnZBP3FBf2oiAUEJSw0EIAFBAnRBnJDAAGooAgAgBHMhAQsgA0F8aiIEQQJ2IQUgBEErSw0EIANBAnYhBiADQStLDQUgAkFAayAGQQR0aiAHQQJ0aiACQUBrIAVBBHRqIARBA3FBAnRqKAIAIAFzNgIADAELCyACQZgDaiACQegBaikDADcDACACIAIpA+ABNwOQAyAAIAJBQGtBsAEQf0GwAWogAkHwAWpBsAEQfxogAkGwA2okAA8LIARBC0G4hcAAEFQACyABQQpByIXAABBUAAsgBUELQdiFwAAQVAALIAZBC0HohcAAEFQACyABQQtB+IXAABBUAAsgA0EEQfiFwAAQVAALIAIoAjRBAnQiBEEPTQRAIARBAXIiBUEPSw0CIARBAnIiBkEPSw0DIARBA3IiB0EPSw0EIANBAnYhCCADQSxGDQUgAkFAayAIQQR0aiADQQNxQQJ0aiABIARqLQAAIAEgBWotAABBCHRyIAEgBmotAABBEHRyIAEgB2otAABBGHRyNgIAIANBAWohAwwBCwsgBEEQQeiEwAAQVAALIAVBEEH4hMAAEFQACyAGQRBBiIXAABBUAAsgB0EQQZiFwAAQVAALIAhBC0GohcAAEFQAC5wGAQp/IwBBMGsiBCQAIARBJGogATYCACAEQQM6ACggBEKAgICAgAQ3AwggBCAANgIgIARBADYCGCAEQQA2AhACQAJAAkAgAigCCCIFBEAgAigCACEHIAIoAgQiCSACQQxqKAIAIgMgAyAJSxsiC0UNASACQRRqKAIAIQggAigCECEKQQEhAyAAIAcoAgAgBygCBCABKAIMEQIADQMgB0EMaiECQQEhBgJAAkADQCAEIAVBBGooAgA2AgwgBCAFQRxqLQAAOgAoIAQgBUEIaigCADYCCCAFQRhqKAIAIQNBACEBQQAhAAJAAkACQCAFQRRqKAIAQQFrDgIAAgELIAMgCE8NAyADQQN0IApqIgwoAgRBPkcNASAMKAIAKAIAIQMLQQEhAAsgBCADNgIUIAQgADYCECAFQRBqKAIAIQMCQAJAAkAgBUEMaigCAEEBaw4CAAIBCyADIAhPDQQgA0EDdCAKaiIAKAIEQT5HDQEgACgCACgCACEDC0EBIQELIAQgAzYCHCAEIAE2AhggBSgCACIAIAhJBEAgCiAAQQN0aiIAKAIAIARBCGogACgCBBEBAA0GIAYgC08NBSACQXxqIQAgAigCACEBIAJBCGohAiAFQSBqIQVBASEDIAZBAWohBiAEKAIgIAAoAgAgASAEKAIkKAIMEQIARQ0BDAcLCyAAIAhBiKjAABBUAAsgAyAIQZiowAAQVAALIAMgCEGYqMAAEFQACyACKAIAIQcgAigCBCIJIAJBFGooAgAiAyADIAlLGyIIRQ0AIAIoAhAhBUEBIQMgACAHKAIAIAcoAgQgASgCDBECAA0CIAdBDGohAkEBIQYDQCAFKAIAIARBCGogBUEEaigCABEBAA0CIAYgCE8NASACQXxqIQAgAigCACEBIAJBCGohAiAFQQhqIQUgBkEBaiEGIAQoAiAgACgCACABIAQoAiQoAgwRAgBFDQALDAILIAkgBksEQEEBIQMgBCgCICAHIAZBA3RqIgAoAgAgACgCBCAEKAIkKAIMEQIADQILQQAhAwwBC0EBIQMLIARBMGokACADC8wFAQd/QStBgIDEACAAKAIAIglBAXEiBRshCiAEIAVqIQgCQCAJQQRxRQRAQQAhAQwBCyACBEAgAiEGIAEhBQNAIAcgBS0AAEHAAXFBgAFGaiEHIAVBAWohBSAGQX9qIgYNAAsLIAIgCGogB2shCAtBASEFAkAgACgCCEEBRwRAIAAgCiABIAIQcg0BIAAoAhggAyAEIABBHGooAgAoAgwRAgAhBQwBCyAAQQxqKAIAIgYgCE0EQCAAIAogASACEHINASAAKAIYIAMgBCAAQRxqKAIAKAIMEQIADwsCQCAJQQhxRQRAQQAhBSAGIAhrIgYhCAJAAkACQEEBIAAtACAiByAHQQNGG0EBaw4DAQABAgsgBkEBdiEFIAZBAWpBAXYhCAwBC0EAIQggBiEFCyAFQQFqIQUDQCAFQX9qIgVFDQIgACgCGCAAKAIEIAAoAhwoAhARAQBFDQALQQEPCyAAKAIEIQkgAEEwNgIEIAAtACAhCyAAQQE6ACAgACAKIAEgAhByDQFBACEFIAYgCGsiASECAkACQAJAQQEgAC0AICIGIAZBA0YbQQFrDgMBAAECCyABQQF2IQUgAUEBakEBdiECDAELQQAhAiABIQULIAVBAWohBQJAA0AgBUF/aiIFRQ0BIAAoAhggACgCBCAAKAIcKAIQEQEARQ0AC0EBDwsgACgCBCEBQQEhBSAAKAIYIAMgBCAAKAIcKAIMEQIADQEgAkEBaiEHIAAoAhwhAiAAKAIYIQMDQCAHQX9qIgcEQCADIAEgAigCEBEBAEUNAQwDCwsgACALOgAgIAAgCTYCBEEADwsgACgCBCEGQQEhBSAAIAogASACEHINACAAKAIYIAMgBCAAKAIcKAIMEQIADQAgCEEBaiEHIAAoAhwhASAAKAIYIQADQCAHQX9qIgdFBEBBAA8LIAAgBiABKAIQEQEARQ0ACwsgBQuuAwEFfyMAQRBrIgIkACACQQJyIQRB1MbAACgCACEBAkACQANAAkACQCABQQNLDQACQAJAIAFBAWsOAwACBQELQZifwABBKkHEn8AAEJIBAAtB1MbAAEHUxsAAKAIAIgFBAiABGzYCACABDQIMAQsgAUEDcUECRw0DAkACQANAQYjHwAAoAgBBAUcEQEGIx8AAQgE3AgBBkMfAAEEANgIACyABIQMQLiEFQdTGwAAgBEHUxsAAKAIAIgEgASADRhs2AgAgAkEAOgAIIAIgBTYCACACIANBfHE2AgQCQCABIANGBEAgAi0ACEUNAQwDCwJAIAIoAgAiA0UNACADIAMoAgAiA0F/ajYCACADQQFHDQAgAhBRCyABQQNxQQJGDQEMAwsLA0AQECACLQAIRQ0ACwsgAigCACIBRQ0AIAEgASgCACIBQX9qNgIAIAFBAUcNACACEFFB1MbAACgCACEBDAILQdTGwAAoAgAhAQwBCwsgAkHUxsAANgIAIABBAEGQiMAAKAIAEQAAIAJBAzYCBCACEBgLIAJBEGokAA8LQc+ewABBOUGIn8AAEJIBAAu5BQIEfwF+QQEgASgCGEEnIAFBHGooAgAoAhARAQBFBEBBAiECAkACQAJAIAAoAgAiAEF3aiIEQR5LBEAgAEHcAEcNAQwCC0H0ACEDAkACQCAEQQFrDh4BAgIAAgICAgICAgICAgICAgICAgICAgIDAgICAgMEC0HyACEDDAMLQe4AIQMMAgsCQAJ+IAAQGkUEQAJAAkAgAEGAgARPBEAgAEGAgAhJDQEgAEGQ/EdqQZD8C0kgAEG12XNqQbXbK0lyIABB4ot0akHiC0kgAEGfqHRqQZ8YSXJyIABB/v//AHFBnvAKRiAAQd7idGpBDklyIABBorJ1akEiSXJyDQIgAEHLkXVqQQpLDQUMAgsgAEHYrMAAQSlBqq3AAEGiAkHMr8AAQbUCECFFDQEMBAsgAEGBssAAQSZBzbLAAEGvAUH8s8AAQaMDECENAwsgAEEBcmdBAnZBB3OtQoCAgIDQAIQMAQsgAEEBcmdBAnZBB3OtQoCAgIDQAIQLIQZBAyECDAELQQEhAgsgACEDCwNAIAIhBEHcACEAQQEhAgJAAn4CQAJAAkACQCAEQQFrDgMBBQACCwJAAkACQAJAIAZCIIinQf8BcUEBaw4FAwIBAAYFC0H1ACEAIAZC/////49gg0KAgICAMIQMBgtB+wAhACAGQv////+PYINCgICAgCCEDAULIAMgBqciAkECdEEccXZBD3EiAEEwciAAQdcAaiAAQQpJGyEAIAZCf3xC/////w+DIAZCgICAgHCDhCACDQQaIAZC/////49gg0KAgICAEIQMBAtB/QAhACAGQv////+PYIMMAwtBACECIAMhAAwDCyABKAIYQScgASgCHCgCEBEBAA8LIAZC/////49gg0KAgICAwACECyEGQQMhAgsgASgCGCAAIAEoAhwoAhARAQBFDQALCwvPAwEJfyAALwEAIgQgAUEMakEPcSIDdkEBcUEYdCAEIAFBCGpBD3EiAnZBAXFBEHRyIAAvAQIiBSACdkEBcUERdHIgBSADdkEBcUEZdHIgAC8BBCIGIAJ2QQFxQRJ0ciAGIAN2QQFxQRp0ciAALwEGIgcgAnZBAXFBE3RyIAcgA3ZBAXFBG3RyIAAvAQgiCCACdkEBcUEUdHIgCCADdkEBcUEcdHIgAC8BCiIJIAJ2QQFxQRV0ciAJIAN2QQFxQR10ciAALwEMIgogAnZBAXFBFnRyIAogA3ZBAXFBHnRyIAAvAQ4iACADdkEfdHIgACACdkEBcUEXdHIgBCABQQRqQQ9xIgJ2QQh0QYACcSAEIAFBD3EiAXZBAXFyIAUgAXZBAXRBAnFyIAUgAnZBCXRBgARxciAGIAF2QQJ0QQRxciAGIAJ2QQp0QYAIcXIgByABdkEDdEEIcXIgByACdkELdEGAEHFyIAggAXZBBHRBEHFyIAggAnZBDHRBgCBxciAJIAF2QQV0QSBxciAJIAJ2QQ10QYDAAHFyIAogAXZBBnRBwABxciAKIAJ2QQ50QYCAAXFyIAAgAnZBD3RyIAAgAXZBB3RBgAFxckH//wNxcgv2BAEGfyMAQeAAayIAJABBiMfAACgCAEEBRwRAQYjHwABCATcCAEGQx8AAQQA2AgALEC4iAUEAIAEoAhgiAiACQQJGIgIbNgIYIAAgATYCCAJAIAINAAJAAkACQCAAKAIIIgFBHGoiBCgCACICLQAARQRAIAJBAToAAEEAIQICQEGYx8AAKAIAQQFGBEBBnMfAACgCACECDAELQZjHwABCATcDAAtBnMfAACACNgIAIAEtACANASABIAEoAhgiA0EBIAMbNgIYIANFBEAgACgCCEEkaiAEKAIAEIwBQeihwABBHUGkosAAEJIBAAsgA0ECRw0CIAAoAggiBSgCGCEDIAVBADYCGCAAIAM2AgwgA0ECRw0DAkAgAg0AQZjHwAAoAgBBAUcEQEGYx8AAQgE3AwAMAQtBnMfAACgCAEUNACABQQE6ACALIAQoAgBBADoAAAwEC0G0osAAQSBB8KLAABCSAQALIAAgBDYCSCAAIAJBAEc6AExBiJrAAEErIABByABqQbSawABBkJvAABBOAAtBoJvAAEEXQbibwAAQkgEACyAAQTxqQR82AgAgAEE0akEjNgIAIABBJGpBAzYCACAAIABBDGo2AkAgAEHIm8AANgJEIABB3ABqQQA2AgAgAEIDNwIUIABBlJnAADYCECAAQSM2AiwgAEGAmcAANgJYIABCATcCTCAAQeybwAA2AkggACAAQShqNgIgIAAgAEHIAGo2AjggACAAQcQAajYCMCAAIABBQGs2AiggAEEQakH0m8AAEI0BAAsgACgCCCIBIAEoAgAiAUF/ajYCACABQQFGBEAgAEEIahBRCyAAQeAAaiQAC5IEAQd/IwBBMGsiAyQAAn9BACACRQ0AGiADQShqIQgCQAJAAkACQANAIAAoAggtAAAEQCAAKAIAQcylwABBBCAAKAIEKAIMEQIADQULIANBCjYCKCADQoqAgIAQNwMgIAMgAjYCHCADQQA2AhggAyACNgIUIAMgATYCECADQQhqQQogASACEBsCfwJAAkAgAygCCEEBRgRAIAMoAgwhBANAIAMgBCADKAIYakEBaiIENgIYAkAgBCADKAIkIgVJBEAgAygCFCEHDAELIAMoAhQiByAESQ0AIAVBBU8NByAEIAVrIgYgAygCEGoiCSAIRg0EIAkgCCAFEHFFDQQLIAMoAhwiBiAESSAHIAZJcg0CIAMgAyAFakEnai0AACADKAIQIARqIAYgBGsQGyADKAIEIQQgAygCAEEBRg0ACwsgAyADKAIcNgIYCyAAKAIIQQA6AAAgAgwBCyAAKAIIQQE6AAAgBkEBagshBCAAKAIEIQUgACgCACAERSACIARGciIGRQRAIAIgBE0NAyABIARqLAAAQb9/TA0DCyABIAQgBSgCDBECAA0EIAZFBEAgAiAETQ0EIAEgBGosAABBv39MDQQLIAEgBGohASACIARrIgINAAtBAAwECyAFQQRB4KnAABBVAAsgASACQQAgBEGYqsAAEAgACyABIAIgBCACQaiqwAAQCAALQQELIANBMGokAAvQAwIFfwF+IwBBQGoiAyQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAgBBAWsOAgIAAQsgAigCBCIEIAJBCGooAgBqIgIgBE8NAiADQShqIAJBABC4ASADKQMoIQggAEEBNgIAIAAgCDcCBAwKCyABKAIEIgIEQCACQQF0IQIMAgtBBCECDAILIAIoAgQiBCACQQhqKAIAaiICIARJDQIgASgCBEEBdCIEIAIgBCACSxshAgsgAkEASA0CCyADQTBqIAEQhwEgAygCMCIGDQIgA0EIaiACQQEQdSADKAIIIgVFDQMgAygCDCEEDAULIANBIGogAkEAELgBIAMpAyAhCCAAQQE2AgAgACAINwIEDAULIANBGGogA0EAELgBIAMpAxghCCAAQQE2AgAgACAINwIEDAQLIAZBACACIAMoAjQiBEYiBxshBQJAIAdFBEAgA0E4aigCACEFIAQNASADQRBqIAIgBRB1IAMoAhAhBSADKAIUIQQLIAVFDQEMAwsgBiAEIAUgAhCtASIFDQELIAMgAkEBELgBIAMpAwAhCCAAQQE2AgAgACAINwIEDAILIAIhBAsgASAFIAQQuAEgAEEANgIACyADQUBrJAALzAMBBH8jAEEQayICJAAgACgCACEEAkACQAJAAkACQCABQYABTwRAIAJBADYCDCABQYAQSQ0BIAJBDGohACABQYCABEkEQCACIAFBP3FBgAFyOgAOIAIgAUEGdkE/cUGAAXI6AA0gAiABQQx2QQ9xQeABcjoADEEDIQEMBQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEEIQEMBAsgBCgCCCIAIARBBGooAgBHBEAgBCgCACEDDAMLAkACQAJAIABBAWoiAyAASQ0AIABBAXQiBSADIAUgA0sbIgVBAEgNAAJAIAAEQCAEKAIAIgMNAQsgBQ0CQQEhAwwFCyAAIAVHBEAgAyAAQQEgBRCtASEDCyADRQ0CIAQoAgghAAwECxC+AQALIAVBARC1ASIDDQILIAVBARDHAQALIAIgAUE/cUGAAXI6AA0gAiABQQZ2QR9xQcABcjoADCACQQxqIQBBAiEBDAILIAQgAzYCACAEQQRqIAU2AgALIAAgA2ogAToAACAEIAQoAghBAWo2AggMAQsgBCAAIAAgAWoQMAsgAkEQaiQAQQALogMBBX8jAEEwayIDJAAgA0EoaiIEIAFBCGopAQA3AwAgAyABKQEANwMgIANBEGogA0EgaiACEGUgA0EIakEBQQoQuAEgAygCDCEHIAMoAgghAQJAA0ACQCABIAdPDQAgAUEBaiIFIAFJDQAgBCADQRhqIgYpAwA3AwAgAyADKQMQNwMgIANBEGogA0EgahBgIAQgBikDADcDACADIAMpAxA3AyAgA0EQaiADQSBqEEQgBCAGKQMANwMAIAMgAykDEDcDICADQRBqIANBIGoQGSAEIAYpAwA3AwAgAyADKQMQNwMgIAFBC08NAiADQRBqIANBIGogAiABQQR0ahBlIAUhAQwBCwsgA0EoaiIFIANBGGoiASkDADcDACADIAMpAxA3AyAgA0EQaiADQSBqEGAgBSABKQMANwMAIAMgAykDEDcDICADQRBqIANBIGoQRCAFIAEpAwA3AwAgAyADKQMQNwMgIANBEGogA0EgaiACQaABahBlIABBCGogASkDADcBACAAIAMpAxA3AQAgA0EwaiQADwsgAUELQfSAwAAQVAALvgMCCH8DfiMAQUBqIgIkACABLwEIIQMgAS8BACEEIAEvAQohBSABLwECIQYgAS8BDCEHIAEvAQQhCCACIAEvAQ4iCSABLwEGIgFzOwE+IAIgByAIczsBPCACIAUgBnM7ATogAiADIARzOwE4IAJBCGogAkE4ahB7IAIgA61C//8DgyAFrUL//wODQhCGhCAHrUL//wODQiCGhCAJrUIwhoQiCzcDMCACIAStQv//A4MgBq1C//8Dg0IQhoQgCK1C//8Dg0IghoQgAa1CMIaEIgw3AzggAkEQaiACQTBqIAJBOGoQNSACIAIpAxAgAikDCIUiCj0BOCACIApCMIg9AT4gAiAKQiCIPQE8IAIgCkIQiD0BOiACQRhqIAJBOGoQPiACIAIpAxgiCjcDMCACIAw3AzggAkEgaiACQTBqIAJBOGoQNSACIAo3AzAgAiALNwM4IAJBKGogAkEwaiACQThqEDUgACACKQMgIgpCMIg9AQ4gACAKQiCIPQEMIAAgCkIQiD0BCiAAIAo9AQggACACKQMoIgpCMIg9AQYgACAKQiCIPQEEIAAgCkIQiD0BAiAAIAo9AQAgAkFAayQAC7ADAQd/IAFBf2ohCSAAQQJ0IQdBACABayEKIAIoAgAhBQJAAkADQCAFRQ0CIAUhAQNAAkAgASgCCCIFQQFxRQRAAkAgASgCAEF8cSILIAFBCGoiBmsgB08EQCAGIAMgACAEKAIQEQEAQQJ0akEIaiALIAdrIApxIgVNDQEgBiAJcUUNAyAGKAIAIQULIAIgBTYCAAwECyAFQQA2AgAgBUF4aiIFQgA3AgAgBSABKAIAQXxxNgIAIAEoAgAiAkF8cSIARSACQQJxckUEQCAAIAAoAgRBA3EgBXI2AgQLIAUgBSgCBEEDcSABcjYCBCABIAEoAghBfnE2AgggASABKAIAIgBBA3EgBXIiAjYCACAAQQJxRQ0EIAEgAkF9cTYCACAFIAUoAgBBAnI2AgAMBAsgASAFQX5xNgIIAn9BACABKAIEQXxxIgVFDQAaQQAgBSAFLQAAQQFxGwshBSABEEsgAS0AAEECcQRAIAUgBSgCAEECcjYCAAsgAiAFNgIAIAUhAQwBCwsLIAIgASgCCEF8cTYCACABIQULIAUgBSgCAEEBcjYCACAFQQhqIQgLIAgLtwMBBH8CQAJAAkACQAJAIAFBBGooAgAiAiABKAIIIgRGBEAgBEEBaiICIARJIAJBAEhyDQECQAJAAkACQCAEBEAgASgCACIDDQELIAINAUEBIQMMAwsgAiAERwRAIAMgBEEBIAIQrQEhAwsgA0UNAQwCCyACQQEQtQEiAw0BCyACQQEQxwEACyABIAM2AgAgAUEEaiACNgIACyACIARHBEAgBEEBaiEDIAEoAgAhBQwFCyAEQQFqIgMgBEkNACAEQQF0IgUgAyAFIANLGyICQQBIDQACQCAEBEAgASgCACIFDQELIAINAkEBIQUMBAsgAiAERwRAIAUgBEEBIAIQrQEhBQsgBUUNAgwDCxC+AQALIAJBARC1ASIFDQELIAJBARDHAQALIAEgBTYCACABQQRqIAI2AgALIAQgBWpBADoAACABIAM2AggCQCACIANGBEAgBSEBDAELAkAgAiADTwRAIAINASAFIQEMAgtBxJrAAEEkQZCXwAAQdwALIANFBEBBASEBIAUgAkEBELwBDAELIAUgAkEBIAMQrQEiAQ0AIANBARDHAQALIAAgAzYCBCAAIAE2AgAL6wMBBH8jAEFAaiIBJAAgACgCACICKAIAIQMgAiAAKAIENgIAIAEgA0EDcSIANgIMIABBAkYEQAJAAkACQCADQXxxIgAEQANAIAAoAgQgACgCACECIABBADYCACACRQ0CIABBAToACCACKAIYIQAgAkECNgIYIAEgAjYCKAJAAkAgAEECTQRAIABBAWsNAgwBC0GcncAAQRxBuJ3AABCSAQALIAEoAigiBEEcaiICKAIAIgAtAAANBCAAQQE6AABBnMfAAAJ/QZjHwAAoAgBBAUYEQEGcx8AAKAIADAELQZjHwABCATcDAEEACyIANgIAIAQtACANBSACKAIAQQA6AAALIAEoAigiACAAKAIAIgBBf2o2AgAgAEEBRgRAIAFBKGoQUQsiAA0ACwsgAUFAayQADwtBrJnAAEErQeSfwAAQdwALQbSiwABBIEHwosAAEJIBAAsgASACNgIQIAEgAEEARzoAFEGImsAAQSsgAUEQakG0msAAQcidwAAQTgALIAFBNGpBIzYCACABQSRqQQI2AgAgAUIDNwIUIAFB6JjAADYCECABQSM2AiwgASABQQxqNgI4IAFByJvAADYCPCABIAFBKGo2AiAgASABQTxqNgIwIAEgAUE4ajYCKCABQRBqQdSfwAAQjQEAC7kDASJ/IAEvAQwhAiABLwEKIQMgAS8BCCEEIAEvAQYhBSABLwEEIQYgAS8BAiEHIAEvAQAhCCABLwEOIgEQrAEhCSAIEKwBIQogCBCsASAIcxCkASELIAgQrAEhDCABEKwBIQ0gBxCsASEOIAcQrAEgB3MQpAEhDyAHEKwBIRAgBhCsASERIAYQrAEgBnMQpAEhEiAGEKwBIRMgARCsASEUIAUQrAEhFSAFEKwBIAVzEKQBIRYgBRCsASEXIAEQrAEhGCAEEKwBIRkgBBCsASAEcxCkASEaIAQQrAEhGyADEKwBIRwgAxCsASADcxCkASEdIAMQrAEhHiACEKwBIR8gAhCsASACcxCkASEgIAIQrAEhISABEKwBISIgARCsASABcxCkASEjIAAgICAfIAMgHnNzczsBDCAAIB0gHCAEIBtzc3M7AQogACAaIBkgGCAXIAEgBXNzc3NzOwEIIAAgFiAVIBQgEyABIAZzc3NzczsBBiAAIBIgESAHIBBzc3M7AQQgACAPIA4gDSAMIAEgCHNzc3NzOwECIAAgCyAKIAEgCXNzczsBACAAICMgIiACICFzc3M7AQ4LlQMBBX8CQAJAQQBBDyAAQaSaBEkbIgEgAUEIaiIBIAFBAnRBjLjAAGooAgBBC3QgAEELdCIBSxsiAiACQQRqIgIgAkECdEGMuMAAaigCAEELdCABSxsiAiACQQJqIgIgAkECdEGMuMAAaigCAEELdCABSxsiAiACQQFqIgIgAkECdEGMuMAAaigCAEELdCABSxsiAkECdEGMuMAAaigCAEELdCIDIAFGIAMgAUlqIAJqIgFBHk0EQCABQQJ0IQVBsQUhAgJAIAFBHkYNACAFQZC4wABqIgNFDQAgAygCAEEVdiECCyABQX9qIgMgAU0EQCADQR9PDQMgA0ECdEGMuMAAaigCAEH///8AcSEECwJAIAIgBUGMuMAAaigCAEEVdiIBQQFqRg0AIAAgBGshAyACQX9qIQJBACEAA0AgAUGwBUsNAyAAIAFBiLnAAGotAABqIgAgA0sNASACIAFBAWoiAUcNAAsLIAFBAXEPCyABQR9BxLfAABBUAAsgAUGxBUHUt8AAEFQACyADQR9B5LfAABBUAAvrAgEGfwJAAkAgAkEDcSIERQ0AQQQgBGsiBEUNACADIAQgBCADSxshBUEAIQQgAUH/AXEhCANAIAQgBUYNASACIARqIARBAWohBC0AACIGIAhHDQALQQEhAyAGIAFB/wFxRkEBakEBcSAEakF/aiEEDAELIAFB/wFxIQgCQAJAIANBCEkNACAFIANBeGoiBksNACAIQYGChAhsIQQDQCACIAVqIgdBBGooAgAgBHMiCUF/cyAJQf/9+3dqcSAHKAIAIARzIgdBf3MgB0H//ft3anFyQYCBgoR4cUUEQCAFQQhqIgUgBk0NAQsLIAUgA0sNAQsgAiAFaiECIAMgBWshBkEAIQNBACEEAkADQCAEIAZGDQEgAiAEaiAEQQFqIQQtAAAiByAIRw0AC0EBIQMgByABQf8BcUZBAWpBAXEgBGpBf2ohBAsgBCAFaiEEDAELIAUgA0HIqMAAEFYACyAAIAQ2AgQgACADNgIAC6IDAQR/IwBB8ABrIgEkACABIAA2AkQgAUEANgJoIAFCATcDYCABQdwAakEBNgIAIAFCATcCTCABQYyKwAA2AkggAUEYNgI8IAEgAUE4ajYCWCABIAFBxABqNgI4IAFB4ABqIAFByABqEF1FBEAgAUHgAGoQogEgAUEwaiIDIAFB6ABqIgAoAgA2AgAgASABKQNgNwMoIAFBKGpB2IvAAEHii8AAEIsBIAFBIGoQACICEAEgAUHIAGogASgCICABKAIkIgQgBBCrASABQRhqIAFByABqEKYBIAFBOGogASgCGCABKAIcEKoBIAFBEGogAUE4ahCvASABQShqIAEoAhAgASgCFBC2ASABQShqQeKLwABB5IvAABCLASAAIAMoAgA2AgAgASABKQMoNwNgIAFBCGogAUHgAGoQrwEgAUHQAGogACgCADYCACABIAEpA2A3A0ggASABQcgAahCmASABKAIAIAEoAgQQAiABQThqEKEBIAJBJE8EQCACEAMLIAFB8ABqJAAPC0GUisAAQTcgAUHIAGpByIvAAEG4i8AAEE4AC6MDAQN/IwBBMGsiAiQAIAJBEGoiBCABQQhqKQIANwMAIAIgASkCADcDCCACQRhqIgFBCGogAkEIaiIDKAIEIAMoAgBrQQF0IAMoAgxBgIDEAEdyIgM2AgAgAUEBNgIEIAEgAzYCACAAIAIoAhgQvQEgAkEgaiAEKQMANwMAIAIgAikDCDcDGANAIAAgAkEsagJ/AkAgAkEYahBfIgFBgIDEAEcEQCABQYABTwRAIAJBADYCLCABQYAQSQ0CIAFBgIAESQRAIAIgAUE/cUGAAXI6AC4gAiABQQZ2QT9xQYABcjoALSACIAFBDHZBD3FB4AFyOgAsQQMMBAsgAiABQT9xQYABcjoALyACIAFBEnZB8AFyOgAsIAIgAUEGdkE/cUGAAXI6AC4gAiABQQx2QT9xQYABcjoALUEEDAMLIAAoAgggACgCBEYEQCAAQQEQvQELIAAoAgAgACgCCGogAToAACAAIAAoAghBAWo2AggMAwsgAkEwaiQADwsgAiABQT9xQYABcjoALSACIAFBBnZBH3FBwAFyOgAsQQILELYBDAALAAujAwIEfwJ+IwBBQGoiAiQAQQEhBAJAIAAtAAQNACAALQAFIQUgACgCACIDLQAAQQRxRQRAIAMoAhhB1aXAAEHXpcAAIAUbQQJBAyAFGyADQRxqKAIAKAIMEQIADQEgACgCACIDKAIYQcK+wABBByADQRxqKAIAKAIMEQIADQEgACgCACIDKAIYQZCkwABBAiADQRxqKAIAKAIMEQIADQEgASAAKAIAQYC4wAAoAgARAQAhBAwBCyAFRQRAIAMoAhhB0KXAAEEDIANBHGooAgAoAgwRAgANASAAKAIAIQMLIAJBAToAFyACQTRqQbSlwAA2AgAgAiADKQIYNwMIIAIgAkEXajYCECADKQIIIQYgAykCECEHIAIgAy0AIDoAOCACIAc3AyggAiAGNwMgIAIgAykCADcDGCACIAJBCGo2AjAgAkEIakHCvsAAQQcQEQ0AIAJBCGpBkKTAAEECEBENACABIAJBGGpBgLjAACgCABEBAA0AIAIoAjBB06XAAEECIAIoAjQoAgwRAgAhBAsgAEEBOgAFIAAgBDoABCACQUBrJAALkAMBA38jAEFAaiICJAACf0EBIAEoAhhBtKTAAEEMIAFBHGooAgAoAgwRAgANABoCQCAAKAIIIgNFBEAgACgCACIDIAAoAgQoAgwRCQBC5K7ChZebpYgRUg0BIAIgAzYCDCACQcAANgIUIAIgAkEMajYCECABKAIYIQMgASgCHCEEIAJBPGpBATYCACACQgI3AiwgAkHEpMAANgIoIAIgAkEQajYCOEEBIAMgBCACQShqEAsNAhoMAQsgAiADNgIMIAJBwQA2AhQgAiACQQxqNgIQIAEoAhghAyABKAIcIQQgAkE8akEBNgIAIAJCAjcCLCACQcSkwAA2AiggAiACQRBqNgI4QQEgAyAEIAJBKGoQCw0BGgsgACgCDCEAIAJBJGpBOjYCACACQRxqQTo2AgAgAiAAQQxqNgIgIAIgAEEIajYCGCACQTs2AhQgAiAANgIQIAEoAhggASgCHCACQTxqQQM2AgAgAkIDNwIsIAJB2KTAADYCKCACIAJBEGo2AjggAkEoahALCyACQUBrJAALywMCBH8BfiMAQTBrIgEkAAJAAkACQAJAAn9BACAAKAIAIgJFDQAaIAEgACkCBDcCJCABIAI2AiAgAUEQaiIAIAFBIGoiAikCADcCACAAQQhqIAJBCGooAgA2AgAgAUEIakEAIAEoAhAiACABKAIYEBsgASgCCA0BIAFBKGogAUEYaigCADYCACABIAEpAxA3AyAgASABQSBqEBcgASgCBCEDIAEoAgALIQRBoMfAAC0AAA0BQaDHwABBAToAAAJAQajHwAApAwAiBUJ/UgRAQajHwAAgBUIBfDcDACAFQgBSDQFBrJnAAEErQcycwAAQdwALQYScwABBN0G8nMAAEJIBAAtBoMfAAEEAOgAAQQFBARC1ASICRQ0CIAJBADoAAEEwQQgQtQEiAEUNAyAAQgE3AiQgAEEANgIYIAAgAzYCFCAAIAQ2AhAgACAFNwMIIABCgYCAgBA3AwAgACACrTcCHCABQTBqJAAgAA8LIAEoAgwhAiABQShqIAEpAhQ3AwAgASAANgIkIAEgAjYCIEHcnMAAQS8gAUEgakHomcAAQYydwAAQTgALQbSiwABBIEHwosAAEJIBAAtBAUEBEMcBAAtBMEEIEMcBAAveAgEHf0EBIQkCQAJAIAJFDQAgASACQQF0aiEKIABBgP4DcUEIdiELIABB/wFxIQ0CQANAIAFBAmohDCAHIAEtAAEiAmohCCALIAEtAAAiAUcEQCABIAtLDQMgCCEHIAwiASAKRw0BDAMLIAggB08EQCAIIARLDQIgAyAHaiEBAkADQCACRQ0BIAJBf2ohAiABLQAAIAFBAWohASANRw0AC0EAIQkMBQsgCCEHIAwiASAKRw0BDAMLCyAHIAhBuKzAABBWAAsgCCAEQbiswAAQVQALIAZFDQAgBSAGaiEDIABB//8DcSEBA0ACQCAFQQFqIQACfyAAIAUtAAAiAkEYdEEYdSIEQQBODQAaIAAgA0YNASAFLQABIARB/wBxQQh0ciECIAVBAmoLIQUgASACayIBQQBIDQIgCUEBcyEJIAMgBUcNAQwCCwtB3aPAAEErQciswAAQdwALIAlBAXEL5QIBBX8jAEGAAWsiAyQAEHgCQAJAIAEoAgxBAUYEQCADQSBqIAIQrwEgAygCICEGIANBGGogAygCJCIFEC8gA0EANgIwIAMgAykDGDcDKCADQRBqQQAgBUF/akEEdkEBahC4ASADIAMpAxA3AzggAUGQFmohBwNAIANBCGogA0E4ahBzIAMoAghFDQIgBSADKAIMQQR0IgFBEGoiBCAEIAVLGyIEIAFJDQMgA0FAayABIAZqIAQgAWsQOCADQdAAaiADQUBrEGcgA0HgAGogA0HQAGoQIyADQfAAaiADQeAAaiAHEBQgA0HoAGogA0H4AGopAwA3AwAgAyADKQNwNwNgIANB4ABqIANB0ABqEDsgA0EoaiADQdAAakEQELYBDAALAAsQkQEACyADIANBKGoQrwEgACADKAIAIAMoAgQQkAEgA0EoahChASACEKEBIANBgAFqJAAPCyABIARBxIPAABBWAAuIAgILfwJ+IwBB0ABrIgMkACADQRBqIgJCADcDACADQgA3AwggA0EQNgIYIANBEDYCHCACIAFBCGopAAAiDTcDACADIAEpAAAiDjcDCCAOpyIBIAMoAgwiAiANpyIEIAMoAhQiBUEAECwhBiABIAIgBCAFQQEQLCEHIAEgAiAEIAVBAhAsIQggASACIAQgBUEDECwhCSABIAIgBCAFQQQQLCEKIAEgAiAEIAVBBRAsIQsgASACIAQgBUEGECwhDCAAIAEgAiAEIAVBBxAsOwEOIAAgDDsBDCAAIAs7AQogACAKOwEIIAAgCTsBBiAAIAg7AQQgACAHOwECIAAgBjsBACADQdAAaiQAC8cCAgR/An4jAEHQAGsiAyQAIAMgAjYCDCADIAE2AgggA0EANgIQIANCADcCRCADIANBJGo2AjwgAyADQRBqQQRyIgI2AjggAyADQQhqNgJAIANBQGshBUEQIQEDQAJAAkAgAQR/IAMgAkEBaiIGNgI4IAMgBRB6IAMtAABBAXENAiADKAIQBSAEC0EQRgRAIAMoAggiASADKAIMRgRAIANByABqIANBIGooAgA2AgAgA0FAayADQRhqKQMANwMAIANBMGogA0HEAGopAgAiBzcDACADIAMpAxA3AzggAyADKQI8Igg3AyggAEEJaiAHNwAAIAAgCDcAASAAQQE6AAAMAgsgAyABQQFqNgIICyAAQQA6AAALIANB0ABqJAAPCyACIAMtAAE6AAAgAyADKAIQQQFqIgQ2AhAgAUF/aiEBIAYhAgwACwALvgICBX8BfiMAQTBrIgQkAEEnIQICQCAAQpDOAFQEQCAAIQcMAQsDQCAEQQlqIAJqIgNBfGogACAAQpDOAIAiB0KQzgB+faciBUH//wNxQeQAbiIGQQF0QY6mwABqLwAAOwAAIANBfmogBSAGQeQAbGtB//8DcUEBdEGOpsAAai8AADsAACACQXxqIQIgAEL/wdcvViAHIQANAAsLIAenIgNB4wBKBEAgAkF+aiICIARBCWpqIAenIgMgA0H//wNxQeQAbiIDQeQAbGtB//8DcUEBdEGOpsAAai8AADsAAAsCQCADQQpOBEAgAkF+aiICIARBCWpqIANBAXRBjqbAAGovAAA7AAAMAQsgAkF/aiICIARBCWpqIANBMGo6AAALIAFBuKPAAEEAIARBCWogAmpBJyACaxAMIARBMGokAAu+AgEDfwJAAkACQAJAAkACQCACBEAgAkEFSQ0BIAJBCUkNAiACQQ1JDQMgAkENRg0EIAJBD0kNBSACQQ9GDQYgAS0AACECIAEtAAQhAyABLQAIIQQgAS0ADCEFIAAgAS0AASABLQAJQRB0ciABLQAFQQh0ciABLQANQRh0cjYCBCAAIAIgA0EIdHIgBEEQdHIgBUEYdHI2AgAgACABLQADIAEtAAtBEHRyIAEtAAdBCHRyIAEtAA9BGHRyNgIMIAAgAS0AAiABLQAGQQh0ciABLQAKQRB0ciABLQAOQRh0cjYCCA8LQQBBAEHslMAAEFQAC0EEIAJB/JTAABBUAAtBCCACQYyVwAAQVAALQQwgAkGclcAAEFQAC0ENQQ1BrJXAABBUAAtBDiACQbyVwAAQVAALQQ9BD0HMlcAAEFQAC6oCAQN/IwBBgAFrIgQkAAJAAkACfwJAIAEoAgAiA0EQcUUEQCAAKAIAIQIgA0EgcQ0BIAKtIAEQJQwCCyAAKAIAIQJBACEAA0AgACAEakH/AGogAkEPcSIDQTByIANB1wBqIANBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8NAiABQYymwABBAiAAIARqQYABakEAIABrEAwMAQtBACEAA0AgACAEakH/AGogAkEPcSIDQTByIANBN2ogA0EKSRs6AAAgAEF/aiEAIAJBBHYiAg0ACyAAQYABaiICQYEBTw0CIAFBjKbAAEECIAAgBGpBgAFqQQAgAGsQDAsgBEGAAWokAA8LIAJBgAFB/KXAABBWAAsgAkGAAUH8pcAAEFYAC7oCAQV/IwBBQGoiAiQAIAEoAgQiA0UEQCABQQRqIQMgASgCACEEIAJBADYCICACQgE3AxggAiACQRhqNgIkIAJBOGogBEEQaikCADcDACACQTBqIARBCGopAgA3AwAgAiAEKQIANwMoIAJBJGpBnJbAACACQShqEAsaIAJBEGoiBCACKAIgNgIAIAIgAikDGDcDCAJAIAEoAgQiBUUNACABQQhqKAIAIgZFDQAgBSAGQQEQvAELIAMgAikDCDcCACADQQhqIAQoAgA2AgAgAygCACEDCyABQQE2AgQgAUEMaigCACEEIAFBCGoiASgCACEFIAFCADcCAEEMQQQQtQEiAUUEQEEMQQQQxwEACyABIAQ2AgggASAFNgIEIAEgAzYCACAAQZyhwAA2AgQgACABNgIAIAJBQGskAAubAgEBfyMAQRBrIgIkAAJAIAAoAgAiACACQQxqAn8CQCABQYABTwRAIAJBADYCDCABQYAQSQ0BIAFBgIAESQRAIAIgAUE/cUGAAXI6AA4gAiABQQZ2QT9xQYABcjoADSACIAFBDHZBD3FB4AFyOgAMQQMMAwsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEEDAILIAAoAgggACgCBEYEQCAAQQEQvQELIAAoAgAgACgCCGogAToAACAAIAAoAghBAWo2AggMAgsgAiABQT9xQYABcjoADSACIAFBBnZBH3FBwAFyOgAMQQILELYBCyACQRBqJABBAAvDAgIDfwJ+IwBBQGoiAyQAIAACf0EBIAAtAAgNABogACgCBCEFIAAoAgAiBC0AAEEEcUUEQEEBIAQoAhhB1aXAAEHfpcAAIAUbQQJBASAFGyAEQRxqKAIAKAIMEQIADQEaIAEgACgCACACKAIMEQEADAELIAVFBEBBASAEKAIYQd2lwABBAiAEQRxqKAIAKAIMEQIADQEaIAAoAgAhBAsgA0EBOgAXIANBNGpBtKXAADYCACADIAQpAhg3AwggAyADQRdqNgIQIAQpAgghBiAEKQIQIQcgAyAELQAgOgA4IAMgBzcDKCADIAY3AyAgAyAEKQIANwMYIAMgA0EIajYCMEEBIAEgA0EYaiACKAIMEQEADQAaIAMoAjBB06XAAEECIAMoAjQoAgwRAgALOgAIIAAgACgCBEEBajYCBCADQUBrJAALwgICA38CfiMAQUBqIgIkAAJ/QQEgAC0ABA0AGiAALQAFIQQgACgCACIDLQAAQQRxRQRAIAEgBAR/QQEgAygCGEHVpcAAQQIgA0EcaigCACgCDBECAA0CGiAAKAIABSADC0HAlsAAKAIAEQEADAELIARFBEBBASADKAIYQeKlwABBASADQRxqKAIAKAIMEQIADQEaIAAoAgAhAwsgAkEBOgAXIAJBNGpBtKXAADYCACACIAMpAhg3AwggAiACQRdqNgIQIAMpAgghBSADKQIQIQYgAiADLQAgOgA4IAIgBjcDKCACIAU3AyAgAiADKQIANwMYIAIgAkEIajYCMEEBIAEgAkEYakHAlsAAKAIAEQEADQAaIAIoAjBB06XAAEECIAIoAjQoAgwRAgALIQEgAEEBOgAFIAAgAToABCACQUBrJAAL5QEBA38gACAEQRBqQR9xIgV2QQh0QYACcSAAIARBCGpBH3EiBnZBBHRBEHEgASAEQR9xIgd2QQF0QQJxIAAgB3ZBAXFyIAIgB3ZBAnRBBHFyIAMgB3ZBA3RBCHFyIAMgBEEYakEfcSIEdkEPdHJyIAEgBnZBBXRBIHFyIAIgBnZBBnRBwABxciADIAZ2QQd0QYABcXJyIAEgBXZBCXRBgARxciACIAV2QQp0QYAIcXIgAyAFdkELdEGAEHFyIAAgBHZBDHRBgCBxciABIAR2QQ10QYDAAHFyIAIgBHZBDnRBgIABcXIL/wEBAn8jAEEQayICJAAgAkEANgIMAn8CQAJAIAFBgAFPBEAgAUGAEEkNASACQQxqIQMgAUGAgARPDQIgAiABQT9xQYABcjoADiACIAFBBnZBP3FBgAFyOgANIAIgAUEMdkEPcUHgAXI6AAxBAwwDCyACIAE6AAwgAkEMaiEDQQEMAgsgAiABQT9xQYABcjoADSACIAFBBnZBH3FBwAFyOgAMIAJBDGohA0ECDAELIAIgAUE/cUGAAXI6AA8gAiABQRJ2QfABcjoADCACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA1BBAshASAAIAMgARARIAJBEGokAAuiAgEDfyMAQSBrIgEkAAJAAkBBjMfAACgCACIAQQFqQQBKBEBBjMfAACAANgIAQZDHwAAoAgAiAkUEQCABQQA2AgggAUEIahAgIQJBjMfAACgCAA0DQYzHwABBfzYCAAJAQZDHwAAoAgAiAEUNACAAIAAoAgAiAEF/ajYCACAAQQFHDQBBkMfAABBRC0GQx8AAIAI2AgBBjMfAAEGMx8AAKAIAQQFqIgA2AgALIAANAkGMx8AAQX82AgAgAiACKAIAIgBBAWo2AgAgAEF/TA0BQYzHwABBjMfAACgCAEEBajYCACABQSBqJAAgAg8LQYSYwABBGCABQRhqQfiZwABBnJjAABBOAAsAC0Ggl8AAQRAgAUEYakHYmcAAQfSXwAAQTgALzQECBH8BfiMAQRBrIgIkACACQoGAgIAQNwIAIAIoAgQiA0F/aiIEIAIoAgBqQQAgA2siBXGtIAGtfiIGQiCIpyADRXJFBEAgA2lBAUYEQCACIAM2AgwgAiAGpyAEaiAFcSIBNgIIAkAgAUF/SgRAIAEEQCABIAMQtQEiA0UNAgsgACABNgIEIAAgAzYCACACQRBqJAAPCxDKAQALIAJBCGoiACgCACAAKAIEEMcBAAtBsIfAAEErIAJBCGpB3IfAAEGgh8AAEE4ACxDKAQAL4AEBBH8CQCAAQQRqKAIAIgUgAEEIaigCACIEayACIAFrIgZPBEAgACgCACECDAELAkACQAJAAkAgBCAGaiICIARJDQAgBUEBdCIDIAIgAyACSxsiA0EASA0AAkAgBQRAIAAoAgAiAg0BCyADDQJBASECDAQLIAMgBUcEQCACIAVBASADEK0BIQILIAJFDQIgAEEIaigCACEEDAMLEL4BAAsgA0EBELUBIgINAQsgA0EBEMcBAAsgACACNgIAIABBBGogAzYCAAsgAiAEaiABIAYQfxogAEEIaiAEIAZqNgIAC+EBAQJ/IwBB0ABrIgQkACAEQRhqIAEQjgEgBCgCHCEBIAQoAhghBSAEQUBrIAIgAyADEKsBIARBEGogBEFAaxCmASAEQTBqIAQoAhAgBCgCFBCqASAEQcgAaiIDIARBOGoiAigCADYCACAEIAQpAzA3A0AgBEEgaiAFIARBQGsQIiABIAEoAgBBf2o2AgAgAiAEQShqKAIANgIAIAQgBCkDIDcDMCAEQQhqIARBMGoQrwEgAyACKAIANgIAIAQgBCkDMDcDQCAEIARBQGsQpgEgACAEKQMANwIAIARB0ABqJAAL5gEBA38jAEGgAWsiBSQAIAVBIGpBgAEQlgEDQCAGQYABRgRAIAAgBUEgahAFIAVBoAFqJAAFIAVBGGogBUEgakGAASAGIAZBBGoiB0HclcAAEHYgBSgCGCAFKAIcIAEQnwEgBUEQaiAFQSBqQYABIAcgBkEIaiIHQeyVwAAQdiAFKAIQIAUoAhQgAhCfASAFQQhqIAVBIGpBgAEgByAGQQxqIgdB/JXAABB2IAUoAgggBSgCDCADEJ8BIAUgBUEgakGAASAHIAZBEGoiBkGMlsAAEHYgBSgCACAFKAIEIAQQnwEMAQsLC+MBAQR/IwBBQGoiAiQAIAFBBGohBCABKAIERQRAIAEoAgAhAyACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQThqIANBEGopAgA3AwAgAkEwaiADQQhqKQIANwMAIAIgAykCADcDKCACQSRqQZyWwAAgAkEoahALGiACQRBqIgMgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCACIBRQ0AIAUgAUEBELwBCyAEIAIpAwg3AgAgBEEIaiADKAIANgIACyAAQZyhwAA2AgQgACAENgIAIAJBQGskAAveAQEBfyMAQeAAayIEJAAgBCABNgIIIAQgAzYCDCABIANGBEAgACACIAEQfxogBEHgAGokAA8LIARBPGpBHzYCACAEQTRqQSA2AgAgBEEkakEDNgIAIAQgBEEIajYCQCAEIARBDGo2AkQgBEHcAGpBADYCACAEQgM3AhQgBEG4jMAANgIQIARBIDYCLCAEQYyNwAA2AlggBEIBNwJMIARBhI3AADYCSCAEIARBKGo2AiAgBCAEQcgAajYCOCAEIARBxABqNgIwIAQgBEFAazYCKCAEQRBqQfyNwAAQkwEAC7EBAQ1+IAAgAikBACIDQjCIIgggA0IgiCIEhSABKQEAIgVCMIgiCSAFQiCIIgaFgyIKIAQgBoOFIAMgBIUiCyAFIAaFIgyDIg0gA0IQiCIEIAiFIg4gBUIQiCIGIAmFIg+DhSIHhT0BBCAAIAcgAyAEhSAFIAaFgyIHIAMgBYOFhT0BACAAIAsgDoUgDCAPhYMgDYUiAyAKIAggCYOFhT0BBiAAIAcgBCAGg4UgA4U9AQILhQIBAn8jAEEgayIEJABBASEFAkACQAJAQZjHwAAoAgBBAUcEQEGYx8AAQoGAgIAQNwMADAELQZzHwABBnMfAACgCAEEBaiIFNgIAIAVBAksNAQsgBCADNgIcIAQgAjYCGCAEQYCZwAA2AhQgBEGAmcAANgIQQfzGwAAoAgAiAkF/TA0AQfzGwAAgAkEBaiICNgIAQfzGwABBhMfAACgCACIDBH9BgMfAACgCACAEQQhqIAAgASgCEBEAACAEIAQpAwg3AxAgBEEQaiADKAIMEQAAQfzGwAAoAgAFIAILQX9qNgIAIAVBAU0NAQsACyMAQRBrIgIkACACIAE2AgwgAiAANgIIAAvJAQECfyMAQRBrIgIkACABKAIYQbm+wABBCSABQRxqKAIAKAIMEQIAIQMgAkEAOgAFIAIgAzoABCACIAE2AgAgAiAANgIMIAIgAkEMahAeIAItAAQhASACLQAFBEAgAUH/AXEhACACAn9BASAADQAaIAIoAgAiAEEcaigCACgCDCEBIAAoAhghAyAALQAAQQRxRQRAIANB26XAAEECIAERAgAMAQsgA0HapcAAQQEgARECAAsiAToABAsgAkEQaiQAIAFB/wFxQQBHC7sBAQJ/IwBBMGsiAyQAIANBIGpCADcDACADQgA3AxggA0EQakEAIAJBECACQRBJGxC4ASADIAMpAxA3AygCQAJAA0AgA0EIaiADQShqEHMgAygCCEUNAiADKAIMIgQgAkkEQCAEQQ9LDQIgA0EYaiAEaiABIARqLQAAOgAADAELCyAEIAJBnIPAABBUAAsgBEEQQayDwAAQVAALIAAgAykDGDcAACAAQQhqIANBIGopAwA3AAAgA0EwaiQAC7UBAQF/IAAoAgAiBEEANgIAIARBeGoiACAAKAIAQX5xNgIAAkAgAiADKAIUEQUARQ0AAkAgBEF8aigCAEF8cSICBEAgAi0AAEEBcUUNAQsgACgCACIDQXxxIgJFIANBAnFyDQEgAi0AAEEBcQ0BIAQgAigCCEF8cTYCACACIABBAXI2AggPCyAAEEsgAC0AAEECcQRAIAIgAigCAEECcjYCAAsPCyAEIAEoAgA2AgAgASAANgIAC7sBAQJ/IwBBEGsiAiQAIAFBASABGyEBAkAgAEUNACAAQQNqQQJ2IQACQCABQQRLDQAgAEF/aiIDQf8BSw0AIAJB0L7AADYCBCACIANBAnRB1L7AAGoiAygCADYCDCAAIAEgAkEMaiACQQRqQfSJwAAQUyEBIAMgAigCDDYCAAwBCyACQdC+wAAoAgA2AgggACABIAJBCGpB3InAAEHcicAAEFMhAUHQvsAAIAIoAgg2AgALIAJBEGokACABC8IBAQR/IwBBMGsiAiQAIAJBIGogABB+IAIoAiwhACACKAIoIQMgAigCJCEEIAIoAiAhBSACQRhqIAFBEEEAQQRBrJPAABB2IAIoAhggAigCHCAFEJ8BIAJBEGogAUEQQQRBCEG8k8AAEHYgAigCECACKAIUIAQQnwEgAkEIaiABQRBBCEEMQcyTwAAQdiACKAIIIAIoAgwgAxCfASACIAFBEEEMQRBB3JPAABB2IAIoAgAgAigCBCAAEJ8BIAJBMGokAAu2AQEBfyMAQRBrIgMkAAJAIABFDQAgAyAANgIEIAFFDQACQCACQQRLDQAgAUEDakECdkF/aiIAQf8BSw0AIANB0L7AADYCCCADIABBAnRB1L7AAGoiACgCADYCDCADQQRqIANBDGogA0EIakH0icAAEDkgACADKAIMNgIADAELIANB0L7AACgCADYCDCADQQRqIANBDGpB3InAAEHcicAAEDlB0L7AACADKAIMNgIACyADQRBqJAALqAEBB38gAUEAQQBBAEEAECwhAiABQQBBAEEAQQEQLCEDIAFBAEEAQQBBAhAsIQQgAUEAQQBBAEEDECwhBSABQQBBAEEAQQQQLCEGIAFBAEEAQQBBBRAsIQcgAUEAQQBBAEEGECwhCCAAIAFBAEEAQQBBBxAsOwEOIAAgCDsBDCAAIAc7AQogACAGOwEIIAAgBTsBBiAAIAQ7AQQgACADOwECIAAgAjsBAAuEAQEKfiAAIAEpAQAiAkIgiCIGIAKEIgQgAkIQiCIDIAJCMIgiBYMiB4UiCCACIAOFIgmDIgogAyAEIAkgBSAGhSILgyADIAWFhSIDhSIEg4U9AQYgACAKIAIgAyAHhSIDg4U9AQQgACAIIAuDIgIgBCAFg4U9AQIgACACIAMgBoOFPQEAC4sBAQN/IwBBgAFrIgMkACAALQAAIQJBACEAA0AgACADakH/AGogAkEPcSIEQTByIARB1wBqIARBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8EQCACQYABQfylwAAQVgALIAFBjKbAAEECIAAgA2pBgAFqQQAgAGsQDCADQYABaiQAC4oBAQN/IwBBgAFrIgMkACAALQAAIQJBACEAA0AgACADakH/AGogAkEPcSIEQTByIARBN2ogBEEKSRs6AAAgAEF/aiEAIAJBBHYiAg0ACyAAQYABaiICQYEBTwRAIAJBgAFB/KXAABBWAAsgAUGMpsAAQQIgACADakGAAWpBACAAaxAMIANBgAFqJAALlgEBBH8CQAJAIAEoAgQiBCACTwRAIARFDQIgASgCACEDAkACQCACIARGIgVFBEAgAg0BIAMgBBCuAUEBIQMMBAsgBUUNAQwDCyADIARBASACEK0BIgMNAgsgACACNgIEQQEhBiAAQQhqQQE2AgAMAgtBjI7AAEEkQaCPwAAQdwALIAEgAjYCBCABIAM2AgALIAAgBjYCAAuLAQEDfyMAQYABayIDJAAgACgCACECQQAhAANAIAAgA2pB/wBqIAJBD3EiBEEwciAEQdcAaiAEQQpJGzoAACAAQX9qIQAgAkEEdiICDQALIABBgAFqIgJBgQFPBEAgAkGAAUH8pcAAEFYACyABQYymwABBAiAAIANqQYABakEAIABrEAwgA0GAAWokAAuKAQEDfyMAQYABayIDJAAgACgCACECQQAhAANAIAAgA2pB/wBqIAJBD3EiBEEwciAEQTdqIARBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8EQCACQYABQfylwAAQVgALIAFBjKbAAEECIAAgA2pBgAFqQQAgAGsQDCADQYABaiQAC4QBAQd/IAEvAQ4hCCABLwEMIAEvAQogAS8BCCABLwEGIAEvAQQgAS8BAiABLwEAEGQhARBkIQcQZCEGEGQhBRBkIQQQZCEDEGQhAiAAIAgQZDsBDiAAIAI7AQwgACADOwEKIAAgBDsBCCAAIAU7AQYgACAGOwEEIAAgBzsBAiAAIAE7AQALlgEBAn8gAC0ACCEBIAAoAgQiAgRAIAFB/wFxIQEgAAJ/QQEgAQ0AGgJAIAJBAUcNACAALQAJRQ0AIAAoAgAiAi0AAEEEcQ0AQQEgAigCGEHgpcAAQQEgAkEcaigCACgCDBECAA0BGgsgACgCACIBKAIYQeGlwABBASABQRxqKAIAKAIMEQIACyIBOgAICyABQf8BcUEARwuLAQEBfyMAQRBrIgMkACADIAEoAgAiASgCADYCDCACQQJqIgIgAmwiAkGAECACQYAQSxsiBEEEIANBDGpBw4nAAEHEicAAEFMhAiABIAMoAgw2AgAgAgR/IAJCADcCBCACIAIgBEECdGpBAnI2AgBBAAVBAQshASAAIAI2AgQgACABNgIAIANBEGokAAuNAQEGfyAAIAEvAQAiBDsBBCAAIAQgAS8BDHMiBSABLwEKcyICOwECIAAgAS8BCCIGIAJzOwEMIAAgAS8BAiIDIAJzIgc7AQogACACIAEvAQ4iAnM7AQggACADIAEvAQZzIgMgAS8BBCIBIAVzczsBACAAIAIgBiADIARzc3M7AQYgACACIAEgB3NzOwEOC4kBAQd/IAAgAS8BCiICIAEvAQYiA3MiBTsBDiAAIAMgAS8BDiIEczsBDCAAIAEvAQwiAyABLwEAcyIGOwEKIAAgBCAFcyIEOwEIIAAgAS8BAiIHIAIgAS8BCCIIc3M7AQIgACAHIAMgCHMiAnM7AQAgACACIARzOwEGIAAgAS8BBCAFIAZzczsBBAt3AQN/IABBB3ZBgYKECHFBG2wgAEEBdEH+/ft3cXMiAUEHdkGBgoQIcUEbbCABQQF0Qf79+3dxcyICIAFzIAJBB3ZBgYKECHFBG2wgAkEBdEH+/ft3cXMiA3MgACADcyIAQQh3cyAAIAFzQRh3cyAAIAJzQRB3cwupAQEDfwJAAkBBmMfAACgCAEEBRwRAQZjHwABCATcDAAwBC0Gcx8AAKAIADQELQfzGwAAoAgBFBEBBhMfAACgCACEAQYTHwABB7IfAADYCAEGAx8AAKAIAIQFBgMfAAEEBNgIAQfzGwABBADYCAAJAIABFDQAgASAAKAIAEQQAIAAoAgQiAkUNACABIAIgACgCCBC8AQsPCwALQY2gwABBNEHYoMAAEJIBAAtzAQJ/IAAoAgAiAUF8cSICRSABQQJxckUEQCACIAIoAgRBA3EgACgCBEF8cXI2AgQLIAAgACgCBCICQXxxIgEEfyABIAEoAgBBA3EgACgCAEF8cXI2AgAgACgCBAUgAgtBA3E2AgQgACAAKAIAQQNxNgIAC3QBA38jAEEgayICJAACQCAAIAEQJ0UEQCABQRxqKAIAIQMgASgCGCACQRxqQQA2AgAgAkG4o8AANgIYIAJCATcCDCACQbyjwAA2AgggAyACQQhqEAtFDQELIAJBIGokAEEBDwsgAEEEaiABECcgAkEgaiQAC3EAAn8gAkECdCIBIANBA3RBgIABaiICIAEgAksbQYeABGoiAUEQdkAAIgJBf0YEQEEAIQNBAQwBCyACQRB0IgNCADcDACADQQA2AgggAyADIAFBgIB8cWpBAnI2AgBBAAshAiAAIAM2AgQgACACNgIAC34BAX8jAEFAaiIFJAAgBSABNgIMIAUgADYCCCAFIAM2AhQgBSACNgIQIAVBLGpBAjYCACAFQTxqQT82AgAgBUICNwIcIAVBlKTAADYCGCAFQTs2AjQgBSAFQTBqNgIoIAUgBUEQajYCOCAFIAVBCGo2AjAgBUEYaiAEEJMBAAuCAQAgACACLwEOIAEvAQ5zOwEOIAAgAi8BDCABLwEMczsBDCAAIAIvAQogAS8BCnM7AQogACACLwEIIAEvAQhzOwEIIAAgAi8BBiABLwEGczsBBiAAIAIvAQQgAS8BBHM7AQQgACACLwECIAEvAQJzOwECIAAgAi8BACABLwEAczsBAAtpAQN/IwBBwAFrIgEkACABQQA2ArgBA0AgAkGwAUZFBEAgAUEIaiACaiIDQgA3AgAgA0EIakIANwIAIAEgASgCuAFBAWo2ArgBIAJBEGohAgwBCwsgACABQQhqQbABEH8aIAFBwAFqJAALcAECfwJAIAAoAgAiAUEQaigCACICRQ0AIAJBADoAACABQRRqKAIAIgJFDQAgASgCECACQQEQvAELIAFBHGooAgBBAUEBELwBIAAoAgAiASABKAIEIgFBf2o2AgQgAUEBRgRAIAAoAgBBMEEIELwBCwtbAQJ/IwBBIGsiAiQAIAFBHGooAgAhAyABKAIYIAJBGGogACgCACIAQRBqKQIANwMAIAJBEGogAEEIaikCADcDACACIAApAgA3AwggAyACQQhqEAsgAkEgaiQAC2sBAn8jAEEQayIGJAACQCAAIAEgAiADIAQQFiIFDQAgBkEIaiADIAAgASAEKAIMEQYAQQAhBSAGKAIIDQAgBigCDCIFIAIoAgA2AgggAiAFNgIAIAAgASACIAMgBBAWIQULIAZBEGokACAFC20BAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakE6NgIAIANCAjcCDCADQaSlwAA2AgggA0E6NgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhCTAQALbQEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQTo2AgAgA0ICNwIMIANBgKnAADYCCCADQTo2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEJMBAAttAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBOjYCACADQgI3AgwgA0G0qcAANgIIIANBOjYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQkwEAC1YBAn8jAEEgayICJAAgAUEcaigCACEDIAEoAhggAkEYaiAAQRBqKQIANwMAIAJBEGogAEEIaikCADcDACACIAApAgA3AwggAyACQQhqEAsgAkEgaiQAC1sBAn8jAEEQayICJAAgACgCACIAKAIIIQMgACgCACEAIAIgARCVASADBEADQCACIAA2AgwgAiACQQxqECsgAEEBaiEAIANBf2oiAw0ACwsgAhCUASACQRBqJAALXQEDfyAAIAEoAgAiBCACQR9xIgN0NgIAIAAgASgCDCADdCABKAIIIgVBACACa0EfcSICdnI2AgwgACAFIAN0IAEoAgQiASACdnI2AgggACABIAN0IAQgAnZyNgIEC10BAn8gACABKAIMIgMgAkEfcSIEdjYCDCAAIANBACACa0EfcSICdCABKAIIIgMgBHZyNgIIIAAgAyACdCABKAIEIgMgBHZyNgIEIAAgAyACdCABKAIAIAR2cjYCAAtZAQF/IwBBIGsiAiQAIAIgACgCADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQZyWwAAgAkEIahALIAJBIGokAAtZAQF/IwBBIGsiAiQAIAIgACgCADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQdinwAAgAkEIahALIAJBIGokAAtWAQF/IwBBIGsiAiQAIAIgADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQeSLwAAgAkEIahALIAJBIGokAAtWAQF/IwBBIGsiAiQAIAIgADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQdinwAAgAkEIahALIAJBIGokAAtrAQN/IAAoAgwhASAAQYCAxAA2AgwCQCABQYCAxABHDQBBgIDEACEBIAAoAgAiAiAAKAIERg0AIAAgAkEBajYCACAAKAIIIgMgAi0AACICQQR2ai0AACEBIAAgAyACQQ9xai0AADYCDAsgAQtSAQF/IwBBQGoiAiQAIAIgARBHIAJBEGogAhAVIAJBIGogAkEQahBIIAJBOGogAkEoaikDADcDACACIAIpAyA3AzAgACACQTBqEHAgAkFAayQAC1wBAX8jAEEgayICJAAgAkEANgIIIAJCATcDACACQRhqIAFBCGopAgA3AwAgAiABKQIANwMQIAIgAkEQahAdIABBCGogAigCCDYCACAAIAIpAwA3AgAgAkEgaiQAC0oBAX8jAEEgayICJAAgACgCACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQhqEF0gAkEgaiQAC1gBAX8jAEGAGWsiAiQAIAFFBEAQwwEACyACIAEQlwEgAigCBEEANgIAIAJBCGogAUH0GBB/GiAAIAJBCGpBBHJB8BgQfxogAUH0GEEEELwBIAJBgBlqJAALTAEBfyAAQQF0QYBAcSAAQQJ0QYAYcSAAQQN0QYABcSAAQf//A3EiAUEBdkHwAHEgAEEPcXJyIAFBAnZBgAZxcnIgAUEDdkGAIHFycgtTAQF/IwBBIGsiAyQAIANBCGogAUEIaikBADcDACADIAEpAQA3AwAgA0EYaiACQQhqKQEANwMAIAMgAikBADcDECAAIAMgA0EQahBPIANBIGokAAtiAQF/IwBBMGsiACQAIABBKjYCDCAAQYSBwAA2AgggAEEkakEBNgIAIABCATcCFCAAQYikwAA2AhAgAEE7NgIsIAAgAEEoajYCICAAIABBCGo2AiggAEEQakGQgsAAEJMBAAtKAQF/IwBBIGsiAiQAIAJBCGogASABQRBqECQgAi0ACEEBRwRAEGYACyAAIAIpAAk3AAAgAEEIaiACQRFqKQAANwAAIAJBIGokAAtWAQJ/IAEoAgAhAiABQQA2AgACQCACBEAgASgCBCEDQQhBBBC1ASIBRQ0BIAEgAzYCBCABIAI2AgAgAEGchsAANgIEIAAgATYCAA8LAAtBCEEEEMcBAAtMAQF/IwBBEGsiAiQAIAIgARCJASACIAA2AgwgAiACQQxqQeiawAAQKiACIABBBGo2AgwgAiACQQxqQdihwAAQKiACEEUgAkEQaiQAC04BAX8jAEEQayIEJAACQCABKAIEIAJrIANPBEAgAEEANgIADAELIARBCGogAzYCACAEIAI2AgQgBEEBNgIAIAAgASAEEBILIARBEGokAAtUAQF/IwBBIGsiAiQAIAJBCGogARAvIAJBADYCGCACIAIpAwg3AxAgAkEQakG8g8AAIAEQtgEgAEEIaiACKAIYNgIAIAAgAikDEDcCACACQSBqJAALVgECfyABKAIAIQIgAUEANgIAAkAgAgRAIAEoAgQhA0EIQQQQtQEiAUUNASABIAM2AgQgASACNgIAIABBwKHAADYCBCAAIAE2AgAPCwALQQhBBBDHAQALTgEBfyMAQfAYayIBJAAgASAAQfAYEH8hAUH0GEEEELUBIgBFBEBB9BhBBBDHAQALIABBADYCACAAQQRqIAFB8BgQfxogAUHwGGokACAAC0kBAX8jAEEQayIDJAAgAyAAIAEgAhBqAkAgAygCAEEBRgRAIANBCGooAgAiAEUNASADKAIEIAAQxwEACyADQRBqJAAPCxC+AQALRwEBfyMAQRBrIgIkACACIAAgARBBAkAgAigCAEEBRgRAIAJBCGooAgAiAEUNASACKAIEIAAQxwEACyACQRBqJAAPCxC+AQALVAAgACABLwEOOwEOIAAgAS8BCDsBCCAAIAEoAQQ2AQQgACABLwEMQX9zOwEMIAAgAS8BCkF/czsBCiAAIAEvAQJBf3M7AQIgACABLwEAQX9zOwEAC0MBA38CQCACRQ0AA0AgAC0AACIEIAEtAAAiBUYEQCAAQQFqIQAgAUEBaiEBIAJBf2oiAg0BDAILCyAEIAVrIQMLIAMLSgACfyABQYCAxABHBEBBASAAKAIYIAEgAEEcaigCACgCEBEBAA0BGgsgAkUEQEEADwsgACgCGCACIAMgAEEcaigCACgCDBECAAsLQgEEfwJAIAEoAgAiAiABKAIETw0AIAJBAWoiAyACSQ0AIAEoAgAhBCABIAM2AgBBASEFCyAAIAQ2AgQgACAFNgIAC1wBAX8jAEEgayIDJAAgA0GAgMQANgIMIANB+IPAADYCCCADIAE2AgAgAyABIAJqNgIEIANBGGogA0EIaikDADcDACADIAMpAwA3AxAgACADQRBqEGEgA0EgaiQACy0AAkAgAQRAIAEgAhC1ASICDQFBACECDAELQQAhAQsgACABNgIEIAAgAjYCAAs7AAJAIAQgA08EQCACIARJDQEgACAEIANrNgIEIAAgASADajYCAA8LIAMgBCAFEFYACyAEIAIgBRBVAAtIAQF/IwBBIGsiAyQAIANBFGpBADYCACADQbijwAA2AhAgA0IBNwIEIAMgATYCHCADIAA2AhggAyADQRhqNgIAIAMgAhCTAQALOgEBfyMAQRBrIgAkAEHUxsAAKAIAQQNHBEAgAEEBOgALIAAgAEELajYCDCAAQQxqEA0LIABBEGokAAs8AQF/An9BACABKAIAIgIgASgCBEYNABogASACQQFqNgIAIAItAAAhAUEBCyECIAAgAToAASAAIAI6AAALOwEBfyMAQRBrIgIkACACQQhqIAEoAgAQeSACLQAIIQEgACACLQAJOgABIAAgAUEBcToAACACQRBqJAALOQECfiAAIAEpAQAiAj0BACAAIAIgAkIgiIU9AQYgACACQhCIIgMgAkIwiIU9AQQgACACIAOFPQECC0gAAkAgAC0ABA0AQZjHwAAoAgBBAUcEQEGYx8AAQgE3AwAMAQtBnMfAACgCAEUNACAAKAIAQQE6AAQLIAAoAgAoAgBBADoAAAtgAQN/IwBBEGsiASQAIAAoAgwiAkUEQEGsmcAAQStB6KDAABB3AAsgACgCCCIDRQRAQayZwABBK0H4oMAAEHcACyABQQA2AgQgASADNgIAIAFBiKHAACAAKAIIIAIQNgALPAEDfyABQQAQDyECIAFBARAPIQMgAUECEA8hBCAAIAFBAxAPNgIMIAAgBDYCCCAAIAM2AgQgACACNgIACzMBAX8gAgRAIAAhAwNAIAMgAS0AADoAACADQQFqIQMgAUEBaiEBIAJBf2oiAg0ACwsgAAs5AQJ/IwBB4DFrIgAkACAAQQAQayAAQQA2AgwgAEHwGGogAEHwGBB/GiAAQfAYahBtIABB4DFqJAALKgEBfyADIAIQOiIEBEAgBCAAIAMgASABIANLGxB/GiAAIAEgAhA8CyAECysAAkAgAEF8Sw0AIABFBEBBBA8LIAAgAEF9SUECdBC1ASIARQ0AIAAPCwALLwEBfyMAQRBrIgEkACABQQhqIAAQjwEgASgCDCABKAIIEAdBADYCACABQRBqJAALMQEBfyABKAIAIgJBf0cEQCABIAJBAWo2AgAgACABNgIEIAAgAUEEajYCAA8LEMQBAAsrAQF/IwBBIGsiASQAIAFBEGogABA9IAEgAUEQahBgIAEQnAEgAUEgaiQACzAAIAAoAgAhACABELoBRQRAIAEQuwFFBEAgACABEMABDwsgACABEEMPCyAAIAEQQgsxAQF/IAEoAgQiAgRAIAAgAjYCBCAAQQhqQQE2AgAgACABKAIANgIADwsgAEEANgIACzIAIAAoAgAhACABELoBRQRAIAEQuwFFBEAgADEAACABECUPCyAAIAEQQA8LIAAgARA/CzYAIAAgASgCGEHQocAAQQggAUEcaigCACgCDBECADoACCAAIAE2AgAgAEEAOgAJIABBADYCBAsrACAAKAIAIgAtAAAgAEEAOgAAQQFxRQRAQZiJwABBK0GIicAAEHcACxBKCy8BAX8gACACIAFrIgIQvQEgACgCCCIDIAAoAgBqIAIgASACEDQgACACIANqNgIICzAAIAAgACgCBCIAIAEgABs2AgQgAEUgACABRnJFBEBB2J3AAEE2QaiewAAQkgEACws0AQF/IwBBEGsiAiQAIAIgATYCDCACIAA2AgggAkGAmcAANgIEIAJBgJnAADYCACACEH0ACy0BAX8jAEEQayICJAAgARCzASACQQhqIAEQhAEgACACKQMINwIAIAJBEGokAAstAQF/IwBBEGsiAiQAIAEQswEgAkEIaiABEJcBIAAgAikDCDcCACACQRBqJAALNQEBfyMAQRBrIgMkACADIAI2AgwgAyABNgIIIAAgA0EIaiIAKAIAIAAoAgQQdCADQRBqJAALMgEBfyMAQRBrIgAkACAAQRQ2AgwgAEHUg8AANgIIIABBCGpBiIbAAEEAQeiDwAAQNgALLAEBfyMAQRBrIgMkACADIAE2AgwgAyAANgIIIANBCGpBrKHAAEEAIAIQNgALNAEBfyMAQRBrIgIkACACIAE2AgwgAiAANgIIIAJBpKTAADYCBCACQbijwAA2AgAgAhB9AAsyAQF/QQEhASAALQAEBH8gAQUgACgCACIAKAIYQeSlwABBASAAQRxqKAIAKAIMEQIACws1AQF/IAEoAhhB46XAAEEBIAFBHGooAgAoAgwRAgAhAiAAQQA6AAUgACACOgAEIAAgATYCAAshACABBEADQCAAQQA6AAAgAEEBaiEAIAFBf2oiAQ0ACwsLKAAgASgCAEUEQCABQX82AgAgACABNgIEIAAgAUEEajYCAA8LEMQBAAsoAQF/IwBBEGsiAiQAIAIgACgCADYCDCACQQxqIAEQigEgAkEQaiQACyAAAkAgAUF8Sw0AIAAgAUEEIAIQrQEiAEUNACAADwsACycBAX8CQCAAKAIEIgFFDQAgAEEIaigCACIARQ0AIAEgAEEBELwBCwsnAQF/AkAgACgCACIBRQ0AIABBBGooAgAiAEUNACABIABBARC8AQsLHwEBfyMAQRBrIgEkACABIAAQfiABKAIAIAFBEGokAAsrAQF/IAAoAgAiASgCACABKAIEIAAoAgQoAgAgACgCCCgCAEGIqsAAEAgACyEBAX8jAEHwGGsiASQAIAEgABBjIAEQoQEgAUHwGGokAAshACABQQRPBEAgACACNgAADwtBmJLAAEEgQbiSwAAQdwALHQAgASgCAEUEQAALIABBnIbAADYCBCAAIAE2AgALGAEBfyAAKAIEIgEEQCAAKAIAIAEQrgELCxoBAX8gACgCCCIBIAAoAgRHBEAgACABEG8LCxoAIABCADcCBCAAQQQ2AgAgAEEMakIANwIACxYAIABBCHRBgID8B3EgAEEYdHJBEHYLHQAgASgCAEUEQAALIABBwKHAADYCBCAAIAE2AgALGwAgARCiASAAIAEoAgg2AgQgACABKAIANgIACxwAIAEoAhhBxKPAAEELIAFBHGooAgAoAgwRAgALHAAgASgCGEHPo8AAQQ4gAUEcaigCACgCDBECAAscACABKAIYQYS4wABBBSABQRxqKAIAKAIMEQIACxcAIAAgAjYCCCAAIAI2AgQgACABNgIACxcAIAAgAjYCCCAAIAM2AgQgACABNgIACxIAIABBDHQgAEHw/wNxQQR2cgsNACAAIAEgAiADEIEBCxAAIAEEQCAAIAFBARC8AQsLFgAgACABKAIINgIEIAAgASgCADYCAAsQACABBEAgACABQQQQvAELCxIAIAAoAgAgASABIAJqEDBBAAsVACABIAAoAgAiACgCACAAKAIEEAkLDAAgAARADwsQwwEACxQAIAAoAgAgASAAKAIEKAIMEQEACwgAIAAgARA6Cw4AIAAgASABIAJqEIsBCxAAIAAoAgAgASACELYBQQALEAAgACACNgIEIAAgATYCAAsQACABIAAoAgAgACgCBBAJCw0AIAAtAABBEHFBBHYLDQAgAC0AAEEgcUEFdgsKACAAIAEgAhA8Cw0AIAAgACgCCCABEG4LEQBBl6PAAEERQaijwAAQdwALDgAgACgCABoDQAwACwALCwAgADUCACABECULDQAgACgCACABIAIQEQsLACAAKAIAIAEQHwsNAEGwj8AAQRsQxQEACw4AQcuPwABBzwAQxQEACwkAIAAgARAEAAsGACABEAYLGQAgACABQfjGwAAoAgAiAEEkIAAbEQAAAAsLACAAKAIAIAEQLQsNACABQaiowABBAhAJCwYAEL4BAAsGACABEBwLDABC5K7ChZebpYgRCwQAIAELBABBAAsFAEGABAsEAEEBCwwAQvTQ1KnQ97O+ZgsMAEKNybDVpKrTlVYLAwABCwMAAQsL3D4CAEGAgMAAC8k+L1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2Flcy1zb2Z0LTAuNS4wL3NyYy9iaXRzbGljZS5ycwAAAAAAEABhAAAAGgAAACgAAAAAABAAYQAAACEAAAAiAAAAU2xpY2UgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGggYXMgdGhlIGFycmF5L1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2dlbmVyaWMtYXJyYXktMC4xNC40L3NyYy9saWIucnOuABAAYgAAAEoCAAAJAAAAL1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2Flcy1zb2Z0LTAuNS4wL3NyYy9pbXBscy5ycwAAIAEQAF4AAAA1AAAAGQAAAHNyYy9saWIucnMAAJABEAAKAAAAZwAAABQAAACQARAACgAAAGcAAAAJAAAAYW1hcC13ZWKQARAACgAAADYAAAAaAAAASW5zdGFuY2Ugbm90IGNyZWF0ZWSQARAACgAAAEYAAAAVAAAAMDEyMzQ1Njc4OWFiY2RlZi9Vc2Vycy95YW5nZG9uZ2xhaS8uY2FyZ28vcmVnaXN0cnkvc3JjL2dpdGh1Yi5jb20tMWVjYzYyOTlkYjllYzgyMy9hZXMtc29mdC0wLjUuMC9zcmMvZXhwYW5kLnJzAAgCEABfAAAANwAAACYAAAAIAhAAXwAAADgAAAAaAAAACAIQAF8AAAA5AAAAGgAAAAgCEABfAAAAOgAAABoAAAAIAhAAXwAAADcAAAAJAAAACAIQAF8AAABAAAAAFwAAAAgCEABfAAAAQgAAADMAAAAIAhAAXwAAAEcAAAAcAAAACAIQAF8AAABHAAAACQAAAAgCEABfAAAATwAAACEAAAABAAAACAAAAAQAAAACAAAAAwAAAAQAAAAIAAAABAAAAAUAAAAvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJjb3JlL2FsbG9jL2xheW91dC5ycwAAACwDEABxAAAA5wAAAAkAAABjYWxsZWQgYFJlc3VsdDo6dW53cmFwKClgIG9uIGFuIGBFcnJgIHZhbHVlAAYAAAAAAAAAAQAAAAcAAAAIAAAAAAAAAAEAAAAJAAAACgAAAAsAAAAMAAAABAAAAAQAAAANAAAADgAAAC9Vc2Vycy95YW5nZG9uZ2xhaS8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC1hcHBsZS1kYXJ3aW4vbGliL3J1c3RsaWIvc3JjL3J1c3Qvc3JjL2xpYnN0ZC9zeW5jL29uY2UucnMAAAAYBBAAbQAAAAgBAAApAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZQAPAAAAAAAAAAEAAAAQAAAAEQAAABIAAAATAAAAAAAAAAEAAAAQAAAAEQAAABIAAAAUAAAABAAAAAQAAAAVAAAAFgAAABcAAAAMBRAAAAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJhbGxvYy9zdHJpbmcucnMASwUQAGwAAACMCAAACQAAABkAAAAAAAAAAQAAABoAAAAKClN0YWNrOgoKCgobAAAABAAAAAQAAAAcAAAAHQAAAB4AAABhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgOiD8BRAALQAAACkGEAAMAAAANQYQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzUAYQADQAAAAvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJjb3JlL21hY3Jvcy9tb2QucnMAjAYQAG8AAAAoAAAACQAAAFRyaWVkIHRvIHNocmluayB0byBhIGxhcmdlciBjYXBhY2l0eS9Vc2Vycy95YW5nZG9uZ2xhaS8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC1hcHBsZS1kYXJ3aW4vbGliL3J1c3RsaWIvc3JjL3J1c3Qvc3JjL2xpYmNvcmUvbWFjcm9zL21vZC5ycwAwBxAAbwAAACIAAAAJAAAAbnVsbCBwb2ludGVyIHBhc3NlZCB0byBydXN0cmVjdXJzaXZlIHVzZSBvZiBhbiBvYmplY3QgZGV0ZWN0ZWQgd2hpY2ggd291bGQgbGVhZCB0byB1bnNhZmUgYWxpYXNpbmcgaW4gcnVzdAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAbAAAANgAAAGFzc2VydGlvbiBmYWlsZWQ6IGAobGVmdCA9PSByaWdodClgCiAgbGVmdDogYGAsCiByaWdodDogYGAAAEQIEAAtAAAAcQgQAAwAAAB9CBAAAQAAAC9Vc2Vycy95YW5nZG9uZ2xhaS8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC1hcHBsZS1kYXJ3aW4vbGliL3J1c3RsaWIvc3JjL3J1c3Qvc3JjL2xpYmNvcmUvbWFjcm9zL21vZC5ycwCYCBAAbwAAACgAAAAJAAAAYXNzZXJ0aW9uIGZhaWxlZDogNCA8PSBidWYubGVuKCmYCBAAbwAAACIAAAAJAAAAL1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2Flcy1zb2Z0LTAuNS4wL3NyYy9iaXRzbGljZS5ycwAAAEgJEABhAAAAngEAABgAAABICRAAYQAAAJ8BAAAYAAAASAkQAGEAAACgAQAAGAAAAEgJEABhAAAAoQEAABgAAABICRAAYQAAAMQBAAAeAAAASAkQAGEAAADFAQAAHgAAAEgJEABhAAAAxgEAAB4AAABICRAAYQAAAMcBAAAeAAAASAkQAGEAAADIAQAAHgAAAEgJEABhAAAAyQEAAB4AAABICRAAYQAAAMoBAAAeAAAASAkQAGEAAADLAQAAHgAAAEgJEABhAAAAsQEAABcAAABICRAAYQAAALIBAAAeAAAASAkQAGEAAACzAQAAHgAAAEgJEABhAAAAtAEAAB4AAABICRAAYQAAALgBAAAeAAAASAkQAGEAAAC8AQAAHgAAAEgJEABhAAAAwAEAAB4AAABICRAAYQAAABYCAAAcAAAASAkQAGEAAAAXAgAAHAAAAEgJEABhAAAAGAIAABwAAABICRAAYQAAABkCAAAcAAAAJQAAAAQAAAAEAAAAJgAAACcAAAAoAAAAJQAAAAQAAAAEAAAAKQAAAC9ydXN0Yy80OWNhZTU1NzYwZGEwYTQzNDI4ZWJhNzNhYmNiNjU5YmI3MGNmMmU0L3NyYy9saWJjb3JlL21hY3Jvcy9tb2QucnMAAABECxAASQAAACIAAAAJAAAAYWxyZWFkeSBib3Jyb3dlZC9ydXN0Yy80OWNhZTU1NzYwZGEwYTQzNDI4ZWJhNzNhYmNiNjU5YmI3MGNmMmU0L3NyYy9saWJjb3JlL2NlbGwucnMAsAsQAEMAAABuAwAACQAAAGFscmVhZHkgbXV0YWJseSBib3Jyb3dlZLALEABDAAAAHgMAAAkAAABhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgAAAsDBAALQAAAFkMEAAMAAAAZQwQAAEAAAAlAAAAAAAAAAEAAAAqAAAAYDogACwMEAAtAAAAWQwQAAwAAACQDBAAAwAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWUAJQAAAAAAAAABAAAAKwAAACwAAAAQAAAABAAAAC0AAAAlAAAAAAAAAAEAAAAuAAAAY2FsbGVkIGBSZXN1bHQ6OnVud3JhcCgpYCBvbiBhbiBgRXJyYCB2YWx1ZQAvAAAACAAAAAQAAAAwAAAAVHJpZWQgdG8gc2hyaW5rIHRvIGEgbGFyZ2VyIGNhcGFjaXR5JQAAAAQAAAAEAAAAIwAAAHNyYy9saWJzdGQvdGhyZWFkL21vZC5yc3gNEAAYAAAAhgMAABEAAABpbmNvbnNpc3RlbnQgcGFyayBzdGF0ZQB4DRAAGAAAAJQDAAATAAAAAgAAAHBhcmsgc3RhdGUgY2hhbmdlZCB1bmV4cGVjdGVkbHkAzA0QAB8AAAB4DRAAGAAAAJEDAAANAAAAZmFpbGVkIHRvIGdlbmVyYXRlIHVuaXF1ZSB0aHJlYWQgSUQ6IGJpdHNwYWNlIGV4aGF1c3RlZAB4DRAAGAAAACoEAAARAAAAeA0QABgAAAAwBAAAFgAAAHRocmVhZCBuYW1lIG1heSBub3QgY29udGFpbiBpbnRlcmlvciBudWxsIGJ5dGVzAHgNEAAYAAAAcwQAABoAAABpbmNvbnNpc3RlbnQgc3RhdGUgaW4gdW5wYXJreA0QABgAAACrBAAAEgAAAHgNEAAYAAAAuQQAAA4AAABhdHRlbXB0ZWQgdG8gdXNlIGEgY29uZGl0aW9uIHZhcmlhYmxlIHdpdGggdHdvIG11dGV4ZXNzcmMvbGlic3RkL3N5bmMvY29uZHZhci5ycw4PEAAaAAAAPwIAABIAAABzcmMvbGlic3RkL3N5bmMvb25jZS5yc2Fzc2VydGlvbiBmYWlsZWQ6IHN0YXRlX2FuZF9xdWV1ZSAmIFNUQVRFX01BU0sgPT0gUlVOTklORzgPEAAXAAAApwEAABUAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAADgPEAAXAAAAiwEAABUAAAA4DxAAFwAAAOgBAAAJAAAAOA8QABcAAAD0AQAAHgAAAFBvaXNvbkVycm9yIHsgaW5uZXI6IC4uIH1jYW5ub3QgbW9kaWZ5IHRoZSBwYW5pYyBob29rIGZyb20gYSBwYW5pY2tpbmcgdGhyZWFkc3JjL2xpYnN0ZC9wYW5pY2tpbmcucnNBEBAAFwAAAGoAAAAJAAAAQRAQABcAAAChAQAADwAAAEEQEAAXAAAAogEAAA8AAAAxAAAAEAAAAAQAAAAyAAAAMwAAADQAAAAMAAAABAAAADUAAAAlAAAACAAAAAQAAAA2AAAANwAAACUAAAAIAAAABAAAADgAAABOdWxFcnJvciUAAAAEAAAABAAAADkAAABjYW4ndCBibG9jayB3aXRoIHdlYiBhc3NlbWJseXNyYy9saWJzdGQvc3lzL3dhc20vY29uZHZhci5ycwAFERAAHgAAABUAAAAJAAAAY2Fubm90IHJlY3Vyc2l2ZWx5IGFjcXVpcmUgbXV0ZXhzcmMvbGlic3RkL3N5cy93YXNtL211dGV4LnJzVBEQABwAAAAVAAAACQAAAHNyYy9saWJhbGxvYy9yYXdfdmVjLnJzY2FwYWNpdHkgb3ZlcmZsb3eAERAAFwAAAG4CAAAFAAAAYC4uALkREAACAAAAQm9ycm93RXJyb3JCb3Jyb3dNdXRFcnJvcmNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWW4ERAAAAAAADogAAC4ERAAAAAAABASEAACAAAAQgAAAAAAAAABAAAAQwAAAHBhbmlja2VkIGF0ICcnLCBAEhAAAQAAAEESEAADAAAAOgAAALgREAAAAAAAVBIQAAEAAABUEhAAAQAAAGluZGV4IG91dCBvZiBib3VuZHM6IHRoZSBsZW4gaXMgIGJ1dCB0aGUgaW5kZXggaXMgAABwEhAAIAAAAJASEAASAAAAQgAAAAwAAAAEAAAARAAAAEUAAABGAAAAICAgICB7CiwKLCAgeyB9IH0oCigsKQpbXXNyYy9saWJjb3JlL2ZtdC9udW0ucnMA5RIQABYAAABUAAAAFAAAADB4MDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTkAAEIAAAAEAAAABAAAAEcAAABIAAAASQAAAHNyYy9saWJjb3JlL2ZtdC9tb2QucnMAAPATEAAWAAAATAQAABEAAADwExAAFgAAAFYEAAAkAAAAKClzcmMvbGliY29yZS9zbGljZS9tZW1jaHIucnMAAAAqFBAAGwAAAFIAAAAFAAAAaW5kZXggIG91dCBvZiByYW5nZSBmb3Igc2xpY2Ugb2YgbGVuZ3RoIFgUEAAGAAAAXhQQACIAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IACQFBAAFgAAAKYUEAANAAAAc3JjL2xpYmNvcmUvc3RyL3BhdHRlcm4ucnMAAMQUEAAaAAAAjAEAACYAAABzcmMvbGliY29yZS9zdHIvbW9kLnJzAADwFBAAFgAAAIAHAAAvAAAA8BQQABYAAADDBwAALwAAAPAUEAAWAAAABAgAAC8AAABbLi4uXWJ5dGUgaW5kZXggIGlzIG91dCBvZiBib3VuZHMgb2YgYAAAPRUQAAsAAABIFRAAFgAAALgREAABAAAAYmVnaW4gPD0gZW5kICggPD0gKSB3aGVuIHNsaWNpbmcgYAAAeBUQAA4AAACGFRAABAAAAIoVEAAQAAAAuBEQAAEAAAAgaXMgbm90IGEgY2hhciBib3VuZGFyeTsgaXQgaXMgaW5zaWRlICAoYnl0ZXMgKSBvZiBgPRUQAAsAAAC8FRAAJgAAAOIVEAAIAAAA6hUQAAYAAAC4ERAAAQAAAHNyYy9saWJjb3JlL3VuaWNvZGUvcHJpbnRhYmxlLnJzGBYQACAAAAAKAAAAHAAAABgWEAAgAAAAGgAAACgAAAAAAQMFBQYGAwcGCAgJEQocCxkMFA0QDg0PBBADEhITCRYBFwUYAhkDGgccAh0BHxYgAysDLAItCy4BMAMxAjIBpwKpAqoEqwj6AvsF/QT+A/8JrXh5i42iMFdYi4yQHB3dDg9LTPv8Li8/XF1fteKEjY6RkqmxurvFxsnK3uTl/wAEERIpMTQ3Ojs9SUpdhI6SqbG0urvGys7P5OUABA0OERIpMTQ6O0VGSUpeZGWEkZudyc7PDREpRUlXZGWNkam0urvFyd/k5fANEUVJZGWAhLK8vr/V1/Dxg4WLpKa+v8XHzs/a20iYvc3Gzs9JTk9XWV5fiY6Psba3v8HGx9cRFhdbXPb3/v+ADW1x3t8ODx9ubxwdX31+rq+7vPoWFx4fRkdOT1haXF5+f7XF1NXc8PH1cnOPdHWWL18mLi+nr7e/x8/X35pAl5gwjx/Awc7/Tk9aWwcIDxAnL+7vbm83PT9CRZCR/v9TZ3XIydDR2Nnn/v8AIF8igt8EgkQIGwQGEYGsDoCrNSgLgOADGQgBBC8ENAQHAwEHBgcRClAPEgdVBwMEHAoJAwgDBwMCAwMDDAQFAwsGAQ4VBToDEQcGBRAHVwcCBxUNUARDAy0DAQQRBg8MOgQdJV8gbQRqJYDIBYKwAxoGgv0DWQcVCxcJFAwUDGoGCgYaBlkHKwVGCiwEDAQBAzELLAQaBgsDgKwGCgYhP0wELQN0CDwDDwM8BzgIKwWC/xEYCC8RLQMgECEPgIwEgpcZCxWIlAUvBTsHAg4YCYCzLXQMgNYaDAWA/wWA3wzuDQOEjQM3CYFcFIC4CIDLKjgDCgY4CEYIDAZ0Cx4DWgRZCYCDGBwKFglMBICKBqukDBcEMaEEgdomBwwFBYClEYFtEHgoKgZMBICNBIC+AxsDDw0ABgEBAwEEAggICQIKBQsCDgQQARECEgUTERQBFQIXAhkNHAUdCCQBagNrArwC0QLUDNUJ1gLXAtoB4AXhAugC7iDwBPgC+QL6AvsBDCc7Pk5Pj56enwYHCTY9Plbz0NEEFBg2N1ZXf6qur7014BKHiY6eBA0OERIpMTQ6RUZJSk5PZGVctrcbHAcICgsUFzY5Oqip2NkJN5CRqAcKOz5maY+Sb1/u71pimpsnKFWdoKGjpKeorbq8xAYLDBUdOj9FUaanzM2gBxkaIiU+P8XGBCAjJSYoMzg6SEpMUFNVVlhaXF5gY2Vma3N4fX+KpKqvsMDQrq95zG5vk14iewUDBC0DZgMBLy6Agh0DMQ8cBCQJHgUrBUQEDiqAqgYkBCQEKAg0CwGAkIE3CRYKCICYOQNjCAkwFgUhAxsFAUA4BEsFLwQKBwkHQCAnBAwJNgM6BRoHBAwHUEk3Mw0zBy4ICoEmUk4oCCpWHBQXCU4EHg9DDhkHCgZICCcJdQs/QSoGOwUKBlEGAQUQAwWAi2IeSAgKgKZeIkULCgYNEzkHCjYsBBCAwDxkUwxICQpGRRtICFMdOYEHRgodA0dJNwMOCAoGOQcKgTYZgLcBDzINg5tmdQuAxIq8hC+P0YJHobmCOQcqBAJgJgpGCigFE4KwW2VLBDkHEUAFCwIOl/gIhNYqCaL3gR8xAxEECIGMiQRrBQ0DCQcQk2CA9gpzCG4XRoCaFAxXCRmAh4FHA4VCDxWFUCuA1S0DGgQCgXA6BQGFAIDXKUwECgQCgxFETD2AwjwGAQRVBRs0AoEOLARkDFYKgK44HQ0sBAkHAg4GgJqD2AgNAw0DdAxZBwwUDAQ4CAoGKAgiToFUDBUDAwUHCRkHBwkDDQcpgMslCoQGc3JjL2xpYmNvcmUvdW5pY29kZS91bmljb2RlX2RhdGEucnMAAJ8bEAAjAAAASwAAACgAAACfGxAAIwAAAFcAAAAWAAAAnxsQACMAAABSAAAAPgAAAEIAAAAEAAAABAAAAEoAAABFcnJvcgAAAAADAACDBCAAkQVgAF0ToAASF6AeDCDgHu8sICsqMKArb6ZgLAKo4Cwe++AtAP6gNZ7/4DX9AWE2AQqhNiQNYTerDuE4LxghOTAcYUbzHqFK8GphTk9voU6dvCFPZdHhTwDaIVAA4OFRMOFhU+zioVTQ6OFUIAAuVfABv1UAcAAHAC0BAQECAQIBAUgLMBUQAWUHAgYCAgEEIwEeG1sLOgkJARgEAQkBAwEFKwN3DwEgNwEBAQQIBAEDBwoCHQE6AQEBAgQIAQkBCgIaAQICOQEEAgQCAgMDAR4CAwELAjkBBAUBAgQBFAIWBgEBOgEBAgEECAEHAwoCHgE7AQEBDAEJASgBAwE5AwUDAQQHAgsCHQE6AQIBAgEDAQUCBwILAhwCOQIBAQIECAEJAQoCHQFIAQQBAgMBAQgBUQECBwwIYgECCQsGSgIbAQEBAQE3DgEFAQIFCwEkCQFmBAEGAQICAhkCBAMQBA0BAgIGAQ8BAAMAAx0DHQIeAkACAQcIAQILCQEtA3cCIgF2AwQCCQEGA9sCAgE6AQEHAQEBAQIIBgoCATARPwQwBwEBBQEoCQwCIAQCAgEDOAEBAgMBAQM6CAICmAMBDQEHBAEGAQMCxjoBBQABwyEAA40BYCAABmkCAAQBCiACUAIAAQMBBAEZAgUBlwIaEg0BJggZCy4DMAECBAICJwFDBgICAgIMAQgBLwEzAQEDAgIFAgEBKgIIAe4BAgEEAQABABAQEAACAAHiAZUFAAMBAgUEKAMEAaUCAAQAApkLsAE2DzgDMQQCAkUDJAUBCD4BDAI0CQoEAgFfAwIBAQIGAaABAwgVAjkCAQEBARYBDgcDBcMIAgMBARcBUQECBgEBAgEBAgEC6wECBAYCAQIbAlUIAgEBAmoBAQECBgEBZQMCBAEFAAkBAvUBCgIBAQQBkAQCAgQBIAooBgIECAEJBgIDLg0BAgAHAQYBAVIWAgcBAgECegYDAQECAQcBAUgCAwEBAQACAAU7BwABPwRRAQACAAEBAwQFCAgCBx4ElAMANwQyCAEOARYFAQ8ABwERAgcBAgEFAAcABAAHbQcAYIDwAExheW91dEVycnByaXZhdGUAQajHwAALAQEAbwlwcm9kdWNlcnMCCGxhbmd1YWdlAQRSdXN0AAxwcm9jZXNzZWQtYnkDBXJ1c3RjHTEuNDQuMCAoNDljYWU1NTc2IDIwMjAtMDYtMDEpBndhbHJ1cwYwLjE4LjAMd2FzbS1iaW5kZ2VuBjAuMi42NQ==",RSAWorker=(iq.prototype.transform=function(A){if(this.instance)return this.instance.encode(A)},iq.prototype.dE=function(A){initSync(base64ToBuffer(data)),this.instance=new RSAPublicKeyPair,this.instance.init(),A&&A(null)},iq),env;function iq(A,i){this.parent=A,this.dE(i)}function base64ToBuffer(A){for(var i=atob(A),g=new Uint8Array(i.length),I=0,t=i.length;I<t;I++)g[I]=i.charCodeAt(I);return g.buffer}var env=polyfill.Support.DW?{movingDraw:sharedChunk.movingDraw,db:sharedChunk.db,nebulaVersion:sharedChunk.nebulaVersion,host:sharedChunk.host}:{movingDraw:window.movingDraw},AMapWorker=(uq=polyfill.Event,polyfill.Ei(vq,uq),vq.prototype.initCryptWorker=function(A,i,g){g()},vq.prototype.setId=function(A,i,g){this._id=i,g()},vq.prototype.loadNebulaSourceTile=function(A,i,g){var I=this,t=i.url,B=i.ya,Q=i.zoom,C=i.projectionId,e=i.optimalZoom,o=i.Ca,E=i.mS,h=i.viewMode,a=i.showBuildingBlock,l=i.ZL,n=i.hH,i=i.kZ;return this.Ww.bw(t,B,Q,e,C,o,E,h,a,l,n,function(A,i){I.Zw?I.$w.push({done:g,type:"NebulaSourceTile",data:i}):g(A,i)},i)},vq.prototype.decodeNebulaSourceTile=function(A,i,g){var I=i.url,t=(i.ya,i.zoom),B=i.projectionId,Q=i.optimalZoom,C=(i.Ca,i.mS),e=i.viewMode,o=i.showBuildingBlock,E=i.ZL,i=(i.hH,i.buffer);return this.Ww.pQ(i,B,t,e,o,C,Q,E,g,I)},vq.prototype.loadNebulaSourceTileSdf=function(A,i,g){var I=this,t=i.url,B=i.ya,Q=(i.zoom,i.projectionId),C=(i.optimalZoom,i.Ca,i.mS,i.viewMode,i.showBuildingBlock,i.mH),e=i.ZL,o=i.offlineServer,i=i.AmapCcbParams;return this.Ww.bW(t,B,Q,e,C,o,i,function(A,i){I.Zw?I.$w.push({done:g,type:"NebulaSourceTileSdf",data:i}):g(A,i)})},vq.prototype.decodeNebulaSourceTileSdf=function(A,i,g){var I=this,t=i.url,B=i.ya,Q=(i.zoom,i.projectionId),C=(i.optimalZoom,i.Ca,i.mS,i.viewMode,i.showBuildingBlock,i.mH),e=i.ZL,o=i.buffer,i=-1!==t.indexOf("/oversea"),t=new polyfill.vH;return this.Ww.HQ(o,i,Q,B,t,C,e,function(A,i){I.Zw?I.$w.push({done:g,type:"NebulaSourceTileSdf",data:i}):g(A,i)}),{cancel:t.cancel}},vq.prototype.loadDistrictSourceTile=function(A,i,g){var I=i.url,t=i.tileCoord,B=i.projectionId,Q=i.tileSize;return i.styles,this._getDistrictSourceWorker(),this.kW.bw(I,t,B,Q,g)},vq.prototype.loadMapboxVTSourceTile=function(A,i,g){var I=this,t=i.url,B=i.tileCoord,Q=i.projectionId,C=i.tileSize,i=i.styles;return this._getMapboxVTSourceWorker(),this.QJ.bw(t,B,Q,C,i,function(A,i){I.Zw?I.$w.push({done:g,type:"loadMapboxVTSourceTile",data:i}):g(A,i)})},vq.prototype.reBufferMapboxVTSource=function(A,i,g){var I=i.MX,i=i.styles;return this._getMapboxVTSourceWorker(),this.QJ.mX(I,i,g)},vq.prototype.loadMapboxSourceTile=function(A,i,g){var I=i.url,t=i.tileCoord,B=i.projectionId,Q=i.tileSize,C=i.styles,i=i.adcode;return this._getMapboxSourceWorker(),this.vQ.bw(I,t,B,Q,C,i,g)},vq.prototype.updateMapStyle=function(A,i,g){polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["style-parse-begin"]||(polyfill.Support.amapRunTime["style-parse-begin"]=Date.now()));var I=JSON.parse(i.value);polyfill.Support.amapRunTime&&(polyfill.Support.amapRunTime["style-parse-end"]||(polyfill.Support.amapRunTime["style-parse-end"]=Date.now())),this.vn=new polyfill.StyleParser(i.TY),this.vn.jY(I),this.Ww.emit("styleReady")},vq.prototype.updateUserStyle=function(A,i,g){this.vn&&this.vn.setStyle(i.Kd),g&&g()},vq.prototype.sendHttp=function(A,i){this.R_.protocol=i.protocol,this.protocol=i.protocol},vq.prototype.updateParams=function(A,i){this.params=polyfill.assign(this.params,i),i.langForeign&&(this.langForeign=i.langForeign),i.QG&&(this.QG=i.QG)},vq.prototype.getSDFData=function(A,i,g){this.R_.loadData(i,{cb:function(A){g(null,A)}})},vq.prototype.getImages=function(A,i){var B=this,Q=i.data,C=i.cb,e=this.z_;e.loadImages(Q,{cb:function(A){for(var i=[],g=0,I=Q;g<I.length;g++){var t=I[g];i.push({url:t,data:e.getImage(t)})}B.Uh.send("imageLoaded",{data:i,cb:C})},type:"icon"})},vq.prototype.setPathWebgl=function(A,i,g){this.BW.setPathWebgl(i,g)},vq.prototype.sendIndoorRequest=function(A,i,g){var I=this;this.BW.AW(i,function(A,i){I.Zw?I.$w.push({done:g,type:"sendIndoorRequest",data:i}):g(A,i)})},vq.prototype.Qw=function(A){this.Uh.send("NebulaTileSdfLoaded",polyfill.ca)},vq.prototype.setMainThreadBusy=function(A,i){if(env.movingDraw)this.Zw=!1;else{if(this.Zw=i,!this.Zw)for(var g=0,I=this.$w;g<I.length;g++){var t=I[g];t.done?t.done(null,t.data):this.Uh.send(t.type,t.data)}this.$w=[]}},vq.prototype.loadWordsByFront=function(A){this.Uh.send("loadWordsByFront",A.Es,A.cb)},vq.prototype.innerLabelsLoadData=function(A,i,g){this.NQ.loadData(i,g)},vq.prototype.dQ=function(A){return this.lQ[A]},vq.prototype.deleteTileStaticSDF=function(A,i){this.IW.NW(i)},vq.prototype.PQ=function(A,i){this.QZ=i},vq.prototype._getNebulaSourceWorker=function(){return this.Ww||(this.Ww=new NebulaSourceWorker(this)),this.Ww},vq.prototype._getDistrictSourceWorker=function(){return this.kW||(this.kW=new DistrictSourceWorker(this)),this.kW},vq.prototype._getMapboxVTSourceWorker=function(){return this.QJ||(this.QJ=new polyfill.bX),this.QJ},vq.prototype._getMapboxSourceWorker=function(){var A;return this.vQ||(A=this.vQ=new MapboxSourceWorker(this),this.lQ[A.id]=A),this.vQ},vq.prototype.Fb=function(){var I=this;this.z_.on("iconImageLoaded",function(A){delete A.type,I.Uh.send("iconImageLoaded",A)}),this.R_.on("dynamicTextSDFInfoLoaded",function(A){delete A.type,I.Uh.send("dynamicTextSDFInfoLoaded",A.data)}),this.yw.on("dynamicTextVerticeLoaded",function(A){var i,g=A;I.Zw?(i=A.type,delete A.type,I.$w.push({type:i,data:g})):(delete A.type,I.Uh.send("dynamicTextVerticeLoaded",g))}),this.yw.on("dynamicTextVerticeLoadedByTile",function(A){var i,g=A;I.Zw?(i=A.type,delete A.type,I.$w.push({type:i,data:g})):(delete A.type,I.Uh.send("dynamicTextVerticeLoadedByTile",g))})},vq),uq;function vq(A,i,g){var I=uq.call(this)||this;return I.key=i,I.GW=g,I.lQ={},I.Zw=!1,I._id="-1",I.protocol="https",I.Yw=XHR,I.jQ=new polyfill.MY,I.QZ="",I.$w=[],I.Uh=new polyfill.Bh(A,I),I.self=A,A=I.z_=new ImageManagerWorker,I.R_=new polyfill.jb({parent:I,z_:A}),I.IW=new polyfill.xW(I,XHR),I.Ww=new NebulaSourceWorker(I),I.NQ=new InnerLabelsSourceWorker(I),I.lQ[I.Ww.id]=I.Ww,I.yw=new LabelWorker(I),I.BW=new OverlayWorker(I),polyfill.Support.wasm&&(I.PW=new RSAWorker(I)),I.Fb(),I.yY=new polyfill.wY({render:function(){I.jQ.exec(10)},check:function(){return I.jQ.xY()}}),I}return polyfill.Support.DW&&(self.Wh=new AMapWorker(self,sharedChunk.key,env),self.StyleParser=polyfill.StyleParser),AMapWorker}),define(["./shared"],function(Y){var u={"AMap.MouseTool":["AMap.RangingTool"],"AMap.Adaptor":["AMap.CallAMap"]},f=new Y.tS;function c(t){try{var i=localStorage.getItem("_AMap_"+t);if(!i)return;var n=JSON.parse(i);return n.version===Y.Module.eS.iS?(window._jsload_(t,n.script,!0),n.css&&window._cssload_(t,n.css,!0),f.add([t],void 0),f.finish(t),1):void window.localStorage.removeItem("_AMap_"+t)}catch(t){return}}function n(t){for(var i=[],n=0,s=t;n<s.length;n++){var e=s[n],r=e;if(!f.has(e)){if(r=u[r])for(var h=0,o=r;h<o.length;h++){var a=o[h];!t[a]&&i.indexOf(a)<0&&(c(a)||i.push(a))}i.indexOf(e)<0&&(c(e)||i.push(e))}}return i}function e(t,i){var n=document.createElement("script");n.type="text/javascript",document.body?(n.onload=function(){document.body.removeChild(n),i()},n.src=t,document.body.appendChild(n)):(n.onload=function(){document.head.removeChild(n),i()},n.src=t,document.head.appendChild(n))}var i,s=((i=document.getElementById("AMap_Dynamic_style"))||((i=document.createElement("style")).type="text/css",i.id="AMap_Dynamic_style",(ci=document.head||document.getElementsByTagName("head")[0]).childNodes.length<2?ci.appendChild(i):ci.insertBefore(i,ci.childNodes[1])),function(t){i.appendChild(document.createTextNode(t))});window._cssload_=function(t,i,n){try{!n&&window.localStorage&&i&&""!==i&&window.localStorage.setItem("_AMap_"+t,JSON.stringify({css:i,version:Y.Module.eS.iS}))}catch(t){}s(i)},window._jsload_=function(t,i,n){try{var s;!n&&i&&""!==i&&(s=window.localStorage["_AMap_"+t]||"{}",(s=JSON.parse(s)).version!==Y.Module.eS.iS||s.script?window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:Y.Module.eS.iS,script:i})):window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:Y.Module.eS.iS,script:i,css:s.css})))}catch(t){}Y.Module.nS(t,i)},window.cZ=Y.Module;var r="function"==typeof Float32Array;function h(t,i){return 1-3*i+3*t}function o(t,i){return 3*i-6*t}function a(t,i,n){return((h(i,n)*t+o(i,n))*t+3*i)*t}function l(t,i,n){return 3*h(i,n)*t*t+2*o(i,n)*t+3*i}var L=(t.prototype.t=function(t){for(var i=0,n=1;10!==n&&this.i[n]<=t;++n)i+=.1;var s=i+(t-this.i[--n])/(this.i[n+1]-this.i[n])*.1,e=l(s,this.o,this.s);return.001<=e?function(t,i,n,s){for(var e=0;e<4;++e){var r=l(i,n,s);if(0===r)return i;i-=(a(i,n,s)-t)/r}return i}(t,s,this.o,this.s):0===e?s:function(t,i,n,s,e){for(var r,h,o=0;0<(r=a(h=i+(n-i)/2,s,e)-t)?n=h:i=h,1e-7<Math.abs(r)&&++o<10;);return h}(t,i,i+.1,this.o,this.s)},t.prototype.h=function(t){return 0===t?0:1===t?1:a(this.t(t),this.l,this.u)},t.prototype.p=function(t){return t},t);function t(t,i,n,s){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");this.o=t,this.l=i,this.s=n,this.u=s,this.i=new(r?Float32Array:Array)(11);for(var e=0;e<11;++e)this.i[e]=a(.1*e,t,n)}var d,v,w={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},getStyle:function(t,i){var n,s=t.style[i];return"auto"===(s=(s=(s=s&&"auto"!==s||!document.defaultView?s:(n=document.defaultView.getComputedStyle(t,null))?n[i]:null)&&"auto"!==s||"height"!==i?s:t.clientHeight+"px")&&"auto"!==s||"width"!==i?s:t.clientWidth+"px")?null:s},getViewportOffset:function(t){var i,n=0,s=0,e=t,r=document.body,h=document.documentElement;do{if(n+=e.offsetTop||0,s+=e.offsetLeft||0,n+=parseInt(w.getStyle(e,"borderTopWidth"),10)||0,s+=parseInt(w.getStyle(e,"borderLeftWidth"),10)||0,i=w.getStyle(e,"position"),e.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||h.scrollTop||0,s+=r.scrollLeft||h.scrollLeft||0;break}}while(e=e.offsetParent);for(e=t;e!==r&&(n-=e.scrollTop||0,s-=e.scrollLeft||0,!w.m()&&Y.Support.webkit&&(s+=e.scrollWidth-e.clientWidth),e=e.parentNode););return[s,n]},m:function(){return d||(v="ltr"===w.getStyle(document.body,"direction"),d=!0),v},create:function(t,i,n,s){return t=document.createElement(t),n&&(t.className=n),i&&(s&&"before"===s?(s=i.firstChild,i.insertBefore(t,s)):i.appendChild(t)),t},toggleClass:function(t,i,n){n?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,n){t&&n&&(t.classList&&t.classList.remove?t.classList.remove(n):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===n?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(n,s,e){var i=document.createElement("iframe");i.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",i.onload=function(){i&&(i.contentWindow.onresize=t)},n.appendChild(i),i.src="about:blank";var r=0,h=0;function t(){e.k=n.getBoundingClientRect(),e.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===r&&i===h||(s(t,i),r=t,h=i)}return t(),e.resize=t,window.onscroll=t,function(){var t;e.resize&&(e.resize=null),window.onscroll&&(window.onscroll=null),i.contentWindow&&(i.contentWindow.onresize=null,i.contentWindow.document.write(""),i.parentNode.removeChild(i),null!==(t=i.contentWindow)&&void 0!==t&&t.close())}},watchSize2:function(n,s,e){var r=document.createElement("_");r.className="expand";var h=r.appendChild(document.createElement("_"));h.className="shrink";var o=r.appendChild(document.createElement("_"));o.className="expandChild";var a,u,t=h.appendChild(document.createElement("_"));return t.className="shrinkChild",h.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=o.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",n.appendChild(r),f(),function(){c(),n.removeChild(r)};function f(){c(),e.k=n.getBoundingClientRect(),e.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===a&&i===u||(a=t,u=i,o.style.width=2*t+"px",o.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,h.scrollLeft=h.scrollWidth,h.scrollTop=h.scrollHeight,s(t,i)),h.addEventListener("scroll",f),r.addEventListener("scroll",f)}function c(){h.removeEventListener("scroll",f),r.removeEventListener("scroll",f)}},mousePos:function(t,i,n){return t&&(n.k=t.getBoundingClientRect(),n.M=[t.clientLeft,t.clientTop]),t=n.k,[(i=i.touches&&i.changedTouches?0<i.touches.length?i.touches[0]:i.changedTouches[i.changedTouches.length-1]:i).clientX-t.left-n.M[0],i.clientY-t.top-n.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){return t?this.hasClass(t,i)?t:(t=t.parentElement)?w.closest(t,i):null:null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,n=0;n<t.length;n+=1)if(t[n]in i)return t[n];return!1},rotate:function(t,i,n){var s,e=w.kL;n=n||{x:t.clientWidth/2,y:t.clientHeight/2},e?(s="",t.style[e]=s+=" rotate("+i+"deg)",t.style[w.ML[e]+"-origin"]=n.x+"px "+n.y+"px"):(e=Math.cos(i*Math.PI/180),i=Math.sin(i*Math.PI/180),t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length&&((t=t.filters.item(0)).Dx=-n.x*e+n.y*i+n.x,t.Dy=-n.x*i-n.y*e+n.y,t.M11=t.M22=e,t.M12=-(t.M21=i)))},setCss:function(t,i){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n+=1)for(var s in i)i.hasOwnProperty(s)&&(t[n].style[s]=i[s]);return this},setOpacity:function(t,i){t.style&&("opacity"in t.style?t.style.opacity=""+i:"filter"in t.style&&(i=Math.round(100*i),t.style.filter="",100!==i&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")))},ML:{},kL:v=d=!1};w.kL=w._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),w.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var p=(m.prototype.isEnabled=function(){return"disabled"!==this.R},m.prototype.isActive=function(){return"active"===this.R},m.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},m.prototype.disable=function(){this.isEnabled()&&(this.R,this.R="disabled")},m.prototype.L=function(t){this.A&&(this.A=!1),t.ctrlKey||0!==t.button||(document.addEventListener("mousemove",this.T),document.addEventListener("mouseup",this.I),this.D(t))},m.prototype.P=function(t){if(1<t.touches.length)return this.j.removeEventListener("touchmove",this.T),void(this.R="enabled");this.A&&(this.A=!1),"enabled"===this.R&&(this.j.addEventListener("touchmove",this.T,{capture:!0,passive:!0}),document.addEventListener("touchend",this.oS),this.D(t))},m.prototype.D=function(t){this.$=this.U=this.B=w.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,this.XF=this._map.containerToCoord(this.$),this.W=[[Date.now(),this.$]],this.R="active"},m.prototype.Z=function(t){var i;"touchmove"===t.type&&1<t.touches.length||(this.W.length<2&&"active"===this.R&&this.G("dragstart",t),"touchmove"===t.type&&this.G("touchmove",t),this.G("dragging",t),this.isEnabled()&&("active"===this.R&&(this.R="pending"),"disabled"!==this.R&&this._map.getStatus().dragEnable&&(i=w.mousePos(this.j,t,this._map),this.q=t,this.B=Y.set(Y.create(),i[0],i[1]),this.Y(),this.W.push([Date.now(),this.B]),this.W.length<2||(t=this._map.getView(),i=this._map.containerToCoord(i),i=[this.XF[0]-i[0]+this.YF[0],this.XF[1]-i[1]+this.YF[1]],t.setOptions({center:this._map.getProjection().unproject(i[0],i[1])})))))},m.prototype.tt=function(t){if(0===t.button){if(this.it())return this.S(),void this.C();switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.et(t),this.G("dragend",t);break;default:this.R="enabled",this.S(),this.G("dragend",t)}}},m.prototype.N=function(t){if(0<t.touches.length)return this.$=this.U=this.B=w.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,void(this.XF=this._map.containerToCoord(this.$));if(this.it())return this.S(),this.C(),this.R="enabled",void this.G("dragend",t);switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.G("dragend",t),this.et(t);break;default:this.G("dragend",t),this.S()}},m.prototype.it=function(){var t=this._map.getLimitBounds();if(t=t&&t.toJSON()){var i=this._map.getBounds().toJSON(),n=[],s=this._map.getCenter().toJSON(),e=[s[0],s[1]];return(i[0]<t[0]||i[1]<t[1]||i[2]>t[2]||i[3]>t[3])&&(n[0]=i[0]-t[0],n[1]=i[1]-t[1],n[2]=i[2]-t[2],n[3]=i[3]-t[3],n[0]<0&&0<n[2]?e[0]=(t[0]+t[2])/2:n[0]<0?e[0]=s[0]-n[0]:0<n[2]&&(e[0]=s[0]-n[2]),n[1]<0&&0<n[3]?e[1]=(t[1]+t[3])/2:n[1]<0?e[1]=s[1]-n[1]:0<n[3]&&(e[1]=s[1]-n[3]),this._map.panTo(e,100),!0)}},m.prototype.S=function(){this.j.removeEventListener("touchmove",this.T),document.removeEventListener("touchend",this.oS),document.removeEventListener("mousemove",this.T),document.removeEventListener("mouseup",this.I)},m.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},m.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&60<i-t[0][0];)t.shift()},m.prototype.et=function(t){var i,n,s,e,r,h,o,a,u,f,c,l,d,v;function p(){this.isEnabled()&&this.A||(r=-1);var t=Date.now()-o;a<t&&(r=-1),t=[l[0]*t+d[0]*t*t/2,l[1]*t+d[1]*t*t/2],h=[h[0]+(t[0]-v[0]),h[1]+(t[1]-v[1])],v=t,r<=0?this.A=!1:(s.setOptions({center:Y.ProjectionManager.getProjection(e.projectionId).unproject(h[0],h[1])}),Y.Util.requestAnimFrame(p.bind(this)),r--)}this._map.getStatus().jogEnable&&(this.A=!0,this.Y(),(f=this.W).length<2||(c=f[f.length-1],i=f[0],n=[c[1][0]-i[1][0],c[1][1]-i[1][1]],0==(u=(c[0]-i[0])/1e3)||Y.equals(c[1],i[1])?this.G("moveend",t):(t=[n[0]/(.3/u),n[1]/(.3/u)],u=Math.sqrt(t[0]*t[0]+t[1]*t[1])/750,s=this._map.getView(),t=(e=s.getStatus()).rotation,u=r=parseInt((1e3*u+400)/17+"",10),new L(.1,0,1,.1),Y.V[e.projectionId].nt(-n[0]/7,n[1]/7,e.zoom),h=Y.ProjectionManager.getProjection(e.projectionId).project(e.center[0],e.center[1]),o=Date.now(),a=17*u,u=f[f.length-Math.min(f.length,3)],f=[c[1][0]-u[1][0],c[1][1]-u[1][1]],0!==t&&(f=this.J(t,f)),f=Y.V[e.projectionId].nt(f[0],-f[1],e.zoom),c=Math.min(u[0]-c[0],-15),l=[f[0]/c,f[1]/c],d=[-l[0]/a,-l[1]/a],v=[0,0],Y.Util.requestAnimFrame(p.bind(this)))))},m.prototype.J=function(t,i){var n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=Math.atan2(i[1],i[0]),s=t/180*Math.PI-s;return i[0]=n*Math.cos(s),i[1]=-n*Math.sin(s),i},m.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},m);function m(t,i){this.st="mouse",this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this),this.oS=this.N.bind(this)}var y=(b.prototype.isEnabled=function(){return"disabled"!==this.R},b.prototype.isActive=function(){return"active"===this.R},b.prototype.enable=function(){this.isEnabled()||(this.rt=!0,this.R="enabled")},b.prototype.ht=function(){return!!this.lt},b.prototype.disable=function(){if(this.isEnabled())switch(this.R){case"enabled":case"active":this.R="disabled",this.S(),this.C();break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},b.prototype.ut=function(t){t.preventDefault(),"enabled"===this.R&&this._map.getStatus().doubleClickZoom&&(t.ctrlKey||0!==t.button||this.D(t))},b.prototype.P=function(t,i){var n=this;if(this.$=w.mousePos(this.j,t,this._map),2===t.touches.length)return this.rt=!1,void(this.ct=0);this.rt=!0,this.ct++,this.ft=i,this.lt=!1,setTimeout(function(){1===n.ct&&(n.ct=0)},300),this.pt=[t.changedTouches[0].clientX,t.changedTouches[0].clientY],this.j.addEventListener("touchmove",this.dt),2<=this.ct&&this.j.addEventListener("touchend",this.N.bind(this))},b.prototype.vt=function(t){var i=this;this.rt&&(this.yt++,setTimeout(function(){i.yt=0},300),2===this.yt&&!this.lt&&this._map.getStatus().doubleClickZoom&&(t.preventDefault(),this.yt=0,this.ct=0,this.D(t)),2===this.ct&&(this.ct=0))},b.prototype.D=function(i){var n=this;this.lt=!0,this.R="active",this.G("zoomstart");var s,e,r=400,h=0,o=this._map.getView().getStatus().zoom,a=new L(.4,0,.15,1);o>=this.xt[1]||(e=0,s=function(){h+=16;var t=o+a.h(h/r);t>=n.xt[1]||(n.bt(i,t),o+1<=t&&(Y.Util.cancelAnimFrame(e),n.lt=!1,n.R="enabled",n.tt(),n.N()),(n.lt||h<400)&&(e=Y.Util.requestAnimFrame(s)))},e=Y.Util.requestAnimFrame(s))},b.prototype.gt=function(t){var i,n,s=w.mousePos(this.j,t,this._map);s[0]-this.$[0]==0&&s[1]-this.$[1]==0||(this.yt=-1,this.ct<2?this.ct=0:this.rt&&(this.lt=!0,this.wt=!0,this.ft.disable(),i=t.changedTouches.length,n=this._map.getView(),s=this._map.getView().getStatus().zoom-(t.changedTouches[i-1].clientY-this.pt[1])/100,n.setOptions({zoom:s}),this.pt=[t.changedTouches[i-1].clientX,t.changedTouches[i-1].clientY]))},b.prototype.N=function(){this.wt&&2<=this.ct&&(this.ft.enable(),this.tt(),this.lt=!1,this.wt=!1)},b.prototype.bt=function(t,i){var n,s,e=this._map.getView(),r=e.getStatus(),h=r.center,o=r.zoom,a=r.rotation,u=r.projectionId;this._map.getStatus().zoomEnable&&(n=w.mousePos(this.j,t,this._map),s=[this.j.clientWidth/2,this.j.clientHeight/2],r=this._t(s,n),t=Math.atan((n[1]-s[1])/(n[0]-s[0])),t=-a/180*Math.PI+t,r=[-Math.cos(t)*r,Math.sin(t)*r],n[0]-s[0]<0&&(r[0]=-r[0],r[1]=-r[1]),s=Y.V[u].nt(r[0],r[1],o),r=Y.V[u].nt(r[0],r[1],i),o=Math.pow(2,i-o),e.setOptions({kt:{pos:n,Mt:i,Rt:r,zt:s,scale:o,center:Y.set(Y.create(),h[0],h[1])}}),this.G("zooming"))},b.prototype.tt=function(t){t&&0!==t.button||(this.S(),this.C(),this.G("zoomend"))},b.prototype.S=function(){this.j.removeEventListener("dblclick",this.St),this.j.removeEventListener("touchmove",this.dt)},b.prototype.C=function(){delete this.$,delete this.U,delete this.U},b.prototype._t=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},b.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},b);function b(t,i){this.lt=!1,this.wt=!1,this.rt=!0,this.xt=Y.zoomRange,this.yt=0,this.ct=0,this.pt=[0,0],this._map=i,this.j=t,this.R="disabled",this.St=this.ut.bind(this),this.dt=this.gt.bind(this)}var g=(k.prototype.isEnabled=function(){return"disabled"!==this.R},k.prototype.isActive=function(){return"active"===this.R},k.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},k.prototype.disable=function(){if(this.isEnabled())switch(w.removeClass(this.j,"mapboxgl-touch-drag-pan"),this.R){case"active":this.R="disabled",this.S(),this.G("zoomstart");break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},k.prototype.ht=function(){return!!this.lt},k.prototype.P=function(t){2===t.touches.length&&(t.stopPropagation(),this.G("zoomstart"),this.$=[{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},{clientX:t.touches[1].clientX,clientY:t.touches[1].clientY,pageX:t.touches[1].pageX,pageY:t.touches[1].pageY}],this.B=this.$,t=this._map.getView(),this.zY=t.getStatus(),this.j.addEventListener("touchmove",this.T),this.j.addEventListener("touchend",this.At))},k.prototype.Z=function(t){var i,n,s,e,r,h,o,a,u,f,c,l,d,v,p,m,y,b,g,k,M;t.touches.length<2||(this.G("touchmove"),this._map.getStatus().touchZoom&&this.isEnabled()&&(this.lt=!0,i=-this.CF(t),s=(m=(n=this._map.getView()).getStatus()).rotation,e=m.center,r=m.zoom,k=m.projectionId,b=void 0===(v=m.Tt)?k:v,h=m.pitch,o=(y=this._map.getStatus()).rotateEnable,a=y.zoomEnable,u=y.pitchEnable,f=y.touchZoomCenter,c=this.MW.CY,d=l=!1,p=this.It(this.B[0],this.B[1]),g=this.It(t.touches[0],t.touches[1]),M=this.Dt(this.$[0],this.$[1]),k=this.Dt(t.touches[0],t.touches[1]),v=r+(g-p)/180,m=[((m=Y.Pt(w.mousePos(this.j,this.$[0],this._map),w.mousePos(this.j,this.$[1],this._map)))[0]+m[2])/2,(m[1]+m[3])/2],y=[this.j.clientWidth/2,this.j.clientHeight/2],g=this.jt(y,m),p=Math.atan((m[1]-y[1])/(m[0]-y[0])),p=s*Math.PI/180+p,g=[-Math.cos(p)*g,Math.sin(p)*g],m[0]-y[0]<0&&(g[0]=-g[0],g[1]=-g[1]),m=Y.V[b].nt(g[0],g[1],r),y=Y.V[b].nt(g[0],g[1],v),b=Math.pow(2,v-r),g=this.zY.rotation+(k-M),10<Math.abs(k-M)&&(this.MW.CY=!0),.1<Math.abs(i)&&(l=c=!(d=!0)),.01<Math.abs(v-r)&&(l=!0),k=w.mousePos(this.j,this.$[0],this._map),M=w.mousePos(this.j,this.$[1],this._map),1===f?n.setOptions({pitch:u&&d?h+i:h,zoom:a&&l?v:r,rotation:o&&c?g:s}):n.setOptions({pitch:u&&d?h+i:h,kt:a&&l&&{Mt:v,Rt:y,zt:m,pos:[(k[0]+M[0])/2,(k[1]+M[1])/2],scale:b,center:Y.set(Y.create(),e[0],e[1])},rotation:o&&c?g:s}),this.B=[{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},{clientX:t.touches[1].clientX,clientY:t.touches[1].clientY,pageX:t.touches[1].pageX,pageY:t.touches[1].pageY}]))},k.prototype.CF=function(t){var i=this.B,n=this.$,s=[w.mousePos(this.j,i[0],this._map),w.mousePos(this.j,i[1],this._map)],e=(w.mousePos(this.j,n[0],this._map),w.mousePos(this.j,n[1],this._map),[w.mousePos(this.j,t.touches[0],this._map),w.mousePos(this.j,t.touches[1],this._map)]),i=Math.sqrt(Math.pow(s[0][0]-s[1][0],2)+Math.pow(s[0][1]-s[1][1],2)),n=Math.sqrt(Math.pow(e[0][0]-e[1][0],2)+Math.pow(e[0][1]-e[1][1],2));return 2<Math.abs(n-i)?0:(t=e[0][0]-s[0][0],n=e[0][1]-s[0][1],i=e[1][0]-s[1][0],s=e[1][1]-s[1][1],Math.abs(n)<Math.abs(t)||Math.abs(s)<Math.abs(i)?0:-(n+s)/2/4)},k.prototype.Et=function(t){this.MW.CY=!1,this.G("zoomend"),this.S()},k.prototype.It=function(t,i){var n=i.clientX-t.clientX,t=i.clientY-t.clientY;return Math.sqrt(n*n+t*t)},k.prototype.jt=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},k.prototype.Dt=function(t,i){var n=t.pageX-i.pageX,i=t.pageY-i.pageY;return Math.atan2(i,n)/Math.PI*180},k.prototype.S=function(){this.j.removeEventListener("touchstart",this.Nt),this.j.removeEventListener("touchmove",this.T),this.j.removeEventListener("touchend",this.At)},k.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},k);function k(t,i){this.MW={CY:!1},this._map=i,this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.At=this.Et.bind(this)}var M=4.000244140625,x=(A.prototype.isEnabled=function(){return"disabled"!==this.R},A.prototype.isActive=function(){return"active"===this.R},A.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},A.prototype.disable=function(){this.isEnabled()&&(this.R="disabled",this.C(),this.G("zoomend"))},A.prototype.Ut=function(t){t.preventDefault();var i,n,s,e=this._map.getStatus();this.G("zoomstart"),this.isEnabled()&&(i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaMode===WheelEvent.DOM_DELTA_PAGE?400*t.deltaY:t.deltaY,s=(n=Date.now())-(this.Bt||0),this.Bt=n,0!==i&&i%M==0?this.Wt="wheel":0!==i&&Math.abs(i)<4?this.Wt="trackpad":400<s?(this.Wt=null,this.Gt=i):this.Wt||(this.Wt=Math.abs(s*i)<200?"trackpad":"wheel",this.Zt&&(i+=this.Gt)),t.shiftKey&&i&&(i/=4),e&&e.zoomSpeed&&(i*=e.zoomSpeed),this.Wt&&(this.$t-=i,this.isActive()||this.D(t)))},A.prototype.D=function(t){var i,n,s,e,r,h,o,a,u;this.$t&&(n=(e=(i=this._map.getView()).getStatus()).rotation,u=e.zoom,s=e.center,a=e.projectionId,r="wheel"===this.Wt&&Math.abs(this.$t)>M?1/450:.01,h=2/(1+Math.exp(-Math.abs(this.$t*r))),this.$t<0&&0!==h&&(h=1/h),o=this.Yt(u),e=Math.min(this._map.getZooms()[1],Math.max(2,this.Vt(o*h))),r=w.mousePos(this.j,t,this._map),o=[this.j.clientWidth/2,this.j.clientHeight/2],h=this._t(o,r),t=Math.atan((r[1]-o[1])/(r[0]-o[0])),t=-n/180*Math.PI+t,h=[-Math.cos(t)*h,Math.sin(t)*h],r[0]-o[0]<0&&(h[0]=-h[0],h[1]=-h[1]),o=Y.V[a].nt(h[0],h[1],u),a=Y.V[a].nt(h[0],h[1],e),u=Math.pow(2,e-u),this._map.XT(h),i.setOptions({kt:{pos:r,Mt:e,Rt:a,zt:o,scale:u,center:Y.set(Y.create(),s[0],s[1])}}),this.$t=0)},A.prototype.Yt=function(t){return Math.pow(2,t)},A.prototype.Vt=function(t){return Math.log(t)/Math.LN2},A.prototype._t=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},A.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},A.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},A);function A(t,i){this._map=i,this.j=t,this.R="disabled",this.Wt="wheel",this.$t=0}var z=(C.prototype.isEnabled=function(){return"disabled"!==this.R},C.prototype.isActive=function(){return"active"===this.R},C.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},C.prototype.disable=function(){if(this.isEnabled()){switch(this.R){case"active":this.S(),this.C();break;case"pending":this.S()}this.R="disabled"}},C.prototype.L=function(t){this.A&&clearInterval(this.A),(2===t.button||t.ctrlKey&&0===t.button)&&(this.j.addEventListener("mousemove",this.T,{passive:!0}),this.j.addEventListener("mouseup",this.I),this.j.addEventListener("mouseleave",this.I),this.D(t))},C.prototype.D=function(t){this.$=this.U=this.B=w.mousePos(this.j,t,this._map),this.W=[[Date.now(),this.$]],this.R="active"},C.prototype.Z=function(t){var i,n,s;this.W.length<2&&"active"===this.R&&this.G("dragstart",t),this.G("dragging",t),this.isEnabled()&&(n=w.mousePos(this.j,t,this._map),this.q=t,this.B=Y.set(Y.create(),n[0],n[1]),this.Y(),this.W.push([Date.now(),this.B]),this.W.length<2||("active"===this.R&&(this.R="pending"),"disabled"!==this.R&&(t=(s=(i=this._map.getView()).getStatus()).rotation,n=s.pitch,s=[this.B[0]-this.W[this.W.length-2][1][0],this.B[1]-this.W[this.W.length-2][1][1]],(!this._map.getStatus().pitchEnable||Math.abs(s[0])>Math.abs(s[1]))&&(s[1]=0),(!this._map.getStatus().rotateEnable||Math.abs(s[0])<Math.abs(s[1]))&&(s[0]=0),15<Math.abs(this.B[0]-this.$[0])&&(this.B[1]>this.j.clientHeight/2?t-=s[0]/10:t+=s[0]/10),n-=s[1]/this._map.getZooms()[1]*2,i.setOptions({rotation:t,pitch:n}))))},C.prototype.tt=function(t){switch(this.R){case"active":this.R="enabled",this.C();break;case"pending":this.R="enabled",this.G("dragend",t);break;default:this.G("dragend",t)}this.S()},C.prototype.S=function(){this.j.removeEventListener("mousemove",this.T),this.j.removeEventListener("mouseup",this.I),this.j.removeEventListener("mouseleave",this.I)},C.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},C.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&160<i-t[0][0];)t.shift()},C.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},C);function C(t,i){this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this)}var S=(T.prototype.Xt=function(){this._container.addEventListener("mouseenter",this.DL.bind(this)),this._container.addEventListener("mouseover",this.OL.bind(this)),this._container.addEventListener("mouseleave",this.PL.bind(this)),this._container.addEventListener("mouseup",this.tt.bind(this)),this._container.addEventListener("mouseout",this.BL.bind(this)),this._container.addEventListener("mousemove",this.jL.bind(this)),this._container.addEventListener("mousedown",this.Jt.bind(this)),this._container.addEventListener("touchend",this.N.bind(this)),this._container.addEventListener("touchstart",this.Kt.bind(this),!1),this._container.addEventListener("touchmove",this.gt.bind(this),!1),this._container.addEventListener("wheel",this.Qt.bind(this),{passive:!1}),this._container.addEventListener("contextmenu",this.EL.bind(this)),this._container.addEventListener("keydown",this.ii.bind(this))},T.prototype.fireEvent=function(t,i){if(i){i.D0=t;var n=this._map.getStatus();if("scrollWheel"===t){if(!n.scrollWheel)return void this.oi.disable();this.oi.enable()}var s,e=w.mousePos(this._container,i,this._map),r=e[0],h=e[1],o=this._map.getView().containerTolnglat(r,h),a=o[0],u=o[1];if("mousemove"===t&&this.ri&&this.ri.P$)s=this.ri;else if("dragstart"===t||"dragging"===t||"dragend"===t)switch(t){case"dragstart":s=!n.pickWhenMoving&&this._map.TL()?this.ri:this.si(i),this.ri=s;break;case"dragging":s=this.ri;break;case"dragend":s=this.ri,this.ri=void 0}else s=!n.pickWhenMoving&&this._map.TL()?this.ri:this.si(i);e=this.hi(s,t),u={lnglat:o=new Y.LngLat(a,u),target:s,pixel:h=new Y.Pixel(r,h),originEvent:i,pos:a=this._map.getProjection().project(a,u),vectorIndex:0},s&&(u.vectorIndex=s&&s.iE&&i.lnglat&&s.iE(i.lnglat)||0),-1!==["mouseover","mousemove","mouseout","mouseenter","mouseleave"].indexOf(t)?this.ui(t,u):s&&this.ci(s,t,u),a={lnglat:o,target:s,pixel:h,originEvent:i,pos:a},(u=u.target)&&"poi"!==u.type&&!e||(a.target=this._map),s&&"poi"===s.type||s&&e?this._map.emit(t,a):"dblclick"===t&&s?this.fi.disable():"dragstart"!==t&&"dragging"!==t&&"dragend"!==t||!s||!s.getDraggable()&&"AMap.InfoWindow"!==s.type&&"AMap.ContextMenu"!==s.type?s||(n.dragEnable||"dragging"!==t&&"dragstart"!==t&&"dragend"!==t)&&this._map.emit(t,a):"dragend"===t?this.ft.enable():this.ft.disable()}},T.prototype.hi=function(t,i){return!(!t||"poi"===t.type||"dragstart"===i||"dragging"===i||"dragend"===i||!this._map.getStatus().allBubble&&!Boolean(t.getOptions().bubble))},T.prototype.ti=function(t){this.fi.enable(),this.fireEvent("dblclick",t),this.fi.ut(t)},T.prototype.Jt=function(t){this._map.cancelMapAnimate(),this.Ht="mousedown",this.fireEvent("mousedown",t),this.ft.enable(),this.ft.L(t),this.ei.L(t),this.$=w.mousePos(this._container,t,this._map)},T.prototype.OL=function(t){this.fireEvent("mouseover",t)},T.prototype.DL=function(t){this.fireEvent("mouseenter",t)},T.prototype.PL=function(t){this.fireEvent("mouseleave",t)},T.prototype.BL=function(t){this.fireEvent("mouseout",t)},T.prototype.tt=function(t){var i=this;"mousedown"!==this.Ht||t.ctrlKey||(setTimeout(function(){i.nB=0},300),this.Ht="false",2===t.button?this.fireEvent("rightclick",t):(this.nB++,2<=this.nB?(this.fi.enable(),this.fireEvent("dblclick",t),this.fi.ut(t),this.nB=0):this.fireEvent("click",t))),this.fireEvent("mouseup",t)},T.prototype.FL=function(t){"move"!==this.Ht&&this.fireEvent("click",t)},T.prototype.jL=function(t){var i;"mousedown"===this.Ht&&(i=w.mousePos(this._container,t,this._map),(1<Math.abs(this.$[0]-i[0])||1<Math.abs(this.$[1]-i[1]))&&(this.Ht="move")),this.fireEvent("mousemove",t)},T.prototype.Kt=function(t){var i=this;"infoWindow"!==t.cH&&t.cancelable&&t.preventDefault(),this.oB="touchstart",this.$=w.mousePos(this._container,t,this._map),this._map.cancelMapAnimate(),this.fireEvent("touchstart",t),this.rB=(new Date).getTime(),this.ft.enable(),this.ft.P(t),this.fi.P(t,this.ft),this.ni.P(t),clearTimeout(this.aB),1===t.touches.length&&(this.aB=setTimeout(function(){i.fireEvent("rightclick",t)},800))},T.prototype.gt=function(t){this.$&&(t=w.mousePos(this._container,t,this._map),(1<Math.abs(t[0]-this.$[0])||1<Math.abs(t[1]-this.$[1]))&&"touchstart"===this.oB&&(this.oB="touchmove"))},T.prototype.N=function(t){var i=this,n=(new Date).getTime();this.fireEvent("touchend",t),clearTimeout(this.aB),"touchstart"===this.oB&&n-this.rB<800&&(this.oB="false",this.fireEvent("click",t),setTimeout(function(){i.dH=0},300),this.dH++,2<=this.dH&&(this.fireEvent("dblclick",t),this.dH=0)),this.fi.vt(t)},T.prototype.Qt=function(t){this._map.cancelMapAnimate(),this.fireEvent("mousewheel",t),this._map.getStatus().scrollWheel&&(t.preventDefault(),this.ft.disable(),this.oi.Ut(t))},T.prototype.EL=function(t){t.ctrlKey,t.preventDefault()},T.prototype.si=function(t){var i,s=(n=this._map).DF(),e=n.pi,r=n.di,n=n.vm,h=s.concat([e,r,n]),e=(s=w.mousePos(this._container,t,this._map))[0],r=s[1],s=(n=this._map.getView().containerTolnglat(e,r))[0],n=n[1];t.lnglat=new Y.LngLat(s,n),t.pixel=new Y.Pixel(e,r);for(var o=h.length-1;0<=o;o--){var a=h[o];if(a=a&&a.vi(t)){if(!a.getOptions){i=a;break}if(!0!==a.getOptions().noSelect){i=a;break}}}return i},T.prototype.ui=function(t,i){var e=void 0===(s=(n=this.mi).yi)?null:s,s=void 0===(r=n.xi)?null:r,r=n.vectorIndex,n=i.target;"mousemove"!==t&&"mouseleave"!==t||("mousemove"===t?e?n?e.hS!==n.hS||(void 0===r?-1:r)!==i.vectorIndex?(this.ci(e,"mouseout",s),this.ci(n,"mouseover",i)):this.ci(n,"mousemove",i):this.ci(e,"mouseout",s):n&&this.ci(n,"mouseover",i):"mouseleave"===t&&e&&this.ci(e,"mouseout",s),this.mi.yi=n,this.mi.vectorIndex=i.vectorIndex,this.mi.xi=i)},T.prototype.ci=function(t,i,n){"poi"===t.type?this._map.getStatus().isHotspot&&this.bi(t,i,n):t.emit(i,n)},T.prototype.bi=function(t,i,n){var s,e,r,h="hotspot";switch(i){case"click":this._map.setCursor("pointer"),s=h+i;break;case"mouseover":this._map.setCursor("pointer"),s=h+"over";break;case"mouseout":this._map.setCursor(""),s=h+"out"}s&&(e=(r=this._map.getProjection().unproject(t.lnglat[0],t.lnglat[1]))[0],r=r[1],n={type:s,id:t.id,name:t.name,lnglat:new Y.LngLat(e,r),originEvent:n.originEvent},this._map.emit(s,n))},T.prototype.ii=function(t){var i,n;this._map.getStatus().keyboardEnable&&(i=this._map.getZoom(),n=this._map.getRotation(),"="===t.key?this._map.setZoom(i+1,!0):"-"===t.key&&this._map.setZoom(i-1,!0),t.ctrlKey?"ArrowLeft"===t.key?this._map.setRotation(n-90,!0):"ArrowRight"===t.key&&this._map.setRotation(n+90,!0):"ArrowUp"===t.key?this._map.panBy(0,300):"ArrowDown"===t.key?this._map.panBy(0,-300):"ArrowLeft"===t.key?this._map.panBy(300,0):"ArrowRight"===t.key&&this._map.panBy(-300,0))},T);function T(t){this.Ht="false",this.oB="false",this.nB=0,this.dH=0,this.aB=0,this.rB=0,this.mi={yi:null,xi:null},this._map=t,this._container=this._map.getMapsContainer(),this.ft=new p(this._container,t),this.ft.enable(),this.oi=new x(this._container,t),this.oi.enable(),this.fi=new y(this._container,t),this.fi.enable(),this.ni=new g(this._container,t),this.ni.enable(),this.ei=new z(this._container,t),this.ei.enable()}var I,D=new Y.rW({}),O=(I=Y.Event,Y.Ei(E,I),E.prototype.lo=function(){return this.Oo},E.prototype.destroy=function(){},E.prototype.Fo=function(t){!t||t===this.Oo||this.pS||this.Oo||(this.pS=!0,this.Oo=!0,this.emit("complete"))},E.prototype.VE=function(t,i,n){for(var s=this.lZ(),e=[],r=0;r<t.length;r++){var h=t[r],h=Y.ProjectionManager.getProjection("EPSG:3857").unproject(h[0],h[1]);e.push(h)}var o=s.boundsP16;i&&"china"===i?o=[o[0]]:i&&"oversea"===i&&(o=s.nebulaOutSea);for(var a=0;a<o.length;a++){var u=o[a];if(D.isRingInRingByOutsea(e,u[0]))return!0}return!1},E.prototype.rG=function(t,i){for(var n=this.lZ(),s=[],e=0;e<t.length;e++){var r=t[e],r=Y.ProjectionManager.getProjection("EPSG:3857").unproject(r[0],r[1]);s.push(r)}for(var h=n.boundsP16,o=0;o<h.length;o++){var a=h[o];if(D.isRingInRingByMapbox(s,a[0]))return!0}return!1},E.prototype.aU=function(t,i){for(var n=this.lZ(),s=[],e=0;e<t.length;e++){var r=t[e],r=Y.ProjectionManager.getProjection("EPSG:3857").unproject(r[0],r[1]);s.push(r)}for(var h=n.boundsP16,o=0;o<h.length;o++){var a=h[o];if(D.isRingInRingByMapboxB(s,a[0]))return!0}return!1},E.prototype.sU=function(t){for(var i=this.lZ().boundsP16,n=i.length,s=t.projectionId,e=[],r=0;r<n;r++){var h=i[r],h=Y.V[s].Xs(h[0],h[1],16);e.push(h[0]),e.push(h[1])}return e},E.prototype.UH=function(t){},E.prototype.Eo=function(){this.map.setNeedUpdate(!0)},E.prototype.lZ=function(){var t=this.map.getOutseaDataType();return Y.vZ(t)},Y.dZ([Y.pZ("Source")],E));function E(t,i,n,s){var e=I.call(this)||this;return e.map=n,e.layer=s,e.Oo=!1,e.pS=!1,e._id=t.id,e.Wt=t.type,e.Be=t.tileUrl,t.url&&(e.$o=t.url),e}var R=(Object.defineProperty(P.prototype,"size",{get:function(){return Y.keys(this.VL).length},eb:!1,nb:!0}),P.prototype.clear=function(){this.VL={}},P.prototype.set=function(t,i){this.VL[t]=i},P.prototype.get=function(t){return this.VL[t]},P.prototype.delete=function(t){delete this.VL[t]},P.prototype.has=function(t){return void 0!==this.VL[t]},P);function P(){this.VL={}}var j="newer",B="older",F=(W.prototype.Uo=function(t){var i=this.Bo;(this.Bo=t)<i&&this.MN()},W.prototype.keys=function(){return new N(this.Wo)},W.prototype.values=function(){return new U(this.Wo)},W.prototype.entries=function(){return this},W.prototype.forEach=function(t,i){"object"!=typeof i&&(i=this);for(var n=this.Wo;n;)t.call(i,n.value,n.key,this),n=n[j]},W.prototype.toJSON=function(){for(var t=new Array(this.size),i=0,n=this.Wo;n;)t[i++]={key:n.key,value:n.value},n=n[j];return t},W.prototype.toString=function(){for(var t="",i=this.Wo;i;)t+=String(i.key)+":"+i.value,(i=i[j])&&(t+=" < ");return t},W.prototype.Go=function(t){t!==this.Zo&&(t[j]&&(t===this.Wo&&(this.Wo=t[j]),t[j][B]=t[B]),t[B]&&(t[B][j]=t[j]),t[j]=void 0,t[B]=this.Zo,this.Zo&&(this.Zo[j]=t),this.Zo=t)},W.prototype.assign=function(t){var i,n=this.Bo||Number.MAX_VALUE;this.qo.clear();for(var s=t,e=s.next();!e.done;e=s.next()){var r=new G(e.value[0],e.value[1]);if(this.qo.set(r.key,r),i?(i[j]=r)[B]=i:this.Wo=r,i=r,0==n--)throw new Error("overflow")}this.Zo=i,this.size=this.qo.size},W.prototype.get=function(t,i){if(t=this.qo.get(t))return i&&this.Go(t),t.value},W.prototype.set=function(t,i){var n=this.qo.get(t);return n?(n.value=i,this.Go(n)):(this.qo.set(t,n=new G(t,i)),this.Zo?(this.Zo[j]=n)[B]=this.Zo:this.Wo=n,this.Zo=n,++this.size,this.size>this.Bo&&this.MN()),this},W.prototype.shift=function(){var t=this.Wo;if(t)return this.Wo[j]?(this.Wo=this.Wo[j],this.Wo[B]=void 0):(this.Wo=void 0,this.Zo=void 0),t[j]=t[B]=void 0,t.value.destroy(),this.qo.delete(t.key),--this.size,[t.key,t.value]},W.prototype.find=function(t){return(t=this.qo.get(t))?t.value:void 0},W.prototype.has=function(t){return this.qo.has(t)},W.prototype.delete=function(t){if(t=this.qo.get(t))return this.qo.delete(t.key),t[j]&&t[B]?(t[B][j]=t[j],t[j][B]=t[B]):t[j]?(t[j][B]=void 0,this.Wo=t[j]):t[B]?(t[B][j]=void 0,this.Zo=t[B]):this.Wo=this.Zo=void 0,this.size--,t.value},W.prototype.clear=function(){this.Wo=this.Zo=void 0,this.size=0,this.qo.clear()},W.prototype.AN=function(t){return"loaded"!==t.value.status||(t=t.value.stamp)&&this.wN&&t===this.wN},W.prototype.QF=function(t){this.wN=t},W.prototype.MN=function(){if(this.Wo&&this.Zo)for(var t=this.Wo,i=this.Zo.key;t&&i&&t.key!==i;){if(this.AN(t))this.Go(t);else if(this.shift(),this.size<=this.Bo)return;t=this.Wo}},W);function W(t,i){this.entries=i,"number"!=typeof(this.Bo=t)&&(i=t,t=0),this.size=0,this.Bo=t,this.Wo=this.Zo=void 0,this.qo=new("undefined"!=typeof Map?Map:R),i&&(this.assign(i),t<1&&(this.Bo=this.size))}var G=function(t,i){this.key=t,this.value=i,this[j]=void 0,this[B]=void 0},N=(_.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[j],{done:!1,value:t.key}):{done:!0,value:void 0}},_);function _(t){this.Vo=t}var U=(Z.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[j],{done:!1,value:t.value}):{done:!0,value:void 0}},Z);function Z(t){this.Vo=t}var X,J=(X=F,Y.Ei(H,X),H.prototype.shift=function(){var t=this.Wo;if(t)return this.Wo[j]?(this.Wo=this.Wo[j],this.Wo[B]=void 0):(this.Wo=void 0,this.Zo=void 0),t[j]=t[B]=void 0,this.qo.delete(t.key),this.emit("delete",{key:t.key}),--this.size,[t.key,t.value]},H.prototype.on=function(t,i,n,s){void 0===n&&(n=this),void 0===s&&(s=!1);for(var e=0,r=Array.isArray(t)?t:[t];e<r.length;e++){var h=r[e];this._on(h,i,n,s)}return this},H.prototype.off=function(t,i,n){void 0===n&&(n=this);var s=this.vI;if(t in s)for(var e=0;e<s[t].length;e+=1)if(s[t][e].fn===i&&s[t][e].context===n)return s[t].splice(e,1),this;return this},H.prototype.hasEvents=function(t,i,n){void 0===n&&(n=this);var s=this.vI;if(t&&i&&t in s)for(var e=0;e<s[t].length;e+=1)if(s[t][e].fn===i&&s[t][e].context===n)return!0;return!1},H.prototype.clearEvents=function(t){return t?this.vI[t]&&delete this.vI[t]:this.vI={},this},H.prototype.emit=function(t,i){if(void 0===i&&(i={}),!(t in this.vI))return this;for(var n=Y.Ln(Y.Ln({},i),{type:t}),s=this.vI[t],e=0,r=s.length;e<r;e+=1){var h=s[e];h.fn&&(h.fn.call(h.context,n),h.once&&(this.vI[t].splice(e,1),--e,--r))}return this},H.prototype._on=function(t,i,n,s){if(void 0===s&&(s=!1),this.hasEvents(t,i,n=void 0===n?this:n))return this;var e=this.vI;return e[t]=e[t]||[],e[t].push({fn:i,context:n||this,once:s}),this},H);function H(){var t=null!==X&&X.apply(this,arguments)||this;return t.vI={},t}var V,q=(V=Y.Event,Y.Ei(Q,V),Q.prototype.QF=function(t){this.Ho.QF(t)},Q.prototype.Xo=function(t){this.Ho.Uo(t)},Q.prototype.Jo=function(t){var i=this.ia(t.zo);this.keys[i]=1,this.Ho.set(i,t)},Q.prototype.Qo=function(t){var i=this.ia(t.zo);this.Ho.set(i,t)},Q.prototype.getTile=function(t,i){return void 0===i&&(i=!0),this.Ko(t)?this.Ho.get(this.ia(t),i):null},Q.prototype.xf=function(t,i){return void 0===i&&(i=!1),this.Ho.has(t)?this.Ho.get(t,i):null},Q.prototype.ea=function(t){var i=this.ia(t.zo);return!!this.Ko(t.zo)&&(this.Ho.delete(i),delete this.keys[i],!0)},Q.prototype.Ko=function(t){return t=this.ia(t),!!this.Ho.has(t)},Q.prototype.destroy=function(){this.Ho.clear()},Q.prototype.forEach=function(t){this.Ho.forEach(t)},Q.prototype.ia=function(t){if(t.key)return t.key;var i=t.z+","+t.x+","+t.y;return t.key=i},Y.dZ([Y.pZ("TileCache")],Q));function Q(t){void 0===t&&(t=500);var i=V.call(this)||this;return i.keys={},i.na=t,i.Ho=new J(i.na),i}var K,$=(K=q,Y.Ei(tt,K),tt.prototype.MD=function(t,i){void 0===i&&(i=Y.zB.ALL);var n="";return t?i!==t&&(n="all"===t?"":i===Y.zB.ALL?t?t===Y.zB.LITE?Y.zB.LEFT:Y.zB.LITE:Y.zB.ALL:i):n=i,n},tt.prototype.ea=function(t){return t.rN(),K.prototype.ea.call(this,t)},tt);function tt(t){return t=K.call(this,t=void 0===t?500:t)||this,Y.Event.extend("delete",t.Ho,t),t}var it,nt=(it=q,Y.Ei(st,it),st);function st(t){return t=it.call(this,t=void 0===t?500:t)||this,Y.Event.extend("delete",t.Ho,t),t}var et=(rt.prototype.Uo=function(t){this.Bo=t},rt.prototype._B=function(t,i,n,s){void 0===s&&(s=this.Bo);for(var e=n||"china",r=0;r<t.length;r+=s){var h=t.slice(r,r+s),o=this.qN++,h={wD:this.target(h,o,i,e),ZN:h,id:o};this.KN.push(h),this.YN[o]=h}},rt.prototype.qH=function(t){for(var i=[],n=[],s=0,e=this.KN;s<e.length;s++)for(var r=e[s],h=0;h<r.ZN.length;h++){var o=r.ZN[h];if(this.QN(t,o)){Array.prototype.push.apply(i,r.ZN);break}h===r.ZN.length-1&&n.push(r)}for(var a=0,u=n;a<u.length;a++){(r=u[a]).wD&&r.wD.cancel();var f=this.KN.indexOf(r);this.KN.splice(f,1),delete this.YN[r.id],this.JN(r.ZN)}return{yB:i,SB:n}},rt.prototype.QN=function(t,i){return-1<t.indexOf(i.slice(0,-2))},rt.prototype.CB=function(t){var i=this.YN[t];delete this.YN[t],i&&(i=this.KN.indexOf(i),this.KN.splice(i,1))},rt);function rt(t,i,n){void 0===n&&(n=5),this.target=t,this.JN=i,this.Bo=n,this.qN=0,this.KN=[],this.YN={}}var ht,ot=Y.Support.scale,at=(ht=O,Y.Ei(ut,ht),ut.prototype.loadData=function(t,i,n,s){var e=this;if("optimise"===s.loadData()&&s.TL())return!1;this.aa=t,this.sa=[];for(var r=t.bounds,h=this.ra(t.optimalZoom),o=this.ha(r,h),a=[],u=t.optimalZoom,f=Y.map(o,function(t){var i=e.fa(t.x,t.z);return t.z+","+i+","+t.y}),c=this.QH.qH(f),l=[],d=0;d<o.length;d++){var v,p,m=o[d],y=new Y.ca(m.z,this.fa(m.x,m.z),m.y),b=new Y.ca(m.z,m.x,m.y),g=!!this.u0,k=Y.Util.kD(y.key,u,g);(g=this.ua.getTile(y,!0))?(v=this.ua.MD(g.tag,k))&&(g.tag=k,p=m.key+","+Y.Util.SD(v),c.yB.indexOf(p)<0&&l.push(p)):(p=y.key+","+Y.Util.SD(k),c.yB.indexOf(p)<0&&((y=new Y.pa(y)).status=Y.TileState.LOADING,y.xB=Y.TileState.LOADING,this.ua.Jo(y),y.tag=k,y.gB=k,l.push(p))),!g||g.status!==Y.TileState.LOADED&&g.status!==Y.TileState.RELOADING||this.sa.push(b),g&&(g.status===Y.TileState.LOADED||g.status===Y.TileState.RELOADING)||a.push(m),g&&g.status===Y.TileState.LOADED&&g.version&&g.version!==this.VH&&(this.sa.push(b),g.status=Y.TileState.RELOADING,l.push(m.key+","+Y.Util.SD(g.tag)),(v=this.ua.MD(g.tag,k))&&(p=m.key+","+Y.Util.SD(v),c.yB.indexOf(p)<0&&l.push(p)))}this.da(t,this.sa,a,s);var M,w,x=this.map.getOutseaState(),A=this.map.getOutseaDataType();return x&&!A?9.8<=h?(r=(M=this.OE(l)).overseaTile,w=M.chinaTile,f=M.mapboxTile,this.PE(r,"oversea"),this.PE(w,"china"),this.PE(f,"mapbox"),this.zD(w,t,h,s,n),this.zD(r,t,h,s,n,void 0,"outsea")):(this.PE(l,"china"),this.zD(l,t,h,s,n,void 0,"a00")):x&&A&&"mapbox"===A?9.8<=u?(w=(M=this.OE(l)).chinaTile,this.PE(w,"china"),this.zD(w,t,h,s,n,void 0)):(this.PE(l,"china"),this.zD(l,t,h,s,n,void 0,"a00")):(this.PE(l,"china"),this.zD(l,t,h,s,n,void 0)),0===l.length},ut.prototype.getData=function(i){var n=this,t=i.bounds,s=this.ra(i.optimalZoom),e=this.ha(t,s),r=[],h={};14===s&&(h=this.ha(t,15,!0));var o=this.map.qF();if(this.ua.QF(o),this.sa.sort(function(t){return n.ra(i.optimalZoom)===t.z?1:-1}),0<this.sa.length)for(var a=0;a<this.sa.length;a++){var u,f,c,v,p,l=this.sa[a],d=this.ua.getTile(l,!0),m=[0,0],y=i.centerCoord;d?(u=Y.lcs.getLocalByCoord([y[0],y[1]]),i.optimalZoom>=Y.Ra?(f=Y.lcs.getSize(),v=d.localCoord.x-u.x,p=d.localCoord.y-u.y,0!=v&&(v*=f[0],m[0]=v),0!=p&&(p*=f[1],m[1]=p),i.optimalZoom>=Y.Ra&&Y.za>=d.zo.z&&(m[0]=-u.center[0],m[1]=-u.center[1])):i.optimalZoom<Y.Ra&&Y.za<d.zo.z&&(m[0]=u.center[0],m[1]=u.center[1])):(u=new Y.ca(l.z,this.fa(l.x,l.z),l.y),(u=this.ua.getTile(u,!0))&&(d=new Y.pa(l),f=1<<l.z,(l.x<0||l.x>=f)&&(c=Math.floor(l.x/f),m[0]+=20037508.342789244*c*2),c=u.tag,d.Ro=u.Ro,d.ID(u),d.Sa=m,d.status=u.status,d.tag=c)),d&&(d.stamp=o,d.Sa=m,r.push(d))}var b=i.optimalZoom,g=Y.every(e,function(s){return Y.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=Y.Util.VF(n,b),t=t.tag,n=Y.Util.LD(t,n);return i===s.key&&n})}),k=this.map.getOutseaState(),t=this.map.getOutseaDataType();k&&!t&&(g=!(M=Y.filter(e,function(t){return!(t=n.NE.getTile(t))||!t.boundsStatus||!1!==t.boundsStatus.isInNebulaOversea})).length||Y.every(M,function(s){return Y.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=Y.Util.VF(n,b),t=t.tag,n=Y.Util.LD(t,n);return i===s.key&&n})}));var M=this.jE(r);return g&&(this.a_=!0,this.map.bZ.dynamic.set("firstAllLoaded",!0)),M&&this.map.bZ.dynamic.set("firstLabelDataAllLoaded",!0),h={s_:this.a_,fo:!!g&&M,yZ:M,tiles:r,Ca:h,outseaData:void 0},0!==r.length&&!g||this.Fo(!0),k&&r.length&&(k=this.map.bZ.MZ.wZ.gZ(),h.outseaData=k),h.tiles=this.UE(r,s),h},ut.prototype.pe=function(t){return t=new Y.ca(t[0],t[1],t[2]),this.ua.getTile(t)},ut.prototype.ZE=function(t){return!1},ut.prototype.OE=function(t){for(var i=t.length,n=[],s=[],e=[],r=0;r<i;r++){var h=void 0,o=void 0,a=t[r],u=a.split(","),f=new Y.ca(u[0],u[1],u[2]),c=this.NE.getTile(f);if(c&&c.boundsStatus)h=c.boundsStatus.isInChina,o=c.boundsStatus.isInNebulaOversea;else{if(!(u=Y.wa.ga(parseInt(u[1],10),parseInt(u[2],10),parseInt(u[0],10),"EPSG:3857")))continue;u=[[u[0],u[1]],[u[2],u[1]],[u[2],u[3]],[u[0],u[3]]],h=this.VE(u,"china",a),o=this.VE(u,"oversea",a),(f=new Y.pa(f)).boundsStatus={isInChina:h,isInNebulaOversea:o},this.NE.Jo(f)}h&&n.push(a),o&&s.push(a),h||o||e.push(a)}return{chinaTile:n,overseaTile:s,mapboxTile:e}},ut.prototype.ra=function(t){return("fast"!==this.map.bZ.MZ.drawMode||this.map.bZ.dynamic.get("firstPaint")?{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14,23:14,24:14,25:14,26:14,27:14,28:14,29:14,30:14}:{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:8,11:8,12:8,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14,23:14,24:14,25:14,26:14,27:14,28:14,29:14,30:14})[t]},ut.prototype.YE=function(t){var i=this;return t(null,{GW:"worker",cb:function(t){i.dynamicTextVerticeLoadedByTile(t)}}),!0},ut.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[],this.mapStyle&&this.mapStyle.destroy&&(this.mapStyle.destroy(),delete this.mapStyle),this.R_&&this.R_.destroy&&(this.R_.destroy(),delete this.R_)},ut.prototype.reload=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.reload()}),this.sa=[],this.la=[]},ut.prototype.Aa=function(t){var i;!t.zo||(i=this.ua.getTile(t.zo))&&(i.rO({Ta:!0},t.tag),i.xa({Ta:!0},t.tag),i.JE({Ta:!0},t.tag))},ut.prototype.setTileCacheSize=function(t){t=t||(Y.Support.$e?50:200),this.ua.Xo(t)},ut.prototype.UH=function(t){this.VH=t},ut.prototype.dynamicTextVerticeLoaded=function(t){console.log("errorr")},ut.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,n=t.data;i<n.length;i++){var s=n[i];this.dynamicTextVerticeLoaded({data:s.data,tag:s.tag,XE:s.XE})}},ut.prototype.Ia=function(){this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},ut.prototype.zD=function(t,i,n,s,e,r,h){void 0===r&&(r="road,building,region");var o=this.cP(),a={};o&&(a=o.getState().vS),a=Y.Ln(Y.Ln({},a),{buildingColor:Y.Ln({},s.getBuildingColor())}),r={zoom:i.zoom,optimalZoom:i.optimalZoom,projectionId:i.projectionId,mS:a,viewMode:i.viewMode,showBuildingBlock:this.map.yS(),ZL:i.zoom,hH:r,offlineServer:this.u0},this.QH._B(t,r,h)},ut.prototype.cP=function(){for(var t,i=this.map.getLayers(),n=0;n<i.length;n++)if("AMap.Buildings"===(s=i[n]).CLASS_NAME&&!s.getState().u$){t=s;break}if(!t)for(var s,n=0;n<i.length;n++)if("AMap.Buildings"===(s=i[n]).CLASS_NAME){t=s;break}return t},ut.prototype.ma=function(t,i){var n=new RegExp(/\{(\w|\,)+\}/g);if(n.test(this.Be)){var s=this.Be.match(n)[0].replace(/[\{|\}]/g,"").split(",");return this.Be.replace(n,s[(t+i)%4])}return this.Be},ut.prototype.AD=function(){if(this.map.offlineServer&&Array.isArray(this.map.offlineServer)){var t=this.map.offlineServer.length,i=this.map.offlineServer[this.$D%t];return this.$D=(this.$D+1)%t,i+"mapdata/"}var n=new RegExp(/\{(\w|\,)+\}/g),s=this.Be.match(n)[0].replace(/[\{|\}]/g,"").split(","),t=s.length,i=this.Be.replace(n,s[this.$D%t]);return this.$D=(this.$D+1)%t,i},ut.prototype.ha=function(t,i,n){void 0===n&&(n=!1);var s=[t[0],t[3]],e=[t[2],t[1]],t=this.Ga(s,i),s=this.Ga(e,i),e=t[0],r=t[1],h=s[0],o=s[1];if(n)return{ja:e,Fa:r,Oa:h,Ea:o,z:i};this.Pa={ja:e,Fa:r,Oa:h,Ea:o,z:i};for(var a=[],u=e;u<=h;u+=1)for(var f=r;f<=o;f+=1)a.push(new Y.ca(i,u,f));return this.Da(a),a},ut.prototype.da=function(t,i,n,s){var e=[3,6,8,10,12,14],r=this.ra(t.optimalZoom);if(this.Za)for(var h=Math.min(14,r+3),o=r+1;n.length&&o<=h;o+=1)if(-1!==e.indexOf(o)){for(var a=o-r,u=[],f=[],c=n.length-1;0<=c;--c)for(var l=n[c].x<<a,d=n[c].y<<a,v=1<<a;0<=v;--v)for(var p=1<<a;0<=p;--p){var m=new Y.ca(o,this.fa(l+v,o),d+p),y=new Y.ca(o,l+v,d+p);((k=this.ua.getTile(m,!0))&&k.status===Y.TileState.LOADED?f:u).push(y)}f.length&&i.push.apply(i,f),n=u}if(this.qa)for(var b=this.xt[0],o=r-1;n.length&&b<=o;--o)if(-1!==e.indexOf(o)){for(var f=[],u=[],g={},c=n.length-1;0<=c;--c){var k,M=n[c],a=o,w=M.z-a,v=M.x>>w,p=M.y>>w;g[M=(m=new Y.ca(a,v,p)).key]||(w=new Y.ca(a,this.fa(v,a),p),y=new Y.ca(a,v,p),k=this.ua.getTile(w,!0),g[M]=!0,(k&&k.status===Y.TileState.LOADED?f:u).push(y))}f.length&&i.push.apply(i,f),n=u}return i},ut.prototype.Da=function(t){var e,r,h;t.length&&(e=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<e-t.z)-r,s=(t.y<<e-t.z)-h;return n*n+s*s<=(t=(i.x<<e-i.z)-r)*t+(i=(i.y<<e-i.z)-h)*i?-1:1}))},ut.prototype.Ga=function(t,i){var n=Math.pow(2,i),i=180/n;return[Math.floor(t[0]/(360/n))+n/2,n/2-Math.ceil(t[1]/i)]},ut.prototype.fa=function(t,i){for(var n=1<<(i=i||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},ut.prototype.sD=function(){var e,r,h=this;this.map.bZ.dynamic.get("_preloadNebulaIcons")||(this.map.bZ.dynamic.set("_preloadNebulaIcons",!0),e=this.hD,(r=this.z_).loadImages(e,{type:"icon",imageBitmap:Y.Support.imageBitmap,cb:function(){for(var t=[],i=0;i<e.length;i++){var n=e[i],s=r.getImage(n);t.push({img:s.img,name:n,hv:i,width:s.width,height:s.height})}h.map.so.sv(t)}}))},ut.prototype.PE=function(t,i){for(var n=0,s=t;n<s.length;n++){var e=s[n].split(",").slice(0,3).join(",");(e=this.ua.xf(e))&&(e.region=i)}},ut.prototype.UE=function(t,i){void 0===t&&(t=[]);var n=[];if(10<=i){for(var s=0,e=t;s<e.length;s++){var r=e[s];"china"!==r.region&&"oversea"!==r.region||n.push(r)}return n}return t},ut.prototype.jE=function(t){for(var i=!!t.length,n=0,s=t;n<s.length;n++){var e=s[n].data;if(i)for(var r=0,h=e;r<h.length;r++){var o=h[r];if(!(i=i&&!!o.Ta))break}}return i},ut);function ut(t,i,n,s){var a=ht.call(this,t,i,n,s)||this;return a.xt=Y.zoomRange,a.sa=[],a.la=[],a.qa=!0,a.Za=!0,a.a_=!1,a.$D=0,a.hD=[AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],a.VH="",a.u0=!1,a.wH=function(t){a.map.yH&&(parseInt(t.key.split(",")[0],10)<10||a.map.yH.kH(t.key))},a.Xa=t.tileSize,a.Be=t.tileUrl,a.tG=null,t=Y.Support.$e?30:200,a.ua=new $(t),a.NE=new nt(t),window.xZ=a.ua,a.u0=n.offlineServer||!1,n.assetsServer&&(a.hD=n.c0(n.assetsServer)),n.gn.Ha({scale:ot,showLabel:n.showLabel,DD:-1!==location.search.indexOf("forceAll")}),a.R_=n.R_,a.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),a.mapStyle=n.mapStyle,a.mapStyle.pn(function(t){n&&n.gn&&n.gn.Ka({value:t,TY:"fast"===a.map.bZ.MZ.drawMode})}),a.Ia(),a.sD(),a.ua.on("delete",a.wH),a.QH=new et(function(t,h,i,o){var n=a.AD(),s=a.map.bZ.dynamic.get("firstLabelDataAllLoaded")||!1;return!o||"outsea"!==o&&"a00"!==o||(n=n.replace("/nebula/","/oversea/")),!s&&Y.Support.wasm&&(n=n.replace("/v3","/v2")),new Y.vH(a.map.gn.va({url:n,zoom:i.zoom,optimalZoom:i.optimalZoom,projectionId:i.projectionId,mS:i.mS,viewMode:i.viewMode,showBuildingBlock:i.showBuildingBlock,ya:t,ZL:i.zoom,hH:i.hH,kZ:s,offlineServer:i.offlineServer},function(t){a.QH.CB(h);for(var i=0,n=t;i<n.length;i++){var s,e=n[i],r=e&&a.ua.getTile(e.zo);r&&(delete r.request,o&&"outsea"===o?e.ba&&r.JE(e.ba,e.tag):e.ba&&r.xa(e.ba,e.tag),e.ba&&a.map.Mv.t0(r.zo),r.status=Y.TileState.LOADED,s=Y.wa.ga(r.zo.x,r.zo.y,r.zo.z,"EPSG:3857"),e=Y.lcs.getLocalByCoord([s[0],s[1]]),r.localCoord=e,r.Ro=s,a.map.mm&&r.LY(a.map.mm.context))}a.map.setNeedUpdate(!0)}))},function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];(s=a.ua.xf(s.slice(0,-2)))&&s.status!==Y.TileState.LOADED&&a.ua.ea(s)}},"fast"===n.bZ.MZ.drawMode?1:5),"fast"===n.bZ.MZ.drawMode&&a.map.bZ.dynamic.subscribe("firstPaint",function(){a.QH.Uo(5)},a,!0),n.offlineServer&&a.QH.Uo(1),a}function ft(){}var ct=(ft.prototype.Qa=function(t){for(var i=this.createEmpty(),n=0,s=t.length;n<s;n+=1)this.extendCoordinate(i,t[n]);return i},ft.prototype.ns=function(t,i,n){var s=Math.min.apply(null,t),e=Math.max.apply(null,t),t=Math.min.apply(null,i),i=Math.max.apply(null,i);return this.os(s,e,t,i,n)},ft.prototype.buffer=function(t,i){t[0]-=i,t[1]-=i,t[2]+=i,t[3]+=i},ft.prototype.clone=function(t){return t.slice()},ft.prototype.ss=function(t,i){return t[0]<=i[0]&&i[0]<=t[2]&&t[1]<=i[1]&&i[1]<=t[3]},ft.prototype.rs=function(t,i){return t[0]<=i[0]&&i[2]<=t[2]&&t[1]<=i[1]&&i[3]<=t[3]},ft.prototype.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},ft.prototype.os=function(t,i,n,s,e){return void 0!==e?(e[0]=t,e[2]=i,e[1]=n,e[3]=s,e):[t,n,i,s]},ft.prototype.empty=function(t){return t[0]=t[1]=1/0,t[2]=t[3]=-1/0,t},ft.prototype.equals=function(t,i){return t[0]===i[0]&&t[2]===i[2]&&t[1]===i[1]&&t[3]===i[3]},ft.prototype.extend=function(t,i){i[0]<t[0]&&(t[0]=i[0]),i[2]>t[2]&&(t[2]=i[2]),i[1]<t[1]&&(t[1]=i[1]),i[3]>t[3]&&(t[3]=i[3])},ft.prototype.extendCoordinate=function(t,i){+i[0]<t[0]&&(t[0]=i[0]),+i[0]>t[2]&&(t[2]=i[0]),+i[1]<t[1]&&(t[1]=i[1]),+i[1]>t[3]&&(t[3]=i[1])},ft.prototype.hs=function(t){return[t[0],t[1]]},ft.prototype.ls=function(t){return[t[2],t[1]]},ft.prototype.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},ft.prototype.us=function(t,i,n,s,e){for(var r,h,o=i*s[0]/2,s=i*s[1]/2,a=Math.cos(n),u=Math.sin(n),f=[-o,-o,o,o],c=[-s,s,-s,s],l=0;l<4;l+=1)r=f[l],h=c[l],f[l]=t[0]+r*a-h*u,c[l]=t[1]+r*u+h*a;return this.ns(f,c,e)},ft.prototype.getHeight=function(t){return t[3]-t[1]},ft.prototype.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},ft.prototype.cs=function(t){return[t[0],t[3]]},ft.prototype.fs=function(t){return[t[2],t[3]]},ft.prototype.getWidth=function(t){return t[2]-t[0]},ft.prototype.intersects=function(t,i){return t[0]<=i[2]&&t[2]>=i[0]&&t[1]<=i[3]&&t[3]>=i[1]},ft.prototype.isEmpty=function(t){return t[2]<t[0]||t[3]<t[1]},ft.prototype.normalize=function(t,i){return[(i[0]-t[0])/(t[2]-t[0]),(i[1]-t[1])/(t[3]-t[1])]},ft.prototype.ps=function(t,i){var n=(t[2]-t[0])/2*(i-1),i=(t[3]-t[1])/2*(i-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i},ft.prototype.touches=function(t,i){return this.intersects(t,i)&&(t[0]===i[2]||t[2]===i[0]||t[1]===i[3]||t[3]===i[1])},ft.prototype.transform=function(t,i,n){return i(t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],t,2),this.ns([t[0],t[2],t[4],t[6]],[t[1],t[3],t[5],t[7]],n)},new ft),lt=(dt.from=function(t){for(var i=1/0,n=1/0,s=-1/0,e=-1/0,r=0,h=t;r<h.length;r++)var o=h[r],i=Math.min(i,o.southWest.KL),n=Math.min(n,o.southWest.kT),s=Math.max(s,o.northEast.KL),e=Math.max(e,o.northEast.kT);return new dt(new Y.LngLat(i,n),new Y.LngLat(s,e))},dt.xS=function(t){if(t)return t=Y.jsonLngLatData(t),new dt(ct.Qa(t))},dt.bS=function(t){if(t&&t.length){for(var i,n=0,s=Y.jsonLngLatData(t);n<s.length;n++){var e,r=s[n];i?(e=dt.ds(r))&&i.union(e):i=dt.xS(r)}return i}},dt.ds=function(t){if(t)return t=Y.jsonLngLatData(t),Y.ys(t)?dt.xS(t):dt.xS(t[0])},dt.ms=function(t){if(t&&t.length){for(var i,n=0,s=Y.jsonLngLatData(t);n<s.length;n++){var e,r=s[n];i?(e=dt.ds(r))&&i.union(e):i=dt.ds(r)}return i}},dt.prototype.getSouthWest=function(){return this.southWest},dt.prototype.getNorthEast=function(){return this.northEast},dt.prototype.getNorthWest=function(){return new Y.LngLat(this.southWest.KL,this.northEast.kT,!0)},dt.prototype.getSouthEast=function(){return new Y.LngLat(this.northEast.KL,this.southWest.kT,!0)},dt.prototype.contains=function(t){var i=this.southWest,n=this.northEast;if(Y.xs(t))return!1;t=Y.parseLngLatData(t);var s=i.KL,e=n.KL;return e<s&&(e+=360),t.KL>=s&&t.kT>=i.kT&&t.KL<=e&&t.kT<=n.kT},dt.prototype.intersects=function(t){var i=this.southWest,n=this.northEast,s=t.southWest,e=t.northEast,t=e.kT>=i.kT&&s.kT<=n.kT,n=e.KL>=i.KL&&s.KL<=n.KL;return t&&n},dt.prototype.getCenter=function(){var t=this.southWest.KL>this.northEast.KL?(this.southWest.KL+this.northEast.KL+360)/2%360:(this.southWest.KL+this.northEast.KL)/2,i=(this.southWest.kT+this.northEast.kT)/2;return new Y.LngLat(t,i)},dt.prototype.extend=function(t){return this.southWest.setLng(Math.min(this.southWest.KL,t.KL)),this.southWest.setLat(Math.min(this.southWest.kT,t.kT)),this.northEast.setLng(Math.max(this.northEast.KL,t.KL)),this.northEast.setLat(Math.max(this.northEast.kT,t.kT)),this},dt.prototype.union=function(t){return this.extend(t.southWest).extend(t.northEast)},dt.prototype.toString=function(){return this.southWest.toString()+";"+this.northEast.toString()},dt.prototype.toJSON=function(){return[this.southWest.lng,this.southWest.lat,this.northEast.lng,this.northEast.lat]},dt.prototype.getWidth=function(){return Math.abs(this.northEast.lng-this.southWest.lng)},dt.prototype.getHeight=function(){return Math.abs(this.southWest.lat-this.northEast.lat)},dt.prototype.clone=function(){return dt.from([this])},dt);function dt(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.className="AMap.Bounds";var n,s,e,r,h,o="undefined"!=typeof Float64Array;if(1===arguments.length&&(arguments[0]instanceof Array||o&&arguments[0]instanceof Float64Array))r=new Y.LngLat(arguments[0][0],arguments[0][1],!0),h=new Y.LngLat(arguments[0][2],arguments[0][3],!0);else if(2===arguments.length)r=Y.parseLngLatData(arguments[0]),h=Y.parseLngLatData(arguments[1]);else if(4===arguments.length)r=new Y.LngLat(arguments[0],arguments[1]),h=new Y.LngLat(arguments[2],arguments[3]);else{if(0!==arguments.length)throw Error("Invalid Object: Bounds("+arguments+")");r=new Y.LngLat(-180,-90),h=new Y.LngLat(180,90)}(r.KL>h.KL||r.kT>h.kT)&&(n=Math.max(r.KL,h.KL),s=Math.min(r.KL,h.KL),e=Math.max(r.kT,h.kT),o=Math.min(r.kT,h.kT),r=new Y.LngLat(s,o),h=new Y.LngLat(n,e)),this.southWest=r,this.northEast=h}var vt,pt=(vt=O,Y.Ei(mt,vt),mt.prototype.loadData=function(t,i,n){return this.ze=i,!(this.Oo&&!this.io)&&(!(!this.map.isDOMMode()&&!i)&&(i=this.O0(t,i,n),this.io?i(this.io,"canvas"):((n=new Image).crossOrigin="",n.onload=i,n.src=this.gs.getImageUrl(),this.Rs=n),!0))},mt.prototype.O0=function(t,s,e){var r=this;return function(t,i){var n;void 0===i&&(i="image"),s&&(n=void 0,"image"===i?n=t.target:"canvas"===i&&(n=t),r._s?r._s.update(n):(r._s=s.createTexture(n,{Zi:!0}),r._s.bind(s.gl.CLAMP_TO_EDGE,s.gl.LINEAR,s.gl.LINEAR)),r.Fo(!0)),e()}},mt.prototype.getData=function(t){if(this.Oo&&this._s){(i=this.gs.getBounds())instanceof lt&&(i=i.toJSON());var n=Y.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),e=(s=Y.ProjectionManager.getProjection(t.projectionId)).project(i[0],i[1]),s=s.project(i[2],i[3]),r=[0,0,0,0];if(t.optimalZoom>=Y.Ra){for(var i=Y.lcs.getLocalByCoord([e[0],e[1]]),t=Y.lcs.getLocalByCoord([s[0],s[1]]),h=Y.lcs.getSize(),r=[i.x-n.x,i.y-n.y,t.x-n.x,t.y-n.y],o=0;o<r.length;o++)0!==r[o]&&(r[o]*=h[0]);r=[r[0]-i.center[0],r[1]-i.center[1],r[2]-t.center[0],r[3]-t.center[1]]}return this.ze&&(this.ks=this.ze.fe(new Float32Array([e[0]+r[0],e[1]+r[1],0,1,s[0]+r[2],e[1]+r[1],1,1,e[0]+r[0],s[1]+r[3],0,0,s[0]+r[2],e[1]+r[1],1,1,s[0]+r[2],s[1]+r[3],1,0,e[0]+r[0],s[1]+r[3],0,0]),16)),{Ro:this.ws,image:this.Rs,texture:this._s,zs:this.ks,Sa:[0,0]}}},mt.prototype.destroy=function(){this.Rs&&delete this.Rs,this._s&&this._s.destroy&&(this._s.destroy(),delete this._s),this.ks&&delete this.ks,this.gs},mt);function mt(t,i,n,s){return(n=vt.call(this,t,i,n,s)||this).gs=s,n.io=s.canvas,n}var yt,bt=(yt=O,Y.Ei(gt,yt),gt.prototype.add=function(t,i,n){void 0===t&&(t={}),void 0===i&&(i={}),Object.keys(t).length&&(this.Ls=t,this.HB=!0,this.OB=i,n&&n())},gt.prototype.remove=function(t,i,n){void 0===i&&(i={}),this.Ls=t=void 0===t?{}:t,this.HB=!0,this.OB=i,n&&n()},gt.prototype.update=function(t,i){void 0===t&&(t={}),this.HB=!0,this.OB=t,i&&i()},gt.prototype.clear=function(){this.Ls={},this.Ts=[],this.gS=null},gt.prototype.getData=function(){return{other:this.gS}},gt.prototype.Ds=function(t){return this.Ls[t]||null},gt.prototype.zL=function(t){return this.CL&&this.CL.zL(t)},gt.prototype.destroy=function(){this.R_&&this.R_.destroy&&(this.R_.destroy(),delete this.R_),this.z_&&this.z_.destory&&(this.z_.destory(),delete this.z_)},gt.prototype.loadData=function(t,i,n){var s=this;return 0===Object.keys(this.Ls).length&&this.Fo(!0),this.HB&&(this.HB=!1,this.As(this.OB,function(){s.Fo(!0),s._map.bZ.dynamic.set("firstLabelLayerDataAllLoaded",!0),n()})),!0},gt.prototype.As=function(i,n){var s=this;void 0===i&&(i={});var t,e,r=this.R_,h=this.z_,o=this.Ls;for(t in this.Ts=[],o)o.hasOwnProperty(t)&&(e=o[t],e=this.Ps(e),this.Ts.push(e));if(!this.Ts.length)return this.clear(),void n();var a=this.Ts[0].data.position;this.Os(a),h.loadImages(Object.keys(this.Fs),{cb:function(){var t;r&&"SDFManagerBase"!==r.CLASS_NAME?(t=Object.keys(s.Es),r.getData(t,function(t){s.qL(i,n)})):s.qL(i,n)}})},gt.prototype.qL=function(t,i){void 0===t&&(t={});var n=this.R_,s=this.z_,e=this.CL=new Y.eG({R_:n,z_:s}),n=this.Us,s={from:"labelsLayer",zoom:this._map.getView().getOptions().zoom,center:n.center};Y.assign(s,t),s=e.Ns(this.Ts,s),this._map&&this._map.isDOMMode()?this.gS=s:this.gS=new Y.La(null,s),this.gS.zo=n,i&&i(s)},gt.prototype.Ps=function(t){if(!t||"AMap.LabelMarker"===t.type){var i=this._map.getProjection();this.AL={};var n=t.getOptions(),s=t._position;if(!s)return null;var e=[Y.tc.Mp,Y.tc.Rp],h=void 0===(r=n.zooms)?e:r,o=n.opacity,a=n.rank,u=n.icon,f=n.text,c=n.zIndex,d=void 0===(l=n.visible)||l,v=Y.Bs(s)?s.toJSON():s,p=f&&f.content||"",r=f&&f.style;u&&u.image&&(this.Fs[u.image]=1),f&&f.content&&this.Ws(f.content);var m,y,n=u&&u.image?[{type:"image",image:u.image||"",size:u.size,clipOrigin:u.clipOrigin,clipSize:u.clipSize,offset:u.offset,anchor:u.anchor,retina:u.retina}]:{},l=0,u=0;return r&&(l=!r.strokeWidth&&r.strokeColor?1:r.strokeWidth||0,m=!r.strokeColor&&r.strokeWidth?"#fcfcfc":r.strokeColor,u=!r.borderWidth&&r.borderColor?1:r.borderWidth||0,y=!r.borderColor&&r.strokeWidth?"#ccc":r.borderColor),r=r?{fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fillColor:r.fillColor,strokeColor:m,strokeWidth:l,borderColor:y,borderWidth:u,padding:this.Gs(r.padding||[3]),backgroundColor:r.backgroundColor,fold:r.fold}:{},e=Y.labelsUtil.Jj(h,f&&f.zooms||e),r=f&&p?{txt:f.content||"",direction:f.direction,offset:f.offset,zooms:e,style:r}:{},v=i.project(v[0],v[1]),{data:{id:t.hS,name:p,txt:p,position:[v[0],v[1],s[2]||0],positionType:"lnglat",extData:{id:t.hS},rank:a,zooms:h},opts:{visible:d,opacity:o,zooms:h,zIndex:c,icon:n,text:r,height:s[2]||0}}}},gt.prototype.Ws=function(t){void 0===t&&(t="");for(var i=0;i<t.length;i++)this.Es[t.substr(i,1)]=1},gt.prototype.Os=function(t){Y.Bs(t)?this.Us=Y.lcs.getLocalByCoord([t.KL,t.kT]):this.Us=Y.lcs.getLocalByCoord(t)},gt.prototype.Gs=function(t){if("string"==typeof t&&(t=(t=t.trim()).split(" ")),"[object Array]"!==Object.prototype.toString.apply(t))return[3,3,3,3];for(var i=t.length,n=0;n<i;n++){var s="string"==typeof(s=t[n])?parseInt(s,10):s;isNaN(s)?t[n]=3:t[n]=s}switch(i){case 0:t=[3,3,3,3];break;case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return t},gt);function gt(t,i,n,s){return(t=yt.call(this,t,i,n,s)||this).Fs={},t.Es={},t.Ts=[],t.HB=!1,t.Ls={},t.AL={},i=n.R_,s=n.z_,t.R_=i,t.z_=s,t._map=n,t}var kt,Mt=(kt=O,Y.Ei(wt,kt),wt.prototype.setTileUrl=function(t){this.Be=t=void 0===t?"":t},wt.prototype.loadData=function(t,i,n,s){var h=this;if(!i&&"d"!==s.baseRender)return!1;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var e=t.projectionId,r=[],o=t.boundsCoord,a=t.optimalZoom,u=t.optimalResolution,f=this.ha(o,a,u);return this.ua.forEach(function(t){var i=t.zo,n=!1;if(t.status!==Y.TileState.LOADED){for(var s=f.ja;s<=f.Oa;s+=1)for(var e=f.Fa;e<=f.Ea;e+=1){var r=h.fa(s,f.z);i.z===f.z&&i.y===e&&r===i.x&&(n=!0)}n||(t.data.src="",h.ua.ea(t))}}),u=this.qs(t,this.Zs,r),this.Ys(u,i,e,n),this.da(t,this.sa,r,s),this.sa=this.sa.concat(this.Zs),0===u.length},wt.prototype.getData=function(){var t=this.aa,i=[],n=this.map.qF();if(this.ua.QF(n),0<this.sa.length)for(var s=0;s<this.sa.length;s++){for(var e=this.sa[s],r=[],h=0;h<e.length;h++){var o,a,u,f,c,l,d,v,p=[0,0],m=t.centerCoord,y=this.ua.getTile(e[h]),b=Y.lcs.getLocalByCoord([m[0],m[1]]);y||(o=this.ua.getTile(new Y.ca(e[h].z,this.fa(e[h].x,e[h].z),e[h].y)),y=new Y.Vs(e[h]),o&&o.data.texture&&(u=this.aa.projectionId,a=Y.ProjectionManager.getProjection(u).getResolution(y.zo.z),c=(f=y.zo.x*this.Xa*a)+this.Xa*a,l=(m=y.zo.y*this.Xa*a)+this.Xa*a,a=Y.V[u].Xs(f,m),u=Y.V[u].Xs(c,l),f=a[0],c=u[0],m=u[1],l=a[1],y.Ro=[f,m,c,l],l=Y.lcs.getLocalByCoord([y.Ro[0],y.Ro[1]]),this.aa.optimalZoom>=Y.Ra&&(y.Ro[0]-=l.center[0],y.Ro[1]-=l.center[1],y.Ro[2]-=l.center[0],y.Ro[3]-=l.center[1]),this.ze?y.data={Hs:l,texture:o.data.texture,Js:o.data.Js,zs:this.ze.fe(new Float32Array([y.Ro[0],y.Ro[1],0,1,y.Ro[2],y.Ro[1],1,1,y.Ro[0],y.Ro[3],0,0,y.Ro[2],y.Ro[1],1,1,y.Ro[2],y.Ro[3],1,0,y.Ro[0],y.Ro[3],0,0]),16)}:(y.data=o.data,y.data.Hs=l),y.data&&(y.status=Y.TileState.LOADED))),y.data&&(t.optimalZoom>=Y.Ra&&y.data.Hs?(l=Y.lcs.getSize(),d=y.data.Hs.x-b.x,v=y.data.Hs.y-b.y,0!=d&&(d*=l[0],p[0]=d),0!=v&&(v*=l[1],p[1]=v),t.optimalZoom>=Y.Ra&&Y.za>=y.zo.z&&(p[0]=-b.center[0],p[1]=-b.center[1])):t.optimalZoom<Y.Ra&&Y.za<y.zo.z&&(p[0]=b.center[0],p[1]=b.center[1]),y.data.Sa=p,y.stamp=n,r.push(y))}i.push(r)}return{tiles:i}},wt.prototype.setTileCacheSize=function(t){t=t||(Y.Support.$e?50:200),this.ua.Xo(t)},wt.prototype.reload=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&t.request.cancel&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.pS=!1,this.Fo(!1)},wt.prototype.getTileCache=function(){return this.ua},wt.prototype.Da=function(t,i){var e,r,h;t.length&&(e=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<e-t.z)-r,s=(t.y<<e-t.z)-h;return n*n+s*s<=(t=(i.x<<e-i.z)-r)*t+(i=(i.y<<e-i.z)-h)*i?-1:1}))},wt.prototype.ha=function(t,i,n){var s=this.aa.projectionId,e=Y.ProjectionManager.getProjection(s);this.TB()&&(n=e.getResolution(++i)),i<this.Qs[0]?(i=this.Qs[0],n=e.getResolution(i)):i>this.Qs[1]&&(i=this.Qs[1],n=e.getResolution(i));var r=this.Xa,o=t[0]+20037508.342789244,s=-(t[3]-20037508.342789244),e=t[2]+20037508.342789244,o=o/n,s=s/n,h=-(t[1]-20037508.342789244)/n;return{Oa:Math.floor(e/n/r),Ea:Math.min((1<<i)-1,Math.floor(h/r)),ja:Math.floor(o/r),Fa:Math.max(Math.floor(s/r),0),z:i}},wt.prototype.qs=function(t,i,n){var s=t.optimalZoom,e=t.optimalResolution,r=t.boundsCoord,h=Y.ProjectionManager.getProjection(t.projectionId),r=this.ha(r,s,e);this.TB()&&s++,s<this.Qs[0]?s=this.Qs[0]:s>this.Qs[1]&&(s=this.Qs[1]),h.getResolution(s);for(var o=[],a=[],u=!0,f=r,c=f.ja;c<=f.Oa;c+=1)for(var l=f.Fa;l<=f.Ea;l+=1){var d=new Y.ca(s,this.fa(c,s),l),v=this.ua.getTile(d);this.PF(d,t.projectionId);var p=new Y.ca(s,c,l);v?v.status===Y.TileState.LOADED||v.status===Y.TileState.ERROR?a.push(p):(u=!1,n.push(p)):(u=!1,o.push(d),n.push(p))}return a.length&&i.push(a),this.Pa=r,this.Fo(u),o},wt.prototype.da=function(t,i,n,s){if(t=t.optimalZoom,this.Za="overlay"!==this.layer.type,this.qa="overlay"!==this.layer.type,this.Za)for(var e=Math.min(this.xt[1],t+2),r=t+1;n.length&&r<=e;r+=1){for(var h=[],o=[],a=r,u=n.length-1;0<=u;--u)for(var f=n[u],c=f.x<<1,l=f.y<<1,d=1;0<=d;--d)for(var v=1;0<=v;--v){var p=new Y.ca(a,this.fa(c+d,a),l+v),m=this.ua.getTile(p),y=new Y.ca(a,c+d,l+v);(m&&m.status===Y.TileState.LOADED?o:h).push(y)}o.length&&i.push(o),n=h}if(this.qa)for(var b=this.xt[0],r=t-1;n.length&&b<=r;--r){for(var o=[],h=[],g={},u=n.length-1;0<=u;--u){var k=n[u],a=r,M=k.z-a,d=k.x>>M,v=k.y>>M;g[M=(p=new Y.ca(a,this.fa(d,a),v)).key]||(m=this.ua.getTile(p),g[M]=!0,(m&&m.status===Y.TileState.LOADED?o:h).push(new Y.ca(a,d,v)))}o.length&&i.push(o),n=h}return i},wt.prototype.ma=function(){var t=new RegExp(/\{(\w|\,)+\}/g);if(t.test(this.Be)){var i=this.Be.match(t)[0].replace(/[\{|\}]/g,"").split(",");return this.tr++,i&&this.tr>=i.length&&(this.tr=0),this.Be.replace(t,i[this.tr])}return this.Be},wt.prototype.Ys=function(l,d,v,p){var m;if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(l);for(var y=this,i=0,n=l.length;i<n;i+=1)!function(t){var n=y.layer.getLayerConfig(),s=l[t],e=y.ma().replace("[z]",s.z+"").replace("[x]",s.x+"").replace("[y]",s.y+""),h=new Y.Vs(s);y.ua.Qo(h),n.getTileUrl&&(e=n.getTileUrl(s.x,s.y,s.z));var r=Y.ProjectionManager.getProjection(v).getResolution(s.z),o=s.x*y.Xa*r,a=o+y.Xa*r,u=s.y*y.Xa*r,f=u+y.Xa*r,t=Y.V[v].Xs(o,u),r=Y.V[v].Xs(a,f);function c(t){var i,n,s,e,r;d&&((i=d.createTexture(t.target||t,{Zi:!0})).bind(d.gl.CLAMP_TO_EDGE,d.gl.LINEAR,d.gl.LINEAR),n=Y.lcs.getLocalByCoord([h.Ro[0],h.Ro[1]]),h.zo.z>Y.za&&(h.Ro[0]-=n.center[0],h.Ro[1]-=n.center[1],h.Ro[2]-=n.center[0],h.Ro[3]-=n.center[1]),s=d.fe(new Float32Array([h.Ro[0],h.Ro[1],0,1,h.Ro[2],h.Ro[1],1,1,h.Ro[0],h.Ro[3],0,0,h.Ro[2],h.Ro[1],1,1,h.Ro[2],h.Ro[3],1,0,h.Ro[0],h.Ro[3],0,0]),16),(e=(r=document.createElement("canvas")).getContext("2d"))&&(t=this.Xa,r.height=r.width=t,r.style.height=r.style.width=t+"px",e.beginPath(),e.moveTo(0,0),e.lineTo(t,0),e.lineTo(t,t),e.lineTo(0,t),e.lineTo(0,0),e.lineWidth=1,e.font="20px Verdana",e.fillStyle="#ff0000",e.strokeStyle="#FF0000",e.strokeRect(0,0,t,t),e.fillText("z: "+h.zo.z,10,30),e.fillText("x: "+h.zo.x,10,60),e.fillText("y: "+h.zo.y,10,90),e.stroke()),(r=d.createTexture(r,{Zi:!0})).bind(d.gl.MIRRORED_REPEAT,d.gl.LINEAR,d.gl.LINEAR_MIPMAP_NEAREST),h.data={texture:i,zs:s,Js:r,Hs:n}),h.status=Y.TileState.LOADED,p()}o=t[0],a=r[0],u=r[1],f=t[1],h.Ro=[o,u,a,f],h.status=Y.TileState.LOADING,"AMap.TileLayer.Flexible"===y.layer.CLASS_NAME||"AMap.TileLayer.WMTS"===y.layer.CLASS_NAME||"AMap.TileLayer.WMS"===y.layer.CLASS_NAME?n.createTile(s.x,s.y,s.z,function(t){d?c.call(this,t):(h.data=t,h.status=Y.TileState.LOADED)}.bind(y),function(){h.status=Y.TileState.ERROR,p()}):(s=new Image,"w"===(null===(m=y.map)||void 0===m?void 0:m.baseRender)&&(s.crossOrigin="anonymous"),s.onload=c.bind(y),"d"===(null===(m=y.map)||void 0===m?void 0:m.baseRender)&&0<e.indexOf("traffictile")&&(e+="&hash="+Math.random()),s.src=e,(h.data=s).addEventListener("dragstart",function(t){return t.preventDefault(),!1}))}(i)}},wt.prototype.fa=function(t,i){i=i||this.aa.optimalZoom;var n=this.Xa/256;n<1?n=1/n:n--;for(var s=1<<(i+=n);t<0||s<=t;)t=s<=t?t-s:t<0?s+t:t;return t},wt.prototype.PF=function(t,i){var r,n=Y.ProjectionManager.getProjection(i).getResolution(t.z),s=(e=t.x*this.Xa*n)+this.Xa*n,t=(r=t.y*this.Xa*n)+this.Xa*n,n=Y.V[i].Xs(e,r),i=Y.V[i].Xs(s,t),e=n[0],s=i[0],t=(i[1],n[1]);return!(s<(n=this.map.getView().getStatus().boundsCoord)[0]&&t<n[1]||e>n[2]&&s>n[3])},wt.prototype.TB=function(){var t=!1;return this.layer.getState().detectRetina&&(t=!0),!("d"!==Y.Support.baseRender||!Y.Support.Ue||!Y.Support.$e)||t},wt);function wt(t,i,n,s){return(s=kt.call(this,t,i,n,s)||this).ua=new q(Y.Support.$e?200:400),s.Xa=256,s.sa=[],s.Zs=[],s.tr=-1,s.qa=!0,s.Za=!0,s.xt=t.zooms,s.Qs=t.dataZooms,s.Xa=t.tileSize,s.Be=t.tileUrl,s}var xt,zr=(xt=O,Y.Ei(zt,xt),zt.prototype.loadData=function(t,i,n){return this.ze=i,this.Oo||(this.Fo(!0),n()),!0},zt.prototype.getData=function(t){if(this.ir=t.bounds,this.Oo){var i=Y.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),s=(n=Y.ProjectionManager.getProjection(t.projectionId)).project(this.ir[0],this.ir[1]),n=n.project(this.ir[2],this.ir[3]),e=[0,0,0,0];if(t.optimalZoom>=Y.Ra){for(var s=Y.lcs.getLocalByCoord([s[0],s[1]]),n=Y.lcs.getLocalByCoord([n[0],n[1]]),r=Y.lcs.getSize(),e=[s.x-i.x,s.y-i.y,n.x-i.x,n.y-i.y],h=0;h<e.length;h++)0!==e[h]&&(e[h]*=r[0]);e=[e[0]-s.center[0],e[1]-s.center[1],e[2]-n.center[0],e[3]-n.center[1]]}return{texture:this._s,zs:this.ks,Sa:[0,0]}}},zt);function zt(t,i,n,s){return(i=xt.call(this,t,i,n,s)||this).ir=n.getView().getStatus().bounds,i.io=s.canvas,i}var Ct,St=(Ct=O,Y.Ei(Lt,Ct),Lt.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},Lt.prototype.getAllOverlays=function(){return this._overlays},Lt.prototype.add=function(t){this.hasOverlay(t)||Y.er(t)&&(this._overlays.push(t),t.Zx(this.map),t.init(),t._bindEvents&&t._bindEvents(),(Y.GB(t)||Y.VB(t))&&this.YB.push(t),t._afterSetMap&&t._afterSetMap(this.map),this.map.setNeedUpdate(!0))},Lt.prototype.remove=function(t){this.hasOverlay(t)&&Y.er(t)&&(t._beforeRemoveMap&&t._beforeRemoveMap(),this.ar(t),this.map.setNeedUpdate(!0),t.Zx(null))},Lt.prototype.getData=function(t,i){this.nr();var n=0,s=0,e=this._overlays.length,r=[],h=new lt(t.bounds);if(this.map.isDOMMode())return{sr:this._overlays};for(;n<8&&s<e;){var o,a=this._overlays[s];s++,a&&(o=Date.now(),a._needUpdate&&(a.ZB(i),this.map.setNeedUpdate(!0)),n+=Date.now()-o)}for(var u=0,f=this._overlays;u<f.length;u++){var c=(a=f[u]).getBounds();a.visible&&c&&h.intersects(c)&&r.push(a)}return{sr:r}},Lt.prototype.loadData=function(){return!0},Lt.prototype.destroy=function(){this.map&&this.map.off("zoomend",this.W_);for(var t=0,i=this._overlays.slice(0);t<i.length;t++){var n=i[t];this.remove(n),n.destroy()}this._overlays=[]},Lt.prototype.rr=function(t){for(var i=t.lnglat,n=t.pixel,s=this._overlays.length-1;0<=s;s--){var e=this._overlays[s];if(!e._opts.noSelect&&e.visible)if(Y.sB(e)&&n){if(e.containsWithPixel(n))return e}else if(e.contains(i,t))return e}},Lt.prototype.W_=function(){for(var t=0,i=this.YB;t<i.length;t++){var n=i[t];n.W_&&n.W_()}},Lt.prototype.nr=function(){this._overlays.sort(function(t,i){return t._opts.zIndex-i._opts.zIndex})},Lt.prototype.ar=function(t){var i=this._overlays.indexOf(t);-1<i&&this._overlays.splice(i,1),!Y.GB(t)&&!Y.VB(t)||-1<(t=this.YB.indexOf(t))&&this.YB.splice(t,1)},Lt);function Lt(t,i,n,s){return(s=Ct.call(this,t,i,n,s)||this)._overlays=[],s.YB=[],s.Fo(!0),s.W_=s.W_.bind(s),n.on("zoomend",s.W_),s}var Tt,It=(Tt=O,Y.Ei(Dt,Tt),Dt.prototype.loadData=function(s,t,e,i){var r=this;this.aa=s,this.sa=[];for(var n=s.optimalResolution,h=s.boundsCoord,o=s.zoom,a=s.optimalZoom,u=this.ha(h,a,n,s),f=[],c=Y.map(u,function(t){return t.key}),l=[],d=0,v=this.la;d<v.length;d++){var p=v[d];c.indexOf(p.key)<0&&(b=this.ua.getTile(p))&&b.status!==Y.TileState.LOADED&&b.request&&(b.request.cancel(),delete b.request,this.ua.ea(b))}for(var m=[],y=((n=i.getMapState()).panning,n.zooming,0);y<u.length;y++){var b,g=u[y],k=new Y.ca(g.z,this.fa(g.x,g.z),g.y),M=new Y.ca(g.z,g.x,g.y);(b=this.ua.getTile(k))?b.status===Y.TileState.LOADED?this.sa.push(M):l.push(g):((M=new Y.Sw(k)).nG(this.type),M.status=Y.TileState.LOADING,this.ua.Jo(M),m.push(k),l.push(g)),b&&b.status===Y.TileState.LOADED||f.push(g)}return this.da(s,this.sa,f,i),this.la=l,0===m.length||(Y.map(m,function(t){var i,n=r.ua.getTile(t);n&&(i=r.AD(t.x,t.y,t.z),r.bw(n,{url:i,zo:t,zoom:o,viewState:s},e))}),0===m.length)},Dt.prototype.bw=function(t,i,s){var n,e=this,r=i.url,h=i.zo,o=i.zoom,i=i.viewState;"AMap.MapboxVectorTileLayer"===this.layer.CLASS_NAME&&(n=this.layer.cX&&this.layer.cX()),this.lX(t,{url:r,ya:h.key,zoom:o,optimalZoom:i.optimalZoom,projectionId:i.projectionId,tileCoord:h,tileSize:this.Xa,styles:n},function(t){var i,n=t&&e.ua.getTile(t.zo);n&&(delete n.request,n.status=Y.TileState.LOADED,n.localCoord=t.zS,n.Ro=t.Ro,n.stencil=t.stencil,i=Y.lcs.getLocalByCoord([n.Ro[0],n.Ro[1]]),n.data=Y.Ln(Y.Ln({},t),{Hs:i}),s())})},Dt.prototype.getData=function(t){var i=t.optimalResolution,n=t.optimalZoom,s=t.boundsCoord,s=this.ha(s,n,i,t),i=this.aa.projectionId,e=Y.ProjectionManager.getProjection(i),r=[],h=this.map.qF();if(this.ua.QF(h),this.sa.sort(function(t){return n===t.z+1?1:-1}),0<this.sa.length)for(var o=0;o<this.sa.length;o++){var a,v,p,u=this.sa[o],f=this.ua.getTile(u),c=[0,0],l=t.centerCoord,d=Y.lcs.getLocalByCoord([l[0],l[1]]);f||(l=this.fa(u.x,u.z),(a=this.ua.getTile(new Y.ca(u.z,l,u.y)))&&(f=new Y.Sw(u),l=e.getResolution(u.z),u=u.x-a.zo.x,c[0]+=l*this.Xa*u,f.Ro=a.Ro,f.localCoord=a.localCoord,f.data=a.data,f.Sa=c,f.status=a.status)),f&&10<n&&(n>=Y.Ra&&f.data.Hs?(a=Y.lcs.getSize(),v=f.data.Hs.x-d.x,p=f.data.Hs.y-d.y,0!=v&&(v*=a[0],c[0]=v),0!=p&&(p*=a[1],c[1]=p),n>=Y.Ra&&Y.za>=f.zo.z&&(c[0]=-d.center[0],c[1]=-d.center[1])):n<Y.Ra&&Y.za<f.zo.z&&(c[0]=d.center[0],c[1]=d.center[1])),f&&(f.Sa=c,f.stamp=h,r.push(f))}return i=Y.every(s,function(i){return Y.some(r,function(t){return t.zo.key===i.key})}),this.Fo(i),s=this.jE(r),i&&(this.a_=!0,this.map.bZ.dynamic.set("firstAllLoaded",!0)),this.a_&&this.map.bZ.dynamic.set("firstLabelDataAllLoaded",!0),{s_:this.a_,yZ:s,fo:!!i,tiles:r}},Dt.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},Dt.prototype.forEachTileCache=function(t){this.ua.forEach(t)},Dt.prototype.reload=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},Dt.prototype.setTileUrl=function(t){this.Be=t||this.Be},Dt.prototype.getTileCache=function(){return this.ua},Dt.prototype.setTileCacheSize=function(t){t=t||(Y.Support.$e?50:200),this.ua.Xo(t)},Dt.prototype.AD=function(t,i,n){return this.Be.replace("[x]",t.toString()).replace("[y]",i.toString()).replace("[z]",n.toString()).replace("{1234}",(Math.abs(t+i)%4+1).toString())},Dt.prototype.Da=function(t,i){var e,r,h;t.length&&(e=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<e-t.z)-r,s=(t.y<<e-t.z)-h;return n*n+s*s<=(t=(i.x<<e-i.z)-r)*t+(i=(i.y<<e-i.z)-h)*i?-1:1}))},Dt.prototype.ha=function(t,i,n,s){var e=this.layer.getSourceConfig().dataZooms;i=+Math.max(Math.min(i,e[1]),e[0]),n=Y.ProjectionManager.getProjection(s.projectionId).getResolution(i);var r=this.Xa,o=t[0]+20037508.342789244,e=-(t[3]-20037508.342789244),s=t[2]+20037508.342789244,o=o/n,e=e/n,h=-(t[1]-20037508.342789244)/n,a=Math.floor(s/n/r),u=Math.min((1<<i)-1,Math.floor(h/r)),o=Math.floor(o/r),f=Math.max(Math.floor(e/r),0);this.Pa={Oa:a,Ea:u,ja:o,Fa:f,z:i};for(var c=[],l=o;l<=a;l+=1)for(var d=f;d<=u;d+=1)c.push(new Y.ca(i,l,d));return this.Da(c),c},Dt.prototype.da=function(t,i,n,s){if(t=t.optimalZoom-1,this.Za="overlay"!==this.layer.type,this.qa="overlay"!==this.layer.type,this.Za)for(var e=Math.min(this.xt[1]-1,2+t),r=1+t;n.length&&r<=e;r+=1){for(var h=[],o=[],a=r,u=n.length-1;0<=u;--u)for(var f=n[u],c=f.x<<1,l=f.y<<1,d=1;0<=d;--d)for(var v=1;0<=v;--v){var p=new Y.ca(a,this.fa(c+d,a),l+v),m=this.ua.getTile(p),y=new Y.ca(a,c+d,l+v);(m&&m.status===Y.TileState.LOADED?o:h).push(y)}o.length&&i.push.apply(i,o),n=h}if(this.qa)for(var b=this.xt[0]-1,r=t-1;n.length&&b<=r;--r){for(var o=[],h=[],g={},u=n.length-1;0<=u;--u){var k=n[u],a=r,M=k.z-a,d=k.x>>M,v=k.y>>M;g[M=(p=new Y.ca(a,this.fa(d,a),v)).key]||(m=this.ua.getTile(p),g[M]=!0,(m&&m.status===Y.TileState.LOADED?o:h).push(new Y.ca(a,d,v)))}o.length&&i.push.apply(i,o),n=h}return i},Dt.prototype.fa=function(t,i){for(var n=1<<(i=i||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},Dt.prototype.vX=function(t,i){var n=[-180,-90],s=[180,90],e=Y.ProjectionManager.getProjection("EPSG:3857"),r=e.project(256*t+n[0],s[1]-256*i),i=e.project(256*(t+1)+n[0],s[1]-256*(i+1));return[r[0],r[1],i[0],i[1]]},Dt.prototype.jE=function(t){for(var i=!!t.length,n=0,s=t;n<s.length;n++){var e=s[n].data;if(i)for(var r=0,h=e;r<h.length;r++){var o=h[r];if(!(i=i&&!!o.Ta))break}}return i},Dt);function Dt(t,i,n,s){return(s=Tt.call(this,t,i,n,s)||this).type="vector",s.Ya=!1,s.Va=!1,s.Xa=256,s.sa=[],s.la=[],s.xt=[2,22],s.qa=!0,s.Za=!0,s.a_=!1,s.Xa=t.tileSize,s.Be=t.tileUrl,t=Y.Support.$e?50:200,s.ua=new q(t),s.NE=new nt(t),(s.map=n).gn.Ja(AMap.getConfig().protocol),s}var Ot,Et=(Ot=It,Y.Ei(Rt,Ot),Rt.prototype.ha=function(t,i,n,s){var e=this.layer.getSourceConfig().dataZooms;i=Math.max(Math.min(i,e[1]),e[0])-1,n=Y.ProjectionManager.getProjection(s.projectionId).getResolution(i);var r=this.Xa,o=t[0]+20037508.342789304,e=-(t[3]-20037508.342789304),s=t[2]+20037508.342789304,o=o/n,e=e/n,h=-(t[1]-20037508.342789304)/n,a=Math.floor(s/n/r),u=Math.min((1<<i)-1,Math.floor(h/r)),o=Math.floor(o/r),f=Math.max(Math.floor(e/r),0);this.Pa={Oa:a,Ea:u,ja:o,Fa:f,z:i};for(var c=[],l=o;l<=a;l+=1)for(var d=f;d<=u;d+=1)c.push(new Y.ca(i,l,d));return this.Da(c),c},Rt);function Rt(t,i,n,s){return(s=Ot.call(this,t,i,n,s)||this).lX=s.map.gn.loadDistrictSourceTile.bind(s.map.gn),s}var Pt,jt=(Pt=It,Y.Ei(Bt,Pt),Bt.prototype.reStyle=function(i,s){var e=this;this.ua.forEach(function(n){var t;n.status===Y.TileState.LOADED?(n.zo.z+1!==s&&e.ua.ea(n),t=Y.Ln(Y.Ln({},n.data),{dX:null,Dc:null,A_:null,$c:null,pX:null,labels:null}),e.yX.mX(t,i,function(t,i){n.data.Oc=i.Oc,n.data.Fc=i.Fc,n.data.E0=i.E0,n.data.Uc=i.Uc,n.data.dX=i.dX,n.data.IX=i.IX,n.data.labels=i.labels,e.map.setNeedUpdate(!0)})):n.status===Y.TileState.LOADING&&(null!==(t=n.request)&&void 0!==t&&t.cancel(),e.ua.ea(n))})},Bt.prototype.ha=function(t,i,n,s){var e=this.layer.getSourceConfig().dataZooms;i=Math.max(Math.min(i-1,e[1]),e[0]),n=Y.ProjectionManager.getProjection(s.projectionId).getResolution(i);var r=this.Xa,o=t[0]+20037508.342789244,e=-(t[3]-20037508.342789244),s=t[2]+20037508.342789244,o=o/n,e=e/n,h=-(t[1]-20037508.342789244)/n,a=Math.floor(s/n/r),u=Math.min((1<<i)-1,Math.floor(h/r)),o=Math.floor(o/r),f=Math.max(Math.floor(e/r),0);this.Pa={Oa:a,Ea:u,ja:o,Fa:f,z:i};for(var c=[],l=o;l<=a;l+=1)for(var d=f;d<=u;d+=1)c.push(new Y.ca(i,l,d));return this.Da(c),c},Bt);function Bt(t,i,n,s){return(n=Pt.call(this,t,i,n,s)||this).yX=new Y.bX,n.Be=s.getSourceConfig().tileUrl,n.lX=n.map.gn.gX.bind(n.map.gn),n}var Ft,Wt=(Ft=O,Y.Ei(Gt,Ft),Gt.prototype.loadData=function(t,i,n){return this.ze=i,this.Oo||(this.Fo(!0),n()),!0},Gt.prototype.getData=function(t){return this.ir=t.bounds,{Sa:[0,0]}},Gt);function Gt(t,i,n,s){return(i=Ft.call(this,t,i,n,s)||this).ir=n.getView().getStatus().bounds,i.io=s.canvas,i}var Nt,_t=(Nt=O,Y.Ei(Ut,Nt),Ut.prototype.loadData=function(t,i,n){return!0},Ut.prototype.getData=function(t){return!0},Ut.prototype.destroy=function(){this.gs&&this.gs.destroy&&this.gs.destroy()},Ut);function Ut(t,i,n,s){return(n=Nt.call(this,t,i,n,s)||this).gs=s,n}var Yt,Zt=(Yt=O,Y.Ei(Xt,Yt),Xt.prototype.CS=function(){this.AS=!1},Xt.prototype.loadData=function(t,i,n){return!0},Xt.prototype.getData=function(t){var r=this,i=this.gs.getState().path;if(this.AS)return this.AS;if(i){var n,e,h,o,a,s=Y.GeometryUtil.typePolygon(i),u={type:"Polygon",$S:new Array,polygons:new Array,BM:new Array,LS:{x:0,y:0}};return s&&"Polygon"===s?(i[0][0]instanceof Y.LngLat?u.LS=Y.lcs.getLocalByLnglat(i[0][0].toString()):u.LS=Y.lcs.getLocalByLnglat(i[0][0]),n=u.LS,e=n.x,h=n.y,Y.forEach(i,function(t,i){var s;0===i?Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(e,h,i.x,i.y))[0],n=n[1];u.$S.push(i.Sa[0]+t,i.Sa[1]+n)}):(s=[],Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(e,h,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}),u.BM.push(s))})):s&&"MultiPolygon"===s&&(u.type="MultiPolygon",i[0][0][0]instanceof Y.LngLat?u.LS=Y.lcs.getLocalByLnglat(i[0][0][0].toArray()):u.LS=Y.lcs.getLocalByLnglat(i[0][0][0]),s=u.LS,o=s.x,a=s.y,Y.forEach(i,function(t){var e=[],n=[];Y.forEach(t,function(t,i){var s;0===i?Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(o,a,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}):(s=[],Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(o,a,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}),n.push(s))}),u.BM.push(n),u.polygons.push(e)})),this.AS=this.zw(u),this.AS}return!0},Xt.prototype.zw=function(t){if(t.Oc=new Y._w,!t.Dc){t.Dc=new Y.K_;var i=[],n=[];"Polygon"===t.type?(i=[t.$S],n=[t.BM]):"MultiPolygon"===t.type&&(i=t.polygons,n=t.BM);for(var s=0;s<i.length;s++){for(var e=i[s],r=[],h=0;h<n[s].length;h++){var o=n[s][h];r.push(e.length/2),e.push.apply(e,o)}var a=t.Dc.Nx(e,r);0<a&&t.Oc.add(99,99,a,Y.zoomRange[0],Y.zoomRange[1])}return t}},Xt.prototype.DS=function(t,i,n,s){return s-=i,[(t=n-t)*(i=Y.lcs.getSize())[0],s*i[1]]},Xt);function Xt(t,i,n,s){return(n=Yt.call(this,t,i,n,s)||this).gs=s,n}var Jt,Ht=(Jt=It,Y.Ei(Vt,Jt),Vt.prototype.YE=function(t){var i=this;return t(null,{GW:"worker",cb:function(t){i.dynamicTextVerticeLoadedByTile(t)}}),!0},Vt.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,n=t.data;i<n.length;i++){var s=n[i];this.dynamicTextVerticeLoaded({data:s.data,tag:s.tag,XE:s.XE})}},Vt.prototype.dynamicTextVerticeLoaded=function(t){var i=t.data,n=t.XE;if(i instanceof Y.ca)this.ua.getTile(i);else if(t=i[Object.keys(i)[0]],(t=this.ua.getTile(t.zo,!0))&&t.data){var s,e,r={};for(s in i)i.hasOwnProperty(s)&&(e=i[s],r[s]=new Y.La(e.zo,e));t.data.labels=r,t.data.XE=n,t.data.Ta=!0,this.Eo()}},Vt.prototype.Aa=function(t){!t.zo||(t=this.ua.getTile(t.zo))&&(t.data.Ta=!0)},Vt.prototype.loadData=function(s,t,e,i){var h=this;this.aa=s,this.sa=[];var n=s.optimalResolution,r=s.boundsCoord,o=s.zoom,a=s.optimalZoom;if(a<9.8)return!1;for(var u=this.ha(r,a,n,s),f=[],c=Y.map(u,function(t){return t.key}),l=[],d=0,v=this.la;d<v.length;d++){var p=v[d];c.indexOf(p.key)<0&&(k=this.ua.getTile(p))&&k.status!==Y.TileState.LOADED&&k.request&&(k.request.cancel(),delete k.request,this.ua.ea(k))}for(var m=[],y=(n=i.getMapState()).panning,b=n.zooming,g=0;g<u.length;g++){var k,M=u[g],w=new Y.ca(M.z,this.fa(M.x,M.z),M.y),x=new Y.ca(M.z,M.x,M.y);!(k=this.ua.getTile(w))&&y&&!b||(k?k.status===Y.TileState.LOADED?this.sa.push(x):l.push(M):((x=new Y.Sw(w)).nG(this.type),x.status=Y.TileState.LOADING,this.ua.Jo(x),m.push(w),l.push(M)),k&&k.status===Y.TileState.LOADED||f.push(M))}if(this.da(s,this.sa,f,i),this.la=l,0===m.length)return!1;var A=this.map.getMapboxStyle(),z=[],C=256;return Y.map(m,function(t){var i=t.x,n=t.y,s=t.z,e=h.NE.getTile(t),r=null;e&&e.boundsStatus?r=e.boundsStatus.isInNebulaOversea:(e=h.aa.projectionId,s=[Y.V[e].Xs(i*C,n*C,s),Y.V[e].Xs((i+1)*C,n*C,s),Y.V[e].Xs((i+1)*C,(n+1)*C,s),Y.V[e].Xs(i*C,(n+1)*C,s)],r=h.rG(s,t.key),(s=new Y.pa(t)).boundsStatus={isInNebulaOversea:r},h.NE.Jo(s)),r||z.push(t),r=h.NE.getTile(t),(t=h.ua.getTile(t))&&r&&r.boundsStatus&&(t.sG=r.boundsStatus)}),Y.map(m=z,function(t){var i,n=h.ua.getTile(t);n&&(i=h.AD(t.x,t.y,t.z),h.bw(n,{url:i,zo:t,zoom:o,viewState:s,styles:A},e))}),0===m.length},Vt.prototype.oG=function(t,i,n,s){void 0===s&&(s="lnglat");var e=[-180,-90],r=[180,90],h=Y.ProjectionManager.getProjection("EPSG:3857");return"lnglat"===s?[256*t+e[0],r[1]-256*i,256*(t+1)+e[0],r[1]-256*(i+1)]:"EPSG:3857"!==s?[0,0,0,0]:(s=h.project(256*t+e[0],r[1]-256*i),i=h.project(256*(t+1)+e[0],r[1]-256*(i+1)),[s[0],s[1],i[0],i[1]])},Vt.prototype.bw=function(t,i,s){var e=this,n=i.url,r=i.zo,h=i.zoom,o=i.viewState,i=i.styles;this.map.gn.aG(t,{url:n,ya:r.key,zoom:h,optimalZoom:o.optimalZoom,projectionId:o.projectionId,tileCoord:r,tileSize:this.Xa,styles:i},function(t){var i,n=t&&e.ua.getTile(t.zo);n&&(delete n.request,n.status=Y.TileState.LOADED,n.localCoord=t.zS,n.Ro=t.Ro,n.stencil=t.stencil,i=Y.lcs.getLocalByCoord([n.Ro[0],n.Ro[1]]),n.data=Y.Ln(Y.Ln({},t),{Hs:i}),s())})},Vt.prototype.getData=function(t){var i=this,n=t.optimalResolution,s=t.boundsCoord,e=t.optimalZoom;if(e<10)return this.Fo(!0),!1;var s=this.ha(s,e,n,t),n=t.projectionId,r=Y.ProjectionManager.getProjection(n),h=[],o=this.map.qF();if(this.ua.QF(o),this.sa.sort(function(t){return e===t.z+1?1:-1}),0<this.sa.length)for(var a=0;a<this.sa.length;a++){var u,p,m,f=this.sa[a],c=this.ua.getTile(f),l=[0,0],d=t.centerCoord,v=Y.lcs.getLocalByCoord([d[0],d[1]]);c||(u=this.ua.getTile(new Y.ca(f.z,this.fa(f.x,f.z),f.y)))&&((c=new Y.Sw(f)).nG(this.type),d=r.getResolution(f.z),f=f.x-u.zo.x,l[0]+=d*this.Xa*f,c.Ro=u.Ro,c.localCoord=u.localCoord,c.data=u.data,c.Sa=l,c.status=u.status),c&&(e>=Y.Ra&&c.data.Hs?(u=Y.lcs.getSize(),p=c.data.Hs.x-v.x,m=c.data.Hs.y-v.y,0!=p&&(p*=u[0],l[0]=p),0!=m&&(m*=u[1],l[1]=m),l[0]=-v.center[0],l[1]=-v.center[1]):(l[0]=v.center[0],l[1]=v.center[1])),c&&(c.Sa=l,c.stamp=o,h.push(c))}return s=!(n=Y.filter(s,function(t){return!(!(t=i.NE.getTile(t))||!t.boundsStatus||!1!==t.boundsStatus.isInNebulaOversea)})).length||Y.every(n,function(i){return Y.some(h,function(t){return t.zo.key===i.key})}),n=this.jE(h),s&&(this.a_=!0,this.map.bZ.dynamic.set("firstAllLoaded",!0)),this.a_&&this.map.bZ.dynamic.set("firstLabelDataAllLoaded",!0),s&&this.Fo(!0),{s_:this.a_,fo:!!s,yZ:n,tiles:h}},Vt.prototype.Ia=function(){this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},Vt.prototype.ha=function(t,i,n,s){var e=this.layer.getSourceConfig().dataZooms;i=Math.max(Math.min(i,e[1]),e[0])-1,n=Y.ProjectionManager.getProjection(s.projectionId).getResolution(i);var r=this.Xa,o=t[0]+20037508.342789244,e=-(t[3]-20037508.342789244),s=t[2]+20037508.342789244,o=o/n,e=e/n,h=-(t[1]-20037508.342789244)/n,a=Math.floor(s/n/r),u=Math.min((1<<i)-1,Math.floor(h/r)),o=Math.floor(o/r),f=Math.max(Math.floor(e/r),0);this.Pa={Oa:a,Ea:u,ja:o,Fa:f,z:i};for(var c=[],l=o;l<=a;l+=1)for(var d=f;d<=u;d+=1)c.push(new Y.ca(i,l,d));return this.Da(c),c},Vt.prototype.jE=function(t){for(var i=!!t.length,n=0,s=t;n<s.length;n++){var e=s[n].data;if(i)for(var r=0,h=e;r<h.length;r++){var o=h[r];if(!(i=i&&!!o.Ta))break}}return i},Vt);function Vt(t,i,n,s){return(s=Jt.call(this,t,i,n,s)||this).type="mapbox",s.hD=[AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],s.Ia(),s}var qt={ielt9:"ActiveXObject"in window&&!document.addEventListener,opts:{callback:"callback",type:"json",charset:"utf-8"},setOptions:function(t){this.opts=Y.assign(this.opts,t)},bv:function(){},gv:function(){this.emit("error",{info:"TIME_OUT_A"})},JSONP:function(i,n,t){void 0===t&&(t={}),i=encodeURI(i);var s=Y.Util.getGuid("jsonp_",6)+"_",e=document.createElement("script");function r(){window[s]=null,e.onerror=null,e.parentNode&&e.parentNode.removeChild(e)}e.type="text/javascript",e.charset="utf-8",e.async=!0,t=Y.assign({},this.opts,t),e.onerror=function(t){r(),n&&n("error",{url:i,info:"Request Error"})},window[s]=function(t){r(),n&&n("complete",{info:"ok",url:i,data:t})};var h="?";-1!==i.indexOf("?")&&(h="&"),t=i+h+t.callback+"="+s,e.src=t,(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(e)},Ajax:function(i,t,n){if(void 0===window.XMLHttpRequest&&window.wv){var s=this._v=new window.wv;return s.onerror=function(t){n("error",{info:"Request Error",url:i,data:""})},s.onload=function(){n("complete",{url:i,data:s.responseText})},s.open(t.type||"GET",i),setTimeout(function(){s.send(t.content||null)},0),s}if(window.XMLHttpRequest){var e=new XMLHttpRequest;return e.onreadystatechange=function(){var t;4===e.readyState&&(200===e.status||206===e.status?(t="arraybuffer"===e.responseType?e.response:e.responseText,n("complete",{info:"ok",url:i,data:t})):(e.abort(),n("error",{info:e.status,url:i,data:""})))},e.onerror=function(t){e.abort(),n("error",{info:"Request Error",url:i,data:""})},e.open(t.type||"GET",i,!0),e.responseType=t.responseType||"text","POST"===t.type&&e.setRequestHeader("Content-Type",t.requestContentType||"application/x-www-form-urlencoded"),e.send(t.content||null),e}n("error",{info:"Not Support Ajax",url:i,data:""})}},Qt=(Kt.prototype.add=function(t,i,n,s,e){$t.getKey(t,i,e,s)!==(this.WM?this.WM.getKey():"-1")&&(this.XR=t,this.qR=i,this.VM+=this.WM?this.WM.length:0,this.WM=new $t(t,i,this.VM,s,e),this.jc.push(this.WM)),this.WM.add(n)},Kt);function Kt(){this.jc=[],this.XR=0,this.qR=0,this.VM=0}var $t=(ti.getKey=function(t,i,n,s){return t+":"+i+":"+n+":"+s},ti.prototype.add=function(t){this.length+=t},ti.prototype.getKey=function(){return this.color+":"+this.width+":"+this.maxzoom+":"+this.minzoom},ti);function ti(t,i,n,s,e){this.color=t,this.width=i,this.offset=n,this.minzoom=s,this.maxzoom=e,this.length=0}var ii,ni=(ii=Mt,Y.Ei(si,ii),si.prototype.loadData=function(t,i,n,s){var h=this;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var e=t.projectionId,r=[],o=t.boundsCoord,a=t.optimalZoom,u=t.optimalResolution,f=this.ha(o,a,u);return this.ua.forEach(function(t){var i=t.zo,n=!1;if(t.status!==Y.TileState.LOADED){for(var s=f.ja;s<=f.Oa;s+=1)for(var e=f.Fa;e<=f.Ea;e+=1){var r=h.fa(s,f.z);i.z===f.z&&i.y===e&&r===i.x&&(n=!0)}n||(t.request&&t.request.abort&&t.request.abort(),h.ua.ea(t))}}),u=this.qs(t,this.Zs,r),this.Ys(u,i,e,n),this.da(t,this.sa,r,s),this.sa=this.sa.concat(this.Zs),0===u.length},si.prototype.Ys=function(o,t,z,C){if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(o);var i={0:"fff93a43",1:"fffcac19",2:"ff20a962",3:"ff83171c",4:"ffadadad"},n=this.map.mapStyle.vn.MS("traffic");n&&n.multiFillColors&&((n=n.multiFillColors).congested&&(i[0]=n.congested),n.slow&&(i[1]=n.slow),n.smooth&&(i[2]=n.smooth),n.seriousCongested&&(i[3]=n.seriousCongested),n.unknown&&(i[4]=n.unknown));for(var S=this.layer.getOptions().rZ,a=this,s=0,e=o.length;s<e;s+=1)!function(t){var i=o[t],k=Y.Util.Rg(i.x,i.y,i.z),n=a.ll(k),M=new Y.Sw(i);a.ua.Qo(M);var w=Y.ProjectionManager.getProjection(z).getResolution(i.z),s=(r=i.x*a.Xa*w)+a.Xa*w,e=(h=i.y*a.Xa*w)+a.Xa*w,t=Y.V[z].Xs(r,h),i=Y.V[z].Xs(s,e),r=t[0],s=i[0],h=i[1],e=t[1];M.Ro=[r,h,s,e],M.status=Y.TileState.LOADING;var x=Y.lcs.getLocalByCoord([M.Ro[0],M.Ro[1]]),A=M.zo.z>Y.za;A&&(M.Ro[0]-=x.center[0],M.Ro[1]-=x.center[1],M.Ro[2]-=x.center[0],M.Ro[3]-=x.center[1]),M.request=qt.Ajax(n,{},function(t,i){M.data={};try{i=JSON.parse(i.data)}catch(t){return M.status=Y.TileState.LOADED,void C()}if(i=i.data[k.join("_")],"complete"===t&&i){for(var n=new Qt,s=new Y.J_,e=0,r=i.length;e<r;e++)for(var h=i[e],o=0,a=h.length;o<a;o++)for(var u=h[o],f=.6*u[0]*S,c=0,l=u[1].length;c<l;c++){for(var d=[],v=Y.Util.Eg(u[1][c]),p=0,m=v.length;p<m;p+=2){var y=w*(256*M.zo.x+v[p]),b=w*(256*M.zo.y+v[p+1]),b=Y.V[z].Xs(y,b);A&&(b[0]-=x.center[0],b[1]-=x.center[1]),d.push(b[0],b[1])}var g=s.hb(d).Iw;n.add(e,f,g,8,20)}M.data={$c:s,Uc:n,Hs:x}}M.status=Y.TileState.LOADED,C()})}(s)}},si);function si(t,i,n,s){return(s=ii.call(this,t,i,n,s)||this).Qs=[3,17],s.Xa=256,s.Za=s.qa=!1,s.ll=function(t){return AMap.getConfig().protocol+"://vdata.amap.com/traffic?key="+AMap.getConfig().key+"&v="+AMap.getConfig().version+"&t="+t+"&w="+(new Date).getTime()},s}var ei,hi={nebula:"tile",mapbox:"tile",nebulaLabel:"tile",indoor:"other"},oi=(ei=O,Y.Ei(ai,ei),ai.prototype.loadData=function(e,t,i,r,n){var s,h=this,o=this.Yh;for(s in Object.keys(o).length,o)!function(s){o.hasOwnProperty(s)&&o[s].YE(function(t,i){var n=i.GW,i=i.cb;"worker"===(void 0===n?"main":n)?(h.Ye[s]=i,r.gn.innerLabelsLoadData({id:s,bounds:e.bounds.slice(),zoom:e.optimalZoom},function(t){Object.keys(t).length})):(n=function(t,i){var n,s,e=i.R_,r=i.z_,h={};for(n in t)t.hasOwnProperty(n)&&(s=t[n],s=new Y.eG({R_:e,z_:r}).Ns(s.data,{zoom:s.zoom,from:"inner",center:s.center}),h[n]=new Y.La(n,s));return h}(t,n={R_:h.Mf,z_:h.ac}),i&&i(n))})}(s);return!0},ai.prototype.getData=function(t){var i,n,s,e,r=this.Yh,h={tile:[],other:[]},o=!0;for(i in r)r.hasOwnProperty(i)&&(e=r[i],n=hi[i]||"other",e&&(s=e.getData(t),e=e.lo(),h[n].push(s),o=o&&e));return this.Oo=o,this.Fo(o),h},ai.prototype.getSources=function(){return this.Yh},ai.prototype.addSource=function(t,i){this.Yh[t]=i},ai.prototype.Xh=function(t){delete this.Yh[t]},ai.prototype.uU=function(t){var i=t.id,n=this.Ye;n[i]&&n[i](t)},ai.prototype.destroy=function(){var t,i,n=this.Yh;for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&i.destroy()},ai.prototype.reload=function(){var t,i,n=this.Yh;for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&i.reload&&i.reload()},ai.prototype.Ia=function(){this.map.gn.on("dynamicTextVerticeLoadedByTile",this.uU.bind(this))},ai);function ai(t,i,n,s){return(s=ei.call(this,t,i,n,s)||this).Yh={},s.Ye={},s.Mf=n.R_,s.ac=n.z_,s.Ia(),s}var ui,fi=Y.Support.scale,ci=(ui=at,Y.Ei(li,ui),li.prototype.loadData=function(t,i,n,s){var e=this;if(!s.gn.dE)return!1;this.aa=t,this.sa=[];for(var r=t.bounds,h=this.ra(t.optimalZoom),o=this.ha(r,h),a=Y.map(o,function(t){var i=e.fa(t.x,t.z);return t.z+","+i+","+t.y}),u=this.QH.qH(a).yB,f=[],c=0;c<o.length;c++){var l,d,v=o[c],p=new Y.ca(v.z,this.fa(v.x,v.z),v.y),m=new Y.ca(v.z,v.x,v.y),y=Y.zB.ALL,b=this.ua.getTile(p,!0);b?(l=this.ua.MD(b.tag,y))&&(b.tag=y,d=v.key+","+Y.Util.SD(l),u.indexOf(d)<0&&f.push(d)):(d=p.key+","+Y.Util.SD(y),u.indexOf(d)<0&&((p=new Y.pa(p)).status=Y.TileState.LOADING,this.ua.Jo(p),p.tag=y,f.push(d))),!b||b.status!==Y.TileState.LOADED&&b.status!==Y.TileState.RELOADING||this.sa.push(m)}var r=(g=this.OE(f)).overseaTile,a=g.chinaTile,g=g.mapboxTile;return this.PE(r,"oversea"),this.PE(a,"china"),this.PE(g,"mapbox"),this.da(t,this.sa,[],s),this.zD(f,t,h,s,n,"building"),0===f.length},li.prototype.destroy=function(){this.mapStyle&&this.mapStyle.destroy&&(this.mapStyle.destroy(),delete this.mapStyle),this.R_&&this.R_.destroy&&(this.R_.destroy(),delete this.R_)},li.prototype.reload=function(){var i=this;this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy(),i.ua.ea(t)}),this.sa=[],this.la=[]},li);function li(t,i,n,s){return(s=ui.call(this,t,i,n,s)||this).Xa=t.tileSize,s.Be=t.tileUrl,t=Y.Support.$e?50:200,s.ua=new $(t),n.gn.Ha({scale:fi,showLabel:n.showLabel,DD:-1!==location.search.indexOf("forceAll")}),s.R_=n.R_,s.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),s.mapStyle=n.mapStyle,s.mapStyle.pn(function(){}),s.Ia(),s.sD(),s}var di,F=(di=O,Y.Ei(vi,di),vi.prototype.loadData=function(t,i,n,s,e){var r=e.getSource("nebula");if(!r)return!this.gs||(e=this.gs.VR.showId)&&this.GR([e]),!1;for(var h=r.getData(t).tiles,o=h.length,a=[],u=0;u<o;u++)for(var f=0,c=h[u].data||[];f<c.length;f++){var l=c[f];if(l.indoorInfo)for(var d=l.indoorInfo,v=d.length,p=0;p<v;p++){for(var m=d[p],y=!1,b=0;b<a.length;b++)m===a[b]&&(y=!0);y||a.push(m)}}return this.GR(a),this.Fo(!0),!0},vi.prototype.getData=function(){return this._indoorData},vi.prototype.lo=function(){return!0},vi.prototype.GR=function(t,i){if(!t||t.length<1)return null;if(!this.map.isDOMMode()){for(var s=(n=this.gs).VR,e=(n._map,[]),n=this._config.server+"/v3/indoor/indoormaps?",r=t,h=r.length,o=[],a=[],t=[],u=!1,f=0;f<h;f++){var c=r[f],l=1;this._indoorData.data[c]||(this._indoorData.data[c]={}),s.floorInfo&&s.floorInfo[c]&&(d=s.floorInfo[c])&&(l=d);var d=this._indoorData.data[c];d&&d.data&&d.data[l]||(u=!0,o.push(l),a.push(0),e.push(c))}this.LL=e,t.push("poiid="+e.join(";")),t.push("floor="+o.join(";")),t.push("version="+a.join(";")),t.push("s=rsv3"),t.push("from=indoorH5Map"),t.push("servicetype=unify"),t.push("key="+this._config.key),this._config.jscode?t.push("jscode="+this._config.jscode):this._config.gaodeserver&&(n=this._config.gaodeserver+"/v3/indoor/indoormaps?"),t=n+t.join("&"),u&&this.ZR.url!==t?(this.ZR.url=t,this.YR(t,this.jF)):(this.jF(),i&&i())}},vi.prototype.JR=function(t,i,n){var s=this;if(!t||!i)return!1;this.GR([t],function(){s.gs&&s.gs._map&&s.gs._map.setNeedUpdate(!0),n&&n()})},vi.prototype.YR=function(t,u){var f=this,i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&f.map.gn.JB(i.response,function(t,i){if(t)console.log(t),u();else{for(var n=0,s=Object.keys(i);n<s.length;n++){var e=s[n];f._indoorData.data[e]&&f._indoorData.data[e].data||(f._indoorData.data[e].data={}),f._indoorData.data[e].building=i[e].building;for(var r=i[e].data,h=0,o=Object.keys(r);h<o.length;h++){var a=o[h];f._indoorData.data[e].data[a]=r[a]}}u()}})},i.open("GET",t,!0),i.responseType="arraybuffer",i.send()},vi);function vi(t,i,n,s){var e=di.call(this,t,i,n,s)||this;return e.jF=function(){var t;!e.gs||(t=e.gs.getRender())&&t.render(e._indoorData)},e.gs=s,e._config=AMap.getConfig(),e._indoorData={extData:{},data:{}},e.LL=[],e.ZR={url:null,status:!1},e}var pi,mi=Y.Support.scale;function yi(t,i,n,s){var a=pi.call(this,t,i,n,s)||this;return a.xt=Y.zoomRange,a.sa=[],a.la=[],a.qa=!0,a.Za=!0,a.a_=!1,a.$D=0,a.hD=[AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",AMap.getConfig().protocol+"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],a.VH="",a.u0=!1,a.M0=!0,a.wH=function(t){a.map.yH&&(parseInt(t.key.split(",")[0],10)<10||a.map.yH.kH(t.key))},a.u0=n.offlineServer||!1,n.assetsServer&&(a.hD=n.c0(n.assetsServer)),a.Xa=t.tileSize,a.Be=t.tileUrl,a.tG=null,t=Y.Support.$e?30:200,a.ua=new $(t),a.NE=new nt(t),window.xZ=a.ua,n.gn.Ha({scale:mi,showLabel:n.showLabel,DD:-1!==location.search.indexOf("forceAll")}),a.R_=n.R_,a.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),a.mapStyle=n.mapStyle,a.mapStyle.pn(function(t){n&&n.gn&&n.gn.Ka({value:t,TY:"fast"===a.map.bZ.MZ.drawMode})}),a.Ia(),a.sD(),a.ua.on("delete",a.wH),a.KH=new et(function(t,o,i,n){var s=a.AD();return!n||"outsea"!==n&&"a00"!==n||(s=Y.Support.wasm?s.replace("/nebula/v3","/oversea/v3"):s.replace("/nebula/v2","/oversea/v2")),new Y.vH(a.map.gn.RD({url:s,projectionId:i.projectionId,ya:t,ZL:i.zoom,mH:i.mH,offlineServer:i.offlineServer,AmapCcbParams:window.AmapCcbParams},function(t,i){if(a.Eo(),a.KH.CB(o),t)return console.log(t),void a.map.emit("TileDecodeError",{type:"nebulasdf",err:t});if(!i)return console.log("no data"),void a.map.emit("TileDecodeError",{type:"nebulasdf",err:"no data"});if(!window.AmapCcbVerify||(a.M0=!1,t=window.AmapCcbVerify(i.signature),a.M0=t))for(var n=0,s=Object.keys(i);n<s.length;n++){var e,r=s[n].slice(0,-2),h=a.ua.xf(r);h&&(h.status=Y.TileState.LOADED,h.xB=Y.TileState.LOADED,e=Y.wa.ga(h.zo.x,h.zo.y,h.zo.z,"EPSG:3857"),r=Y.lcs.getLocalByCoord([e[0],e[1]]),h.localCoord=r,h.Ro=e)}}))},function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];(s=a.ua.xf(s.slice(0,-2)))&&s.status!==Y.TileState.LOADED&&a.ua.ea(s)}}),n.offlineServer&&a.KH.Uo(1),Y.Support.$e&&!Y.Support.iPad&&(a.map.on("zoomend",function(){15<=a.map.getZoom()?a.ua.Xo(6):a.ua.Xo(20)}),15<=a.map.getZoom()&&a.ua.Xo(6)),a}var bi={nebula:at,nebulaLabel:(pi=O,Y.Ei(yi,pi),yi.prototype.loadData=function(t,i,n,s){var e=this;if("optimise"===s.loadData()&&s.TL())return!1;this.aa=t,this.sa=[];for(var r=t.bounds,h=this.ra(t.optimalZoom),o=this.ha(r,h),a=[],u=t.optimalZoom,f=Y.map(o,function(t){var i=e.fa(t.x,t.z);return t.z+","+i+","+t.y}),c=this.KH.qH(f),l=[],d=0;d<o.length;d++){var v,p,m=o[d],y=new Y.ca(m.z,this.fa(m.x,m.z),m.y),b=new Y.ca(m.z,m.x,m.y),g=!!this.u0,k=Y.Util.kD(y.key,u,g);(g=this.ua.getTile(y,!0))?(v=this.ua.MD(g.gB,k))&&(g.gB=k,p=m.key+","+Y.Util.SD(v),c.yB.indexOf(p)<0&&l.push(p)):(p=y.key+","+Y.Util.SD(k),c.yB.indexOf(p)<0&&((y=new Y.pa(y)).status=Y.TileState.LOADING,y.xB=Y.TileState.LOADING,this.ua.Jo(y),y.tag=k,y.gB=k,l.push(p))),!g||g.xB!==Y.TileState.LOADED&&g.xB!==Y.TileState.RELOADING||this.sa.push(b),g&&(g.xB===Y.TileState.LOADED||g.xB===Y.TileState.RELOADING)||a.push(m),g&&g.xB===Y.TileState.LOADED&&g.version&&g.version!==this.VH&&(this.sa.push(b),g.xB=Y.TileState.RELOADING,l.push(m.key+","+Y.Util.SD(g.gB)),(v=this.ua.MD(g.gB,k))&&(p=m.key+","+Y.Util.SD(v),c.yB.indexOf(p)<0&&l.push(p)))}this.da(t,this.sa,a,s);var M,w,x=this.map.getOutseaState(),r=this.map.getOutseaDataType();return x&&!r?9.8<=h?(f=(M=this.OE(l)).overseaTile,w=M.chinaTile,h=M.mapboxTile,this.PE(f,"oversea"),this.PE(w,"china"),this.PE(h,"mapbox"),s.showLabel&&this.bB(M.chinaTile,t),s.showLabel&&this.bB(M.overseaTile,t,"outsea")):(this.PE(l,"china"),s.showLabel&&this.bB(l,t,"a00")):x&&r&&"mapbox"===r?9.8<=u?(w=(M=this.OE(l)).chinaTile,this.PE(w,"china"),s.showLabel&&this.bB(l,t)):(this.PE(l,"china"),s.showLabel&&this.bB(l,t,"a00")):(this.PE(l,"china"),s.showLabel&&this.bB(l,t)),0===l.length},yi.prototype.getData=function(i){var n=this,t=i.bounds,s=this.ra(i.optimalZoom),e=this.ha(t,s),r=[],h={};if(!this.M0)return null;14===s&&(h=this.ha(t,15,!0));var o=this.map.qF();if(this.ua.QF(o),this.sa.sort(function(t){return n.ra(i.optimalZoom)===t.z?1:-1}),0<this.sa.length)for(var a=0;a<this.sa.length;a++){var u,f,c,l,p,m,d=this.sa[a],v=this.ua.getTile(d,!0),y=[0,0],b=i.centerCoord;v?(v.localCoord||(f=Y.wa.ga(v.zo.x,v.zo.y,v.zo.z,"EPSG:3857"),u=Y.lcs.getLocalByCoord([f[0],f[1]]),v.localCoord=u,v.Ro=f),f=Y.lcs.getLocalByCoord([b[0],b[1]]),i.optimalZoom>=Y.Ra?(c=Y.lcs.getSize(),p=v.localCoord.x-f.x,m=v.localCoord.y-f.y,0!=p&&(p*=c[0],y[0]=p),0!=m&&(m*=c[1],y[1]=m),i.optimalZoom>=Y.Ra&&Y.za>=v.zo.z&&(y[0]=-f.center[0],y[1]=-f.center[1])):i.optimalZoom<Y.Ra&&Y.za<v.zo.z&&(y[0]=f.center[0],y[1]=f.center[1])):(f=new Y.ca(d.z,this.fa(d.x,d.z),d.y),(f=this.ua.getTile(f,!0))&&(v=new Y.pa(d),c=1<<d.z,(d.x<0||d.x>=c)&&(l=Math.floor(d.x/c),y[0]+=20037508.342789244*l*2),l=f.gB,v.Ro=f.Ro,v.ID(f),v.Sa=y,v.status=f.status,v.tag=l,v.gB=l)),v&&(v.stamp=o,v.Sa=y,r.push(v))}var g=i.optimalZoom,k=Y.every(e,function(s){return Y.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=Y.Util.VF(n,g),t=t.gB,n=Y.Util.LD(t,n);return i===s.key&&n})}),M=this.map.getOutseaState(),t=this.map.getOutseaDataType();M&&!t&&(k=!(w=Y.filter(e,function(t){return!(t=n.NE.getTile(t))||!t.boundsStatus||!1!==t.boundsStatus.isInNebulaOversea})).length||Y.every(w,function(s){return Y.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=Y.Util.VF(n,g),t=t.gB,n=Y.Util.LD(t,n);return i===s.key&&n})})),r&&0<=r.length&&this.Fo(!0);var w=this.jE(r);return k&&(this.a_=!0,this.map.bZ.dynamic.set("firstAllLoaded",!0)),w&&this.map.bZ.dynamic.set("firstLabelDataAllLoaded",!0),k&&w&&this.Fo(!0),h={s_:this.a_,fo:!!k&&w,yZ:w,tiles:r,Ca:h,outseaData:void 0},M&&r.length&&(M=this.map.bZ.MZ.wZ.gZ(),h.outseaData=M),h.tiles=this.UE(r,s),h},yi.prototype.pe=function(t){return t=new Y.ca(t[0],t[1],t[2]),this.ua.getTile(t)},yi.prototype.ZE=function(t){return!1},yi.prototype.OE=function(t){for(var i=t.length,n=[],s=[],e=[],r=0;r<i;r++){var h=void 0,o=void 0,a=t[r],u=a.split(","),f=new Y.ca(u[0],u[1],u[2]),c=this.NE.getTile(f);if(c&&c.boundsStatus)h=c.boundsStatus.isInChina,o=c.boundsStatus.isInNebulaOversea;else{if(!(u=Y.wa.ga(parseInt(u[1],10),parseInt(u[2],10),parseInt(u[0],10),"EPSG:3857")))continue;u=[[u[0],u[1]],[u[2],u[1]],[u[2],u[3]],[u[0],u[3]]],h=this.VE(u,"china",a),o=this.VE(u,"oversea",a),(f=new Y.pa(f)).boundsStatus={isInChina:h,isInNebulaOversea:o},this.NE.Jo(f)}h&&n.push(a),o&&s.push(a),h||o||e.push(a)}return{chinaTile:n,overseaTile:s,mapboxTile:e}},yi.prototype.ra=function(t){return("fast"!==this.map.bZ.MZ.drawMode||this.map.bZ.dynamic.get("firstPaint")?{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:15,16:15,17:15,18:15,19:15,20:15,21:15,22:15,23:15,24:15,25:15,26:15,27:15,28:15,29:15,30:15}:{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:8,11:8,12:8,13:12,14:12,15:15,16:15,17:15,18:15,19:15,20:15,21:15,22:15,23:15,24:15,25:15,26:15,27:15,28:15,29:15,30:15})[t]},yi.prototype.YE=function(t){var i=this;return t(null,{GW:"worker",cb:function(t){i.dynamicTextVerticeLoadedByTile(t)}}),!0},yi.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[],this.mapStyle&&this.mapStyle.destroy&&(this.mapStyle.destroy(),delete this.mapStyle),this.R_&&this.R_.destroy&&(this.R_.destroy(),delete this.R_)},yi.prototype.reload=function(){this.ua.forEach(function(t){t.status!==Y.TileState.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.reload()}),this.sa=[],this.la=[]},yi.prototype.Aa=function(t){var i;!t.zo||(i=this.ua.getTile(t.zo))&&(i.rO({Ta:!0},t.tag),i.xa({Ta:!0},t.tag),i.JE({Ta:!0},t.tag))},yi.prototype.setTileCacheSize=function(t){t=t||(Y.Support.$e?30:100),this.ua.Xo(t)},yi.prototype.UH=function(t){this.VH=t},yi.prototype.dynamicTextVerticeLoaded=function(t){var i=t.data,n=t.XE;if(i instanceof Y.ca){var s=this.ua.getTile(i);return s?(s.data||s.xa({},t.tag),void s.rO({},t.tag)):void 0}if(s=i[Object.keys(i)[0]],s=this.ua.getTile(s.zo,!0)){s.data||s.xa({},t.tag);var e,r,h={};for(e in i)i.hasOwnProperty(e)&&(r=i[e],h[e]=new Y.La(r.zo,r));s.rO({Ta:!0,labels:h,XE:n},t.tag),s.xa({Ta:!0},t.tag),s.JE({Ta:!0},t.tag),s.xB=Y.TileState.LOADED,this.map.Mv.t0(s.zo),this.Eo()}},yi.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,n=t.data;i<n.length;i++){var s=n[i];this.dynamicTextVerticeLoaded({data:s.data,tag:s.tag,XE:s.XE})}},yi.prototype.Ia=function(){this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},yi.prototype.bB=function(t,i,n){i={zoom:i.zoom,projectionId:i.projectionId,mH:Y.Support.mH,offlineServer:this.u0},this.KH._B(t,i,n)},yi.prototype.cP=function(){for(var t,i=this.map.getLayers(),n=0;n<i.length;n++)if("AMap.Buildings"===(s=i[n]).CLASS_NAME&&!s.getState().u$){t=s;break}if(!t)for(var s,n=0;n<i.length;n++)if("AMap.Buildings"===(s=i[n]).CLASS_NAME){t=s;break}return t},yi.prototype.ma=function(t,i){var n=new RegExp(/\{(\w|\,)+\}/g);if(n.test(this.Be)){var s=this.Be.match(n)[0].replace(/[\{|\}]/g,"").split(",");return this.Be.replace(n,s[(t+i)%4])}return this.Be},yi.prototype.AD=function(){if(this.u0&&Array.isArray(this.u0)){var t=this.u0.length,i=this.u0[this.$D%t];return this.$D=(this.$D+1)%t,i+"mapdata/"}var n=new RegExp(/\{(\w|\,)+\}/g),s=this.Be.match(n)[0].replace(/[\{|\}]/g,"").split(","),t=s.length,i=this.Be.replace(n,s[this.$D%t]);return this.$D=(this.$D+1)%t,i},yi.prototype.ha=function(t,i,n){void 0===n&&(n=!1);var s=[t[0],t[3]],e=[t[2],t[1]],t=this.Ga(s,i),s=this.Ga(e,i),e=t[0],r=t[1],h=s[0],o=s[1];if(n)return{ja:e,Fa:r,Oa:h,Ea:o,z:i};this.Pa={ja:e,Fa:r,Oa:h,Ea:o,z:i};for(var a=[],u=e;u<=h;u+=1)for(var f=r;f<=o;f+=1)a.push(new Y.ca(i,u,f));return this.Da(a),a},yi.prototype.da=function(t,i,n,s){var e=[3,6,8,10,12,15],r=this.ra(t.optimalZoom);if(this.Za)for(var h=Math.min(14,r+3),o=r+1;n.length&&o<=h;o+=1)if(-1!==e.indexOf(o)){for(var a=o-r,u=[],f=[],c=n.length-1;0<=c;--c)for(var l=n[c].x<<a,d=n[c].y<<a,v=1<<a;0<=v;--v)for(var p=1<<a;0<=p;--p){var m=new Y.ca(o,this.fa(l+v,o),d+p),y=new Y.ca(o,l+v,d+p);((k=this.ua.getTile(m,!0))&&k.status===Y.TileState.LOADED?f:u).push(y)}f.length&&i.push.apply(i,f),n=u}if(this.qa)for(var b=this.xt[0],o=r-1;n.length&&b<=o;--o)if(-1!==e.indexOf(o)){for(var f=[],u=[],g={},c=n.length-1;0<=c;--c){var k,M=n[c],a=o,w=M.z-a,v=M.x>>w,p=M.y>>w;g[M=(m=new Y.ca(a,v,p)).key]||(w=new Y.ca(a,this.fa(v,a),p),y=new Y.ca(a,v,p),k=this.ua.getTile(w,!0),g[M]=!0,(k&&k.status===Y.TileState.LOADED?f:u).push(y))}f.length&&i.push.apply(i,f),n=u}return i},yi.prototype.Da=function(t){var e,r,h;t.length&&(e=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<e-t.z)-r,s=(t.y<<e-t.z)-h;return n*n+s*s<=(t=(i.x<<e-i.z)-r)*t+(i=(i.y<<e-i.z)-h)*i?-1:1}))},yi.prototype.Ga=function(t,i){var n=Math.pow(2,i),i=180/n;return[Math.floor(t[0]/(360/n))+n/2,n/2-Math.ceil(t[1]/i)]},yi.prototype.fa=function(t,i){for(var n=1<<(i=i||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},yi.prototype.sD=function(){var e,r,h=this;this.map.bZ.dynamic.get("_preloadNebulaIcons")||(this.map.bZ.dynamic.set("_preloadNebulaIcons",!0),e=this.hD,(r=this.z_).loadImages(e,{type:"icon",imageBitmap:Y.Support.imageBitmap,cb:function(){for(var t=[],i=0;i<e.length;i++){var n=e[i],s=r.getImage(n);t.push({img:s.img,name:n,hv:i,width:s.width,height:s.height})}h.map.so.sv(t)}}))},yi.prototype.PE=function(t,i){for(var n=0,s=t;n<s.length;n++){var e=s[n].split(",").slice(0,3).join(",");(e=this.ua.xf(e))&&(e.region=i)}},yi.prototype.UE=function(t,i){void 0===t&&(t=[]);var n=[];if(10<=i){for(var s=0,e=t;s<e.length;s++){var r=e[s];"china"!==r.region&&"oversea"!==r.region||n.push(r)}return n}return t},yi.prototype.jE=function(t){for(var i=!!t.length,n=0,s=t;n<s.length;n++){var e=s[n].data;if(i)for(var r=0,h=e;r<h.length;r++){var o=h[r];if(!(i=i&&!!o.Ta))break}}return i},yi),building:ci,sky:_t,mask:Zt,inner:oi,image:pt,custom:zr,gl_custom:Wt,raster:Mt,overlay:St,labelsLayer:bt,vectorTile:It,districtVectorTile:Et,mapboxVectorTile:jt,indoor:F,mapbox:Ht,vectortraffic:ni},gi=(ki.addSource=function(t,i){bi[t]||(bi[t]=i)},ki.prototype.addSource=function(t,i,n){return("nebula"===t.id||"indoor"===t.id)&&this.Yh[t.id]||(this.Yh[t.id]||(this.Yh[t.id]=new bi[t.type](t,i,this.map,n),n.source=this.Yh[t.id])),this.Yh[t.id]},ki.prototype.getSource=function(t){return this.Yh[t]},ki.prototype.Xh=function(t){delete this.Yh[t]},ki.prototype.getData=function(t,i,n){return this.Yh[t].getData(i,n)},ki.prototype.loadData=function(t,i,n){for(var s=0,e=i.getLayers()||[];s<e.length;s++){var h=(r=e[s]).getOptions(),r=r.getSource();Y.Util.dS(i.getZoom(),h.zooms)&&r&&h.visible&&0<h.opacity&&r.loadData(t,n,function(){i.setNeedUpdate(!0)},i,this)}},ki.prototype.destroy=function(){for(var t in this.Yh)this.Yh[t]&&this.Yh[t].destroy();this.Yh={}},ki.prototype.UH=function(t){for(var i in this.Yh)this.Yh[i]&&this.Yh[i].UH&&this.Yh[i].UH(t)},ki.prototype.i0=function(t,i){if(this.Yh[t])return this.Yh[t].ua.getTile(i,!1)},ki.prototype.t0=function(t){var i=this.i0(Y.n0.nebulaLabel,t);(t=15===t.z?this.i0(Y.n0.nebula,t.s0(14)):this.i0(Y.n0.nebula,t))&&i&&i.KE(t.data)},Y.dZ([Y.pZ("SourceManager")],ki));function ki(t){this.map=t,this.Yh={}}var Mi,Wt=(Mi=Y.Event,Y.Ei(wi,Mi),wi.prototype.onAdd=function(){},wi.prototype.v$=function(){},wi.prototype.Hh=function(t){this.uo=t},wi.prototype.Do=function(t){return this.Jh=t,this.Jh},wi.prototype.setMap=function(t){var i,n=this;null===t&&this.map?this.map.removeLayer(this):(this.map=t)&&(i=t.getLayers(),Y.find(i,function(t){return t.getLayerConfig().id===n.getLayerConfig().id})||t.addLayer(this))},wi.prototype.Kh=function(t){var i=this;(this.source=t)&&this.source.on("complete",function(){i.emit("complete")})},wi.prototype.setzIndex=function(t){this.Qh=t,this.map&&this.map.setNeedUpdate(!0)},wi.prototype.setOpacity=function(t){this.tl=t,this.map&&this.map.setNeedUpdate(!0)},wi.prototype.getOpacity=function(){return this.tl},wi.prototype.getSource=function(){if(this.uo)return this.uo.getSource(this.co())},wi.prototype.getzIndex=function(){return this.getLayerConfig().zIndex},wi.prototype.getMap=function(){return this.map},wi.prototype.getRender=function(){return this.Jh},wi.prototype.getLayerConfig=function(){return{id:this._id,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this.il,createTile:void 0,rejectMapMask:this._rejectMapMask}},wi.prototype.getOptions=function(){var t=this.getLayerConfig(),i=this._opts||{};return Y.assign({},i,t)},wi.prototype.getZooms=function(){return this.xt},wi.prototype.setZooms=function(t){this.xt=t,this.map&&this.map.setNeedUpdate(!0)},wi.prototype.getVisible=function(){return this.il},wi.prototype.beforeRender=function(){},wi.prototype.afterRender=function(){},wi.prototype.get=function(t){return this.getOptions()[t]},wi.prototype.vi=function(t){return null},wi.prototype.lo=function(){if(this.source)return this.source.lo()},wi.prototype.T$=function(){return this._id},wi.prototype.show=function(){this.il=!0,this.map&&this.map.setNeedUpdate(!0)},wi.prototype.hide=function(){this.il=!1,this.map&&this.map.setNeedUpdate(!0)},wi.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},wi.prototype.onCreated=function(){this.map&&this.map.addLayer(this)},Y.dZ([Y.pZ("Layer")],wi));function wi(t){void 0===t&&(t={});var i=Mi.call(this)||this;return i.el="AMap.Layer",i.CLASS_NAME="AMap.Layer",i.hS=Y.Util.stamp(i),i.il=!0,i.tl=1,i.xt=Y.zoomRange,i._id="layer",i.nl=!0,i._id="layer_"+Y.Util.uuid(),i.xt=t.zooms||Y.zoomRange,i.tl=void 0===t.opacity?1:t.opacity,i.Qh=t.zIndex||1,i._rejectMapMask=void 0!==t.rejectMapMask&&t.rejectMapMask,i.il=void 0===t.visible||t.visible,i.AF=void 0!==t.depthTest&&Boolean(t.depthTest),i.IF=void 0!==t.ce&&Boolean(t.ce),i.wl=t.cacheSize,i.map=t&&t.map||null,i._opts=t,i}var xi,Ai=(xi=Wt,Y.Ei(zi,xi),zi.prototype.getState=function(){return{ol:!0,al:!0,visible:this.il,opacity:this.tl,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF,cacheSize:this.wl}},zi.prototype.getLayerConfig=function(){var t=xi.prototype.getLayerConfig.call(this);return t.mapNumber="GS(2021)6375",t},zi.prototype.getSourceConfig=function(){return{id:"nebula",type:"nebula",tileUrl:AMap.getConfig().protocol+(Y.Support.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:Y.zoomRange}},zi.prototype.co=function(){return"nebula"},zi.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},zi.prototype.show=function(){xi.prototype.show.call(this);var t=this.iP();t&&t.show(),(t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer"))&&t.oP()&&t.show()},zi.prototype.hide=function(){xi.prototype.hide.call(this);var t=this.iP();t&&t.hide(),this.rP()},zi.prototype.v$=function(){xi.prototype.v$.call(this);var t=this.iP();t&&this.map.removeLayer(t),this.rP()},zi.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).setTileCacheSize(this.wl)},zi.prototype.rP=function(){var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},zi.prototype.iP=function(){var t;if(this.map)for(var i=null===(t=this.map)||void 0===t?void 0:t.getLayers(),n=0;n<i.length;n++){var s=i[n];if("AMap.Buildings"===s.CLASS_NAME&&s.getState().u$)return s}},zi);function zi(){var t=null!==xi&&xi.apply(this,arguments)||this;return t.CLASS_NAME="AMap.NebulaLayer",t}var Ci,Si="inner.labelsLayer",Ti="inner",Ii=(Ci=Wt,Y.Ei(Di,Ci),Di.prototype.getState=function(){return Y.assign({},{layer:this,rejectMapMask:this._rejectMapMask},Ci.prototype.getLayerConfig.call(this))},Di.prototype.getSourceConfig=function(){return{id:Ti,type:Ti,tileUrl:AMap.getConfig().protocol+(Y.Support.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:Y.zoomRange}},Di.prototype.co=function(){return Ti},Di.prototype.sl=function(){this.source.reload(),this.Jh&&this.Jh.reset()},Di.prototype.vi=function(t,i){return void 0===i&&(i=!1),this.fz?this.fz.vi(t,this.hS,i):null},Di.prototype.Do=function(t){return t=Ci.prototype.Do.call(this,t),this.map&&this.uz(this.map),t},Di.prototype.aP=function(){if(t=this.map){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),t=t&&t.getLayerByClass("AMap.NebulaLayer"),i=i&&i.getVisible(),t=t&&t.getVisible();return!i&&!t}return!1},Di.prototype.oP=function(){var t=this.map;if(t){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),n=t&&t.getLayerByClass("AMap.NebulaLayer"),i=i&&i.getVisible(),n=n&&n.getVisible();return t.showLabel&&(i||n)}return!1},Di.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh),this.source&&this.source.destroy&&(this.source.destroy(),delete this.source)},Di.prototype.uz=function(t){(this.fz=t.fS()).add(this)},Di);function Di(t){var i=Ci.call(this,t=void 0===t?{}:t)||this;return i.CLASS_NAME="AMap.Inner.LabelsLayer",i._opts={id:Si,type:Si,opacity:1,visible:1,collision:!0,allowCollision:!1},i._opts=Y.assign({},i._opts,t),i.Qh=t.labelzIndex||100,i.il=!1!==t.showLabel,i.tl=void 0===t.opacity?1:t.opacity,i}var Oi,Mt=(Oi=Wt,Y.Ei(Ei,Oi),Ei.prototype.getState=function(){return{ol:!0,al:!0,visible:this.il,opacity:this.tl,layer:this,zooms:this.xt,zIndex:this.Qh,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF,HY:this.rX()}},Ei.prototype.getLayerConfig=function(){var t=Oi.prototype.getLayerConfig.call(this);return t.mapNumber="",t},Ei.prototype.getSourceConfig=function(){return{id:"vectortraffic",type:"vectortraffic",tileUrl:"",tileSize:256,zooms:this.xt}},Ei.prototype.co=function(){return"vectortraffic"},Ei.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Ei.prototype.onAdd=function(){var t=this;this.map.on("styleChanged",this.reload,this),this.dl&&(this.iT=setInterval(function(){t.reload()},1e3*this.vl))},Ei.prototype.v$=function(){this.map.off("styleChanged",this.reload,this),clearInterval(this.iT),delete this.iT},Ei.prototype.reload=function(){var t=this.getSource();t&&this.map&&(t.reload(),this.map.setNeedUpdate(!0))},Ei.prototype.rX=function(){var t,i=["fff93a43","fffcac19","ff20a962","ff83171c","ffadadad"];!this.map||(t=this.map.mapStyle.vn.MS("traffic"))&&t.multiFillColors&&((t=t.multiFillColors).congested&&(i[0]=t.congested),t.slow&&(i[1]=t.slow),t.smooth&&(i[2]=t.smooth),t.seriousCongested&&(i[3]=t.seriousCongested),t.unknown&&(i[4]=t.unknown));for(var n=0,s=i.length;n<s;n++)i[n]=Y.Util.qg(i[n]);return i},Ei);function Ei(){var t=null!==Oi&&Oi.apply(this,arguments)||this;return t.vl=60,t.dl=!0,t}var Ri,Pi={opacity:1,visible:!0,zIndex:4,zooms:[7,Y.zoomRange[1]],dataZooms:[7,17],interval:60,ml:!0,depthTest:!1,rZ:1},St=(Ri=Mt,Y.Ei(ji,Ri),ji);function ji(t){var i=this;return(t=void 0===t?Pi:t).id=Y.Util.uuid(),t.opacity=(void 0===t.opacity?Pi:t).opacity,t.visible=(void 0===t.visible?Pi:t).visible,t.zIndex=(void 0===t.zIndex?Pi:t).zIndex,t.zooms=(void 0===t.zooms?Pi:t).zooms,t.interval=(void 0===t.interval?Pi:t).interval,t.ml=(void 0===t.ml?Pi:t).ml,t.depthTest=(void 0===t.depthTest?Pi:t).depthTest,t.rZ=(void 0===t.rZ?Pi:t).rZ,(i=Ri.call(this,t)||this).vl=Math.max(30,t.interval||i.vl),i.dl=void 0!==t.ml&&i.dl,i.CLASS_NAME="AMap.TileLayer.Traffic",i.onCreated(),i}var Bi,bt=(Bi=Wt,Y.Ei(Fi,Bi),Fi.prototype.getSourceConfig=function(){return{id:this._id||"tile",tileUrl:this.Be||"",type:"raster",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[7,17],projection:this.hl||"EPS3857"}},Fi.prototype.co=function(){return this._id},Fi.prototype.getState=function(){return{visible:this.il,opacity:this.tl,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF,detectRetina:this.yl}},Fi.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).setTileCacheSize(this.wl)},Fi);function Fi(t){var i=Bi.call(this,t)||this;return i.CLASS_NAME="AMap.RasterLayer",i.Be=t.tileUrl,i.xt=t.zooms||Y.zoomRange,i.Qs=t.dataZooms,i.tl=void 0===t.opacity?1:t.opacity,i.Qh=t.zIndex||1,i.il=void 0===t.visible||t.visible,i.Xa=t.tileSize||256,i.hl=t.projection,i.AF=void 0!==t.depthTest&&Boolean(t.depthTest),i.yl=void 0===t.detectRetina||Boolean(t.detectRetina),i.wl=t.cacheSize,i}var Wi,Gi={id:"tile_"+Y.Util.uuid(),tileUrl:void 0,zooms:Y.zoomRange,dataZooms:[2,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},Ni={id:"satellite"+Y.Util.uuid(),tileUrl:"http://webst0{1,2,3,4}.is.autonavi.com/appmaptile?style=6&x=[x]&y=[y]&z=[z]",zooms:Y.zoomRange,dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},_i={id:"traffic"+Y.Util.uuid(),tileUrl:"http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&zoom=[z]&x=[x]&y=[y]",zooms:[7,Y.zoomRange[1]],dataZooms:[7,17],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:4,getTileUrl:function(t,i,n){return AMap.getConfig().protocol+"://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0\n&t=1&zoom="+(17-n)+"&x="+t+"&y="+i}},Ui={id:"roadnet"+Y.Util.uuid(),tileUrl:"http://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&lang=zh_cn&size=1&scl=1&style=8&ltype=11",zooms:Y.zoomRange,dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},Yi={id:"flexible"+Y.Util.uuid(),zooms:Y.zoomRange,dataZooms:Y.zoomRange,opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},Zi={id:"wms"+Y.Util.uuid(),url:"",zooms:Y.zoomRange,dataZooms:Y.zoomRange,opacity:1,tileSize:512,visible:!0,projection:"EPSG:3857",zIndex:3},Xi=(Wi=bt,Y.Ei(Ji,Wi),Ji.prototype.setTileUrl=function(t){t=0===(t=t.replace(/^\/\//,"").replace("http://","")).indexOf("http")?t:AMap.getConfig().protocol+"://"+t,this.Be=t,this.reload()},Ji.prototype.getTileUrl=function(){return this.Be},Ji.prototype.getLayerConfig=function(){var t="";return this.Be!==AMap.getConfig().qT&&this.Be!==AMap.getConfig().YT||(t="GS(2021)6375"),{id:this._id,tileUrl:this.Be,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this.il,getTileUrl:this.ll,mapNumber:t}},Ji.prototype.reload=function(){var t=this.getSource();t&&(t.setTileUrl(this.Be),t.reload(),t.Fo(!1),this.map&&this.map.setNeedUpdate(!0))},Y.dZ([Y.pZ("TileLayer")],Ji));function Ji(t){var i=this,n={};return(t=void 0===t?Gi:t).getTileUrl&&"string"==typeof t.getTileUrl&&(t.tileUrl=t.getTileUrl,delete t.getTileUrl),n.tileUrl=void 0===t.tileUrl?AMap.getConfig().y_:t.tileUrl,n.tileUrl&&(n.tileUrl=n.tileUrl.replace(/^\/\//,"").replace("http://","")),n.tileUrl=n.tileUrl&&0===n.tileUrl.indexOf("http")?n.tileUrl:AMap.getConfig().protocol+"://"+n.tileUrl,n.id=t.id||"tile_"+Y.Util.uuid(),n.tileSize=t.tileSize||Gi.tileSize,"d"===Y.Support.baseRender&&Y.Support.$e&&(Gi.dataZooms=[2,20]),n.dataZooms=t.dataZooms||Gi.dataZooms,n.zooms=t.zooms||Gi.zooms,n.projection=t.projection||Gi.projection,n.opacity=(void 0===t.opacity?Gi:t).opacity,n.visible=(void 0===t.visible?Gi:t).visible,n.zIndex=(void 0===t.zIndex?Gi:t).zIndex,n.rejectMapMask=t.rejectMapMask,n.depthTest=void 0!==t.depthTest&&Boolean(t.depthTest),n.map=t.map,n.detectRetina=void 0!==t.detectRetina&&t.detectRetina,n.cacheSize=t.cacheSize,(i=Wi.call(this,n)||this).type=t.type||"base",i.ll=t.getTileUrl,i.CLASS_NAME="AMap.TileLayer",i.onCreated(),i}var Hi,It=(Hi=Xi,Y.Ei(Vi,Hi),Vi.prototype.getLayerConfig=function(){var t=Hi.prototype.getLayerConfig.call(this);return t.mapNumber="GS(2021)4122",t.OY=!0,t},Vi);function Vi(t){var i=this;return(t=void 0===t?Ni:t).id="satellite_"+Y.Util.uuid(),t.tileUrl=Ni.tileUrl,t.zooms=(void 0===t.zooms?Ni:t).zooms,t.opacity=(void 0===t.opacity?Ni:t).opacity,t.visible=(void 0===t.visible?Ni:t).visible,t.zIndex=(void 0===t.zIndex?Ni:t).zIndex,(i=Hi.call(this,t)||this).CLASS_NAME="AMap.TileLayer.Satellite",i.type=t.type||"base",i.onCreated(),i}var qi,Et=(qi=Xi,Y.Ei(Qi,qi),Qi.prototype.ul=function(){clearInterval(this.cl)},Qi.prototype.pl=function(){var t=this;this.dl&&0<this.vl&&(this.cl=setInterval(function(){t.reload()},1e3*this.vl))},Qi);function Qi(t){var i=this;return(t=void 0===t?_i:t).id="traffic_"+Y.Util.uuid(),t.tileUrl=_i.tileUrl,t.zooms=(void 0===t.zooms?_i:t).zooms,t.opacity=(void 0===t.opacity?_i:t).opacity,t.visible=(void 0===t.visible?_i:t).visible,t.zIndex=(void 0===t.zIndex?_i:t).zIndex,t.getTileUrl=t.getTileUrl||_i.getTileUrl,(i=qi.call(this,t)||this).vl=Math.max(30,t.interval||60),i.dl=void 0===t.ml||t.ml,i.CLASS_NAME="AMap.TileLayer.Traffic",i.type=t.type||"overlay",i.onCreated(),i.pl(),i}var Ki,jt=(Ki=Xi,Y.Ei($i,Ki),$i.prototype.show=function(){Ki.prototype.show.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.oP()&&t.show()},$i.prototype.hide=function(){Ki.prototype.hide.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},$i.prototype.v$=function(){Ki.prototype.v$.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},$i);function $i(t){var i,n=this;return(t=void 0===t?Ui:t).id="roadNet_"+Y.Util.uuid(),t.tileUrl=Ui.tileUrl,"d"===Y.Support.baseRender&&(t.tileUrl=null===(i=t.tileUrl)||void 0===i?void 0:i.replace("&ltype=11","")),t.zooms=(void 0===t.zooms?Ui:t).zooms,t.opacity=(void 0===t.opacity?Ui:t).opacity,t.visible=(void 0===t.visible?Ui:t).visible,t.zIndex=(void 0===t.zIndex?Ui:t).zIndex,(n=Ki.call(this,t)||this).CLASS_NAME="AMap.TileLayer.RoadNet",n.type=t.type||"overlay",n.onCreated(),n}var tn,F=(tn=Xi,Y.Ei(nn,tn),nn.prototype.getLayerConfig=function(){return{id:this._id,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this.il,createTile:this.bl,cacheSize:this.wl,getTileUrl:this.ll,rejectMapMask:this._rejectMapMask}},nn.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).setTileCacheSize(this.wl)},nn);function nn(t){var i=this;return(t=void 0===t?Yi:t).id=Yi.id,t.id="flexible_"+Y.Util.uuid(),t.zooms=(void 0===t.zooms?Yi:t).zooms,t.opacity=(void 0===t.opacity?Yi:t).opacity,t.visible=(void 0===t.visible?Yi:t).visible,t.zIndex=(void 0===t.zIndex?Yi:t).zIndex,(i=tn.call(this,t)||this).bl=t.createTile,i.CLASS_NAME="AMap.TileLayer.Flexible",i.type=t.type||"base",i.onCreated(),i}var sn,Ht=(sn=Xi,Y.Ei(en,sn),en.prototype._l=function(){this.kl.TileMatrixSet=this.kl.TileMatrixSet||"EPSG:3857",this.kl.Request="GetTile",this.kl.Service="WMTS",this.kl.Format=this.kl.Format||"image/png",this.Be=this.Ml+"?"+Y.Util.join(this.kl,"&"),this.map&&this.map.setNeedUpdate(!0)},en.prototype.Rl=function(t){this.kl=Y.assign({},t),this._l()},en.prototype.zl=function(){return this.kl},en.prototype.Sl=function(){return this.Ml},en.prototype.Cl=function(t){this.Ml=t,this._l()},en.prototype.getLayerConfig=function(){return{id:this._id,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this.il,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},en);function en(t){var o=this;return(t=void 0===t?Yi:t).id="wmts_"+Y.Util.uuid(),t.cacheSize=Yi.cacheSize,t.zooms=(void 0===t.zooms?Yi:t).zooms,t.opacity=(void 0===t.opacity?Yi:t).opacity,t.visible=(void 0===t.visible?Yi:t).visible,t.zIndex=(void 0===t.zIndex?Yi:t).zIndex,(o=sn.call(this,t)||this).kl=t.params||{},o.CLASS_NAME="AMap.TileLayer.WMTS",o.type=t.type||"base",o.Be=t.url,o.Ml=t.url,o.bl=function(t,i,n,s,e){var r,h=document.createElement("img");"w"===(null===(r=o.map)||void 0===r?void 0:r.baseRender)&&(h.crossOrigin="anonymous"),h.onload=function(){s(h)},h.onerror=function(){e(h)},h.src=o.Be+"&TileMatrix="+n+"&TileRow="+i+"&TileCol="+t},o._l(),o.onCreated(),o}var rn,ni=(rn=Xi,Y.Ei(hn,rn),hn.prototype._l=function(){this.kl.WIDTH=this.Xa,this.kl.HEIGHT=this.Xa,this.kl.CRS=this.kl.CRS||"EPSG:3857",this.kl.REQUEST="GetMap",this.kl.SERVICE="WMS",this.kl.FORMAT=this.kl.FORMAT||"image/png",this.kl.TRANSPARENT=void 0===this.kl.TRANSPARENT?"true":this.kl.TRANSPARENT,delete this.kl.BBOX,this.Be=this.Ml+"?"+Y.Util.join(this.kl,"&")},hn.prototype.Rl=function(t){this.kl=Y.assign({},t),this._l()},hn.prototype.zl=function(){return this.kl},hn.prototype.Sl=function(){return this.Ml},hn.prototype.Cl=function(t){this.Ml=t,this._l()},hn.prototype.getLayerConfig=function(){return{id:this._id,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this.il,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},hn);function hn(t){var o=this;return(t=void 0===t?Zi:t).id="wms_"+Y.Util.uuid(),t.cacheSize=Yi.cacheSize,t.zooms=(void 0===t.zooms?Yi:t).zooms,t.opacity=(void 0===t.opacity?Yi:t).opacity,t.visible=(void 0===t.visible?Yi:t).visible,t.zIndex=(void 0===t.zIndex?Yi:t).zIndex,(o=rn.call(this,t)||this).Be=t.url,o.Ml=t.url,o.kl=t.params||{},o.CLASS_NAME="AMap.TileLayer.WMS",o.type=t.type||"base",o.bl=function(t,i,n,s,e){var n=[(r=2*Y.x_/256/Math.pow(2,n)*o.Xa)*t-Y.x_,Y.x_-r*(i+1)],r=[r*(t+1)-Y.x_,Y.x_-r*i],h=document.createElement("img");"w"===(null===(i=o.map)||void 0===i?void 0:i.baseRender)&&(h.crossOrigin="anonymous"),h.onload=function(){s(h)},h.onerror=function(){e(h)},o._l(),h.src=o.Be+"&BBOX="+n+","+r},o.bl=o.bl.bind(o),o.onCreated(),o}function on(){this.Wl=!0,this._position=Y.Dl(),Y.Pl(this._position,0,0,10),this.Gl=Y.Dl(),Y.Pl(this.Gl,0,0,-1),this.jl=Y.Dl(),Y.Pl(this.jl,0,0,-1),this.El=Y.Dl(),Y.Pl(this.El,0,1,0),this.Nl=Y.Zl(),this.Fl=Y.Il(),this.Bl=Y.Il(),this.ql=Y.Il(),this.Yl=Y.Il()}Xi.RoadNet=jt,Xi.Satellite=It,Xi.Traffic="d"===Y.Support.baseRender?Et:St,Xi.Flexible=F,Xi.WMTS=Ht,Xi.WMS=ni,on.prototype.lookAt=function(t){var i,n,s,e,r,h,o,a,u,f=Y.Il(),c=Y.Dl();Y.Pl(this.jl,t[0],t[0],t[2]),c=Y.Ol(c,this.Fl),f=Y.lookAt(f,c,t,this.El),i=this.Nl,e=f[0],r=f[4],h=f[8],o=f[1],a=f[5],u=f[9],c=f[2],t=f[6],0<(n=e+a+(f=f[10]))?(s=.5/Math.sqrt(n+1),i[3]=.25/s,i[0]=(t-u)*s,i[1]=(h-c)*s,i[2]=(o-r)*s):a<e&&f<e?(s=2*Math.sqrt(1+e-a-f),i[3]=(t-u)/s,i[0]=.25*s,i[1]=(r+o)/s,i[2]=(h+c)/s):f<a?(s=2*Math.sqrt(1+a-e-f),i[3]=(h-c)/s,i[0]=(r+o)/s,i[1]=.25*s,i[2]=(u+t)/s):(s=2*Math.sqrt(1+f-e-a),i[3]=(o-r)/s,i[0]=(h+c)/s,i[1]=(u+t)/s,i[2]=.25*s),this.$l()},on.prototype.setPosition=function(t){Y.Pl(this._position,t[0],t[1],t[2]),this.$l()},on.prototype.getPosition=function(){return this._position},on.prototype.$l=function(){var u,f,c=this.Fl,t=this._position,i=this.Nl,n=c,s=i[0],e=i[1],r=i[2],h=i[3],o=s*(u=s+s),a=s*(f=e+e);i=s*(c=r+r),s=e*f,e*=c,r*=c,u*=h,f*=h,c*=h,n[0]=1-(s+r),n[1]=a+c,n[2]=i-f,n[3]=0,n[4]=a-c,n[5]=1-(o+r),n[6]=e+u,n[7]=0,n[8]=i+f,n[9]=e-u,n[10]=1-(o+s),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,Y.Ul(this.Bl,this.Fl)};var an,un=(an=Mt=on,Y.Ei(fn,an),fn.prototype.Vl=function(){var t=Y.Il();return Y.multiply(t,this.ql,this.Xl),Y.multiply(t,t,this.Bl),t},fn.prototype.setOptions=function(t,i,n,s,e,r){this.Hl=void 0!==t?t:-1,this.Jl=void 0!==i?i:1,this.Kl=void 0!==n?n:1,this.Ql=void 0!==s?s:-1,this.tu=void 0!==e?e:.1,this.iu=void 0!==r?r:1,this.eu()},fn.prototype.scale=function(t){void 0===t&&(t=1);var i=Y.Il();i.set([t,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]),Y.multiply(this.Xl,this.Xl,i)},fn.prototype.setRotation=function(t){var i=Y.Il(),n=(t-this.nu)/180*Math.PI;0!==(this.nu=t)&&(i.set([Math.cos(n),-Math.sin(n),0,0,Math.sin(n),Math.cos(n),0,0,0,0,1,0,0,0,0,1]),Y.multiply(this.Xl,this.Xl,i))},fn.prototype.kt=function(t,i,n){var s,e,r,h,o,a;void 0!==t&&(a=t.Rt,s=t.zt,o=t.center,e=t.scale,r=Y.Il(),h=Y.Il(),t=Y.Il(),r.set([1,0,0,0,0,1,0,0,0,0,1,0,s[0],s[1],0,1]),h.set([e,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]),t.set([1,0,0,0,0,1,0,0,0,0,1,0,-a[0],-a[1],0,1]),Y.multiply(r,r,h),Y.multiply(r,r,t),Y.multiply(this.Xl,this.Xl,r),a=[(o=Y.ProjectionManager.getProjection(i).project(o[0],o[1]))[0]-s[0]+a[0],o[1]-s[1]+a[1]],n(Y.ProjectionManager.getProjection(i).unproject(a[0],a[1])))},fn.prototype.Cu=function(){return this.Yl},fn.prototype.lB=function(){return{left:this.Hl,right:this.Jl,top:this.Kl,bottom:this.Ql,rotation:this.nu,far:this.iu,near:this.tu,position:this._position}},fn.prototype.eu=function(){var t=(this.Jl-this.Hl)/(2*this.bt),i=(this.Kl-this.Ql)/(2*this.bt),n=(this.Jl+this.Hl)/2,s=(this.Kl+this.Ql)/2;Y.ou(this.ql,n-t,n+t,s-i,s+i,this.tu,this.iu),Y.Ul(this.Yl,this.ql)},fn);function fn(t,i,n,s,e,r){var h=an.call(this)||this;return h.type="OthoCamera",h.bt=1,h.nu=0,h.Xl=Y.Il(),h.Hl=void 0!==t?t:-1,h.Jl=void 0!==i?i:1,h.Kl=void 0!==n?n:1,h.Ql=void 0!==s?s:-1,h.tu=void 0!==e?e:.1,h.iu=void 0!==r?r:1,h.eu(),h}var cn,ln=(cn=Y.Event,Y.Ei(dn,cn),dn.prototype.au=function(){return this.su},dn.prototype.ru=function(){return Y.ProjectionManager.getProjection(this.su)},dn.prototype.setOptions=function(t,i){void 0===i&&(i=!0),t.projectionId&&(this.su=t.projectionId);var n=Y.ProjectionManager.getProjection(this.su);if(t.center&&(this.hu=t.center,s=this.lu(n),e=n.unproject(s[0],s[1]),this.hu=e,Y.Pl(this.uu,s[0],s[1],0),this.cu.setPosition(this.fu())),void 0!==t.zoom&&(t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]),this.pu=Math.pow(2,t.zoom-this.bt),this.bt=t.zoom,this.du=n.getResolution(this.bt),this.vu(),this.cu.setPosition(this.fu())),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu()),void 0!==t.rotation&&"w"===Y.Support.baseRender&&(360<t.rotation?t.rotation-=360:t.rotation<-360&&(t.rotation+=360),this.cu.setRotation(t.rotation),this.nu=t.rotation),t.kt){if(!this.map.getStatus().zoomEnable)return;var s,e,r=t.kt.Mt;this.mu=t.kt,r<=this.map.getZooms()[1]&&r>=this.map.getZooms()[0]&&(this.bt=r,this.du=n.getResolution(this.bt),r=(t=this.mu).Rt,t=t.zt,(s=this.lu(n))[0]=s[0]-t[0]+r[0],s[1]=s[1]-t[1]+r[1],e=n.unproject(s[0],s[1]),this.hu=e,Y.Pl(this.uu,s[0],s[1],0),this.vu(),this.cu.setPosition(this.fu()),this.mu=void 0)}!this.h_()&&i&&this.map.setNeedUpdate(!0)},dn.prototype.getOptions=function(){return{zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:0}},dn.prototype.getStatus=function(){var t=Y.Zl(),i=Y.Zl(),n=Y.Zl();this.xu(t,i,n);var s=Y.Util.getOptimalZoom(this.bt);return{pitch:this.Pu,size:this._size,rotation:this.nu,zoom:this.bt,optimalZoom:s,resolution:this.du,optimalResolution:Y.ProjectionManager.getProjection(this.su).getResolution(s),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:n,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),viewMode:this.type,skyHeight:this.EF(),fov:60}},dn.prototype.bu=function(t){this.hu=[t[0],t[1]],t=Y.ProjectionManager.getProjection(this.su).project(this.hu[0],this.hu[1]),Y.Pl(this.uu,t[0],t[1],0)},dn.prototype.containerTolnglat=function(t,i,n){var s=this.getStatus(),e=s.centerCoord,r=s.rotation,h=Y.V[this.su].transform(e[0],e[1],n),h=0!==r?(s=r/180*Math.PI,e=t-this._size[0]/2,n=-(i-this._size[1]/2),r=Math.sqrt(e*e+n*n),s=Math.atan(e/n)-s,n<0&&(s+=Math.PI),n=r*Math.sin(s),s=r*Math.cos(s),[h[0]+n*this.du,h[1]-s*this.du]):[h[0]+(t-this._size[0]/2)*this.du,h[1]+(i-this._size[1]/2)*this.du];return h=Y.V[this.su].Xs(h[0],h[1]),(h=Y.ProjectionManager.getProjection(this.su).unproject(h[0],h[1]))[0]=180<h[0]?h[0]-360:h[0]<-180?h[0]+360:h[0],h},dn.prototype.lnglatToContainer=function(t,i,n,s){s=s||this.bt;var r=(e=this.getStatus()).rotation,e=e.centerCoord,i=[(i=Y.ProjectionManager.getProjection(this.su).project(t,i))[0],i[1]],r={center:e,rotation:r,size:this._size};return Y.V[this.su].wu(i[0],i[1],s,r)},dn.prototype._u=function(t,i){var n=this.getStatus(),s=(n.optimalZoom,n.zoom),e=n.rotation,e={center:n.centerCoord,rotation:e,size:this._size};return Y.V[this.su].wu(t,i,s,e)},dn.prototype.ku=function(t,i){var n=this.getStatus(),t=(n.optimalZoom,n.centerCoord,n.zoom,n.rotation,this.containerTolnglat(t,i));return(i=Y.ProjectionManager.getProjection(this.su)).project.apply(i,t)},dn.prototype.h_=function(){return Y.Ru(this.Xl,this.cu.Vl())},dn.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},dn.prototype.EF=function(){return 1},dn.prototype.pz=function(){return this.cu},dn.prototype.xu=function(t,i,n){var s=this.nu/180*Math.PI,e=this._size,r=[(Math.abs(e[0]*Math.cos(s))+Math.abs(e[1]*Math.sin(s)))/2*this.du,(Math.abs(e[0]*Math.sin(s))+Math.abs(e[1]*Math.cos(s)))/2*this.du],h=Y.ProjectionManager.getProjection(this.su),o=this.uu[0]-r[0],a=this.uu[0]+r[0],e=this.uu[1]-r[1],s=this.uu[1]+r[1],r=h.unproject(o,e),h=h.unproject(a,s);return i[0]=o,i[1]=e,i[2]=a,i[3]=s,t[0]=r[0],t[1]=r[1],t[2]=h[0],t[3]=h[1],h=Y.V[this.su].transform(i[0],i[3]),i=Y.V[this.su].transform(i[2],i[1]),n[0]=h[0],n[1]=h[1],n[2]=i[0],n[3]=i[1],t},dn.prototype.vu=function(){var i=(t=this._size)[0]*this.du,t=t[1]*this.du;this.cu.setOptions(-i/2,i/2,t/2,-t/2,1,11e5)},dn.prototype.fu=function(){var t=Y.Dl();if(Y.Util.getOptimalZoom(this.bt)<Y.Ra)return Y.Pl(t,this.uu[0],this.uu[1],this.cz),t;var i=Y.lcs.getDeltaCoord([this.uu[0],this.uu[1]]);return Y.Pl(t,i[0],i[1],this.cz),t},dn.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},dn);function dn(t,i){var n=cn.call(this)||this;return n.type="2D",n.Pu=0,n.hu=[0,0],n.bt=12,n._size=[0,0],n.pu=1,n.nu=0,n.cu=new un(-1,1,1,-1,10,1e3),n.su="EPSG:3857",n.uu=Y.Dl(),n.cz=1e6,n.du=Y.ProjectionManager.getProjection(n.su).getResolution(12),n.Xl=Y.Il(),n.bt=void 0!==t.zoom?t.zoom:12,n.map=i,n.setOptions(t),n.vu(),n.Xl=n.cu.Vl(),n}var vn,pn=(vn=Mt,Y.Ei(mn,vn),mn.prototype.Vl=function(){var t=[];return Y.multiply(t,this.ql,this.zu),t},mn.prototype.Su=function(){return this.ql},mn.prototype.Cu=function(){return this.Yl},mn.prototype.Lu=function(){return this.zu},mn.prototype.Au=function(){return this.cu},mn.prototype.setOptions=function(t,i,n,s,e){void 0===t&&(t=[1,1]),void 0===n&&(n=1),void 0===s&&(s=1),void 0===e&&(e=10),this.Tu=this.Iu(i=void 0===i?60:i),this.tu=s,this.iu=e,this.Du=n,this._size=t,this.eu()},mn.prototype.setSize=function(t){this._size=t},mn.prototype.setPitch=function(t){this.Pu=void 0!==t?t:this.Pu;var i=this._size[1]/2/Math.tan(this.Tu/2),n=this.Iu(this.Pu),s=this.Iu(this.nu),e=i*Math.sin(n),t=this.jl[0]-e*Math.sin(s),s=this.jl[1]-e*Math.cos(s),n=i*Math.cos(n);Y.Pl(this._position,t,s,n),this.ju()},mn.prototype.setRotation=function(t){this.nu=void 0!==t?-t:this.nu;var i=this.Iu(this.nu),t=Math.sin(i),i=Math.cos(i);Y.Pl(this.El,t,i,0),this.Ou()},mn.prototype.Fu=function(t,i,n){Y.Pl(this.jl,t,i,n),this.ju()},mn.prototype.Ou=function(t,i,n){void 0!==t&&void 0!==i?(Y.Pl(this._position,t,i,void 0===n?this._position[2]:n),this.ju()):(n=this._size[1]/2/Math.tan(this.Tu/2),Y.Pl(this._position,this.jl[0],this.jl[1],n),this.setPitch())},mn.prototype.Eu=function(t){var i=this._size;this.cz=t||i[1]/2/Math.tan(this.Tu/2)||0,Y.Pl(this._position,this._position[0],this._position[1],this.cz),this.setPitch()},mn.prototype.Nu=function(t,i,n){Y.Pl(this.El,t=void 0===t?0:t,i=void 0===i?1:i,n=void 0===n?0:n),this.ju()},mn.prototype.dz=function(){return this.cz},mn.prototype.lB=function(){return{fov:this.Tu,target:this.jl,up:this.El,position:this._position,far:this.iu,near:this.tu}},mn.prototype.eu=function(){Y.perspective(this.ql,this.Tu,this.Du,this.tu,this.iu),Y.Ul(this.Yl,this.ql)},mn.prototype.ju=function(){Y.lookAt(this.zu,this._position,this.jl,this.El),Y.Ul(this.cu,this.zu)},mn.prototype.Iu=function(t){return t*Math.PI/180},mn);function mn(t,i,n,s,e){void 0===t&&(t=[1,1]),void 0===i&&(i=60),void 0===n&&(n=1),void 0===s&&(s=10),void 0===e&&(e=2e4);var r=vn.call(this)||this;return r.Wt="PerspectiveCamera",r.Pu=0,r.nu=0,r.cu=Y.Il(),r.zu=Y.Il(),r.cz=0,r.Tu=r.Iu(i),r.tu=s,r.iu=e,r.Du=n,Y.Pl(r.El,0,1,0),r._size=t,r.eu(),r}var yn,bn=(yn=Y.Event,Y.Ei(gn,yn),gn.prototype.setOptions=function(t){var i,n=Y.ProjectionManager.getProjection(this.su);if(t.projectionId&&(this.su=t.projectionId),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu(),this.cu.Ou()),void 0!==t.rotation&&"w"===Y.Support.baseRender&&(this.cu.setRotation(t.rotation),this.nu=t.rotation),void 0!==t.zoom&&(t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]),s=this.bt,this.bt=t.zoom,this.du=n.getResolution(this.bt),r=this.fu(),(Y.Util.getOptimalZoom(t.zoom)<Y.Ra&&Y.Util.getOptimalZoom(s)>=Y.Ra||Y.Util.getOptimalZoom(t.zoom)>=Y.Ra&&Y.Util.getOptimalZoom(s)<Y.Ra)&&(i=this.fu(),this.cu.Fu(i[0],i[1],0),this.cu.Ou(),this.vu()),this.cu.Fu(r[0],r[1],0),this.cu.Ou(),this.vu()),void 0!==t.pitch&&"w"===Y.Support.baseRender&&(t.pitch>this.$u()||this.Pu>this.$u()?t.pitch=this.$u():(t.pitch<0||this.Pu<0)&&(t.pitch=0),this.Pu=Math.min(t.pitch,this.$u()),this.cu.setPitch(t.pitch)),t.center&&(this.hu=t.center,h=this.lu(n),Y.Pl(this.uu,h[0],h[1],0),r=this.fu(),i=n.unproject(h[0],h[1]),this.hu=i,this.cu.Fu(r[0],r[1],0),this.cu.Ou()),t.kt){if(!this.map.getStatus().zoomEnable)return;var s=this.bt;this.bt=Math.min(Math.max(t.kt.Mt,this.map.getZooms()[0]),this.map.getZooms()[1]),this.du=n.getResolution(this.bt),(Y.Util.getOptimalZoom(t.kt.Mt)<Y.Ra&&Y.Util.getOptimalZoom(s)>=Y.Ra||Y.Util.getOptimalZoom(t.kt.Mt)>=Y.Ra&&Y.Util.getOptimalZoom(s)<Y.Ra)&&(e=this.fu(),this.cu.Fu(e[0],e[1],0),this.cu.Ou());var s=this.lu(n),e=t.kt.pos,n=this.X(e[0],e[1]),t=Y.lcs.getLocalByCoord([s[0],s[1]]);this.vu();var r=this.fu();this.cu.Fu(r[0],r[1],0),this.cu.Ou();var n=[(e=this.X(e[0],e[1]))[0]-n[0],e[1]-n[1]],r=[r[0]-n[0],r[1]-n[1]],h=[s[0]-n[0],s[1]-n[1]],s=Y.lcs.getLocalByCoord(h);this.bt>=Y.Ra&&(s.x!==t.x||t.y!==s.y)&&(n=s.x-t.x,t=s.y-t.y,r[0]-=n*Y.lcs.getSize()[0],r[1]-=t*Y.lcs.getSize()[1]),this.cu.Fu(r[0],r[1],0),this.cu.Ou(),this.bu(h)}this.h_()||this.map.setNeedUpdate(!0)},gn.prototype.bu=function(t){var i=Y.ProjectionManager.getProjection(this.su);Y.Pl(this.uu,t[0],t[1],0),t=i.unproject(t[0],t[1]),this.hu=t},gn.prototype.getOptions=function(){return{size:this._size,zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:this.Pu,resolution:this.du}},gn.prototype.au=function(){return this.su},gn.prototype.ru=function(){return Y.ProjectionManager.getProjection(this.su)},gn.prototype.getStatus=function(){var t=Y.Zl(),i=Y.Zl(),n=Y.Zl();this.xu(t,i,n);var s=Y.Util.getOptimalZoom(this.bt);return{size:this._size,pitch:this.Pu,rotation:this.nu,zoom:this.bt,optimalZoom:s,resolution:this.du,optimalResolution:Y.ProjectionManager.getProjection(this.su).getResolution(s),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:n,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),modelMatrix:this.cu.Au(),viewMode:this.type,skyHeight:this.EF(),fov:this.cu.Tu}},gn.prototype.$u=function(t){return 80},gn.prototype.Uu=function(t){var i=void 0!==t?t:this.Pu,t=this.bt,i=Math.max(i/100-.4,0),t=Math.max(4*(t-22),0)/100;return this._size[1]*(i-t)-10},gn.prototype.EF=function(){var t=1;return 0<(t=this.Uu())?1-t/this._size[1]*2:1},gn.prototype.X=function(t,i){var n=this.cu.Cu(),s=this.cu.Au(),e=this._size;if(t=t/e[0]*2-1,i=1-i/e[1]*2,!n)return[0,0];var r=Y.Bu(t,i,-1,1);return this.Wu(r,this.tu),e=Y.Zl(),Y.Gu(e,r,n),t=Y.Bu(t,i,1,1),this.Wu(t,this.iu),i=Y.Zl(),Y.Gu(i,t,n),n=Y.Zl(),Y.Gu(n,e,s),e=Y.Zl(),Y.Gu(e,i,s),s=+n[2]/(n[2]-e[2]),[n[0]-s*(n[0]-e[0]),n[1]-s*(n[1]-e[1])]},gn.prototype.ku=function(t,i){var n=Y.Util.getOptimalZoom(this.bt),s=this.uu,e=this.X(t,i);return t=e[0],i=e[1],n>=Y.Ra&&(t+=(s=Y.lcs.getLocalByCoord([s[0],s[1]])).center[0],i+=s.center[1]),[t,i]},gn.prototype.H=function(t,i,n){void 0===n&&(n=0);var s=this.cu.Su(),e=this.cu.Lu(),r=this.fG;return r[0]=t,r[1]=i,r[2]=n,i=this.uG,n=this.cG,Y.Gu(i,r,e),Y.Gu(n,i,s),Y.scale(n,n,1/n[3]),e=(n[0]+1)/2*this._size[0],s=(1-n[1])/2*this._size[1],this.lG(n),this.lG(i),[e,s]},gn.prototype._u=function(t,i,n){void 0===n&&(n=0);var s=Y.Util.getOptimalZoom(this.bt),e=this.uu;return s>=Y.Ra&&(t-=(e=Y.lcs.getLocalByCoord([e[0],e[1]])).center[0],i-=e.center[1]),this.H(t,i,n)},gn.prototype.containerTolnglat=function(t,i){var n=this.X(t,i),s=0,t=0;return Y.Util.getOptimalZoom(this.bt)>=Y.Ra&&(s=(i=Y.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center)[0],t=i[1]),n[0]+=s,n[1]+=t,(n=Y.ProjectionManager.getProjection(this.su).unproject(n[0],n[1]))[0]=180<n[0]?n[0]-360:n[0]<-180?n[0]+360:n[0],n},gn.prototype.lnglatToContainer=function(t,i,n,s){return void 0===n&&(n=0),t=Y.ProjectionManager.getProjection(this.su).project(t,i),Y.Util.getOptimalZoom(this.bt)>=Y.Ra&&(i=Y.lcs.getLocalByCoord([this.uu[0],this.uu[1]]),t[0]-=i.center[0],t[1]-=i.center[1]),this.H(t[0],t[1],n)},gn.prototype.pz=function(){return this.cu},gn.prototype.h_=function(){return Y.Ru(this.Xl,this.cu.Vl())},gn.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},gn.prototype.xu=function(t,i,n){var s=0,e=0,r=this.Uu();Y.Util.getOptimalZoom(this.bt)>=Y.Ra&&(s=(c=Y.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center)[0],e=c[1]);var h=Y.ProjectionManager.getProjection(this.su),o=this.X(0,r),a=this.X.apply(this,this._size),u=this.X(this._size[0],r),f=this.X(0,this._size[1]),c=Math.min(o[0],f[0],u[0],a[0])+s,r=Math.max(o[0],f[0],u[0],a[0])+s,s=Math.min(o[1],f[1],u[1],a[1])+e,a=Math.max(o[1],f[1],u[1],a[1])+e,e=h.unproject(c,s),h=h.unproject(r,a);return i[0]=c,i[1]=s,i[2]=r,i[3]=a,t[0]=e[0],t[1]=e[1],t[2]=h[0],t[3]=h[1],h=Y.V[this.su].transform(i[0],i[3]),i=Y.V[this.su].transform(i[2],i[1]),n[0]=h[0],n[1]=h[1],n[2]=i[0],n[3]=i[1],t},gn.prototype.vu=function(){var t=this._size,i=t[0]*this.du,n=t[1]*this.du;this.cu.setSize([i,n]),this.cu.Eu();var s=this.cu.dz();this.tu=s/10,this.iu=50*s,s=56-this.bt,this.cu.setOptions([i,n],s,t[0]/t[1],this.tu,this.iu),this.cu.Eu()},gn.prototype.fu=function(){if(Y.Util.getOptimalZoom(this.bt)<Y.Ra)return[this.uu[0],this.uu[1]];var t=Y.lcs.getDeltaCoord([this.uu[0],this.uu[1]]);return[t[0],t[1]]},gn.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},gn.prototype.Wu=function(t,i){t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i},gn.prototype.lG=function(t){for(var i=t.length,n=0;n<i;n++)t[n]=0},gn);function gn(t,i){var n=yn.call(this)||this;return n.type="3D",n.Pu=0,n.hu=[116.397128,39.916527],n.bt=12,n.tu=1e3,n.iu=1<<30,n._size=[0,0],n.nu=0,n.cu=new pn,n.su="EPSG:3857",n.uu=Y.Dl(),n.du=Y.ProjectionManager.getProjection(n.su).getResolution(12),n.Xl=Y.Il(),n.fG=[0,0,0,1],n.uG=[0,0,0,0],n.cG=[0,0,0,0],n.map=i,n.setOptions(t),n.cu.Ou(n.uu[0],n.uu[1]),n.Xl=n.cu.Vl(),n}var kn={Fe:["water","buildings","sky","atmosphere","bg","traffic"],aX:{regions:{subType:{land:{styleMap:[{mainkey:30001,subkey:[1,4,5]}],name:["区域面","陆地"]},green:{styleMap:[{mainkey:30001,subkey:[3,7,8,9,10,12,37]}],name:["区域面","绿地"]},"water:ocean":{styleMap:[{mainkey:30001,subkey:[6]},{mainkey:10002,subkey:[38]}],name:["区域面","海洋"]},"water:watersystem":{styleMap:[{mainkey:30001,subkey:[2,11,13]},{mainkey:20014},{mainkey:10002,subkey:[13]}],name:["区域面","其他水系"]},edu:{styleMap:[{mainkey:30002,subkey:[3,31]},{mainkey:30005,subkey:[1,2,3,4,5,6]}],name:["区域面","教育体育"]},scenicSpot:{styleMap:[{mainkey:30002,subkey:[5,33,41]}],name:["区域面","景区"]},sports:{styleMap:[{mainkey:30002,subkey:[9,10,13,19,20,21,34,37,39]}],name:["区域面","运动场所"]},parkingLot:{styleMap:[{mainkey:30002,subkey:[1]}],name:["区域面","停车场"]},subway:{styleMap:[{mainkey:30003}],name:["区域面","地铁设施"]},servicearea:{styleMap:[{mainkey:30002,subkey:[42,43]}],name:["区域面","高速服务区"]},desert:{styleMap:[{mainkey:30002,subkey:[41]}],name:["区域面","沙漠沙地"]},culture:{styleMap:[{mainkey:30002,subkey:[7,35]}],name:["区域面","文化"]},public:{styleMap:[{mainkey:30002,subkey:[4,12,22,32,42,43]},{mainkey:30005,subkey:[7]}],name:["区域面","公共设施"]},health:{styleMap:[{mainkey:30002,subkey:[8,36]}],name:["区域面","医疗卫生"]},business:{styleMap:[{mainkey:30002,subkey:[11,23,24,25,26,27,28,29,30,38]}],name:["区域面","商业场所"]},transporthub:{styleMap:[{mainkey:30002,subkey:[6,14,40]},{mainkey:30004}],name:["区域面","交通枢纽"]}}},roads:{subType:{"highWay:highway":{styleMap:[{mainkey:20001,subkey:[1,5]}],name:["道路","高速"]},"highWay:highwayTunnel":{styleMap:[{mainkey:20001,subkey:[3]}],name:["道路","高速隧道"]},"highWay:highwayOthers":{styleMap:[{mainkey:20001,subkey:[2,6]}],name:["道路","高速其他路"]},"ringRoad:ringRoad":{styleMap:[{mainkey:20002,subkey:[1,5]}],name:["道路","环路"]},"ringRoad:ringRoadTunnel":{styleMap:[{mainkey:20002,subkey:[3]}],name:["道路","环路隧道"]},"ringRoad:ringRoadOthers":{styleMap:[{mainkey:20002,subkey:[2]}],name:["道路","环路其他路"]},"nationalRoad:nationalRoad":{styleMap:[{mainkey:20003,subkey:[1]}],name:["道路","国道"]},"nationalRoad:nationalRoadTunnel":{styleMap:[{mainkey:20003,subkey:[3]}],name:["道路","国道隧道"]},"nationalRoad:nationalRoadOthers":{styleMap:[{mainkey:20003,subkey:[2,5]}],name:["道路","国道其他路"]},"provincialRoad:provincialRoad":{styleMap:[{mainkey:20004,subkey:[1]}],name:["道路","省道"]},"provincialRoad:provincialRoadTunnel":{styleMap:[{mainkey:20004,subkey:[3]}],name:["道路","省道隧道"]},"provincialRoad:provincialRoadOthers":{styleMap:[{mainkey:20004,subkey:[2]}],name:["道路","省道其他路"]},secondaryRoad:{styleMap:[{mainkey:20007},{mainkey:20031},{mainkey:20032}],name:["道路","二级道路"]},levelThreeRoad:{styleMap:[{mainkey:20008}],name:["道路","三级道路"]},levelFourRoad:{styleMap:[{mainkey:20009},{mainkey:20026}],name:["道路","四级道路"]},roadsBeingBuilt:{styleMap:[{mainkey:20018},{mainkey:20023}],name:["道路","在建道路"]},railway:{styleMap:[{mainkey:20010,subkey:[1,3]}],name:["道路","铁路"]},highSpeedRailway:{styleMap:[{mainkey:20010,subkey:[2]}],name:["道路","高铁"]},subway:{styleMap:[{mainkey:20015,subkey:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,50,51,52,54,55,56,57,58,59,60,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,89,90,91,92,93,94,95,96,97,98,99,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190]}],name:["道路","地铁"]},subwayBeingBuilt:{styleMap:[{mainkey:20015,subkey:[1,2]},{mainkey:20019}],name:["道路","在建地铁"]},overPass:{styleMap:[{mainkey:20012}],name:["道路","天桥"]},underPass:{styleMap:[{mainkey:20013}],name:["道路","地道"]},other:{styleMap:[{mainkey:20011},{mainkey:20017},{mainkey:20020},{mainkey:20024},{mainkey:20028}],name:["道路","其他线路"]},guideBoards:{styleMap:[{mainkey:40001}],name:["道路","道路路牌"]}}},labels:{subType:{"building:officebuilding":{styleMap:[{mainkey:10001,subkey:[5,74,75,76,77,78,79]},{mainkey:10004,subkey:[12]}],name:["标注","商务大厦"]},"building:residence":{styleMap:[{mainkey:10001,subkey:[6,80,81]}],name:["标注","住宅"]},"building:landmark":{styleMap:[{mainkey:10007,subkey:[187,188,189,190,192,193,195,196,198]}],name:["标注","地标建筑"]},"repast:restaurant":{styleMap:[{mainkey:10001,subkey:[19,20,114,115,116,117,118,119]},{mainkey:10007,subkey:[179,180,181]},{mainkey:10010,subkey:[5,6]}],name:["标注","餐厅"]},"repast:tearoom":{styleMap:[{mainkey:10007,subkey:[167]}],name:["标注","茶馆"]},"repast:cafe":{styleMap:[{mainkey:10001,subkey:[22]},{mainkey:10007,subkey:[215]}],name:["标注","咖啡厅"]},"repast:dessert":{styleMap:[{mainkey:10007,subkey:[166]}],name:["标注","甜品店"]},"entertainment:mall":{styleMap:[{mainkey:10001,subkey:[7,68,82,83,84,85,93,94,98]},{mainkey:10004,subkey:[8,18]},{mainkey:10007,subkey:[175,200,201,202,203,204]}],name:["标注","购物商场"]},"entertainment:market":{styleMap:[{mainkey:10001,subkey:[8,92]},{mainkey:10007,subkey:[1,2,3,4,5,6,10,168]}],name:["标注","便利超市"]},"entertainment:cinema":{styleMap:[{mainkey:10001,subkey:[60]},{mainkey:10007,subkey:[178]}],name:["标注","影剧院"]},"entertainment:entertainment":{styleMap:[{mainkey:10001,subkey:[61,62]},{mainkey:10007,subkey:[169]}],name:["标注","娱乐场所"]},"entertainment:pedestrainmall":{styleMap:[{mainkey:10001,subkey:[99]}],name:["标注","步行街"]},"entertainment:hotel":{styleMap:[{mainkey:10001,subkey:[9,133,134,135,136]}],name:["标注","酒店"]},"entertainment:zoo":{styleMap:[{mainkey:10001,subkey:[38,103]}],name:["标注","动物园"]},"entertainment:funfair":{styleMap:[{mainkey:10001,subkey:[37,73,184,185,188,203,204,205]}],name:["标注","游乐场"]},"scenic:attraction":{styleMap:[{mainkey:10001,subkey:[4,12,104,105,106,107,108,109,110,111,112,120,167,168,171,213]},{mainkey:10004,subkey:[3,13,21]},{mainkey:10007,subkey:[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,216,217,218,219,220,221,222,223,224,225,227,228,229,230,231,236]},{mainkey:10008}],name:["标注","风景名胜"]},"scenic:park":{styleMap:[{mainkey:10001,subkey:[14,69,100,101,102]}],name:["标注","公园"]},"scenic:mountain":{styleMap:[{mainkey:10001,subkey:[18]}],name:["标注","山"]},"traffic:busstop":{styleMap:[{mainkey:10001,subkey:[24]}],name:["标注","公交站"]},"traffic:port":{styleMap:[{mainkey:10001,subkey:[36]}],name:["标注","港口"]},"traffic:transporthub":{styleMap:[{mainkey:10001,subkey:[2,27,28,29,30,31,172,175]},{mainkey:10004,subkey:[4,10,14,20]}],name:["标注","交通枢纽"]},"traffic:trainstation":{styleMap:[{mainkey:10001,subkey:[26]}],name:["标注","火车站"]},"traffic:airportterminal":{styleMap:[{mainkey:10001,subkey:[23,176,177,178]},{mainkey:10009}],name:["标注","机场航站楼"]},"traffic:coachstation":{styleMap:[{mainkey:10001,subkey:[25]}],name:["标注","长途汽车站"]},culture:{styleMap:[{mainkey:10001,subkey:[10,11,13,35,138,139,140,141,142,143,163,164,165,166,170]},{mainkey:10004,subkey:[1,5,11,15]},{mainkey:10007,subkey:[43,44,45,46,47,176,177]}]},"service:lifestyle":{styleMap:[{mainkey:10001,subkey:[58,63,64,65,66,67,121,122,123,173,214]},{mainkey:10007,subkey:[28,29,30,58]}],name:["标注","生活服务"]},"service:bank":{styleMap:[{mainkey:10007,subkey:[14,15,16,17]}],name:["标注","银行"]},"service:restroom":{styleMap:[{mainkey:10001,subkey:[59]}],name:["标注","卫生间"]},"medical:medicalcenter":{styleMap:[{mainkey:10001,subkey:[70]},{mainkey:10004,subkey:[6,16]}],name:["标注","大型医院"]},"medical:hospital":{styleMap:[{mainkey:10001,subkey:[32,33,169,206,207,208,209,210]},{mainkey:10007,subkey:[170]}],name:["标注","医院"]},"medical:emergencycenter":{styleMap:[{mainkey:10001,subkey:[132]}],name:["标注","急救中心"]},"medical:clinic":{styleMap:[{mainkey:10001,subkey:[131]},{mainkey:10007,subkey:[209]}],name:["标注","诊所"]},"medical:pharmacy":{styleMap:[{mainkey:10001,subkey:[57]}],name:["标注","药店"]},"casual:golf":{styleMap:[{mainkey:10004,subkey:[7,17]}],name:["标注","高尔夫"]},"casual:swimmingpool":{styleMap:[{mainkey:10007,subkey:[171]}],name:["标注","游泳馆"]},"casual:basketballcourt":{styleMap:[{mainkey:10001,subkey:[129]}],name:["标注","篮球馆"]},"casual:soccerfield":{styleMap:[{mainkey:10001,subkey:[130]}],name:["标注","足球场"]},"casual:tenniscourt":{styleMap:[{mainkey:10007,subkey:[174]}],name:["标注","网球场"]},"casual:otherstadium":{styleMap:[{mainkey:10001,subkey:[15,16,17,124,125,126,127,128]},{mainkey:10007,subkey:[172,173]}],name:["标注","其他体育馆"]},"point:toll":{styleMap:[{mainkey:10001,subkey:[218]}],name:["标注","收费站"]},"point:trafficlight":{styleMap:[{mainkey:10001,subkey:[2]}],name:["标注","红绿灯"]},"point:tunnel":{styleMap:[{mainkey:10002,subkey:[16]}],name:["标注","隧道"]},insurance:{styleMap:[{mainkey:10001,subkey:[42,55]}],name:["标注","金融保险"]},motorcycleservices:{styleMap:[{mainkey:10001,subkey:[113]}],name:["标注","摩托车服务"]},automobileservices:{styleMap:[{mainkey:10001,subkey:[39,40,41,71,72]},{mainkey:10007,subkey:[40,41,42]}],name:["标注","汽车服务"]},subway:{styleMap:[{mainkey:10005},{mainkey:10006}],name:["标注","地铁站"]},transportfacilities:{styleMap:[{mainkey:10001,subkey:[149,150,215,216,217]},{mainkey:10002,subkey:[11]},{mainkey:11001,subkey:[1,2,3]},{mainkey:10004,subkey:[22,23]}],name:["标注","道路附属设施"]},bizcircle:{styleMap:[{mainkey:10002,subkey:[10]}],name:["标注","商圈"]},others:{styleMap:[{mainkey:10001,subkey:[1,3,34,43,137]},{mainkey:10002,subkey:[12,14,15,21,23,28,36]},{mainkey:10004,subkey:[2]},{mainkey:10007,subkey:[208,210,211,212,213,214]},{mainkey:10011},{mainkey:10012},{mainkey:10013},{mainkey:10014},{mainkey:10015},{mainkey:10016}],name:["标注","其他"]}}},districtsname:{subType:{continent:{styleMap:[{mainkey:10002,subkey:[20]}],name:["行政区名","大洲名"]},country_cn:{styleMap:[{mainkey:10002,subkey:[18]}],name:["行政区名","中国国家名"]},country_global:{styleMap:[{mainkey:10002,subkey:[19]}],name:["行政区名","世界国家名"]},capital_global:{styleMap:[{mainkey:10002,subkey:[24,35]}],name:["行政区名","境外首都名"]},state:{styleMap:[{mainkey:10002,subkey:[1,3,4,22,26,30,32,33,34]}],name:["行政区名","省/直辖市/特别行政区名"]},"city:provincial_capital":{styleMap:[{mainkey:10002,subkey:[2,31]}],name:["行政区名","省会名"]},"city:city":{styleMap:[{mainkey:10002,subkey:[5,7,25,27]}],name:["行政区名","地级市名"]},"city:district":{styleMap:[{mainkey:10002,subkey:[6]}],name:["行政区名","县级市名"]},district:{styleMap:[{mainkey:10002,subkey:[8,37]}],name:["行政区名","区县名"]},town:{styleMap:[{mainkey:10002,subkey:[9]}],name:["行政区名","乡镇名"]},village:{styleMap:[{mainkey:10002,subkey:[17]}],name:["行政区名","村庄名"]}}},borders:{subType:{global:{styleMap:[{mainkey:20016,subkey:[3,4,8,10,11,14]}],name:["行政区边界","外国国界/停火线/主张线"]},provincial:{styleMap:[{mainkey:20016,subkey:[5,6,7,12]}],name:["行政区边界","省界线"]}}},buildings:{subType:{default:{styleMap:[{mainkey:50001,subkey:[1,2]}],name:["楼块","默认楼块"]},education:{styleMap:[{mainkey:50002,subkey:[1,2,3,4]}],name:["楼块","高校教学"]}}},environment:{subType:{sky:{styleMap:[{mainkey:"00001",subkey:[1]}],name:["环境","天空"]},atmosphere:{styleMap:[{mainkey:"00001",subkey:[2]}],name:["环境","大气"]}}},bg:{styleMap:[{mainkey:"00001",subkey:[3]}]}},uX:{regions:{name:"区域面",subType:{land:{name:"陆地",keyMap:["regions#land"],styleMap:[{mainkey:30001,subkey:[1,4,5]}]},green:{name:"绿地",keyMap:["regions#green:greenspace","regions#green:grass","regions#green:woodland","regions#green:mountain","regions#green:golf"],styleMap:[{mainkey:30001,subkey:[3,7,8,9,10,12]}]},edu:{name:"教育体育",keyMap:["regions#edu"],styleMap:[{mainkey:30002,subkey:[3,31]}]},public:{name:"公共设施",keyMap:["regions#public"],styleMap:[{mainkey:30002,subkey:[4,12,22,32]}]},traffic:{name:"交通枢纽",keyMap:["regions#transporthub"],styleMap:[{mainkey:30002,subkey:[6,14,40]},{mainkey:30004,subkey:[6,14,40]}]},scenicSpot:{name:"景区",keyMap:["regions#scenicSpot"],styleMap:[{mainkey:30002,subkey:[5,33]}]},culture:{name:"文化",keyMap:["regions#culture"],styleMap:[{mainkey:30002,subkey:[7,35]}]},health:{name:"医疗卫生",keyMap:["regions#health"],styleMap:[{mainkey:30002,subkey:[8,36]}]},sports:{name:"运动场所",keyMap:["regions#sports"],styleMap:[{mainkey:30002,subkey:[9,10,13,19,20,21,34,37,39]}]},business:{name:"商业场所",keyMap:["regions#business"],styleMap:[{mainkey:30002,subkey:[11,23,24,25,26,27,28,29,30,38]}]},parkingLot:{name:"停车场",keyMap:["regions#parkingLot"],styleMap:[{mainkey:30002,subkey:[1]}]},subway:{name:"地铁设施",keyMap:["regions#subway"],styleMap:[{mainkey:30003,allSubKey:!0}]}}},water:{name:"水系",keyMap:["regions#water:ocean","regions#water:watersystem"],styleMap:[{mainkey:30001,subkey:[2,6,11,13]},{mainkey:20014,subkey:[1,2]},{mainkey:10002,subkey:[13,38]}]},buildings:{name:"建筑物",keyMap:["buildings#default","buildings#residence","buildings#education","buildings#life","buildings#event","buildings#landmark"],styleMap:[{mainkey:50001,subkey:[1,2]},{mainkey:50002,subkey:[1,2,3,4]},{mainkey:50003,subkey:[1]},{mainkey:50004,subkey:[1]},{mainkey:30002,subkey:[2,15,16,17,18]}]},roads:{name:"道路",subType:{highWay:{name:"高速公路",keyMap:["roads#highWay:highway","roads#highWay:highwayTunnel","roads#highWay:highwayOthers"],styleMap:[{mainkey:20001,subkey:[1,2,3,5,6]}]},ringRoad:{name:"城市环线",keyMap:["roads#ringRoad:ringRoad","roads#ringRoad:ringRoadTunnel","roads#ringRoad:ringRoadOthers"],styleMap:[{mainkey:20002,subkey:[1,2,3]}]},nationalRoad:{name:"国道",keyMap:["roads#nationalRoad:nationalRoad","roads#nationalRoad:nationalRoadTunnel","roads#nationalRoad:nationalRoadOthers"],styleMap:[{mainkey:20003,subkey:[1,2,3,5]}]},provincialRoad:{name:"省道",keyMap:["roads#provincialRoad:provincialRoad","roads#provincialRoad:provincialRoadTunnel","roads#provincialRoad:provincialRoadOthers"],styleMap:[{mainkey:20004,subkey:[1,2,3]}]},secondaryRoad:{name:"二级公路",keyMap:["roads#secondaryRoad"],styleMap:[{mainkey:20007,subkey:[1,2,3]}]},levelThreeRoad:{name:"三级公路",keyMap:["roads#levelThreeRoad"],styleMap:[{mainkey:20008,subkey:[1,2,4,5]}]},levelFourRoad:{name:"四级道路",keyMap:["roads#levelFourRoad"],styleMap:[{mainkey:20009,subkey:[1,2,3,5,6,7]}]},roadsBeingBuilt:{name:"在建道路",keyMap:["roads#roadsBeingBuilt"],styleMap:[{mainkey:20018,subkey:[2,3,4,5,6,7,8,9,10,11]}]},railway:{name:"铁路",keyMap:["roads#railway"],styleMap:[{mainkey:20010,subkey:[1]}]},highSpeedRailway:{name:"高铁",keyMap:["roads#highSpeedRailway"],styleMap:[{mainkey:20010,subkey:[2]}]},subway:{name:"地铁",keyMap:["roads#subway"],styleMap:[{mainkey:20015,allSubKey:!0,subkey0:[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,50,51,52,54,55,56,57,58,59,60,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,89,90,91,92,93,94,95,96,97,98,99,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,131,132,133,143]}]},subwayBeingBuilt:{name:"在建地铁",keyMap:["roads#subwayBeingBuilt"],styleMap:[{mainkey:20015,subkey:[1,2]},{mainkey:20019,subkey:[1]}]},overPass:{name:"天桥",keyMap:["roads#overPass"],styleMap:[{mainkey:20012,subkey:[1,2,3]}]},underPass:{name:"地道",keyMap:["roads#underPass"],styleMap:[{mainkey:20013,subkey:[1,2,3]}]},other:{name:"其他线条",keyMap:["roads#other"],styleMap:[{mainkey:20011,subkey:[1]},{mainkey:20017,subkey:[1,2,3,4,8]},{mainkey:20020,subkey:[1,2,3]},{mainkey:20024,subkey:[1,2]},{mainkey:20028,subkey:[1]}]},guideBoards:{name:"道路路牌",keyMap:["roads#guideBoards"],styleMap:[{mainkey:40001,subkey:[2800,110100,110101,110102,110103,110104,110105]}]}}},labels:{name:"标注",subType:{pois:{name:"兴趣点",subType:{hotel:{name:"住宿",keyMap:["labels#entertainment:hotel"],isDetailedType:!0,detailedCode:0,styleMap:[{mainkey:10001,subkey:[9,133,134,135,136,155,156,157,158,159,160,161,162,186]},{mainkey:10007,subkey:[31,32,33,34,35,36,37,38,39,164,165]}]},restaurant:{name:"餐饮",keyMap:["labels#repast:restaurant"],isDetailedType:!0,detailedCode:1,styleMap:[{mainkey:10001,subkey:[19,20,21,22,114,115,116,117,118,119,183,187]},{mainkey:10007,subkey:[1,2,3,4,166,167,168,179,180,181,203,205,206,215]}]},shop:{name:"购物",keyMap:["labels#entertainment:mall"],isDetailedType:!0,detailedCode:2,styleMap:[{mainkey:10001,subkey:[7,8,68,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99]},{mainkey:10007,subkey:[5,6,7,8,9,10,11,12,13,175,200,201,202,204]}]},scenicSpot:{name:"风景名胜",keyMap:["labels#repast:restaurant","labels#scenic:park"],isDetailedType:!0,detailedCode:3,styleMap:[{mainkey:10001,subkey:[4,12,14,38,69,100,101,102,103,104,105,106,107,108,109,110,111,112,120,167,171,188,189,190,191,192]},{mainkey:10008,allSubKey:!0},{mainkey:10007,subkey:[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,187,188,190,192,193,194,195,196,198,216,217,218,219,220,221,223,224,225]}]},traffic:{name:"交通设施",isDetailedType:!0,detailedCode:4,styleMap:[{mainkey:10001,subkey:[23,24,25,26,31,36,148,154,168,172,175,176,177,178]},{mainkey:10002,subkey:[11,16]},{mainkey:10009,allSubKey:!0}]},bank:{name:"金融保险",isDetailedType:!0,detailedCode:5,styleMap:[{mainkey:10001,subkey:[42,44,45,46,47,48,49,50,51,52,53,54,55,144,145,146,147]},{mainkey:10007,subkey:[14,15,16,17,18,19,20,21,22,23,24,25,26,27]}]},edu:{name:"科教文化",isDetailedType:!0,detailedCode:6,styleMap:[{mainkey:10001,subkey:[10,11,13,35,138,139,140,141,142,143,163,164,165,166,170]},{mainkey:10007,subkey:[43,44,45,46,47,176,177]}]},live:{name:"生活服务",isDetailedType:!0,detailedCode:7,styleMap:[{mainkey:10001,subkey:[58,63,64,65,66,67,121,122,123]},{mainkey:10007,subkey:[28,29,30]}]},hospital:{name:"医疗保健",isDetailedType:!0,detailedCode:8,styleMap:[{mainkey:10001,subkey:[32,33,57,70,131,132,169,193,206,207,208,209,210]},{mainkey:10007,subkey:[170,209]}]},pe:{name:"休闲体育",isDetailedType:!0,detailedCode:9,styleMap:[{mainkey:10001,subkey:[15,16,17,37,60,61,62,73,124,125,126,127,128,129,130,180,181,182,184,185,194,195,196,197,198,199,200,201,202,203,204,205,213,214]},{mainkey:10007,subkey:[169,171,172,173,174,178,197,207]}]},public:{name:"公共设施",isDetailedType:!0,detailedCode:10,styleMap:[{mainkey:10001,subkey:[59,173,215]}]},buidling:{name:"商务住宅",isDetailedType:!0,detailedCode:11,styleMap:[{mainkey:10001,subkey:[5,6,74,75,76,77,78,79,80,81,179]},{mainkey:10007,subkey:[189,191]}]},gov:{name:"政府机构及社会团体",isDetailedType:!0,detailedCode:12,styleMap:[{mainkey:10001,subkey:[3,34,43,137]}]},moto:{name:"摩托车服务",isDetailedType:!0,detailedCode:13,styleMap:[{mainkey:10001,subkey:[113]}]},vehicle:{name:"汽车服务",isDetailedType:!0,detailedCode:14,styleMap:[{mainkey:10001,subkey:[39,40,41,71,72,151,152,153]},{mainkey:10007,subkey:[40,41,42,182,183,184,185,186]}]},pass:{name:"通行设施",isDetailedType:!0,detailedCode:15,styleMap:[{mainkey:10001,subkey:[27,28,149,150,174]},{mainkey:10002,subkey:[21]}]},subway:{name:"地铁站",isDetailedType:!0,detailedCode:16,styleMap:[{mainkey:10005,subkey:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,54,55,56,57,59,86,87,88,89,90,91,92,93,94,95,96,97,98,99,103,104,105]},{mainkey:10006,subkey:[1,2]}]},roadFacilities:{name:"道路附属设施",isDetailedType:!0,detailedCode:17,styleMap:[{mainkey:10001,subkey:[2,29,30]},{mainkey:10017,allSubKey:!0}]},address:{name:"地名",isDetailedType:!0,detailedCode:18,styleMap:[{mainkey:10001,subkey:[18]},{mainkey:10002,subkey:[10,12,14,15,23,36]}]},other:{name:"其他",isDetailedType:!0,detailedCode:19,styleMap:[{mainkey:10001,subkey:[1,211,212]},{mainkey:10002,subkey:[28]},{mainkey:10007,subkey:[208,210,211,212,213,214]},{mainkey:10010},{mainkey:10011},{mainkey:10012},{mainkey:10013},{mainkey:10014},{mainkey:10015},{mainkey:10016,allSubKey:!0}]}}},aois:{name:"区域标注",keyMap:["labels#building:officebuilding","labels#entertainment:mall","labels#traffic:transporthub","labels#medical:medicalcenter","labels#casual:golf"],styleMap:[{mainkey:10004,allSubKey:!0,subkey:[1,3,4,5,6,7,8,11,12,13,14,15,16,17,18,21,22,23]}]},continent:{name:"大洲",keyMap:["districtsname#continent"],styleMap:[{mainkey:10002,subkey:[20]}]},country:{name:"国家",keyMap:["districtsname#country_cn"],styleMap:[{mainkey:10002,subkey:[18,19,29]}]},province:{name:"省/直辖市/自治区/特别行政区",keyMap:["districtsname#state"],styleMap:[{mainkey:10002,subkey:[22,26,33]}]},city:{name:"城市",keyMap:["districtsname#city:provincial_capital","districtsname#city:city"],styleMap:[{mainkey:10002,subkey:[1,2,3,4,5,7,24,25,27,30,31,32,34,35]}]},district:{name:"区县",keyMap:["districtsname#city:district"],styleMap:[{mainkey:10002,subkey:[6,8,37]}]},town:{name:"乡镇",keyMap:["districtsname#town"],styleMap:[{mainkey:10002,subkey:[9]}]},village:{name:"村庄",keyMap:["districtsname#village"],styleMap:[{mainkey:10002,subkey:[17]}]}}},borders:{name:"行政区边界",subType:{China:{name:"中国国界",keyMap:["borders#China"],styleMap:[{mainkey:20016,subkey:[1,2,9]}]},foreign:{name:"外国国界/停火线/主张线",keyMap:["borders#global"],styleMap:[{mainkey:20016,subkey:[3,4,8,10,11,14,16]}]},provincial:{name:"省界线",keyMap:["borders#provincial"],styleMap:[{mainkey:20016,subkey:[5,6,7,12]}]}}},sky:{name:"天空",keyMap:["environment#sky"],styleMap:[{mainkey:"00001",subkey:[1]}]},atmosphere:{name:"大气",keyMap:["environment#atmosphere"],styleMap:[{mainkey:"00001",subkey:[2]}]},bg:{name:"背景网格线",keyMap:["bg"],styleMap:[{mainkey:"00001",subkey:[3]}]}}},Mn=(wn.prototype.pn=function(t){this.qe?t(this.ON):this.Ye.push(t)},wn.prototype.dn=function(t,i,n){return this.vn.dn(t,i,n)},wn.prototype.mn=function(t,i){return this.vn.mn(t,i)},wn.prototype.setStyle=function(t,i,n){var s=t;this.vn.setStyle(s),t.layer&&this.vn.EY(t.layer),this.vn.kF(t),n.gn.bn(s,function(){n.emit("styleChanged")})},wn.prototype.setStyleByPlat=function(t,i){var n;Y.Module.eS.BY&&(n=this.xn(t),this.vn.setStyle(n),t.layer&&this.vn.EY(t.layer),this.vn.kF(t),i.gn.bn(n,function(){i.emit("styleChanged")}))},wn.prototype.destroy=function(){this.vn&&this.vn.destroy(),this.Ze={},this.ON=""},wn.prototype.w_=function(t){if(!this.Ze||!this.Ze[t])return null;var i=[];return Object.keys(this.Ze[t]).forEach(function(t){t=parseFloat(t),i.push(t)}),i},wn.prototype.VY=function(t){var t={style:t},i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status?console.log("qqqqq"):404===i.status&&i.abort()},i.open("POST","http://webapi.amap.com/formatstyle"),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t))},wn.prototype.xn=function(t){for(var i={},n=t.version&&"2.0"===t.version?t.mapStyle:t,s=t.version&&"2.0"===t.version?kn.aX:kn.uX,e=Object.keys(n),r=0;r<e.length;r++){var h=e[r],o=n[h];if(s[h]){var a=s[h];if(a.styleMap){for(var u=a.styleMap,f=0;f<u.length;f++)if(i[A=u[f].mainkey]||(i[A]={}),u[f].subkey)for(var c=0;c<u[f].subkey.length;c++){var l=u[f].subkey[c],d=Y.yn(o);if(o.styles)for(var v=Object.keys(o.styles),p=0;p<v.length;p++){var m=v[p],y=o.styles[m].transitional,b=o.styles[m].nodes;d.styles[m]={nodes:b,transitional:y||void 0,nodesObj:{}};for(var g=0;g<b.length;g++){var k=b[g].zoom,M=b[g].value;d.styles[m].nodesObj[k]=M}}i[A][l]=d}}else if(a.subType&&o.subType)for(var w=Object.keys(o.subType),f=0;f<w.length;f++){var x=w[f];if(a.subType[x]&&a.subType[x].styleMap){for(var A,u=a.subType[x].styleMap,c=0;c<u.length;c++)if(u[c].mainkey){i[A=u[c].mainkey]||(i[A]={});var z=u[c].subkey;if(z=(u[c].allSubKey?this.w_(A):z)||["all"])for(var C=0;C<z.length;C++){var l=z[C],S=o.subType[x];if((d=Y.yn(S)).styles)for(v=Object.keys(S.styles),p=0;p<v.length;p++)for(m=v[p],y=S.styles[m].transitional,b=S.styles[m].nodes,d.styles[m]={nodes:b,nodesObj:{},transitional:y||void 0},g=0;g<b.length;g++)k=b[g].zoom,M=b[g].value,d.styles[m].nodesObj[k]=M;i[A][l]=d}}}else if(a.subType[x]&&a.subType[x].subType)for(var L=a.subType[x].subType,T=Object.keys(L),S=o.subType[x],d=Y.yn(S),I=0;I<T.length;I++){var D=T[I];if(L[D].styleMap)for(var O=0;O<L[D].styleMap.length;O++){var E=L[D].styleMap[O];if(E.mainkey&&E.subkey){i[E.mainkey]||(i[E.mainkey]={});for(var R=0;R<E.subkey.length;R++){var P=E.subkey[R];if(d.detailedType&&d.detailedType[D]){var j=d.detailedType[D],B=Y.yn(j);if(j.styles)for(v=Object.keys(j.styles),p=0;p<v.length;p++)for(m=v[p],b=j.styles[m].nodes,B.styles[m]={nodes:b,nodesObj:{}},g=0;g<b.length;g++)k=b[g].zoom,M=b[g].value,B.styles[m].nodesObj[k]=M;i[E.mainkey][P]=B}else i[E.mainkey][P]=d}}}}}}}return i},wn.prototype.wn=function(t){for(var i=0,n=this.Ye.length;i<n;i+=1)(0,this.Ye[i])(t);this.Ye=[]},wn.prototype.fn=function(t){var i=this;Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-request"]||(Y.Support.amapRunTime["style2.0-request"]=(new Date).getTime())),window.amap_sdk_log&&window.amap_sdk_log("style-request:"+t+"-"+Date.now());var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status?(Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-loaded"]||(Y.Support.amapRunTime["style2.0-loaded"]=(new Date).getTime())),window.amap_sdk_log&&window.amap_sdk_log("style-loaded:"+t+"-"+Date.now()),i.zZ(n.response),Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-decoded"]||(Y.Support.amapRunTime["style2.0-decoded"]=(new Date).getTime())),window.amap_sdk_log&&window.amap_sdk_log("style-decoded:"+t+"-"+Date.now())):404===n.status&&n.abort()},n.open("GET",t,!0),n.responseType="arraybuffer",n.send()},wn.prototype.zZ=function(t){Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-parseStylesFromText-End"]||(Y.Support.amapRunTime["style2.0-parseStylesFromText-End"]=(new Date).getTime())),t=Y.CZ(t),Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-jsonParse-End"]||(Y.Support.amapRunTime["style2.0-jsonParse-End"]=(new Date).getTime())),window["amapjsapi-style2-local"]?this.Ze=window["amapjsapi-style2-local"]:this.Ze=Y.StyleParser.SZ(t),Y.Support.amapRunTime&&(Y.Support.amapRunTime["style2.0-format-End"]||(Y.Support.amapRunTime["style2.0-format-End"]=(new Date).getTime())),this.vn.jY(this.Ze),this.Ze.Rn=Y._n.create("fcf9f2"),this.Ze.zn=24,this.qe=!0,this.ON=JSON.stringify(this.Ze),this.wn(this.ON)},wn);function wn(t){this._map=t,this.vz=null,this.qe=!1,this.Ne=Y.Support.$e&&!Y.Support.Ue,this.Be=window.__AMapStyleSource||Y.Ge||AMap.getConfig().protocol+"://vdata.amap.com/style/2.0.1",this.Ze={},this.Ye=[],this.Ve=null,t.assetsServer&&(this.Be=t.assetsServer+"/static/mapstyles/2.0.1"),this.fn(this.Be),this.vn=new Y.StyleParser("fast"===t.bZ.MZ.drawMode)}(bt=zr={}).TEXTUREFINISH="TEXTUREFINISH",bt.UNLOAD="unload",bt.LOADING="loading",bt.LOADED="loaded",bt.FAIL="fail";var xn,An=(xn=Y.vG,Y.Ei(zn,xn),zn.prototype.getData=function(t,i){for(var n=this,s=[],e=0,r=t;e<r.length;e++){var h=r[e];s.push(h.charCodeAt(0).toString())}var o=this.Zu(s),a=this._map.gn;switch(o.status){case Y.qu.AllLoaded:i();break;case Y.qu.AllUnLoaded:var u=this.Yu(i);a&&a.getSDFData(o.Vu,function(t,i){n.Xu[u]=i=void 0===i?{}:i,n.Hu()});break;case Y.qu.SomeLoading:var f=this.Yu(i);a&&a.getSDFData(o.Vu,function(t,i){n.Xu[f]=i=void 0===i?{}:i,n.Hu()});break;case Y.qu.AllLoading:var c=this.Yu(i);this.Xu[c]=[],this.Hu()}},zn.prototype.Ju=function(t){for(var i={},n=0,s=t;n<s.length;n++){var e=s[n],r=e.range,h=e.info,o=e.pos;(e=this.info)[r],e[r]={info:((e={})[r]=h,e),pos:o},this.range.push(r),i[r]=1}return i},zn.prototype.mz=function(t,i){var n=this.info||[];return!(i=void 0===i?!1:i)&&n.hasOwnProperty(t)&&(n=n[t]).pos&&n.info[t]?{key:t,index:Y.cY.dynamic,char:n.info[t],pos:n.pos}:null},zn.prototype.measureText=function(t,i){for(var n=Y.PY,s=Y.tc.ic,e=0,r=this.info,h=i/this._size,o=this.nc,a=0,u=t;a<u.length;a++){var f=u[a],c=void 0,l=f;(c=13312<=l&&l<=40959?n:o[l])||!r.hasOwnProperty(l)||(l=r[l].info[l])&&(this.nc[f]=c=l[4]),e+=(c+s)*h}return e},zn.prototype.destroy=function(){this.range=[],this.info={},this.sc=[],this.Xu&&(this.Xu={}),this._c=[],this.nc={},this.xc=[],this.bc={},this.Xu={}},zn.prototype._bindEvents=function(){this.dG.on("loadWordsByFront",this.pG.bind(this))},zn.prototype.fc=function(){var t=Y.tc.pc,i=t[this.dc];return this.dc=(this.dc+1)%t.length,i},zn.prototype.vc=function(t){void 0===t&&(t={});var i=(Object.keys(t)||[]).sort(function(t,i){return t-i});return i=2<=(t=i.length)?i[0]+"-"+i[t-1]:1===t?i[0]:""},zn.prototype.mc=function(){},zn.prototype.Yu=function(t,i){void 0===i&&(i={});var n=this.yc+=1;return this.xc.push(n),this.bc&&(this.bc[n]=t,this.bc[n]={cb:t,params:i}),n},zn.prototype.Hu=function(){var t,i,n=this.xc[0];!n||(t=this.Xu[n])&&(this.xc.shift(),(i=this.bc[n])?i.cb(t):console.error("sdf task error"),delete this.Xu[n],delete this.bc[n],this.Hu())},zn.prototype.gc=function(t){for(var i=this.range||[],n=this.info||{},s=parseInt(t,10),e=0,r=i;e<r.length;e++){var h=r[e];if(h.indexOf("-")<0){if(s===+h&&(n[h]&&n[h].info||{})[t])return!0}else{var o=h.split("-"),a=parseInt(o[0]||"",10),o=parseInt(o[1]||"",10);if(a<=s&&s<=o&&(n[h]&&n[h].info||{})[t])return!0}}return!1},zn.prototype.pG=function(t){var i=this,n=t.mG,s=t.cb,n=this._map.bZ.MZ.lY.add("LangSDF",n);this._map.bZ.MZ.yY.setNeedUpdate(!0),this._map.bZ.MZ.lY.on("task:"+n,function(t){t=i._map.bZ.MZ.lY.add("SDFCombine",t.data),i._map.bZ.MZ.yY.setNeedUpdate(!0),i._map.bZ.MZ.lY.on("task:"+t,function(t){i.Ju(t.data),s(t.data)},i,!0)},this,!0)},zn.prototype._G=function(t){for(var i="",n=0,s=t.split("|");n<s.length;n++){var e=s[n];i+=String.fromCharCode(parseInt(e,10))}return i},zn.prototype.wc=function(t){return-1!==this._c.indexOf(t)},zn.prototype.Zu=function(t){for(var i=[],n=(this.range,0),s=0,e=0,r=t;e<r.length;e++){var h=r[e];this.gc(h)||(this.wc(h)?s+=1:(n+=1,i.push(h)))}return 0===s&&0===n?{status:Y.qu.AllLoaded,Vu:i}:0<n&&0===s?{status:Y.qu.AllUnLoaded,Vu:i}:0===n&&0<s?{status:Y.qu.AllLoading,Vu:i}:{status:Y.qu.SomeLoading,Vu:i}},zn);function zn(t,i){var n=xn.call(this)||this;return n._map=i,n.CLASS_NAME="SDFManager",n.range=[],n.info={},n.sc=[],n.dc=0,n._c=[],n._size=24,n.nc={},n.xc=[],n.bc={},n.Xu={},n.yc=1,n.ac=t,n.yG=new Y.bG,n.dG=n._map.gn,n._bindEvents(),n}var Cn=(Sn.prototype.play=function(t){for(var i=t,n=Date.now(),s=this.result;0<i&&this.offset<this.mG.length;){var e=this.mG[this.offset],r={},h=this._G(e),o=Y.bG.gG(e),h=(o=this.lang.D$(o).Ce(h)).bitmap,o=o.info;r.range=e,r.info=o,r.data=h,s.push(r),this.offset++,i=t-(Date.now()-n)}return this.result},Sn.prototype._G=function(t){for(var i="",n=0,s=t.split("|");n<s.length;n++){var e=s[n];i+=String.fromCharCode(parseInt(e,10))}return i},Object.defineProperty(Sn.prototype,"status",{get:function(){return this.offset>=this.mG.length?Y.vY.finish:Y.vY.pause},eb:!1,nb:!0}),Sn);function Sn(t,i){this.lang=t,this.mG=i,this.type="LangSDFTask",this.offset=0,this.result=[]}var Ln=(Tn.prototype.loadImage=function(t,i){var n=i.name,s=(i.type,i.cb),e=n||t;(n=this.Fs[e])&&n.status===Y.uc.LOADED?s(n,i):n&&n.status===Y.uc.LOADING?(this.Mc[e]||(this.Mc[e]=[]),this.Mc[e].push({cb:s,opts:i})):t?this.Rc(t,i):s(null,i)},Tn.prototype.TZ=function(t,i){this.Rc(t.data,{name:t.hash,cb:i})},Tn.prototype.loadImages=function(t,i){var n=t.length,s=i.cb,e=0;if(t.length){i.cb=function(){(e+=1)===n&&s()};for(var r=0,h=t;r<h.length;r++){var o=h[r];this.loadImage(o,i)}}else s()},Tn.prototype.imageLoaded=function(t,i){var n=i.data,s=i.cb;(i=this.zc[s])&&(i(n),delete this.zc[s])},Tn.prototype.addImageData=function(t,i){this.Fs[t]||(this.Fs[t]=i)},Tn.prototype.getImage=function(t){return this.Fs[t=void 0===t?"":t]||{}},Tn.prototype.destory=function(){this.Fs={},this.Mc&&(this.Mc={}),this.zc&&(this.zc={})},Tn.prototype.Rc=function(t,e){var r=this,i=e.name,h=e.ext,n=e.type,o=void 0===n?"other":n,a=e.cb,u=this.Fs,f=new Image,c=i||t;u[c]={type:o,img:f,ext:h,width:f.width,height:f.height,status:Y.uc.LOADING},f.crossOrigin="anonymous",f.onload=function(){if(e.imageBitmap)createImageBitmap(f).then(function(t){if(u[c]={type:o,img:t,ext:h,width:t.width,height:t.height,status:Y.uc.LOADED},a(u[c],e),r.Mc[c])for(var i=0,n=r.Mc[c];i<n.length;i++){var s=n[i];s.cb(u[c],s.opts)}f.onload=null,f.onerror=null});else{if(u[c]={type:o,img:f,ext:h,width:f.width,height:f.height,status:Y.uc.LOADED},a(u[c],e),r.Mc[c])for(var t=0,i=r.Mc[c];t<i.length;t++){var n=i[t];n.cb(u[c],n.opts)}f.onload=null,f.onerror=null}},f.onerror=function(){a(null,e),f.onload=null,f.onerror=null},f.src=t},Tn.prototype.Sc=function(t){var i,n=(t=void 0===t?{}:t).img,t=n&&n.context?(i=n.width||0,n.height||0):(i=t.width||0,t.height||0);return[i,t]},Tn);function Tn(){this.Fs={},this.Cc=16,this.zc={},this.Mc={}}var In,Dn=0,jt=(In=Wt,Y.Ei(On,In),On.prototype.add=function(t){for(var i=0,n=t=Array.isArray(t)?t:[t];i<n.length;i++){var s=n[i];this.source.add(s)}},On.prototype.remove=function(t){for(var i=0,n=t=Array.isArray(t)?t:[t];i<n.length;i++){var s=n[i];this.source.remove(s)}},On.prototype.getSourceConfig=function(){return{id:this.zF,type:"overlay",url:""}},On.prototype.co=function(){return this.zF},On.prototype.getState=function(){return{visible:this.il,opacity:1,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},On.prototype.vi=function(t){var i=this.source;if(i)return i.rr(t)||null},On.prototype.getAllOverlays=function(i){return this.source.getAllOverlays().filter(function(t){return!i||-1<t.className.toLocaleLowerCase().indexOf(i)})},On.prototype.destroy=function(){this.source&&this.source.destroy&&this.source.destroy(),this._container&&delete this._container},On);function On(t){var i=In.call(this,t=void 0===t?{}:t)||this;return i.CLASS_NAME="AMap.VectorLayer",i.zF="AMap.VectorLayer"+Dn++,i.pC=!1,i.Qh=t.zIndex||110,i}var En,Rn=(En=jt,Y.Ei(Pn,En),Pn.prototype.has=function(t){return!!this.source&&-1<this.source.getAllOverlays().indexOf(t)},Pn.prototype.clear=function(){var t;this.source&&(t=this.source.getAllOverlays(),this.remove(t.slice(0)))},Pn.prototype.setOptions=function(t){if(this.source)for(var i=0,n=this.source.getAllOverlays();i<n.length;i++)n[i].setOptions(t)},Pn.prototype.query=function(t){if(this.source)return this.source.rr({lnglat:t})},Pn.prototype.getBounds=function(){if(this.source){var t=this.getAllOverlays();if(0<t.length){for(var i,n=void 0,s=0;s<t.length;s++)n?(i=t[s].getBounds())&&n.union(i):n=(n=t[s].getBounds())&&n.clone();return n}}},Pn);function Pn(){return null!==En&&En.apply(this,arguments)||this}var jn,Bn=!1,Fn=(jn=Y.Event,Y.Ei(Wn,jn),Wn.prototype.va=function(t,n,i){var s,e=this,r=this.jD();return Y.Support.LZ&&r.UD&&!t.offlineServer?(window.amap_sdk_log&&(s=t.url+"t="+t.ya.join(";"),window.amap_sdk_log("loadNebulaTile"+s+"-"+Date.now())),AMap.getConfig().vdataProxy&&(t.url=AMap.getConfig().vdataProxy+"/"+t.url.split("/")[3]+"/"+t.url.split("/")[4]),r.send("loadNebulaSourceTile",t,function(t,i){t&&e._map.emit("TileDecodeError",{type:"nebula",err:t}),i&&i.nebulaDatas&&(Y.Support.amapRunTime&&(Y.Support.amapRunTime.workerTime=i.amapRunTime),n(i.nebulaDatas))})):this.DZ.va(t,n)},Wn.prototype.RD=function(t,i){return AMap.getConfig().vdataProxy&&(t.url=AMap.getConfig().vdataProxy+"/"+t.url.split("/")[3]+"/"+t.url.split("/")[4]),this.Uh.send("loadNebulaSourceTileSdf",t,i)},Wn.prototype.loadDistrictSourceTile=function(t,i,n){t.request=this.Uh.send("loadDistrictSourceTile",i,function(t,i){i&&n(i)})},Wn.prototype.gX=function(t,i,n){t.request=this.Uh.send("loadMapboxVTSourceTile",i,function(t,i){i&&n(i)})},Wn.prototype.kX=function(t,i,n,s){t.request=this.Uh.send("reBufferMapboxVTSource",{MX:i,styles:n},function(t,i){i&&s(i)})},Wn.prototype.aG=function(t,i,n){var s=this;t.request=this.Uh.send("loadMapboxSourceTile",i,function(t,i){t&&s._map.emit("TileDecodeError",{type:"mapbox",err:t}),i&&n(i)})},Wn.prototype._C=function(t){this.Uh.send("processLabels",{id:t})},Wn.prototype.deleteTileStaticSDF=function(t){this.Uh.send("deleteTileStaticSDF",t)},Wn.prototype.Ha=function(i){this.Uh.send("updateParams",i),Y.forEach(this.ED,function(t){t.send("updateParams",i)})},Wn.prototype.Ka=function(i){this.Uh.send("updateMapStyle",i),Y.forEach(this.ED,function(t){t.send("updateMapStyle",i)})},Wn.prototype.bn=function(t,i){this.Uh.send("updateUserStyle",{Kd:t},i)},Wn.prototype.Ja=function(i){this.Uh.send("sendHttp",{protocol:i}),Y.forEach(this.ED,function(t){t.send("sendHttp",{protocol:i})})},Wn.prototype.innerLabelsLoadData=function(t,i){this.Uh.send("innerLabelsLoadData",t,i)},Wn.prototype.signal=function(t,i){},Wn.prototype.dynamicTextSDFInfoLoaded=function(t,i){this.emit("dynamicTextSDFInfoLoaded",{data:i})},Wn.prototype.dynamicTextVerticeLoaded=function(t,i){this.emit("dynamicTextVerticeLoaded",i)},Wn.prototype.dynamicTextVerticeLoadedByTile=function(t,i){this.emit("dynamicTextVerticeLoadedByTile",i)},Wn.prototype.iconImageLoaded=function(t,i){this.emit("iconImageLoaded",i)},Wn.prototype.getSDFData=function(t,i){this.Uh.send("getSDFData",t,function(t){i&&i(t)})},Wn.prototype.loadWordsByFront=function(t,i,n){this.emit("loadWordsByFront",{mG:i,cb:n})},Wn.prototype.QB=function(t,i){this.jD().send("setPathWebgl",t,i)},Wn.prototype.JB=function(t,i){this.jD().send("sendIndoorRequest",t,i)},Wn.prototype.destroy=function(){this.jD().send("destroy","destroy"),this.Wh&&this.Wh.terminate();for(var t=0,i=this.HD;t<i.length;t++){var n=i[t];n&&n.terminate()}this.DZ&&delete this.DZ,this.Wh&&delete this.Wh},Wn.prototype.request=function(t,n,s){window.amap_sdk_log&&window.amap_sdk_log("data-request:"+n+"-"+Date.now());var e=new XMLHttpRequest;return e.onreadystatechange=function(){var t,i;4===e.readyState&&200===e.status&&(window.amap_sdk_log&&window.amap_sdk_log("data-loaded:"+n+"-"+Date.now()),t=e.getResponseHeader("content-type"),i=e.response,"application/x-protobuf"===t?s(null,i):Bn||(Bn=!0,console.log("<AMap JSAPI> KEY异常。")))},e.onerror=function(t){s("error")},e.open("GET",n,!0),e.responseType="arraybuffer",e.send(),{cancel:function(){e.abort()}}},Wn.prototype.jD=function(){var t=this.GD%this.ND;return this.GD=1+t,this.ED[t]},Wn.prototype.updateDataVersion=function(t,i){this.emit("updateDataVersion",{version:i})},Wn.prototype.tv=function(){var t=this;this._map.on("movestart",function(){t.iv=!0,t.ev()}),this._map.on("moveend",function(){t.iv=!1,t.ev()}),this._map.on("dragstart",function(){t._dragging=!0,t.ev()}),this._map.on("dragend",function(){t._dragging=!1,t.ev()}),this._map.on("zoomstart",function(){t.lt=!0,t.ev()}),this._map.on("zoomend",function(){t.lt=!1,t.ev()})},Wn.prototype.ev=function(){var i=!1;(this._dragging||this.lt||this.iv)&&(i=!0),this.nv!==i&&(this.Uh.send("setMainThreadBusy",i),Y.forEach(this.ED,function(t){t.send("setMainThreadBusy",i)})),this.nv=i},Wn.prototype.WD=function(){for(var t=0;t<this.ND;t++)if(!this.ED[t].UD)return!1;return!0},Wn);function Wn(t){var i=jn.call(this)||this;if(i._map=t,i.dE=!1,i._dragging=!1,i.lt=!1,i.nv=!1,i.iv=!1,i.GD=0,i.ND=1,i.HD=[],i.ED=[],i.VD=[],i.ZD=[],i.YD=0,i.DZ=new Gn(i),i.pE=function(){window.amap_sdk_log&&window.amap_sdk_log("initWorker:"+Date.now()),i.YD+=1,i.YD===i.ED.length+1&&(i.dE=!0,i._map.setNeedUpdate(!0))},window._PreLoadedWorker){var n=window._PreLoadedWorker,s=new Y.Bh(n,i,"AMap.nebula");i.HD.push(n),i.ED.push(s),s.UD=!0,i.pE()}else{for(var e=0;e<i.ND;e++)n=new Worker(AMap.getConfig().workerUrl),s=new Y.Bh(n,i,"AMap.nebula"),i.HD.push(n),i.ED.push(s);for(var r=0,h=i.ED;r<h.length;r++)!function(t){t.send("initCryptWorker",!0,function(){t.UD=!0,i.pE()})}(s=h[r])}return i.Wh=new Worker(AMap.getConfig().workerUrl),i.Uh=new Y.Bh(i.Wh,i,"AMap.SDF"),i.Uh.send("initCryptWorker",!0,function(){i.Uh.UD=!0,i.pE()}),i.tv(),i}var Gn=(Nn.prototype.va=function(s,e){var t,n,r=this,h=s.url;s&&s.offlineServer?(h=s.url+Y.l0(s.ya[0]),window&&window.AmapCcbParams&&(i=(t=window.AmapCcbParams).vectorTileServer,t=t.vectorTileParam,n=[],Y.forEach(t,function(t,i){n.push(i+"="+t)}),h=i+Y.l0(s.ya[0])+"?"+n.join("&"))):(AMap.getConfig().vdataProxy&&(s.url=AMap.getConfig().vdataProxy+"/"+s.url.split("/")[3]+"/"+s.url.split("/")[4]),h=(h=(h=s.url+("?key="+AMap.getConfig().key+"&flds="+s.hH)+"&t="+s.ya.join(";")).replace("nebula/v3","nebula/v2")).replace("oversea/v3","oversea/v2"),h+="&p=3"),window.amap_sdk_log&&window.amap_sdk_log("data-request:"+h+"-"+Date.now()),Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["data-request"]&&(Y.Support.amapRunTime.workerTime["data-request"]=Date.now());var o=new Y.vH,i=qt.Ajax(h,{responseType:"arraybuffer"},function(t,i){var n;window.amap_sdk_log&&window.amap_sdk_log("data-loaded:"+h+"-"+Date.now()),Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["data-loaded"]&&(Y.Support.amapRunTime.workerTime["data-loaded"]=Date.now()),"complete"===t&&(s.buffer=i.data,n=i.g2,i=r.parent.jD().send("decodeNebulaSourceTile",s,function(t,i){t&&r.parent._map.emit("TileDecodeError",{type:"nebula",err:t}),i&&i.nebulaDatas&&(window.AmapCcbVerify&&!window.AmapCcbVerify(n)||(Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["data-decode-begin"]&&(Y.Support.amapRunTime.workerTime["data-decode-begin"]=i.amapRunTime["data-decode-begin"]),Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["data-decode-end"]&&(Y.Support.amapRunTime.workerTime["data-decode-end"]=i.amapRunTime["data-decode-end"]),Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["style-parse-begin"]&&(Y.Support.amapRunTime.workerTime["style-parse-begin"]=i.amapRunTime["style-parse-begin"]),Y.Support.amapRunTime&&!Y.Support.amapRunTime.workerTime["style-parse-end"]&&(Y.Support.amapRunTime.workerTime["style-parse-end"]=i.amapRunTime["data-decode-end"]),0===i.nebulaDatas.length&&1===s.ya.length&&(t=s.ya[0].split(",").slice(0,3),i.nebulaDatas.push({zo:new Y.ca(+t[0],+t[1],+t[2]),ba:null})),e(i.nebulaDatas)))}),o._H(i))});return o._H({cancel:i.abort.bind(i)}),o},Nn.prototype.RD=function(n,s){var e=this;t=(t=(t=n.url+("?key="+AMap.getConfig().key)+"&flds=poi,roadname&t="+n.ya.join(";")).replace("nebula/v3","nebula/v2")).replace("oversea/v3","oversea/v2"),t+="&p=3";var r=new Y.vH,t=qt.Ajax(t,{responseType:"arraybuffer"},function(t,i){"complete"===t&&(n.buffer=i.data,i=e.parent.Uh.send("decodeNebulaSourceTileSdf",n,function(t,i){s(t,i)}),r._H(i))});return r._H({cancel:t.abort.bind(t)}),r},Nn);function Nn(t){this.parent=t}var _n=(Un.prototype.ov=function(t){var i=t.gl;if(this.buffer||(this.buffer=new Y.yp(t,new Uint16Array(0),8)),this.texture||(this.texture=t.createTexture({height:1024,width:1024,data:null},{Yi:!0}),this.texture.bind(i.CLAMP_TO_EDGE,i.NEAREST,i.LINEAR)),this.av||(this.av=t.createFramebuffer(1024,1024)),!this.Pc){for(var n=new Uint16Array(192),s=0;s<32;s++){var e=6*s,r=4*s;n[e]=r,n[1+e]=1+r,n[2+e]=2+r,n[3+e]=r,n[4+e]=2+r,n[5+e]=3+r}this.Pc=t.ve(n)}},Un.prototype.sv=function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];this.rv[s.hv]=s.name,this.images[s.name]=s.img,this.lv.push(s.name),this.jG[s.name]={width:s.width,height:s.height}}},Un.prototype.update=function(t){this.ov(t.context),this.uv(t,this.lv),this.lv=[]},Un.prototype.uv=function(t,i){if(0!==i.length){for(var n=t.context,s=n.gl,e=0,r=i;e<r.length;e++){var h,o=r[e];this.De[o]||((h=n.createTexture(this.images[o],{Yi:!0})).bind(s.CLAMP_TO_EDGE,s.LINEAR,s.LINEAR),this.De[o]=h)}for(var a=[],u=0,f=this.rv.length;u<f;u++){var c=this.rv[u],d=void 0===(c=(l=this.jG[c]||{}).width)?512:c,v=void 0===(c=l.height)?1024:c,l=4*u*4,c=this.cv(u);a[l]=0,a[1+l]=0,a[2+l]=c[0],a[3+l]=c[1],a[4+l]=0,a[5+l]=v,a[6+l]=c[0],a[7+l]=c[1]+v,a[8+l]=d,a[9+l]=v,a[10+l]=c[0]+d,a[11+l]=c[1]+v,a[12+l]=d,a[13+l]=0,a[14+l]=c[0]+d,a[15+l]=c[1]}var p=n.fe(new Uint16Array(a),8),m=t.Hn();this.fv(),this.av.Wi.set(this.texture.texture);var y=this.getSize();for(n.bindFramebuffer.set(this.av.framebuffer),t=n.be.current,n.be.set([0,0,y[0],y[1]]),u=0,f=this.rv.length;u<f;u++){var b=this.rv[u],g=this.jG[b]||{},k=g.width,d=void 0===k?512:k,v=void 0===(g=g.height)?1024:g;b&&m.Ce({u_sourceTexture:this.De[b],u_sourceTextureSize:[d,v],u_targetTextureSize:y},{a_sourceTexturePos:{buffer:p,type:"vec2",Re:8,offset:0},a_targetTexturePos:{buffer:p,type:"vec2",Re:8,offset:4}},6,this.Pc,void 0,void 0,void 0,void 0,void 0,6*u)}n.bindTexture.set(null),this.texture.bind(s.CLAMP_TO_EDGE,s.NEAREST,s.LINEAR),n.be.set(t),n.bindFramebuffer.set(null)}},Un.prototype.getSize=function(){return[1024,1024*this.rv.length]},Un.prototype.destroy=function(){this.buffer&&(this.buffer.destroy(),delete this.buffer),this.texture&&(this.texture.destroy(),delete this.texture);for(var t=0,i=this.De;t<i.length;t++)i[t].destroy();this.av&&(this.av.destroy(),delete this.av),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.images={},this.lv=[],this.rv=[],this.De={}},Un.prototype.fv=function(){var t=this.getSize();this.texture.update({width:t[0],height:t[1],data:null},{resize:!0})},Un.prototype.cv=function(t){return[0,1024*t]},Un);function Un(){this.pv=0,this.lv=[],this.rv=[],this.images={},this.jG={},this.De={},this.dv=[256,256]}var Yn,Zn="labelsLayer",Jn={visible:!0,zIndex:120,opacity:1,collision:!0,animation:!0,allowCollision:!1,zooms:Y.zoomRange,VT:!1},It=(Yn=Wt,Y.Ei(Hn,Yn),Hn.prototype.getSourceConfig=function(){return{id:this.hS,type:Zn}},Hn.prototype.getState=function(){return Yn.prototype.getLayerConfig.call(this)},Hn.prototype.co=function(){return this.hS},Hn.prototype.vi=function(t){var i=this.fz;return(t=i&&i.vi(t,this.hS)||"")?this.getSource().Ds(t):null},Hn.prototype.Do=function(t){return t=Yn.prototype.Do.call(this,t),this.map&&this.uz(this.map),t},Hn.prototype.v$=function(){this.fz&&this.fz.remove(this)},Hn.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Hn.prototype.IL=function(t){var i=this.fz,n=this.source;return!!(t&&i&&n&&(i=i.$f||{},t=n.zL(t)))&&!!i[t]},Hn.prototype.uz=function(t){(this.fz=t.fS()).add(this)},Hn);function Hn(t){var i=Yn.call(this,t=void 0===t?{}:t)||this;return i.CLASS_NAME="AMap.LabelsLayer",i._opts={id:Zn,type:Zn,opacity:1,visible:1},i._opts=Y.assign({},Jn,t),i.xt=i._opts.zooms,i.Qh=void 0===t.zIndex?120:t.zIndex,i.il=void 0===t.visible||t.visible,i.tl=void 0===t.opacity?1:t.opacity,i}var Vn,qn=(Vn=It,Y.Ei(Qn,Vn),Qn.prototype.getCollision=function(){return this._opts.collision},Qn.prototype.setCollision=function(t){this._opts.collision=t=void 0===t||t,this.to({vv:!1})},Qn.prototype.getAllowCollision=function(){return this._opts.allowCollision},Qn.prototype.setAllowCollision=function(t){this._opts.allowCollision=t=void 0===t||t,this.to({vv:!1})},Qn.prototype.getOpacity=function(){return this._opts.opacity},Qn.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.tl=t,this.to({vv:!0}))},Qn.prototype.getZooms=function(){return this._opts.zooms},Qn.prototype.setZooms=function(t){void 0!==t&&(this._opts.zooms=t,this.xt=t,this.to({vv:!0}))},Qn.prototype.getzIndex=function(){return this._opts.zIndex},Qn.prototype.setzIndex=function(t){void 0!==t&&(this._opts.zIndex=t,this.Qh=t,this.to({vv:!0}))},Qn.prototype.add=function(t){Array.isArray(t)||(t=[t]),this._add(t),(t=this.getSource())&&t.add(this.mv,this._opts,this.to.bind(this))},Qn.prototype.remove=function(t){Array.isArray(t)||(t=[t]),this._remove(t),(t=this.getSource())&&t.remove(this.mv,this._opts,this.to.bind(this))},Qn.prototype.clear=function(){this.mv={};var t=this.getSource();t&&(t.clear(),this.to({vv:!1}))},Qn.prototype.show=function(){Vn.prototype.show.call(this)},Qn.prototype.hide=function(){Vn.prototype.hide.call(this)},Qn.prototype.getAllOverlays=function(){var t,i,n=this.mv,s=[];for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&s.push(i);return s},Qn.prototype.getState=function(){var t=this._opts;return{zIndex:this.Qh,zooms:this.xt,visible:this.il,opacity:this.tl,collision:t.collision,animation:t.animation,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},Qn.prototype.setTop=function(t,i){var n=this.Kl;t&&(i?(n&&n.hS!==t.hS&&n.setTop(!1),this.Kl=t):this.Kl=null)},Qn.prototype.Kh=function(t){Vn.prototype.Kh.call(this,t);var i=this.mv;Object.keys(i).length&&t.add(i,this._opts,this.to.bind(this,{vv:!1}))},Qn.prototype.to=function(t){var i=this,t=(t=void 0===t?{}:t).vv;this.map&&(void 0===t||t?(t=this.getSource())&&t.update(this._opts,function(){i.map&&i.map.setNeedUpdate(!0)}):this.map.setNeedUpdate(!0))},Qn.prototype.onAdd=function(){var t,i=this.mv;for(t in i)i.hasOwnProperty(t)&&i[t].Cs(this)},Qn.prototype.v$=function(){Vn.prototype.v$.call(this);var t,i=this.mv;for(t in i)i.hasOwnProperty(t)&&i[t].Cs(null)},Qn.prototype._add=function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];(this.mv[s.hS]=s).Cs(this)}},Qn.prototype._remove=function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];delete this.mv[s.hS],s.Cs(null)}},Y.dZ([Y.pZ("LabelsLayer")],Qn));function Qn(t){return(t=Vn.call(this,t=void 0===t?{}:t)||this).mv={},t}var Kn=($n.prototype.addImage=function(e,r){var h=this;this.getImage(e)?console.log("there is already a image named "+e):(this.zH.SH(e,function(t,i){r.cb&&r.cb(t,i)}),this.zH.has(e)||this.zH.nS(e,function(s){h.map.z_.loadImage(r.url,{name:e,type:"userImage",cb:function(t){var i,n;t&&t.img?(n=h.map.getContext())&&(i=n.createTexture(t.img,{Zi:!0}),t=r.filter?n.gl[r.filter]:n.gl.LINEAR,n=r.wrap?n.gl[r.wrap]:n.gl.CLAMP_TO_EDGE,i.bind(n,t,t),h.De[e]=i,s(null,i)):s(new Error("no img"))}})}))},$n.prototype.addImageBitmap=function(e,r){var h=this,o=r.url;this.getImage(o)?console.log("there is already a image named "+o):(this.zH.SH(o,function(t,i){r.cb&&r.cb(t,i)}),this.zH.has(o)||this.zH.nS(o,function(t){var i={img:e,startX:0,startY:0,status:Y.uc.LOADED,height:e.height,width:e.width,type:"userImage"};h.map.z_.addImageData(o,i);var s=(n=h.map.getContext()).createTexture(i.img,{Zi:!0}),i=r.filter?n.gl[r.filter]:n.gl.LINEAR,n=r.wrap?n.gl[r.wrap]:n.gl.CLAMP_TO_EDGE;s.bind(n,i,i),t(null,h.De[o]=s)}))},$n.prototype.getImage=function(t){return this.De[t]},$n.prototype.RH=function(t){var i=this.De[t];i&&(delete this.De[t],i.destroy())},$n.prototype.MH=function(t){return this.zH.has(t)},$n.prototype.L_=function(){var t=w.create("canvas",null);t.getContext||console.error("createArrowTexture error"),t.height=64,t.width=64;var i=t.getContext("2d");i?(i.fillStyle="white",i.beginPath(),i.moveTo(8,56),i.lineTo(32,36),i.lineTo(58,56),i.lineTo(58,36),i.lineTo(32,14),i.lineTo(8,36),i.fill(),(t=(i=this.map.getContext()).createTexture(t,{Zi:!0})).bind(i.gl.CLAMP_TO_EDGE,i.gl.LINEAR,i.gl.LINEAR),this.De.AMapArrow=t):console.error("createArrowTexture error")},$n.prototype.AH=function(){this.addImage("emptyTexture",{url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"})},$n);function $n(t){this.map=t,this.De={},this.zH=new Y.IH,this.L_(),this.AH()}var ts,is=(ts=Wt,Y.Ei(ns,ts),ns.prototype.getSourceConfig=function(){return{id:this._id,type:"sky"}},ns.prototype.destroy=function(){this._id&&(this._id="")},ns.prototype.co=function(){return this._id},ns.prototype.getState=function(){return{visible:this.il,opacity:1,skyColor:this.$C,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},ns.prototype.lo=function(){return!0},ns);function ns(t){var i=ts.call(this,t=void 0===t?{visible:!0}:t)||this;return i.CLASS_NAME="AMap.SkyLayer",i._id="sky_"+Y.Util.uuid(),i.il=void 0===t.visible||t.visible,i.$C=t.skyColor,i.$C=i.$C&&Y.Util.color2RgbaArray(i.$C),i.Qh=t.zIndex||500,i._rejectMapMask=!0,i}var ss=(es.prototype.cS=function(t,i,n){var s=(this.wf=i).viewState,e=s.projectionId,r=s.viewMode;s.zoom,this.If=Y.V[e],this._viewMode=r,this.reset(),this.Of();for(var h=this._map,o={},a=0,u=this.Tw();a<u.length;a++){var f=u[a],c=f.getLayerConfig(),l=f._opts,d=f.hS,v=f.getRender();if(v){var p,m=n[d];if(m)for(var y in m)m.hasOwnProperty(y)&&(p=m[y],"AMap.Inner.LabelsLayer"===f.CLASS_NAME&&"other"===y||"AMap.LabelsLayer"===f.CLASS_NAME&&"tile"===y||!p||(p=v.Hz(t,i,this,p,h,c))&&(o[d]=p,(l.collision||l.allowCollision)&&(this.YL=!1),l.allowCollision&&(this.UT=!1)))}}this.Ps=o,e=(s=this._map.getMapState()).rotating,r=s.zooming,s=s.panning,r||s||this.reset(),this.YL&&this.UT&&(e||r||s)||this.Ff(),s=void 0===(s=(r=this.Ef()).Uf)?{}:s,r=r.$f,this.$f=void 0===r?{}:r,this.Uf=s},es.prototype.uS=function(){return this.LC},es.prototype.add=function(t){this.LC[t.hS]=t},es.prototype.remove=function(t){t&&delete this.LC[t.hS]},es.prototype.destroy=function(){this.LC&&(this.LC={}),this.Uf&&(this.Uf={},delete this.Uf),this.$f&&(this.$f={},delete this.$f)},es.prototype.vi=function(t,i,n){if(void 0===n&&(n=!1),!this._map)return null;if(!this._map.getStatus().pickWhenMoving&&this._map.TL())return null;if(t&&this._p){var s=this._map.getMapsContainer(),t=(s=w.mousePos(s,t,this._map))[0],s=s[1];if((t=this._p.search({ja:t-1,Fa:s-1,Oa:t+1,Ea:s+1})).length){if(s=this.NL(t,i),!(t=this.sP(s)))return null;if(i=t.id,(s=this.DC(i))&&s.Nf&&(s=(t=s.Nf[i])&&t.data.extData||{},this.Uf[i])){if(n)return[s.Lp,s.Ap];if("poi"===s.type)return{type:s.type,id:s.id,lnglat:t.data.position,name:t.data.name};if(!s.type)return s.id}}}return null},es.prototype.search=function(t){for(var i=[],n=0,s=this._p.search(t);n<s.length;n++){var e,r=s[n],h=r.id;(e=this.FC(h))&&"AMap.Inner.LabelsLayer"===e.CLASS_NAME&&this.TC(h)&&i.push(r)}return i},es.prototype.reset=function(){this.Uf={},this.$f={}},es.prototype.tC=function(){return this._p},es.prototype.iC=function(t,i){var s=void 0===(n=(t=void 0===t?{}:t).x)?0:n,r=void 0===(e=t.y)?0:e,h=t.width,o=t.height,a=(i=void 0===i?{}:i).id,u=i.rank,n=i.padding,e=i.type,t=i.name,i=Y.tc._d;return{id:a,name:t,type:void 0===e?"":e,rank:u||1,ja:s-(i=n||i||0),Fa:r-i,Oa:s+(void 0===h?0:h)+i,Ea:r+(void 0===o?0:o)+i}},es.prototype.NL=function(t,i){for(var n=[],s=0,e=t=void 0===t?[]:t;s<e.length;s++){var r,h=e[s];!h.id||(r=this.FC(h.id))&&r.hS===i&&n.push(h)}return n},es.prototype.sP=function(t){for(var i=this.Uf||{},n=[],s=0,e=t;s<e.length;s++){var r=e[s];i[r.id]&&n.push(r)}for(var h=-1/0,o=null,a=0,u=n;a<u.length;a++){var f=u[a],c=f.rank;h<c&&(h=c,o=f)}return o},es.prototype.Tw=function(){var t,i,n=this.LC,s=[];for(t in n)n.hasOwnProperty(t)&&(i=n[t],s.push(i));return s.sort(function(t,i){return i.Qh-t.Qh}),s},es.prototype.rd=function(t,i){var n=i.anchorOffset,i=void 0===(i=i.size)?[0,0]:i;return{x:(n=Y.vector.add(t,n))[0],y:n[1],width:i[0],height:i[1]}},es.prototype.hd=function(t,i,n){var s=i.offsetX,e=i.offsetY,r=i.w,i=i.h;return{x:t[0]+(void 0===s?0:s)*n,y:t[1]+(void 0===e?0:e)*n,width:(void 0===r?0:r)*n,height:(void 0===i?0:i)*n}},es.prototype.Ff=function(){var t=this.Ps,i=this.wf&&this.wf.viewState,n=this.ad,s=this.$f;if(i){var e,r={viewState:i,size:this.wf.size,transform:this.If,view:this._view,viewMode:this._viewMode,positionType:"relative"},h=i.zoom;for(e in t)if(t.hasOwnProperty(e)&&t[e]){var o=t[e],a=o.coords,u=o.style,f=o.Nf;if(o=this.LC[e]){var c,l,d,v,p,m,y,b,g,k,M=o.getRender().Jz(),w=M.Sa,x=o.Qh;for(c in a)a.hasOwnProperty(c)&&(d=(k=a[c]).origin,m=k.icon,b=k.padding,(l=u[c]).forceShow,this.TC(c)||(s[c]=1),s[c]||(v=(p=(y=f[c]).data.extData||{}).Sa||w||[0,0],d=(k=Y.vector.add(d,[v[0],v[1],0]))[0],v=k[1],k=k[2],r.centerCoord=M.centerCoord,v=Y.LabelsRenderUtil.r0(d,v,k,h,r),k={id:c,rank:Y.LabelsRenderUtil.getRank(y,{forceShow:l.forceShow,_z:x}),name:y.data.name,type:p.type||""},p=this.rd(v,m),m=this.PC(l)||Y.zoomRange,m=Y.Util.dS(h,m),l.showIcon&&m&&p.width&&p.height&&(g=this.iC(p,k),n.push(g)),g=1,y.data.extData.Lp&&y.data.extData.Ap&&(g=(y=this._map.mapStyle.dn(y.data.extData.Lp,y.data.extData.Ap,i.optimalZoom))&&l.text?y.fontSize/l.text.style.fontSize:1),b=this.hd(v,b,g),g=this.OC(l)||[2,20],g=Y.Util.dS(h,g),l.showText&&g&&b.width&&b.height&&(k=this.iC(b,k),n.push(k))))}}this.ld(n)}},es.prototype.Ef=function(){var t={},i=this.$f;if(!this.wf)return{};var n=(this.wf&&this.wf.viewState).zoom,s=this.Ps,e={};if(this.YL){for(var r in s)if(s.hasOwnProperty(r)&&s[r]){var h,o=s[r],a=o.Nf,u=void 0===a?{}:a;for(h in o.coords,o.style,u)u.hasOwnProperty(h)&&(t[h]=1)}return{Uf:t,$f:i}}for(r in s)if(s.hasOwnProperty(r)&&s[r]){var f,c,l=s[r],d=l.Nf,v=void 0===d?{}:d,p=void 0===(l=(l.coords,l.style))?{}:l,m=(z=this.LC[r]).Qh;for(f in v)v.hasOwnProperty(f)&&(c=p[f],e[c=Y.LabelsRenderUtil.getRank(v[f],{forceShow:c.forceShow,_z:m})]||(e[c]={}),e[c][f]=v[f])}for(var y=Y.labelsUtil.rank(Object.keys(e)),b=y.length,g=this.wf,k={viewState:g.viewState,size:g.size,transform:this.If,view:this._view,viewMode:this._viewMode,positionType:"relative"},M=b-1;0<=M;M--)for(var w,x=e[y[M]],A=(w=Object.keys(x)).length-1;0<=A;A--){var z,C=w[A];if(!i[C]&&(z=this.FC(C))){var S=z._opts||{};if(!S.collision&&this.UT||S.VT)t[C]=1;else{var L,T,I=z.getRender().Jz(),D=I.Sa,O=(L=this.DC(C)).style,E=L.coords,R=L.Nf;if((T=O[C])&&T.forceShow)t[C]=1;else{if(L=(S=E[C]).icon||{},O=S.padding||{},E=S.origin||{},R=((S=R[C]).data.extData||{}).Sa||D||[0,0],E=(D=Y.vector.add(E,[R[0],R[1],0]))[0],R=D[1],D=D[2],k.centerCoord=I.centerCoord,R=Y.LabelsRenderUtil.r0(E,R,D,n,k),(D=L.size)[0]&&D[1])for(var P,j=this.rd(R,L),B=this.iC(j),F=(P=this._p.search(B)).length,W=0;W<F;W++){var G=P[W];G.id===C?t[G.id]=1:this.BC(C,G.id)&&(i[G.id]=1)}j=this.wf&&this.wf.viewState,B=1;if(S.data.extData.Lp&&S.data.extData.Ap&&(B=(j=this._map.mapStyle.dn(S.data.extData.Lp,S.data.extData.Ap,j.optimalZoom))&&T.text?j.fontSize/T.text.style.fontSize:1),(B=this.hd(R,O,B)).width&&B.height)for(var N,B=this.iC(B),_=(N=this._p.search(B)).length,W=0;W<_;W++){var U=N[W];U.id===C?t[U.id]=1:this.BC(C,U.id)&&(i[U.id]=1)}}}}}return{Uf:t,$f:i}},es.prototype.ld=function(t){this._p&&(this._p.clear(),this._p.load(t))},es.prototype.Of=function(){this._p&&(this._p.clear(),this.ad=[])},es.prototype.DC=function(t){var i,n,s=this.Ps;for(n in s)if(s.hasOwnProperty(n)){var e=s[n];if(e&&e.Nf&&e.Nf[t]){i=e;break}}return i||{}},es.prototype.jC=function(t){var i,n=this.Ps,s="";for(i in n)if(n.hasOwnProperty(i)){var e=n[i]||{};if(e.Nf&&e.Nf[t]){s=i;break}}return s},es.prototype.FC=function(t){return(t=this.jC(t))?this.LC[t]:null},es.prototype.TC=function(t){var i=this.DC(t),n=this._map.qz(),s=this._map.getLayerByClass("AMap.MaskLayer"),e=this._map.jH();if(i){var r=i.Nf,h=i.style[t];if(!h)return!1;if("poi"===(i=r[t].data.extData||{}).type&&!1===n)return!1;if(!h.visible)return!1;if(n=this.EC(h),h=this.wf.viewState.zoom,!Y.Util.dS(h,n))return!1;if(n=this._map.getLayerByClass("AMap.IndoorMap"),r[t]&&i.bz&&n&&n.yD().show)return!1;if(s){if(s=s.getRender(),e)return!0;if(s&&!s.EH(r[t].data.position,this.wf))return!1}return!0}return!1},es.prototype.BC=function(t,i,n){if(void 0===n&&(n=!1),s=this.DC(i)){var s,e=s.style,r=this.FC(t),h=r&&r._opts||{},t=(s=this.FC(i))&&s._opts||{};if(e[i].forceShow)return n&&console.log("","   -1- ",1),!1;if(r&&s){if(r.hS!==s.hS&&!h.allowCollision&&!t.allowCollision)return n&&console.log("","   -2- ",1),!1;if(r.hS===s.hS&&!t.collision)return n&&console.log("","   -3- ",1),!1}}return n&&console.log("","   -4- ",1),!0},es.prototype.EC=function(t){var n=(i=this.PC(t)||[])[0],s=i[1],e=this.OC(t)||[],i=e[0],t=e[1];return[e=n&&i?n<=i?n:i:n||i||2,t=n&&i?s<=t?t:s:s||t||Y.zoomRange[1]]},es.prototype.PC=function(t){return t.icon&&t.icon[0]&&t.icon[0].zooms},es.prototype.OC=function(t){return t.text&&t.text.zooms},Y.dZ([Y.pZ("LabelsManager")],es));function es(t){this.LC={},this.Uf={},this.$f={},this.Ps={},this._p=Y.rbush(),this.ad=[],this._viewMode="2D",this.YL=!0,this.UT=!0,this._map=t,this._view=t.getView()}var rs,hs=(rs=Wt,Y.Ei(os,rs),os.prototype.getState=function(){return{visible:this.il,opacity:this.tl,zIndex:this.Qh,layer:this,path:this.$x,depthTest:this.AF,ce:this.IF}},os.prototype.setMask=function(t){t&&(this.$x=t,this.getSource().CS(),null!==(t=this.map)&&void 0!==t&&t.setNeedUpdate(!1))},os.prototype.getSourceConfig=function(){return{id:this._id,type:"mask",zooms:Y.zoomRange}},os.prototype.co=function(){return this._id},os.prototype.lo=function(){return!0},os);function os(t){var i=rs.call(this,t)||this;return i.CLASS_NAME="AMap.MaskLayer",i.$x=t.path,i.Qh=t.zIndex||-100,i.tl=void 0===t.opacity?1:t.opacity,i.il=void 0===t.visible||t.visible,i.xt=t.zooms||Y.zoomRange,i}var as,us="Nebula.labelsLayer",cs="nebulaLabel",ls=(as=Wt,Y.Ei(ds,as),ds.prototype.getState=function(){return Y.assign({},{layer:this,rejectMapMask:this._rejectMapMask},as.prototype.getLayerConfig.call(this))},ds.prototype.getSourceConfig=function(){var t=AMap.getConfig().protocol;return{id:cs,type:cs,tileUrl:t+(Y.Support.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:Y.zoomRange}},ds.prototype.co=function(){return cs},ds.prototype.vi=function(t){return null},ds.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},ds.prototype.Do=function(t){return as.prototype.Do.call(this,t)},ds);function ds(t){var i=as.call(this,t=void 0===t?{}:t)||this;return i.CLASS_NAME="AMap.Nebula.LabelsLayer",i._opts={id:us,type:us,opacity:1,visible:1,collision:!0,allowCollision:!1},i._opts=Y.assign({},i._opts,t),i.Qh=t.labelzIndex||100,i.il=!1!==t.showLabel,i.tl=void 0===t.opacity?1:t.opacity,i}var vs=(ps.prototype.qk=function(t){return t=Object.keys(t),this.Uk+t.length<this.uf},ps.prototype.getSize=function(){return[this.maxWidth,this.Uk/this.Hk*this.unit]},ps.prototype.clear=function(){},ps.prototype.destroy=function(){},ps.prototype.Rk=function(t){var i=this.Vk,n=this.$k,s=t[Y.dY.iconWidth],t=t[Y.dY.iconHeight];return this.pY<t&&(this.pY=t),i+s<=this.maxWidth||(this.$k+=this.pY,n=this.$k,this.Vk=i=0,this.pY=t),this.Vk+=s,this.nU=[i,n],{startX:i,startY:n}},ps);function ps(){this.Uk=0,this.unit=32,this.Hk=128,this.maxWidth=this.unit*this.Hk,this.maxHeight=this.unit*this.Hk,this.uf=this.maxWidth/this.unit*(this.maxHeight/this.unit),this.Kv=!1,this.Vk=0,this.$k=0,this.pY=0,this.nU=[0,0],this.Es={};var t=document.createElement("canvas");t.width=this.maxWidth,t.height=this.maxHeight,this.mY=t,this.Nz=t.getContext("2d")}var ms=(ys.prototype.play=function(t){for(var i=t,n=Date.now();0<i&&this.offset!==this.mG.length;){var s=this.mG[this.offset],e=this.bY.Rk(s.info),r=s.info[Y.dY.iconWidth],h=s.info[Y.dY.iconHeight];0<r&&0<h&&this.bY.Nz.putImageData(function(t,i,n,s){for(var e=(s=t.createImageData(n,s)).data,r=0;r<i.length;r++)e[4*r+0]=i[r],e[4*r+1]=i[r],e[4*r+2]=i[r],e[4*r+3]=255;return s}(this.bY.Nz,s.data,s.info[Y.dY.iconWidth],s.info[Y.dY.iconHeight]),e.startX,e.startY),s.pos=e,delete s.data,this.result.push(s),this.offset++,i=t-(Date.now()-n)}return this.offset===this.mG.length&&(this.bY.Kv=!0),this.result},Object.defineProperty(ys.prototype,"status",{get:function(){return this.offset>=this.mG.length?Y.vY.finish:Y.vY.pause},eb:!1,nb:!0}),ys);function ys(t,i){this.bY=t,this.mG=i,this.type="SDFCombineTask",this.offset=0,this.result=[]}var bs=(gs.prototype.dynamicTextSDFInfoLoaded=function(t){var i=this.map.R_;i&&"SDFManagerBase"!==i.CLASS_NAME&&(i.Ju(t.data),this.Eo())},gs.prototype.iconImageLoaded=function(t){for(var i=this,t=t.data,e=[],r={},n=0,s=t;n<s.length;n++)!function(n){r[n.url]=1;var s=n.data;e.push(new Promise(function(t){var i=new Image;i.src=n.data.data.data,i.onload=function(){t({img:i,name:n.data.data.hash,hv:n.data.ext.hv,width:s.width,height:s.height})}}))}(s[n]);Promise.all(e).then(function(t){i.map.so.sv(t)}),this.Eo()},gs.prototype.updateDataVersion=function(t){this.map.UH(t.version)},gs.prototype.destroy=function(){this.$$()},gs.prototype.Ia=function(){this.map.gn.on("dynamicTextSDFInfoLoaded",this.dynamicTextSDFInfoLoaded.bind(this)),this.map.gn.on("iconImageLoaded",this.iconImageLoaded.bind(this)),this.map.gn.on("updateDataVersion",this.updateDataVersion.bind(this))},gs.prototype.$$=function(){this.map.gn.clearEvents("dynamicTextSDFInfoLoaded"),this.map.gn.clearEvents("commonWordLoaded"),this.map.gn.clearEvents("iconImageLoaded"),this.map.gn.clearEvents("updateDataVersion")},gs.prototype.Eo=function(){this.map.setNeedUpdate(!0)},gs);function gs(t){this.map=t,this.Ia()}var ks=(Ms.prototype.CS=function(){this.AS=!1},Ms.prototype.getData=function(){var r=this,t=this.$E;if(this.AS)return this.AS;if(t){var i,e,h,o,a,n=Y.GeometryUtil.typePolygon(t),u={type:"Polygon",$S:new Array,polygons:new Array,BM:new Array,LS:{x:0,y:0}};return n&&"Polygon"===n?(t[0][0]instanceof Y.LngLat?u.LS=Y.lcs.getLocalByLnglat(t[0][0].toString()):u.LS=Y.lcs.getLocalByLnglat(t[0][0]),i=u.LS,e=i.x,h=i.y,Y.forEach(t,function(t,i){var s;0===i?Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(e,h,i.x,i.y))[0],n=n[1];u.$S.push(i.Sa[0]+t,i.Sa[1]+n)}):(s=[],Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(e,h,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}),u.BM.push(s))})):n&&"MultiPolygon"===n&&(u.type="MultiPolygon",t[0][0][0]instanceof Y.LngLat?u.LS=Y.lcs.getLocalByLnglat(t[0][0][0].toArray()):u.LS=Y.lcs.getLocalByLnglat(t[0][0][0]),n=u.LS,o=n.x,a=n.y,Y.forEach(t,function(t){var e=[],n=[];Y.forEach(t,function(t,i){var s;0===i?Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(o,a,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}):(s=[],Y.forEach(t,function(t){t instanceof Y.LngLat&&(t=t.toArray());var i=Y.lcs.getLocalByLnglat(t),t=(n=r.DS(o,a,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}),n.push(s))}),u.BM.push(n),u.polygons.push(e)})),this.AS=this.zw(u),this.AS}return!0},Ms.prototype.DS=function(t,i,n,s){return s-=i,[(t=n-t)*(i=Y.lcs.getSize())[0],s*i[1]]},Ms.prototype.zw=function(t){if(t.Oc=new Y._w,!t.Dc){t.Dc=new Y.K_;var i=[],n=[];"Polygon"===t.type?(i=[t.$S],n=[t.BM]):"MultiPolygon"===t.type&&(i=t.polygons,n=t.BM);for(var s=0;s<i.length;s++){for(var e=i[s],r=[],h=0;h<n[s].length;h++){var o=n[s][h];r.push(e.length/2),e.push.apply(e,o)}var a=t.Dc.Nx(e,r);0<a&&t.Oc.add(99,99,a,Y.zoomRange[0],Y.zoomRange[1])}return t}},Ms.prototype.EE=function(t){if(!t)return null;for(var i=[],n=t.length,s=0;s<n;s++){var e=t[s],e=[(e=this.map.pixelToLngLat(e,16)).lng,e.lat];i.push(e)}return[i]},Ms);function Ms(t,i,n){this.map=i,this.$E=t}var ws=(xs.prototype.destroy=function(){for(var t=0,i=this.MZ;t<i.length;t++){var n=i[t];"function"==typeof n.destroy&&n.destroy.call(n)}},xs);function xs(t){this.MZ=t,this.dynamic=new zs}var As,zs=(As=Y.Event,Y.Ei(Cs,As),Cs.prototype.has=function(t){return this.gV.has(t)},Cs.prototype.set=function(t,i,n){(n=void 0===n||n)?(n=this.gV.get(t),this.gV.set(t,i),n!==i&&this.emit(t,i)):this.gV.set(t,i)},Cs.prototype.get=function(t){return this.gV.get(t)},Cs.prototype.subscribe=function(t,i,n,s){var e=this;return this.on(t,i,n,s=void 0!==s&&s),function(){return e.off(t,i,n)}},Cs);function Cs(){var t=null!==As&&As.apply(this,arguments)||this;return t.gV=new Y.OZ,t}function Ss(t){var i=this;this.map=t,this.gZ=function(){return i.stencil.getData()},t=t.getOutseaDataType(),t=Y.vZ(t).boundsP16,this.stencil=new ks(t,this.map)}var Ls=(Ts.prototype.update=function(t){var i=this;void 0===t?this.PZ.forEach(function(t){i.jZ(t)}):(t=this.WZ(t))&&this.jZ(t)},Ts.prototype.add=function(t){if(this.PZ.has(t.group)){var i=this.PZ.get(t.group);if(null==i||!i.includes(t))return null!==(i=this.PZ.get(t.group))&&void 0!==i&&i.push(t),!0}return!1},Ts.prototype.remove=function(t){if(this.PZ.has(t.group)){var i=null===(i=this.PZ.get(t.group))||void 0===i?void 0:i.indexOf(t);if(-1!==i)return null!==(t=this.PZ.get(t.group))&&void 0!==t&&t.splice(i,1),!0}return!1},Ts.prototype.BZ=function(t){var i=0;return void 0===t?this.PZ.forEach(function(t){i+=t.length}):i+=null!==(t=null===(t=this.WZ(t))||void 0===t?void 0:t.length)&&void 0!==t?t:0,i},Ts.prototype.RZ=function(t,i,n){if(void 0===n&&(n=1),!this.WZ(t)||this.BZ(t)<=0)return!1;for(var s=0;s<n&&0<this.BZ(t);s++){var e=this.GZ(t,!0);void 0!==e&&(!i||null!=i&&i(e)?e.NZ():this.add(e))}return!0},Ts.prototype.GZ=function(t,i){var n,s;return void 0===i&&(i=!1),this.WZ(t)&&(s=null===(s=this.WZ(t))||void 0===s?void 0:s.pop(),i&&s&&null!==(n=s.UZ)&&void 0!==n&&n.call(s))?this.GZ(t,i):s},Ts.prototype.sort=function(t,i){return i.FZ()-t.FZ()},Ts.prototype.WZ=function(t){return this.PZ.get(t)},Ts.prototype.jZ=function(t){for(var i,n=0;n<t.length;n++){var s=t[n];null!==(i=null==s?void 0:s.UZ)&&void 0!==i&&i.call(s)&&(t.splice(n,1),n--)}t.sort(this.sort)},Ts.prototype.destroy=function(){this.PZ.clear()},Ts);function Ts(t){var i=this;this.PZ=new Y.OZ,this.ZZ=t,null!==(t=this.ZZ.Fz)&&void 0!==t&&t.forEach(function(t){i.PZ.set(t,[])}),this.ZZ._Z&&(this.sort=this.ZZ._Z)}var Is=(Ds.oX=function(t){var i=document.createElement("canvas");i.width=256,i.height=256;var n=i.getContext("2d");if(n){n.beginPath();for(var s="rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]/255+")",e=0;e<9;e++){n.lineWidth=1,n.strokeStyle=s;var r=256*e/8;8===e?(n.moveTo(.5,r-.5),n.lineTo(255.5,r-.5),n.moveTo(r-.5,.5),n.lineTo(r-.5,255.5)):(n.moveTo(.5,.5+r),n.lineTo(255.5,.5+r),n.moveTo(.5+r,.5),n.lineTo(.5+r,255.5))}return n.stroke(),"url("+i.toDataURL("image/png")+")"}},Ds.hX=function(t,i){var n=t.toLowerCase();if(n&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var s="#",e=1;e<4;e+=1)s+=n.slice(e,e+1).concat(n.slice(e,e+1));n=s}for(var r=[],e=1;e<7;e+=2)r.push(parseInt("0x"+n.slice(e,e+2),10));return i&&(i=parseFloat((parseInt(i,16)/255).toFixed(2)),r.push(i)),"RGB("+r.join(",")+")"}return n},Ds);function Ds(){}new Y.rW({});var Os=(Es.addLayerRender=function(t,i,n){i&&(this.YZ[t]=i),n&&(this.JZ[t]=n),this.XZ(!0)},Es.XZ=function(t){this.HZ=t},Es.VZ=function(){return this.HZ},Es.HZ=!0,Es.YZ={},Es.JZ={},Y.dZ([Y.pZ("LayerRenderManager")],Es));function Es(){}var Rs,Ps=(Rs=Y.Event,Y.Ei(js,Rs),js.prototype.c0=function(t){return[t+"static/style_icon/2.0/icon-normal-big.png",t+"static/style_icon/2.0/icon-biz-big.png"]},js.prototype.TL=function(){return!window.movingDraw&&(this.gm||this.Lv||this.lt||this.Cv)},js.prototype.getContext=function(){var t;return null===(t=this.mm)||void 0===t?void 0:t.context},js.prototype.getGL=function(){return this.gl},js.prototype.getView=function(){return this._view},js.prototype.loadData=function(){return this.IY},js.prototype.wX=function(){return{hardwareAccEnabled:Y.Support.hardwareAccEnabled}},js.prototype.getContainer=function(){return this.kv},js.prototype.getSize=function(){var t=this._view.getStatus().size;return new Y.Size(t[0],t[1])},js.prototype.addLayer=function(t){var i,n,s,e;"d"===Y.Support.baseRender&&/^(AMap\.DistrictLayer)|(AMap\.MapboxLayer)$/g.test(t.CLASS_NAME)?console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。"):(t.map=this,i=t.getSourceConfig(),n=this.Mv.addSource(i,this._view.au(),t),t.Hh(this.Mv),t.Kh(n),s=this.Rv(t,{}),t.Do(s),this.zv.push(t),this.zv.sort(function(t,i){return t.getOptions().zIndex-i.getOptions().zIndex}),"AMap.NebulaLayer"!==t.CLASS_NAME&&"AMap.TileLayer.RoadNet"!==t.CLASS_NAME||!1===this.showLabel||"w"!==this.baseRender||(e=this.getLayerByClass("AMap.Nebula.LabelsLayer"))||(e=new ls(Y.Ln(Y.Ln({},this.options),{rejectMapMask:!0})),this.addLayer(e)),"AMap.Nebula.LabelsLayer"!==t.CLASS_NAME&&"AMap.MapboxLayer"!==t.CLASS_NAME||!1===this.showLabel||"w"!==this.baseRender||((e=this.getLayerByClass("AMap.Inner.LabelsLayer"))?e.oP()&&e.show():(e=new Ii(Y.Ln(Y.Ln({},this.options),{rejectMapMask:!0})),this.addLayer(e)),e.getSource().addSource(i.id,n)),"AMap.NebulaLayer"===t.CLASS_NAME&&this.yS()&&(Y.some(this.zv,function(t){return"AMap.Buildings"===t.CLASS_NAME})||this.addLayer(new AMap.Buildings({zooms:[16.8,Y.zoomRange[1]],rejectMapMask:!0,zIndex:10,visible:!0,u$:!0}))),this.c$&&(Y.some(this.zv,function(t){return"AMap.MaskLayer"===t.CLASS_NAME})||this.d$||(this.d$=new hs({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$))),"3D"===this.getView().type&&(Y.some(this.zv,function(t){return"AMap.SkyLayer"===t.CLASS_NAME})||this.addLayer(new is({zIndex:-1,visible:!0,skyColor:this.$C}))),t.onAdd&&t.onAdd(),this.d_(),this.setNeedUpdate(!0))},js.prototype.removeLayer=function(t){for(var i,n=0;n<this.zv.length;n++)this.zv[n]===t&&(this.zv.splice(n,1),t.v$&&(t.v$(),"d"===Y.Support.baseRender&&null!==(i=t.getRender())&&void 0!==i&&i.destroy()),t.map=null,--n);this.d_(),this.setNeedUpdate(!0)},js.prototype.setLayers=function(t){for(var i=0;i<this.zv.length;i++)"AMap.VectorLayer"!==(n=this.zv[i]).CLASS_NAME&&this.removeLayer(n);for(var n,i=0;i<t.length;i++)(n=t[i]).setMap(this)},js.prototype.getLayers=function(){return this.zv.filter(function(t){return!t._opts||!t._opts.TF})},js.prototype.DF=function(){return this.zv},js.prototype.getDefaultLayer=function(){for(var t=this.getLayers(),i=0;i<t.length;i++){var n=t[i];if(n instanceof Ai||"_defaultLayer"===n.getLayerConfig().id)return n}},js.prototype.getLayerByClass=function(t){for(var i=this.getLayers(),n=0;n<i.length;n++){var s=i[n];if(s.CLASS_NAME===t)return s}},js.prototype.isDOMRender=function(){return!Y.Support.isWebGL||"d"===this.baseRender},js.prototype.isDOMMode=function(){return!Y.Support.isWebGL||"d"===this.baseRender},js.prototype.getMapState=function(){return{zooming:this.lt,panning:this.Cv,rotating:this.Lv,pitching:this.gm}},js.prototype.getControlContainer=function(){return this.Tv},js.prototype.getMapsContainer=function(){return this.Iv},js.prototype.getStatus=function(){return{dragEnable:this.Dv,zoomEnable:this.Pv,doubleClickZoom:this.fi,keyboardEnable:this.jv,jogEnable:this.Ov,scrollWheel:this.Fv,zoomSpeed:this.fZ,animateEnable:this.Ev,touchZoomCenter:this.Nv,touchZoom:this.$v,pitchEnable:this.Uv,rotateEnable:this.Bv,showBuildingBlock:this.m$,isHotspot:this.Wv,mapstyleUrl:this.c_,features:this.Cw,allBubble:this.HL,pickWhenMoving:this.UB}},js.prototype.setStatus=function(t){this.Dv=void 0!==t.dragEnable?t.dragEnable:this.Dv,this.Pv=void 0!==t.zoomEnable?t.zoomEnable:this.Pv,this.fi=void 0!==t.doubleClickZoom?t.doubleClickZoom:this.fi,this.jv=void 0!==t.keyboardEnable?t.keyboardEnable:this.jv,this.Ov=void 0!==t.jogEnable?t.jogEnable:this.Ov,this.Fv=void 0!==t.scrollWheel?t.scrollWheel:this.Fv,this.Ev=void 0===t.animateEnable?this.Ev:t.animateEnable,this.Uv=void 0===t.pitchEnable?this.Uv:t.pitchEnable,this.$v=void 0===t.touchZoom?this.$v:t.touchZoom,this.Wv=void 0===t.isHotspot?this.Wv:t.isHotspot,this.Bv=void 0===t.rotateEnable?this.Bv:t.rotateEnable,this.HL=void 0===t.allBubble?this.HL:t.allBubble},js.prototype.getBuildingColor=function(){return{buildingColor:this.az,roofColor:this.rz,wallColor:this.sz}},js.prototype.getMask=function(){return this.c$},js.prototype.getOutseaState=function(){return this.YG},js.prototype.getOutseaDataType=function(){return this.QZ},js.prototype.getMapboxStyle=function(){return this.JG},js.prototype._setStyle=function(t){this.mapStyle.setStyle(t,!1,this)},js.prototype.RY=function(t){"d"!==this.baseRender&&(this.mapStyle.setStyleByPlat(t,this),this.R0(t))},js.prototype.f_=function(t){var i=this;if(!t)return!1;"d"!==this.baseRender?(this.c_=t,this.mapStyle.pn(function(){i._getUserStyle(t),i.d_(),i.setNeedUpdate(!0)})):console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。")},js.prototype.getProjection=function(){return Y.ProjectionManager.getProjection(this._view.au())},js.prototype.getDefaultCursor=function(){return this.Zv},js.prototype.setDefaultCursor=function(t){this.Zv=t,this.setCursor()},js.prototype.setCursor=function(t){this.kv&&(t=t||this.getDefaultCursor())!==this.qv&&(Y.Support.$e||(this.kv.style.cursor=t),this.qv=t)},js.prototype.destroy=function(){this.G("beforeDestroy"),this.y$=!0,this.bZ&&(this.bZ.destroy(),delete this.bZ),this.x$&&(this.x$.destroy(),delete this.x$),this.gn&&(this.gn.destroy(),delete this.gn),this.mapStyle&&this.mapStyle.destroy&&(this.mapStyle.destroy(),delete this.mapStyle),this.b$&&this.b$.destroy&&(this.b$.destroy(),delete this.b$),this.$F&&this.$F.destroy&&(this.$F.destroy(),delete this.$F),this.wm&&delete this.wm,this.z_&&this.z_.destory&&(this.z_.destory(),delete this.z_),this._view&&delete this._view,this.I_&&delete this.I_,this.yH&&delete this.yH,this.m_&&delete this.m_,this.gl&&delete this.gl,this.canvas&&delete this.canvas,this.lcs&&(this.lcs=null),this.Vv(),this.Xv(),this.Hv(),this.G("afterDestroy")},js.prototype.getLimitBounds=function(){return this.it},js.prototype.setLimitBounds=function(t){this.it=t instanceof lt?t:new lt(t)},js.prototype.clearLimitBounds=function(){this.it=void 0},js.prototype.getZooms=function(){return[Math.max(this.xt[0],Y.zoomRange[0]),Math.min(Y.zoomRange[1],this.xt[1])]},js.prototype.setZooms=function(t){this.xt=t},js.prototype.setNeedUpdate=function(t){this.zX||(this.Jv=5,t&&!this.Kv&&(this.Kv=t,Y.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.Eo()),this.Kv=t,this.bZ&&this.bZ.MZ.yY.setNeedUpdate(t))},js.prototype.render=function(){this.setNeedUpdate(!0)},js.prototype.qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("point"))},js.prototype.Qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("road"))},js.prototype.yS=function(){return!!this.m$||void 0===this.m$&&(!this.Cw||-1<this.Cw.indexOf("building"))},js.prototype.getViewMode_=function(){return this._view.type},js.prototype.fS=function(){return this.b$},js.prototype.XT=function(t){this.QT=t},js.prototype.JF=function(t){return this.mapStyle.vn?((t=this.mapStyle.vn.nX("00001","1","color",t))&&(t=Y.Util.Hex2Rgba(t),t=Y.vector.Up(t,255)),this.$C||t||[.329,.549,.839,1]):this.$C||[.329,.549,.839,1]},js.prototype.sX=function(t){if(!this.mapStyle.vn)return this.$C||[.329,.549,.839,1];var i=this.mapStyle.vn.nX("00001","2","color",t);return(i=i||this.mapStyle.vn.nX("00001","1","color",t))&&(i=Y.Util.Hex2Rgba(i),i=Y.vector.Up(i,255)),this.$C||i||[.329,.549,.839,1]},js.prototype.qF=function(){return this.tB},js.prototype.qY=function(t,i){if(!t||2!==t.length)return null;var n=t[0],t=t[1];return this.mapStyle.dn(n,t,i)},js.prototype.ra=function(t){return{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14}[t]},js.prototype.getCustomTypeByPos=function(t){var i=this.ym().viewState.optimalZoom,i=this.ra(i),t=[(t=t.lnglat).lng,t.lat,t.lng,t.lat];return Y.Util.WY(t,i)},js.prototype.jH=function(){return this.NH},js.prototype.UH=function(t){this.Mv.UH(t)},js.prototype.setHighlight=function(t,i){var n;!this.bZ||(n=this.bZ.MZ.KY)&&n.setHighlight(t,i)},js.prototype.start=function(){this.zX=!1,this.setNeedUpdate(!0)},js.prototype.stop=function(){this.setNeedUpdate(!1),this.zX=!0},js.prototype.im=function(){return this.Mv},js.prototype.em=function(t,i,n){if(void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=Y.zoomRange[1]),!t)return[116.39708007097433,39.874529056682476,12];var s=Y.ProjectionManager.getProjection(this._view.au()),e=Y.V[this._view.au()],r=s.project(t[0],t[1]),h=s.project(t[2],t[3]),o=[h[0]-r[0],h[1]-r[1]],a=this.getSize().toArray(),u=this._view.getStatus().pitch,f=this._view.getStatus().rotation;f*=Math.PI/180;var c=(i[2]-i[3])/2,s=(i[0]-i[1])/2,t=c*Math.cos(f)+Math.sin(f)*s,c=-Math.sin(f)*c+Math.cos(f)*s,s=o[0];return 0!=f&&(o[0]=Math.abs(o[0]*Math.cos(f))+Math.abs(o[1]*Math.sin(f)),o[1]=Math.abs(o[1]*Math.cos(f))+Math.abs(s*Math.sin(f))),f=Math.max(10,a[0]-i[2]-i[3]),i=Math.max(10,a[1]-i[0]-i[1]),f=Math.log(156543.03392804097/o[0]*f)/Math.log(2),i=Math.log(156543.03392804097/o[1]*i)/Math.log(2),i=Math.min(f,i),0<u&&(i-=u/60),i=Math.min(i,n),h=[(r[0]+h[0])/2,(r[1]+h[1])/2],(h=e.transform(h[0],h[1],i))[0]-=t,h[1]-=c,h=e.unproject(h[0],h[1],i),Y.Pt(h,[i])},js.prototype.nm=function(t){if(0<t.length){for(var i,n=void 0,s=0;s<t.length;s++)n?(i=t[s].getBounds())&&n.union(i):n=(n=t[s].getBounds())&&n.clone();return n}},js.prototype.om=function(t,i){void 0===i&&(i=!0),this._view&&this._view.setOptions(t,i)},js.prototype.Eo=function(){this.zX||(this.Qv||(this.Qv=Y.Util.requestAnimFrame(this.Yf.bind(this))),this.bZ&&this.bZ.MZ.yY.to())},js.prototype.rm=function(){return this.hm||(this.hm=new qn,this.addLayer(this.hm)),this.hm},js.prototype.sm=function(){return this.$F.source},js.prototype.FY=function(t){if(Y.Module.eS.BY)return this.getLayerByClass("AMap.Inner.LabelsLayer").vi(t,!0)},js.prototype._getUserStyle=function(t){t&&this._changeStyle(t)},js.prototype._changeStyle=function(t){var s=this,i=t.split("amap://styles/")[1],n=AMap.getConfig(),e=n.protocol,r=n.key;(n=-1!==t.indexOf("?isPublic=true"))&&(i=i.split("?isPublic")[0]);var t=null,h=!1;i.length<32?(h=!0,t=e+"://webapi.amap.com/style2?name="+i+"&key="+r,this.assetsServer&&(t=this.assetsServer+"style2?name="+i+"&key="+r)):(t=e+"://webapi.amap.com/v4/map/styles2?styleid="+i+"&s=rsv3&key="+r+(n?"&ispublic=1":""),AMap.getConfig().jscode?t+="&jscode="+AMap.getConfig().jscode:AMap.getConfig().gaodeserver&&(t=AMap.getConfig().gaodeserver+"/v4/map/styles2?styleid="+i+"&s=rsv3&key="+r+(n?"&ispublic=1":""))),qt.Ajax(t,{},function(t,i){var n;"complete"===t&&(i=JSON.parse(i.data))&&i.data&&i.data.content?(n=JSON.parse(i.data.content),t=JSON.parse(i.data.layer||"{}"),s.QR=n,s.mapStyle&&(s.mapStyle.setStyle(n,h,s),t&&s.mapStyle.vn.EY(t)),s.R0(i.data)):s.emit("styleChanged")})},js.prototype._getMapboxStyle=function(n){var s=this,t=AMap.getConfig(),i=t.protocol;t.key,qt.Ajax(i+"://a.amap.com/jsapi/static/json/web_v8_2.0_"+n+".json",{type:"GET",requestContentType:"application/json"},function(t,i){"complete"===t?(i=i.data,s.JG={styles:i,vectorMapForeign:n},s.gn&&s.gn.Ha({QG:s.JG}),s.Eo()):s.JG=null})},js.prototype.um=function(t){for(var i=0,n=t.length;i<n;i+=1)this.addLayer(t[i])},js.prototype.R0=function(t){var i=this;t&&t.third_layer&&Y.Module.module("AMap.StyleParser",function(){setTimeout(function(){i.y$||(i.P0||(i.P0=new AMap.StyleParser(i)),i.emit("styleLoaded",t))},0)})},js.prototype.cm=function(){var n=this;w.addClass(this.kv,"amap-container"),this.j0=w.watchSize(this.kv,function(t,i){n.om({size:[t,i]})},this);var t=this.kv;this.Iv=w.create("div",null,"amap-maps"),this.do=w.create("div",this.Iv,"amap-layers"),this.fm=w.create("div",this.Iv,"amap-overlays"),t.appendChild(this.Iv),this.Tv=w.create("div",this.kv,"amap-controls"),this.Iv.tabIndex=0;var i={};i.p_=w.create("a",t,"amap-logo");var s=w.create("img",i.p_);this.assetsServer?s.src=Y.Support.Ue?this.assetsServer+"static/theme/v1.3/logo@2x.png":this.assetsServer+"static/theme/v1.3/logo@1x.png":s.src=Y.Support.Ue?AMap.getConfig().protocol+"://"+AMap.getConfig().domain+"/theme/v2.0/logo@2x.png":AMap.getConfig().protocol+"://"+AMap.getConfig().domain+"/theme/v2.0/logo@1x.png",i.v_=w.create("div",t,"amap-copyright"),i.v_.style.display="none",350<w.getViewport(this.kv)[0]&&(i.v_.innerHTML=AMap.getConfig().v_,i.v_.mapNumber=w.create("span",i.v_,"amap-mcode")),this.m_=i},js.prototype.d_=function(){var t=this.getLayers();if(t){for(var i=-1,n="",s=0;s<t.length;s+=1){var e=t[s].get("mapNumber"),r=t[s].get("zIndex");e&&i<r&&t[s].get("visible")&&(n=e,i=r)}var h=this.c_;return(n=!this.g$||"GS(2021)6375"===n&&h&&"normal"!==h&&"amap://styles/normal"!==h?"":n)&&this.tE!==n&&this.m_&&this.m_.v_&&this.m_.v_.mapNumber&&(this.m_.v_.mapNumber.innerHTML="- "+n+"号"),this.tE=n}},js.prototype.pm=function(t){var i={size:w.getViewport(this.kv),zoom:t.zoom,center:t.center,rotation:t.rotation,projectionId:t.projection,pitch:t.pitch};return new(t.viewMode&&"3D"===t.viewMode?bn:ln)(i,this)},js.prototype.dm=function(){},js.prototype.Hv=function(){for(w.remove(this.Iv),delete this.Iv,this.do&&(w.remove(this.do),delete this.do),this.Tv&&(w.remove(this.Tv),delete this.Tv),this.fm&&(w.remove(this.fm),delete this.fm),this.j0&&(this.j0(),delete this.j0);this.kv&&this.kv.firstChild;)this.kv.removeChild(this.kv.firstChild);this.kv&&delete this.kv},js.prototype.Vv=function(){this.pi&&(this.pi.destroy(),delete this.pi),this.di&&(this.di.destroy(),delete this.di),this.vm&&(this.vm.destroy(),delete this.vm)},js.prototype.Xv=function(){this.mm&&this.mm.destroy&&(this.mm.destroy(),delete this.mm);for(var t=0,i=this.getLayers();t<i.length;t++)i[t].destroy();this.so&&this.so.destroy(),this.R_&&(this.R_.destroy(),delete this.R_),this.zv=[],this.Mv&&this.Mv.destroy&&(this.Mv.destroy(),delete this.Mv)},js.prototype.ym=function(){var t=this._view.getStatus();return{debug:this.debug,layers:this.zv,uo:this.Mv,size:t.size,do:this.do,viewState:t,map:this}},js.prototype.Yf=function(){if(!this.zX&&(this.w$(),!this.y$)){if(Os.VZ())for(var t=0,i=this.ym().layers;t<i.length;t++){var n,s=i[t];s.getRender()||(n=this.Rv(s,{}),s.Do(n))}this.pi&&this.pi.iy({}),this.di&&this.di.iy({});var e=this.ym();if(this.bm(e),this.tB=(new Date).getTime(),this.Mv.loadData(e.viewState,this,this.mm?this.mm.context:null),this.mm&&this.mm.renderFrame(e),this.Jv&&this.Kv)this.Qv=Y.Util.requestAnimFrame(this.Yf.bind(this));else if((this.Jv<=0||!this.Kv)&&(this.Kv=!1,Y.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.gm||this.Lv||this.lt||this.Cv)){if(this.lt&&-1!==this.k$){if("d"===Y.Support.baseRender&&0<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.G("zoomend",{target:e.map})}this.Cv&&-1!==this._$&&this.G("moveend",{target:e.map}),this.Lv&&-1!==this.M$&&this.G("rotateend"),this.gm&&-1!==this.S$&&this.G("pitchend"),this.Lv=!1,this.gm=!1,this.lt=!1,this.Cv=!1,this.Qv||(this.Mv.loadData(e.viewState,this,this.mm?this.mm.context:null),this.mm&&this.mm.renderFrame(e))}this.Jv--}},js.prototype.bm=function(t){var i=t.viewState,s=(n=this.wm).center,e=n.rotation,r=n.zoom,h=n.pitch,o=i.center,a=i.zoom,u=i.rotation,n=i.pitch;if(s[0]!==o[0]||s[1]!==o[1]?(this._$=1,this.Cv||this.G("movestart",{target:t.map}),this.Cv=!0,this.G("mapmove",{target:t.map})):1<=this._$&&this._$++,r!==a?(this.lt||this.G("zoomstart",{target:t.map}),this.G("zoomchange",{target:t.map}),this.lt=!0,this.k$=1):1<=this.k$&&this.k$++,e!==u?(this.Lv||this.G("rotatestart"),this.G("rotatechange"),this.Lv=!0,this.M$=1):1<=this.M$&&this.M$++,h!==n?(this.gm||this.G("pitchstart"),this.G("pitchchange"),this.gm=!0,this.S$=1):1<=this.S$&&this.S$++,5<=this._$&&(this.Cv=!1,this._$=-1,this.G("moveend",{target:t.map})),5<=this.k$&&(this.lt=!1,this.k$=-1,this.G("zoomend",{target:t.map})),5<=this.M$&&(this.Lv=!1,this.M$=-1,this.G("rotateend")),5<=this.S$&&(this.gm=!1,this.S$=-1,this.G("pitchend")),"d"===Y.Support.baseRender&&4<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.Qv||this.mm&&(this.Mv.loadData(t.viewState,this,this.mm.context),this.mm.renderFrame(t)),this.wm=i},js.prototype.G=function(t,i){this.emit(t,i=void 0===i?{}:i)},js.prototype.Rm=function(){var r=this;this.on("styleChanged",function(){if(r.kv){var t=void 0;t=r.options.backgroundColor||(r.mapStyle?(i="fast"===r.bZ.MZ.drawMode?Y.Util.getOptimalZoom(r.getZoom()):r.getZoom(),(i=r.mapStyle.dn(30001,1,i))&&i.faceColor?((t=i.faceColor.rgba.slice(0))[3]=t[3]/255,"rgba( "+t.join(",")+")"):"#f7f7f7"):"#f7f7f7"),r.kv.style.backgroundColor=t;var i=r.mapStyle.vn.nX("00001","3","visible",10),t=r.mapStyle.vn.nX("00001","3","lineColor",10);i&&t?(t=Y.Util.Hex2Rgba(t),(t=Is.oX(t))&&(r.kv.style.backgroundImage=t,r.kv.style.backgroundSize="100px 100px")):!1===i&&(r.kv.style.backgroundImage="none");for(var n=0,s=r.zv;n<s.length;n++){var e=s[n];Y.qG(e)&&e.sl()}}r.xm=!0,r.Eo()}),this.on("repaint",function(){r.Eo()})},js.prototype.w$=function(){var t=this;this.R$||("d"===this.baseRender?(this.R$=!0,Y.Module.module("DomRender",function(){setTimeout(function(){t.y$||(t.mm=new Y.Module.DomRender(t),t.Eo())},0)})):(this.R$=!0,Y.Module.module("WebGLRender",function(){setTimeout(function(){t.y$||(AMap.Browser.isWebGL&&!t.KZ?(t.KZ=!0,t.mm=new Y.Module.WebGLRender(t),t.I_=new Kn(t),t.yH=new Y.LH(t,t.I_,t.gn),t.Eo()):t.R$=!1)},0)})))},js.prototype.Rv=function(t,i){return this.isDOMMode()?Os.JZ[t.CLASS_NAME]?new Os.JZ[t.CLASS_NAME](this,t):void 0:Os.YZ[t.CLASS_NAME]?new Os.YZ[t.CLASS_NAME]:void 0},js.prototype.KT=function(){var e,r,h,o,a,u,f=this,t=this._view.getStatus(),c=t.zoom,l=t.centerCoord,d=c,v=0;0!=(v=(d=this.bo>c?Math.floor(c):Math.ceil(c))-c)&&(this.bo=d,e=Y.V[this._view.au()],r=200*Math.abs(v)+100,h=new L(0,.6,.15,1),u=o=0,a=function(){o+=16;var t=f._view.getStatus().zoom,i=c+v*h.h(o/r);r<o&&(i=d);var n=e.nt(f.QT[0],f.QT[1],t),s=e.nt(f.QT[0],f.QT[1],i),t=s[0]-n[0]+l[0],n=s[1]-n[1]+l[1],n=f.getProjection().unproject(t,n);if(f.setZoomAndCenter(i,n,!0),d<=i&&0<v||v<0&&i<=d)return f.setZoom(d,!0),void Y.Util.cancelAnimFrame(u);o<r&&(u=Y.Util.requestAnimFrame(a))},u=Y.Util.requestAnimFrame(a))},js.prototype.iB=function(){window.onbeforeload=this.destroy,window.onunload=this.destroy,window.onbeforeunload=this.destroy},js.t_=[2,20],js);function js(t,i){var n=Rs.call(this)||this;n.className="AMap.Map",n.so=new _n,n.lcs=Y.lcs,n.debug=!1,n.complete=!1,n.Kv=!1,n.controls=[],n.langForeign="zh_cn",n.fE=!0,n.IY="normal",n.offlineServer=!1,n.assetsServer=!1,n.az=[.92,.92,.9,.9],n.sz=[.94,.94,.94,.9],n.rz=[.94,.94,.94,.9],n.$C=[.329,.549,.839,1],n.Ov=!0,n.Dv=!0,n.Pv=!0,n.Fv=!0,n.fZ=1,n.fi=!0,n.jv=!0,n.Ev=!0,n.Uv=!0,n.Bv=!0,n.$v=!0,n.Nv=0,n.Sm=!1,n.c_="",n.Zv="default",n.qv="",n.xt=[2,20],n.YG=!1,n.QZ="",n.zv=[],n.A$=!1,n.R$=!1,n.Qv=0,n.P0=void 0,n.xm=!1,n.lt=!1,n.Cv=!1,n.Lv=!1,n.gm=!1,n.km=0,n.Jv=5,n.y$=!1,n.Wv=!Y.Support.$e,n.g$=!0,n.tB=(new Date).getTime(),n._$=-1,n.M$=-1,n.S$=-1,n.k$=-1,n.HL=!1,n.bo=10,n.tD=!1,n.QT=[0,0],n.UB=!1,n.tE="",n.KZ=!1,n.zX=!1,Y.Support.hardwareAccEnabled||console&&console.log&&console.log("检测到您已关闭硬件加速模式，开启以获得更好的体验！");var s=i.offlineServer;n.offlineServer=!!s&&("string"==typeof s?s.endsWith("/")?[s]:[s+"/"]:Y.map(s,function(t){return t.endsWith("/")?t:t+"/"})),i.assetsServer?n.assetsServer=i.assetsServer.endsWith("/")?i.assetsServer:i.assetsServer+"/":n.assetsServer=n.offlineServer&&n.offlineServer[0],n.Rm(),n.options=i,n.xX=i.cacheSize,n.g$=void 0===i.I$?n.g$:i.I$,n.az=Y.Util.color2RgbaArray(i.buildingColor=i.buildingColor),n.sz=Y.Util.color2RgbaArray(i.wallColor),n.rz=Y.Util.color2RgbaArray(i.roofColor),n.$C=Y.Util.color2RgbaArray(i.skyColor),n.Dv=void 0===i.dragEnable?n.Dv:i.dragEnable,n.Pv=void 0===i.zoomEnable?n.Pv:i.zoomEnable,n.Fv=void 0===i.scrollWheel?n.Fv:i.scrollWheel,n.fZ=void 0===i.zoomSpeed?n.fZ:i.zoomSpeed,n.Ov=void 0===i.jogEnable?n.Ov:i.jogEnable,n.fi=void 0===i.doubleClickZoom?n.fi:i.doubleClickZoom,n.jv=void 0===i.keyboardEnable?n.jv:i.keyboardEnable,n.Ev=void 0===i.animateEnable?n.Ev:i.animateEnable,n.Uv=void 0===i.pitchEnable?n.Uv:i.pitchEnable,n.$v=void 0!==i.touchZoom?i.touchZoom:n.$v,n.Nv=void 0!==i.touchZoomCenter?i.touchZoomCenter:n.Nv,n.Zv=i.defaultCursor||n.Zv,n.QZ=i.overseaDataType||n.QZ,n.IY=i.loadData||"normal",i.limitBounds&&n.setLimitBounds(i.limitBounds),n.Sm=i.Lm||!1,n.xt=i.zooms||n.xt,n.bo=i.zoom||n.bo,n.baseRender=Y.Support.baseRender,i.viewMode="d"===Y.Support.baseRender?"2D":i.viewMode,n.Bv=!("3D"!==i.viewMode),n.Bv=void 0===i.rotateEnable?n.Bv:i.rotateEnable,n.debug=i.debug||!1,n.m$="3D"===i.viewMode&&i.showBuildingBlock,n.Wv=void 0===i.isHotspot?n.Wv:i.isHotspot,n.UB=void 0===i.pickWhenMoving?n.UB:i.pickWhenMoving,n.fE=void 0===i.asyncOverlay?n.fE:i.asyncOverlay,n.showLabel=void 0===i.showLabel||Boolean(i.showLabel),n.Cw=i.features||["bg","point","road","building"],n.c$=i.mask,n.NH=void 0!==i.labelRejectMask&&Boolean(i.labelRejectMask),n.bZ=new ws({lY:new Y.MY,gY:new vs,yY:new Y.wY({check:function(){return!!n.bZ&&n.bZ.MZ.lY.xY()},render:function(){if(n.TL())return!1;n.bZ&&n.bZ.MZ.lY.exec(20)}}),drawMode:i.drawMode||"normal",tY:new Ls({Fz:["default"]}),wZ:new Ss(n),KY:new Bs(n)}),n.WebGLParams=void 0===i.WebGLParams?{}:i.WebGLParams,"d"!==n.baseRender?(n.bZ.dynamic.subscribe("firstPaint",function(){n.emit("firstPaint",Y.Support.amapRunTime)},n,!0),n.bZ.MZ.lY.on("taskclear",function(){n.setNeedUpdate(!0)}),n.bZ.MZ.lY.register("SDFCombine",function(t){return new ms(n.bZ.MZ.gY,t)},{kY:10}),n.bZ.MZ.lY.register("LangSDF",function(t){return new Cn(n.R_.yG,t)},{kY:10}),n.mapStyle=new Mn(n),n.mapStyle.pn(function(){var t=i.mapStyle;t?n._getUserStyle(t):n.emit("styleChanged")}),n.Eo(),e=n.z_=new Ln,n.gn=new Fn(n),n.R_=new An(e,n),n.x$=new bs(n)):(n.z_=new Ln,n.R_=new Y.vG,n.emit("styleChanged")),(s=i.vectorMapForeign)&&n._getMapboxStyle(s),i.langForeign&&(n.langForeign=i.langForeign),n.gn&&n.gn.Ha({langForeign:n.langForeign}),t&&(t.amap&&t.amap.destroy(),t.amap=n),n.kv=t,n._view=n.pm(i),n.b$=new ss(n),n.Mv=new gi(n),n.c_=i.mapStyle||"normal",n.QR=null;var e=Y.Support.isWebGL,s=AMap.getConfig().y_,t=i.layers||[];return n.cm(),e&&"d"!==n.baseRender&&(n.canvas=w.create("canvas",n.do,"amap-layer"),n.canvas.width=0,n.canvas.height=0,n.gl=Y.Support.getContext(n.canvas,n.WebGLParams)),n.w$(),0===t.length?n.isDOMMode()?(n.addLayer(new Xi({id:"_defaultLayer",tileUrl:s})),n.Bv=!1):e&&n.addLayer(new Ai({cacheSize:n.xX})):n.um(t),n.d_(),n.$F=new Rn({map:n}),n.addLayer(n.$F),t=n._view.getStatus(),n.wm=t,n.setCursor(n.Zv),n}var Bs=(Fs.prototype.setHighlight=function(t,i){this.Lp=t,this.Ap=i,this._Y.setNeedUpdate(!0)},Fs.prototype.destroy=function(){this.map.off("hotspotclick",this.$Y),this.map.off("hotspotover",this.$Y),this.map.off("hotspotout",this.tX)},Fs.prototype.$Y=function(t){this.iX=t.id,this.map.setNeedUpdate(!0)},Fs.prototype.tX=function(t){this.iX="",this.map.setNeedUpdate(!0)},Fs);function Fs(t){var i=this;this.map=t,this.Lp=-2,this.Ap=[],this.iX="",this.$Y=this.$Y.bind(this),this.tX=this.tX.bind(this),this.map.on("hotspotclick",this.$Y),this.map.on("hotspotover",this.$Y),this.map.on("hotspotout",this.tX),this.GY=Date.now(),this.NY=0,this.UY=!0,this._Y=new Y.wY({check:function(){return-1<i.Lp},render:function(){var t=Date.now()-i.GY;i.NY=2400<t%3e3?0:.5-Math.abs(t%3e3/2400-.5),i.map.setNeedUpdate(!0)}}),this._Y.setNeedUpdate(!0)}var Ws=(Gs.prototype.setImageSize=function(t){t instanceof Y.Size&&(t=t.toArray()),this._opts.imageSize=t},Gs.prototype.getImageSize=function(){var t=this._opts.imageSize,i=this.Om;return t||(i.length?i:[])},Gs.prototype.setSize=function(t){t instanceof Y.Size&&(t=t.toArray()),this._opts.size=t},Gs.prototype.getSize=function(){return this._opts.size},Gs.prototype.setImageOffset=function(t){t instanceof Y.Pixel&&(t=t.toArray()),this._opts.imageOffset=t},Gs.prototype.getImageOffset=function(){return this._opts.imageOffset||[0,0]},Gs.prototype.getImage=function(){return this._opts.image},Gs.prototype.setImage=function(t){this._opts.image=t},Gs.prototype.Fm=function(){return this.Om||[]},Gs.prototype.Em=function(t){t instanceof Y.Size&&(t=t.toArray()),this.Om=t},Gs);function Gs(t){this.CLASS_NAME="AMap.Icon",this._opts={size:[0,0],imageOffset:new Y.Pixel(0,0),image:AMap.getConfig().protocol+"://webapi.amap./theme/v1.3/markers/0.png"},this.Om=[];var i=t.size,n=t.imageSize,s=t.image,t=t.imageOffset;i&&this.setSize(i),n&&this.setImageSize(n),t&&this.setImageOffset(t),s&&this.setImage(s)}var Ns,_s="AMap.Overlay",Et=(Ns=Y.Event,Y.Ei(Us,Ns),Us);function Us(){var t=null!==Ns&&Ns.apply(this,arguments)||this;return t.type=_s,t.className=_s,t}var Ys,St=(Ys=Y.Event,Y.Ei(Zs,Ys),Zs);function Zs(){var t=null!==Ys&&Ys.apply(this,arguments)||this;return t.type=_s,t.className=_s,t}var Xs,Js="AMap.DOMOverlay",Ks={top:"top",right:"right",bottom:"bottom",left:"left",Nm:"top-left",$m:"top-center",Um:"top-right",Bm:"middle-left",center:"center",Wm:"middle-right",Gm:"bottom-left",Zm:"bottom-center",qm:"bottom-right"},$s_Ym="viewchange",te=[10,0,0,0],ie={map:null,visible:!0,offset:[0,0],anchor:"top-left",rotate:0,orientation:null,scale:1,zooms:Y.zoomRange,noSelect:!1,innerOverlay:!1,isCustom:!1},F=(Xs=St,Y.Ei(ne,Xs),ne.prototype.getOptions=function(){return this._options},ne.prototype.add=function(t){for(var i=this._map,n=0,s=t=void 0===t?[]:t;n<s.length;n++)s[n].add(i)},ne.prototype.remove=function(t){for(var i=0,n=t=void 0===t?[]:t;i<n.length;i++)n[i].remove()},ne.prototype.updateOverlay=function(t){if(t)for(var i=0,n=t;i<n.length;i++)n[i].updateOverlay();else{var s=!this.aZ&&this.viewChange;this.aZ=!1;var e,r=this._overlays;for(e in r)r.hasOwnProperty(e)&&r[e].updateOverlay({viewChange:s})}},ne.prototype.iy=function(t){this.updateOverlay()},ne.prototype.addToGroup=function(t){var i=this._container,n=this._overlays,s=t.hS,e=t.dom;i.appendChild(e),n[s]=t},ne.prototype.removeFromGroup=function(t){var i=this._container,n=this._overlays,s=t.hS,t=t.dom;i.removeChild(t),delete n[s]},ne.prototype.vi=function(t){return null},ne.prototype.destroy=function(){this.ey();var t,i=this._overlays;for(t in i)i.hasOwnProperty(t)&&i[t].remove();this._overlays={},this._container&&w.remove(this._container)},ne.prototype.getAllOverlays=function(){var t,i,n=this._overlays,s=[];for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&s.push(i);return s},ne.prototype.ny=function(){this._map},ne.prototype.ey=function(){var t=this._map,i=$s_Ym;t.off(i,this.iy)},ne);function ne(t,i){void 0===i&&(i={});var n=Xs.call(this)||this;return n.type="AMap.DOMOverlayGroup",n.viewChange=!1,n.aZ=!1,n._options={zIndex:120},n._overlays={},t=(n._map=t).kv,n._parent=t.querySelector(".amap-layers"),i=i.className,n._className=i,n.iy=n.iy.bind(n),n.ny(),n}var se,Ht=(se=Et,Y.Ei(ee,se),Object.defineProperty(ee.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),ee.prototype.getMap=function(){return this._map||null},ee.prototype.setMap=function(t){t instanceof Ye?this.add(t):null==t&&this.remove()},ee.prototype.addTo=function(t){this.add(t)},ee.prototype.add=function(t){t&&(this._add(t),this._parent&&(this._parent.addToGroup(this),this.updateOverlay()))},ee.prototype.remove=function(){this._map&&this._parent&&(this._parent.removeFromGroup(this),this._remove())},ee.prototype.show=function(){this._opts.visible=!0,this.updateOverlay()},ee.prototype.hide=function(){this._opts.visible=!1,this.updateOverlay()},ee.prototype.getPosition=function(){var t=this._position;return t?Y.Bs(t)?t:new Y.LngLat(t[0],t[1]):null},ee.prototype.setPosition=function(t){this._position=t,this.updateOverlay()},ee.prototype.getAnchor=function(){return this._opts.anchor||Ks.Nm},ee.prototype.setAnchor=function(t){t&&(this._opts.anchor=t,this.updateOverlay())},ee.prototype.getOffset=function(){var t=this._opts.offset||[0,0];return new Y.Pixel(t[0],t[1])},ee.prototype.setOffset=function(t){t&&(t instanceof Array||void 0===t.x||void 0===t.y||(this._opts.offset=[t.x,t.y]),this.updateOverlay())},ee.prototype.getAngle=function(){return this._opts.rotate||0},ee.prototype.setAngle=function(t){this._opts.rotate=t,this.updateOverlay()},ee.prototype.getOrientation=function(){return this._opts.orientation},ee.prototype.setOrientation=function(t){"number"==typeof t?(this._opts.orientation=t,this._opts.rotate=this.dP(t)):(this._opts.orientation=void 0,this._opts.rotate=0),this.updateOverlay()},ee.prototype.getSize=function(){return this._getSize()},ee.prototype.setSize=function(t){this._opts.size=Y.ay(t)?t.toArray():t,this.updateOverlay()},ee.prototype.getzIndex=function(){return this._opts.zIndex},ee.prototype.setzIndex=function(t){this._opts.zIndex=t,this.updateOverlay()},ee.prototype.getOptions=function(){return this._opts},ee.prototype.getContent=function(){return this._opts.content||""},ee.prototype.setContent=function(t){this._opts.content=t=void 0===t?"":t,this._size=[0,0],this._removeContent(),this._createDom(this.dom,t),this.updateOverlay()},ee.prototype.getBounds=function(){var t=this._position;return new lt(t,t)},ee.prototype.getVisible=function(){return void 0===this._opts.visible||this._opts.visible},ee.prototype.updateOverlay=function(t){t=void 0!==(t=(t=void 0===t?{}:t).viewChange)&&t,this._map&&this._setStyle(t)&&this._applyStyle(t)},ee.prototype.uZ=function(t){t=void 0!==(t=(t=void 0===t?{}:t).viewChange)&&t,this._map&&(this._setStyle(t),this._applyStyle(t))},ee.prototype.destroy=function(){this.dom&&w.remove(this.dom)},ee.prototype.getCursor=function(){if(this._map)return this._map.getDefaultCursor()},ee.prototype.getContentDom=function(){return this.dom},ee.prototype._add=function(t){},ee.prototype._remove=function(){this._map=null,this._parent=null},ee.prototype._createContainer=function(){var t=document.createElement("div");return w.addClass(t,this._className),t},ee.prototype._createDefaultInnerDom=function(){return document.createElement("div")},ee.prototype._setStyle=function(t){void 0===t&&(t=!1);var i=this._position,n=this._points=this._map&&i&&this._map.lngLatToContainer(i).toArray(),s=(this._map&&this._map.getRotation(),this._style),e=this._map&&this._map.getZoom(),r=this._opts.zooms||[2,20],h=void 0===this._opts.visible||this._opts.visible,o=e&&(e<r[0]||e>r[1]),a=s.visible;void 0!==h&&(s.visible=h),h&&(s.visible=!o);var u=this.ZF(n);s.visible&&(s.visible=!u);var c=(f=this._opts).zIndex,e=void 0===(i=f.anchor)?Ks.Nm:i,h=void 0===(r=f.offset)?[0,0]:r,o=f.rotate,u=f.scale,i=f.noSelect,r=f.orientation,f=[0,0];return"number"==typeof r?s.rotate=this.dP(r):void 0!==o&&(s.rotate=o),a!==s.visible&&this._map&&(this._map.render(),this._parent)?!(this._parent.aZ=!0):(t?n&&(s.left=n[0]+"px",s.top=n[1]+"px",f=s.translate):(this._getContentSize(),(c=this._getStyleZIndex(c))&&(s.zIndex=c),void 0!==u&&(s.scale=u),n&&(s.left=n[0]+"px",s.top=n[1]+"px"),(e||h)&&(f=this._getOffset(e,h),s.translate=f,s.transformOrigin=-f[0]+"px "+-f[1]+"px"),s.pointerEvents=!0===i?"none":"auto"),f="translate("+f[0]+"px, "+f[1]+"px) scale("+s.scale+") rotate("+s.rotate+"deg)",Y.Support.ie&&(s.msTransform=f),s.transform=f,!0)},ee.prototype._getStyleZIndex=function(t){return t},ee.prototype._getSize=function(){var n=void 0===(i=(t=(t=this._opts.size||[])instanceof Y.Size?t.toArray():t)[0])?0:i,i=void 0===(s=t[1])?0:s,s=(t=this._size)[0],t=t[1];return[n||(void 0===s?0:s),i||(void 0===t?0:t)]},ee.prototype._getContentSize=function(){var t=this._style,i=this._getSize(),n=0,s=0;i[0]&&i[1]?(n=i[0],s=i[1]):this.dom&&(i=this.dom,n=Math.ceil(i.offsetWidth)||0,s=Math.ceil(i.offsetHeight)||0,this._size=[n,s]),t.width=n+"px",t.height=s+"px",t.size=[n,s]},ee.prototype._applyStyle=function(t){void 0===t&&(t=!1);var i,n,s=this._style,e=this.dom;for(i in s)s.hasOwnProperty(i)&&("visible"!==i?t?"top"!==i&&"left"!==i&&"transform"!==i&&"msTransform"!==i||(e.style[i]=s[i]):"width"!==i&&"height"!==i?"translate"!==i&&"scale"!==i&&"rotate"!==i&&(e.style[i]=s[i]):"0px"===s[i]||(n=this._opts.size)&&"AMap.InfoWindow"!==this.type&&("width"===i&&(e.style[i]=n[0]+"px"),"height"===i&&(e.style[i]=n[1]+"px")):(n=s[i]?"block":"none",e.style.display=n))},ee.prototype._getOffset=function(t,i){var t=(n=this._getAnchorOffset(t))[0],n=n[1];return[t+i[0],n+i[1]]},ee.prototype._getAnchorOffset=function(t){var n=(i=this._style.size)[0],s=i[1],i=Ks,e=0,r=0;if(Array.isArray(t))return t;switch(t){case i.Nm:e=0;break;case i.$m:e=-n/2;break;case i.Um:e=-n;break;case i.Bm:e=0,r=-s/2;break;case i.center:e=-n/2,r=-s/2;break;case i.Wm:e=-n,r=-s/2;break;case i.Gm:r=-s;break;case i.Zm:e=-n/2,r=-s;break;case i.qm:e=-n,r=-s}return[e,r]},ee.prototype._createDom=function(t,i){return i&&("object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i),t},ee.prototype._removeContent=function(){this.dom.innerHTML=""},ee.prototype._formatSize=function(t){return[t.getWidth(),t.getHeight()]},ee.prototype.ZF=function(t){var i,n=this._map,s=!1;return n&&t&&"3D"===(i=n.getView()).type&&(n=i.Uu(),i=te,t&&t[1]-n-i[0]<=0&&(s=!0)),s},ee.prototype._getRotationByPoints=function(t,i){var n=i.y-t.y,s=i.x-t.x,e=0;return(0!=n||0!=s)&&(i.x-t.x!=0?(e=Math.atan((i.y-t.y)/(i.x-t.x)),0<=n&&s<0||n<0&&s<=0?e=Math.PI+e:n<0&&0<=s&&(e=2*Math.PI+e)):e=i.y>t.y?Math.PI/2:3*Math.PI/2,Math.round(180*e/Math.PI*10)/10)},ee.prototype._getRotationByLngLats=function(t,i){var n=null===(n=this._map)||void 0===n?void 0:n.getProjection().project(t.KL,t.kT),i=(t=null===(t=this._map)||void 0===t?void 0:t.getProjection().project(i.KL,i.kT))[0]-n[0],t=t[1]-n[1],n=0;return(0!=i||0!=t)&&(0!=t?(n=Math.atan(i/t),0<=i&&0<t||(0<=i&&t<0||i<0&&t<0?n=Math.PI+n:i<0&&0<t&&(n=2*Math.PI+n))):n=0<i?Math.PI/2:3*Math.PI/2,Math.round(180*n/Math.PI*10)/10)},ee.prototype.dP=function(t){var i=0,n=this._position,s=this._map;return s&&n&&(t=this.pP(n,t),n=s.lngLatToContainer(n),t=s.lngLatToContainer(t),i=!1===(t=this._getRotationByPoints(n,t))?0:t+Math.PI),i+90},ee.prototype.pP=function(t,i){var n;return(t=null===(n=this._map)||void 0===n?void 0:n.getProjection().project(t[0],t[1]))[0]+=Math.sin(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),t[1]+=Math.cos(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),null===(i=this._map)||void 0===i?void 0:i.getProjection().unproject(t[0],t[1])},ee.prototype.vP=function(t){return 10/Math.pow(2,t-2)},ee);function ee(t,i){void 0===t&&(t={}),void 0===i&&(i={});var n=se.call(this)||this;n.type=Js,n.className=Js,n._style={width:0,height:0,size:[0,0],position:"absolute",top:0,left:0,translate:[0,0],rotate:0,scale:1,transformOrigin:[0,0],zIndex:12,visible:!0,draggable:!1,zooms:Y.zoomRange,noSelect:!1},n._size=[0,0],n._dragObjects={sy:[0,0],hy:[0,0],ly:[0,0]},n._className="amap-overlay",n._originOpts=t,n._opts=Y.assign({},ie,t),n._opts.angle&&(n._opts.rotate=n._opts.angle),!t.offset||t.offset instanceof Array||void 0===t.offset.x||void 0===t.offset.y||(n._opts.offset=[t.offset.x,t.offset.y]),n.hS=Y.Util.stamp(n);var s=i.className,i=i.anchor;return n._className=s,!t.anchor&&i&&(n._opts.anchor=i),s=t.content,i=n._createContainer(),n.dom=n._createDom(i,s),n._position=t.position,n.updateOverlay(),n}var re,he={uy:"AMap.Marker",py:"amap-markers",vy:"amap-marker",MarkerIconURL:"//webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",yy:120,xy:12,by:2,gy:Math.pow(2,31)},oe=Y.assign({},ie,{title:"",clickable:!0,draggable:!1,bubble:!1,topWhenClick:!1,zIndex:he.xy,cursor:"pointer",extData:{}}),ae=(re=F,Y.Ei(ue,re),ue.prototype.vi=function(t){if(t=t.target,Y.isEmpty(this._overlays)||!t)return null;var i=w.closest(t,"amap-marker"),t=this._overlays,n=null;return i&&Y.forEach(t,function(t){t.dom===i&&(n=t)}),n},ue.prototype.setTop=function(t){var i;t&&((i=this.Kl)&&i!==t&&i.setTop(!1),this.Kl=t)},ue.prototype._createContainer=function(t){var i=document.createElement("div");return w.addClass(i,this._className),t.appendChild(i),i},ue);function ue(t){var i=re.call(this,t,{className:he.py})||this;return i.type=he.uy,i.className=he.uy,i._container=i._createContainer(i._parent),t.assetsServer&&(he.MarkerIconURL=t.assetsServer+"/static/theme/v2.0/markers/b/mark_bs.png"),i}var fe,ce=(fe=Ht,Y.Ei(le,fe),le.prototype.getTitle=function(){return this._opts.title},le.prototype.setTitle=function(t){this._opts.title=t,this.dom&&this.dom.setAttribute("title",t)},le.prototype.getIcon=function(){return this._opts.icon},le.prototype.setIcon=function(t){t&&(this._opts.icon=t,this._opts.content||this._removeContent(),"AMap.Icon"===t.CLASS_NAME&&(this._opts.size=t.getSize()),this.wy(),this.updateOverlay())},le.prototype.getLabel=function(){return this._opts.label||{}},le.prototype.setLabel=function(t){var i=this._opts.label||{};this._opts.label=Y.assign(i,t);var n=i.content,i=void 0===(t=i._needUpdate)||t;n?(t=void 0,!(t=this._y?this.ky(n,this._y):this._y=this.ky(n))||(11<=(n=void 0,n=this.B0())||n<0)&&this.F0(),this.dom&&this.dom.appendChild(t),i&&this.updateOverlay()):this._y&&(w.remove(this._y),this._y=null)},le.prototype.getClickable=function(){var t=this._opts.clickable;return!(void 0!==t&&!t)},le.prototype.setClickable=function(t){this._opts.clickable=!!(t=void 0===t||t)},le.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},le.prototype.setDraggable=function(t){(this._opts.draggable=t)?this._bindEvents():this.T_()},le.prototype.getTop=function(){return this._isTop},le.prototype.setTop=function(t){this._isTop=t=void 0!==t&&t;var i=this._parent;i&&t&&i.setTop(this),this.updateOverlay()},le.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map?this._map.getDefaultCursor():t},le.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},le.prototype.getExtData=function(){return this._opts.extData},le.prototype.setExtData=function(t){this._opts.extData=t},le.prototype.remove=function(){this.T_(),this.ZH(),fe.prototype.remove.call(this)},le.prototype.moveTo=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.moveAlong=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.startMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.stopMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.pauseMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.resumeMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},le.prototype.setOptions=function(t){this._opts=Y.assign({},oe,this._opts,t),t.content&&this.setContent(t.content),t.offset&&this.setOffset(t.offset),t.title&&this.setTitle(t.title),t.label&&this.setLabel(t.label),t.draggable&&this.setDraggable(!0),this.updateOverlay()},le.prototype.updateOverlay=function(t){fe.prototype.updateOverlay.call(this,t=void 0===t?{}:t),t=this._y,this._opts.label&&t&&(!t.parentElement&&this.dom&&this.dom.appendChild(t),0<(t=void 0,t=this.B0())&&t<11&&this.My(),this.Ry())},le.prototype.emit=function(t,i){var n=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(n)),"click"===t?this.getClickable()&&(fe.prototype.emit.call(this,t,i),void 0!==(n=this.getOptions().topWhenClick)&&n&&this.setTop(!0)):"dragstart"===t||"dragging"===t||"dragend"===t?(Y.Support.$e||i.originEvent.buttons&&2!==i.originEvent.buttons&&i.originEvent.preventDefault(),this.getDraggable()&&fe.prototype.emit.call(this,t,i)):fe.prototype.emit.call(this,t,i),this},le.prototype.toGeometry=function(){var t=this.getPosition();if(t)return{type:"Point",coordinates:t&&t.toJSON()}},le.prototype.B0=function(){var t=navigator.userAgent,i=-1<t.indexOf("compatible")&&-1<t.indexOf("MSIE"),n=-1<t.indexOf("Edge")&&!i,s=-1<t.indexOf("Trident")&&-1<t.indexOf("rv:11.0");return i?(new RegExp("MSIE (\\d+\\.\\d+);").test(t),7===(t=parseFloat(RegExp.$1))?7:8===t?8:9===t?9:10===t?10:6):n?"edge":s?11:-1},le.prototype.F0=function(){var t=this;new MutationObserver(function(){t._opts.label&&t.My()}).observe(this._y,{attributes:!0,characterData:!0,childList:!0,subtree:!0})},le.prototype._add=function(t){this._map=t,this._parent=t.pi,this.updateOverlay()},le.prototype._createDom=function(t,i){return this.dom=fe.prototype._createDom.call(this,t,i),this.wy(),t},le.prototype._createDefaultInnerDom=function(){var t=document.createElement("img");return t.setAttribute("width","19px"),t.setAttribute("height","32px"),t.setAttribute("src",he.MarkerIconURL),this._size=[19,32],t},le.prototype._getMarkerOffset=function(t,i){return i},le.prototype._getStyleZIndex=function(t){var i;return this._isTop?i=he.gy:void 0!==t&&(i=t),i},le.prototype._createIcon=function(n,s){var e=this,t=n.getImage(),i=n.getSize(),r=n.getImageSize(),h=n.getImageOffset(),o=document.createElement("div");o.className="amap-icon",o.style.overflow="hidden";var a=document.createElement("img");return a.onload=function(){var t=a.width,i=a.height;n.Em([t,i]),e._size=r&&r.length?r:[t,i],i=e._getSize(),e._setIconSize(o,a,i,r),s&&s()},a.onerror=function(){},o.appendChild(a),this._setIconStyle(o,a,{size:i,imageSize:r,imageOffset:h}),a.src=t,o},le.prototype._setIconStyle=function(t,i,n){var e=void 0===(s=n.size)?[0,0]:s,s=void 0===(s=n.imageSize)?[0,0]:s,n=void 0===(n=n.imageOffset)?[0,0]:n;i.style.top=n[1]+"px",i.style.left=n[0]+"px",this._setIconSize(t,i,e,s)},le.prototype._setIconSize=function(t,i,n,s){var e=n[0],r=n[1],n=s[0],s=s[1];e&&(t.style.width=e+"px"),r&&(t.style.height=r+"px"),n&&s&&(i.style.width=n+"px",i.style.height=s+"px")},le.prototype._removeContent=function(){this.dom.innerHTML="",this._opts.label&&this.setLabel(this._opts.label)},le.prototype._getD=function(){return this.dom},le.prototype.wy=function(){var t=this,i=this._opts,n=i.content,s=i.icon,e=i.text;!n&&s?(i="string"==typeof s?new Ws({image:s}):s,i=this._createIcon(i,function(){t.updateOverlay(),t._opts.label&&t.My()}),this.dom.appendChild(i)):n||s||e||(e=this._createDefaultInnerDom(),this._originOpts.anchor||(this._opts.anchor="bottom-center"),this.dom.appendChild(e))},le.prototype.ky=function(t,i){return i||((i=document.createElement("div")).className="amap-marker-label"),i.innerHTML=t,i},le.prototype.My=function(){var t=this._style.size,i=this._opts.label,s=void 0===(n=i.offset)?[0,0]:n,r=(e=s=Y.oy(s)?s.toArray():s)[0],n=e[1],s=this._y.offsetWidth,e=this._y.offsetHeight,e=this.zy.size=[s,e],n=(e=[(e=this.Sy(i,t,e))[0]+r,e[1]+n])[0];this.zy.top=e[1],this.zy.left=n},le.prototype.Sy=function(t,i,n){var t=t.direction,e=i[0],r=i[1],h=n[0],o=n[1],a=0,u=0;switch(void 0===t?"right":t){case Ks.Nm:a=0,u=-o;break;case Ks.top:case Ks.$m:a=e/2-h/2,u=-o;break;case Ks.Um:a=e,u=-o;break;case Ks.right:case Ks.Wm:a=e,u=r/2-o/2;break;case Ks.center:a=e/2-h/2,u=r/2-o/2;break;case Ks.left:case Ks.Bm:a=-h,u=r/2-o/2;break;case Ks.Gm:a=0,u=r;break;case Ks.bottom:case Ks.Zm:a=e/2-h/2,u=r;break;case Ks.qm:a=e,u=r;break;default:a=e/2-h/2,u=-o}return[a,u]},le.prototype.Ry=function(){var t=this.zy,i=t.top,n=t.left;(t=this._y).style.top=i+"px",t.style.left=n+"px"},le.prototype._bindEvents=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},le.prototype.XH=function(){this.dom&&(this.dom.ondragstart=function(){return!1})},le.prototype.T_=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},le.prototype.ZH=function(){this.dom&&(this.dom.ondragstart=null)},le.prototype.Cy=function(t){this.Ay(t)},le.prototype._dragging=function(t){var n=(i=this._dragObjects.sy).x,s=i.y,i=(e=t.pixel).x,e=e.y,s=(n=Y.vector.Ip([i,e],[n,s]))[0],n=n[1],n=(s=Y.vector.add([s,n],this._points))[0],s=s[1];this._map&&(s=this._map.containerToLngLat([n,s]),this.setPosition(s.toJSON()),this.Ay(t))},le.prototype.Ly=function(t){},le.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},le);function le(t){var i=fe.call(this,t=void 0===t?{}:t,{className:he.vy})||this;i.type=he.uy,i.className=he.uy,i._isTop=!1,i.zy={width:0,height:0,size:[0,0],top:0,left:0,translate:[0,0],zIndex:he.by},i._opts=Y.assign({},oe,i._opts);var n=i._opts.size,s=i._opts.icon;return!n&&s instanceof Ws&&(n=s.getSize(),i._opts.size=n),n instanceof Y.Size&&(i._opts.size=i._formatSize(n)),t.title&&i.setTitle(t.title),t.label&&i.setLabel(t.label),t.draggable&&i.setDraggable(!0),(t=t.map)&&t instanceof Ye&&i.add(t),i.XH(),i}var de,ve,pe={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},getStyle:function(t,i){var n,s=t.style[i];return"auto"===(s=(s=(s=s&&"auto"!==s||!document.defaultView?s:(n=document.defaultView.getComputedStyle(t,null))?n[i]:null)&&"auto"!==s||"height"!==i?s:t.clientHeight+"px")&&"auto"!==s||"width"!==i?s:t.clientWidth+"px")?null:s},getViewportOffset:function(t){var i,n=0,s=0,e=t,r=document.body,h=document.documentElement;do{if(n+=e.offsetTop||0,s+=e.offsetLeft||0,n+=parseInt(pe.getStyle(e,"borderTopWidth"),10)||0,s+=parseInt(pe.getStyle(e,"borderLeftWidth"),10)||0,i=pe.getStyle(e,"position"),e.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||h.scrollTop||0,s+=r.scrollLeft||h.scrollLeft||0;break}}while(e=e.offsetParent);for(e=t;e!==r&&(n-=e.scrollTop||0,s-=e.scrollLeft||0,!pe.m()&&Y.Support.webkit&&(s+=e.scrollWidth-e.clientWidth),e=e.parentNode););return[s,n]},m:function(){return de||(ve="ltr"===pe.getStyle(document.body,"direction"),de=!0),ve},create:function(t,i,n,s){return t=document.createElement(t),n&&(t.className=n),i&&(s&&"before"===s?(s=i.firstChild,i.insertBefore(t,s)):i.appendChild(t)),t},toggleClass:function(t,i,n){n?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,n){t&&n&&(t.classList&&t.classList.remove?t.classList.remove(n):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===n?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(n,s,e){var i=document.createElement("iframe");i.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",i.onload=function(){i&&(i.contentWindow.onresize=t)},n.appendChild(i),i.src="about:blank";var r=0,h=0;function t(){e.k=n.getBoundingClientRect(),e.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===r&&i===h||(s(t,i),r=t,h=i)}return t(),e.resize=t,window.onscroll=t,function(){var t;e.resize&&(e.resize=null),window.onscroll&&(window.onscroll=null),i.contentWindow&&(i.contentWindow.onresize=null,i.contentWindow.document.write(""),i.parentNode.removeChild(i),null!==(t=i.contentWindow)&&void 0!==t&&t.close())}},watchSize2:function(n,s,e){var r=document.createElement("_");r.className="expand";var h=r.appendChild(document.createElement("_"));h.className="shrink";var o=r.appendChild(document.createElement("_"));o.className="expandChild";var a,u,t=h.appendChild(document.createElement("_"));return t.className="shrinkChild",h.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=o.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",n.appendChild(r),f(),function(){c(),n.removeChild(r)};function f(){c(),e.k=n.getBoundingClientRect(),e.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===a&&i===u||(a=t,u=i,o.style.width=2*t+"px",o.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,h.scrollLeft=h.scrollWidth,h.scrollTop=h.scrollHeight,s(t,i)),h.addEventListener("scroll",f),r.addEventListener("scroll",f)}function c(){h.removeEventListener("scroll",f),r.removeEventListener("scroll",f)}},mousePos:function(t,i,n){return t&&(n.k=t.getBoundingClientRect(),n.M=[t.clientLeft,t.clientTop]),t=n.k,[(i=i.touches&&i.changedTouches?0<i.touches.length?i.touches[0]:i.changedTouches[i.changedTouches.length-1]:i).clientX-t.left-n.M[0],i.clientY-t.top-n.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){return t?this.hasClass(t,i)?t:(t=t.parentElement)?pe.closest(t,i):null:null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,n=0;n<t.length;n+=1)if(t[n]in i)return t[n];return!1},rotate:function(t,i,n){var s,e=pe.kL;n=n||{x:t.clientWidth/2,y:t.clientHeight/2},e?(s="",t.style[e]=s+=" rotate("+i+"deg)",t.style[pe.ML[e]+"-origin"]=n.x+"px "+n.y+"px"):(e=Math.cos(i*Math.PI/180),i=Math.sin(i*Math.PI/180),t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length&&((t=t.filters.item(0)).Dx=-n.x*e+n.y*i+n.x,t.Dy=-n.x*i-n.y*e+n.y,t.M11=t.M22=e,t.M12=-(t.M21=i)))},setCss:function(t,i){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n+=1)for(var s in i)i.hasOwnProperty(s)&&(t[n].style[s]=i[s]);return this},setOpacity:function(t,i){t.style&&("opacity"in t.style?t.style.opacity=""+i:"filter"in t.style&&(i=Math.round(100*i),t.style.filter="",100!==i&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")))},ML:{},kL:ve=de=!1};pe.kL=pe._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),pe.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var me,ye={uy:"AMap.InfoWindow",JP:"",XP:"amap-info",QP:121,KP:8,tF:8,iF:[20,20,20,20]},be=Y.assign({},ie,{isCustom:!1,closeWhenClickMap:!1,anchor:"bottom-center",autoMove:!0,avoid:ye.iF}),ge=(me=F,Y.Ei(ke,me),ke.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,me.prototype.addToGroup.call(this,t)},ke.prototype.removeFromGroup=function(t){me.prototype.removeFromGroup.call(this,t),this.Iy=0},ke.prototype.close=function(){var t=this.Iy;(t=this._overlays[t])&&(this.Iy=0,t.close())},ke.prototype.vi=function(t){return t=t.target,this.Iy&&t&&pe.closest(t,"amap-info")?this._overlays[this.Iy]:null},ke.prototype.destroy=function(){this.Dy(),me.prototype.destroy.call(this)},ke.prototype.Rm=function(){this._map.on("click",this.Py)},ke.prototype.Dy=function(){this._map.off("click",this.Py)},ke);function ke(t){var n=me.call(this,t,{className:ye.JP})||this;return n.type=ye.uy,n.Py=function(t){var i=n.Iy,i=n._overlays[i];!pe.closest(t.originEvent.target,"amap-info")&&i&&i.getOptions().closeWhenClickMap&&(n.Iy=0,i.close())},n._container=n._parent,n.Rm(),n}var Me,we=(Me=Ht,Y.Ei(xe,Me),xe.prototype.open=function(t,i,n){t&&t instanceof Ye&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.jy(),this.emit("open"),this.GF()):t&&this._position?(this._opts.visible=!0,this.add(t),this.jy(),this.emit("open"),this.GF()):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"),this.GF())},xe.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.updateOverlay(),this.emit("close"))},xe.prototype.getIsOpen=function(){return!(!this._map||!this._opts.visible)},xe.prototype.setSize=function(t){t instanceof Y.Size&&(t=t.toArray()),this._opts.size=t,this.updateOverlay()},xe.prototype.setContent=function(t){Me.prototype.setContent.call(this,t=void 0===t?"":t),this.jy()},xe.prototype.setAnchor=function(t){var i,n=this.dom&&this.dom.querySelector(".amap-info-contentContainer");t&&n&&((i=this.g_([].slice.call(n.className.split(" "))))&&pe.removeClass(n,i),this._size=[0,0],pe.addClass(n,t)),Me.prototype.setAnchor.call(this,t)},xe.prototype.getDraggable=function(){return!1},xe.prototype.setOptions=function(t){this._opts=Y.assign({},be,this._opts,t)},xe.prototype.updateOverlay=function(t){void 0===t&&(t={}),this._map&&(t=t.viewChange,this._setStyle(t=void 0!==t&&t),this._applyStyle(t),t=this._getSize(),this.Fy&&t[0]&&window.getComputedStyle(this.Fy).boxSizing)},xe.prototype.getBounds=function(){return null},xe.prototype.getExtData=function(){return this._opts.extData||null},xe.prototype.setExtData=function(t){this._opts.extData=t},xe.prototype._add=function(t){this._map=t,this._parent=t.di,this.updateOverlay()},xe.prototype._remove=function(){Me.prototype._remove.call(this),this.Ey()},xe.prototype._createDefaultInnerDom=function(){return document.createElement("div")},xe.prototype._createDom=function(t,i){var n=this.Ny(t);return this.$y(n,i),t},xe.prototype._getContentSize=function(){var t,i,n=this._style,s=this._getSize();s[0]&&s[1]&&!this._opts.isCustom?(t=s[0],i=s[1]):(s=this.dom.querySelector(".amap-info-contentContainer"))&&(t=s.clientWidth,i=s.clientHeight,this._size=[t,i]),n.width=t+"px",n.height=i+"px",n.size=[t,i]},xe.prototype._getAnchorOffset=function(t){return[(t=Me.prototype._getAnchorOffset.call(this,t))[0],t[1]]},xe.prototype.Ny=function(t){var i=document.createElement("div");pe.addClass(i,"amap-info-shadowContainer");var n=document.createElement("div");return pe.addClass(n,"amap-info-contentContainer"),n.addEventListener("touchstart",function(t){t.cH="infoWindow"}),t.style.position="absolute",i.style.position="absolute",t.appendChild(i),t.appendChild(n),n},xe.prototype.$y=function(t,i){var s=(n=this._opts).isCustom,n=n.anchor;void 0!==s&&s?"object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i+"":(s=this.Fy=document.createElement("div"),pe.addClass(s,"amap-info-content"),pe.addClass(s,"amap-info-outer"),"object"==typeof i&&i instanceof HTMLElement?s.appendChild(i):s.innerHTML=i?i+"":"",i=document.createElement("a"),pe.addClass(i,"amap-info-close"),i.innerText="×",s.appendChild(i),i=document.createElement("div"),pe.addClass(i,"amap-info-sharp"),pe.addClass(t,n),t.appendChild(s),t.appendChild(i))},xe.prototype.jy=function(){var t=this.dom.querySelector(".amap-info-close");t&&t.addEventListener("click",this.close.bind(this))},xe.prototype.Ey=function(){var t=this,i=this.dom.querySelector(".amap-info-close");i&&i.removeEventListener("click",function(){t.close()})},xe.prototype.Oy=function(){if(this._position){var t=this._map;if(t&&this._opts.autoMove&&this.dom){for(var i=this._getSize(),n=new Y.Size(i[0],i[1]),s=t.lngLatToContainer(this._position).toArray(),e=this._getOffset(this.getAnchor(),this.getOffset().toArray()),r=Y.vector.add(s,e),h=Y.vector.add(r,i),o=t.getSize(),a=[this._opts.avoid||ye.iF],u=0,f=0,c=0;c<a.length;c+=1){var l=a[c],d=0,v=0;0!==l[3]&&0<(d=l[3]-(r[0]+u))&&(u+=d),0!==l[1]&&(d=o.getWidth()-l[1]-(h[0]+u))<0&&(u+=d),0!==l[0]&&0<(v=l[0]-(r[1]+f))&&(f+=v),0!==l[2]&&(v=o.getHeight()-l[2]-(h[1]+f))<0&&(f+=v)}r=Y.vector.add(r,[u,f]),h=Y.vector.add(h,[u,f]),r[i=e=0]<0||n.getWidth()>o.getWidth()?e=20-r[0]:o.getWidth()<h[0]&&(e=o.getWidth()-h[0]-25),r[1]<0||n.getHeight()>o.getHeight()?i=5-r[1]:o.getHeight()<h[1]&&(i=o.getHeight()-h[1]-15),i+=f,((e+=u)||i)&&t.panBy(e,i)}}},xe.prototype.GF=function(){var t,i,n,s,e,r,h,o,a,u,f,c;!this._position||(t=this._map)&&this._opts.autoMove&&this.dom&&(f=this._position,Y.Bs(f)&&(f=f.toArray()),i=(a=t.getSize()).getWidth()||0,n=a.getHeight()||0,s=this._getSize(),u=t.lngLatToContainer(f).toArray(),c=this._getOffset(this.getAnchor(),this.getOffset().toArray()),e=Y.vector.add(u,c),r=Y.vector.add(e,s),h=this._opts.avoid||ye.iF,o=e[0],a=e[1],u=!1,e[1]-h[0]<0&&(a=h[0],u=!0),r[0]+h[1]>i&&(o=i-s[0]-h[1],u=!0),r[1]+h[2]>n&&(a=n-h[2]-s[1],u=!0),e[0]-h[3]<0&&(o=h[3],u=!0),u&&(c=Y.vector.Ip([o,a],c),c=t.containerToLngLat(c).toArray(),c=Y.vector.Ip(c,f),f=t.getCenter().toArray(),c=Y.vector.Ip(f,c),t.panTo(c)))},xe.prototype.g_=function(t){var i,n,s=Ks;for(n in s)if(s.hasOwnProperty(n)){var e=s[n];if(-1!==t.indexOf(e)){i=e;break}}return i},xe);function xe(t){var i=Me.call(this,t=void 0===t?{}:t,{className:ye.XP,anchor:be.anchor})||this;return i.type=ye.uy,i._opts=Y.assign({},be,i._opts),i._originOpts.zIndex||(i._opts.zIndex=ye.QP),(t=i._opts.size)instanceof Y.Size&&(i._opts.size=i._formatSize(t)),i.jy(),i}var Ae,ze="AMap.ContextMenu",Ie=(Ae=F,Y.Ei(De,Ae),De.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,Ae.prototype.addToGroup.call(this,t)},De.prototype.removeFromGroup=function(t){Ae.prototype.removeFromGroup.call(this,t),this.Iy=0},De.prototype.vi=function(t){return t=t.target,this.Iy&&t&&w.closest(t,"amap-menu")?this._overlays[this.Iy]:null},De.prototype.destroy=function(){this.Uy(),Ae.prototype.destroy.call(this)},De.prototype.By=function(){this._map.on("viewchange",this.Wy),this._map.on("click",this.Py)},De.prototype.Uy=function(){this._map.off("viewchange",this.Wy),this._map.off("click",this.Py)},De);function De(t){var n=Ae.call(this,t,{className:""})||this;return n.type=ze,n.className=ze,n.Wy=function(){var t;!n.Iy||(t=n._overlays[n.Iy])&&!t.getOptions().aliveWhenMapClick&&n.removeFromGroup(t)},n.Py=function(t){var i=n.Iy,i=n._overlays[i];w.closest(t.originEvent.target,"amap-info")||!i||i.getOptions().aliveWhenMapClick||(n.Iy=0,i.close())},n._container=n._parent,n.By(),n}var Oe,Ee=(Oe=Ht,Y.Ei(Re,Oe),Re.prototype.open=function(t,i){t&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.emit("open")):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"))},Re.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.uZ(),this.emit("close"))},Re.prototype.addItem=function(t,i,n){this.Zy.push({content:t,fn:i,order:n}),this.qy(this.dom),this.updateOverlay()},Re.prototype.removeItem=function(t,i){for(var n=this.Zy,s=0;s<n.length;s++){var e=n[s];e.content===t&&e.fn===i&&(n.splice(s,1),s--)}this.qy(this.dom),this.updateOverlay()},Re.prototype.getBounds=function(){return null},Re.prototype.getDraggable=function(){return!1},Re.prototype._add=function(t){this._map=t,this._parent=t.vm,this.updateOverlay()},Re.prototype._createDefaultInnerDom=function(){return document.createElement("div")},Re.prototype._createDom=function(t,i){var n=this.dom=this.Yy();return this._opts.isCustom&&this._opts.content?Oe.prototype._createDom.call(this,n,this._opts.content):this.qy(n),n},Re.prototype.Yy=function(){var t=document.createElement("div");return w.addClass(t,this._className),t},Re.prototype.qy=function(t){var i=this.Vy(this.Zy),n=document.createElement("ul");w.addClass(n,"amap-menu-outer");for(var s=0,e=i;s<e.length;s++){var r=e[s],r=this.Xy(r);n.appendChild(r)}t.innerHTML="",t.appendChild(n)},Re.prototype.Vy=function(t){return(t=void 0===t?[]:t).sort(function(t,i){return isNaN(t.order)||isNaN(i.order)?0:t.order-i.order}),t},Re.prototype.Xy=function(i){var n=this,t=document.createElement("li");return t.innerHTML=i.content,t.addEventListener("click",function(t){i.fn(t),n._opts.aliveWhenMapClick||n.hide()}),t},Re);function Re(t){var i=Oe.call(this,t=void 0===t?{}:t,{className:"amap-menu"})||this;return i.type=ze,i.className=ze,i._opts={},i.Zy=[],i._opts=t,i._style.zIndex=140,i}function Pe(){this.Hy=!1,this.ex=null,this.Ky=this.nx()}Pe.prototype.open=function(t,i,n){var s,e,r,h,o,a,u,f,c,l=this;this.Hy||(s=this.Jy,e=AMap.getConfig().server+"/verify/",Y.Support.$e?(this.Ky.style.marginLeft=-Math.min(330,screen.width)/2+"px",document.body.appendChild(this.Ky)):(r=this.Qy("amap-container",document.body)[0])&&322<r.clientWidth&&346<r.clientHeight?(this.Ky.style.position="absolute",r.appendChild(this.Ky)):(o=h=0,r&&(r=w.getViewportOffset(r),h=r[0],o=r[1]),this.Ky.style.top="0%",this.Ky.style.left="0%",a=(.5-h)/5,u=(.5-o)/5,f=setInterval(function(){o+=u,.5-(h+=a)<.05&&.5-o<.05?(l.Ky.style.top="50%",l.Ky.style.left="50%",clearInterval(f)):(l.Ky.style.top=100*o+"%",l.Ky.style.left=100*h+"%")},25),document.body.appendChild(this.Ky)),c=!0,s.onload=function(){c?c=!1:l.Hy&&(l.Ky.parentNode&&l.Ky.parentNode.removeChild(l.Ky),l.Hy=!1,l.tx())},s.src=e+"jsapi.html?channel=JSAPI-"+t+"&from="+encodeURIComponent(e+"success.html")+"&th="+i+"&restUrl="+encodeURIComponent(n),this.Hy=!0)},Pe.prototype.ix=function(t){this.ex=t},Pe.prototype.tx=function(){this.ex&&this.ex()},Pe.prototype.Qy=function(t,i){if(window.getElementsByClassName)return window.getElementsByClassName(t,i);for(var n=(i||document).getElementsByTagName("*"),s=[],e=0;e<n.length;e+=1)for(var r=n[e],h=r.className.split(" "),o=0;o<h.length;o+=1)if(h[o]===t){s.push(r);break}return s},Pe.prototype.nx=function(){var t=document.createElement("div");t.className="amap-popup",t.style.zIndex="2147483647";var i=document.createElement("iframe");return i.className="amap-popup-content",t.appendChild(i),i.style.width=Math.min(330,screen.width)+"px",this.Jy=i,t},(new Pe).ix(function(){je.ox=!1;for(var t=je.ax,i=0,n=t.length;i<n;i+=1){var s=t[i];10<n-i?t[2]({status:"error",info:"TIME_OUT_A"}):je.get(s[0],s[1],s[2])}je.ax=[]});var je=(Be.get=function(t,i,n,s){if(Be.ox)Be.ax.push([t,i,n]);else{var e,r=t.split("://")[1],o=(h=AMap.getConfig()).key,a=h.version,u=h.appname,f=h.jscode,h=h.gaodeserver,c=t+"?platform=JS&s=rsv3&logversion=2.0&key="+o+"&sdkversion="+a+"&appname="+u+"&csid="+Y.Util.uuid();for(e in f?c+="&jscode="+f:h&&r&&"restapi.amap.com"===r.split("/")[0]&&(c=r.replace(r.split("/")[0],h)+"?platform=JS&s=rsv3&logversion=2.0&key="+o+"&sdkversion="+a+"&appname="+u+"&csid="+Y.Util.uuid()),i)i.hasOwnProperty(e)&&(c+="&"+e+"="+i[e]);qt.Ajax(c,{type:"GET",requestContentType:"application/json"},function(t,i){"complete"===t?(i=i.data,console.log("===",i),n(t,JSON.parse(i))):n(t,i)})}},Be.post=function(t,i,n){var e=(s=AMap.getConfig()).key,r=s.version,h=s.appname,o=s.jscode,a=s.gaodeserver,s=t.split("://")[1],t=t+"?platform=JS&s=rsv3&logversion=2.0&key="+e+"&sdkversion="+r+"&appname="+h+"&csid="+Y.Util.uuid();o?t+="&jscode="+o:a&&s&&"restapi.amap.com"===s.split("/")[0]&&(t=s.replace(s.split("/")[0],a)+"?platform=JS&s=rsv3&logversion=2.0&key="+e+"&sdkversion="+r+"&appname="+h+"&csid="+Y.Util.uuid()),qt.Ajax(t,{type:"POST",content:JSON.stringify(i),requestContentType:"text/plain"},function(t,i){"complete"===t?(i=i.data,n(t,JSON.parse(i))):n(t,i)})},Be.ox=!1,Be.ax=[],Be);function Be(){}function Fe(t,i,r){var n=AMap.getConfig(),s=n.server+"/v3/assistant/coordinate/convert",e=AMap.Util.parseLngLatData(t),h=[];if(e instanceof Array){for(var o=0,a=e.length;o<a;o+=1)h.push(e[o]+"");h=h.join(";")}else h=e+"";i={key:n.key,s:"rsv3",locations:h,coordsys:i||"gps"},AMap.WebService.get(s,i,function(t,i){if("complete"===t&&i.status&&"1"===i.status){for(var n=i.locations.split(";"),s=0;s<n.length;s+=1){var e=n[s].split(",");n[s]=new AMap.LngLat(e[0],e[1])}r&&"function"==typeof r&&r("complete",{info:"ok",locations:n})}else r&&"function"==typeof r&&r("error",i.info);"error"===t&&r("error",i.info)})}var We,Ge=(Ne.prototype.setCenter=function(t){t instanceof Y.LngLat?this.cB=t.toArray():this.cB=t,this.dB=(t=this.map.getProjection()).project.apply(t,this.cB)},Ne.prototype.getCenter=function(){return this.cB},Ne.prototype.lngLatToCoord=function(t){var i=this.map.getProjection().project;return t instanceof Y.LngLat&&(t=t.toArray()),this.cB||this.setCenter(t),this.pB(i(t[0],t[1]),this.dB)},Ne.prototype.lngLatsToCoords=function(t){if(Y.Util.isArray(t)){var i=this.map.getProjection().project,n=[];if(Y.Util.vB(t[0]))this.cB||this.setCenter(t),n[0]=this.pB(i(t[0],t[1]),this.dB);else for(var s=0,e=t.length;s<e;s++){var r=t[s];if(Y.Util.vB(r[0]))this.cB||this.setCenter(r),n[s]=this.pB(i(r[0],r[1]),this.dB);else{for(var h=[],o=0,a=r.length;o<a;o++){var u=r[o];if(Y.Util.vB(u[0]))this.cB||this.setCenter(u),h[o]=this.pB(i(u[0],u[1]),this.dB);else{for(var f=[],c=0,l=r.length;c<l;c++){var d=u[c];Y.Util.vB(d[0])&&(this.cB||this.setCenter(d),f[c]=this.pB(i(d[0],d[1]),this.dB))}h[o]=f}}n[s]=h}}return 0<n.length?n:t}return t},Ne.prototype.getCameraParams=function(){this.mB();var t=this.map.getView(),i=t.pz(),n=this.pB(this.dB,this.Us);if("3D"===t.type){var s=i.lB(),e=s.fov,r=s.near,h=s.far,o=s.position,a=s.target,u=s.up;return{fov:e/Math.PI*180,near:r,far:h,position:Y.Pt(this.pB(o,n),[o[2]]),lookAt:Y.Pt(this.pB(a,n),[a[2]]),up:u}}if("2D"===t.type)return e=(s=i.lB()).rotation,r=s.near,h=s.far,a=s.top,u=s.bottom,t=s.left,i=s.right,o=s.position,{rotation:e,near:r,far:h,top:a,bottom:u,left:t,right:i,position:Y.Pt(this.pB(o,n),[o[2]])}},Ne.prototype.getMVPMatrix=function(){this.mB();var t=this.map.getView().pz(),i=this.pB(this.dB,this.Us),n=Y.Il();return this.Xl=t.Vl(),n.set([1,0,0,0,0,1,0,0,0,0,1,0,i[0],i[1],0,1]),Y.multiply(this.Xl,this.Xl,n),this.Xl},Ne.prototype.mB=function(){var i=(t=this.map.getView().getStatus()).optimalZoom,t=t.centerCoord;i>=Y.Ra?(t=Y.lcs.getLocalByCoord([t[0],t[1]]),this.Us=t.center):this.Us=[0,0]},Ne.prototype.pB=function(t,i){var n=[0,0];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n},Ne);function Ne(t){this.Us=[0,0],t||console.error("需要传入 map 实例对象。new AMap.CustomCoords(map);"),this.map=t,this.mB()}var Ue,_e=[116.397128,39.916527],Ye=(Ue=Ps,Y.Ei(Ze,Ue),Ze.prototype.setCenter=function(t,i,n){void 0===i&&(i=!1),t instanceof Y.LngLat&&(t=t.toJSON()),!i&&this.Ev?this.viewChange({lng:t[0],lat:t[1]},n):this.om({center:t})},Ze.prototype.getStyleByUserId=function(t,i){return this.qY(t,i)},Ze.prototype.getCustomTypeByContainerPos=function(t){if(!(i=this.getCustomTypeByPos(t))||!i[0])return null;var n={},s=i[0][0],e={x:i[0][1],y:i[0][2],z:s},t=(i=t.lnglat).lng,i=i.lat,i=Y.ZY(s,s,t,i,e);return n.tileInnerCoord=i,n.tileCoord=e,n},Ze.prototype.getScreenShot=function(t,i){var n=this.getSize(),s=document.createElement("canvas"),e=s.getContext("2d");t=t||n.width,i=i||n.height,s.width=t,s.height=i,n.width,n.height;for(var r=this.do.childNodes,h=[],o=0;o<r.length;o+=1)h.push(r[o]);for(o=0;o<h.length;o+=1){var a=h[o];"CANVAS"===a.tagName&&e.drawImage(a,0,0,t,i)}return s.toDataURL()},Ze.prototype.updateView=function(t,i){this.om(t,i=void 0===i||i)},Ze.prototype.destroy=function(){delete this.hx,Ue.prototype.destroy.call(this)},Ze.prototype.setZoomAndCenter=function(t,i,n,s){void 0===n&&(n=!1),this.Pv||(t=this.getZoom()),i instanceof Y.LngLat&&(i=i.toJSON()),!n&&this.Ev?this.viewChange({lng:i[0],lat:i[1],zoom:t},s):this.om({center:i,zoom:t})},Ze.prototype.getBounds=function(){return new lt(this._view.getStatus().bounds)},Ze.prototype.getCenter=function(){var i=(t=this._view.getOptions().center)[0],t=t[1];return new Y.LngLat(+i.toFixed(6),+t.toFixed(6))},Ze.prototype.getGraphicInfo=function(){return this.wX()},Ze.prototype.setZoom=function(t,i,n){void 0===i&&(i=!1),this.Pv&&(!i&&this.Ev?this.viewChange({zoom:t},n):this.om({zoom:t}))},Ze.prototype.getZoom=function(t){return void 0===t&&(t=2),+this._view.getOptions().zoom.toFixed(t)},Ze.prototype.zoomIn=function(){this.setZoom(this.getZoom()+1)},Ze.prototype.zoomOut=function(){this.setZoom(this.getZoom()-1)},Ze.prototype.getPitch=function(){return this._view.getOptions().pitch},Ze.prototype.setPitch=function(t,i,n){!(i=void 0!==i&&i)&&this.Ev?this.viewChange({pitch:t},n):this.om({pitch:t})},Ze.prototype.getRotation=function(){return this._view.getOptions().rotation},Ze.prototype.setRotation=function(t,i,n){void 0===t&&(t=0),!(i=void 0!==i&&i)&&this.Ev?this.viewChange({rotation:t},n):this.om({rotation:t})},Ze.prototype.setBounds=function(t,i,n){void 0===i&&(i=!1),n=(void 0===n?[0,0,0,0]:n)||[0,0,0,0],t instanceof lt&&(t=t.toJSON()),n=this.em(t,n),this.setZoomAndCenter(n[2],[n[0],n[1]],i)},Ze.prototype.panTo=function(t,i){t instanceof Y.LngLat&&(t=t.toJSON()),this.viewChange({lng:t[0],lat:t[1]},i)},Ze.prototype.getBindHandler=function(){return this.hx},Ze.prototype.panBy=function(t,i,n){var s,e,r,h,o,a,u,f=this.getSize(),c=f.width/2-t,l=f.height/2-i,d=this.getCenter();this.lx&&this.ux&&(s=Math.sqrt(t*t+i*i),u=this.getProjection(),e=(void 0===this.ux.lng?d:this.ux).lng,r=(void 0===this.ux.lat?d:this.ux).lat,h=void 0===this.ux.zoom?this.getZoom():this.ux.zoom,o=void 0===this.ux.rotation?this.getRotation():this.ux.rotation,a=void 0===this.ux.pitch?this.getPitch():this.ux.pitch,f=u.getResolution(h),d=u.project(e,r),u=o/180*Math.PI,u=Math.atan(t/i)-u,i<0&&(u+=Math.PI),i=s*Math.sin(u),u=s*Math.cos(u),d[0]-=f*i,d[1]+=f*u,this.setCenter([e,r],!0),this.setZoom(h,!0),this.setRotation(o,!0),this.setPitch(a,!0)),this.panTo(this.containerToLngLat([c,l]),n)},Ze.prototype.viewChange=function(t,i){var n,s,e,r=new L(.4,0,.15,1),h=(new L(.67,0,1,.42),new L(.95,.25,.79,1)),o=new L(.18,.66,.55,.86),a=this.getZoom(),u=this.getPitch(),f=this.getRotation(),c=this.getCenter().toJSON(),l=0,d=0,v=0,p=0;this.lx?(Y.Util.cancelAnimFrame(this.lx),this.ux=Y.assign(this.ux,t)):this.ux=t;var m,y,b,g=this.ux,k=g.zoom,M=g.pitch,w=g.rotation,x=g.lng,A=g.lat;void 0!==k&&(n=k-a,l=r.h(Math.abs(n/10)),l=1e3*Math.max(Math.min(1,l),.1)),void 0!==M&&(s=M-u,d=Math.abs(16.7*s)),void 0!==w&&(e=w-f,v=Math.abs(16.7*e)),void 0!==x&&void 0!==A&&(m=[],t=this._view.getStatus().centerCoord,y=x-c[0],b=A-c[1],g=this.getProjection().project(x,A),m[0]=Math.abs(g[0]-t[0])/this.getResolution(),m[1]=Math.abs(g[1]-t[1])/this.getResolution(),t=0,g=r.h(Math.min(m[0]/this.getSize().width,1)),t=r.h(Math.min(m[1]/this.getSize().height,1)),p=1e3*Math.max(Math.min(1,t,g),.05,g,t));var z=Math.max(l,d,v,p),C=0;function S(){var t={};if(z<=C)return void 0!==k&&(t.zoom=k),void 0!==M&&(t.pitch=M),void 0!==w&&(t.rotation=w),void 0!==x&&void 0!==A&&(t.center=[x,A]),this.om(t),Y.Util.cancelAnimFrame(this.lx),this.lx=!1,void(this.ux={});C+=16.7;var i=Math.min(1,r.p(C/z));void 0!==M&&(t.pitch=s*i+u),void 0!==w&&(t.rotation=e*i+f),void 0!==x&&void 0!==A&&(n&&.5<n?i=o.h(C/z):n&&n<-.5&&(i=h.h(C/z)),t.center=[y*i+c[0],b*i+c[1]]),void 0!==k&&(i=(n<0?o:h).h(C/z),t.zoom=n*i+a),this.om(t),this.lx=Y.Util.requestAnimFrame(S.bind(this))}void 0!==i&&(z=i),this.Ev||(z=-1),S.call(this)},Ze.prototype.getContainer=function(){return this.kv},Ze.prototype.add=function(t){for(var i=[],n=[],s=[],e=[],r=0,h=t=Array.isArray(t)?t:[t];r<h.length;r++){var o=h[r];if(Y.px(o))this.addLayer(o);else if(Y.er(o))Y.RF(o)?(this.add(o.getOverlays()),o.setMap(this)):this.am(o);else switch(o.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(o);break;case"AMap.InfoWindow":n.push(o);break;case"AMap.ContextMenu":s.push(o);break;case"AMap.LabelMarker":e.push(o)}}this.pi.add(i),this.di.add(n),this.vm.add(s),e.length&&this.rm().add(e),this.setNeedUpdate(!0)},Ze.prototype.remove=function(t){for(var i=[],n=[],s=[],e=[],r=0,h=t=Array.isArray(t)?t:[t];r<h.length;r++){var o=h[r];if(Y.er(o))Y.RF(o)?(this.remove(o.getOverlays()),o.setMap(null)):this.$F.remove(o);else if(Y.px(o))this.removeLayer(o);else switch(o.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(o);break;case"AMap.InfoWindow":n.push(o);break;case"AMap.ContextMenu":s.push(o);break;case"AMap.LabelMarker":e.push(o)}}e.length&&this.rm().remove(e),this.pi&&this.pi.remove(i),this.di&&this.di.remove(n),this.vm&&this.vm.remove(s),this.setNeedUpdate(!0)},Ze.prototype.lngLatToCoords=function(t){var i;return Y.Bs(t)&&(t=[t.lng,t.lat]),(i=this.getProjection()).project.apply(i,t)},Ze.prototype.coordsToLngLat=function(t){var i,t=(i=this.getProjection()).unproject.apply(i,t);return new AMap.LngLat(t[0],t[1])},Ze.prototype.lngLatToContainer=function(t){var i=(t=Y.Bs(t)?[t.lng,t.lat]:t)[0],n=t[1],e=void 0===(s=t[2])?0:s,s=(t=this._view).getOptions().zoom||this.xt[1],s=(e=t.lnglatToContainer(+i,+n,e,s))[0],e=e[1];return new Y.Pixel(s,e)},Ze.prototype.lnglatToContainer=function(){console.log&&console.log("请使用 lngLatToContainer 方法替代。")},Ze.prototype.containerTolnglat=function(){console.log&&console.log("请使用 containerToLngLat 方法替代。")},Ze.prototype.containerToLngLat=function(t){var t=t instanceof Array?(i=t[0],t[1]):(i=t.x,t.y),t=(i=this._view.containerTolnglat(i,t))[0],i=i[1];return new Y.LngLat(t,i)},Ze.prototype.coordToContainer=function(t){var i;return(i=this._view)._u.apply(i,t)},Ze.prototype.containerToCoord=function(t){return t instanceof Y.Pixel&&(t=t.toArray()),this._view.ku(t[0],t[1])},Ze.prototype.pixelToLngLat=function(t,i){var n;return void 0===i&&(i=this.getZoom()),t=t instanceof Array?(n=t[0],t[1]):(n=t.x,t.y),i=(t=Y.V[this._view.au()].unproject(n,t,i))[0],t=t[1],new Y.LngLat(i,t)},Ze.prototype.pixelTolnglat=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},Ze.prototype.unproject=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},Ze.prototype.lngLatToPixel=function(t,i){var n=(t=t instanceof Y.LngLat?t.toJSON():t)[0],t=t[1];return void 0===i&&(i=this.getZoom()),i=(t=Y.V[this._view.au()].project(n,t,i))[0],t=t[1],new Y.Pixel(i,t)},Ze.prototype.project=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},Ze.prototype.lnglatToPixel=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},Ze.prototype.lnglatToPixelArray=function(t,i){var n=(t=t instanceof Y.LngLat?t.toJSON():t)[0],t=t[1];return void 0===i&&(i=this.getZoom()),Y.V[this.getView().au()].project(n,t,i)},Ze.prototype.getTileCoordByLngLat=function(t,i,n){var s=(t=t instanceof Y.LngLat?t.toJSON():t)[0],t=t[1],s=Y.V[this.getView().au()].project(s,t,n),t=Math.floor(s[0]/256),s=Math.floor(s[1]/256);return new Y.ca(n,t,s)},Ze.prototype.addOverlay=function(t){this.am(t),this.setNeedUpdate(!0)},Ze.prototype.removeOverlay=function(t){this.ar(t),this.setNeedUpdate(!0)},Ze.prototype.getResolution=function(t){return t=(t||this.getCenter()).kT,this.getProjection().getResolution(this.getZoom())*Math.cos(t*Math.PI/180)},Ze.prototype.getScale=function(t){return this.getResolution()*(t||96)/.0254},Ze.prototype.getCity=function(n,t){je.get(AMap.getConfig().server+"/v3/geocode/regeo",{extensions:"",output:"json",location:t||this.getCenter().toJSON()},function(t,i){"complete"===t&&i.status+""=="1"?(i=i.regeocode.addressComponent,n({province:i.province,city:i.city instanceof Array?"":i.city,citycode:i.citycode instanceof Array?"":i.citycode,district:i.district instanceof Array?"":i.district})):n({})})},Ze.prototype.setCity=function(r,h){var o=this;je.get(AMap.getConfig().server+"/v3/config/district",{output:"json",subdistrict:"0",extensions:"all",keywords:r},function(t,i){if("complete"===t&&i.status+""=="1"){if((t=i.districts)&&t.length){i=t[0],!/[^\w]+/.test(r)||(t=Y.find(t,function(t){return t.name===r}))&&t!==i&&(i=t);try{var n=i.center.split(","),s=i.level,e=void 0;switch(s){case"city":e=10;break;case"province":e=7;break;case"district":e=12;break;case"country":e=4;break;default:e=12}-1!==i.name.indexOf("市")&&(e=10),o.setZoomAndCenter(e,n),h&&h.call(o,n,e)}catch(t){}}}else h(null,null)})},Ze.prototype.setFitView=function(t,i,n,s){if(void 0===i&&(i=!1),void 0===n&&(n=[60,60,60,60]),void 0===s&&(s=Math.min(17.5,Ps.t_[1])),!((t=Y.FF(t)?t.getAllOverlays():t)instanceof Array&&0===t.length)){n=Boolean(n)?n:[60,60,60,60],(t=!(t=t||[])||t instanceof Array?t:[t])&&0!==t.length||(t=this.getAllOverlays());var e=this.nm(t);if(e){var r,t=e.toJSON(),s=this.em(t,n,s);return"d"===Y.Support.baseRender&&(s[2]=Math.floor(s[2])),this.viewChange({lng:s[0],lat:s[1],zoom:s[2]},r=i?0:r),e}}},Ze.prototype.getFitZoomAndCenterByOverlays=function(t,i,n){if(void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=Y.zoomRange[1]),t=this.nm(t))return t=t.toJSON(),[(n=this.em(t,i,n))[2],new Y.LngLat(n[0],n[1])]},Ze.prototype.getFitZoomAndCenterByBounds=function(t,i,n){return void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=Y.zoomRange[1]),t instanceof lt&&(t=t.toJSON()),[(n=this.em(t,i,n))[2],new Y.LngLat(n[0],n[1])]},Ze.prototype.addControl=function(t){t.addTo(this),this.controls.push(t)},Ze.prototype.removeControl=function(t){t.remove?t.remove():t.removeFrom&&t.removeFrom(this,this.controls);for(var i=0;i<this.controls.length;i++)if(this.controls[i]===t)return void this.controls.splice(i-1,1)},Ze.prototype.L$=function(){},Ze.prototype.D$=function(){return"zh_cn"},Ze.prototype.set=function(t,i){switch(t){case"layers":this.setLayers(i);break;case"projection":break;case"pitch":this.setPitch(i);break;case"debug":this.debug=i;break;case"showLabel":this.showLabel=i;break;case"zoom":this.setZoom(i);break;case"center":this.setCenter(i);break;case"rotation":this.setRotation(i);break;case"dragEnable":this.setStatus({dragEnable:i});break;case"zoomEnable":this.setStatus({zoomEnable:i});break;case"scrollWheel":this.setStatus({scrollWheel:i});break;case"jogEnable":this.setStatus({jogEnable:i});break;case"doubleClickZoom":this.setStatus({doubleClickZoom:i});break;case"keyboardEnable":this.setStatus({keyboardEnable:i});break;case"animateEnable":this.setStatus({animateEnable:i});break;case"pitchEnable":this.setStatus({pitchEnable:i});break;case"touchZoom":this.setStatus({touchZoom:i});break;case"isHotspot":this.setStatus({isHotspot:i});break;case"style":this.setStyleByPlat(i)}},Ze.prototype.setMapStyle=function(t){this.f_(t),this.setStatus({mapStyle:t}),this.indoorMap&&this.indoorMap.hide()},Ze.prototype.getMapStyle=function(){var t=this.getStatus();if(t&&t.mapstyleUrl){var i=t.mapstyleUrl;return"normal"===t.mapstyleUrl?"amap://styles/normal":i}return""},Ze.prototype.getAllOverlays=function(i){var t=this.$F.getAllOverlays(),n=Y.Pt(t),s=this.pi.getAllOverlays(),t=this.di.getAllOverlays();Y.vx(s,function(t){n.push(t)}),t&&t.length&&Y.Util.Ig(n,t);for(var e=0,r=this.zv;e<r.length;e++){var h=r[e];h instanceof qn&&Y.Util.Ig(n,h.getAllOverlays())}return n=n.filter(function(t){return(!t._opts||!t._opts.innerOverlay)&&((!i||-1<t.className.toLocaleLowerCase().indexOf(i))&&!0)})},Ze.prototype.clearMap=function(){for(var t=this.getAllOverlays(),i=0;i<t.length;i++){var n=t[i];n&&n.remove&&n.remove()}},Ze.prototype.clearInfoWindow=function(){this.di&&this.di.close()},Ze.prototype.addImage=function(t,i){this.I_&&this.I_.addImage(t,i)},Ze.prototype.getImage=function(t){if(this.I_)return this.I_.getImage(t)},Ze.prototype.getFeatures=function(){return this.Cw},Ze.prototype.setFeatures=function(t){this.Cw=t;for(var i=this.yS(),n=this.getLayers(),s=0;s<n.length;s++){var e=n[s];"AMap.Buildings"===e.CLASS_NAME&&e.getState().u$&&(i?e.show():e.hide())}this.setNeedUpdate(!0)},Ze.prototype.hasLayer=function(i){var t=this.getLayers();return-1<Y.findIndex(t,function(t){return t===i})},Ze.prototype.getMapApprovalNumber=function(){var t=this.c_,i={satellite:"GS(2021)6342",district:"GS(2021)6375"};return t&&("normal"===t||"amap://styles/normal"===t)||(i.base="GS(2021)6375"),i},Ze.prototype.setMask=function(t){t&&(this.c$=t,this.d$||(this.d$=new hs({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$)),null!==(t=this.d$)&&void 0!==t&&t.setMask(this.c$))},Ze.prototype.cancelMapAnimate=function(){this.lx&&(Y.Util.cancelAnimFrame(this.lx),this.lx=-1,this.ux={})},Ze.prototype.setLabelRejectMask=function(t){void 0!==t&&(this.NH=t,this.setNeedUpdate(!0))},Ze.prototype.queryOverlayByPosition=function(t){return this.FY(t)},Ze.prototype.am=function(t){this.$F.add(t)},Ze.prototype.ar=function(t){this.sm().remove(t)},Ze.prototype.setStyle=function(t){this.RY(t)},Ze.prototype.setStyleByPlat=function(t){this.RY(t)},Ze);function Ze(t,i){void 0===i&&(i={zoom:9,center:[116.397128,39.916527],rotation:0,pitch:0,viewMode:"2D"});var n=this,s=null;if(t instanceof HTMLDivElement?s=t:null!==(e=document.getElementById(t))&&(s=e),null===s)throw Error("Map container div not exist");i.offlineServer&&AMap.setConfig("offlineServer",i.offlineServer),i.restServer?AMap.getConfig().server=i.restServer.endsWith("/")?i.restServer:i.restServer+"/":AMap.getConfig().server=i.offlineServer,i.assetsServer||(i.assetsServer=AMap.getConfig().offlineServer),i.zooms=i.zooms||Ps.t_;var e=!1;void 0===i.zoom&&(e=!0,i.zoom=Math.max(Math.min(i.zooms[1],12),i.zooms[0])),i.center=i.center?Y.Bs(i.center)?i.center.toJSON():i.center:_e,i.rotation=i.rotation||0,i.layers=i.layers||[],i.baseRender=Y.Support.isWebGL?"w":"d",i.showIndoorMap=i.showIndoorMap||!1,i.vectorMapForeign=i.vectorMapForeign||!1,i.overseaDataType=i.overseaDataType||"",i.vdataProxy=i.vdataProxy||"",i.vdataProxy&&(AMap.getConfig().vdataProxy=i.vdataProxy),n=Ue.call(this,s,i)||this,e&&(e=n.em(We)[2],n.setZoom(e,!0)),n.pi=new ae(n),n.di=new ge(n),n.vm=new Ie(n),n.hx=new S(n),n.hx.Xt(),n.plugin=AMap.plugin;for(var r=0;r<i.layers.length;r++){var h=i.layers[r];h&&"AMap.IndoorMap"===h.CLASS_NAME&&h.setMap(n)}return!i.showIndoorMap||"normal"!==n.c_&&"amap://styles/normal"!==n.c_||n.isDOMMode()||n.addLayer(n.indoorMap=new AMap.IndoorMap({zIndex:8,opacity:1,map:n})),n.YG=i.vectorMapForeign,n.QZ=i.overseaDataType,i.vectorMapForeign&&n.addLayer(new AMap.Mapbox({zIndex:8,opacity:1,visible:!0,map:n})),n.lcs.setMap(n),n.customCoords=new Ge(n),n.getOutseaState()&&n.bZ.MZ.tY.add({NZ:function(){n.bZ.MZ.wZ.gZ()},group:"default",UZ:function(){return n.bZ.MZ.wZ.stencil.AS},FZ:function(){return 0}}),n}var Xe,ni=(Xe=Wt,Y.Ei(Je,Xe),Je.prototype.getSourceConfig=function(){return{id:this._id,type:"image",tileUrl:this.Be,bounds:this.ir,canvas:this.canvas,zooms:this.xt}},Je.prototype.co=function(){return this._id},Je.prototype.getState=function(){return{visible:this.il,opacity:this.tl,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},Je);function Je(t){var i=Xe.call(this,t)||this;return i.CLASS_NAME="AMap.ImageLayer",i.Be=t.url||t.tileUrl,i.ir=t.bounds,i.Qh=t.zIndex||6,i.tl=void 0===t.opacity?1:t.opacity,i.il=void 0===t.visible||t.visible,i.xt=void 0===t.zooms?Y.zoomRange:t.zooms,i.canvas=t.canvas,i}var He,Ve={tileUrl:"",url:"",bounds:[0,0,0,0],opacity:1,visible:!0,zIndex:4,zooms:Y.zoomRange},qe=(He=ni,Y.Ei(Qe,He),Qe.prototype.getImageUrl=function(){return this.Be},Qe.prototype.setImageUrl=function(t){t&&(this.Be=t,this.uo.getSource(this._id).Fo(!1),this.map.setNeedUpdate(!0))},Qe.prototype.getBounds=function(){return this.ir},Qe.prototype.setBounds=function(t){t&&(this.ir=t,this.map.setNeedUpdate(!0))},Qe);function Qe(t){var i=this;if(!(t=void 0===t?Ve:t).tileUrl&&!t.url)throw new Error("ImageLayer need an Url");return t.bounds=t.bounds||Ve.bounds,t.opacity=(void 0===t.opacity?Ve:t).opacity,t.visible=(void 0===t.visible?Ve:t).visible,t.zIndex=(void 0===t.zIndex?Ve:t).zIndex,t.canvas=void 0,(i=He.call(this,t)||this).onCreated(),i}var Ke,$e={url:"",tileUrl:"",bounds:[0,0,0,0],opacity:1,visible:!0,zooms:Y.zoomRange,zIndex:6},tr=(Ke=ni,Y.Ei(ir,Ke),ir.prototype.setCanvas=function(t){this.canvas=t,this.reFresh()},ir.prototype.getElement=function(){return this.canvas},ir.prototype.getBounds=function(){return this.ir},ir.prototype.setBounds=function(t){t&&(this.ir=t,this.map.setNeedUpdate(!0))},ir.prototype.reFresh=function(){this.map&&this.map.setNeedUpdate(!0)},ir.prototype.destroy=function(){var t=this.getSource();t&&t.destroy&&t.destroy()},ir);function ir(t){var i=this;return(t=void 0===t?$e:t).bounds=t.bounds||$e.bounds,t.opacity=(void 0===t.opacity?$e:t).opacity,t.visible=(void 0===t.visible?$e:t).visible,t.tileUrl="",(i=Ke.call(this,t)||this).onCreated(),i.CLASS_NAME="AMap.CanvasLayer",i}var nr,Mt=(nr=Wt,Y.Ei(sr,nr),sr.prototype.getState=function(){return!this.eP&&this.map&&this.gx(this.canvas),{visible:this.il,opacity:this.tl,zIndex:this.Qh,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF,kv:this._container,alwaysRender:this.UF}},sr.prototype.getSourceConfig=function(){return{id:this._id,type:"custom",zooms:this.xt}},sr.prototype.co=function(){return this._id},sr.prototype.setOpacity=function(t){nr.prototype.setOpacity.call(this,t),this.canvas.style.opacity=""+this.tl},sr.prototype.setMap=function(t){t||this.destroy(),nr.prototype.setMap.call(this,t),t&&this.gx(this.canvas)},sr.prototype.setzIndex=function(t){this.Qh=t,this._container&&(this._container.style.zIndex=this.Qh+"")},sr.prototype.destroy=function(){var t;this._container&&(this.map?this.map.do.removeChild(this._container):(t=document.querySelector(".amap-layers"))&&t.removeChild(this._container),this._container=null)},sr.prototype.gx=function(t){this._container||(this._container=document.createElement("div"),this._container.style.zIndex=this.Qh+"",this._container.className="amap-layer amap-e",this._container.appendChild(t),this.map.do.appendChild(this._container),this.eP=!0)},sr);function sr(t,i){var n=nr.call(this,i)||this;return n.CLASS_NAME="AMap.CustomLayer",n.eP=!1,n.UF=!1,n.render=i.render||function(){},n.canvas=t,n.Qh=i.zIndex||11,n.tl=void 0===i.opacity?1:i.opacity,n.il=void 0===i.visible||i.visible,n.UF=void 0!==i.alwaysRender&&i.alwaysRender,n.xt=i.zooms||Y.zoomRange,n.canvas.style.opacity=""+n.tl,n.canvas.style.display=n.il?"block":"none",n.map&&n.gx(n.canvas),n}var er,rr=(er=Mt,Y.Ei(hr,er),hr);function hr(t,i){return(i=er.call(this,t,i)||this).onCreated(),i}var or,ar={zIndex:120,opacity:1,zooms:Y.zoomRange,cursor:"pointer",alwaysRender:!0},ur=(or=Y.Event,Y.Ei(fr,or),fr.prototype.setMap=function(t){t?(this._map=t).add(this.a$):this._map&&(this.clear(),this._map.remove(this.a$))},fr.prototype.getMap=function(){return this._map||null},fr.prototype.getData=function(){return this.VL},fr.prototype.setData=function(t){var i=this;t&&(this.VL=t,this.XD(),AMap.Util.requestAnimFrame(function(){i.emit("complete")}))},fr.prototype.getStyle=function(){return 1===this.Ze.length?this.Ze[0]:this.Ze},fr.prototype.setStyle=function(t){if(t){Array.isArray(t)||(t=[t]);var i=this.Ze,n=[];if(i&&i.length)for(var s=0;s<t.length;s++){var e=t[s],r=i[s]||i[0];n.push(AMap.extend({},r,e))}else n=t;this.Ze=n,this.XD()}},fr.prototype.getOpacity=function(){return this._opts.opacity},fr.prototype.setOpacity=function(t){this._opts.opacity=t,this.a$&&this.a$.setOpacity(t)},fr.prototype.getzIndex=function(){return this._opts.zIndex},fr.prototype.setzIndex=function(t){this._opts.zIndex=t,this.a$&&this.a$.setzIndex(t)},fr.prototype.getZooms=function(){return this._opts.zooms||[2,30]},fr.prototype.setZooms=function(t){this._opts.zooms=t,this.a$&&this.a$.setZooms(t)},fr.prototype.getCursor=function(){return this._opts.cursor||"default"},fr.prototype.show=function(){this.a$.show()},fr.prototype.hide=function(){this.a$.hide()},fr.prototype.clear=function(){this.a$.clear(),this.VL=[]},fr.prototype.XD=function(){var t=this.VL,i=this.Ze,n=[],s=this.getCursor();if(t&&i){for(var e=0,r=t;e<r.length;e++){var h,o,a,u=r[e],f=u.lnglat,c=u.style,l=void 0===c?0:c;f&&(h=(o=i[l]||i[0]).url,c=void 0===(a=o.anchor)?new AMap.Pixel(0,0):a,a=o.size,o.rotation,o=void 0===(o=o.zIndex)?l:o,a=a.width?a.toArray():a,c=c.x?c.toArray():c,(c=new AMap.LabelMarker({position:f,zIndex:o,cursor:s,icon:{image:h,size:a,anchor:c}})).qD=u,this.Rm(c),n.push(c))}this.jT=n,this.a$.clear(),this.a$.add(n)}},fr.prototype.Rm=function(t){var r=this;t.on(["click","dblclick","mouseover","mousemove","mouseout","mouseup","mousedown","touchstart","touchend"],function(t){var i,n=t.type,s=r._map,e=r.getCursor();"default"!==e&&s&&(i=s.getDefaultCursor(),"mouseover"===n?s.setCursor(e):"mouseout"===n&&s.setCursor(i)),r.QD(t)})},fr.prototype.QD=function(t){var i=t.type,t=this.KD(t);this.emit(i,t)},fr.prototype.KD=function(t){var i=t.target;return t.target=this,{target:t.target,type:t.type,data:i.qD||{}}},fr);function fr(t,i){var n=or.call(this)||this;n.CLASS_NAME="AMap.MassMarks",n._opts=AMap.extend({},ar,i);var e=(s=n._opts).zIndex,r=s.opacity,i=s.zooms,s=s.style;return n.a$=new AMap.LabelsLayer({zIndex:e,opacity:r,zooms:i,collision:!1,allowCollision:!1,VT:!0}),n.setData(t),n.setStyle(s),n.XD(),n}var cr,lr="AMap.Text",dr="amap-overlay-text-container",vr=(cr=ce,Y.Ei(pr,cr),pr.prototype.getText=function(){return this._opts.text},pr.prototype.setText=function(t){t=this.wx(t),this.setContent(t)},pr.prototype.setStyle=function(t){t&&(this._x=t,this._size=[0,0],this.updateOverlay())},pr.prototype.updateOverlay=function(t){void 0===t&&(t={}),this.dom&&!Y.isEmpty(this._x)&&this.kx(this._x),cr.prototype.updateOverlay.call(this,t)},pr.prototype.wx=function(t){var i=document.createElement("div");return w.addClass(i,dr),i.innerHTML=t||"",i},pr.prototype.kx=function(t){void 0===t&&(t={});var i=this.dom.querySelector("."+dr);if(i)for(var n in t)t.hasOwnProperty(n)&&(i.style[n]=t[n])},pr);function pr(t){var i=cr.call(this,t=void 0===t?{}:t)||this;return i.className=lr,i.type=lr,i._x={},i._size=[0,0],t.style&&(i._x=t.style),t.text&&i.setText(t.text),i}var mr,yr={zooms:Y.zoomRange,opacity:1,rank:1,bubble:!1,visible:!0,zIndex:1,cursor:"pointer",noSelect:!1,icon:{clipOrigin:[0,0],anchor:[0,0],retina:!0},innerOverlay:!1,text:{content:"",direction:"right",offset:[0,0],zooms:Y.zoomRange,style:{fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",fillColor:"#000",strokeWidth:0,padding:"3",fold:!1}}},br={uy:"AMap.LabelMarker",gy:Math.pow(2,31)},gr=(mr=Et,Y.Ei(kr,mr),kr.prototype.nY=function(t){var i,n=Y.yn(t);for(i in yr)yr.hasOwnProperty(i)&&void 0===n[i]&&(n[i]=Y.clone(yr[i]));return n},kr.prototype.getName=function(){return this._opts.name},kr.prototype.setName=function(t){this._opts.name=t},kr.prototype.getBounds=function(){var t=this._position;return new lt(t,t)},kr.prototype.getPosition=function(){return new Y.LngLat(this._position[0],this._position[1])},kr.prototype.setPosition=function(t){t&&("string"==typeof t?t=Y.map(t.split(","),function(t){return parseFloat(t)}):Y.Bs(t)&&(t=t.toJSON()),this._position=t,this.to())},kr.prototype.getZooms=function(){return this._opts.zooms},kr.prototype.setZooms=function(t){void 0===t&&(t=Y.zoomRange),this._opts.zooms=t,this.to()},kr.prototype.getOpacity=function(){return this._opts.opacity},kr.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.to())},kr.prototype.getzIndex=function(){return this._opts.zIndex},kr.prototype.setzIndex=function(t){this._opts.zIndex=t,this.to()},kr.prototype.getRank=function(){return this._opts.rank},kr.prototype.setRank=function(t){this._opts.rank=t,this.to()},kr.prototype.getText=function(){return this._originOpts.text&&this._opts.text||null},kr.prototype.setText=function(t){t&&(Y.assign(this._opts.text,t),this.to())},kr.prototype.getIcon=function(){return this._originOpts.icon&&this._opts.icon||null},kr.prototype.setIcon=function(t){t&&(Y.assign(this._opts.icon,t),this.to())},kr.prototype.getOptions=function(){return this._opts},kr.prototype.getDraggable=function(){return!1},kr.prototype.getExtData=function(){return this._opts.extData||null},kr.prototype.setExtData=function(t){this._opts.extData=t},kr.prototype.setTop=function(t){void 0===t&&(t=!0),this._parent&&this._parent.setTop(this,t),t?(this.vL=this._opts.zIndex||1,this.setzIndex(br.gy)):(t=this.vL||this._opts.zIndex||1,this.setzIndex(t))},kr.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},kr.prototype.getCursor=function(){return this._opts.cursor||"default"},kr.prototype.getVisible=function(){return this._opts.visible||!0},kr.prototype.getCollision=function(){var t,i=this.getVisible(),n=!1;return this._parent&&i&&(t=this.hS,n=this._parent.IL(t)),i&&n},kr.prototype.show=function(){this._opts.visible=!0,this.to()},kr.prototype.hide=function(){this._opts.visible=!1,this.to()},kr.prototype.emit=function(t,i){var n=this._opts||{},s=n.icon,e=n.text,r=e&&e.content,h=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(h)),e={data:{name:r,txt:r,position:this._position,extData:{},rank:n.rank,zooms:n.zooms},opts:{visible:n.visible,opacity:n.opacity,zooms:n.zooms,zIndex:n.zIndex,icon:s,text:e}},i.data=e,mr.prototype.emit.call(this,t,i),this},kr.prototype.remove=function(){this._parent&&this._parent.remove(this)},kr.prototype.to=function(){this._parent&&this._parent.to()},kr.prototype.Cs=function(t){(this._parent=t)&&t.map?this._map=t.map:this._map=null},kr);function kr(t){var i=mr.call(this)||this;return i.type=br.uy,i.className=br.uy,i.hS=Y.Util.stamp(i),i._originOpts=t,i._opts=i.nY(t),t.position&&i.setPosition(t.position),i}var Mr,wr=(Mr=Y.Event,Y.Ei(xr,Mr),xr.prototype.addTo=function(t){this.map=t,this.map.controls.push(this),t.getControlContainer().appendChild(this._container),t.on("beforeDestroy",this.remove.bind(this))},xr.prototype.removeFrom=function(t){t?(t.off("beforeDestroy",this.remove.bind(this)),t.getControlContainer().removeChild(this._container),delete this.map):this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},xr.prototype.remove=function(){this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},xr.prototype.show=function(){this._container.style.display="block",this.emit("show"),this.il=!0},xr.prototype.hide=function(){this._container.style.display="none",this.emit("hide"),this.il=!1},xr.prototype.initContainer=function(){this._className?(this._container=w.create("div",null,"amap-control amap-"+this._className),void 0===this._config.visible||this._config.visible||(this._container.style.display="none")):this._container=w.create("div",null,"amap-control"),this.Pb()},xr.prototype.Pb=function(){var t=0,i=0,n=0,s=0;switch(this._config.offset&&0<this._config.offset.length&&(t=this._config.offset[0]+t,i=this._config.offset[1]+i,n=this._config.offset[0]+n,s=this._config.offset[1]+s),t+="px",i+="px",n+="px",s+="px",this._config.position){case"LT":this._container.style.top=i,this._container.style.left=t,this._container.style.bottom="",this._container.style.right="";break;case"RT":this._container.style.top=i,this._container.style.right=n,this._container.style.bottom="",this._container.style.left="";break;case"LB":this._container.style.bottom=s,this._container.style.left=t,this._container.style.top="",this._container.style.right="";break;case"RB":this._container.style.bottom=s,this._container.style.right=n,this._container.style.top="",this._container.style.left="";break;default:this._container.style.top=this._config.position.top||"",this._container.style.left=this._config.position.left||"",this._container.style.right=this._config.position.right||"",this._container.style.bottom=this._config.position.bottom||""}},xr);function xr(t){var i=Mr.call(this)||this;return i.il=!0,i._config=t,i.il=void 0===t.visible||t.visible,i}var Ar,Cr={ua:(zr=window.navigator).userAgent,mobile:Y.Support.$e,plat:Y.Support.plat,mac:Y.Support.mac,windows:Y.Support.windows,ios:Y.Support.ios,iPad:Y.Support.iPad,iPhone:Y.Support.iPhone,android:Y.Support.android,android23:Y.Support.android23,chrome:Y.Support.chrome,firefox:Y.Support.firefox,safari:Y.Support.safari,wechat:Y.Support.wechat,uc:Y.Support.SL,qq:Y.Support.qq,ie:Y.Support.ie,ie6:Y.Support.ie6,ie7:Y.Support.ie7,ie8:Y.Support.ielt9&&!Y.Support.ie7&&!Y.Support.ie6,ie9:Y.Support.ie9,ie10:Y.Support.ie10,ie11:Y.Support.ie11,edge:Y.Support.edge,ielt9:Y.Support.ielt9,baidu:Y.Support.baidu,isLocalStorage:Y.Support.RL,isGeolocation:!!zr.geolocation,mobileWebkit:Y.Support.mobileWebkit,mobileWebkit3d:Y.Support.mobileWebkit3d,mobileOpera:!!Y.Support.mobileOpera,retina:Y.Support.Ue,touch:!!Y.Support.touch,msPointer:!!Y.Support.msPointer,pointer:!!Y.Support.pointer,baseRender:Y.Support.baseRender,wasm:Y.Support.wasm,webkit:Y.Support.webkit,ie3d:Y.Support.ie3d,webkit3d:Y.Support.webkit3d,gecko3d:Y.Support.gecko3d,opera3d:Y.Support.opera3d,any3d:Y.Support.any3d,isCanvas:Y.Support.isCanvas,isSvg:Y.Support.isSvg,isVML:Y.Support.ie,isWorker:!!window.Worker,isWebsocket:!!window.WebSocket,isWebGL:Y.Support.isWebGL,checkWebGL:function(){return Y.Support.isWebGL=Y.Support.sY(),Y.Support.isWebGL}},bt=(Ar=Wt,Y.Ei(Sr,Ar),Sr.prototype.getState=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this.il,zIndex:this.Qh,opacity:this.tl,wallColor:[],roofColor:[],layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},Sr.prototype.getLayerConfig=function(){return Ar.prototype.getLayerConfig.call(this)},Sr.prototype.getSourceConfig=function(){return{id:this._id,type:"building",tileUrl:AMap.getConfig().protocol+(Y.Support.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:Y.zoomRange}},Sr.prototype.co=function(){return this._id},Sr.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Sr);function Sr(){var t=Ar.call(this)||this;return t.CLASS_NAME="AMap.Buildings",t.Q_=1,t._id="building",t}var Lr,Tr={zooms:[14.8,Y.zoomRange[1]],opacity:1,heightFactor:1,visible:!0,zIndex:11,wallColor:[.94,.94,.94,.9],roofColor:[.89,.89,.86,.9],u$:!1},Ir=(Lr=bt,Y.Ei(Dr,Lr),Dr.prototype.setStyle=function(t){this.fL=t,this.uL()},Dr.prototype.getState=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this.il,zIndex:this.Qh,opacity:this.tl,wallColor:this.sz,roofColor:this.rz,vS:this.fL,layer:this,u$:this.cL,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},Dr.prototype.uL=function(){this.map&&(this.getSource().reload(),this.map.setNeedUpdate(!0))},Dr);function Dr(t){void 0===t&&(t=Tr);var i=Lr.call(this)||this;return i.cL=!1,i.xt=(void 0===t.zooms?Tr:t).zooms,i.xt[0]=Math.max(i.xt[0],14.8),i.tl=(void 0===t.opacity?Tr:t).opacity,i.Q_=(void 0===t.heightFactor?Tr:t).heightFactor,i.il=(void 0===t.visible?Tr:t).visible,i.Qh=(void 0===t.zIndex?Tr:t).zIndex,i.sz=void 0!==t.wallColor&&Y.Util.color2RgbaArray(t.wallColor),i.rz=void 0!==t.roofColor&&Y.Util.color2RgbaArray(t.roofColor),i.AF=void 0===t.depthTest||Boolean(t.depthTest),i.cL=t.u$,i.cL&&(i._id="nebula"),i.onCreated(),i}var Or=(Er.add=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},Er);function Er(){}function Rr(t){return Y.Support.isWebGL?new Ai(t):new Xi(Y.Ln({id:"_defaultLayer_"+Y.Util.uuid(),tileUrl:AMap.getConfig().y_},t))}var Pr,jr="gl_custom",jt=(Pr=Wt,Y.Ei(Br,Pr),Br.prototype.getState=function(){return{visible:this.il,opacity:this.tl,zIndex:this.Qh,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},Br.prototype.getSourceConfig=function(){return{id:jr,type:jr,zooms:this.xt}},Br.prototype.co=function(){return jr},Br.prototype.setMap=function(t){Pr.prototype.setMap.call(this,t)},Br.prototype.setzIndex=function(t){this.Qh=t},Br);function Br(t){var i=Pr.call(this,t)||this;return i.CLASS_NAME="AMap.GLCustomLayer",i.init=t.init||function(t){},i.render=t.render||function(t,i,n){},i.Qh=t.zIndex||120,i.tl=void 0===t.opacity?1:t.opacity,i.il=void 0===t.visible||t.visible,i.xt=t.zooms||Y.zoomRange,i}var Fr,Wr=(Fr=jt,Y.Ei(Gr,Fr),Gr);function Gr(t){return(t=Fr.call(this,t)||this).onCreated(),t}var Nr,_r=(Nr=Y.Event,Y.Ei(Ur,Nr),Ur.prototype.setMap=function(t){var i=this;return t&&t!==this._map&&(this._map=t,Y.forEach(this.zv,function(t){i._map&&!i._map.hasLayer(t)&&t.setMap(i._map)})),this},Ur.prototype.hasLayer=function(i){return!!Y.find(this.zv,function(t){return t===i})},Ur.prototype.setOptions=function(e){var r=this.zv;return Y.vx(e,function(t,i){for(var n=0;n<r.length;n++){var s=r[n];if("AMap.Layer"===s.el)switch(i){case"visible":t?s.show():s.hide();break;case"opacity":s.setOpacity&&s.setOpacity(t);break;case"zIndex":s.setzIndex&&s.setzIndex(t);break;case"zooms":s.setZooms&&s.setZooms(t)}else s.setOptions&&s.setOptions(e)}}),this},Ur.prototype.eachLayer=function(t){if(Y.isFunction(t))for(var i=0;i<this.zv.length;i++)t(this.zv[i],i,this.zv)},Ur.prototype.addLayer=function(t){this.hasLayer(t)||(this.zv.push(t),t.setMap(this._map))},Ur.prototype.addLayers=function(t){if(0<t.length)for(var i=0;i<t.length;i++){var n=t[i];this.addLayer(n)}},Ur.prototype.removeLayer=function(t){for(var i=0;i<this.zv.length;i++)t===this.zv[i]&&this.zv.splice(i,1);return t.setMap(null),t},Ur.prototype.removeLayers=function(t){if(t&&0<t.length)for(var i=0;i<t.length;i++){var n=t[i];this.removeLayer(n)}},Ur.prototype.getLayers=function(){return this.zv},Ur.prototype.clearLayers=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];this.removeLayer(i)}},Ur.prototype.hide=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].hide();return this},Ur.prototype.show=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].show();return this},Ur.prototype.on=function(t,i){for(var n=0;n<this.zv.length;n++){var s=this.zv[n];s.on instanceof Function&&i instanceof Function&&s.on(t,i)}return this},Ur.prototype.reload=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];i.reload&&i.reload()}return this},Ur);function Ur(t){var i=Nr.call(this)||this;if(i.zv=[],i._map=null,t&&0<t.length)for(var n=0;n<t.length;n++){var s=t[n];i.addLayer(s)}return i}function Yr(){console.log("jsapi2.0 AMap.Heatmap is renamed, please use AMap.HeatMap"),console.log("jsapi2.0  AMap.Heatmap 已重命名, 请使用 AMap.HeatMap")}var Zr,It=(Zr=Wt,Y.Ei(Xr,Zr),Xr.prototype.getState=function(){return{zooms:[17,23],visible:this.il,zIndex:2,opacity:this.tl,layer:this,depthTest:this.AF,ce:this.IF,tileUrl:this.Be}},Xr.prototype.getSourceConfig=function(){return{id:this._id,tileUrl:this.Be||"",type:"mapbox",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs,projection:"EPS3857"}},Xr.prototype.co=function(){return this._id},Xr);function Xr(t){var i=Zr.call(this)||this;return i.CLASS_NAME="AMap.MapboxLayer",i._id="mapbox",i.Be=AMap.getConfig().protocol+"://fmap0{1234}.amap.com/v3/vectormap?version=v8&key="+AMap.getConfig().key+"&s=rsv3&x=[x]&y=[y]&zoom=[z]",AMap.getConfig().jscode?i.Be+="&jscode="+AMap.getConfig().jscode:AMap.getConfig().gaodeserver&&(i.Be=AMap.getConfig().gaodeserver+"/v3/vectormap?version=v8&key="+AMap.getConfig().key+"&s=rsv3&x=[x]&y=[y]&zoom=[z]"),i.Xa=t.tileSize||256,i.Qs=[2,22],i.Qh=2,i.xt=[9.8,Y.zoomRange[1]],i}var Jr,Hr=(Jr=It,Y.Ei(Vr,Jr),Vr);function Vr(t){return Jr.call(this,t)||this}var qr=(Object.defineProperty(Qr.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),Qr.prototype.addOverlay=function(t){this._overlays.indexOf(t)<0&&(this._overlays.push(t),this._map&&this._map.add(t))},Qr.prototype.addOverlays=function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];this.addOverlay(s)}},Qr.prototype.getOverlays=function(){return this._overlays},Qr.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},Qr.prototype.removeOverlay=function(t){this.hasOverlay(t)&&(Y.Util.deleteItemFromArray(this._overlays,t),this._map&&this._map.remove(t))},Qr.prototype.removeOverlays=function(t){for(var i=0,n=t;i<n.length;i++){var s=n[i];this.removeOverlay(s)}},Qr.prototype.clearOverlays=function(){this._map&&this._map.remove(this._overlays),this._overlays=[]},Qr.prototype.eachOverlay=function(t){Y.forEach(this._overlays,t)},Qr.prototype.setMap=function(t){this._map=t},Qr.prototype.show=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].show()},Qr.prototype.hide=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].hide()},Qr.prototype.setOptions=function(t){for(var i=0,n=this._overlays;i<n.length;i++)n[i].setOptions(t)},Qr.prototype.on=function(i,n,s,e){this.eachOverlay(function(t){t.on(i,n,s,e)})},Qr.prototype.off=function(i,n,s,t){this.eachOverlay(function(t){t.off(i,n,s)})},Qr);function Qr(t){void 0===t&&(t=[]),this.className="Overlay.OverlayGroup",this._overlays=[],this.addOverlays(t)}var Kr,St=(Kr=Et,Y.Ei($r,Kr),$r.prototype.Cy=function(t){this.P$=!0,Y.Support.$e||t.originEvent.preventDefault(),this.Ay(t)},$r.prototype.Ly=function(t){this.P$=!1,Y.Support.$e||t.originEvent.preventDefault()},$r.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},$r.prototype.Mx=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},$r.prototype.Rx=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},$r);function $r(){var t=null!==Kr&&Kr.apply(this,arguments)||this;return t.P$=!1,t._dragObjects={sy:{x:0,y:0},hy:[0,0],ly:{lng:0,lat:0}},t}var th,F=(th=St,Y.Ei(ih,th),Object.defineProperty(ih.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),ih.prototype.Zx=function(t){this._map=t,this._opts&&(this._opts.map=t)},ih.prototype.setMap=function(t){this._map!==t&&(this._map&&this._map.remove(this),t&&t.add(this))},ih.prototype.getMap=function(){return this._map||null},ih.prototype.destroy=function(){this.Rx(),this._beforeRemoveMap&&this._beforeRemoveMap(),this._map=null,this.F$&&delete this.F$,this._bindEvents&&delete this._bindEvents,this._afterSetMap&&delete this._afterSetMap},ih.prototype.remove=function(){this.setMap(null)},ih.prototype.hide=function(){this.visible&&(this.visible=!1,this._map&&this._map.setNeedUpdate(!0),this.emit("hide",{target:this}))},ih.prototype.show=function(){this.visible||(this.visible=!0,this._map&&this._map.setNeedUpdate(!0),this.emit("show",{target:this}))},ih.prototype.setDraggable=function(t){return this._opts.draggable=t},ih.prototype.getOptions=function(){return Y.extend({},this._opts)},ih.prototype.to=function(){this._map&&this._map.setNeedUpdate(!0)},ih.prototype.getExtData=function(){var t=this._opts;if(t&&t.extData)return t.extData},ih.prototype.setExtData=function(t){this.setOptions({extData:t})},ih.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map?this._map.getDefaultCursor():t},ih.prototype.emit=function(t,i){var n=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(n)),("dragstart"!==t&&"dragging"!==t&&"dragend"!==t||this.getDraggable())&&th.prototype.emit.call(this,t,i),this},ih.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},ih.prototype.BB=function(){this.b_([0,0])},ih.prototype.getDeltaCoord=function(){return this.zx},ih.prototype.b_=function(t){this.zx=t},ih.prototype.rY=function(t){var i=this.Sx;return Y.Util.hp(i,t)},ih.prototype._beforeRemoveMap=function(){var t;this.F$&&(null!==(t=this.F$.parentNode)&&void 0!==t&&t.removeChild(this.F$),delete this.F$)},ih.prototype.nY=function(t){var i,n=this._opts;for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},ih.prototype._dragging=function(t){var i,n,s,e,r;this.getDraggable()&&(s=this._dragObjects.hy,i=t.pos[0]-s[0],n=t.pos[1]-s[1],e=this._dragObjects.sy,this.F$&&"d"===this._map.baseRender?(s=t.pixel.x-e.x,e=t.pixel.y-e.y,r=this.B$,this.B$=[s+r[0],e+r[1]],r=" translate("+this.B$[0]+"px, "+this.B$[1]+"px)",this.F$.style.transform=r,this.F$.style.webkitTransform=r,this.F$.style.MozTransform=r,this.F$.style.msTransform=r):this.to(),r=this.getDeltaCoord(),this.b_([i+r[0],n+r[1]]),this.Ay(t))},ih.prototype.Ly=function(t){th.prototype.Ly.call(this,t),this.Ay(t),this.F$&&"d"===this._map.baseRender?this.moveWithPixel(this.B$[0],-1*this.B$[1]):this.moveWithPos(this.zx[0],this.zx[1]),this.BB(),this.B$=[0,0],this.F$&&(this.F$.style.transform="",this.F$.style.webkitTransform="",this.F$.style.MozTransform="",this.F$.style.msTransform=""),this.to()},ih.prototype.moveWithPixel=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("please implement movePixel")},ih.prototype.moveWithPos=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("please implement moveWithPos")},ih.prototype._checkMap=function(){this._opts&&this._opts.map!==this._map&&this.setMap(this._opts.map)},ih.prototype.cE=function(){this._needUpdate=!0,this._map&&(this._map.fE&&!this._map.isDOMMode()||this.ZB())},ih);function ih(){var t=th.call(this)||this;return t._needUpdate=!1,t.className="Overlay",t.W0=!1,t.visible=!0,t.P$=!1,t.zx=[0,0],t.B$=[0,0],t.Ax=[0,0],t.hS=Y.Util.stamp(t),t.Mx(),t}function nh(t){if(t=Y.jsonLngLatData(t),Y.ys(t))t=[[t]];else if(Y.Ox(t))t=[t];else if(!Y.tL(t))return;return t}function sh(t,i,n){return Y.hL.ss(t,i,n)}function eh(t,i){if(!sh(t,i[0]))return!1;for(var n=1,s=i.length;n<s;n++)if(sh(t,i[n],!0))return!1;return!0}function rh(t,i){for(var n=0,s=i.length;n<s;n++)if(eh(t,i[n]))return!0;return!1}function hh(t,i,n){for(var s=[],e=0,r=t;e<r.length;e++){var h=r[e];s.push(n.moveWithPos(h,i))}return s}function oh(t,i,n){for(var s=[],e=0,r=t;e<r.length;e++){var h=hh(r[e],i,n);s.push(h)}return s}function ah(t,i,n,s){for(var e=[],r=0,h=t;r<h.length;r++){var o=h[r];e.push(s.moveWithPixel(o,i,n))}return e}function uh(t,i,n,s){for(var e=[],r=0,h=t;r<h.length;r++){var o=ah(h[r],i,n,s);e.push(o)}return e}function fh(t){return Y.GeometryUtil.ringArea(t)}function ch(t){for(var i=fh(t[0]),n=1;n<t.length;n++)i-=fh(t[n]);return i}function lh(t){for(var i=0,n=0,s=t;n<s.length;n++)i+=ch(s[n]);return i}function dh(t){return t=Y.jsonLngLatData(t),Y.ys(t)?[t]:t}function vh(t){return Y.GeometryUtil.distanceOfLine(t)}function ph(t){if(t.length<2)return t;var i=[];i.push(t[0]);for(var n=1,s=t.length;n<s;n++){var e=t[n-1],r=t[n];Array.prototype.push.apply(i,function(t,i){var n=Math.round(Math.abs(t.KL-i.KL));if(!n||Math.abs(t.KL-i.KL)<.001)return[];for(var e,r,h,o,a=[],u=Math.PI,f=Math.asin,c=Math.sqrt,l=Math.sin,d=Math.pow,v=Math.cos,p=Math.atan2,m=t.kT*mh,y=t.KL*mh,b=i.kT*mh,g=i.KL*mh,k=2*f(c(d(l((m-b)/2),2)+v(m)*v(b)*d(l((y-g)/2),2))),s=1;s<n;s+=1)e=l((1-(r=1/n*s))*k)/l(k),h=l(r*k)/l(k),o=e*v(m)*v(y)+h*v(b)*v(g),r=e*v(m)*l(y)+h*v(b)*l(g),h=p(e*l(m)+h*l(b),c(d(o,2)+d(r,2))),o=p(r,o),y<g?(o<y&&(o+=2*u),g<o&&(o-=2*u)):(y<o&&(o-=2*u),o<g&&(o+=2*u)),a.push([o*yh,h*yh]);return a}(Y.LngLat.from(e),Y.LngLat.from(r))),i.push(r)}return i}var mh=Math.PI/180,yh=180/Math.PI,bh=(gh.prototype.init=function(t,i){var n,s,e=t.length;this.G0=new Array(e);for(var r=0;r<e;r+=1)if(n=t[r],s=new zh(n),this.G0[r]=s,!i)if(0===r){if(0===n.length)return;s.isClockwise(n)||n.reverse()}else 0!==n.length&&s.isClockwise(n)&&n.reverse()},gh.prototype.getBounds=function(){if(0===this.G0.length)return ct.createEmpty();if(!this.N0){for(var t=this.G0[0].getBounds(),i=1;i<this.G0.length;i+=1){var n=this.G0[i].getBounds();ct.rs(t,n)||ct.extend(t,n)}this.N0=t}return this.N0},gh.prototype._0=function(){return this.G0},gh.prototype.U0=function(){for(var t=[],i=0;i<this.G0.length;i+=1)t[i]=this.G0[i].xh},gh.prototype.getType=function(){return kh.Y0.POLYGON},gh.prototype.ss=function(t){for(var i,n=this.G0,s=0,e=n.length;s<e&&(i=n[s].ss(t),i=0<s?!i:i);s+=1);return i},gh.prototype.Z0=function(t){for(var i=this.G0,n=[],s=0,e=i.length;s<e;s+=1)Y.hL.isClockwise(i[s].xh)?n.length&&n[n.length-1].push(s):n.push([s]);for(s=0,e=n.length;s<e;s+=1){for(var a=!1,r=0,h=n[s].length;r<h;r+=1){var o=n[s][r],a=zh.prototype.ss.call(i[o],t);if(!(a=0<r?!a:a))break}if(a)return!0}},gh);function gh(){}(Ht=Ro=Ro||{}).POINT="point",Ht.LINESTRING="linestring",Ht.LINEARRING="linearring",Ht.POLYGON="polygon",Ht.MULTIPOINT="multipoint",Ht.MULTILINESTRING="multilinestring",Ht.MULTIPOLYGON="multipolygon",Ht.GEOMETRYCOLLECTION="geometrycollection";var kh=(Mh.prototype.X0=function(){var t=this.getBounds();return t.center||(t.center=ct.getCenter(t)),t.center},Mh.prototype.clone=function(){var t=new this.constructor;return t.init(this.J0()),t},Mh.prototype.J0=function(){return this.xh},Mh.prototype.H0=function(t){if(this.V0=this.getBounds(),this.N0=null,this instanceof bh){var i=t.length;this.G0=new Array(i);for(var n=void 0,s=void 0,e=0;e<i;e+=1)if(n=t[e],s=new zh(n),this.G0[e]=s,0===e){if(0===n.length)return;s.isClockwise(n)||n.reverse()}else 0!==n.length&&s.isClockwise(n)&&n.reverse()}else this.xh=t},Mh.Y0=Ro,Mh);function Mh(t){var i=this;this.setCoords=function(t){i.H0(t)},this.init(t)}var wh,ni=(wh=kh,Y.Ei(xh,wh),xh.prototype.init=function(t){this.xh=t},xh.prototype.getBounds=function(){if(!this.N0){for(var t=ct.createEmpty(),i=0,n=this.xh.length;i<n;i+=1)ct.extendCoordinate(t,this.xh[i]);this.N0=t}return this.N0},xh.prototype.J0=function(){return this.xh},xh.prototype.getType=function(){return kh.Y0.LINESTRING},xh.prototype.getCount=function(){return this.J0().length},xh.prototype.q0=function(t){return Y.hL.lr(t,this.J0())},xh);function xh(){return null!==wh&&wh.apply(this,arguments)||this}var Ah,zh=(Ah=ni,Y.Ei(Ch,Ah),Ch.prototype.getType=function(){return kh.Y0.LINEARRING},Ch.prototype.ss=function(t){return Y.hL.ss(t,this.xh)},Ch);function Ch(){var t=null!==Ah&&Ah.apply(this,arguments)||this;return t.isClockwise=Y.hL.isClockwise,t}var Sh,Mt=(Sh=F,Y.Ei(Lh,Sh),Lh.prototype.Tx=function(t){t&&(t=Y.Bs(t)?Y.ProjectionManager.getProjection("EPSG:3857").project(t.KL,t.kT):Y.ProjectionManager.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=Y.lcs.getLocalByCoord(t))},Lh.prototype.toGeometry=function(){if(this.$x){var t=this.$x.slice(0);return Y.ys(t)?{type:"Polygon",coordinates:[t]}:Y.Ox(t)?{type:"Polygon",coordinates:t}:{type:"MultiPolygon",coordinates:[t]}}},Lh.prototype.toString=function(){var t=this._opts.path;return Y.ys(t)?""+t.join(";"):Y.Ox(t)?""+Y.map(t,function(t){return""+t.join(";")}).join("|"):Y.tL(t)?Y.map(t,function(t){return Y.map(t,function(t){return""+t.join(";")}).join("|")}).join("^"):""},Lh.prototype.reset=function(){this.Dx&&this.Dx.reset(),this.Px&&this.Px.reset(),this.XB&&this.XB.reset(),this.qB&&this.qB.reset(),this.Q0&&this.Q0.reset(),this.K0&&this.K0.reset()},Lh.prototype.destroy=function(){this.Dx&&(this.Dx.destroy(),delete this.Dx),this.Px&&(this.Px.destroy(),delete this.Px),this.XB&&this.XB.destroy&&(this.XB.destroy(),delete this.XB),this.qB&&this.qB.destroy&&(this.qB.destroy(),delete this.qB),this.Q0&&(this.Q0.destroy(),delete this.Q0),this.Q0&&this.Px.destroy&&(this.Q0.destroy(),delete this.Q0),this.q$&&delete this.X$,this.$x&&(this.$x=[]),Sh.prototype.destroy.call(this)},Lh.prototype.$0=function(t,i,n){var s=0;if(i&&this._opts.extrusionHeight){for(var e=[],r=0;r<i.length;r++)e.push(i[r][0],i[r][1]);s=this.Q0.tz(e,this._opts.extrusionHeight,n)}return n={bz:"",length:1,mainkey:this.hS,maxzoom:26,minzoom:2,offset:0,subkey:1},s&&0<s&&this.K0.add(n.mainkey,n.subkey,s,n.minzoom,n.maxzoom,n.bz),this.Q0.upload(t),s},Lh.prototype.X$=function(t){for(var i=[],n=0,s=t;n<s.length;n++){for(var e=s[n],r=[],h=[],o=0,a=e[0];o<a.length;o++){var u=a[o],f=Y.ProjectionManager.getProjection("EPSG:3857").project(u[0],u[1]);h.push([f[0],f[1]])}h.length&&(h.push(h[0].slice()),r.push(h));for(var c=1,l=e.length;c<l;c++){var d=e[c],v=[];if(d&&d.length){for(var p=0,m=d;p<m.length;p++)u=m[p],f=Y.ProjectionManager.getProjection("EPSG:3857").project(u[0],u[1]),v.push([f[0],f[1]]);v.push(v[0].slice()),r.push(v)}}i.push(r)}this.q$=i},Lh.prototype.Q$=function(t,i){this.BB(),this.JL(),this.reset();var n=this.Dx,s=this.Px,e=this.XB,r=this.qB;this.Tx(t[0][0][0]);for(var h=0,o=t;h<o.length;h++){for(var a=o[h],u=this.Sx.center,f=[],c=[],l=[],d=[],v=[],p=0,m=a[0];p<m.length;p++){var y=m[p],b=Y.ProjectionManager.getProjection("EPSG:3857").project(y[0],y[1]);f.push(b[0]-u[0],b[1]-u[1]),c.push(y)}for(var g=1,k=a.length;g<k;g++){for(var M=[],w=[],x=0,A=a[g];x<A.length;x++)y=A[x],Y.Bs(y)?(M.push(y.pos[0]-u[0],y.pos[1]-u[1]),w.push(y.toJSON())):(b=Y.ProjectionManager.getProjection("EPSG:3857").project(y[0],y[1]),M.push(b[0]-u[0],b[1]-u[1]),w.push(y));l.push(M),d.push(w)}for(var z=[],g=0,k=f.length;g<k;g+=2)z.push(Y.xd(f[g],f[g+1]));Y.equals(z[0],z[z.length-1])||z.push(Y.Ex(z[0]));for(var C=f.length,g=0;g<l.length;g++)v.push(C/2),C+=l[g].length,Y.Util.Ig(f,l[g]);var S=n.Nx(f,v);if(i&&f&&0<this._opts.extrusionHeight){for(var L=z,T=[],g=0;g<l.length;g++)for(var I=l[g],D=0;D<I.length;D+=2)T.push([I[D],I[D+1]]);T&&0<T.length&&(new zh(T).isClockwise(T)||T.reverse()),new zh(z).isClockwise(z)&&z.reverse(),Y.Util.Ig(L,T),this.$0(i,L,v)}e.add(S);var O=s.Nx(z,{lineJoin:"miter"}).Iw;for(r.add(O),g=0;g<l.length;g++){for(var E=[],R=0,k=(M=l[g]).length;R<k;R+=2)E.push(Y.xd(M[R],M[R+1]));E.push(Y.xd(M[0],M[1])),O=s.Nx(E,{lineJoin:"miter"}).Iw,r.add(O)}}i&&(this.Dx.upload(i),this.Px.upload(i))},Lh.prototype.JL=function(){this.Dx||(this.Dx=new Y.K_),this.Px||(this.Px=new Y.J_),this.XB||(this.XB=new Y.oE),this.qB||(this.qB=new Y.oE),this.Q0||(this.Q0=new Y.iz),this.K0||(this.K0=new Y._w)},Lh);function Lh(){return null!==Sh&&Sh.apply(this,arguments)||this}var Th,Ih={map:void 0,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,extrusionHeight:0,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},Dh=(Th=Mt,Y.Ei(Oh,Th),Oh.prototype.getOptions=function(){return Y.extend({},this._opts)},Oh.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.path,i.path);this._opts=i,this._checkMap(),t&&this.setPath(this._opts.path),this.to()},Oh.prototype.init=function(t){this.reset(),t=t||this._opts,this._opts=this.nY(t),this.setPath(this._opts.path),this._map&&(0<this._opts.extrusionHeight&&(this.t2=this.i2.bind(this),this.n2=this.s2.bind(this),this.tv()),this._map.setNeedUpdate(!0))},Oh.prototype.destroy=function(){0<this._opts.extrusionHeight&&(this.e2(),this.t2=null,this.n2=null),this.W0&&delete this.W0,this._opts,Th.prototype.destroy.call(this)},Oh.prototype.getPath=function(){if(this._opts&&this._opts.path)return Y.parseLngLatData(Y.yn(this._opts.path))},Oh.prototype.setExtrusionHeight=function(t){this._opts&&(this._opts.extrusionHeight=t,this.reset(),this.Ix(this._opts.path)),this.to()},Oh.prototype.getExtrusionHeight=function(){return this._opts&&this._opts.extrusionHeight?this._opts.extrusionHeight:0},Oh.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.path))return;if(!(t=nh(t)))return;(t=lt.ms(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new lt(t,i)}},Oh.prototype.getArea=function(){if(this._opts&&this._opts.path){var t=Y.jsonLngLatData(this._opts.path);return Y.ys(t)?+Y.GeometryUtil.ringArea(t).toFixed(2):Y.Ox(t)?+ch(t).toFixed(2):+lh(t).toFixed(2)}return 0},Oh.prototype.contains=function(t,i){if(!this.jx())return!1;var n=this._opts.path,s=Y.parseLngLatData(t),e=null===(e=this._map)||void 0===e?void 0:e.lngLatToContainer(s);return!!e&&(0<this._opts.extrusionHeight&&(this._opts.bubble&&i&&i.D0&&"click"===i.D0&&(this.W0=!1),!this.W0)&&0<(e=this.queryPolyhedronFeature([e.x,e.y]))&&e===this.hS||!(this.ir&&!this.ir.contains(t))&&(Y.ys(n)?sh:Y.Ox(n)?eh:rh)([s.lng,s.lat],n))},Oh.prototype.setPath=function(t){t&&(this.reset(),this.Ix(t),this.to())},Oh.prototype.iE=function(t){if(!this.jx())return-1;if(this.ir&&!this.ir.contains(t))return-1;var i=this._opts.path,t=Y.parseLngLatData(t);return Y.ys(i)||Y.Ox(i)?0:function(t,i){for(var n=0,s=i.length;n<s;n++)if(eh(t,i[n]))return n;return-1}([t.lng,t.lat],i)},Oh.prototype.ZB=function(t){var i,n=this;this._map&&(this._needUpdate=!1,!this._opts.path||(i=nh(this._opts.path))&&(this._opts.async?this._map.gn.QB({data:i,type:"polygon"},function(t,i){t?console.log(t):(n.Dx=i.Dc,n.Px=i.$c,n.Sx=i.Sx,n.XB=i.Oc,n.qB=i.Uc)}):this.Q$(i,t)))},Oh.prototype.queryPolyhedronFeature=function(t){if(this._map&&this.h2()){for(var i,s=(n=this._map).getView().getStatus(),e={layers:n.getLayers(),uo:n.Mv,size:s.size,do:n.do,viewState:s,map:n},r=0,h=n.getLayers();r<h.length;r++){var o=h[r];"AMap.VectorLayer"===o.CLASS_NAME&&(i=o)}var a=i.getRender();if(a){var u=a.pu||0,s=n.getGL(),n=t[0]*u,t=s.drawingBufferHeight-t[1]*u,u=new Uint8Array(4);if(a.o2&&(e=a.pickRender(e,this),s.bindFramebuffer(s.FRAMEBUFFER,e),s.readPixels(n,t,1,1,s.RGBA,s.UNSIGNED_BYTE,u),s.bindFramebuffer(s.FRAMEBUFFER,null)),u=(a=a.a2)&&a.GV([u[0],u[1],u[2]]))return u}}},Oh.prototype.i2=function(){this.W0=!0},Oh.prototype.s2=function(){this.W0=!1},Oh.prototype.tv=function(){this._map&&(this._map.on("mousedown",this.t2),this._map.on("mouseup",this.n2))},Oh.prototype.e2=function(){this._map&&(this._map.off("mousedown",this.t2),this._map.off("mouseup",this.n2))},Oh.prototype._dragging=function(t){var i,n,s;this.getDraggable()&&(s=this._dragObjects.hy,i=t.pos[0]-s[0],n=t.pos[1]-s[1],this._dragObjects.sy,s=this.getDeltaCoord(),this.b_([i+s[0],n+s[1]]),this.Ay(t),this.F$&&"d"===this._map.baseRender?this.moveWithPixel(this.B$[0],-1*this.B$[1]):this.moveWithPos(this.zx[0],this.zx[1]),this.BB(),this.B$=[0,0],this.F$&&(this.F$.style.transform="",this.F$.style.webkitTransform=""),this.to())},Oh.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},Oh.prototype.moveWithPixel=function(t,i){var n,s,e,r;this._map&&(n=this._map,r=Y.ProjectionManager.getProjection(n.getView().au()),s=this._opts.path,Y.ys(s)?(e=ah(s,[t,i],n.getZoom(),r),this.setPath(e)):(r=(Y.Ox(s)?uh:function(t,i,n,s){for(var e=[],r=0,h=t;r<h.length;r++){var o=uh(h[r],i,n,s);e.push(o)}return e})(s,[t,i],n.getZoom(),r),this.setPath(r)))},Oh.prototype.moveWithPos=function(t,i){var n,s,e;this._map&&(s=this._map,e=Y.ProjectionManager.getProjection(s.getView().au()),n=this._opts.path.slice(0),Y.ys(n)?(s=hh(n,[t,i],e),this.setPath(s)):(e=(Y.Ox(n)?oh:function(t,i,n){for(var s=[],e=0,r=t;e<r.length;e++){var h=oh(r[e],i,n);s.push(h)}return s})(n,[t,i],e),this.setPath(e)))},Oh.prototype.h2=function(){if(this._opts.fillOpacity<=0)return!1;if(null!==(t=this._map)&&void 0!==t&&t.TL())return!1;var t=this._map.getZoom();return!(t<this._opts.zooms[0]||t>this._opts.zooms[1])},Oh);function Oh(t){void 0===t&&(t={});var n=Th.call(this)||this;n.Ix=function(t){n._opts.path=Y.jsonLngLatData(t);var i=nh(t);i&&(n.$x=Y.Pt(i[0][0],[i[0][0][0]]),n.ir=lt.ms(i),(t=n._map)&&("d"===t.baseRender?n.X$(i):n.cE()))};var i,s=t.path;return Y.iL(s)?(i=s[0],n.Tx(i)):Y.eL(s)?(i=s[0][0],n.Tx(i)):Y.yL(s)&&(i=s[0][0][0],n.Tx(i)),n.className="Overlay.Polygon",n._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,extrusionHeight:0,wallColor:"#00D3FC",roofColor:"#00B2D5",bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},n._opts=n.nY(t),n._checkMap(),n}var Eh,zr=(Eh=Mt,Y.Ei(Rh,Eh),Rh.prototype.getOptions=function(){return Y.extend({},this._opts)},Rh.prototype.getArea=function(){var t=this.aE;return t?+lh(t).toFixed(2):0},Rh);function Rh(){var n=null!==Eh&&Eh.apply(this,arguments)||this;return n.contains=function(t){if(!n.aE)return!1;if(n.ir&&!n.ir.contains(t))return!1;var i=n.aE,t=Y.parseLngLatData(t);return(Y.ys(i)?sh:Y.Ox(i)?eh:rh)([t.lng,t.lat],i)},n}var Ph,jh=(Ph=zr,Y.Ei(Bh,Ph),Bh.prototype.init=function(t){t=t||this._opts,this._opts=this.nY(t),this.setBounds(t.bounds)},Bh.prototype.setBounds=function(t){t&&(Y.xs(t)||(t=new lt(t)),this._opts.bounds=t,this.ir=t.clone(),this.cE(),this.to())},Bh.prototype.ZB=function(t){var i,n,s,e;this._map&&(this._needUpdate=!1,(i=this._opts.bounds)&&(n=this._map,(e=nh((s=(e=i).getSouthWest(),e=e.getNorthEast(),[new Y.LngLat(s.KL,s.kT,!0),new Y.LngLat(e.KL,s.kT,!0),new Y.LngLat(e.KL,e.kT,!0),new Y.LngLat(s.KL,e.kT,!0)])))&&(this.$x=Y.Pt(e[0][0],[e[0][0][0]]),this.ir=i.clone(),this.aE=e,"d"===n.baseRender?this.X$(e):this.Q$(e,t)),this.to()))},Bh.prototype.moveWithPixel=function(t,i){var n,s,e;this._map&&(e=this._map,s=(n=this._opts.bounds).southWest.toJSON(),n=n.northEast.toJSON(),s=this._map.getView().ru().moveWithPixel(s,[t,i],e.getZoom()),e=this._map.getView().ru().moveWithPixel(n,[t,i],e.getZoom()),e=new lt(s,e),this.setBounds(e))},Bh.prototype.moveWithPos=function(t,i){var n,s;this._map&&(s=(n=this._opts.bounds).southWest.toJSON(),n=n.northEast.toJSON(),s=this._map.getView().ru().moveWithPos(s,[t,i]),i=this._map.getView().ru().moveWithPos(n,[t,i]),i=new lt(s,i),this.setBounds(i))},Bh.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.bounds,i.bounds);this._opts=i,this._checkMap(),t&&this.setBounds(i.bounds),this.to()},Bh.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.bounds))return;this.ir=t.clone(),i=this.ir}if(i){if(this.P$){var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new lt(t,i)}return this.ir}},Bh.prototype.getCenter=function(){if(this._opts.bounds)return this._opts.bounds.getCenter()},Bh);function Bh(t){void 0===t&&(t={});var n=Ph.call(this)||this;return n.className="Overlay.Rectangle",n.contains=function(t){var i=n.getBounds();return!!i&&i.contains(t)},n._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},n._opts=n.nY(t),n._checkMap(),n}var Fh,Wh=(Fh=zr,Y.Ei(Gh,Fh),Gh.prototype.init=function(t){t=t||this._opts,this._opts=this.nY(t),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Gh.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Gh.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Gh.prototype.getCenter=function(){var t=Y.parseLngLatData(this._opts.center),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new Y.LngLat(t[0],t[1])},Gh.prototype.getRadius=function(){return this._opts.radius},Gh.prototype.setCenterAndRadius=function(t,i){this._opts.center=t,this._opts.radius=i,this.cE(),this.to()},Gh.prototype.ZB=function(t){var i,n,s;this._map&&(this._needUpdate=!1,i=this._opts.center,s=this._opts.radius,i&&s&&(i=Y.jsonLngLatData(i),n=this._map,(s=nh(function(t,i,n){var s=[],e=Y.parseLngLatData(t),r=Y.ProjectionManager.getProjection("EPSG:3857");if(e)for(var h=(t=r.project(e.KL,e.kT))[0],o=t[1],t=n?89:359,a=(n?4:1)*Math.PI/180,u=i[0],f=i[1],c=Math.cos(e.kT*Math.PI/180),l=0,d=t;l<=d;l++){var v=l*a,p=u*Math.cos(v)/c,v=f*Math.sin(v)/c,v=r.unproject(h+p,o+v);s.push(v)}return s}(i,s,Y.Support.$e)))&&(this.ir=lt.ms(s),this.aE=s,"d"===n.baseRender?this.X$(s):this.Q$(s,t)),this.BB(),this._map.setNeedUpdate(!0)))},Gh.prototype.moveWithPixel=function(t,i){var n,s;this._map&&(s=this._map,n=Y.parseLngLatData(this._opts.center),s=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],s.getZoom()),this.setCenter(s))},Gh.prototype.moveWithPos=function(t,i){var n;this._map&&(n=Y.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},Gh.prototype.getBounds=function(){if(this.ir)s=this.ir;else{var t=this._opts.center,i=this._opts.radius;if(!t||!i)return;var n=Math.max(i[0],i[1]),i=(t=Y.parseLngLatData(t)).offset(-n,-n),n=t.offset(n,n);this.ir=new lt(i,n),s=this.ir}if(this.ir){if(this.P$){var n=s.getSouthWest(),s=s.getNorthEast(),n=this._map.getView().ru().moveWithPos([n.KL,n.kT],this.zx),s=this._map.getView().ru().moveWithPos([s.KL,s.kT],this.zx);return new lt(n,s)}return this.ir}},Gh.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.center,i.center)||!Y.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),t&&this.setCenterAndRadius(this._opts.center,this._opts.radius),this.to()},Gh);function Gh(t){void 0===t&&(t={});var i=Fh.call(this)||this;return i.className="Overlay.Ellipse",i.Cx=Y.assign({center:void 0,radius:void 0},Ih),i._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},i._opts=i.nY(t),i._checkMap(),i}var Nh,_h=(Nh=zr,Y.Ei(Uh,Nh),Uh.prototype.init=function(t){t=t||this._opts,this._opts=this.nY(t),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Uh.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Uh.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Uh.prototype.getCenter=function(){var t=Y.parseLngLatData(this._opts.center);if(this.P$){var i=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new Y.LngLat(i[0],i[1])}return t},Uh.prototype.getRadius=function(){return parseFloat(this._opts.radius)},Uh.prototype.setCenterAndRadius=function(t,i){this._opts.center=t,Y.vB(i)&&0<=i&&(this._opts.radius=i),this.cE(),this.to()},Uh.prototype.ZB=function(t){var i,n,s;this._map&&(this._needUpdate=!1,i=this._opts.center,s=this._opts.radius,i&&Y.vB(s)&&(n=this._map,(s=nh(function(t,i){var n=[],s=Y.parseLngLatData(t),e=Y.ProjectionManager.getProjection("EPSG:3857");if(s)for(var r=(t=e.project(s.KL,s.kT))[0],h=t[1],o=6*Math.PI/180,a=Math.cos(s.kT*Math.PI/180),u=0;u<=60;u++){var f=u*o,c=i*Math.cos(f)/a,f=i*Math.sin(f)/a,f=e.unproject(r+c,h+f);n.push(f)}return n}(i,s)))&&(this.$x=s[0],this.ir=lt.ms(s),this.aE=s,"d"===n.baseRender?this.X$(s):this.Q$(s,t)),this.BB(),this._map.setNeedUpdate(!0)))},Uh.prototype.moveWithPixel=function(t,i){var n,s;this._map&&(s=this._map,n=Y.parseLngLatData(this._opts.center),s=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],s.getZoom()),this.setCenter(s))},Uh.prototype.moveWithPos=function(t,i){var n;this._map&&(n=Y.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},Uh.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.center,i.center)||!Y.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),t&&this.setCenterAndRadius(this._opts.center,this._opts.radius),this.to()},Uh.prototype.O$=function(t,i,n){},Uh.prototype.getBounds=function(){if(this.ir)s=this.ir;else{var t=this._opts.center,i=this._opts.radius;if(!t)return;if(!Y.vB(i))return;var n=(t=Y.parseLngLatData(t)).offset(-i,-i),i=t.offset(i,i);this.ir=new lt(n,i),s=this.ir}if(this.ir){if(this.P$){var i=s.getSouthWest(),s=s.getNorthEast(),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx),s=this._map.getView().ru().moveWithPos([s.KL,s.kT],this.zx);return new lt(i,s)}return this.ir}},Uh.prototype.ab=function(t){return delete(t=Y.extend({},t)).center,delete t.radius,delete t.map,delete t.path,t},Uh);function Uh(t){void 0===t&&(t={});var i=Nh.call(this)||this;return i.className="Overlay.Circle",i._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},i._opts=i.nY(t),i}var Yh,bt=(Yh=F,Y.Ei(Zh,Yh),Zh.prototype.Tx=function(t){t&&(t=Y.Bs(t)?Y.ProjectionManager.getProjection("EPSG:3857").project(t.KL,t.kT):Y.ProjectionManager.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=Y.lcs.getLocalByCoord(t))},Zh.prototype.setCenter=function(t){t&&(this._opts.center=Y.parseLngLatData(t),this.ir=new lt(this._opts.center,this._opts.center),this.cE(),this.to())},Zh.prototype.destroy=function(){this.KB&&delete this.KB,this.Sb&&(this.Sb.destroy(),delete this.Sb),Yh.prototype.destroy.call(this)},Zh.prototype.reset=function(){this.KB&&delete this.KB,this.Sb&&this.Sb.reset()},Zh.prototype.toGeometry=function(){if(this._opts.center){var t=Y.parseLngLatData(this._opts.center);return{type:"Point",coordinates:t&&t.toJSON()}}},Zh.prototype.XL=function(t){var i=Y.parseLngLatData(t);this.reset(),this.Tx(t),t=this.Sx.center,i=this._map.getView().ru().project(i.KL,i.kT),this.KB=[i[0]-t[0],i[1]-t[1]],Y.Support.safari&&(this.Sb||(this.Sb=new Y.e0),this.Sb.wb([i[0]-t[0],i[1]-t[1]]))},Zh);function Zh(t){var i=Yh.call(this)||this;return i.className="Overlay.Circle",i.Tx(t),i}var Xh,Jh=(Xh=bt,Y.Ei(Hh,Xh),Hh.prototype.init=function(t){t=t||this._opts,this._opts=this.nY(t),this.setCenter(this._opts.center)},Hh.prototype.setRadius=function(t){this._opts.radius=t,this.to()},Hh.prototype.ZB=function(){var t;this._map&&(this._needUpdate=!1,(t=this._opts.center)&&this._map&&"d"!==this._map.baseRender&&(this.XL(t),this.BB()))},Hh.prototype.getCenter=function(){var t=Y.parseLngLatData(this._opts.center);return this._map?(t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),new Y.LngLat(t[0],t[1])):t},Hh.prototype.getRadius=function(){return this._opts.radius},Hh.prototype.moveWithPixel=function(t,i){var n,s;this._map&&(s=this._map,n=Y.parseLngLatData(this._opts.center),s=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],s.getZoom()),this.setCenter(s))},Hh.prototype.moveWithPos=function(t,i){var n;this._map&&(n=Y.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},Hh.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.center,i.center);this._opts=i,this._checkMap(),t&&this.setCenter(i.center),this.to()},Hh.prototype.getOptions=function(){return Y.extend({},this._opts)},Hh.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.center))return;this.ir=new lt(t,t),i=this.ir}if(i){if(this.P$){var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new lt(t,i)}return this.ir}},Hh.prototype.Ib=function(){var t=(t=this._opts).radius+(t.strokeWeight||0);return Math.min(t,64)},Hh);function Hh(t){var e=Xh.call(this,(t=void 0===t?{}:t).center||void 0)||this;return e.contains=function(t){return!!e._map&&(t=e._map.lngLatToContainer(t),e.containsWithPixel(t))},e.containsWithPixel=function(t){if(!e._map)return!1;if(!e._opts.center)return!1;var i=e.Ib(),n=Y.parseLngLatData(e._opts.center),s=e._map.getView().ru().moveWithPos([n.KL,n.kT],e.zx),n=e._map.lngLatToContainer(s);return!(Math.abs(n.x-t.x)>i||Math.abs(n.y-t.y)>i)&&(s=t.toJSON(),t=n.toJSON(),n=Math.abs(s[0]-t[0]),t=Math.abs(s[1]-t[1]),n=Math.sqrt(n*n+t*t),t=e._map.getView().Pu||0,n/Math.cos(t)<i)},e.className="Overlay.CircleMarker",e._opts={radius:20,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,async:!1},e._opts=e.nY(t),e._checkMap(),e}var Vh={rainbow:{HY:["#96005A","#0000C8","#0019FF","#0098FF","#2CFF96","#97FF00","#FFEA00","#FF6F00","#FF0000"],JY:[0,.125,.25,.375,.5,.625,.75,.875,1]},jet:{HY:["#000083","#003CAA","#05FFFF","#FFFF00","#FA0000","#800000"],JY:[0,.125,.375,.625,.875,1]},hsv:{HY:["#ff0000","#fdff02","#f7ff02","#00fc04","#00fc0a","#01f9ff","#0200fd","#0800fd","#ff00fb","#ff00f5","#ff0006"],JY:[0,.169,.173,.337,.341,.506,.671,.675,.839,.843,1]},hot:{HY:["#000000","#e60000","#ffd200","#ffffff"],JY:[0,.3,.6,1]},greys:{HY:["#000000","#ffffff"],JY:[0,1]},greens:{HY:["#00441b","#006d2c","#238b45","#41ab5d","#74c476","#a1d99b","#c7e9c0","#e5f5e0","#f7fcf5"],JY:[0,.125,.25,.375,.5,.625,.75,.875,1]},ylgnbu:{HY:["#081d58","#253494","#225ea8","#1d91c0","#41b6c4","#7fcdbb","#c7e9b4","#edf8d9","#ffffd9"],JY:[1,.875,.75,.625,.5,.375,.25,.125,0]},ylorrd:{HY:["#800026","#bd0026","#e31a1c","#fc4e2a","#fd8d3c","#feb24c","#fed976","#ffeda0","#ffffcc"],JY:[1,.875,.75,.625,.5,.375,.25,.125,0]}};function qh(){}qh.getTexture=function(t,i){return this.cache[i]||(Vh[i]&&(n=function(t){t.JY,t.HY;var i=document.createElement("canvas");i.height=1,i.width=256;for(var n=i.getContext("2d"),s=n.createLinearGradient(0,0,256,1),e=0;e<t.JY.length;e++){var r=t.JY[e],h=t.HY[e];s.addColorStop(r,h)}return n.fillStyle=s,n.fillRect(0,0,256,1),i}(Vh[i]),n=t.createTexture(n,{Zi:!0}),t=t.gl,n.bind(t.CLAMP_TO_EDGE,t.NEAREST,t.NEAREST_MIPMAP_NEAREST),this.cache[i]=n),null);var n},qh.cache={},Y.dZ([Y.pZ("ColorScale")],qh);var Qh,jt=(Qh=F,Y.Ei(Kh,Qh),Kh.prototype.Tx=function(t){t&&(t=Y.Bs(t)?Y.ProjectionManager.getProjection("EPSG:3857").project(t.KL,t.kT):Y.ProjectionManager.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=Y.lcs.getLocalByCoord(t))},Kh.prototype.destroy=function(){this.Px&&(this.Px.destroy(),delete this.Px),Qh.prototype.destroy.call(this)},Kh.prototype.toGeometry=function(){var t=this._opts.path;if(t)return Y.ys(t)?{type:"LineString",coordinates:t}:Y.Ox(t)?{type:"MultiLineString",coordinates:t}:void 0},Kh.prototype.U_=function(t){this.F_&&(this.E_||(this.E_=t.createTexture(this.F_,{Zi:!0}),this.E_.bind(t.gl.CLAMP_TO_EDGE,t.gl.LINEAR,t.gl.LINEAR)))},Kh.prototype.aC=function(t,i){this.rC||(i=function(t){var i=document.createElement("canvas");i.height=1,i.width=4096;for(var n=i.getContext("2d"),s=n.createImageData(4096,1),e=0,r=0;r<4096;r++){for(var h=void 0;e<t.length;e++){if(e===t.length-1){h=t[e][1];break}if(!(4096*t[e+1][0]<r)){h=t[e][1];break}}var h=t[e][1],o=Y.Util.color2RgbaArray(h);s.data[4*r]=255*o[0],s.data[4*r+1]=255*o[1],s.data[4*r+2]=255*o[2],s.data[4*r+3]=255*o[3]}return n.putImageData(s,0,0),i}(i.values),this.rC=t.createTexture(i,{Zi:!0}),t=t.gl,this.rC.bind(t.CLAMP_TO_EDGE,t.NEAREST,t.NEAREST_MIPMAP_NEAREST))},Kh.prototype.X$=function(t){for(var i=[],n=[],s=0,e=t;s<e.length;s++){for(var r=[],h=[],o=0,a=e[s];o<a.length;o++){var u=a[o],f=Y.ProjectionManager.getProjection("EPSG:3857").project(u[0],u[1]);r.push([f[0],f[1]]),h.push(u)}i.push(r),n.push(h)}this.$x=n,this.q$=i},Kh.prototype.Q$=function(t){for(var i=[],n=[],s=0,e=t;s<e.length;s++){for(var r=[],h=[],o=0,a=e[s];o<a.length;o++){var u=a[o],f=Y.ProjectionManager.getProjection("EPSG:3857").project(u[0],u[1]);r.push([f[0],f[1],0]),h.push(u)}this.P_(r),i.push(r),n.push(h)}this.$x=n,this.q$=i,this.cE()},Kh.prototype.D_=function(t,i){if(0!==t.length){this.Px?this.Px.reset():this.Px=new Y.J_;for(var n=this.Sx.center,s=0,e=Y.ProjectionManager.getProjection("EPSG:3857"),r=this.EI,h=e.getResolution(r),o=0,a=t;o<a.length;o++){for(var u=a[o],f=[],c=0,l=u.length;c<l;c+=1)f.push(u[c][0]-n[0],u[c][1]-n[1]);var d=this._opts;10<=this.EI&&(this._opts.showDir||"dashed"===this._opts.strokeStyle)?s+=this.Px.eD(f,{X_:1,lineJoin:d.lineJoin,lineCap:d.lineCap},Math.floor(2048*h)).distance:s+=this.Px.hb(f,{X_:1,lineJoin:d.lineJoin,lineCap:d.lineCap}).distance}this.sC=s,i&&this.Px.upload(i)}},Kh.prototype.P_=function(t){t[0][2]=1/0,t[t.length-1][2]=1/0;var i=Y.ProjectionManager.getProjection("EPSG:3857").getResolution(16);!function t(i,n,s,e){for(var r=e,h=s-n>>1,o=s-n,a=s,u=i[n][0],f=i[n][1],c=i[s][0],l=i[s][1],d=n+1;d<s;d+=1){var v=function(t,i,n,s,e,r){var h,o=e-n,a=r-s;return 0===o&&0===a||(1<(h=((t-n)*o+(i-s)*a)/(o*o+a*a))?(n=e,s=r):0<h&&(n+=o*h,s+=a*h)),(o=t-n)*o+(a=i-s)*a}(i[d][0],i[d][1],u,f,c,l);r<v?(a=d,r=v):v!==r||(v=Math.abs(d-h))<o&&(a=d,o=v)}e<r&&(1<a-n&&t(i,n,a,e),i[a][2]=r,1<s-a&&t(i,a,s,e))}(t,0,t.length-1,i*i)},Kh);function Kh(){var u=null!==Qh&&Qh.apply(this,arguments)||this;return u.sC=0,u.W_=function(){if(Cr.isWebGL&&u._map&&u.q$&&!u._opts.geodesic&&!u._needUpdate){var t=u._map,i=Math.min(Y.Util.getOptimalZoom(t.getZoom()),20);if(u.EI!==i)if(i<18){u.EI=i;for(var n=Y.ProjectionManager.getProjection("EPSG:3857").getResolution(Math.min(Y.Util.getOptimalZoom(t.getZoom()),18)),s=[],e=0,r=u.q$;e<r.length;e++){for(var h=r[e],o=[],a=0;a<h.length;a+=1)h[a][2]>n*n*1&&o.push([h[a][0],h[a][1]]);s.push(o)}u.D_(s)}else u.EI=i,u.D_(u.q$)}},u}var $h,to=($h=jt,Y.Ei(io,$h),io.prototype.getOptions=function(){return Y.extend({},this._opts)},io.prototype.getPath=function(){if(this._opts&&this._opts.path)return Y.parseLngLatData(Y.yn(this._opts.path))},io.prototype.destroy=function(){this.E_&&(this.E_.destroy(),delete this.E_),$h.prototype.destroy.call(this)},io.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.path))return;if(!(t=dh(t)))return;(t=lt.bS(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new lt(t,i)}},io.prototype.setPath=function(t){t&&(this.Ix(t),this.to())},io.prototype.moveWithPixel=function(t,i){if(this._map){for(var n=this._map,s=Y.ProjectionManager.getProjection(n.getView().au()),e=[],r=0,h=this.$x;r<h.length;r++){for(var o=[],a=0,u=h[r];a<u.length;a++){var f=u[a];o.push(s.moveWithPixel(f,[t,i],n.getZoom()))}e.push(o)}this.setPath(e)}},io.prototype.moveWithPos=function(t,i){if(this._map){for(var n=this._map,s=Y.ProjectionManager.getProjection(n.getView().au()),e=[],r=0,h=this.$x;r<h.length;r++){for(var o=[],a=0,u=h[r];a<u.length;a++){var f=u[a];o.push(s.moveWithPos(f,[t,i]))}e.push(o)}this.setPath(Y.parseLngLatData(e))}},io.prototype.getLength=function(){var t=this._opts&&this._opts.path;return Y.ys(t)?+vh(t).toFixed(2):Y.Ox(t)?+function(t){for(var i=0,n=0,s=t;n<s.length;n++)i+=vh(s[n]);return i}(t).toFixed(2):0},io.prototype.rL=function(){return this.sC},io.prototype.ZB=function(t){this._map&&(this._needUpdate=!1,this.D_(this.q$,t))},io.prototype.setOptions=function(t){var i=this.nY(t),t=function(t,i,n){for(var s=0,e=n.length;s<e;s+=1){var r=n[s];if(t[r]!==i[r])return!0}return!1}(this._opts,i,["path","lineCap","lineJoin","geodesic"]);i.lineGradient!==this._opts.lineGradient&&this.rC&&(this.rC.destroy(),delete this.rC),this._opts=i,this._checkMap(),t&&this.setPath(this._opts.path),this.to()},io.prototype.init=function(t){var i,n=this,t=t||this._opts,t=this.nY(t);this._opts=t,this._opts.dirImg&&(this._opts.dirImg instanceof HTMLCanvasElement?this.F_=this._opts.dirImg:(i=this._opts.dirImg,this._map.z_.loadImage(this._opts.dirImg,{type:"dirImg",cb:function(t){t?n.F_=t.img:console.error("load dirImg error",i)}}))),this.setPath(this._opts.path),this._map&&(this.W_(),this._map.setNeedUpdate(!0))},io.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&this.ir.southWest.lat!==this.ir.northEast.lat&&this.ir.southWest.lng!==this.ir.northEast.lng&&!this.ir.contains(t))return!1;for(var i=this._map.getView(),n=i.getStatus().pitch*Math.PI/180,t=Y.parseLngLatData(t),s=i.ru().project(t.lng,t.lat),e=i.ru().getResolution(this._map.getZoom()),r=0,h=this.q$;r<h.length;r++){var o=h[r];if(Y.hL.lr(s,o)*Math.cos(n)<this._opts.strokeWeight*e)return!0}return!1},io.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},io.prototype.Ix=function(t){var i=Y.jsonLngLatData(t);this._opts.path=i,i=dh(t),Y.Ox(i)?(this._opts.geodesic&&(i=Y.map(i,ph)),this.Tx(i[0][0]),this.ir=lt.bS(i),this._map&&("d"===this._map.baseRender?this.X$(i):(this.Q$(i),this.BB()))):console.error("error Polyline path")},io.prototype.rD=function(t){var i=Y.jsonLngLatData(t);this._opts.path=i,i=dh(t),Y.Ox(i)?(this._opts.geodesic&&(i=Y.map(i,ph)),this.Tx(i[0][0]),this.ir=lt.bS(i)):console.error("error Polyline path")},io);function io(t){void 0===t&&(t={});var i=$h.call(this)||this;return i.className="Overlay.Polyline",i._opts={cursor:"",strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.5,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],isOutline:!1,geodesic:!1,showDir:!1,outlineColor:"#00B2D5",borderWeight:1,lineJoin:"miter",lineCap:"butt",extData:{},zIndex:50,dirColor:"white",dirImg:"",lineGradient:void 0,noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange,animate:!1,speed:100,dirImgGap:1},i.EI=-1,i._opts=i.nY(t),i._opts.path&&i.rD(i._opts.path),i._checkMap(),i}var no,It=(no=jt,Y.Ei(so,no),so.prototype.getOptions=function(){return Y.extend({},this._opts)},so);function so(){return null!==no&&no.apply(this,arguments)||this}var ro,ho=(ro=Y.LngLat,Y.Ei(oo,ro),oo.prototype.lL=function(){for(var t=[],i=0,n=this.controlPoints;i<n.length;i++){var s=n[i];t.push(s.toJSON())}return t.push(this.toJSON()),t},oo.prototype.moveWithPos=function(t,i,n){for(var s=t.moveWithPos(this.toJSON(),[i,n]),e=[],r=0,h=this.controlPoints.length;r<h;r++){var o=this.controlPoints[r];e.push(t.moveWithPos(o.toJSON(),[i,n]))}return e.push(s),new oo(e)},oo.prototype.moveWithPixel=function(t,i,n,s){for(var e=t.moveWithPixel(this.toJSON(),[i,n],s),r=[],h=0,o=this.controlPoints.length;h<o;h++){var a=this.controlPoints[h];r.push(t.moveWithPixel(a.toJSON(),[i,n],s))}return r.push(e),new oo(r)},oo);function oo(t){var i=this;if(Y.ys(t)){for(var n=t.length,i=ro.call(this,t[n-1][0],t[n-1][1])||this,s=[],e=0,r=n-1;e<r;e+=1){var h=t[e][0],o=t[e][1];s.push(new Y.LngLat(h,o))}i.controlPoints=s}else{for(n=t.length,i=ro.call(this,t[n-2],t[n-1])||this,s=[],e=0,r=n-2;e<r;e+=2)h=t[e],o=t[e+1],s.push(new Y.LngLat(h,o));i.controlPoints=s}return i}var ao,uo=(ao=It,Y.Ei(fo,ao),fo.prototype.init=function(t){var i,n=this,t=t||this._opts;this._opts=this.nY(t),this._opts.dirImg&&(this._opts.dirImg instanceof HTMLCanvasElement?this.F_=this._opts.dirImg:(i=this._opts.dirImg,this._map.z_.loadImage(this._opts.dirImg,{type:"dirImg",cb:function(t){t?n.F_=t.img:console.error("load dirImg error",i)}}))),this.setPath(this._opts.path),this._map&&(this.W_(),this._map.setNeedUpdate(!0))},fo.prototype.setOptions=function(t){var i=this.nY(t),t=!Y.isEqual(this._opts.path,i.path);this._opts=i,this._checkMap(),t&&this.Ix(this._opts.path),this.BB(),this.to()},fo.prototype.ZB=function(t){this._map&&(this._needUpdate=!1,this.D_(this.q$,t))},fo.prototype.getPath=function(){if(this._opts)return this._opts.path},fo.prototype.setPath=function(t){t&&(this._opts.path=t,this.Ix(t))},fo.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this.$x))return;if(!(t=dh(t)))return;(t=lt.bS(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new lt(t,i)}},fo.prototype.moveWithPos=function(t,i){if(this._map){var n=this._map,s=Y.ProjectionManager.getProjection(n.getView().au());if(n=this.getPath()){for(var e=[],r=0,h=n;r<h.length;r++){var o=h[r],o=(o=new ho(o)).moveWithPos(s,t,i);e.push(o.lL())}this.setPath(e)}}},fo.prototype.moveWithPixel=function(t,i){if(this._map){var n=this._map,s=Y.ProjectionManager.getProjection(n.getView().au()),e=this.getPath();if(e){for(var r=[],h=n.getZoom(),o=0,a=e;o<a.length;o++){var u=a[o],u=(u=new ho(u)).moveWithPixel(s,t,i,h);r.push(u.lL())}this.setPath(r)}}},fo.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;for(var i=this._map.getView(),n=i.getStatus().pitch*Math.PI/180,t=Y.parseLngLatData(t),s=i.ru().project(t.lng,t.lat),e=i.ru().getResolution(this._map.getZoom()),r=0,h=this.q$;r<h.length;r++){var o=h[r];if(Y.hL.lr(s,o)*Math.cos(n)<this._opts.strokeWeight*e)return!0}return!1},fo.prototype.Ix=function(t){var i=[];if(t)for(var n=0,s=t;n<s.length;n++){var e=s[n];i.push(new ho(e))}t=dh(this.yb(i)),this.Tx(t[0][0]),this.ir=lt.bS(t),this._map&&("d"===this._map.baseRender?this.X$(t):(this.Q$(t),this.BB()))},fo.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},fo.prototype.yb=function(t){if(!this._map)return[];var i=Y.ProjectionManager.getProjection("EPSG:3857").getResolution(this._map.getZoom());return Y.bb.xb(t,i)},fo);function fo(t){void 0===t&&(t={});var i=ao.call(this)||this;return i.className="Overlay.BezierCurve",i.bo=3,i.W_=function(){},i._opts={cursor:"",strokeColor:"#00D3FC",strokeWeight:2,strokeOpacity:.5,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],isOutline:!1,geodesic:!1,showDir:!1,outlineColor:"#00B2D5",borderWeight:1,lineJoin:"miter",lineCap:"butt",extData:{},zIndex:50,dirColor:"white",dirImg:"",lineGradient:void 0,noSelect:!1,innerOverlay:!1,zooms:Y.zoomRange},i.EI=-1,i._opts=i.nY(t),i._checkMap(),i}var co,yo={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}},bo=(co=Wt,Y.Ei(go,co),go.prototype.Do=function(t){return t&&(this.Jh=t).HF(this),t},go.prototype.onAdd=function(){var t;this.$F=new Rn({zIndex:this.Qh,visible:this.il,TF:!0}),null!==(t=this.map)&&void 0!==t&&t.addLayer(this.$F)},go.prototype.v$=function(){var t;null!==(t=this.map)&&void 0!==t&&t.removeLayer(this.$F)},go.prototype.destroy=function(){co.prototype.destroy.call(this),this.$F.destroy(),this.$F&&this.$F.destroy&&(this.$F.destroy(),delete this.$F)},go.prototype.yD=function(){return{show:this.xD}},go.prototype.mD=function(t){this.xD=t},go.prototype.cD=function(){var n=this;if(this.dD)return!1;this.dD=!0,this._map.on("moveend",function(){var t=n._map.getZoom(),i=n.VR;n.VR.showId,i&&i.centerId&&i.indoor&&(!n.ZT(i.indoor)||t<n.xt[0]?(n.e$&&(n.e$.hide(),n.xD=!1),n.nD()):n.e$&&n.VR.visible&&(n.mL||n.e$.show(),n.xD=!0))})},go.prototype.uD=function(){for(var t=this.VR,i=t.indoor,n=t.centerId,s=Object.keys(i),e=yo,r=0;r<s.length;r++){var h=s[r];if(i[h]&&i[h].outline)for(var o=i[h].outline,a=0;a<o.length;a++){var u=o[a],f=u.getOptions();f.strokeColor=(h===n?e.high:e.unHigh).strokeColor,u.setOptions(f)}}},go.prototype.oZ=function(){for(var t=this.VR,i=t.indoor,n=(t.centerId,Object.keys(i)),s=yo,e=0;e<n.length;e++){var r=n[e];if(i[r]&&i[r].outline)for(var h=i[r].outline,o=0;o<h.length;o++){var a=h[o],u=a.getOptions();u.strokeColor=s.unHigh.strokeColor,a.setOptions(u)}}},go.prototype.BT=function(){var t=this;setTimeout(function(){t._map&&t._map.emit("indoor_create")},500)},go.prototype.bL=function(t){this.VR.opacity=t,this.gL()},go.prototype.wL=function(t){this.VR.zIndex=t,this.gL()},go.prototype.ZI=function(){return this.VR},go.prototype.KI=function(t){this.VR=t},go.prototype.getState=function(){return{zooms:[17,Y.zoomRange[1]],visible:this.il,opacity:this.tl,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF,ce:this.IF}},go.prototype.getSourceConfig=function(){return{id:this._id,type:"indoor",zooms:[17,Y.zoomRange[1]],url:""}},go.prototype.co=function(){return this._id},go.prototype.getMap=function(){return this._map},go.prototype.n$=function(t,i){this.VR.floorInfo||(this.VR.floorInfo={}),this.VR.floorInfo[t]=i},go.prototype.emit=function(t,i){return co.prototype.emit.call(this,t,i),this},go.prototype.showId=function(t){this.VR.showId=t},go.prototype.setBar=function(t){this.e$=t},go.prototype.setBarOpt=function(t){this.VR.defaultBarFloor=t},go.prototype._hideLayer=function(t){this.VR.visible=t,this.DT(t),this._hideBar(!t),t?this.$F.show():this.$F.hide(),this.gL()},go.prototype._hideBar=function(t){this.mL=t,this.VR.hideFloorBar=t,this.e$&&t?this.e$.hide():this.e$&&this.e$.show()},go.prototype._showLabels=function(t){this.VR.showLabels=t;var i=this._map&&this._map.showLabel;this.VR.labelsLayer&&t&&i?this.VR.labelsLayer.show():this.VR.labelsLayer&&this.VR.labelsLayer.hide()},go.prototype.setShowId=function(t){this.VR.hasId=t},go.prototype.update=function(){this.gL()},go.prototype._getSelectedBuildingId=function(){return this.VR.centerId},go.prototype._getSelectedBuilding=function(){return this.VR.building},go.prototype.setRenderData=function(t){this.VR=Y.assign(this.VR,t)},go.prototype.getIntersectPoly=function(t){var i=!1,n=t.getBounds(),t=this._map&&this._map.getBounds();return n&&t?t.intersects(n):i},go.prototype.getIntersect=function(t){if(!t)return!1;for(var i=!1,n=this._map&&this._map.getBounds(),s=0;s<t.length;s++){var e=t[s],e=new AMap.LngLat(e[0],e[1]);if(i=n.contains(e))return!0}return i},go.prototype.YR=function(t,s){var e=this;try{if(!this._map||!this._map.gn)return;var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e._map.gn.JB(i.response,function(t,i){var n;t?console.log(t):(t=(n=Object.keys(i))[0]?i[n[0]].building:void 0)&&t.properties&&t.properties.outside_outline&&(n=i[n[0]].building.properties.outside_outline,(n=AMap.Bounds.xS(n))&&e._map.setBounds(n)),s&&s()})},i.open("GET",t,!0),i.responseType="arraybuffer",i.send()}catch(t){}},go.prototype.DT=function(t){for(var i=this.VR.indoor,n=Object.keys(i),s=0;s<n.length;s++){var e=i[n[s]];if(e.polygons)for(var r=0;r<e.polygons.length;r++){var h=e.polygons[r];t?h.show():h.hide()}if(e.markers)for(var o=0;o<e.markers.length;o++){var a=e.markers[o];t?a.show():a.hide()}}},go.prototype.ZT=function(t){for(var i=Object.keys(t),n=0;n<i.length;n++){var s=i[n];if(this._map&&t[s].outline&&(s=t[s].outline,s=this.getIntersectPoly(s[0])))return s}return!1},go.prototype.gL=function(){},go.prototype.nD=function(){for(var t=this.VR.indoor,i=Object.keys(t),n=0;n<i.length;n++){var s=i[n],e=t[s];e.polygons&&this.$F.remove(e.polygons),e&&e.markers&&0<e.markers.length&&this.VR.labelsLayer&&this.VR.labelsLayer.remove(e.markers),delete t[s]}},go);function go(t){var i=co.call(this)||this;return i.CLASS_NAME="AMap.IndoorLayer",t=t||{},i._id="indoor",i.il=!0,i.Qh=t.zIndex||5,i.tl=t.opacity||1,i.mL=t.hideFloorBar||!1,i.xL=t.cursor||"auto",i.xt=[17,Y.zoomRange[1]],i.xD=!1,i.dD=!1,0===t.opacity&&(i.tl=0),i.VR={opacity:i.tl,zIndex:i.Qh,visible:i.il,cursor:i.xL,centerId:null,centerFloor:null,indoor:{},hideFloorBar:i.mL,showLabels:!0,reRender:!1,floorInfo:{},indoorState:{},centerBuilding:{}},t&&t.map&&(i._map=t.map,i.cD()),i._config=AMap.getConfig(),i.BT(),i}var ko,Mo=(ko=bo,Y.Ei(wo,ko),wo.prototype.showIndoorMap=function(t,i,n){var s,e=i||1;t&&(this.pL=t,ko.prototype.showId.call(this,t),ko.prototype.n$.call(this,t,e),this.pL=t,s=this._config.server+"/v3/indoor/indoormaps?",(i=[]).push("poiid="+t),i.push("floor="+e),i.push("version=0"),i.push("s=rsv3"),i.push("from=indoorH5Map"),i.push("servicetype=unify"),i.push("key="+this._config.key),this._config.jscode?i.push("jscode="+this._config.jscode):this._config.gaodeserver&&(s=this._config.gaodeserver+"/v3/indoor/indoormaps?"),i=s+i.join("&"),ko.prototype.YR.call(this,i))},wo.prototype.showFloor=function(t,i){this.pL&&this.showIndoorMap(this.pL,t)},wo.prototype.show=function(){this._hideLayer(!0)},wo.prototype.hide=function(){this._hideLayer(!1)},wo.prototype.getMap=function(){return this._map},wo.prototype.setMap=function(t){var i=(this._map=t).getStatus().animateEnable;ko.prototype.setRenderData.call(this,{animateState:i}),t.setStatus({animateEnable:!1}),ko.prototype.setMap.call(this,t),ko.prototype.cD.call(this)},wo.prototype.setzIndex=function(t){ko.prototype.wL.call(this,t)},wo.prototype.showFloorBar=function(){this._hideBar(!1)},wo.prototype.hideFloorBar=function(){this._hideBar(!0)},wo.prototype.setOpacity=function(t){ko.prototype.bL.call(this,t)},wo.prototype.getOpacity=function(){return ko.prototype.getOpacity.call(this)},wo.prototype.showLabels=function(){this._showLabels(!0)},wo.prototype.hideLabels=function(){this._showLabels(!1)},wo.prototype.getSelectedBuildingId=function(){return ko.prototype._getSelectedBuildingId.call(this)},wo.prototype.getSelectedBuilding=function(){return ko.prototype._getSelectedBuilding.call(this)},wo);function wo(t){var i=ko.call(this,t)||this;return i.CLASS_NAME="AMap.IndoorMap",i._config=AMap.getConfig(),i.pL="",t&&t.map&&(i._map=t.map,t=t.map.getStatus().animateEnable,ko.prototype.setRenderData.call(i,{animateState:t})),i}function Ao(t,i,n){this.x=i,this.y=n,this.z=t,this.key=t+","+i+","+n}var xo,Et=(xo=Xi,Y.Ei(zo,xo),zo.prototype.getLayerConfig=function(){var t=xo.prototype.getLayerConfig.call(this);return t.mapNumber="GS(2019)756",t},zo.prototype.getSourceConfig=function(){return{id:this._id,tileUrl:this.Be||"",type:"districtVectorTile",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[3,16],projection:this.hl||"EPS3857",SOC:this.SOC}},zo.prototype.getLayerOptions=function(){return{zIndex:this.Qh,visible:this.il,zooms:this.xt,opacity:this.tl,adcode:this._adcode,styles:this.Ze,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF}},zo.prototype.getState=function(){return Y.Ln({},this.getLayerOptions())},zo.prototype.getDistrictByContainerPos=function(t){if(i=this.map){var i,n=i.containerToLngLat(t),s=i.getProjection().project(n.lng,n.lat),e=i.getView().getStatus().optimalZoom,t=i.getTileCoordByLngLat(n,this.Xa||256,e-1);if(!(n=(i=this.getSource().getTileCache()).getTile(t))&&t.z<12&&(e=Math.pow(2,t.z)/((this.Xa||256)/256),n=i.getTile(new Ao(t.z,t.x+e,t.y))||i.getTile(new Ao(t.z,t.x-e,t.y))),n&&n.localCoord&&n.data){var r=[s[0]-n.localCoord.center[0],s[1]-n.localCoord.center[1]],h=n.data;if(h.polygons)for(var o=0,a=h.polygons.length;o<a;o+=1){var u=h.polygons[o];if(3<u.path.length&&3===u.properties.feature_type_){for(var f=[],c=0,l=u.path.length;c<l;c+=2)f.push([u.path[c],u.path[c+1]]);if(AMap.GeometryUtil.pointInRing(r,[[f]]))return u.properties}}}}},zo.prototype.co=function(){return this._id},zo.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},zo.prototype.reload=function(){var t;this.map&&((t=this.getSource()).setTileUrl(this.Be),t.reload(),this.map.setNeedUpdate(!0))},zo.prototype.yE=function(){var n=this;AMap.xE||AMap.bE||(AMap.bE="loading",AMap.Http.Ajax(this._E,{},function(t,i){i&&i.data&&(i=JSON.parse(i.data),AMap.xE||(AMap.xE=i,n.wE&&(i=n.wE,n.setFitViewByAdcode(i.CE,i.zE,i.avoid))))}))},zo);function zo(){var t=null!==xo&&xo.apply(this,arguments)||this;return t.CLASS_NAME="AMap.DistrictLayer",t._E=AMap.getConfig().protocol+"://mvt.amap.com/getDistrictInfo",t}var Co,So=(Co=Et,Y.Ei(Lo,Co),Lo.prototype.setSOC=function(t){this.SOC=t,this.Be=this.Ml.replace("[SOC]",this.SOC),this.reload()},Lo.prototype.setDistricts=function(t){this.setAdcode(t)},Lo.prototype.getDistricts=function(){return this._adcode},Lo.prototype.setStyles=function(t){this.Ze=Y.Util.baseAssign(Y.Util.baseAssign({},this.tP.styles),t),this.map&&((t=this.getRender())&&t.clearStyleCache(),this.map.setNeedUpdate(!0))},Lo.prototype.getStyle=function(){return this.Ze},Lo.prototype.setAdcode=function(t){var i;t instanceof Array||(t=[t]);for(var n={},s=0;s<t.length;s+=1)n[t[s]]=1;this._adcode=t=n,null!==(i=this.map)&&void 0!==i&&i.setNeedUpdate(!0)},Lo.prototype.setFitViewByAdcode=function(t,i,n){var s,e;if(void 0===i&&(i=!1),t instanceof Array||(t=[t]),this.RE||(this.RE=window.AE),AMap.xE){this.RE=AMap.xE;for(var r=0;r<t.length;r+=1){var h=this.RE[t[r]],h=new lt(Y.Pt(h[0],h[1]));e?e.union(h):e=h}this.map&&null!==(s=this.map)&&void 0!==s&&s.setBounds(e,i,n)}else this.wE={CE:t,zE:i,avoid:n}},Lo.prototype.on=function(s,t,i,n){var e,r=this;void 0===n&&(n=!1);var h=this.getEvents(),o=!!h[s];return Co.prototype.on.call(this,s,t,i,n),this.map?o||("click"!==s&&"mousemove"!==s||null!==(e=this.map)&&void 0!==e&&e.on(s,function(t){if(!h[s])return r;t.type=s,t.target=r;var i=t.pixel,i=r.getDistrictByContainerPos(i),t={preProps:r.IE,props:i,origin:t};r.emit(s,t)}),/(mouseenter|mouseleave|mouseover|mouseout)/.test(s)&&(null!==(e=this.map)&&void 0!==e&&e.on("mouseleave",function(t){if("mouseleave"===s||"mouseout"===s){if(!h[s])return r;t.type=s,t={preProps:(t.target=r).IE,props:void 0,origin:t},r.emit(s,t),r.IE=void 0}}),null!==(e=this.map)&&void 0!==e&&e.on("mousemove",function(t){if(!h[s])return r;var i,n=t.pixel;(n=r.getDistrictByContainerPos(n))?r.IE&&r.IE.adcode===n.adcode&&r.IE.SOC===n.SOC||(t.type=s,i={preProps:(t.target=r).IE,props:n,origin:t},r.emit("mouseleave",i),r.emit("mouseout",i),r.emit("mouseenter",i),r.emit("mouseover",i),r.IE=n):r.IE&&("mouseout"!==s&&"mouseleave"!==s||(t.type=s,i={preProps:(t.target=r).IE,props:n,origin:t},r.emit("mouseleave",i),r.emit("mouseout",i),r.IE=n))}))):(n={fn:t,context:i,once:n},this.LE[s]?this.LE[s].push(n):this.LE[s]=[n]),this},Lo.prototype.onAdd=function(){if(Co.prototype.onAdd.call(this),this.LE)for(var t in this.LE)if(this.LE.hasOwnProperty(t))for(var i=this.LE[t],n=0;n<i.length;n++)this.on(t,i[n].fn,i[n].context)},Lo);function Lo(t){var i=Co.call(this,t)||this;return i.LE={},i.CX="2"===t.dataVersion?"2":"",i.tP={id:"DistrictLayer_"+Y.Util.uuid(),tileUrl:AMap.getConfig().protocol+"://mvt.amap.com/district/[SOC]/[z]/[x]/[y]/4096?\nkey="+AMap.getConfig().key+"&version="+i.CX,zooms:Y.zoomRange,dataZooms:[1,18],opacity:1,visible:!0,depth:0,zIndex:80,styles:{"stroke-width":.5,"nation-stroke":[.35,.35,.35,1],"coastline-stroke":[.18,.63,.94,1],"province-stroke":[.5,.5,.5,1],"city-stroke":[.7,.7,.7,1],"county-stroke":[.85,.85,.85,1],fill:[1,1,1,1],dash:void 0,zIndex:0},SOC:"CHN"},i.SOC=t.SOC||i.tP.SOC,i._id=i.tP.id,t.adcode&&i.setAdcode(t.adcode),i._depth=t.depth||i.tP.depth,i.Ze=Y.Util.baseAssign(Y.Util.baseAssign({},i.tP.styles),t.styles||{}),i.Ml=i.tP.tileUrl,i.Be=i.tP.tileUrl.replace("[SOC]",i.SOC),i.xt=t.zooms||i.tP.zooms,i.tl=(void 0===t.opacity?i.tP:t).opacity,i.il=(void 0===t.visible?i.tP:t).visible,i.Qh=(void 0===t.zIndex?i.tP:t).zIndex,i.Qs=i.tP.dataZooms,i.CLASS_NAME="AMap.DistrictLayer",i}var To,St=(To=So,Y.Ei(Io,To),Io);function Io(t){var i=this,n={id:"WorldLayer_"+Y.Util.uuid(),zIndex:81,SOC:"WLD"};return(i=To.call(this,t)||this)._id=n.id,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.World",i}var Do,Ht=(Do=So,Y.Ei(Oo,Do),Oo);function Oo(t){var i=this,n={id:"CountryLayer_"+Y.Util.uuid(),depth:1,zIndex:82,SOC:"CHN"};return 0===(t=t||n).depth&&(t.styles||(t.styles={}),t.styles["stroke-width"]=0),(i=Do.call(this,t)||this)._id=n.id,i._depth=void 0===t.depth?n.depth:+t.depth,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,"CHN"===i.SOC&&1<i._depth&&(i.SOC="CHN2"),i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.Country",i}var Eo,Ro=(Eo=So,Y.Ei(Po,Eo),Po);function Po(t){var i=this,n={id:"ProvinceLayer_"+Y.Util.uuid(),depth:1,zIndex:83,SOC:"CHN5"};return(i=Eo.call(this,t)||this)._id=n.id,i._depth=void 0===t.depth?n.depth:+t.depth,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,0===i._depth&&(i.SOC="CHN4"),1===i._depth&&(i.SOC="CHN5"),2===i._depth&&(i.SOC="CHN3"),i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.Province",i.onCreated(),i}So.World=St,So.Country=Ht,So.Province=Ro;var Bo,Fo,Wo,jo,No=window.__AMap_Offline__?((jo=void 0===(jo=config)?[]:jo)[16],jo[17],jo[4],jo[0],Y.Module.module=function(t,i){i&&i()},function(t,i){i&&i()}):(jo=config,Bo=(jo=void 0===jo?[]:jo)[16]+"://"+jo[17]||"",Fo=jo[4],Wo=jo[0],Y.Module.module=function(t,i){var s=n(t=Array.isArray(t)?t:[t]);0===s.length?i&&i():(f.add(s,i),e(Bo+"/mapsplugin?v="+Fo+"&cls="+s.join()+"&key="+Wo,function(){for(var t=0,i=s;t<i.length;t++){var n=i[t];f.finish(n)}}))},function(t,i){var s=n(t=Array.isArray(t)?t:[t]);0===s.length?i():(f.add(s,i),e(Bo+"/mapsplugin?v="+Fo+"&cls="+s.join()+"&key="+Wo,function(){for(var t=0,i=s;t<i.length;t++){var n=i[t];f.finish(n)}}))});function _o(){return Yo}function Uo(t,i){Yo.offlineServer=i}s('.amap-custom{top:0;left:0;position:absolute}.amap-container img{max-width:none!important;max-height:none!important}.amap-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAAf1JREFUeAHtmtGpAkEQBE9TMAi/zMb8MzCGU/97Ye8QunDrfQ7qNFUMS8Pbtom/fd8fEx/b/FymdIDL85p/wmmLgEJa5Ad7FTIA0xorpEV+sFchAzCtsUJa5Ad7FTIA0xorpEV+sPcyW1oG33f8WwL3qZ+blebnMs4DXGzqGWFv6hvSYx83KyRi6Q0V0mMfNyskYukNFdJjHzcrJGLpDRXSYx8329QjltrQpp7QH2jWv/5fA5t6EtKc+YY06YfdCglQmiOFNOmH3QoJUJojhTTph90KCVCaI4U06YfdNvUApTiyqSf4NvVEZdGZbwhMvEIUAiMAi+OFKARGABbHC1EIjAAsjk2dJcSmnnzY1BOVRWc+6jDxClEIjAAsjheiEBgBWBwvRCEwArA4/9LUbx+uLxjbM3Fs6omaTT1RWXTmow4TrxCFwAjA4nghCoERgMXxQhQCIwCL8y9NHYb1dBybekJnU09UFp35qMPEK0QhMAKwOF6IQmAEYHG8EIXACMDi2NRZQmzqyYdNPVFZdOajDhOvEIXACMDieCEKgRGAxfFCFAIjAItjU2cJsaknHzb1RGXRmY86TLxCFAIjAIvjhSgERgAWxwtRCIwALI5NnSXEpp582NQTlUVnPuow8QpRCIwALI4XohAYAVgcL0QhMAKwON+m/oRlWjrOG2SeYNIaKe7fAAAAAElFTkSuQmCC);background-color:#f1f1f1;touch-action:none;position:relative;overflow:hidden;-ms-touch-action:none}.amap-drags,.amap-layers{width:100%;height:100%;position:absolute;overflow:hidden;transform:translateZ(0)}.amap-layers canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-layers .amap-layer-tile{transform:translateZ(0)}.amap-layers .amap-layer-tile,.amap-layers .amap-layer-tile img{position:absolute;top:0;left:0;user-select:none;-webkit-user-select:none}.amap-layers .amap-layer-image{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-layers .amap-layer-image img{position:absolute;top:0;left:0}.amap-layer img{pointer-events:none;display:block}.amap-layers .amap-layer-overlay{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-e,.amap-maps{width:100%;height:100%;outline:none}.amap-maps{z-index:0}.amap-e,.amap-layers,.amap-maps,.amap-tile-container{position:absolute;left:0;top:0;overflow:hidden}.amap-context,.amap-marker,.amap-markers,.amap-overlays{position:absolute;left:0;top:0}.amap-layers{z-index:0}.amap-overlays{z-index:110;cursor:default}.amap-markers{z-index:120}.amap-controls{z-index:150}.amap-copyright{display:block!important;left:77px;height:16px;bottom:0;padding-bottom:2px;font-size:11px;font-family:Arial,sans-serif}.amap-copyright,.amap-logo{position:absolute;z-index:160;user-select:none;-webkit-user-select:none}.amap-logo{bottom:1px;left:1px;height:20px}.amap-logo img{width:73px!important;height:20px!important;border:none;vertical-align:baseline!important;user-select:none;-webkit-user-select:none}.amap-icon{position:relative;z-index:1}.amap-icon img{position:absolute;z-index:-1}.amap-marker-label{position:absolute;z-index:2;border:1px solid #00f;background-color:#fff;white-space:nowrap;cursor:default;padding:3px;font-size:12px;line-height:14px}.amap-info{left:0;width:fit-content;width:-webkit-fit-content;width:-moz-max-content}.amap-info,.amap-menu{position:absolute;z-index:140}.amap-info-close{position:absolute;right:5px;top:5px;color:#c3c3c3;text-decoration:none;font:700 16px/14px Tahoma,Verdana,sans-serif;width:14px;height:14px;cursor:pointer}.amap-info-outer,.amap-menu-outer{box-shadow:0 1px 2px rgba(0,0,0,.1);background:none repeat scroll 0 0 #fff;border-radius:2px;padding:1px;text-align:left}.amap-info-contentContainer:hover .amap-info-outer,.amap-menu-outer:hover{box-shadow:0 1px 2px rgba(0,0,0,.3)}.amap-info-content{position:relative;background:#fff;padding:10px 18px 10px 10px;line-height:1.4;overflow:auto}.amap-marker-content{position:relative}.amap-info-sharp-old{overflow:hidden;position:absolute;background-image:url(https://webapi.amap.com/images/arrows.png)}.bottom-center .amap-info-sharp-old{height:12px;width:20px;background-position:center 12px;top:100%;left:50%;margin:-9px auto 0 -10px}.bottom-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -46px;top:100%;margin-top:-9px}.bottom-right .amap-info-sharp-old{height:12px;width:13px;top:-1px;background-position:-56px -46px;left:100%;margin-left:-13px;top:100%;margin-top:-9px}.middle-left .amap-info-sharp-old{height:20px;width:12px;background-position:0;top:50%;margin-top:-10px;margin-left:-11px}.center .amap-info-sharp-old{display:none}.middle-right .amap-info-sharp-old{height:20px;margin-right:0;width:12px;background-position:100%;left:100%;margin-left:-9px;top:50%;margin-top:-10px}.top-center .amap-info-sharp-old{height:12px;width:20px;background-position:top;top:0;left:50%;margin:-3px auto 0 -10px}.top-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -3px;top:0;margin-top:-3px}.top-right .amap-info-sharp-old{height:12px;width:13px;background-position:-56px -3px;left:100%;margin-left:-13px;top:0;margin-top:-3px}.amap-info-sharp{position:absolute}.bottom-center .amap-info-sharp{bottom:0;left:50%;border-top:8px solid #fff}.bottom-center .amap-info-sharp,.bottom-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.bottom-center .amap-info-sharp:after{position:absolute;content:"";margin-top:-7px;border-top:8px solid rgba(0,0,0,.3);filter:blur(2px);z-index:-1}.amap-info-contentContainer:hover.bottom-center .amap-info-sharp:after{border-top:8px solid rgba(0,0,0,.5)}.bottom-left .amap-info-sharp{border-color:transparent #fff;border-style:solid;border-width:0 0 10px 10px}.bottom-left .amap-info-sharp:after{position:absolute;content:"";margin-left:-10px;border-color:transparent rgba(0,0,0,.3);border-style:solid;border-width:0 0 10px 10px;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-left .amap-info-sharp:after{border-color:transparent rgba(0,0,0,.5)}.bottom-left .amap-info-content{border-radius:2px 2px 2px 0}.bottom-right .amap-info-sharp{right:0;border-top:10px solid #fff;border-left:10px solid transparent}.bottom-right .amap-info-sharp:after{position:absolute;margin-top:-9px;margin-left:-10px;content:"";border-top:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-right .amap-info-sharp:after{border-top:10px solid rgba(0,0,0,.5)}.bottom-right .amap-info-content{border-radius:2px 2px 0 2px}.top-center .amap-info-sharp{top:0;left:50%;border-bottom:8px solid #fff}.top-center .amap-info-sharp,.top-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.top-center .amap-info-sharp:after{position:absolute;content:"";margin-top:0;border-bottom:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.top-left .amap-info-sharp{left:0;top:0;border-bottom:10px solid #fff;border-right:10px solid transparent}.top-left .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:0;border-bottom:10px solid rgba(0,0,0,.3);border-right:10px solid transparent;filter:blur(1px);z-index:-1}.top-right .amap-info-sharp{right:0;top:0;border-bottom:10px solid #fff;border-left:10px solid transparent}.top-right .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:-10px;border-bottom:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.middle-right .amap-info-sharp{right:0;top:50%;border-left:8px solid #fff}.middle-right .amap-info-sharp,.middle-right .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-right .amap-info-sharp:after{position:absolute;content:"";margin-left:-8px;border-left:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-right .amap-info-sharp:after{border-left:8px solid rgba(0,0,0,.5)}.middle-left .amap-info-sharp{left:0;top:50%;border-right:8px solid #fff}.middle-left .amap-info-sharp,.middle-left .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-left .amap-info-sharp:after{position:absolute;content:"";margin-left:0;border-right:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-left .amap-info-sharp:after{border-right:8px solid rgba(0,0,0,.5)}.amap-info-contentContainer.top-center,.amap-info-contentContainer.top-left,.amap-info-contentContainer.top-right{padding-top:8px}.amap-info-contentContainer.bottom-center,.amap-info-contentContainer.bottom-left,.amap-info-contentContainer.bottom-right{padding-bottom:8px}.amap-info-contentContainer.middle-right{padding-right:8px}.amap-info-contentContainer.middle-left{padding-left:8px}.amap-menu-outer{margin:0;padding:0;list-style-type:none}ul.amap-menu-outer li{height:35px;line-height:35px;word-break:break-all;padding:0 10px;font-size:12px;white-space:nowrap}ul.amap-menu-outer li a{text-decoration:none;font-size:13px;margin:0 5px;color:#000;padding:5px}ul.amap-menu-outer li:hover{background-color:#f3f3ee}.amap-overlay-text-container{display:block;width:auto;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fff;padding:2px 3px;border:1px solid #ccc;border-radius:3px}.amap-overlay-text-container.amap-overlay-text-empty{display:none}.amap-info-content-ie8{border:1px solid #9c9c9c}.amap-control{position:absolute;-webkit-tap-highlight-color:transparent}.amap-toolbar{background-color:#fff;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.5)}.amap-toolbar span{display:block;width:30px;height:30px;line-height:30px;text-align:center;border-radius:0 0 4px 4px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:20px}.amap-toolbar span:first-child{border-bottom:1px solid #eee;border-radius:4px 4px 0 0}.amap-toolbar span:hover{font-weight:bolder;background-color:#f0f0f0}.amap-scalecontrol{pointer-events:none;background-color:hsla(0,0%,100%,.5);border-radius:2px;user-select:none}.amap-scalecontrol .amap-scale-text{font-size:10px;text-align:center;transition:width .3s;user-select:none}.amap-scalecontrol .amap-scale-line{position:relative;height:8px;left:2px;user-select:none}.amap-scalecontrol .amap-scale-edgeleft,.amap-scalecontrol .amap-scale-edgeright,.amap-scalecontrol .amap-scale-middle{position:absolute;background-color:#333;overflow:hidden;box-sizing:content-box!important}.amap-scalecontrol .amap-scale-edgeright{width:1px;height:6px;border:1px solid #fff;transition:left .3s}.amap-scalecontrol .amap-scale-middle{height:2px;left:2px;top:2px;border-top:1px solid #fff;border-bottom:1px solid #fff;transition:width .3s}.amap-scalecontrol .amap-scale-edgeleft{width:1px;height:6px;border:1px solid #fff}.amap-controlbar,.amap-controlbar *{user-select:none}.amap-controlbar .amap-luopan{width:92px;height:92px;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -22px -30px no-repeat;background-size:348px 270px;user-select:none}.amap-luopan .amap-compass{top:46px;left:50%;position:absolute;margin:-24px;width:48px;height:48px;z-index:10;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -231px -26px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass.amap-compass-black{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -231px -79px;background-size:348px 270px}.amap-luopan .amap-compass .amap-pointers{position:absolute;width:30px;height:48px;top:0;left:9px;border:none;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -281px -26px no-repeat;background-size:348px 270px}.amap-pitchDown,.amap-pitchUp{width:30px;height:25.5px;position:absolute;top:3.5px;margin-left:-15px;left:50%;z-index:1;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -302.5px -49px no-repeat;background-size:348px 270px}.amap-pitchDown:hover,.amap-pitchUp:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -302.5px -23.5px;background-size:348px 270px}.amap-pitchDown{top:66px;transform:rotate(180deg);-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg)}.amap-rotateLeft,.amap-rotateRight{width:21px;height:52px;top:19px;position:absolute;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -301.5px -77px no-repeat;background-size:348px 270px}.amap-rotateLeft:hover,.amap-rotateRight:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -278.5px -76.5px;background-size:348px 270px}.amap-rotateLeft{left:5px}.amap-rotateRight{right:5px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-ctrl-icon-layer{width:30px;height:30px}.amap-ctrl-icon-layer,.amap-ctrl-list-layer{background-color:#fff;border-radius:3px;box-shadow:0 0 4px 1px rgba(0,0,0,.2)}.amap-ctrl-list-layer{position:absolute;top:0;right:0;overflow:hidden;z-index:1}.amap-ctrl-list-layer ul{overflow:hidden;list-style:none;margin:0;padding:5px 8px}.amap-ctrl-list-layer ul li{float:left;width:100%}.amap-ctrl-list-layer ul p{white-space:nowrap;font-size:12px;height:20px;line-height:20px;padding-left:5px;margin:0 10px}.amap-ctrl-list-layer input{float:left;height:20px;width:12px;margin:0 5px}.amap-ctrl-base-layer{border-bottom:1px solid #eee}.amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-popup{text-align:center;position:fixed;top:50%;left:50%;margin-left:-165px;margin-top:-170px}.amap-popup-content{vertical-align:middle;line-height:200px;overflow:hidden;background-color:#fff;border:solid;border-width:3px 1px;border-radius:5px;border-color:#ddf;margin:0 auto;text-align:center;height:340px}.amap-labellayers{position:absolute;top:0;left:0;transform-origin:0 0}.amap-indoormap-floorbar-control{position:absolute;width:40px;text-align:center;line-height:1.3em;border-radius:20px;box-shadow:0 0 3px 3px rgba(0,0,0,.1);background-color:#fff;margin-top:-100px}.amap-indoormap-floorbar-control .floor-list-box{max-height:160px;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;-webkit-user-select:none;-moz-user-select:none}.floor-list-box::-webkit-scrollbar{width:0!important;height:0!important}.amap-indoormap-floorbar-control ul{list-style:none;margin:0;padding:0 4px;width:40px;box-sizing:border-box}.amap-indoormap-floorbar-control ul li{height:32px;width:32px;border-radius:16px}.amap-indoormap-floorbar-control ul li:hover{background-color:#efefef}.amap-indoormap-floorbar-control ul li div{height:32px;text-align:center;line-height:32px;font-size:12px}.amap-indoormap-floorbar-control ul li.selected{color:#fff;background-color:#4196ff}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{height:32px;width:32px;margin:0 auto;border-radius:16px;position:relative}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;bottom:4px;left:0;right:0;width:0;height:0;border:7px solid transparent;border-top-color:#777}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;bottom:11px}.amap-indoormap-floorbar-control .floor-plus:hover:after{border-bottom-color:#222}.amap-indoormap-floorbar-control .floor-minus:hover:after{border-top-color:#222}.amap-indoormap-floorbar-control .floor-plus.disabled:after{border-bottom-color:#ddd}.amap-indoormap-floorbar-control .floor-minus.disabled:after{border-top-color:#ddd}.amap-indoormap-floorbar-control .floor-list-item.selected:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}'),-1!==(ni=0!==(ni=window.location.href).indexOf("http")&&window.parent&&window.parent!==window?window.parent.location.href:ni).indexOf("?")&&(ni=ni.substr(0,ni.indexOf("?"))),ni=encodeURIComponent(ni),zr=(Mt=config[16]||config[2].split(":")[0])+"://restapi.amap.com",F=(bt=Mt+"://"+config[2].split("://")[1])+"/theme/v1.3/markers/"+(Y.Support.Ue?"b":"n"),jt=Mt+"://webrd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x=[x]&y=[y]&z=[z]",It=Mt+"://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x=[x]&y=[y]&z=[z]",Et=Wt="",(St=document.currentScript&&document.currentScript.getAttribute("src")||location.host).startsWith("http")||(St=location.protocol+"//"+location.host),Ht=new URL(St).origin,window._AMapSecurityConfig&&(window._AMapSecurityConfig.securityJsCode?Wt=window._AMapSecurityConfig.securityJsCode||"":window._AMapSecurityConfig.serviceHost&&(Ro="",St=(Ro="https"===(Et=window._AMapSecurityConfig.serviceHost||"").split(":")[0]?Et.replace(/https:\/\/\S+?\//g,""):Et.replace(/http:\/\/\S+?\//g,""))&&Ro.split("/")[0],Ro=window.location.hostname,"_AMapService"!==St&&("127.0.0.1"===Ro||"localhost"===Ro?window.alert("使用 JSAPI 安全模式，代理服务请以_AMapService 作为一级路由"):"undefined"!=typeof console&&console.log("<AMap JSAPI> 使用 JSAPI 安全模式，代理服务请以_AMapService 作为一级路由"))));var Yo={key:config[0],host:config[2],domain:config[17],server:zr,protocol:Mt,version:config[4],adcode:config[6],callback:config[5],appname:ni,client:bt,markers:F,pc:"http://gaode.com",mo:"http://m.amap.com",apiServer:Ht,workerUrl:"",YT:jt,qT:It,y_:Y.Support.$e?It:jt,v_:"\x3c!--v2.0--\x3e &copy "+(new Date).getFullYear()+" AutoNavi ",db:config[14]||"",JH:config[15]||"",jscode:Wt,gaodeserver:Et,vdataProxy:"",offlineServer:""};return Et=(new Date).getTime(),(Et=["platform=JS&s=rsv3&logversion=2.0&product=JsInit&key="+Yo.key,"t="+Et]).push("sdkversion=2.0"),Et.push("appname="+ni),Et.push("csid="+Y.Util.uuid()),Et.push("resolution="+window.screen.width+"*"+window.screen.height),Et.push("mob="+(Y.Support.$e?1:0)),Et.push("vt="+(Y.Support.isWebGL?1:0)),Et.push("dpr="+window.devicePixelRatio),Et.push("scale="+(Y.Support.Ue?2:1)),Et.push("detect="+Y.Support.Ue),Yo.jscode&&Et.push("jscode="+Yo.jscode),function(t){return t[1]&&(_e=t[1].slice(-2),We=t[1].slice(0,4)),{Map:Ye,ImageLayer:qe,createDefaultLayer:Rr,TileLayer:Xi,NebulaLayer:Ai,Buildings:Ir,Indoor:bo,SkyLayer:is,DistrictLayer:So,CanvasLayer:tr,CustomLayer:rr,GLCustomLayer:Wr,LabelsLayer:qn,MassMarks:ur,Event:Y.Event,version:"2.0-20230823",plugin:No,LngLat:Y.LngLat,Pixel:Y.Pixel,Size:Y.Size,Icon:Ws,Bounds:lt,extent:ct,Marker:ce,Text:vr,InfoWindow:we,ContextMenu:Ee,LabelMarker:gr,Polygon:Dh,Rectangle:jh,Ellipse:Wh,Circle:_h,CircleMarker:Jh,Polyline:to,BezierCurve:uo,OverlayGroup:qr,VectorLayer:Rn,LayerGroup:_r,Control:wr,DomUtil:w,Util:Y.Util,GeometryUtil:Y.GeometryUtil,Browser:Cr,UA:{ie:Cr.ie,ie9:Cr.ie9,ie11:Cr.ie11,mobile:Cr.mobile,android:Cr.android,ios:Cr.ios},PlaneGeometryUtil:Y.PlaneGeometryUtil,getConfig:_o,setConfig:Uo,WebService:je,extend:Y.extend,Http:qt,addCss:s,BuryPoint:Or,lcs:Y.lcs,convertFrom:Fe,Heatmap:Yr,IndoorMap:Mo,Mapbox:Hr,BuildingLayer:Ir}}});var __AMap_callback=AMap.getConfig().callback,tryGetCallback,tryCallback;return __AMap_callback&&(tryGetCallback=function(){var c=__AMap_callback.split("."),context=window;do{if(!(context=context[c.shift()]))return null}while(c.length);return context||null},tryCallback=function(isFinalTry){var func=tryGetCallback();if(func){if("function"!=typeof func)throw new Error(__AMap_callback+" is not a function!");setTimeout(func,1)}else if(isFinalTry)throw new Error("Can not find callback: "+__AMap_callback+", try define it before load JsApi!")},document.body&&tryGetCallback()?tryCallback():setTimeout(function(){tryCallback(!0)},1)),AMap});
(typeof _cssload_=="function")&&_cssload_("logo",".amap-logo{display:block!important;pointer-events:none;}",true)})(["dc695ce0c94242cb2f1eaddfe6ba580e",[115.423411,39.442758,117.514625,41.060816,116.405285,39.904989],"http://localhost:6001",1,"2.0.5.11",null,"110000","WebGLRender",true,false,false,true,"20230103011500-20201123-1",true,"D","3_23_07_14_00","http","localhost:6001"])
_jsload_('WebGLRender', '(function(){"use strict";var extendStatics=function(e,r){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)if(r.hasOwnProperty(t))e[t]=r[t]};return extendStatics(e,r)};function __extends(e,r){extendStatics(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var __assign=function(){__assign=Object.assign||function e(r){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))r[n]=t[n]}return r};return __assign.apply(this,arguments)};function __decorate(e,r,t,i){var a=arguments.length,n=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i,o;if(typeof Reflect==="object"&&typeof Reflect.yV==="function")n=Reflect.yV(e,r,t,i);else for(var f=e.length-1;f>=0;f--)if(o=e[f])n=(a<3?o(n):a>3?o(r,t,n):o(r,t))||n;return a>3&&n&&Object.defineProperty(r,t,n),n}function __spreadArrays(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var i=Array(e),a=0,r=0;r<t;r++)for(var n=arguments[r],o=0,f=n.length;o<f;o++,a++)i[a]=n[o];return i}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(e){var r=hasOwnProperty.call(e,symToStringTag),t=e[symToStringTag];try{e[symToStringTag]=undefined;var i=true}catch(e){}var a=nativeObjectToString.call(e);if(i){if(r){e[symToStringTag]=t}else{delete e[symToStringTag]}}return a}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag$1=Symbol?Symbol.toStringTag:undefined;function baseGetTag(e){if(e==null){return e===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return e!=null&&typeof e=="object"}var symbolTag="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag}function arrayMap(e,r){var t=-1,i=e==null?0:e.length,a=Array(i);while(++t<i){a[t]=r(e[t],t,e)}return a}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(e){if(typeof e=="string"){return e}if(isArray(e)){return arrayMap(e,baseToString)+""}if(isSymbol(e)){return symbolToString?symbolToString.call(e):""}var r=e+"";return r=="0"&&1/e==-INFINITY?"-0":r}var reWhitespace=/\\s/;function trimmedEndIndex(e){var r=e.length;while(r--&&reWhitespace.test(e.charAt(r))){}return r}var reTrimStart=/^\\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}function isObject(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var NAN=0/0;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(e){if(typeof e=="number"){return e}if(isSymbol(e)){return NAN}if(isObject(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(r)?r+"":r}if(typeof e!="string"){return e===0?e:+e}e=baseTrim(e);var t=reIsBinary.test(e);return t||reIsOctal.test(e)?freeParseInt(e.slice(2),t?2:8):reIsBadHex.test(e)?NAN:+e}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===INFINITY$1||e===-INFINITY$1){var r=e<0?-1:1;return r*MAX_INTEGER}return e===e?e:0}function toInteger(e){var r=toFinite(e),t=r%1;return r===r?t?r-t:r:0}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject(e)){return false}var r=baseGetTag(e);return r==funcTag||r==genTag||r==asyncTag||r==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(e){if(e!=null){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject(e)||isMasked(e)){return false}var r=isFunction(e)?reIsNative:reIsHostCtor;return r.test(toSource(e))}function getValue(e,r){return e==null?undefined:e[r]}function getNative(e,r){var t=getValue(e,r);return baseIsNative(t)?t:undefined}var WeakMap=getNative(root,"WeakMap");function apply(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(t){var i=0,a=0;return function(){var e=nativeNow(),r=HOT_SPAN-(e-a);a=e;if(r>0){if(++i>=HOT_COUNT){return arguments[0]}}else{i=0}return t.apply(undefined,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");e({},"",{});return e}catch(e){}}();var baseSetToString=!defineProperty?identity:function(e,r){return defineProperty(e,"toString",{configurable:true,enumerable:false,value:constant(r),writable:true})};var setToString=shortOut(baseSetToString);function arrayEach(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e}function baseFindIndex(e,r,t,i){var a=e.length,n=t+(i?1:-1);while(i?n--:++n<a){if(r(e[n],n,e)){return n}}return-1}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(e,r){var t=typeof e;r=r==null?MAX_SAFE_INTEGER:r;return!!r&&(t=="number"||t!="symbol"&&reIsUint.test(e))&&(e>-1&&e%1==0&&e<r)}function baseAssignValue(e,r,t){if(r=="__proto__"&&defineProperty){defineProperty(e,r,{configurable:true,enumerable:true,value:t,writable:true})}else{e[r]=t}}function eq(e,r){return e===r||e!==e&&r!==r}var objectProto$3=Object.prototype;var hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(e,r,t){var i=e[r];if(!(hasOwnProperty$2.call(e,r)&&eq(i,t))||t===undefined&&!(r in e)){baseAssignValue(e,r,t)}}function copyObject(e,r,t,i){var a=!t;t||(t={});var n=-1,o=r.length;while(++n<o){var f=r[n];var s=i?i(t[f],e[f],f,t,e):undefined;if(s===undefined){s=e[f]}if(a){baseAssignValue(t,f,s)}else{assignValue(t,f,s)}}return t}var nativeMax=Math.max;function overRest(n,o,f){o=nativeMax(o===undefined?n.length-1:o,0);return function(){var e=arguments,r=-1,t=nativeMax(e.length-o,0),i=Array(t);while(++r<t){i[r]=e[o+r]}r=-1;var a=Array(o+1);while(++r<o){a[r]=e[r]}a[o]=f(i);return apply(n,this,a)}}function baseRest(e,r){return setToString(overRest(e,r,identity),e+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction(e)}function isIterateeCall(e,r,t){if(!isObject(t)){return false}var i=typeof r;if(i=="number"?isArrayLike(t)&&isIndex(r,t.length):i=="string"&&r in t){return eq(t[r],e)}return false}function createAssigner(f){return baseRest(function(e,r){var t=-1,i=r.length,a=i>1?r[i-1]:undefined,n=i>2?r[2]:undefined;a=f.length>3&&typeof a=="function"?(i--,a):undefined;if(n&&isIterateeCall(r[0],r[1],n)){a=i<3?undefined:a;i=1}e=Object(e);while(++t<i){var o=r[t];if(o){f(e,o,t,a)}}return e})}var objectProto$4=Object.prototype;function isPrototype(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||objectProto$4;return e===t}function baseTimes(e,r){var t=-1,i=Array(e);while(++t<e){i[t]=r(t)}return i}var argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;var propertyIsEnumerable=objectProto$5.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$3.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")};function stubFalse(){return false}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Zb:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(r){return function(e){return r(e)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb("util").types;if(e){return e}return freeProcess&&freeProcess.tg&&freeProcess.tg("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.rg;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(e,r){var t=isArray(e),i=!t&&isArguments(e),a=!t&&!i&&isBuffer(e),n=!t&&!i&&!a&&isTypedArray(e),o=t||i||a||n,f=o?baseTimes(e.length,String):[],s=f.length;for(var u in e){if((r||hasOwnProperty$4.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||isIndex(u,s)))){f.push(u)}}return f}function overArg(r,t){return function(e){return r(t(e))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(e){if(!isPrototype(e)){return nativeKeys(e)}var r=[];for(var t in Object(e)){if(hasOwnProperty$5.call(e,t)&&t!="constructor"){r.push(t)}}return r}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;var assign=createAssigner(function(e,r){if(isPrototype(r)||isArrayLike(r)){copyObject(r,keys(r),e);return}for(var t in r){if(hasOwnProperty$6.call(r,t)){assignValue(e,t,r[t])}}});var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(e,r){if(isArray(e)){return false}var t=typeof e;if(t=="number"||t=="symbol"||t=="boolean"||e==null||isSymbol(e)){return true}return reIsPlainProp.test(e)||!reIsDeepProp.test(e)||r!=null&&e in Object(r)}var nativeCreate=getNative(Object,"create");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(e){var r=this.has(e)&&delete this.ng[e];this.size-=r?1:0;return r}var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto$9=Object.prototype;var hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(e){var r=this.ng;if(nativeCreate){var t=r[e];return t===HASH_UNDEFINED?undefined:t}return hasOwnProperty$7.call(r,e)?r[e]:undefined}var objectProto$a=Object.prototype;var hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(e){var r=this.ng;return nativeCreate?r[e]!==undefined:hasOwnProperty$8.call(r,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,r){var t=this.ng;this.size+=this.has(e)?0:1;t[e]=nativeCreate&&r===undefined?HASH_UNDEFINED$1:r;return this}function Hash(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.ng=[];this.size=0}function assocIndexOf(e,r){var t=e.length;while(t--){if(eq(e[t][0],r)){return t}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(e){var r=this.ng,t=assocIndexOf(r,e);if(t<0){return false}var i=r.length-1;if(t==i){r.pop()}else{splice.call(r,t,1)}--this.size;return true}function listCacheGet(e){var r=this.ng,t=assocIndexOf(r,e);return t<0?undefined:r[t][1]}function listCacheHas(e){return assocIndexOf(this.ng,e)>-1}function listCacheSet(e,r){var t=this.ng,i=assocIndexOf(t,e);if(i<0){++this.size;t.push([e,r])}else{t[i][1]=r}return this}function ListCache(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0;this.ng={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function getMapData(e,r){var t=e.ng;return isKeyable(r)?t[typeof r=="string"?"string":"hash"]:t.map}function mapCacheDelete(e){var r=getMapData(this,e)["delete"](e);this.size-=r?1:0;return r}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,r){var t=getMapData(this,e),i=t.size;t.set(e,r);this.size+=t.size==i?0:1;return this}function MapCache(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(a,n){if(typeof a!="function"||n!=null&&typeof n!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var o=function(){var e=arguments,r=n?n.apply(this,e):e[0],t=o.cache;if(t.has(r)){return t.get(r)}var i=a.apply(this,e);o.cache=t.set(r,i)||t;return i};o.cache=new(memoize.Cache||MapCache);return o}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var r=memoize(e,function(e){if(t.size===MAX_MEMOIZE_SIZE){t.clear()}return e});var t=r.cache;return r}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(e){var a=[];if(e.charCodeAt(0)===46){a.push("")}e.replace(rePropName,function(e,r,t,i){a.push(t?i.replace(reEscapeChar,"$1"):r||e)});return a});function toString(e){return e==null?"":baseToString(e)}function castPath(e,r){if(isArray(e)){return e}return isKey(e,r)?[e]:stringToPath(toString(e))}var INFINITY$2=1/0;function toKey(e){if(typeof e=="string"||isSymbol(e)){return e}var r=e+"";return r=="0"&&1/e==-INFINITY$2?"-0":r}function baseGet(e,r){r=castPath(r,e);var t=0,i=r.length;while(e!=null&&t<i){e=e[toKey(r[t++])]}return t&&t==i?e:undefined}function get(e,r,t){var i=e==null?undefined:baseGet(e,r);return i===undefined?t:i}function arrayPush(e,r){var t=-1,i=r.length,a=e.length;while(++t<i){e[a+t]=r[t]}return e}function stackClear(){this.ng=new ListCache;this.size=0}function stackDelete(e){var r=this.ng,t=r["delete"](e);this.size=r.size;return t}function stackGet(e){return this.ng.get(e)}function stackHas(e){return this.ng.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,r){var t=this.ng;if(t instanceof ListCache){var i=t.ng;if(!Map||i.length<LARGE_ARRAY_SIZE-1){i.push([e,r]);this.size=++t.size;return this}t=this.ng=new MapCache(i)}t.set(e,r);this.size=t.size;return this}function Stack(e){var r=this.ng=new ListCache(e);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(e,r){var t=-1,i=e==null?0:e.length,a=0,n=[];while(++t<i){var o=e[t];if(r(o,t,e)){n[a++]=o}}return n}function stubArray(){return[]}var objectProto$b=Object.prototype;var propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(r){if(r==null){return[]}r=Object(r);return arrayFilter(nativeGetSymbols(r),function(e){return propertyIsEnumerable$1.call(r,e)})};function baseGetAllKeys(e,r,t){var i=r(e);return isArray(e)?i:arrayPush(i,t(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols)}var DataView=getNative(root,"DataView");var Promise$1=getNative(root,"Promise");var Set=getNative(root,"Set");var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]";var dataViewTag$1="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function(e){var r=baseGetTag(e),t=r==objectTag$1?e.constructor:undefined,i=t?toSource(t):"";if(i){switch(i){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return r}}var getTag$1=getTag;var Uint8Array$1=root.Uint8Array;var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){this.ng.set(e,HASH_UNDEFINED$2);return this}function setCacheHas(e){return this.ng.has(e)}function SetCache(e){var r=-1,t=e==null?0:e.length;this.ng=new MapCache;while(++r<t){this.add(e[r])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)){return true}}return false}function cacheHas(e,r){return e.has(r)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,r,t,i,a,n){var o=t&COMPARE_PARTIAL_FLAG,f=e.length,s=r.length;if(f!=s&&!(o&&s>f)){return false}var u=n.get(e);var l=n.get(r);if(u&&l){return u==r&&l==e}var v=-1,c=true,h=t&COMPARE_UNORDERED_FLAG?new SetCache:undefined;n.set(e,r);n.set(r,e);while(++v<f){var d=e[v],_=r[v];if(i){var g=o?i(_,d,v,r,e,n):i(d,_,v,e,r,n)}if(g!==undefined){if(g){continue}c=false;break}if(h){if(!arraySome(r,function(e,r){if(!cacheHas(h,r)&&(d===e||a(d,e,t,i,n))){return h.push(r)}})){c=false;break}}else if(!(d===_||a(d,_,t,i,n))){c=false;break}}n["delete"](e);n["delete"](r);return c}function mapToArray(e){var t=-1,i=Array(e.size);e.forEach(function(e,r){i[++t]=[r,e]});return i}function setToArray(e){var r=-1,t=Array(e.size);e.forEach(function(e){t[++r]=e});return t}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]";var arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]";var symbolProto$1=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(e,r,t,i,a,n,o){switch(t){case dataViewTag$2:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset){return false}e=e.buffer;r=r.buffer;case arrayBufferTag$1:if(e.byteLength!=r.byteLength||!n(new Uint8Array$1(e),new Uint8Array$1(r))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+e,+r);case errorTag$1:return e.name==r.name&&e.message==r.message;case regexpTag$1:case stringTag$1:return e==r+"";case mapTag$2:var f=mapToArray;case setTag$2:var s=i&COMPARE_PARTIAL_FLAG$1;f||(f=setToArray);if(e.size!=r.size&&!s){return false}var u=o.get(e);if(u){return u==r}i|=COMPARE_UNORDERED_FLAG$1;o.set(e,r);var l=equalArrays(f(e),f(r),i,a,n,o);o["delete"](e);return l;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(e)==symbolValueOf.call(r)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$c=Object.prototype;var hasOwnProperty$9=objectProto$c.hasOwnProperty;function equalObjects(e,r,t,i,a,n){var o=t&COMPARE_PARTIAL_FLAG$2,f=getAllKeys(e),s=f.length,u=getAllKeys(r),l=u.length;if(s!=l&&!o){return false}var v=s;while(v--){var c=f[v];if(!(o?c in r:hasOwnProperty$9.call(r,c))){return false}}var h=n.get(e);var d=n.get(r);if(h&&d){return h==r&&d==e}var _=true;n.set(e,r);n.set(r,e);var g=o;while(++v<s){c=f[v];var y=e[c],m=r[c];if(i){var p=o?i(m,y,c,r,e,n):i(y,m,c,e,r,n)}if(!(p===undefined?y===m||a(y,m,t,i,n):p)){_=false;break}g||(g=c=="constructor")}if(_&&!g){var b=e.constructor,x=r.constructor;if(b!=x&&("constructor"in e&&"constructor"in r)&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)){_=false}}n["delete"](e);n["delete"](r);return _}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]";var objectProto$d=Object.prototype;var hasOwnProperty$a=objectProto$d.hasOwnProperty;function baseIsEqualDeep(e,r,t,i,a,n){var o=isArray(e),f=isArray(r),s=o?arrayTag$1:getTag$1(e),u=f?arrayTag$1:getTag$1(r);s=s==argsTag$2?objectTag$2:s;u=u==argsTag$2?objectTag$2:u;var l=s==objectTag$2,v=u==objectTag$2,c=s==u;if(c&&isBuffer(e)){if(!isBuffer(r)){return false}o=true;l=false}if(c&&!l){n||(n=new Stack);return o||isTypedArray(e)?equalArrays(e,r,t,i,a,n):equalByTag(e,r,s,t,i,a,n)}if(!(t&COMPARE_PARTIAL_FLAG$3)){var h=l&&hasOwnProperty$a.call(e,"__wrapped__"),d=v&&hasOwnProperty$a.call(r,"__wrapped__");if(h||d){var _=h?e.value():e,g=d?r.value():r;n||(n=new Stack);return a(_,g,t,i,n)}}if(!c){return false}n||(n=new Stack);return equalObjects(e,r,t,i,a,n)}function baseIsEqual(e,r,t,i,a){if(e===r){return true}if(e==null||r==null||!isObjectLike(e)&&!isObjectLike(r)){return e!==e&&r!==r}return baseIsEqualDeep(e,r,t,i,baseIsEqual,a)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,r,t,i){var a=t.length,n=a,o=!i;if(e==null){return!n}e=Object(e);while(a--){var f=t[a];if(o&&f[2]?f[1]!==e[f[0]]:!(f[0]in e)){return false}}while(++a<n){f=t[a];var s=f[0],u=e[s],l=f[1];if(o&&f[2]){if(u===undefined&&!(s in e)){return false}}else{var v=new Stack;if(i){var c=i(u,l,s,e,r,v)}if(!(c===undefined?baseIsEqual(l,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,i,v):c)){return false}}}return true}function isStrictComparable(e){return e===e&&!isObject(e)}function getMatchData(e){var r=keys(e),t=r.length;while(t--){var i=r[t],a=e[i];r[t]=[i,a,isStrictComparable(a)]}return r}function matchesStrictComparable(r,t){return function(e){if(e==null){return false}return e[r]===t&&(t!==undefined||r in Object(e))}}function baseMatches(r){var t=getMatchData(r);if(t.length==1&&t[0][2]){return matchesStrictComparable(t[0][0],t[0][1])}return function(e){return e===r||baseIsMatch(e,r,t)}}function baseHasIn(e,r){return e!=null&&r in Object(e)}function hasPath(e,r,t){r=castPath(r,e);var i=-1,a=r.length,n=false;while(++i<a){var o=toKey(r[i]);if(!(n=e!=null&&t(e,o))){break}e=e[o]}if(n||++i!=a){return n}a=e==null?0:e.length;return!!a&&isLength(a)&&isIndex(o,a)&&(isArray(e)||isArguments(e))}function hasIn(e,r){return e!=null&&hasPath(e,r,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(t,i){if(isKey(t)&&isStrictComparable(i)){return matchesStrictComparable(toKey(t),i)}return function(e){var r=get(e,t);return r===undefined&&r===i?hasIn(e,t):baseIsEqual(i,r,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(r){return function(e){return e==null?undefined:e[r]}}function basePropertyDeep(r){return function(e){return baseGet(e,r)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){if(typeof e=="function"){return e}if(e==null){return identity}if(typeof e=="object"){return isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e)}return property(e)}function createBaseFor(s){return function(e,r,t){var i=-1,a=Object(e),n=t(e),o=n.length;while(o--){var f=n[s?o:++i];if(r(a[f],f,a)===false){break}}return e}}var baseFor=createBaseFor();function baseForOwn(e,r){return e&&baseFor(e,r,keys)}function createBaseEach(n,o){return function(e,r){if(e==null){return e}if(!isArrayLike(e)){return n(e,r)}var t=e.length,i=o?t:-1,a=Object(e);while(o?i--:++i<t){if(r(a[i],i,a)===false){break}}return e}}var baseEach=createBaseEach(baseForOwn);function castFunction(e){return typeof e=="function"?e:identity}function forEach(e,r){var t=isArray(e)?arrayEach:baseEach;return t(e,castFunction(r))}function arrayEvery(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(!r(e[t],t,e)){return false}}return true}function baseEvery(e,i){var a=true;baseEach(e,function(e,r,t){a=!!i(e,r,t);return a});return a}function every(e,r,t){var i=isArray(e)?arrayEvery:baseEvery;if(t&&isIterateeCall(e,r,t)){r=undefined}return i(e,baseIteratee(r))}function createFind(o){return function(e,r,t){var i=Object(e);if(!isArrayLike(e)){var a=baseIteratee(r);e=keys(e);r=function(e){return a(i[e],e,i)}}var n=o(e,r,t);return n>-1?i[a?e[n]:n]:undefined}}var nativeMax$1=Math.max;function findIndex(e,r,t){var i=e==null?0:e.length;if(!i){return-1}var a=t==null?0:toInteger(t);if(a<0){a=nativeMax$1(i+a,0)}return baseFindIndex(e,baseIteratee(r),a)}var find=createFind(findIndex);function baseMap(e,i){var a=-1,n=isArrayLike(e)?Array(e.length):[];baseEach(e,function(e,r,t){n[++a]=i(e,r,t)});return n}function map(e,r){var t=isArray(e)?arrayMap:baseMap;return t(e,baseIteratee(r))}function isEqual(e,r){return baseIsEqual(e,r)}function isUndefined(e){return e===undefined}function baseSome(e,i){var a;baseEach(e,function(e,r,t){a=i(e,r,t);return!a});return!!a}function some(e,r,t){var i=isArray(e)?arraySome:baseSome;if(t&&isIterateeCall(e,r,t)){r=undefined}return i(e,baseIteratee(r))}var LocalZoom=13;var zoomRange=[2,26];var CONSTS={ID:"__id__",Rp:zoomRange[1],Mp:zoomRange[0],jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:360,t1:300,e1:30,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:zoomRange,icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,_2:true,zooms:zoomRange},text:{type:"billboard",direction:"top",offset:[0,0],zooms:zoomRange,style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],sp:4,Cd:200/256,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",ic:1,ud:13,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},Color:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:"sdf",RB:"sdfJson",FN:"version"};var StaticSourceID;(function(e){e["nebula"]="nebula";e["nebulaLabel"]="nebulaLabel"})(StaticSourceID||(StaticSourceID={}));var DangerousFontSize=24;var EnumTextureIndex;(function(e){e[e["dynamic"]=0]="dynamic";e[e["icon"]=1]="icon"})(EnumTextureIndex||(EnumTextureIndex={}));var TextureMaxLength=2;var ImageStatus;(function(e){e["BLOB"]="blob";e["TOLOAD"]="toload";e["LOADING"]="loading";e["LOADED"]="loaded";e["UNLOADED"]="unloaded";e["ERROR"]="error";e["RELOADING"]="reloading";e["UNCOMBINED"]="uncombined";e["COMBINING"]="combining";e["COMBINED"]="combined"})(ImageStatus||(ImageStatus={}));var ColorMode=function(){function e(e,r){this.Ci=e;this.mask=r}e.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771};e.tH=[true,true,true,true];e.iH=[false,false,false,false];e.disabled=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.iH);e.Mi=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.tH);e.Ri=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.zi=new e([e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.Si=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.C2=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ZERO],e.tH);return e}();var StencilMode=function(){function e(e,r,t){this.stencilFunc=e;this.stencilOp=r;this.stencilMask=t}e.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683};e.disable=new e({test:e.wi.ALWAYS,Li:0,mask:0},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.Ai=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.writeWithStencil=new e({test:e.wi.LESS,Li:240,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nH=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.$H=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.DH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.FH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.DECR],255);e.PH=new e({test:e.wi.ALWAYS,Li:255,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.HH=new e({test:e.wi.NOTEQUAL,Li:1,mask:1},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.js=new e({test:e.wi.NOTEQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nbStencil=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.outseaStencil=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.TE=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.FE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.ZERO],255);e.test=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.ZERO,e.wi.ZERO,e.wi.INCR],255);e.HE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.S2=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.M2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.w2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.T2=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);return e}();var globalInstance=typeof self===undefined?window:self;var assert=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}if(!Boolean(e)){console.log.apply(console,r)}};var URLObject=typeof window!=="undefined"?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}};var AbstractBaseValue=function(){function e(e){this.Oi=same;this.gl=e.gl;this.default=this.Fi();this.current=this.Fi();this.Pi=false}e.prototype.set=function(e){this.current=e};e.prototype.get=function(){return this.current};e.prototype.setDirty=function(){this.Pi=true};e.prototype.reset=function(){this.set(this.default)};e.prototype.ji=function(e){return this.Pi||!this.Oi(e,this.current)};return e}();var Blend=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.BLEND)}else{r.disable(r.BLEND)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var Viewport=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};r.prototype.set=function(e){var r=this.current;if(e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&!this.Pi){return}this.gl.viewport(e[0],e[1],e[2],e[3]);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthTest=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.DEPTH_TEST);r.depthFunc(r.LEQUAL)}else{r.disable(r.DEPTH_TEST)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.DEPTH_TEST,I2:this.gl.LESS}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthFunc(e.I2);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilTest=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.STENCIL_TEST)}else{r.disable(r.STENCIL_TEST)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilFunc(e.test,e.Li,e.mask);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilOp=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).stencilOp.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var CullFace=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.CULL_FACE)}else{r.disable(r.CULL_FACE)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendFunc(e[0],e[1]);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendFuncSeparate=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl.ONE;var r=this.gl.ZERO;return[e,r,e,r]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendFuncSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendEquation=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.FUNC_ADD};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendEquation(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendEquationSeparate=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendEquationSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var CullFaceSide=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return e.BACK};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.cullFace(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var FrontFace=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.CCW};r.prototype.set=function(e){if(!this.ji(e)&&!this.Pi){return}this.gl.frontFace(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 1};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearDepth(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ColorClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[0,0,0,0]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).clearColor.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearStencil(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ColorMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[true,true,true,true]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).colorMask.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return true};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthMask(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 65535};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilMask(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindFramebuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindProgram=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}if(this.current&&this.current!==e){this.current.Ni()}if(e){this.gl.useProgram(e.$i)}else{this.gl.useProgram(null)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ActiveTextureUnit=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.TEXTURE0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.activeTexture(this.gl.TEXTURE0+e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindTexture=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindTexture(r.TEXTURE_2D,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var AbstractFramebufferAttachment=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e)||this;t.context=e;t.parent=r;return t}return e}(AbstractBaseValue);var ColorAttachment=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;var t=this.context.bindFramebuffer.current;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);this.context.bindFramebuffer.set(t);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteTexture(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(AbstractFramebufferAttachment);var DepthAttachment=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteRenderbuffer(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(AbstractFramebufferAttachment);var BindArrayBuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(e&&e.xe){assert(true,"WebGLBuffer deleted")}if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindElementArrayBuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var UnpackFlipYWebgl=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var Framebuffer=function(){function e(e,r,t){this.context=e;this.width=r;this.height=t;var i=e.gl;var a=i.createFramebuffer();if(!a){throw Error("createFramebuffer error")}this.framebuffer=a;this.Wi=new ColorAttachment(e,this);this.Gi=new DepthAttachment(e,this)}e.prototype.resize=function(e,r){this.Wi.Bi();this.Gi.Bi();this.width=e;this.height=r};e.prototype.destroy=function(){var e=this.context.gl;this.Wi.Bi();this.Gi.Bi();e.deleteFramebuffer(this.framebuffer)};e.prototype.get=function(){return this.framebuffer};return e}();var UglyBrowser=M["Support"];var Texture=function(){function e(e,r,t){this.context=e;this.texture=e.gl.createTexture();this.update(r,t)}e.prototype.update=function(e,r,t){var i=e.width,a=e.height;var n=r&&r.resize||(!this.size||this.size[0]!==i||this.size[1]!==a)&&!t;var o=this.context.gl;var f=r&&r.format||o.RGBA;this.Zi=Boolean(r&&r.Zi);o.bindTexture(o.TEXTURE_2D,this.texture);if(r&&r.Yi){o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)}if(r&&r.flipY){this.context.hB.set(true)}else{this.context.hB.set(false)}if(n){this.size=[i,a];if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||UglyBrowser.imageBitmap&&e instanceof ImageBitmap){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e)}else{o.texImage2D(o.TEXTURE_2D,0,f,i,a,0,f,o.UNSIGNED_BYTE,e.data)}}else{var s=t||{x:0,y:0},u=s.x,l=s.y;if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||UglyBrowser.imageBitmap&&e instanceof ImageBitmap){o.texSubImage2D(o.TEXTURE_2D,0,u,l,o.RGBA,o.UNSIGNED_BYTE,e)}else{o.texSubImage2D(o.TEXTURE_2D,0,u,l,i,a,f,o.UNSIGNED_BYTE,e.data)}}if(this.Zi&&this.Vi()){o.generateMipmap(o.TEXTURE_2D)}if(r&&r.Yi){o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0)}o.bindTexture(o.TEXTURE_2D,null)};e.prototype.generateMipmap=function(){if(this.Vi()){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,this.texture);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}else{console.log("generateMipmap error")}};e.prototype.bind=function(e,r,t){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture);if(r&&r!==this.Xi){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r);this.Xi=r}if(t&&t!==this.Hi){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t);this.Hi=t}if(e&&e!==this.wrap){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e);this.wrap=e}};e.prototype.Vi=function(){return Math.log(this.size[0])/Math.LN2%1===0&&Math.log(this.size[1])/Math.LN2%1===0};e.prototype.destroy=function(){var e=this.context.gl;e.deleteTexture(this.texture);this.texture=null};e.prototype.get=function(){return this.texture};return e}();function diffArray(e,r){if(e===r){return false}if(e.length!==r.length){return true}for(var t=0,i=e.length;t<i;t++){if(e[t]!==r[t]){return true}}return false}function diffType(e,r){if(typeof e!==typeof r){return true}if(typeof e==="object"){return Array.isArray(e)!==Array.isArray(r)}return false}function fastDiff(e,r){return e!==r}function diff(e,r){if(diffType(e,r)){return true}switch(typeof e){case"boolean":case"number":case"string":return fastDiff(e,r);case"object":return Array.isArray(e)?diffArray(e,r):fastDiff(e,r);default:return true}}function same(e,r){return!diff(e,r)}var Context=function(){function e(e){this.te=same;this.gl=e;this.Z_=this.gl.getSupportedExtensions();this.extensions={};this.be=new Viewport(this);this.ie=new Blend(this);this.ee=new BlendFuncSeparate(this);this.blendEquation=new BlendEquation(this);this.cullFace=new CullFace(this);this.he=new CullFaceSide(this);this.frontFace=new FrontFace(this);this.depthTest=new DepthTest(this);this.depthFunc=new DepthFunc(this);this.se=new StencilTest(this);this.stencilFunc=new StencilFunc(this);this.stencilOp=new StencilOp(this);this.stencilMask=new StencilMask(this);this.le=new StencilClear(this);this.ue=new ColorClear(this);this.ce=new DepthClear(this);this.bindFramebuffer=new BindFramebuffer(this);this.ge=new BindProgram(this);this.bindTexture=new BindTexture(this);this.activeTexture=new ActiveTextureUnit(this);this.de=new BindArrayBuffer(this);this.me=new BindElementArrayBuffer(this);this.colorMask=new ColorMask(this);this.depthMask=new DepthMask(this);this.ye={};this.hB=new UnpackFlipYWebgl(this)}e.prototype.clear=function(e){var r=0;var t=this.gl;if(e.color){r=r|t.COLOR_BUFFER_BIT}if(e.depth){r=r|t.DEPTH_BUFFER_BIT}if(e.stencil){r=r|t.STENCIL_BUFFER_BIT}if(r!==0){t.clear(r)}};e.prototype.Qi=function(e){if(this.te(e,ColorMode.Mi)){this.ie.set(false);this.colorMask.set(ColorMode.tH)}else if(this.te(e,ColorMode.disabled)){this.colorMask.set(ColorMode.iH)}else{this.ie.set(true);this.ee.set(e.Ci);this.colorMask.set(e.mask)}};e.prototype.ne=function(e){this.depthTest.set(e)};e.prototype.ae=function(e){if(this.te(e.stencilFunc.test,StencilMode.wi.ALWAYS)&&!e.stencilMask){this.se.set(false)}else{this.se.set(true);this.stencilFunc.set(e.stencilFunc);this.stencilOp.set(e.stencilOp);this.stencilMask.set(e.stencilMask)}};e.prototype.re=function(e){if(!e.enable){this.cullFace.set(false)}else{this.cullFace.set(e.enable);this.he.set(e.mode);this.frontFace.set(e.frontFace)}};e.prototype.reset=function(){this.ie.reset();this.ee.reset();this.blendEquation.reset();this.cullFace.reset();this.he.reset();this.frontFace.reset();this.depthTest.reset();this.se.reset();this.stencilFunc.reset();this.stencilOp.reset();this.stencilMask.reset();this.le.reset();this.ue.reset();this.ce.reset();this.bindFramebuffer.set(null)};e.prototype.createFramebuffer=function(e,r){return new Framebuffer(this,e,r)};e.prototype.createRenderbuffer=function(e,r){var t=this.gl;var i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,r);if(!i){throw Error("bindRenderbuffer error")}return i};e.prototype.createTexture=function(e,r){return new Texture(this,e,r)};e.prototype.fe=function(e,r,t){if(t===void 0){t="STATIC_DRAW"}var i=this.gl;var a=i.createBuffer();if(!a){throw Error("createBuffer error")}a.context=this;a.size=r;a.length=e.byteLength/r;var n=this.de.current;this.de.set(a);i.bufferData(i.ARRAY_BUFFER,e,i[t]);this.de.set(n);return a};e.prototype.ve=function(e){var r=this.gl;var t=r.createBuffer();if(!t){throw Error("createBuffer error")}t.context=this;t.length=e.length;t.type="int";t.G_=true;if(e instanceof Uint16Array){t.size=16}else{t.size=32}var i=this.me.current;this.me.set(t);r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW);this.me.set(i);return t};e.prototype.getSize=function(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}};e.prototype.getParameter=function(e){if(!this.ye[e]){this.ye[e]=this.gl.getParameter(this.gl[e])}return this.ye[e]};e.prototype.deleteBuffer=function(e){this.de.set(null);this.me.set(null);this.gl.deleteBuffer(e);e.xe=true};e.prototype.getExtension=function(e){if(this.extensions[e]){return this.extensions[e]}if(!this.Z_){console.error("WebGL: supportedExtension not exist");return}if(this.Z_.indexOf(e)<0){console.error("WebGL: supportedExtension not exist "+e);return}if(!this.extensions[e]){this.extensions[e]=this.gl.getExtension(e);if(!this.extensions[e]){console.error("WebGL: getExtension "+e+" failed")}}};e.prototype.setDirty=function(){this.ge.setDirty();this.bindTexture.setDirty();this.bindFramebuffer.setDirty();this.de.setDirty();this.me.setDirty();this.be.setDirty();this.activeTexture.setDirty();this.colorMask.setDirty();this.depthMask.setDirty();this.se.setDirty();this.le.setDirty();this.stencilMask.setDirty();this.stencilFunc.setDirty();this.stencilOp.setDirty();this.colorMask.setDirty();this.ie.setDirty();this.blendEquation.setDirty();this.ee.setDirty();this.depthTest.setDirty();this.cullFace.setDirty();this.he.setDirty();this.frontFace.setDirty();this.hB.setDirty()};return e}();var CullFaceMode=function(){function e(e,r,t){this.enable=e;this.mode=r;this.frontFace=t}e.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032};e.we=new e(false,e.wi.FRONT_AND_BACK,e.wi.CW);e._e=new e(true,e.wi.FRONT,e.wi.CW);e.back=new e(true,e.wi.BACK,e.wi.CW);return e}();var Util=AMap["Util"];var LayerRender=function(){function e(){this.hS=Util.stamp(this)}e.prototype.destroy=function(){};e.prototype.fH=function(e){var r=e.Ro;var t=e.localCoord.center;var i=[r[0]-t[0],r[1]-t[1]];var a=[r[0]-t[0],r[3]-t[1]];var n=[r[2]-t[0],r[1]-t[1]];var o=[r[2]-t[0],r[3]-t[1]];return __spreadArrays(i,n,a,n,o,a)};e.prototype.OH=function(e,r){if(e===void 0){e=false}if(!r){return StencilMode.nH}if(r&&!e){return StencilMode.DH}if(r&&e){return StencilMode.HH}};e.prototype.BH=function(e,r){if(e===void 0){e=false}if(!r){return StencilMode.$H}if(r&&!e){return StencilMode.FH}if(r&&e){return StencilMode.PH}};return e}();var Support=M["Support"];var scale=Support.scale;var LabelsRender=function(){function e(){this.Lz={De:[],sizes:[]};this._f=null;this.CG=0}e.prototype.Mz=function(e){var r=e.map,t=e.R_,i=e.z_,a=e.$i;this._map=r;this.Mf=t;this.ac=i;this._f=a};e.prototype.Ce=function(e,r,t,i){if(t===void 0){t={}}var a=CONSTS.ud,n=CONSTS.sp;var o=this._f;var f=e.viewState,s=e.size;if(!f){return i.iterator}var u=f.mvpMatrix,l=f.zoom,v=f.viewMode;var c=s[0],h=s[1];var d=i.Sa,_=i.from,g=_===void 0?"inner":_,y=i.opacity,m=y===void 0?1:y,p=i.offset,b=p===void 0?[0,0]:p,x=i.Sz,C=i.LF,S=C===void 0?{}:C;var M=i.iterator;var w=1;if(v==="3D"){w=e.map.getView().EF()}var k=t.Rz,T=t.buffer,I=t.od,A=t.zz;r.bindFramebuffer.set(null);r.be.set([0,0,c*scale,h*scale]);var $=k.pp;var F=T;var P=this.fd(i.A2),L=P.De,R=L===void 0?[]:L,E=P.sizes,O=E===void 0?[]:E;var D=a*n;var U=$.length;if(!F||!I){return M}if(U){r.ge.set(o);o.Ae({a_vertex:{type:"vec2",buffer:F,Re:D,offset:0},a_texcoord:{type:"vec2",buffer:F,Re:D,offset:2*n},a_origin:{type:"vec2",buffer:F,Re:D,offset:4*n},a_texIndex:{type:"float",buffer:F,Re:D,offset:6*n},a_type:{type:"float",buffer:F,Re:D,offset:7*n},a_zooms:{type:"vec2",buffer:F,Re:D,offset:8*n},a_height:{type:"float",buffer:F,Re:D,offset:10*n},a_highflag:{type:"float",buffer:F,Re:D,offset:12*n},a_visible:{type:"float",buffer:I,Re:0,offset:A[M]&&A[M].start}});var N=this.l_==="inner"?ColorMode.Ri:ColorMode.Si;for(var B=0;B<U;B++){var H=$[B];var z=H.start,G=z===void 0?0:z,j=H.end,V=j===void 0?0:j,W=H.dp;M++;if(!(V-G)){continue}var q=void 0;if(g==="labelsLayer"&&H.pd){var Z=this.ac.getImage(H.pd);if(Z.img){var Y=this.dd(r,Z),K=Y.texture,X=Y.size;if(K&&K.context){R[EnumTextureIndex.icon]=K;q=O.slice(0);q[EnumTextureIndex.icon*2]=X[0];q[EnumTextureIndex.icon*2+1]=X[1]}}}var J=H.vd;var Q=J.GV("fillColor");var ee=J.GV("strokeColor");var re=J.GV("backgroundColor");var te=J.GV("borderColor");o.Le({u_matrix:u,u_texture:{De:R,count:4},u_gl_size:[c,h],u_texsize:q?q:O,u_color:Q,u_strokeColor:ee,u_borderColor:te,u_gamma:J.GV("u_gamma"),u_borderBuffer:J.GV("u_borderBuffer"),u_buffer:J.GV("u_buffer"),u_backgroundColor:re,u_opacity:H.opacity*m,u_zoom:l,u_event:0,u_delta_center:d,u_offset:b,u_transform:[0,0,1,0],u_skyHeight:w,u_fontSizeFactor:J.GV("u_fontSizeFactor"),u_highlightFillColor:J.GV("u_highlightFillColor"),u_highlightStrokeColor:J.GV("u_highlightStrokeColor")});o.Pe((V-G)/a,G/a,undefined,undefined,S.depthTest,N)}}return M};e.prototype.Cz=function(e,r,t,i,a){var n=this._f;var o=CONSTS.sp,f=CONSTS.ud;var s=e.viewState,u=e.size;var l=s.zoom||zoomRange[1];var v=s.mvpMatrix||null;var c=u[0],h=u[1];var d=a.Az,_=a.Iz,g=a.centerCoord;var y=1;if(s.viewMode==="3D"){y=e.map.getView().EF()}if(!v){return}var m=i.$z||{};var p=m.pp,b=m.zs,x=m.od;var C=b&&b.buffer;var S=Math.pow(2,l-_);r.be.set([0,0,c*scale,h*scale]);var M=this.fd(a.A2),w=M.De,k=w===void 0?[]:w,T=M.sizes,I=T===void 0?[]:T;var A=p.length;var $=f*o;var F;var P;var L;var R;var E;var O;var D;var U=_>=l?S:1;var N=[0,0,U,0];if(!C||!x){return}if(A){r.ge.set(this._f);n.Ae({a_vertex:{type:"vec2",buffer:C,Re:$,offset:0},a_texcoord:{type:"vec2",buffer:C,Re:$,offset:2*o},a_origin:{type:"vec2",buffer:C,Re:$,offset:4*o},a_texIndex:{type:"float",buffer:C,Re:$,offset:6*o},a_type:{type:"float",buffer:C,Re:$,offset:7*o},a_zooms:{type:"vec2",buffer:C,Re:$,offset:8*o},a_height:{type:"float",buffer:C,Re:$,offset:10*o},a_angle:{type:"float",buffer:C,Re:$,offset:11*o},a_highflag:{type:"float",buffer:C,Re:$,offset:12*o},a_visible:{type:"float",buffer:x,Re:0,offset:0}})}var B;for(var H=0;H<A;H++){var z=p[H];F=z[0];P=z[1];L=z[11];R=z[12];E=z[13];D=z[14];if(!(R-L)){continue}for(var G=0,j=d;G<j.length;G++){var V=j[G];B=t[V];if(B&&V===E){O=B.Sa}}if(!O||S<.6){continue}if(!B){continue}O=[0,0];n.Le({u_matrix:v,u_delta_center:O,u_transform:N,u_texture:{De:k,count:k.length},u_gl_size:u,u_texsize:I,u_color:z[3],u_strokeColor:z[4],u_gamma:z[5],u_borderBuffer:z[7],u_buffer:z[8],u_backgroundColor:z[9],u_opacity:1,u_zoom:l,u_event:0,u_skyHeight:y,u_fontSizeFactor:1});n.Pe((R-L)/f,L/f,undefined,undefined,undefined,ColorMode.Si)}};e.prototype.gp=function(e,r){var t=e.context;var i=e.Jn();var a=r;var n=t.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);if(!a){return}i.Ce({u_texture:a},{a_pos:{type:"vec2",buffer:n,Re:8,offset:0},a_coord:{type:"vec2",buffer:n,Re:8,offset:4}},4,undefined,"TRIANGLE_FAN",undefined,ColorMode.Mi)};e.prototype.reset=function(){this.Df()};e.prototype.destroy=function(){if(this.Lz){for(var e=0,r=this.Lz.De;e<r.length;e++){var t=r[e];t.destroy()}delete this.Lz}};e.prototype.Dz=function(e,r,t){var i=t.start,a=i===void 0?0:i,n=t.dp,o=t.style;var f=6;var s=a;var u=0;var l;var v;for(var c=0,h=n;c<h.length;c++){var d=h[c];l=d.id;v=d.kd;var _=r[l];if(e.uf<a+u+v){e.ff(e.uf*2)}var g=e.value;if(_){var y=o[l]||{},m=y.showText,p=m===void 0?1:m,b=y.showIcon,x=b===void 0?true:b;var C=0;var S=Infinity;var M=-Infinity;var w=Infinity;var k=-Infinity;if(x){C=w=0;k=d.icon*f;while(C<k){g[s+u+C]=1;C++}}if(p){C=S=d.icon*f;M=(d.icon+d.Rd+d.bg)*f;while(C<M){g[s+u+C]=1;C++}}}u+=v}s+=u;return s};e.prototype.Df=function(){};e.prototype.fd=function(e){var r=[];var t=[];if(e){r[0]=e;t[0]=e.size[0];t[1]=e.size[1]}var i=this._map.so.texture;if(i){r.push(i);var a=i.size;t.push(a[0],a[1])}return{De:r,sizes:t}};e.prototype.dd=function(e,r){var t=e.gl;var i=r.img,a=r.width,n=r.height;var o=i;if(i&&!i.context){o=e.createTexture(i);o.bind(t.CLAMP_TO_EDGE,t.LINEAR,t.LINEAR);r.img=o}return{texture:o,size:[a,n]}};return e}();var transforms=M["transform"];var Support$1=M["Support"];var LabelsRenderUtil=M["LabelsRenderUtil"];var LabelsRenderDOMRender=function(){function e(){this._size=[0,0];this.Wz=1;var e=this.canvas=document.createElement("canvas");this.Nz=e.getContext("2d")}e.prototype.Ce=function(e,r,t,i,a){if(!e){return}this.wf=e;var n=e.size;this._size=n;var o=a.centerCoord,f=a.Uf,s=f===void 0?{}:f,u=a.$f,l=a.Sa,v=l===void 0?[0,0]:l;this.Tz();this.Pz();var c=e.viewState;var h=c.zoom;var d=c.viewMode;if(!this.Oz(h,r.zooms)){return}if(!this._map&&i){var _=c.projectionId;this._map=i;this.If=transforms[_];this._view=i.getView();this.ac=i.z_}if(!t["other"]){return}var g=t&&t.other,y=g.coords,m=g.style,p=g.Nf,b=g.Fz,x=b===void 0?[]:b;var C={viewState:c,size:this.wf.size,transform:this.If,view:this._view,viewMode:d,centerCoord:o};this.Bz(r);for(var S=0,M=x;S<M.length;S++){var w=M[S];for(var k=0;k<w.length;k++){var T=w[k];if(!s[T]){continue}var I=p[T]||{};var A=y[T]||{};var $=m[T]||{};var F=I.data.extData||{};var P=F.Sa||v||[0,0];var L=I.data||{};var R=L["txt"];var E=I.opts||{};var O=($.icon||[])[0]||{};var D=O.image;var U=isUndefined($.opacity)?1:E.opacity;var N=$.text;if(D&&O&&this.Oz(h,$.icon&&$.icon.zooms)){var B=this.ac["getImage"](D),H=B.img,z=B.width,G=B.height;var j={size:[z,G],opacity:U};var V=A.icon.origin;var W=A.icon.anchorOffset;var q=LabelsRenderUtil.wu(V[0]+P[0],V[1]+P[1],h,C);var Z=[q[0]+W[0],q[1]+W[1]];this.drawImage(H,O,Z,j)}if(R&&N&&this.Oz(h,$.text&&$.text.zooms)){var Y={opacity:U,padding:A.padding};var V=A.text.origin;var W=A.text.offset;var K=LabelsRenderUtil.wu(V[0]+P[0],V[1]+P[1],h,C);var X=N.style;var J=X.fontSize||12;var Q=[K[0]+W[0],K[1]+W[1]+J];this.Ez($.text,K,Y);var ee=R.length;var re=X.fold===false?100:6;var te=Math.ceil(ee/re);var ie=Math.floor(ee/te);var ae=3;for(var ne=0;ne<te;ne++){var oe=ne===te-1?ee-ne*ie:ie;var fe=R.substr(ne*ie,oe);this.gp(fe,N,Q,Y);var se=J*5/4+ae;Q[1]=Q[1]+se}}}}};e.prototype.Ez=function(e,r,t){var i=this.Nz;var a=Support$1.scale,n=a===void 0?1:a;var o=e.style.backgroundColor;var f=t.padding;var s=f.offsetX,u=f.offsetY,l=f.w,v=f.h;var c=r[0]+s;var h=r[1]+u;if(i&&o){i.fillStyle=o;i.fillRect(c*n,h*n,l*n,v*n)}};e.prototype.drawImage=function(e,r,t,i){var a=Support$1.scale;var n=this.Nz;if(!n||!r){return}var o=r["image"];var f=r["size"];var s=r["clipOrigin"];var u=r["angel"];var l=r["clipSize"];var v=i.opacity,c=v===void 0?1:v;var h=f[0];var d=f[1];var _=e.width||h;var g=e.height||d;var y=l[0];var m=l[1];var p=s[0];var b=s[1];if(isUndefined(y)){y=h}if(isUndefined(m)){m=d}if(y>_){y=_}if(m>g){m=g}n.globalAlpha=c*this.Wz;n.drawImage(e,p,b,y,m,t[0]*a,t[1]*a,h*a,d*a)};e.prototype.gp=function(e,r,t,i){var a=Support$1.scale,n=a===void 0?1:a;var o=this.Nz;if(!o){return}var f=r.style,s=f===void 0?{}:f;var u=i.opacity,l=u===void 0?1:u;var v=s.fontWeight,c=s.fontSize,h=s.fontFamily,d=h===void 0?"sans-serif":h,_=s.fillColor,g=s.strokeColor,y=s.strokeWidth,m=y===void 0?1:y,p=s.textAlign,b=p===void 0?"center":p,x=s.Gz,C=x===void 0?"Alphabetic":x;o.globalAlpha=l;o.globalAlpha=1;o.font=v+" "+c*n+"px "+d;o.textAlign=b;o.textBaseline=C;var S=t[0];var M=t[1];o.lineJoin="round";if(g&&m){o.strokeStyle=g;o.lineWidth=m;o.strokeText(e,S*n,M*n)}o.fillStyle=_;o.fillText(e,S*n,M*n)};e.prototype.Pz=function(){var e=this.canvas;var r=Support$1.scale;var t=this._size||[0,0],i=t[0],a=t[1]};e.prototype.Tz=function(){this.canvas.width=this.canvas.width};e.prototype.reset=function(){this.Pz()};e.prototype.destroy=function(){this.Pz()};e.prototype.Oz=function(e,r){if(r===void 0){r=[]}var t=r[0]||zoomRange[0];var i=r[1]||zoomRange[1];if(e>=t&&e<=i){return true}return false};e.prototype.Bz=function(e){var r=this._container;if(!r){r=this._container=this.F2(this._map)}var t=Support$1.scale;var i=e.zIndex,a=i===void 0?100:i,n=e.opacity,o=e.visible,f=e.zooms,s=f===void 0?zoomRange:f;var u=this.wf.viewState.zoom;var l=this.Oz(u,s);if(!o||!l||n===0){r.style.display="none"}else{r.style.display="block"}this.Wz=n;var v=this._size;r.setAttribute("width",v[0]*t+"px");r.setAttribute("height",v[1]*t+"px");r.style.width=v[0]+"px";r.style.height=v[1]+"px";r.style.zIndex=a+""};e.prototype.F2=function(e){var r=e.getContainer();var t=r.querySelector(".amap-layers");if(t){t.appendChild(this.canvas)}AMap.DomUtil.addClass(this.canvas,"amap-labellayers");return this.canvas};return e}();var SmartTypedArray=M["SmartTypedArray"];var LabelsLayerBaseRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.type="labelsLayer";e.wf=null;e.Ps={};e._viewMode="2D";e.Wf={};e.Bf={};e.TG={};e.uu=[0,0];return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!this.ac){this._map=a;this._view=a.getView();this.ac=a.z_;this.Mf=a.R_;this._viewMode=r.viewState.viewMode;this.fz=a.fS();if(!this._map.isDOMMode()){if(!this.Zz){this.Zz=new LabelsRender}}else{if(!this.Vz){this.Vz=new LabelsRenderDOMRender}}if(this.Zz){this.Zz.Mz({map:a,z_:a.z_,R_:a.R_,$i:e.Zn()})}}};e.prototype.Jz=function(){return{centerCoord:this.uu}};e.prototype.vi=function(e){if(this.fz){var r=this.fz.vi(e,"");return r}return null};e.prototype.destroy=function(){if(this.Zz){this.Zz.destroy();delete this.Zz}if(this.Vz){this.Vz.destroy();delete this.Vz}this.AG()};e.prototype.reset=function(){if(this.Zz){this.Zz.reset()}if(this.Vz){this.Vz.reset()}};e.prototype.Yz=function(e,r,t,i,a){this.Vz.Ce(e,r,t,i,a)};e.prototype.SG=function(){var e=typeof Int8Array!=="undefined";var r;if(e){r=new SmartTypedArray("uint8",5e5);r.value.fill(0)}return r};e.prototype.zG=function(e){if(!this.TG[e]){this.TG[e]={iterator:0}}var r=this.TG[e];if(!r.LG){r.LG=this.SG()}if(!r.zz){r.zz=[]}return this.TG[e]};e.prototype.AG=function(){var e=this.TG||{};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];delete t.zz;if(t.od){t.od.destroy();delete t.od}t.iterator=0;if(t.LG){t.LG.value.fill(0)}}}};return e}(LayerRender);var Util$1=AMap["Util"];var transforms$1=M["transform"];var lcs=M["geo"]["lcs"];var SmartArrayBuffer=M["SmartArrayBuffer"];var LabelsLayerRender=function(_){__extends(e,_);function e(){var e=_.call(this)||this;e.type="labelsLayer";e.l_="labelsLayer";return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!i||!r){return}_.prototype.Hz.call(this,e,r,t,i,a,n);this.wf=r;var o=r.viewState;var f=o.projectionId;this.If=transforms$1[f];var s=o.zoom;if(r&&n.visible&&n.opacity&&Util$1.dS(s,n.zooms)){if(!i.Nf){return}if(!this._map.isDOMMode()){var u=e.context;i.upload(u)}if(!i){return}var l=i.rp,v=i.buffer,c=i.zo;var h=o.centerCoord;this.uu=lcs.getLocalByCoord([h[0],h[1]]).center||[0,0];var d=this.Ps=i;this.Ps.lp=l.up;return d}return null};e.prototype.renderFrame=function(e,r,t,i,a){var n=this.fz;if(n){this.Wf=n.Uf;this.Bf=n.$f}if(!this._map){return}if(!this._map.isDOMMode()){this.Jh(e,t,r,i,a)}else{var o=this.Ps.zo;var f=Util$1.hp(o,this.wf);this.Yz(t,i,r,this._map,{Sa:f,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}};e.prototype.Jz=function(){var e=this.Ps.zo;var r=Util$1.hp(e,this.wf);var t={Sa:r,from:"labelsLayer",opacity:1,offset:[0,0],centerCoord:this.uu};return t};e.prototype.Jh=function(e,r,t,i,a){var n=this.Zz;var o=e.context;if(!t){return}if(!t["other"]){return}var f=t["other"],s=f.rp,u=f.buffer,l=f.zo;var v=Util$1.hp(l,r);if(!s||!s.up){return}this.AG();var c=this.zG(this.l_);var h=c.LG,d=c.od;var _=CONSTS.sp;var g=s&&s.pp;var y=g.length;var m=0;var p=0;var b=[];var x=this.Ps.style||{};for(var C=0;C<y;C++){var S=g[C];var M=S.dp||[];m=p;p=n.Dz(h,this.Wf,{start:m,dp:M,style:x});b.push({start:m,end:p})}if(d){d.update(h.value)}else{c.od=new SmartArrayBuffer(o,h.value,_)}c.zz=b;if(i.ce){e.context.clear({depth:true})}n.Ce(r,o,{Rz:s,buffer:u,od:c.od.buffer,zz:c.zz},{from:this.type,Sz:true,Sa:v,oo:e,LF:i,yZ:true,A2:a.P2})};return e}(LabelsLayerBaseRender);var utils=M["Util"];var LabelsRenderUtil$1=M["LabelsRenderUtil"];var labelsUtil=M["labelsUtil"];var vector=M["vector"];var SmartArrayBuffer$1=M["SmartArrayBuffer"];var SmartTypedArray$1=M["SmartTypedArray"];var rbush=M["rbush"];var Support$2=M["Support"];var LabelLine=function(){function e(){this._viewMode="2D";this.Gf=rbush();this.Cf=null;this.u_=null;this.Jp=0;this.bo=zoomRange[1];this.Xf={};this.Lf=new Uint8Array(1e5).fill(1);this.Qp=new SmartTypedArray$1("float32",1e5)}e.prototype.Ns=function(e,r){if(r===void 0){r={}}var t=r.DG,i=r.transform,a=r.view,n=r.centerCoord,o=r.FG,f=r.context,s=r.Uf,u=r.bounds,l=r.Iz;if(!this._map){this._map=r.map;this.b$=r.fz}this.wf=t;this.aa=t.viewState;this.If=i;this._view=a;this._viewMode=t.viewState.viewMode;this.uu=n;this.HG=o;this.Wf=s;this.bo=l;this.Kz();if(!this.Cf){this.Cf=f.fe(this.Lf,1)}this.Xf=r.tZ;this.Kf(e,r);this.Qf(this.Xf,r);return this.ip(f,r.DG)};e.prototype.destroy=function(){this.Kz();delete this.Xf;if(this.Cf&&this.Cf.context){this.Cf.context.deleteBuffer(this.Cf);delete this.Cf}};e.prototype.Kf=function(e,r){if(r===void 0){r={}}var t=this.aa;var i=(t||{}).zoom,a=i===void 0?zoomRange[1]:i;var n=this.If;var o=this.Xf;var f=CONSTS.Color;var s=r.bounds;if(!t){return}var u={};var l=t.rotation||0;for(var v=0,c=e;v<c.length;v++){var h=c[v];var d=h.rank;if(!u[d]){u[d]=[]}u[d].push(h)}var _=Object.keys(u);var g=_.length;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I;var A;var $;var F;var P;var L;var R;var E;var O;var D;var U=0;var N;var B;var H;var z=this._map.getMapState().Tf;for(var G=g-1;G>=0;G--){y=u[_[G]];for(var j=0,V=y;j<V.length;j++){var W=V[j];m=W.name;B=W.$G;p=W.CO;b=W.EG;N=W.BG;x=W.path;C=W.positionType||"absolute";S=W.zooms;M=W.rank;w=W.style;I=W.Bp;H=W.extData;k=LabelsRenderUtil$1.kz([[-W.Sa[0],-W.Sa[1]]],I,a,{centerCoord:this.uu})[0];T=W.key;k=LabelsRenderUtil$1.MG(I,k);var q=W.extData&&W.extData.mainkey&&W.extData.subkey?this._map.mapStyle.dn(W.extData.mainkey,W.extData.subkey,t.optimalZoom):null;A=w.fontSize;$=w.fillColor;F=w.strokeColor||f.Gp;if(q&&q[1]){A=q[1]?q[1].fontSize:w.fontSize;$=q[1].faceColor?q[1].faceColor.normalize():$;F=q[1].borderColor?q[1].borderColor.normalize():F}P=A*1.3;L=this.Zp(x,P,{zoom:a,transform:n,bounds:s,Bp:I,BG:N,positionType:C});U=0;for(var Z=0,Y=L;Z<Y.length;Z++){var K=Y[Z];R=K.length||0;if(R<2){continue}E={transform:n,fontSize:A,qp:P,zoom:a,name:m,CO:p,EG:b,BG:N,Sa:k,bounds:s,Tf:z,nF:l};O=this.Yp(K,E,U++<1);if(O.Id){if(!O.pos.length||!O.pos[0].length){continue}}D={name:m,$G:B,CO:p,rank:M,fontSize:A,fillColor:$,strokeColor:F,zooms:S,Sa:k,key:T,Bp:I,extData:H};this.Vp(O,o,D)}}}return o};e.prototype.Zp=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r=20}if(t===void 0){t={}}var i=CONSTS.Dp,a=i.Ad,n=i.Bd;var o=t.zoom,f=t.Bp,s=t.BG,u=t.positionType;var l=0;var v=0;var c=0;var h;var d;var _;var g=e.length-1;var y=[[]];var m=o<12?10:a;var p=this.aa;var b;var x;if(!p){return y}var C={viewState:p,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:u};for(var S=0;S<g-1;S+=2){var M=LabelsRenderUtil$1.kz([[e[S],e[S+1]],[e[S+2],e[S+3]]],f,o,{centerCoord:this.uu}),w=M[0],k=M[1];_=h;h=S===0?this._viewMode==="2D"?this.If.transform(w[0],w[1],o):LabelsRenderUtil$1.wu(w[0],w[1],o,C):d;d=this._viewMode==="2D"?this.If.transform(k[0],k[1],o):LabelsRenderUtil$1.wu(k[0],k[1],o,C);v=labelsUtil.Sd(h,d);c=l;l+=v;var T=v/r;var I=void 0;if(l>m){if(c/m<.3&&v/m>=2){h=labelsUtil.OG(h,d,m/v)}if(_){var A=vector.Ip(h,_);var $=vector.Ip(d,h);I=vector.Qj(A,$)}else{I=0}if(!b){b=labelsUtil.Ed([h,d],s);x=b}else{b=labelsUtil.Ed([h,d],s)}if(I<=n&&b===x&&(T>1||o<12&&T>=.6)){y[y.length-1].push(h)}else{y[y.length-1].push(h);b=x=undefined;var F=y[y.length-1];if(F[0]!==undefined){y.push([])}}if(S===g-3){y[y.length-1].push(d)}}}for(var S=0;S<y.length;S++){var P=y[S];var L=labelsUtil.Ed(P,s);if(L){y[S].reverse()}}return y};e.prototype.Yp=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r={}}if(t===void 0){t=false}var i=0;var a=CONSTS.Dp;var n=a.L2,o=a.e1;var f=r.transform,s=r.fontSize,u=s===void 0?12:s,l=r.zoom,v=l===void 0?20:l,c=r.BG,h=c===void 0?0:c,d=r.CO,_=d===void 0?[]:d,g=r.EG;var y={index:0,Id:0,pos:[],Dd:[],Pd:[],points:[],EG:[]};var m=r.qp||24;var p=e.length;var b=_.length;var x;var C=false;var S;var M;var w;var k;var T;var I;var A;var $;var F=0;var P=0;var L=false;var R={viewMode:this._viewMode,transform:f,view:this._view};while(F<p-1&&P<30){P++;var E=y.index;if(!y.pos[E]){y.pos[E]=[];y.Pd[E]=[];y.points[E]=[];y.Dd[E]=[]}var O=void 0;var D=void 0;var U=e[F+1];I=labelsUtil.getAngle(e[F],U);if(!L){O=e[F]}else{O=x}var N=_[y.Id];var B=g[N];var H=24;var z=u/H;var G=h==="ch";m=G?u*1.3:B&&B.char[4]*z*1.3;if(C){x=labelsUtil.jd(x,e[F],e[F+1],m)}else{x=labelsUtil.Od(O,I,m)}S=y.index;if(y.Id<b&&t){if(this._viewMode==="2D"){M=f.Xs(O[0],O[1],v);w=f.Xs(x[0],x[1],v)}else{M=LabelsRenderUtil$1.nt(O[0],O[1],v,R);w=LabelsRenderUtil$1.nt(x[0],x[1],v,R)}k=labelsUtil.Fd(M,w,1)[0];D=labelsUtil.Fd(O,x,1)[0];T=false;A=T?labelsUtil.Nd(x,O,G?"":"x"):labelsUtil.Nd(O,x,G?"":"x");y.pos[S].push(k);y.points[S].push(D);y.Pd[E].push(A);y.Id++}else{t=true;y.index++;y.Id=0;i++;F=this.zd(e,F,i*n+b*o);L=false;C=false;continue}if(y.Id===b-1){y.pos[S].$d=false;y.EG[S]=g}$=labelsUtil.Sd(x,U);if($<m){F++;C=true;L=true}else{L=true;C=false}}return y};e.prototype.Vp=function(e,r,t){if(e===void 0){e={}}if(t===void 0){t={}}var i=t.name,a=i===void 0?"":i,n=t.$G,o=n===void 0?[]:n,f=t.CO,s=f===void 0?[]:f,u=t.rank,l=u===void 0?1:u,v=t.fontSize,c=v===void 0?12:v,h=t.fillColor,d=t.strokeColor,_=t.zooms,g=t.Sa,y=t.key,m=t.Bp,p=t.extData,b=p===void 0?{}:p;var x=s.length;var C=e.pos.length;var S;var M;var w;var k;var T;var I=[];var A=[];var $=[];var F=false;var P=0;for(var L=0;L<C;L++){S=e.pos[L]||[];I=e.Pd[L]||[];$=e.EG[L]||[];M=S.$d;if(S.length===x){for(P=0;P<x;P++){w=M?x-1-P:P;k=S[w];if(!k||!this.Ud(I,P)){F=true;break}if(o&&o.length){T=a.substring.apply(a,o.slice(P,P+2))}else{T=a.substr(P,1)}var R={data:{id:utils.stamp(this),position:k,name:a,extData:{Sa:g,key:y,Bp:m,CO:s.slice(P,P+1),Lp:b.mainkey,Ap:b.subkey},txt:T,rank:l},opts:{type:"normal",angle:I[w]||0,zooms:_,text:{direction:"center",offset:[0,0],EG:$,style:{fontSize:c,fillColor:h,strokeColor:d,strokeWidth:2}}}};var E=this._map.getLayerByClass("AMap.MaskLayer");if(E){var O=E.getRender();if(O){if(!O.EH(R.data.position,this.wf)){return false}}}A.push(R)}if(!F){if(!r[y]){r[y]=[]}if(r[y].indexOf(A)<0){r[y].push(A)}}}}};e.prototype.zd=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r=0}if(t===void 0){t=0}var i=0;var a=e.length-1;var n=r;for(;n<a;n++){var o=e[n];var f=e[n+1];var s=labelsUtil.Sd(o,f);i+=s;if(i>=t){break}}return n};e.prototype.Ud=function(e,r){if(e===void 0){e=[]}if(r===void 0){r=0}var t=CONSTS.Dp.Bd;var i=r-1;if(i<0){return true}var a=e[r];var n=e[i];if(Math.abs(a-n)>=t){return false}return true};e.prototype.Qf=function(e,r){if(r===void 0){r={}}var t=this.aa;if(!t){return}var i=t&&t.zoom||20;var a=this.b$;var n=t.zoom,o=n===void 0?zoomRange[1]:n;var f=r.bounds;var s=this.Gf;var u;var l;var v;var c=false;var h=0;var d=[];for(var _ in e){if(e.hasOwnProperty(_)){v=e[_];for(var g=0,y=v;g<y.length;g++){var m=y[g];for(var p=0,b=m;p<b.length;p++){var x=b[p];var C=x.data;var S=x.opts;var M=C.txt;var w=C.position;var k=C.extData;var T=k.Bp;var I=LabelsRenderUtil$1.kz([vector.multiply(k.Sa,-1)],T,o,{centerCoord:this.uu})[0];var A=k.Lp?this._map.mapStyle.dn(k.Lp,k.Ap,i):null;var $=A&&A[1];var F=LabelsRenderUtil$1.gz(w,f);u=[];if(F&&$){var P=$&&$.fontSize;var L=LabelsRenderUtil$1.wu(w[0],w[1],o,{viewState:t,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:"relative"});var R=this.Xp(L,P);l=this.b$.iC(R,{padding:5,id:M,type:"road"});u=a.search(l);if(!u.length){u=s.search(l)}}if(!F||!$){c=true;break}var E=0;var O=u.length;while(E<O){if(this.Wf[u[E].id]||u[E].type==="road"){c=true;break}E++}if(l){d.push(l)}}if(!c){h+=m.length;for(var D=0,U=d;D<U.length;D++){var N=U[D];s.Xc(N)}d=[]}m.hide=c;c=false}}}this.Jp=h};e.prototype.ip=function(e,r){var t;var i=CONSTS.sp,a=CONSTS.Kp,n=CONSTS.ud;var o=this.Xf||{};var f=this.aa;var s=0;if(f&&this._map){var u=f.zoom;var l=0;var v=2;var c=this.bo;var h=this._map.getMapState().Af;var d=this.Jp;var _=n*6;var g=void 0;if(d*_>1e5){this.Qp.ff(d*_);g=this.Qp.value}else{g=this.Qp.value}var y=[];var m=0;var p=void 0;var b=void 0;var x=void 0;var C=void 0;var S=void 0;var M=void 0;var w=void 0;var k=void 0;var T=void 0;var I=void 0;var A=void 0;var $=void 0;var F=void 0;var P=void 0;var L=void 0;var R=void 0;var E=void 0;var O=void 0;var D=void 0;var U=void 0;var N=void 0;var B=void 0;var H=void 0;var z=void 0;var G=void 0;var j=void 0;var V=void 0;var W=void 0;var q=void 0;var Z=void 0;var Y=void 0;var K=void 0;var X=void 0;var J=void 0;var Q=void 0;var ee=void 0;var re=void 0;var te=void 0;var ie=void 0;var ae=void 0;var ne=void 0;var oe=void 0;var fe=void 0;var se=void 0;var ue=void 0;var le=void 0;var ve=void 0;var ce=void 0;var he=void 0;var de=0;var _e=void 0;var ge=void 0;var ye=void 0;var me=0;for(var pe in o){if(o.hasOwnProperty(pe)){var be=o[pe];m=be.length;for(var xe=0;xe<m;xe++){ge=be[xe];if(ge.hide){continue}for(var Ce=0,Se=ge;Ce<Se.length;Ce++){var Me=Se[Ce];p=Me.data;b=Me.opts;x=p.position;C=p.extData;ye=C.CO;_e=C.Bp;S=b.angle||0;M=b.zooms;w=b.text;N=w.EG||{};k=w.style;T=k.fontSize;I=k.fillColor;A=k.strokeColor;$=k.strokeWidth||0;F=this.td(T,$);P=F.gamma;L=F.ed;E=F.backgroundColor;O=F.strokeWidth;R=F.nd;D=1;for(var we=0;we<D;we++){U=ye;B=N[U]||{index:EnumTextureIndex.dynamic,char:(t=this._map.yH)===null||t===void 0?void 0:t.LB(pe)[U],pos:{startX:0,startY:0}};if(!B||!B.char){continue}H=B.index;z=B.char;G=x[we];j=x[we+1];if(!G||!j||!z){continue}V=M[0];W=M[1];q=T/a.size;Z=1;if(h&&c>u){q=q/Math.pow(2,c-u)}Y=z[0];K=z[1];X=z[2];J=z[3];Q=z[5];ee=z[6];re=a.buffer;var ke=T/24*(z[4]+CONSTS.ic);var Te={x:-ke/2,y:-T/2};if(Y>0&&K>0){Y+=re*2;K+=re*2;te=Te.x;ie=Te.y;ae=Z*(te+(X-re)*q);ne=Z*(te+(X-re+Y)*q);oe=Z*(ie-J*q);fe=Z*(ie+(K-J)*q);se=0;ue=0;se+=B.pos.startX;ue+=B.pos.startY;le=se+Q;ve=ue+ee;ce=H;g.set([ae,oe,le,ve,G,j,ce,v,V,W,l,S,me,ne,oe,le+Y,ve,G,j,ce,v,V,W,l,S,me,ae,fe,le,ve+K,G,j,ce,v,V,W,l,S,me,ae,fe,le,ve+K,G,j,ce,v,V,W,l,S,me,ne,oe,le+Y,ve,G,j,ce,v,V,W,l,S,me,ne,fe,le+Y,ve+K,G,j,ce,v,V,W,l,S,me],de);de+=_;he=s*n*6;y.push([T,[G,j],S,I,A,P,re,R,L,E,O,he,he+6*n,C.key,_e]);s++}}}}}}var Ie=this.u_;if(Ie){Ie.update(g)}else{Ie=this.u_=new SmartArrayBuffer$1(e,g,i)}return{pp:y,zs:Ie,od:this.Cf}}return{pp:[],od:null,zs:null}};e.prototype.Xp=function(e,r){if(r===void 0){r=12}var t=r*1.3;var i=r*1.3;var a=e[0],n=e[1];var o=[a-t/2,n-i/2];return{x:o[0],y:o[1],width:t,height:i}};e.prototype.td=function(e,r){if(e===void 0){e=12}if(r===void 0){r=0}var t=CONSTS.Cd,i=CONSTS.Ld,a=CONSTS.Color;var n=DangerousFontSize;var o=0;var f=e<12?t:i;if(r){r=r*Support$2.scale>10?10:r;o=f*(1-r/10.1)}var s=e>n||Support$2.scale>1?1.7:1.5;s=s*1.4142/e;var u=f-1/256*(Support$2.scale-1);return{gamma:s,nd:o,ed:u,backgroundColor:a.Gp,strokeWidth:r}};e.prototype.Kz=function(){if(this.Gf){this.Gf.clear()}};return e}();var _a;var SmartArrayBuffer$2=M["SmartArrayBuffer"];var Util$2=AMap["Util"];var NebulaLabelFormat=M["NebulaLabelFormat"];var MapboxLabelFormat=M["MapboxLabelFormat"];var labelsUtil$1=M["labelsUtil"];var LabelsRenderUtil$2=M["LabelsRenderUtil"];var vector$1=M["vector"];var transforms$2=M["transform"];var lcs$1=M["geo"]["lcs"];var LabelFormatMap=(_a={},_a[NebulaLabelFormat.id]=NebulaLabelFormat,_a[MapboxLabelFormat.id]=MapboxLabelFormat,_a["nebula"]=NebulaLabelFormat,_a);var TileLabelsLayerRender=function(O){__extends(e,O);function e(){var e=O.call(this)||this;e.type="nebula-labelslayer";e.Xz=false;e.l_="inner";e.vf=[];e.mf={};e.bo=20;e.Xf={};e.tp={pp:[],od:null,zs:null};e.kp={};e.NG={};e.WG=new LabelLine;e.R2=new LabelStyleChangeManager;return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!i||!r){return}O.prototype.Hz.call(this,e,r,t,i,a,n);var o=r.viewState.zoom;if(i&&r&&n.visible&&n.opacity&&Util$2.dS(o,n.zooms)){var f=[];var s=true;var u=void 0;this.NG={};for(var l=0;l<i.length;l++){var v=i[l];var c=v.tiles||[];for(var h=0;h<c.length;h++){var d=c[h];f.push(d)}if(c.length){s=s&&v.fo}u=v.Ca}var _={};for(var g=0,y=f;g<y.length;g++){var m=y[g];_[m.zo.key]=m}s=true;this.Xz=s;if(s){this.vf=Object.keys(_);this.mf=_;this.mf.yf=u||[]}var p=this.vf;if(!p){return}var b=void 0;var x=void 0;var C=void 0;for(var S=0,M=p;S<M.length;S++){var w=M[S];x=this.mf[w];var k=Array.isArray(x.data)?x.data:[x.data]||[];for(var T=0,I=k;T<I.length;T++){C=I[T];if(C&&C.labels){b=labelsUtil$1.xf(C.labels,this.mf.yf);if(!this._map.isDOMMode()){for(var A=0,$=b;A<$.length;A++){var F=$[A];F.upload(e.context)}}C.gf=b}}}var P=r.viewState;var L=P.projectionId,R=P.centerCoord;this.If=transforms$2[L];this.uu=lcs$1.getLocalByCoord([R[0],R[1]]).center;var E=this.Ps=this.Pf(this.mf,e);return E}return null};e.prototype.renderFrame=function(e,r,t,i,a){this.wf=t;var n=t.viewState;var o=this.vf;var f=this.Zz;if(!o||!n){return}var s=e.context;var u=this.fz;var l=this._map;if(!l){return}if(this._map.bZ.MZ.drawMode!=="fast"&&(!this._map.bZ.dynamic.get("firstLabelDataAllLoaded")||!this._map.bZ.dynamic.get("firstAllLoaded"))){return}var v=l.qz();var c=l.Qz();var h=this._map.isDOMMode();var d=r.tile[0].yZ;if(r.tile[1]){d=d||r.tile[1].yZ}if(v){this.Bf=u.$f;this.Wf=u.Uf;if(!h){this.Jh(e,t,o,{yZ:d,A2:a.P2})}else{this.Yz(t,i,r,this._map,{centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}}if(h){return}var _=this._map.TL();var g=this.Ps;if(c&&d){if(g.Vf&&!_){this.Xf={};var y=LabelsRenderUtil$2.getBounds(n,{zoom:n.zoom,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode});this.bo=t.viewState.zoom;var m={map:this._map,fz:this.fz,R_:this.Mf,DG:t,transform:this.If,view:this._view,centerCoord:this.uu,FG:t.size,context:s,Uf:this.Wf,bounds:y,Iz:this.bo,tZ:this.Xf};var p=this.Jf(this.mf);this.tp=this.WG.Ns(p,m)}f.Cz(t,s,this.mf,{$z:this.tp},{Az:this.vf,Iz:this.bo,centerCoord:this.uu,yZ:d,A2:a.P2})}};e.prototype.destroy=function(){delete this.tp;delete this.kp;delete this.vf;delete this.mf;if(this.WG&&this.WG["destroy"]){this.WG.destroy();delete this.WG}if(this.R2){delete this.R2}O.prototype.destroy.call(this)};e.prototype.reset=function(){this.Xf={};if(this.tp.zs){this.tp.pp=[]}O.prototype.reset.call(this)};e.prototype.Jh=function(e,r,t,i){var a=this.Zz;var n=e.context;var o=this.Ps.lp||0;if(!o){return}this.qf(n,this.mf);var f;var s;var u;var l;for(var v=0;v<t.length;v++){var c=t[v];l=this.mf[c];if(l&&l.data){f=Array.isArray(l.data)?l.data:[l.data];var h=l.type;var d=this.zG(h);var _=d.od,g=d.zz;var y=d.iterator;if(!_){continue}for(var m=0,p=f;m<p.length;m++){s=p[m];u=l.Sa;var b=s.gf;u=LabelsRenderUtil$2.MG(l.zo.z,u);if(b){for(var x=0;x<b.length;x++){var C=b[x];y=a.Ce(r,e.context,{Rz:C.rp,buffer:C.buffer,od:_.buffer,zz:g},{iterator:y,Sa:u,oo:e,yZ:i.yZ,A2:i.A2})}}}d.iterator=y}}};e.prototype.Pf=function(e,r){var t=this.wf;var i=t&&t.viewState;if(!i){return{}}var a=i&&i.optimalZoom||20;var n=i&&i.zoom||20;var o=false;var f=0;var s=LabelsRenderUtil$2.getBounds(i,{zoom:a,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode});var u=CONSTS.Mp,l=CONSTS.Rp;var v;var c;var h;var d;var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I=a>20?20:a<3?3:a;var A=this.vf;var $=A.length;var F=[u,l];var P={};var L={};var R={};var E={};var O;var D;var U=i.zoom;var N=true;for(var B=0;B<$;B++){d=e[A[B]];O=Array.isArray(d.data)?d.data:[d.data];for(var H=0,z=O;H<z.length;H++){D=z[H];if(D&&D.gf){var G=D.gf;for(var j=0,V=G;j<V.length;j++){_=V[j];g=_.coords;if(g){m=_.Nf;b=_.zp;x=b[I]||[];p=_.rp;f+=p.up;for(var W=0,q=x;W<q.length;W++){var Z=q[W];N=false;S=m[Z];M=g[Z];C=d.Sa;C=LabelsRenderUtil$2.MG(d.zo.z,C);k=vector$1.add(M.origin,C);T=LabelsRenderUtil$2.gz(k,s);if(!T&&!P[Z]){if(!this.Bf[Z]){E[Z]=1}this.Bf[Z]=1;continue}v=m[Z].data.extData;c=v.Lp?this._map.mapStyle.dn(v.Lp,v.Ap,n):null;h=S.opts||{};w=h.zooms||F;if(!P[Z]&&(U<w[0]||U>w[1]||v.Lp&&!c)){if(!this.Bf[Z]){E[Z]=1}this.Bf[Z]=1;continue}if(E[Z]){delete this.Bf[Z]}y=_.style;P[Z]=S;L[Z]=M;R[Z]=y[Z];v.Sa=C;if(v.Lp===40001){R[Z].showText=c?c.showText===0?false:true:true;R[Z].showIcon=c?c.iconID==="0"?false:true:true;R[Z].forceShow=c?c.forceShow:false}else{R[Z].showIcon=c?c.iconID!=="0":true;R[Z].showText=c?c.showText:true;R[Z].forceShow=c?c.forceShow:false}o=true}}this.R2.E2(this._map.bZ.MZ.KY.iX);this.R2.O2(_,this._map.mapStyle,_.Nf,_.style,n,this._map.bZ.MZ.KY.iX);_.upload(r.context)}}}}if(N){o=true}return{Vf:o,lp:f,Nf:P,coords:L,style:R}};e.prototype.qf=function(e,r){var t=this.Zz;var i=this.vf;var a=this.Ps.lp||0;var n=a/12;var o=1;var f={};var s;var u;var l;var v;var c;var h;var d;var _;if(!n){return}this.AG();for(var g=0,y=i;g<y.length;g++){var m=y[g];s=r[m];var p=s.type;var b=this.zG(p);b.LG.ff(n);var x=f[p];if(!x){x=f[p]={start:0,end:0}}if(s){u=Array.isArray(s.data)?s.data:[s.data];for(var C=0,S=u;C<S.length;C++){l=S[C];var M=l.gf;var w=this.Ps.style||{};if(M){for(var k=0,T=M;k<T.length;k++){var I=T[k];v=I.rp;c=v&&v.pp;h=c.length;for(var A=0;A<h;A++){d=c[A];_=d.dp;x.start=x.end;x.end=t.Dz(b.LG,this.Wf,{dp:_,style:w,start:x.start});b.zz.push({start:x.start,end:x.end})}}}}}}var $=this.TG;for(var F in $){if($.hasOwnProperty(F)){var P=$[F];var L=P.od;var R=P.LG.value;if(!L){L=new SmartArrayBuffer$2(e,R,o)}else{L.update(R)}P.od=L}}};e.prototype.Jf=function(e){var r=CONSTS.Op;var t=this.wf;if(!t){return}var i=t.viewState;var a=i&&i.zoom;var n=[];var o=this.vf;var f=o.length;var s=this.Xf;var u;var l;var v;var c;var h;var d;var _;var g;for(var y=0;y<f;y++){var m=e[o[y]];h=Array.isArray(m.data)?m.data:[m.data];for(var p=0,b=h;p<b.length;p++){d=b[p];if(a&&d&&d.XE){u=d.road||d.Dh||[];_=d.XE;l=m.Sa;v=m.zo.key;c=m.zo.z;if(s[v]){continue}for(var x=0,C=_;x<C.length;x++){var S=C[x];g=LabelsRenderUtil$2.wu(S.distance,0,a,{viewState:i,size:t.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu});if(Math.abs(g[0]-g[1])<r){continue}S.Sa=l;S.key=v;S.Bp=c;n.push(S)}}}}return n};return e}(LabelsLayerBaseRender);var LabelStyleChangeManager=function(){function e(){this.D2=0;this.U2="";this.N2=undefined;this.B2=-1}e.prototype.E2=function(e){if(e!==this.U2&&this.N2&&this.B2>=0&&this.D2>=0){this.H2(this.N2.rp.rp,this.B2,this.D2,0);this.N2.destroy();this.N2=undefined}};e.prototype.H2=function(e,r,t,i){for(var a=0;a<t;a++){var n=(r+a)*13+12;e[n]=i}};e.prototype.O2=function(e,r,t,i,a,n){var o=0;for(var f=0,s=e.rp.pp;f<s.length;f++){var u=s[f];var l=void 0;for(var v=0,c=u.dp;v<c.length;v++){var h=c[v];l=h.id;var d=t[h.id].data.extData;if(!d||!d.Lp||!d.Ap){continue}var _=r.dn(d.Lp,d.Ap,a);var g=i[h.id];if(!_){o+=h.kd;continue}if(!g.text){o+=h.kd;continue}if(d.Lp===40001){u.vd.VV("u_fontSizeFactor",1)}else{var y=_.fontSize;var m=g.text.style.fontSize;var p=y/m;u.vd.VV("u_fontSizeFactor",p)}var b=_&&_.faceColor&&_.faceColor.normalize();if(n&&n===d.id&&_["sel-highlight"]){this.H2(e.rp.rp,o,h.kd,1);this.N2=e;this.B2=o;this.D2=h.kd;this.U2=n;if(_["sel-textFillColor"]){u.vd.VV("u_highlightFillColor",_["sel-textFillColor"])}if(_["sel-textStrokeColor"]){u.vd.VV("u_highlightStrokeColor",_["sel-textStrokeColor"])}e.destroy()}if(b){u.vd.VV("fillColor",b)}var x=_.borderColor&&_.borderColor.normalize();if(x){u.vd.VV("strokeColor",x)}var C=_["holoColor"]&&_["holoColor"].normalize();var S=_["label-bg"];if(S&&C){u.vd.VV("backgroundColor",C)}else{u.vd.VV("backgroundColor",[0,0,0,0])}o+=h.kd}}};return e}();var fillExtFragmentString="precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\nuniform bool u_isPick;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        gl_FragColor = v_roofColor;\\n        // gl_FragColor = u_roofColor;\\n    } else {\\n        // 渐变色，暂时不用\\n        // float hFactor = v_fragHeight / v_fullHeight / 8.0 + 1.0;\\n        gl_FragColor = v_color;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    if(u_isPick) {\\n        gl_FragColor = vec4(v_roofColor.rgba / 255.0);\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var fillExtVertextString="precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        // a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n        a_pos.z * u_heightFactor\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n";var fillExtPatternFragmentString="precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\n\\n// pattern\\nuniform float u_resolution;\\nuniform sampler2D u_image;\\nuniform vec2 u_imageSize;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        // vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n        // gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor = v_roofColor;\\n    } else if(v_textureCoord.x<0.0){\\n        gl_FragColor = v_color;\\n      \\n    }else{\\n        vec2 v_texture_pos = v_textureCoord;\\n        gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor.a *= v_color.a;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var fillExtPatternVertextString="precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\nattribute vec2 a_textureCoord;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        // a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n        a_pos.z * u_heightFactor\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_coord = pos;\\n    v_textureCoord = a_textureCoord;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n";var Color=M["Color"];function linearColor(e,i,a){var n=[0,0,0,1];forEach(e.rgba,function(e,r){var t=i.rgba[r];n[r]=linearNumber(e,t,a)/255});return n}function linearNumber(e,r,t){var i=r-e;return e+i*t}var Property=function(){function e(e,r,t){if(t===void 0){t="other"}this.key=e;this.type=r;this.sort=t}e.prototype.An=function(e,r,t,i,a){var n=this.Tn(e,r,t,i);if(!n){return null}var o=n[this.key];if(o&&o.rgba){return this.In(o.rgba)}else{return o}};e.prototype.In=function(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]/255]};e.prototype.Dn=function(e,r,t,i,a){var n=Math.floor(i);var o=Math.ceil(i);var f=i-n<.8?n:o;var s=this.Tn(e,r,t,n);var u=this.Tn(e,r,t,o);if(!s&&f===n){return undefined}if(!s&&!u){return undefined}if(s&&!u&&f===o){return undefined}if(!s&&u&&n===f){return undefined}var l=i-n;if(!s){l=(l-.8)/.2}l=Math.max(l,0);if(this.type==="const"){return this.Pn(e,r,t,f)}if(this.type==="linear"&&n===o){return this.Pn(e,r,t,n)}if(!s&&u){var v=u[this.key];if(typeof v==="number"){var c=0;return linearNumber(c,v,l)}var h=v.normalize();if(h&&this.sort!=="line"){h[3]=h[3]*l}return h}if(s&&!u){return this.Pn(e,r,t,n)}var d=s[this.key];var _=u[this.key];if(!d){if(typeof _==="number"){var g=0;return linearNumber(g,_,l)}var h=_.normalize();if(this.sort!=="line"){h[3]=h[3]*l}return h}else if(typeof d==="number"){return linearNumber(d,_,l)}else{return linearColor(d,_,l)}};e.prototype.Pn=function(e,r,t,i){var a;switch(this.sort){case"line":a=this.jn(e,r,t,i);break;case"other":a=this.On(e,r,t,i);break;default:a=this.On(e,r,t,i)}return a};e.prototype.Tn=function(e,r,t,i){var a;switch(this.sort){case"line":a=this.Fn(e,r,t,i);break;case"other":a=this.En(e,r,t,i);break;default:a=this.En(e,r,t,i)}return a};e.prototype.Fn=function(e,r,t,i){var a=e.dn(r,t,i);if(this.Nn(a)){return a[0]}return undefined};e.prototype.En=function(e,r,t,i){var a=e.dn(r,t,i);if(this.Nn(a)){return a}return undefined};e.prototype.jn=function(e,r,t,i){var a=Math.floor(i);var n=Math.ceil(i);var o=e.dn(r,t,a);if(o){var f=o[0][this.key];if(f&&f.normalize){return f.normalize()}return f}else{var s=e.dn(r,t,n);var f=s[0][this.key];if(f&&f.normalize){return f.normalize()}return f}};e.prototype.On=function(e,r,t,i){var a=Math.floor(i);var n=Math.ceil(i);var o=e.dn(r,t,a);if(o){var f=o[this.key];if(f instanceof Color){return f.normalize()}return f}else{var s=e.dn(r,t,n);var f=s[this.key];if(f instanceof Color){return f.normalize()}return f}};return e}();var LineProperty=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e,r,"line")||this;t.key=e;t.type=r;return t}e.prototype.Nn=function(e){return e&&e[0].roadColor};return e}(Property);var LineBorderProperty=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e,r,"line")||this;t.key=e;t.type=r;return t}e.prototype.Nn=function(e){return e&&e[0].borderColor};return e}(Property);var FillProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.faceColor};return r}(Property);var BuildingProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.faceColor};return r}(Property);var BuildingBorderProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.wallColor2};return r}(Property);var fillExtUniforms={u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2",u_isPick:"bool"};var fillExtAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"}};var fillExt={uniforms:fillExtUniforms,attributes:fillExtAttributes,vertexSource:fillExtVertextString,fragmentSource:fillExtFragmentString};var getFillExtUniformValues=function(e,r,t,i,a,n,o){if(t===void 0){t=[0,0]}var f=e.viewState.zoom;var s=e.viewState.pitch;var u=e.viewState.size[1];var l=[16,zoomRange[1]];var v=1;var c=1;if(i.layer.CLASS_NAME==="AMap.Buildings"){l=i.zooms;v=i.opacity;c=i.heightFactor}c=c*Math.min((s+20)/50,.8);if(i.layer.CLASS_NAME==="AMap.MapboxVectorTileLayer"||i.layer.CLASS_NAME==="AMap.VectorLayer"){l=i.zooms;v=i.opacity;c=1}if(l[0]>f||l[1]<f){return}return{u_skyBMRange:o,u_skyHeight:n,u_viewHeight:u,u_heightFactor:c,u_roofColor:a.roofColor,u_wallColor:a.wallColor,u_lightDir:calcSunX(e.viewState.center),u_opacity:v,u_pitch:s,u_matrix:e.viewState.mvpMatrix,u_offset:[0,0],u_normalMatrix:e.viewState.z2,u_localDeltaCenter:t,u_isPick:false}};function calcSunX(e){var r=new Date;var t=r.getHours()+r.getMinutes()/60;var i=-15*t+300;var a=Math.sin(e[0]-i);return[a,1,.75]}var fillExtPatternUniforms={u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_imageSize:"vec2",u_resolution:"float"};var fillExtPatternAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"},a_textureCoord:{Me:"uint16",Oe:"vec2"}};var fillExtPattern={uniforms:fillExtPatternUniforms,attributes:fillExtPatternAttributes,vertexSource:fillExtPatternVertextString,fragmentSource:fillExtPatternFragmentString};var fillExtProperties={texture:new BuildingProperty("texture","const")};var getFillExtPatternUniformValues=function(e,r,t,i,a,n,o,f){if(t===void 0){t=[0,0]}var s=e.map.bZ.MZ.drawMode==="fast"?e.viewState.optimalZoom:e.viewState.zoom;var u=e.viewState.pitch;var l=e.viewState.size[1];var v=[16,zoomRange[1]];var c=1;var h=1;var d;if(i.layer.CLASS_NAME==="AMap.Buildings"){v=i.zooms;c=i.opacity;h=i.heightFactor}h=h*Math.min((u+20)/50,.8);if(i.layer.CLASS_NAME==="AMap.MapboxVectorTileLayer"||i.layer.CLASS_NAME==="AMap.VectorLayer"){v=i.zooms;c=i.opacity;d=r.bz;h=1}if(v[0]>s||v[1]<s){return}var _=r.mainkey,g=r.subkey,y=r.minzoom;if(f){d=fillExtProperties.texture.An(f,_,g,s,y)}if(!d){return}return{u_skyBMRange:o,u_skyHeight:n,u_viewHeight:l,u_heightFactor:h,u_roofColor:a.roofColor,u_wallColor:a.wallColor,u_lightDir:calcSunX(e.viewState.center),u_opacity:c,u_pitch:u,u_matrix:e.viewState.mvpMatrix,u_offset:[0,0],u_normalMatrix:e.viewState.z2,u_localDeltaCenter:t,u_image:d,u_imageSize:[1,1],u_resolution:e.viewState.optimalResolution}};var find$1=M["lodash"]["find"];var map$1=M["lodash"]["map"];var TileState=M["TileState"];var vector$2=M["vector"];var BuildingRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}if(!a.map.mapStyle.vn){return}var n=r.tiles;var o={};for(var f=0,s=n;f<s.length;f++){var u=s[f];if(u.status===TileState.LOADED){var l=u.zo.z;if(!o[l]){o[l]=[]}o[l].push(u)}}var v=i.layer;var c=v.uo.getSource(v.co());var h=c.ra(t.viewState.optimalZoom);var d=map$1(Object.keys(o),function(e){return parseInt(e,10)});d.sort(function(e,r){return e-r});var _=d.indexOf(h);if(_>=0){d.splice(_,1);d.push(h)}if(i.ce){e.context.clear({depth:true})}for(var g=0,y=d;g<y.length;g++){var m=y[g];var p=o[m];for(var b=0,x=p;b<x.length;b++){var u=x[b];if(u.status!==TileState.LOADED){continue}this.S_(e,u,t,i,a,true)}for(var C=0,S=p;C<S.length;C++){var u=S[C];if(u.status!==TileState.LOADED){continue}this.S_(e,u,t,i,a)}}};e.prototype.S_=function(e,r,t,i,a,n){if(n===void 0){n=false}var o=r.data;var f=t.map;var s=t.viewState;var u=t.viewState.size;var l=f.getView();var v={roofColor:i.roofColor,wallColor:i.wallColor};var c=f.getBuildingColor();var h=1;if(t.viewState.viewMode==="3D"){h=l.EF()}else{return}var d=l.X(u[0]/2,l.Uu()+5);var _=l.X(u[0]/2,l.Uu()-5);var g=l.pz().getPosition();var y=d[0]-g[0];var m=d[1]-g[1];var p=_[0]-g[0];var b=_[1]-g[1];var x=[Math.sqrt(y*y+m*m),Math.sqrt(p*p+b*b)];for(var C=0,S=o;C<S.length;C++){var M=S[C];var w=M.A_;if(!w){continue}var k=M.C_;w.upload(e.context,true);var T=w.zs;var I=find$1(t.map.getLayers(),function(e){return e.CLASS_NAME==="AMap.IndoorMap"});var A=void 0;if(I){A=I.yD().show}for(var $=0,F=k.jc;$<F.length;$++){var P=F[$];var L=f.mapStyle.vn.dn(P.mainkey,P.subkey,s.zoom);var R={};R.roofColor=P.roofColor||v.roofColor||c.roofColor||L&&L.faceColor&&vector$2.Up(L.faceColor.rgba,255);R.wallColor=P.wallColor||v.wallColor||c.wallColor||L&&L.faceColor&&vector$2.Up(L.borderColor.rgba,255);if(!R.wallColor||!R.roofColor){return}var E=fillExtProperties.texture.An(a.map.mapStyle,P.mainkey,P.subkey,t.viewState.zoom,P.minzoom);if(!I||!(P.bz&&A)){if(E){var O=getFillExtPatternUniformValues(t,P,r.Sa,i,R,h,x,a.map.mapStyle);if(O){var D=a.map.getImage(O.u_image);if(D){O.u_image=D;O.u_imageSize=D.size;var U=e.sH();U.Ce(O,{a_pos:{type:"vec4",Re:T.size,offset:0,buffer:T},a_normal:{type:"vec3",Re:T.size,offset:4*4,buffer:T},a_textureCoord:{type:"vec2",Re:T.size,offset:4*7,buffer:T}},P.length,undefined,"TRIANGLES",i.depthTest,n?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,P.offset)}else if(O.u_image&&a.map.I_&&!a.map.I_.MH(O.u_image)){a.map.addImage(O.u_image,{url:O.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return a.map.setNeedUpdate(true)}})}}}else{var O=getFillExtUniformValues(t,P,r.Sa,i,R,h,x);if(O){var U=e.k_();U.Ce(O,{a_pos:{type:"vec4",Re:T.size,offset:0,buffer:T},a_normal:{type:"vec3",Re:T.size,offset:4*4,buffer:T}},P.length,undefined,"TRIANGLES",i.depthTest,n?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,P.offset)}}}}}};return e}(LayerRender);var isSupportFloat32Array=typeof Float32Array!=="undefined";if(!isSupportFloat32Array){window["Float32Array"]=undefined;setMatrixArrayType(Array)}var EPSILON=1e-6;var ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;function setMatrixArrayType(e){ARRAY_TYPE=e}if(!Math.hypot)Math.hypot=function(){var e=0,r=arguments.length;while(r--){e+=arguments[r]*arguments[r]}return Math.sqrt(e)};function equals(e,r){var t=e[0],i=e[1],a=e[2],n=e[3];var o=e[4],f=e[5],s=e[6],u=e[7];var l=e[8],v=e[9],c=e[10],h=e[11];var d=e[12],_=e[13],g=e[14],y=e[15];var m=r[0],p=r[1],b=r[2],x=r[3];var C=r[4],S=r[5],M=r[6],w=r[7];var k=r[8],T=r[9],I=r[10],A=r[11];var $=r[12],F=r[13],P=r[14],L=r[15];return Math.abs(t-m)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(m))&&Math.abs(i-p)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(n-x)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-C)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(f-S)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(s-M)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-w)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-k)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(v-T)<=EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(c-I)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-A)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-$)<=EPSILON*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(_-F)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(g-P)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(y-L)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(L))}function create(){var e=new ARRAY_TYPE(3);if(ARRAY_TYPE!=Float32Array){e[0]=0;e[1]=0;e[2]=0}return e}function copy(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];return e}function set(e,r,t,i){e[0]=r;e[1]=t;e[2]=i;return e}function subtract(e,r,t){e[0]=r[0]-t[0];e[1]=r[1]-t[1];e[2]=r[2]-t[2];return e}var forEach$1=function(){var s=create();return function(e,r,t,i,a,n){var o,f;if(!r){r=3}if(!t){t=0}if(i){f=Math.min(i*r+t,e.length)}else{f=e.length}for(o=t;o<f;o+=r){s[0]=e[o];s[1]=e[o+1];s[2]=e[o+2];a(s,s,n);e[o]=s[0];e[o+1]=s[1];e[o+2]=s[2]}return e}}();var isSupportFloat64Array=typeof Float64Array!=="undefined";var isSupportFloat32Array$1=typeof Float32Array!=="undefined";if(isSupportFloat64Array){setMatrixArrayType(Float64Array)}else if(isSupportFloat32Array$1){setMatrixArrayType(Float32Array)}else{window["Float32Array"]=undefined;setMatrixArrayType(Array)}var DomUtil=AMap["DomUtil"];var CustomRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.type="customLayer";e.OF=create();e.VM=create();return e}e.prototype.renderFrame=function(e,r,t,i){if(!i.alwaysRender&&this.OF&&this.EI&&this.BF&&this.NF&&(equals(this.NF,t.viewState.mvpMatrix)||t.map.TL())){var a=Math.pow(2,t.viewState.zoom-this.EI);subtract(this.VM,t.viewState.centerCoord,this.OF);set(this.VM,-(this.VM[0]/this.BF)*a,this.VM[1]/this.BF*a,0);if(a!==1){i.kv.style[DomUtil.kL]="scale3d("+a+","+a+",1)"}i.kv.style.top=this.VM[1]+"px";i.kv.style.left=this.VM[0]+"px"}else{var n=i.layer;copy(this.OF,t.viewState.centerCoord);this.EI=t.viewState.zoom;this.NF=t.viewState.mvpMatrix;this.BF=t.viewState.resolution;if(n["render"]){var o=n.getLayerConfig().zooms;if(t.viewState.zoom>=o[0]&&t.viewState.zoom<=o[1]){n.canvas.style.visibility="visible";n["render"]()}else{if(n&&n.canvas&&n.canvas){n.canvas.style.visibility="hidden"}}}i.kv.style[DomUtil.kL]="";i.kv.style.top="";i.kv.style.left="";i.kv.style.height="";i.kv.style.visibility=""}};return e}(LayerRender);var GLCustomRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.kC=true;return e}e.prototype.renderFrame=function(e,r,t,i){if(!e){return}var a=e.context;var n=a.gl;var o=i.layer;if(this.kC){this.kC=false;o.init(n)}if(o.render){var f=o.getLayerConfig().zooms;if(t.viewState.zoom>=f[0]&&t.viewState.zoom<=f[1]){o.render(n,t,t.viewState,a);a.setDirty()}}return};return e}(LayerRender);var ImageRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=e.context;var n=e.Gn();var o=i.layer.getLayerConfig().zooms;if(t.viewState.zoom<o[0]||t.viewState.zoom>o[1]){return}var f=t.viewState;var s=t.map;var u=1;if(f.viewMode==="3D"){u=s.getView().EF()}var l=s.JF(t.viewState.optimalZoom);var v=l||[1,1,1,0];if(i.ce){e.context.clear({depth:true})}n.Ce({u_skyColor:v,u_skyHeight:u,u_viewHeight:f.size[1],u_opacity:i.opacity,u_texture:r.texture,u_mvpMatrix:f.mvpMatrix,u_localDeltaCenter:r.Sa,u_flterFlag:false,u_colorscale:null},{a_Position:{type:"vec4",buffer:r.zs,Re:0,offset:0}},6,undefined,undefined,i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil);return};return e}(LayerRender);var NebulaTagType;(function(e){e["LITE"]="lite";e["LEFT"]="left";e["ALL"]="all";e["NONE"]=""})(NebulaTagType||(NebulaTagType={}));var extend=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}var i=Array.prototype.slice.call(arguments,1);var a;var n;var o;for(a=0,n=i.length;a<n;a=a+1){o=i[a]||{};for(var f in o){if(o.hasOwnProperty(f)){var s=o[f];if(typeof s!=="function"||!e.prototype){e[f]=s}else{e.prototype[f]=s}}}}return e};function isBrowser(){return typeof window!=="undefined"&&typeof document!=="undefined"}function isWasmSuppport(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"&&TextDecoder&&TextEncoder){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module){return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}}catch(e){}return false}var testWepP=function(e){var r=new Image;r.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMw"+"AgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA";r.onload=r.onerror=function(){e(r.height===2)}};function isWorkerEnv(){try{var e=!!document;return false}catch(e){return true}}function getSupport(e){var r={runSupport:(new Date).getTime()};var t=false;var i=false;var a=false;var n=false;var o=false;var f=isWasmSuppport();var s=navigator.userAgent.toLowerCase();var u=function(e){return s.indexOf(e)!==-1};var l=true;var v=u("macintosh");var c=u("ipad;")||u("ipad "),h=u("ipod touch;"),d=u("iphone;")||u("iphone "),_=d||c||h,g=(v||_)&&u("safari")&&u("version/"),y=u("macwechat"),m=u("windowswechat");var p={YV:o,WV:v,Ue:t,g:n,$e:i,scale:1,HV:a,DW:isWorkerEnv(),AJ:f,safari:g,AQ:y,gQ:m,amapRunTime:r};if(isBrowser()){var b=window,x=document,C=x.documentElement,S=/([a-z0-9]*\\d+[a-z0-9]*)/,M=function(e){if(!e){return null}e=e.toLowerCase();var r=null;var t=e.match(/angle \\((.*)\\)/);if(t){e=t[1];e=e.replace(/\\s*direct3d.*$/,"")}e=e.replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,"");if(e.indexOf("intel")>=0){r=["Intel"];if(0<=e.indexOf("mobile")){r.push("Mobile")}if(0<=e.indexOf("gma")||0<=e.indexOf("graphics media accelerator")){r.push("GMA")}if(0<=e.indexOf("haswell")){r.push("Haswell")}else if(0<=e.indexOf("ivy")){r.push("HD 4000")}else if(0<=e.indexOf("sandy")){r.push("HD 3000")}else if(0<=e.indexOf("ironlake")){r.push("HD")}else{if(0<=e.indexOf("hd")){r.push("HD")}var i=e.match(S);if(i){r.push(i[1].toUpperCase())}}r=r.join(" ");return r}if(e.indexOf("nvidia")>=0||e.indexOf("quadro")>=0||e.indexOf("geforce")>=0||e.indexOf("nvs")>=0){r=["nVidia"];if(0<=e.indexOf("geforce")){r.push("geForce")}if(0<=e.indexOf("quadro")){r.push("Quadro")}if(0<=e.indexOf("nvs")){r.push("NVS")}if(e.match(/\\bion\\b/)){r.push("ION")}if(e.match(/gtx\\b/)){r.push("GTX")}else if(e.match(/gts\\b/)){r.push("GTS")}else if(e.match(/gt\\b/)){r.push("GT")}else if(e.match(/gs\\b/)){r.push("GS")}else if(e.match(/ge\\b/)){r.push("GE")}else if(e.match(/fx\\b/)){r.push("FX")}var i=e.match(S);if(i){r.push(i[1].toUpperCase().replace("GS",""))}if(0<=e.indexOf("titan")){r.push("TITAN")}else if(0<=e.indexOf("ti")){r.push("Ti")}r=r.join(" ");return r}if(e.indexOf("amd")>=0||e.indexOf("ati")>=0||e.indexOf("radeon")>=0||e.indexOf("firegl")>=0||e.indexOf("firepro")>=0){r=["AMD"];if(0<=e.indexOf("mobil")){r.push("Mobility")}var a=e.indexOf("radeon");if(0<=a){r.push("Radeon")}if(0<=e.indexOf("firepro")){r.push("FirePro")}else if(0<=e.indexOf("firegl")){r.push("FireGL")}if(0<=e.indexOf("hd")){r.push("HD")}if(a>=0){e=e.substring(a)}var i=e.match(S);if(i){r.push(i[1].toUpperCase().replace("HD",""))}r=r.join(" ");return r}return e.substring(0,100)},w="google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),k="ActiveXObject"in b,T=window["detectRetina"]==false?false:"devicePixelRatio"in b&&b["devicePixelRatio"]>1||k&&"matchMedia"in b&&b.matchMedia("(min-resolution:144dpi)")&&b.matchMedia("(min-resolution:144dpi)").matches,I=u("windows nt"),A=s.search(/windows nt [1-5]\\./)!==-1,$=s.search(/windows nt 5\\.[12]/)!==-1,F=u("windows nt 10"),P=u("windows phone"),L=u("Mb2345Browser"),R=_&&s.search(/ os [456]_/)!==-1,E=_&&s.search(/ os [4-8]_/)!==-1,O=_&&s.search(/ os [78]_/)!==-1,D=_&&u("os 8_"),U=_&&u("os 10_"),N=u("android");var B=0;if(N){B=parseInt(s.split("android")[1])||0}var H=N&&B<4,z=N&&B>=5,G=z||s.search(/android 4.4/)!==-1,j=N?"android":_?"ios":I?"windows":v?"mac":"other",V=k&&!b["XMLHttpRequest"],W=k&&!x.querySelector,q=k&&!x.addEventListener,Z=k&&u("msie 9"),Y=k&&u("msie 10"),K=k&&u("rv:11"),X=q||Z,J=u("edge"),Q=u("qtweb"),ee=u("ucbrowser"),re=u("alipay")||N&&ee,te=u("miuibrowser"),ie=u("micromessenger"),ae=u("dingtalk"),ne=u("mqqbrowser"),oe=u("baidubrowser"),fe=u("crios/"),se=u("chrome/"),ue=(se||fe)&&u("chromium"),le=!ue&&(se&&parseInt(s.split("chrome/")[1])>30||fe&&parseInt(s.split("crios/")[1])>30),ve=u("firefox"),ce=ve&&parseInt(s.split("firefox/")[1])>27,he=g&&parseInt(s.split("version/")[1])>7,de=_&&u("aliapp"),_e=N||_||P||u("mobile"),ge="ontouchstart"in x,ye=b["navigator"]&&b["navigator"]["msPointerEnabled"]&&!!b["navigator"]["msMaxTouchPoints"],me=b["navigator"]&&!!b["navigator"]["maxTouchPoints"],pe=!ge&&(me||ye),be=ge||pe,xe=function(){if(!_e){return b.devicePixelRatio||1}var e=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window){try{if(window.parent.location.origin===window.location.origin){e=window.parent.document.getElementsByTagName("meta")}else{return 1}}catch(e){return 1}}for(var r=e.length-1;r>=0;r-=1){if(e[r].name==="viewport"){var t=e[r].content;var i=void 0,a=void 0,n=void 0;if(t.indexOf("initial-scale")!==-1){i=parseFloat(t.split("initial-scale=")[1])}if(t.indexOf("minimum-scale")!==-1){a=parseFloat(t.split("minimum-scale=")[1])}else{a=0}if(t.indexOf("maximum-scale")!==-1){n=parseFloat(t.split("maximum-scale=")[1])}else{n=Infinity}if(i){if(n>=a){if(i>n){return n}else if(i<a){return a}else{return i}}else{console&&console.log&&console.log("viewport参数不合法");return null}}else{if(n>=a){if(a>=1){return 1}else{return Math.min(n,1)}}else{console&&console.log&&console.log("viewport参数不合法");return null}}}}return undefined},Ce=xe(),Se=T&&(!_e||!!Ce&&Ce>=1),Me=k&&"transition"in C.style,we=!!x.createElementNS&&!!x.createElementNS("http://www.w3.org/2000/svg","svg")["createSVGRect"],ke=x.createElement("canvas"),Te=!!(ke&&ke.getContext),Ie=window["URL"]||window["webkitURL"],Ae=false;var $e=window["disableWorker"]!==true&&!k&&!(ee&&N&&!le)&&window["Worker"]&&Ie&&Ie["createObjectURL"]&&window["Blob"],Fe="",Pe="",Le=0,Re=window["higtQualityRender"]==false?T?false:true:true,Ee=window["movingDraw"],Oe=window["forceWebGL"]?{alpha:true,antialias:Re,depth:true,stencil:true}:{alpha:true,antialias:Re,depth:true,stencil:true},De=function(){if(!Te||!$e){return false}var e=["webgl","experimental-webgl","moz-webgl"];var r=null;for(var t=0;t<e.length;t+=1){try{var i=Oe;r=ke.getContext(e[t],i)}catch(e){}if(!r){continue}else{if(r.drawingBufferWidth!==ke.width||r.drawingBufferHeight!==ke.height){return false}if(!r.getShaderPrecisionFormat||!r.getParameter||!r.getExtension){return false}Le=r.getParameter(r.MAX_RENDERBUFFER_SIZE);var a=r.getParameter(r.MAX_VIEWPORT_DIMS);if(!a){return false}Le=Math.min(Le,a[0],a[1]);if(g&&j==="mac"){Le=Math.min(Le,4096)}var n=Math.max(screen.width,screen.height);if(Se){n*=Math.min(2,window.devicePixelRatio||1)}if(n>Le){return false}if(23>r.getShaderPrecisionFormat(35632,36338).precision||23>r.getShaderPrecisionFormat(35633,36338).precision){return false}Pe=r.getExtension("WEBGL_debug_renderer_info")?r.getParameter(37446):null;var o=M(Pe);if(o){if(o.indexOf("google swiftshader")>-1){l=false;return false}if(-1!==w.indexOf(o)){return false}}Fe=e[t];return true}}return false},Ue=De(),Ne=e[8]!==undefined?e[8]:true,Be=window["Uint8Array"]&&Ne&&!window["forbidenWebGL"]&&Ue&&(window["forceWebGL"]||(le||ce||he||J||ie||ae)&&j!=="other"),He=window["forceWebGLBaseRender"]?"w":Be?"w":"d",ze=u("webkit"),Ge="WebKitCSSMatrix"in b&&"m11"in new window["WebKitCSSMatrix"],je="MozPerspective"in C.style,Ve="vV"in C.style,We=Me||Ge||je||Ve,qe=false,Ze=e[12]!==undefined?e[12]:null;var Ye=true;try{if(typeof b.localStorage==="undefined"){Ye=false}else{var Ke=(new Date).getTime()+"";b.localStorage.setItem("_test",Ke);if(b.localStorage.getItem("_test")!==Ke){Ye=false}b.localStorage.removeItem("_test")}}catch(e){Ye=false}var Xe=function(e,r){var t={};extend(t,Oe);extend(t,r);return e.getContext(Fe,t)};var Je=parseInt(s.split("chrome/")[1]);p={qV:c,KV:d,size:d?100:N?200:500,WV:v,ZV:I,JV:_,uT:U,HV:N,QV:H,cT:re,eq:j,rq:oe,nq:ne,safari:g,iq:ie,ie:k,aq:V,oq:W,sq:Z,uq:Y,xv:q,fT:X,cq:K,fq:J,hT:k&&!K,lT:L,RL:Ye,vT:Ze,geolocation:_e||k&&!q||J,SL:ee,uc:ee&&!se,chrome:se,gT:true,hq:ve,G2:l,$e:_e,lq:_e&&ze,dq:_e&&Ge,vq:_e&&b.opera,Ue:T,bT:Ce,Mr:Se,YV:be,gq:ye,pq:me,yT:pe,pT:se&&Je>=57,mT:!_e&&se&&Je>=64,g:ze,bq:Me,yq:Ge,mq:je,Tq:Ve,Mq:We,Aq:we,xq:Te,Eb:$e,TT:qe,Tm:Be,AT:Fe,xT:Oe,ST:Pe,wT:Le,MT:Ae,movingDraw:Ee,baseRender:Ne?He:"d",scale:T?2:1,getContext:Xe,mH:false,AJ:f,amapRunTime:r,sY:De};testWepP(function(e){p.mH=e})}return p}var Browser=getSupport(typeof config==="undefined"?[]:config);if(typeof createImageBitmap!=="undefined"&&typeof ImageBitmap!=="undefined"){Browser.imageBitmap=true}var canceledWorkerFetch=Boolean(Browser.DW?!Browser.safari&&!Browser.AQ&&!Browser.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"):!Browser.safari&&!Browser.AQ&&!Browser.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty("signal"));Browser.LZ=canceledWorkerFetch;Browser["amapRunTime"]={workerTime:{}};var projections={};var Projection=function(){function e(e,r,t,i){this.project=r;this.unproject=t;this.getResolution=i;projections[e]=this}e.prototype.Sq=function(e,r,t){var i=this.getResolution(t);var a=r[0]*i;var n=r[1]*i;var o=this.project(e[0],e[1]);return this.unproject(o[0]+a,o[1]+n)};e.prototype.wq=function(e,r){var t=this.project(e[0],e[1]);var i=[t[0]+r[0],t[1]+r[1]];return this.unproject(i[0],i[1])};return e}();var ProjectionManager={getProjection:function(e){return projections[e]}};var LngLat=function(){var e=function(e,r){return[e,r]};var r=function(e,r){return[e,r]};var t=function(e){return 180/256/Math.pow(2,e)};return new Projection("EPSG:4326",e,r,t)}();var SphericalMercator=function(){var n=Math.PI/180;var a=180/Math.PI;var o=6378137;var f=85.0511287798;var e=function(e,r){var t=f;r=Math.max(Math.min(t,r),-t);var i=e*n;var a=r*n;a=Math.log(Math.tan(Math.PI/4+a/2));return[i*o,a*o]};var r=function(e,r){var t=e/o*a;var i=(2*Math.atan(Math.exp(r/o))-Math.PI/2)*a;return[t,i]};var t=function(e){return 20037508.342789244*2/256/Math.pow(2,e)};return new Projection("EPSG:3857",e,r,t)}();var LCS=function(){function e(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244];this.cg=128;this.vg=128;this.lg=(this.hg[2]-this.hg[0])/this.cg;this.dg=(this.hg[3]-this.hg[1])/this.vg}e.prototype.setMap=function(e){this.map=e};e.prototype.getSize=function(){return[this.lg,this.dg]};e.prototype.getNum=function(){return[this.cg,this.vg]};e.prototype.getLocalByLnglat=function(e){var r;var t=(r=ProjectionManager.getProjection("EPSG:3857")).project.apply(r,e);return this.getLocalByCoord(t)};e.prototype.getLocalByCoord=function(e){var r=Math.floor(e[0]/this.lg);var t=Math.floor(e[1]/this.dg);var i=this.getLocalCenterByXY(r,t);var a=[e[0]-i.center[0],e[1]-i.center[1]];return{Sa:a,x:r,y:t,center:i.center,Ro:i.Ro}};e.prototype.getLocalCenterByXY=function(e,r){var t={x:e,y:r,center:[0,0],Ro:[0,0,0,0]};t.center=[(e+.5)*this.lg,(r+.5)*this.dg];t.Ro=[e*this.lg,r*this.dg,(e+1)*this.lg,(r+1)*this.dg];return t};e.prototype.getDeltaCoord=function(e){var r=this.getLocalByCoord(e);return[e[0]-r.center[0],e[1]-r.center[1]]};return e}();var lcs$2=new LCS;var E4326=ProjectionManager.getProjection("EPSG:4326");var E3857=ProjectionManager.getProjection("EPSG:3857");var LngLat$1={Ro:[-180,-90,180,90],project:function(e,r,t){var i=E4326.project(e,r);return this.transform(i[0],i[1],t)},unproject:function(e,r,t){var i=this.Xs(e,r,t);return E4326.unproject(i[0],i[1])},transform:function(e,r,t){var i;if(t===undefined){i=180}else{i=256<<t}var a=i;var n=i*2;var o=this.Ro[2]-this.Ro[0];var f=this.Ro[3]-this.Ro[1];e=(e-this.Ro[0])/o*n;r=a-(r-this.Ro[1])/f*a;return[e,r]},Xs:function(e,r,t){var i;if(t===undefined){i=180}else{i=256<<t}var a=i;var n=i*2;e=(e/n-.5)*360;r=-(r/a-.5)*180;return[e,r]},nt:function(e,r,t){return this.Xs(e,r,t)},wu:function(e,r,t){return this.Xs(e,r,t)},yo:function(e,r,t){var i=0;if(e/this.Ro[3]>0){i=Math.abs(Math.floor(e/this.Ro[3]))}else{i=Math.abs(Math.ceil(e/this.Ro[3]))}var a=0;if(r/this.Ro[3]>0){a=Math.abs(Math.floor(r/this.Ro[3]))}else{a=Math.abs(Math.ceil(r/this.Ro[3]))}var n=e%this.Ro[3];var o=r%this.Ro[3];var f=this.transform(n,o,t);e=this.wu(e,e,t)[0]*i+f[0];r=this.wu(r,r,t)[1]*a+f[1];var s=this.transform(0,0,t),u=s[0],l=s[1];return[e-u,r-l]},Bb:function(e,r,t){return t.X(e,r)},qb:function(e,r,t){return t.H(e,r)},Gd:function(e,r,t,i){var a=i.X(e[0],e[1]);var n=i.X(e[0]+r,e[1]+t);return[n[0]-a[0],n[1]-a[1]]}};var SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(e,r,t){var i=E3857.project(e,r);return this.transform(i[0],i[1],t)},unproject:function(e,r,t){var i=this.Xs(e,r,t);return E3857.unproject(i[0],i[1])},transform:function(e,r,t){e=Math.min(20037508.342789244,Math.max(e,-20037508.342789244));r=Math.min(20037508.342789244,Math.max(r,-20037508.342789244));var i;if(t===undefined){i=20037508.342789244*2}else{i=256*Math.pow(2,t)}var a=this.Ro[2]-this.Ro[0];var n=this.Ro[3]-this.Ro[1];e=(e-this.Ro[0])/a*i;r=i-(r-this.Ro[1])/n*i;return[e,r]},Xs:function(e,r,t){var i;if(t===undefined){i=20037508.342789244*2}else{i=256*Math.pow(2,t)}e=(e/i-.5)*this.Ro[2]*2;r=-(r/i-.5)*this.Ro[2]*2;return[e,r]},nt:function(e,r,t,i){e=this.Xs(e,r,t)[0]-this.Ro[0];r=this.Ro[2]-this.Xs(e,r,t)[1];return[e,r]},wu:function(e,r,t,i){var a=i.center,n=i.size;var o=(i.rotation||0)/180*Math.PI;var f=this.transform(e,r,t),s=f[0],u=f[1];var l=this.transform(a[0],a[1],t),v=l[0],c=l[1];var h=s-v;var d=u-c;var _=Math.sqrt(Math.pow(h,2)+Math.pow(d,2));var g=d===0?Math.PI/2:Math.atan(Math.abs(h/d));var y;if(h*d<=0){y=g+o}else{y=g-o}var m=h>0?y:-y;var p=d>0?1:-1;var b=n[0]/2+_*Math.sin(m);var x=n[1]/2+_*Math.cos(y)*p;return[b,x]},yo:function(e,r,t,i){var a=0;if(e/this.Ro[3]>0){a=Math.abs(Math.floor(e/this.Ro[3]))}else{a=Math.abs(Math.ceil(e/this.Ro[3]))}var n=0;if(r/this.Ro[3]>0){n=Math.abs(Math.floor(r/this.Ro[3]))}else{n=Math.abs(Math.ceil(r/this.Ro[3]))}var o=e%this.Ro[3];var f=r%this.Ro[3];var s=this.transform(o,f,t);var u=this.transform(0,0,t),l=u[0],v=u[1];e=l*a+s[0];r=v*n+s[1];return[e-l,r-v]},Bb:function(e,r,t){return t.X(e,r)},qb:function(e,r,t){return t.H(e,r)},Gd:function(e,r,t,i){var a=i.X(e[0],e[1]);var n=i.X(e[0]+r,e[1]+t);return[n[0]-a[0],n[1]-a[1]]}};var transform={"EPSG:4326":LngLat$1,"EPSG:3857":SphericalMercator$1};var labelsUtil$2={Bj:function(e){if(e===void 0){e={}}var r={};for(var t in e){if(e.hasOwnProperty(t)){r[t]=1}}return r},zj:function(e,r){e.gs=r;e.qj=r.options||{};e.Wj=r.Wj||{};e.Fs=r.Fs||{};e.Gj=r.Gj||{};e.Hj=r.Hj||{};e.Vj=r.Vj||{};e.$j=r.$j||0},Yj:function(e,r){if(e===void 0){e=[NaN,NaN,NaN,NaN]}if(r===void 0){r=[0,0,0,1]}for(var t=0;t<e.length;t++){var i=e[t];if(isNaN(i)){e[t]=r[t]}}return e},Kj:function(e){var r=255;var t=65280;var i=16711680;var a=e&r;var n=(e&t)>>8;var o=(e&i)>>16;var f=255;return[o/f,n/f,a/f,1]},Xj:function(e,r){if(r===void 0){r={}}var t=[];var i=r.qw,a=r.Aw,n=r.complete;for(var o=0,f=e;o<f.length;o++){var s=f[o];var u=new Promise(s);t.push(u)}var l=0;Promise.all(t).then(function(){if(i){i.apply(void 0,arguments)}if(n&&!l){l=1;n.apply(void 0,arguments)}}).catch(function(){if(a){a.apply(void 0,arguments)}if(n&&!l){l=1;n.apply(void 0,arguments)}})},Jj:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l;if(i<=f){if(n>=f){if(n>u){l=[f,u]}else{l=[f,n]}}else{l=null}}else{l=labelsUtil$2.Jj(r,e)}return l},measureText:function(e,r,t,i){if(r===void 0){r=""}if(i===void 0){i="3D"}if(i==="3D"){return e.measureText(r,t)}},lnglatToContainer:function(e,r){var t=r.zoom,i=t===void 0?20:t;if(i<LocalZoom){return e}var a=lcs$2.getLocalByCoord(e);var n=vector$3.Ip(e,a.center);return n},Sd:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l=Math.abs(f-i);var v=Math.abs(u-n);var c=Math.sqrt(Math.pow(l,2)+Math.pow(v,2));return c},getAngle:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l=f-i;var v=u-n;var c;if(l!==0){c=Math.atan(v/l)}else if(v<0){return Math.PI*3/2}else{return Math.PI/2}var h;if(c===0){if(l>=0){h=c}else{h=c+Math.PI}}else if(c>0){if(l>=0){h=c}else{h=c+Math.PI}}else{if(l>0){h=2*Math.PI+c}else{h=Math.PI+c}}return h},Fd:function(e,r,t){var i=e[0],a=i===void 0?0:i,n=e[1],o=n===void 0?0:n;var f=r[0],s=f===void 0?0:f,u=r[1],l=u===void 0?0:u;var v=s-a;var c=l-o;var h=[];var d=0;while(d<t){var _=a+v/(t+1)*(d+1);var g=o+c/(t+1)*(d+1);var y=[_,g];h.push(y);d++}return h},OG:function(e,r,t){if(t!==0){var i=e[0]+(r[0]-e[0])*t;var a=e[1]+(r[1]-e[1])*t;return[i,a]}return e},Ed:function(e,r){if(e===void 0){e=[]}if(r===void 0){r="ch"}var t=e.length;if(!t){return false}var i=e[0];var a=t>=4?Math.floor(t/4*3):t-1;var n=e[a];var o=i[0],f=i[1];var s=n[0],u=n[1];var l=u-f;var v=s-o;var c=l/v;var h=[s-o,u-f];var d;if(r==="ch"){if(Math.abs(c)>1){d=vector$3.Zj(h,[0,1])}else{d=vector$3.Zj(h,[1,0])}}else{d=vector$3.Zj(h,[1,0])}return d<0},Nd:function(e,r,t){var i=e[0],a=e[1];var n=r[0],o=r[1];var f=o-a;var s=n-i;var u=f/s;var l=[n-i,o-a];var v;var c;if(Math.abs(u)>1&&t!=="x"){v=vector$3.Zj(l,[0,-1]);if(v>0){c=vector$3.Qj(l,[0,-1])}else{c=vector$3.Qj(l,[0,1])}if(u>0){c=-c}}else{v=vector$3.Zj(l,[1,0]);if(v>0){c=vector$3.Qj(l,[1,0])}else{c=vector$3.Qj(l,[-1,0])}if(u<0){c=-c}}return c},Od:function(e,r,t){var i;var a;i=t*Math.sin(r);a=t*Math.cos(r);var n=e[0],o=e[1];var f=n+a;var s=o+i;return[f,s]},jd:function(e,r,t,i){var a=vector$3.Ip(e,r);var n=vector$3.length(a);var o=vector$3.Ip(t,r);var f=vector$3.length(o);var s=vector$3.Zj(a,o);var u=Math.acos(s/(n*f));var l=Math.PI-u;var v=n*Math.sin(l);var c=n*Math.cos(l);var h=Math.sqrt(Math.pow(i,2)-Math.pow(v,2));var d=h-c;var _=o[0]===0?o[1]>0?Math.PI/2:-Math.PI/2:Math.atan(o[1]/o[0]);var g=Math.abs(d*Math.sin(_));var y=d*Math.cos(_);var m=vector$3.Zj(o,[1,0]);var p=vector$3.Zj(o,[0,1]);var b=[m>=0?y:-y,p>=0?g:-g];var x=vector$3.add(r,b);return x},rank:function(e){var r=[];for(var t=0;t<e.length;t++){var i=parseFloat(e[t]);if(i<0){e.splice(t--,1);r.push(i)}else{e[t]=i}}e.sort(function(e,r){return e-r});e=r.concat(e);return e},$p:function(e){var r=CONSTS.Mp,t=CONSTS.Rp;if(e[1]>=zoomRange[1]){e[1]=t}if(e[0]<=zoomRange[0]){e[0]=r}return e},toString:function(e,r){if(r===void 0){r=4}var t="";if(!e){return t}for(var i=0,a=e;i<a.length;i++){var n=a[i];if((n+"").length<r){t+=n}else{t+=n.toFixed(r)}}return t},xf:function(e,r){var t=[];var i=r.ja,a=r.Fa,n=r.Oa,o=r.Ea;for(var f in e){if(e.hasOwnProperty(f)){if(f===CONSTS.gH||f===CONSTS.FN||f===CONSTS.RB){continue}if(f==="shields"){t.push(e[f]);continue}if(i){var s=f.split("-");var u=parseInt(s[1],10);var l=parseInt(s[2],10);if(u>=i&&u<=n&&l>=a&&l<=o){t.push(e[f])}}else{t.push(e[f])}}}if(!t.length){t=e}return t},EQ:function(e,r){var t=[];var i=r.length;for(var a=0;a<i-1;a++){var n=e.substring(r[a],r[a+1]);t.push(n)}if(!i){t=e.split("")}return t},aQ:function(e){var r=[];for(var t=0;t<e.length;t++){var i=e[t];var a=[];for(var n=0;n<i.length;n++){var o=i.charCodeAt(n);a.push(o)}var f=a.join("|");r.push(f)}return r},tQ:function(e,r,t){var i="";var a=[];var n="";if(e.name){if(e.JQ&&e.JQ.length>0){i=getSpiltLineWithSpiltIndex(e.name,e.JQ);n="ch"}else if(t){var o=t.lineBreak(e.name,{from:"labelsLayer",CO:[]});var f=0;var s="";if(o.oQ.length>=2){for(var u=1,l=o.oQ.length-1;u<l;u++){s+=e.name.slice(f,o.oQ[u])+" ";f=o.oQ[u]}s+=e.name.slice(f)}else{s=e.name}i=s;n="ch"}else{i=e.name;n="ch"}}else{switch(r){case"en":{i=e.j2;a=e.iQ;n="en";break}case"local":{i=e.QQ;a=e.$G;n=e.CQ;break}case"zh_cn":{i=e.BQ;n="ch";break}default:{i=e.BQ;n="ch"}}if(!i){if(e.j2){i=e.j2;a=e.iQ;n="en"}else if(e.QQ){i=e.QQ;a=e.$G;n=e.QQ}}}return{name:i,$G:a,type:n}}};var vector$3={add:function(e,r){var t=[];for(var i=0;i<e.length;i++){t[i]=e[i]+r[i]}return t},Ip:function(e,r){var t=[];for(var i=0;i<e.length;i++){t.push(e[i]-r[i])}return t},multiply:function(e,r){var t=[];for(var i=0,a=e;i<a.length;i++){var n=a[i];t.push(n*r)}return t},Up:function(e,r){var t=[];for(var i=0;i<e.length;i++){t[i]=e[i]/r}return t},tA:function(e){return this.multiply(e,-1)},Zj:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;return i*f+n*u},Qj:function(e,r){var t=vector$3.Zj(e,r);var i=vector$3.length(e);var a=vector$3.length(r);var n=Math.acos(t/(i*a));return n},length:function(e){var r=e[0],t=e[1];return Math.sqrt(Math.pow(r,2)+Math.pow(t,2))}};function getSpiltLineWithSpiltIndex(e,r){r.shift();if(r.length===0){return e}var t="";var i=0;for(var a=0,n=r.length;a<n;a++){t+=e.substr(i,r[a]-i)+" ";i=r[a]}t+=e.substr(r[r.length-1]);return t}var scale$1=Browser.scale;var LabelsRenderUtil$3={getBounds:function(e,r){if(r===void 0){r={}}var t=r.zoom,i=r.centerCoord,a=r.view;var n=15;var o=[10*n*scale$1,10*n*scale$1,10*n*scale$1,10*n*scale$1];var f=e.boundsCoord;var s=f[0],u=f[1],l=f[2],v=f[3];var c=this.nt(0,0,t,r);var h=vector$3.Ip(this.nt(o[0],o[1],t,r),c);var d=vector$3.Ip(this.nt(o[2],o[3],t,r),c);var _=t>=LocalZoom?i:[0,0],g=_[0],y=_[1];var m=[s-g-Math.abs(d[1]),u-y-Math.abs(d[0])];var p=[l-g+Math.abs(h[1]),v-y+Math.abs(h[0])];return[m,p]},gz:function(e,r){var t=r[0],i=r[1];var a=e[0],n=e[1];var o=a-t[0];var f=n-t[1];var s=i[0]-a;var u=i[1]-n;return o>=0&&f>=0&&s>=0&&u>=0},wz:function(e,r){if(r===void 0){r={}}var t=r.forceShow,i=t===void 0?0:t,a=r._z,n=a===void 0?0:a;var o=e["data"]||{};var f=o["rank"]||1;var s=n/100;var u=2e5;f=i?f-1e5:s*u+f;return f},wu:function(e,r,t,i){if(e===void 0){e=0}if(r===void 0){r=0}if(i){var a=i.viewState,n=i.size,o=i.transform,f=i.view,s=i.viewMode,u=i.centerCoord,l=i.positionType,v=l===void 0?"relative":l;if(s==="2D"){var c={center:a.centerCoord,rotation:a.rotation,size:n};var h=a.optimalZoom>=LocalZoom?u:[0,0],d=h[0],_=h[1];return o.wu(e+d,r+_,t,c)}else{return v==="relative"?f.H(e,r):f._u(e,r)}}},r0:function(e,r,t,i,a){if(e===void 0){e=0}if(r===void 0){r=0}if(t===void 0){t=0}if(a){var n=a.viewState,o=a.size,f=a.transform,s=a.view,u=a.viewMode,l=a.centerCoord,v=a.positionType,c=v===void 0?"relative":v;if(u==="2D"){var h={center:n.centerCoord,rotation:n.rotation,size:o};var d=n.optimalZoom>=LocalZoom?l:[0,0],_=d[0],g=d[1];return f.wu(e+_,r+g,i,h)}else{return c==="relative"?s.H(e,r,t):s._u(e,r,t)}}},kz:function(e,r,t,i){if(e===void 0){e=[]}if(i===void 0){i={}}var a=i.centerCoord;if(r<LocalZoom&&t>=LocalZoom){var n=a[0],o=a[1];var f=[];for(var s=0,u=e;s<u.length;s++){var l=u[s];f.push([l[0]-n,l[1]-o])}return f}return e},nt:function(e,r,t,i){if(e===void 0){e=0}if(r===void 0){r=0}var a=i.view,n=i.transform,o=i.viewMode;if(o==="2D"){return n.nt(e,r,t)}else{return a.X(e,r)}},MG:function(e,r){if(e<LocalZoom-1){r=[0,0]}return r}};function isLngLat(e){return e&&e.className==="AMap.LngLat"}function isNumber(e){var r=+e;return typeof+r==="number"&&!isNaN(r)}function isNumberArray(e){return Array.isArray(e)&&isNumber(e[0])}function parseLngLatData(e){if(Array.isArray(e)){if(Array.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=parseLngLatData(e[r])}}else{var t=typeof e[0];if(t==="string"||t==="number"){return new LngLat$2(e[0],e[1])}else{return e}}}return e}var Coordinate={lr:function(e,r){var t=Infinity;for(var i=0,a=1,n=r.length;a<n;i=a,a+=1){t=Math.min(t,this.ur(e,[r[i],r[a]]))}return Math.sqrt(t)},ur:function(e,r){return this.cr(e,this.closestOnSegment(e,r))},cr:function(e,r){var t=e[0]-r[0];var i=e[1]-r[1];return t*t+i*i},pr:function(e,r,t,i){i=i||1e-6;if(t[0]===r[0]){var a=Math.min(r[1],t[1]);var n=Math.max(r[1],t[1]);return Math.abs(e[0]-t[0])<i&&e[1]>=a&&e[1]<=n}var o=Math.min(r[0],t[0]);var f=Math.max(r[0],t[0]);var s=(t[1]-r[1])/(t[0]-r[0])*(e[0]-r[0])+r[1];return Math.abs(s-e[1])<i&&e[0]>=o&&e[0]<=f},closestOnSegment:function(e,r){var t=e[0];var i=e[1];var a=r[0];var n=r[1];var o=a[0];var f=a[1];var s=n[0];var u=n[1];var l=s-o;var v=u-f;var c=l===0&&v===0?0:(l*(t-o)+v*(i-f))/(l*l+v*v||0);var h;var d;if(c<=0){h=o;d=f}else if(c>=1){h=s;d=u}else{h=o+c*l;d=f+c*v}return[h,d]},isClockwise:function(e){var r=e.length;var t=0;var i=e[r-1];var a=i[0];var n=i[1];var o;var f;var s;for(var u=0;u<r;u+=1){s=e[u];o=s[0];f=s[1];t+=(o-a)*(f+n);a=o;n=f}return t>0},ss:function(e,r,t){var i=e[0];var a=e[1];var n=false;var o;var f;var s;var u;var l=r.length;for(var v=0,c=l-1;v<l;c=v,v+=1){var h=false;o=r[v][0];f=r[v][1];s=r[c][0];u=r[c][1];if(o===i&&f===a||s===i&&u===a){return t?true:false}if(f<a===u>=a){var d=(s-o)*(a-f)/(u-f)+o;if(i===d){return t?true:false}else{h=i<d}}if(h){n=!n}}return n},dr:function(e,r){var t=function(e,r,t){return(t[0]-r[0])*(e[1]-r[1])>(t[1]-r[1])*(e[0]-r[0])};var i=function(e,r,t,i){var a=[e[0]-r[0],e[1]-r[1]],n=[t[0]-i[0],t[1]-i[1]],o=e[0]*r[1]-e[1]*r[0],f=t[0]*i[1]-t[1]*i[0],s=1/(a[0]*n[1]-a[1]*n[0]);return[(o*n[0]-f*a[0])*s,(o*n[1]-f*a[1])*s]};var a,n,o,f;var s=e;a=r[r.length-2];for(var u=0,l=r.length-1;u<l;u++){n=r[u];var v=s;s=[];o=v[v.length-1];for(var c=0,h=v.length;c<h;c++){f=v[c];if(t(f,a,n)){if(!t(o,a,n)){s.push(i(a,n,o,f))}s.push(f)}else if(t(o,a,n)){s.push(i(a,n,o,f))}o=f}a=n}if(s.length<3){return[]}s.push(s[0]);return s}};var Pixel=function(){function t(e,r,t){if(t===void 0){t=false}this.className="AMap.Pixel";if(isNaN(e)||isNaN(r)){throw new Error("Invalid Object: Pixel("+e+", "+r+")")}this["x"]=t?Math.round(e):Number(e);this["y"]=t?Math.round(r):Number(r)}t.prototype["getX"]=function(){return this.x};t.prototype["round"]=function(){return new t(Math.round(this.x),Math.round(this.y))};t.prototype["getY"]=function(){return this.y};t.prototype["toString"]=function(){return this.x+","+this.y};t.prototype["equals"]=function(e){if(!(e instanceof t)){return false}var r=Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y));return r<=1e-9};t.prototype["toArray"]=function(){return[this.x,this.y]};t.prototype["subtract"]=function(e,r){return new t(this.x-e.x,this.y-e.y,r)};t.prototype["multiplyBy"]=function(e,r){return new t(this.x*e,this.y*e,r)};t.prototype["direction"]=function(){var e=this.x;var r=this.y;if(e===0&&r===0){return null}if(e===0){return r>0?90:270}var t=Math.atan(r/e)*180/Math.PI;if(e<0&&r>0){return t+180}else if(e<0&&r<0){return t+180}else if(e>0&&r<0){return t+360}else{return t}};t.prototype.toJSON=function(){return[this.x,this.y]};return t}();var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports(e){return e&&e.gP&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function createCommonjsModule(e,r){return r={exports:{}},e(r,r.exports),r.exports}function getCjsExportFromNamespace(e){return e&&e["default"]||e}var dist=createCommonjsModule(function(e,t){(function(e,r){r(t)})(commonjsGlobal,function(e){function i(e,r){return e>r?1:e<r?-1:0}var g=function e(r,t){if(r===void 0)r=i;if(t===void 0)t=false;this.bP=r;this.yP=null;this._size=0;this.mP=!!t};var r={size:{configurable:true}};g.prototype.TP=function e(r){var t=r.right;if(t){r.right=t.left;if(t.left){t.left.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.left=r}r.parent=t};g.prototype.wP=function e(r){var t=r.left;if(t){r.left=t.right;if(t.right){t.right.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.right=r}r.parent=t};g.prototype.AP=function e(r){while(r.parent){var t=r.parent;if(!t.parent){if(t.left===r){this.wP(t)}else{this.TP(t)}}else if(t.left===r&&t.parent.left===t){this.wP(t.parent);this.wP(t)}else if(t.right===r&&t.parent.right===t){this.TP(t.parent);this.TP(t)}else if(t.left===r&&t.parent.right===t){this.wP(t);this.TP(t)}else{this.TP(t);this.wP(t)}}};g.prototype.xP=function e(r){var t,i,a,n,o;while(r.parent){t=r.parent;i=t.parent;if(i&&i.parent){a=i.parent;if(a.left===i){a.left=r}else{a.right=r}r.parent=a}else{r.parent=null;this.yP=r}n=r.left;o=r.right;if(r===t.left){if(i){if(i.left===t){if(t.right){i.left=t.right;i.left.parent=i}else{i.left=null}t.right=i;i.parent=t}else{if(n){i.right=n;n.parent=i}else{i.right=null}r.left=i;i.parent=r}}if(o){t.left=o;o.parent=t}else{t.left=null}r.right=t;t.parent=r}else{if(i){if(i.right===t){if(t.left){i.right=t.left;i.right.parent=i}else{i.right=null}t.left=i;i.parent=t}else{if(o){i.left=o;o.parent=i}else{i.left=null}r.right=i;i.parent=r}}if(n){t.right=n;n.parent=t}else{t.right=null}r.left=t;t.parent=r}}};g.prototype.replace=function e(r,t){if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.parent=r.parent}};g.prototype.MP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.left){r=r.left}}return r};g.prototype.SP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.right){r=r.right}}return r};g.prototype.Xc=function e(r,t){var i=this.yP;var a=null;var n=this.bP;var o;if(this.mP){while(i){a=i;o=n(i.key,r);if(o===0){return}else if(n(i.key,r)<0){i=i.right}else{i=i.left}}}else{while(i){a=i;if(n(i.key,r)<0){i=i.right}else{i=i.left}}}i={key:r,data:t,left:null,right:null,parent:a};if(!a){this.yP=i}else if(n(a.key,i.key)<0){a.right=i}else{a.left=i}this.xP(i);this._size++;return i};g.prototype.find=function e(r){var t=this.yP;var i=this.bP;while(t){var a=i(t.key,r);if(a<0){t=t.right}else if(a>0){t=t.left}else{return t}}return null};g.prototype.contains=function e(r){var t=this.yP;var i=this.bP;while(t){var a=i(r,t.key);if(a===0){return true}else if(a<0){t=t.left}else{t=t.right}}return false};g.prototype.remove=function e(r){var t=this.find(r);if(!t){return false}this.xP(t);if(!t.left){this.replace(t,t.right)}else if(!t.right){this.replace(t,t.left)}else{var i=this.MP(t.right);if(i.parent!==t){this.replace(i,i.right);i.right=t.right;i.right.parent=i}this.replace(t,i);i.left=t.left;i.left.parent=i}this._size--;return true};g.prototype.removeNode=function e(r){if(!r){return false}this.xP(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var t=this.MP(r.right);if(t.parent!==r){this.replace(t,t.right);t.right=r.right;t.right.parent=t}this.replace(r,t);t.left=r.left;t.left.parent=t}this._size--;return true};g.prototype.$P=function e(r){var t=this.find(r);if(!t){return}this.xP(t);var i=t.left;var a=t.right;var n=null;if(i){i.parent=null;n=this.SP(i);this.xP(n);this.yP=n}if(a){if(i){n.right=a}else{this.yP=a}a.parent=n}this._size--};g.prototype.pop=function e(){var r=this.yP,t=null;if(r){while(r.left){r=r.left}t={key:r.key,data:r.data};this.remove(r.key)}return t};g.prototype.next=function e(r){var t=r;if(t){if(t.right){t=t.right;while(t&&t.left){t=t.left}}else{t=r.parent;while(t&&t.right===r){r=t;t=t.parent}}}return t};g.prototype.NM=function e(r){var t=r;if(t){if(t.left){t=t.left;while(t&&t.right){t=t.right}}else{t=r.parent;while(t&&t.left===r){r=t;t=t.parent}}}return t};g.prototype.forEach=function e(r){var t=this.yP;var i=[],a=false,n=0;while(!a){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();r(t,n++);t=t.right}else{a=true}}}return this};g.prototype.range=function e(r,t,i,a){var n=[];var o=this.bP;var f=this.yP,s;while(n.length!==0||f){if(f){n.push(f);f=f.left}else{f=n.pop();s=o(f.key,t);if(s>0){break}else if(o(f.key,r)>=0){if(i.call(a,f)){return this}}f=f.right}}return this};g.prototype.keys=function e(){var r=this.yP;var t=[],i=[],a=false;while(!a){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.key);r=r.right}else{a=true}}}return i};g.prototype.values=function e(){var r=this.yP;var t=[],i=[],a=false;while(!a){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.data);r=r.right}else{a=true}}}return i};g.prototype.at=function e(r){var t=this.yP;var i=[],a=false,n=0;while(!a){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();if(n===r){return t}n++;t=t.right}else{a=true}}}return null};g.prototype.load=function e(r,t,i){if(r===void 0)r=[];if(t===void 0)t=[];if(i===void 0)i=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var a=r.length;if(i){u(r,t,0,a-1,this.bP)}this.yP=l(null,r,t,0,a);this._size=a;return this};g.prototype.min=function e(){var r=this.MP(this.yP);if(r){return r.key}else{return null}};g.prototype.max=function e(){var r=this.SP(this.yP);if(r){return r.key}else{return null}};g.prototype.isEmpty=function e(){return this.yP===null};r.size.get=function(){return this._size};g.LP=function e(r,t,i,a,n){return new g(i,n).load(r,t,a)};Object.defineProperties(g.prototype,r);function l(e,r,t,i,a){var n=a-i;if(n>0){var o=i+Math.floor(n/2);var f=r[o];var s=t[o];var u={key:f,data:s,parent:e};u.left=l(u,r,t,i,o);u.right=l(u,r,t,o+1,a);return u}return null}function u(e,r,t,i,a){if(t>=i){return}var n=e[t+i>>1];var o=t-1;var f=i+1;while(true){do{o++}while(a(e[o],n)<0);do{f--}while(a(e[f],n)>0);if(o>=f){break}var s=e[o];e[o]=e[f];e[f]=s;s=r[o];r[o]=r[f];r[f]=s}u(e,r,t,f,a);u(e,r,f+1,i,a)}var o=0;var s=1;var v=2;var c=3;var y=0;var f=1;var m=2;var h=3;function p(e,r,t){if(r===null){e.PP=false;e.OP=true}else{if(e._P===r._P){e.PP=!r.PP;e.OP=r.OP}else{e.PP=!r.OP;e.OP=r.NP()?!r.PP:r.PP}if(r){e.CP=!a(r,t)||r.NP()?r.CP:r}}var i=a(e,t);if(i){e.hN=n(e,t)}else{e.hN=0}}function a(e,r){switch(e.type){case o:switch(r){case y:return!e.OP;case f:return e.OP;case m:return e._P&&e.OP||!e._P&&!e.OP;case h:return true}break;case v:return r===y||r===f;case c:return r===m;case s:return false}return false}function n(e,r){var t=!e.PP;var i=!e.OP;var a;switch(r){case y:a=t&&i;break;case f:a=t||i;break;case h:a=t^i;break;case m:if(e._P){a=t&&!i}else{a=i&&!t}break}return a?+1:-1}var d=function e(r,t,i,a,n){this.left=t;this.point=r;this.IP=i;this._P=a;this.type=n||o;this.PP=false;this.OP=false;this.CP=null;this.hN=0;this.lN=-1;this.dN=-1;this.DP=true};var t={EP:{configurable:true}};d.prototype.FP=function e(r){var t=this.point,i=this.IP.point;return this.left?(t[0]-r[0])*(i[1]-r[1])-(i[0]-r[0])*(t[1]-r[1])>0:(i[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(i[1]-r[1])>0};d.prototype.RP=function e(r){return!this.FP(r)};d.prototype.NP=function e(){return this.point[0]===this.IP.point[0]};t.EP.get=function(){return this.hN!==0};d.prototype.clone=function e(){var r=new d(this.point,this.left,this.IP,this._P,this.type);r.UP=this.UP;r.hN=this.hN;r.CP=this.CP;r.DP=this.DP;r.PP=this.PP;r.OP=this.OP;return r};Object.defineProperties(d.prototype,t);function _(e,r){if(e[0]===r[0]){if(e[1]===r[1]){return true}else{return false}}return false}var b=11102230246251565e-32;var R=134217729;var E=(3+8*b)*b;function O(e,r,t,i,a){var n,o,f,s;var u=r[0];var l=i[0];var v=0;var c=0;if(l>u===l>-u){n=u;u=r[++v]}else{n=l;l=i[++c]}var h=0;if(v<e&&c<t){if(l>u===l>-u){o=u+n;f=n-(o-u);u=r[++v]}else{o=l+n;f=n-(o-l);l=i[++c]}n=o;if(f!==0){a[h++]=f}while(v<e&&c<t){if(l>u===l>-u){o=n+u;s=o-n;f=n-(o-s)+(u-s);u=r[++v]}else{o=n+l;s=o-n;f=n-(o-s)+(l-s);l=i[++c]}n=o;if(f!==0){a[h++]=f}}}while(v<e){o=n+u;s=o-n;f=n-(o-s)+(u-s);u=r[++v];n=o;if(f!==0){a[h++]=f}}while(c<t){o=n+l;s=o-n;f=n-(o-s)+(l-s);l=i[++c];n=o;if(f!==0){a[h++]=f}}if(n!==0||h===0){a[h++]=n}return h}function D(e,r){var t=r[0];for(var i=1;i<e;i++){t+=r[i]}return t}function x(e){return commonjsGlobal.Float64Array?new Float64Array(e):new Array(e)}var C=(3+16*b)*b;var U=(2+12*b)*b;var N=(9+64*b)*b*b;var B=x(4);var H=x(8);var z=x(12);var G=x(16);var j=x(4);function S(e,r,t,i,a,n,o){var f,s,u,l;var v,c,h,d,_,g,y,m,p,b,x,C,S,M;var w=e-a;var k=t-a;var T=r-n;var I=i-n;b=w*I;c=R*w;h=c-(c-w);d=w-h;c=R*I;_=c-(c-I);g=I-_;x=d*g-(b-h*_-d*_-h*g);C=T*k;c=R*T;h=c-(c-T);d=T-h;c=R*k;_=c-(c-k);g=k-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;B[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;B[1]=p-(y+v)+(v-C);M=m+y;v=M-m;B[2]=m-(M-v)+(y-v);B[3]=M;var A=D(4,B);var $=U*o;if(A>=$||-A>=$){return A}v=e-w;f=e-(w+v)+(v-a);v=t-k;u=t-(k+v)+(v-a);v=r-T;s=r-(T+v)+(v-n);v=i-I;l=i-(I+v)+(v-n);if(f===0&&s===0&&u===0&&l===0){return A}$=N*o+E*Math.abs(A);A+=w*l+I*f-(T*u+k*s);if(A>=$||-A>=$){return A}b=f*I;c=R*f;h=c-(c-f);d=f-h;c=R*I;_=c-(c-I);g=I-_;x=d*g-(b-h*_-d*_-h*g);C=s*k;c=R*s;h=c-(c-s);d=s-h;c=R*k;_=c-(c-k);g=k-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var F=O(4,B,4,j,H);b=w*l;c=R*w;h=c-(c-w);d=w-h;c=R*l;_=c-(c-l);g=l-_;x=d*g-(b-h*_-d*_-h*g);C=T*u;c=R*T;h=c-(c-T);d=T-h;c=R*u;_=c-(c-u);g=u-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var P=O(F,H,4,j,z);b=f*l;c=R*f;h=c-(c-f);d=f-h;c=R*l;_=c-(c-l);g=l-_;x=d*g-(b-h*_-d*_-h*g);C=s*u;c=R*s;h=c-(c-s);d=s-h;c=R*u;_=c-(c-u);g=u-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var L=O(P,z,4,j,G);return G[L-1]}function M(e,r,t,i,a,n){var o=(r-n)*(t-a);var f=(e-a)*(i-n);var s=o-f;if(o===0||f===0||o>0!==f>0){return s}var u=Math.abs(o+f);if(Math.abs(s)>=C*u){return s}return-S(e,r,t,i,a,n,u)}function w(e,r,t){var i=M(e[0],e[1],r[0],r[1],t[0],t[1]);if(i>0){return-1}if(i<0){return 1}return 0}function k(e,r){var t=e.point;var i=r.point;if(t[0]>i[0]){return 1}if(t[0]<i[0]){return-1}if(t[1]!==i[1]){return t[1]>i[1]?1:-1}return T(e,r,t)}function T(e,r,t,i){if(e.left!==r.left){return e.left?1:-1}if(w(t,e.IP.point,r.IP.point)!==0){return!e.FP(r.IP.point)?1:-1}return!e._P&&r._P?1:-1}function I(e,r,t){var i=new d(r,false,e,e._P);var a=new d(r,true,e.IP,e._P);if(_(e.point,e.IP.point)){console.warn("what is that, a collapsed segment?",e)}i.UP=a.UP=e.UP;if(k(a,e.IP)>0){e.IP.left=true;a.left=false}e.IP.IP=a;e.IP=i;t.push(a);t.push(i);return t}function A(e,r){return e[0]*r[1]-e[1]*r[0]}function $(e,r){return e[0]*r[0]+e[1]*r[1]}function F(e,r,t,i,a){var n=[r[0]-e[0],r[1]-e[1]];var o=[i[0]-t[0],i[1]-t[1]];function f(e,r,t){return[e[0]+r*t[0],e[1]+r*t[1]]}var s=[t[0]-e[0],t[1]-e[1]];var u=A(n,o);var l=u*u;var v=$(n,n);if(l>0){var c=A(s,o)/u;if(c<0||c>1){return null}var h=A(s,n)/u;if(h<0||h>1){return null}if(c===0||c===1){return a?null:[f(e,c,n)]}if(h===0||h===1){return a?null:[f(t,h,o)]}return[f(e,c,n)]}u=A(s,n);l=u*u;if(l>0){return null}var d=$(n,s)/v;var _=d+$(n,o)/v;var g=Math.min(d,_);var y=Math.max(d,_);if(g<=1&&y>=0){if(g===1){return a?null:[f(e,g>0?g:0,n)]}if(y===0){return a?null:[f(e,y<1?y:1,n)]}if(a&&g===0&&y===1){return null}return[f(e,g>0?g:0,n),f(e,y<1?y:1,n)]}return null}function P(e,r,t){var i=F(e.point,e.IP.point,r.point,r.IP.point);var a=i?i.length:0;if(a===0){return 0}if(a===1&&(_(e.point,r.point)||_(e.IP.point,r.IP.point))){return 0}if(a===2&&e._P===r._P){return 0}if(a===1){if(!_(e.point,i[0])&&!_(e.IP.point,i[0])){I(e,i[0],t)}if(!_(r.point,i[0])&&!_(r.IP.point,i[0])){I(r,i[0],t)}return 1}var n=[];var o=false;var f=false;if(_(e.point,r.point)){o=true}else if(k(e,r)===1){n.push(r,e)}else{n.push(e,r)}if(_(e.IP.point,r.IP.point)){f=true}else if(k(e.IP,r.IP)===1){n.push(r.IP,e.IP)}else{n.push(e.IP,r.IP)}if(o&&f||o){r.type=s;e.type=r.PP===e.PP?v:c;if(o&&!f){I(n[1].IP,n[0].point,t)}return 2}if(f){I(n[0],n[1].point,t);return 3}if(n[0]!==n[3].IP){I(n[0],n[1].point,t);I(n[1],n[2].point,t);return 3}I(n[0],n[1].point,t);I(n[3].IP,n[2].point,t);return 3}function L(e,r){if(e===r){return 0}if(w(e.point,e.IP.point,r.point)!==0||w(e.point,e.IP.point,r.IP.point)!==0){if(_(e.point,r.point)){return e.FP(r.IP.point)?-1:1}if(e.point[0]===r.point[0]){return e.point[1]<r.point[1]?-1:1}if(k(e,r)===1){return r.RP(e.point)?-1:1}return e.FP(r.point)?-1:1}if(e._P===r._P){var t=e.point,i=r.point;if(t[0]===i[0]&&t[1]===i[1]){t=e.IP.point;i=r.IP.point;if(t[0]===i[0]&&t[1]===i[1]){return 0}else{return e.UP>r.UP?1:-1}}}else{return e._P?-1:1}return k(e,r)===1?1:-1}function V(e,r,t,i,a,n){var o=new g(L);var f=[];var s=Math.min(i[2],a[2]);var u,l,v;while(e.length!==0){var c=e.pop();f.push(c);if(n===y&&c.point[0]>s||n===m&&c.point[0]>i[2]){break}if(c.left){l=u=o.Xc(c);v=o.MP();if(u!==v){u=o.NM(u)}else{u=null}l=o.next(l);var h=u?u.key:null;var d=void 0;p(c,h,n);if(l){if(P(c,l.key,e)===2){p(c,h,n);p(c,l.key,n)}}if(u){if(P(u.key,c,e)===2){var _=u;if(_!==v){_=o.NM(_)}else{_=null}d=_?_.key:null;p(h,d,n);p(c,h,n)}}}else{c=c.IP;l=u=o.find(c);if(u&&l){if(u!==v){u=o.NM(u)}else{u=null}l=o.next(l);o.remove(c);if(l&&u){P(u.key,l.key,e)}}}}return f}var W=function e(){this.points=[];this.vN=[];this.gN=null;this.depth=null};W.prototype.pN=function e(){return this.gN==null};function q(e){var r,t,i,a;var n=[];for(t=0,i=e.length;t<i;t++){r=e[t];if(r.left&&r.EP||!r.left&&r.IP.EP){n.push(r)}}var o=false;while(!o){o=true;for(t=0,i=n.length;t<i;t++){if(t+1<i&&k(n[t],n[t+1])===1){a=n[t];n[t]=n[t+1];n[t+1]=a;o=false}}}for(t=0,i=n.length;t<i;t++){r=n[t];r.lN=t}for(t=0,i=n.length;t<i;t++){r=n[t];if(!r.left){a=r.lN;r.lN=r.IP.lN;r.IP.lN=a}}return n}function Z(e,r,t,i){var a=e+1,n=r[e].point,o;var f=r.length;if(a<f){o=r[a].point}while(a<f&&o[0]===n[0]&&o[1]===n[1]){if(!t[a]){return a}else{a++}o=r[a].point}a=e-1;while(t[a]&&a>i){a--}return a}function Y(e,r,t){var i=new W;if(e.CP!=null){var a=e.CP;var n=a.dN;var o=a.hN;if(o>0){var f=r[n];if(f.gN!=null){var s=f.gN;r[s].vN.push(t);i.gN=s;i.depth=r[n].depth}else{r[n].vN.push(t);i.gN=n;i.depth=r[n].depth+1}}else{i.gN=null;i.depth=r[n].depth}}else{i.gN=null;i.depth=0}return i}function K(e){var o,r;var f=q(e);var s={};var u=[];var t=function(){if(s[o]){return}var r=u.length;var e=Y(f[o],u,r);var t=function(e){s[e]=true;f[e].dN=r};var i=o;var a=o;var n=f[o].point;e.points.push(n);while(true){t(i);i=f[i].lN;t(i);e.points.push(f[i].point);i=Z(i,f,s,a);if(i==a){break}}u.push(e)};for(o=0,r=f.length;o<r;o++)t();return u}var X=Q;var J=Q;function Q(e,r){if(!(this instanceof Q)){return new Q(e,r)}this.data=e||[];this.length=this.data.length;this.compare=r||ee;if(this.length>0){for(var t=(this.length>>1)-1;t>=0;t--){this.zP(t)}}}function ee(e,r){return e<r?-1:e>r?1:0}Q.prototype={push:function(e){this.data.push(e);this.length++;this.El(this.length-1)},pop:function(){if(this.length===0){return undefined}var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this.zP(0)}this.data.pop();return e},GP:function(){return this.data[0]},El:function(e){var r=this.data;var t=this.compare;var i=r[e];while(e>0){var a=e-1>>1;var n=r[a];if(t(i,n)>=0){break}r[e]=n;e=a}r[e]=i},zP:function(e){var r=this.data;var t=this.compare;var i=this.length>>1;var a=r[e];while(e<i){var n=(e<<1)+1;var o=n+1;var f=r[n];if(o<this.length&&t(r[o],f)<0){n=o;f=r[o]}if(t(f,a)>=0){break}r[e]=f;e=n}r[e]=a}};X.default=J;var re=Math.max;var te=Math.min;var ie=0;function ae(e,r,t,i,a,n){var o,f,s,u,l,v;for(o=0,f=e.length-1;o<f;o++){s=e[o];u=e[o+1];l=new d(s,false,undefined,r);v=new d(u,false,l,r);l.IP=v;if(s[0]===u[0]&&s[1]===u[1]){continue}l.UP=v.UP=t;if(!n){l.DP=false;v.DP=false}if(k(l,v)>0){v.left=true}else{l.left=true}var c=s[0],h=s[1];a[0]=te(a[0],c);a[1]=te(a[1],h);a[2]=re(a[2],c);a[3]=re(a[3],h);i.push(l);i.push(v)}}function ne(e,r,t,i,a){var n=new X(null,k);var o,f,s,u,l,v;for(s=0,u=e.length;s<u;s++){o=e[s];for(l=0,v=o.length;l<v;l++){f=l===0;if(f){ie++}ae(o[l],true,ie,n,t,f)}}for(s=0,u=r.length;s<u;s++){o=r[s];for(l=0,v=o.length;l<v;l++){f=l===0;if(a===m){f=false}if(f){ie++}ae(o[l],false,ie,n,i,f)}}return n}var oe=[];function fe(e,r,t){var i=null;if(e.length*r.length===0){if(t===y){i=oe}else if(t===m){i=e}else if(t===f||t===h){i=e.length===0?r:e}}return i}function se(e,r,t,i,a){var n=null;if(t[0]>i[2]||i[0]>t[2]||t[1]>i[3]||i[1]>t[3]){if(a===y){n=oe}else if(a===m){n=e}else if(a===f||a===h){n=e.concat(r)}}return n}function ue(e,r,t){if(typeof e[0][0][0]==="number"){e=[e]}if(typeof r[0][0][0]==="number"){r=[r]}var i=fe(e,r,t);if(i){return i===oe?null:i}var a=[Infinity,Infinity,-Infinity,-Infinity];var n=[Infinity,Infinity,-Infinity,-Infinity];var o=ne(e,r,a,n,t);i=se(e,r,a,n,t);if(i){return i===oe?null:i}var f=V(o,e,r,a,n,t);var s=K(f);var u=[];for(var l=0;l<s.length;l++){var v=s[l];if(v.pN()){var c=[v.points];for(var h=0;h<v.vN.length;h++){var d=v.vN[h];c.push(s[d].points)}u.push(c)}}return u}function le(e,r){return ue(e,r,f)}function ve(e,r){return ue(e,r,m)}function ce(e,r){return ue(e,r,h)}function he(e,r){return ue(e,r,y)}var de={VP:f,BP:m,HP:y,WP:h};e.ZP=ve;e.qP=he;e.YP=de;e.$q=le;e.xor=ce;Object.defineProperty(e,"gP",{value:true})})});var martinez=unwrapExports(dist);var Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(e,r){function t(e){switch(e){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}var i=t(e);return{project:function(e){if(Util$3.isArray(e)){e=new LngLat$2(e[0],e[1])}return i.project(e.lng,e.lat)},unproject:function(e){if(Util$3.isArray(e)){e=new Pixel(e[0],e[1])}return i.unproject(e.x,e.y)},normalizePoint:function(e){return Util$3.parseLngLatData(e)},distance:function(e,r){r=this["normalizePoint"](r);if(Util$3.isArray(r)){return this["distanceToLine"](e,r)}e=this["normalizePoint"](e);var t=Const.vr;var i=Math.cos;var a=e.lat*t,n=e.lng*t,o=r.lat*t,f=r.lng*t;var s=Const.yr*2;var u=o-a;var l=f-n;var v=(1-i(u)+(1-i(l))*i(a)*i(o))/2;return s*Math.asin(Math.sqrt(v))},ringArea:function(e){e=this["normalizeLine"](e);var r=Const.yr*Const.vr;var t=0,i=e,a=i.length;if(a<3){return 0}var n=0;for(;n<a-1;n+=1){var o=i[n];var f=i[n+1];var s=o.lng*r*Math.cos(o.lat*Const.vr);var u=o.lat*r;var l=f.lng*r*Math.cos(f.lat*Const.vr);var v=f.lat*r;t+=s*v-l*u}var c=i[n];var h=i[0];var d=c.lng*r*Math.cos(c.lat*Const.vr);var _=c.lat*r;var g=h.lng*r*Math.cos(h.lat*Const.vr);var y=h.lat*r;t+=d*y-g*_;var m=.5*Math.abs(t);return m},sphericalCalotteArea:function(e){var r=Const.yr;var t=e/r;var i=r-r*Math.cos(t);return 2*Math.PI*r*i}}}function getPlanarCrs(){return{normalizePoint:function(e){if(e&&e["x"]&&e["y"]){return[e["x"],e["y"]]}return e},distance:function(e,r){var t=e[0]-r[0],i=e[1]-r[1];return Math.sqrt(t*t+i*i)},project:function(e){return e},unproject:function(e){return e},ringArea:function(e){var r=[0,0];var t=[0,0];var i=0;var a=e[0];var n=e.length;for(var o=2;o<n;o++){var f=e[o-1];var s=e[o];r[0]=a[0]-s[0];r[1]=a[1]-s[1];t[0]=a[0]-f[0];t[1]=a[1]-f[1];i+=r[0]*t[1]-r[1]*t[0]}return i/2}}}function isClockwise(e){var r=0;var t=e.length;for(var i=0;i<t-1;i++){var a=e[i],n=e[i+1];r+=(n[0]-a[0])*(n[1]+a[1])}if(e[t-1][0]!==e[0][0]||e[t-1][1]!==e[0][1]){var a=e[t-1],n=e[0];r+=(n[0]-a[0])*(n[1]+a[1])}return r>0}var GeometryUtilCls=function(){function r(e){this.CLASS_NAME="AMap.GeometryUtil";this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:zoomRange[1]},e);this["setCrs"](this._opts["crs"])}r.prototype["clone"]=function(e){return new r(assign({},this._opts,e))};r.prototype["isPoint"]=function(e){return e&&(e instanceof LngLat$2||Util$3.isArray(e)&&!isNaN(e[0]))};r.prototype["normalizePoint"]=function(e){return e};r.prototype["normalizeLine"]=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["normalizePoint"](e[t]))}return r};r.prototype["normalizeMultiLines"]=function(e){if(Util$3.isArray(e)&&this["isPoint"](e[0])){e=[e]}var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["normalizeLine"](e[t]))}return r};r.prototype["setCrs"]=function(e){var r;if(e&&e["project"]&&e["unproject"]){r=e}else if(e==="plane"){r=getPlanarCrs()}else{r=getSphericalCrs(e,this._opts["maxZoom"])}assign(this,r);return};r.prototype["distance"]=function(e,r){throw new Error("distance Not implemented!")};r.prototype.xr=function(e,r){e=this["normalizeLine"](e);if(!this["isPoint"](e[0])){e=e[0]}var t=[];for(var i=0,a=e.length;i<a;i++){t.push(this["project"](e[i]))}if(r===true){t=this["makesureClockwise"](t)}else if(r===false){t=this["makesureClockwise"](t);t.reverse()}return t};r.prototype.br=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["unproject"](e[t]))}return r};r.prototype["closestOnSegment"]=function(e,r,t){var i=Coordinate.closestOnSegment(this["project"](e),this.xr([r,t]));return this["unproject"](i)};r.prototype["closestOnLine"]=function(e,r){r=this["normalizeLine"](r);var t=Infinity,i;for(var a=0,n=r.length;a<n-1;a++){var o=this["closestOnSegment"](e,r[a],r[a+1]),f=this["distance"](e,o);if(f<t){t=f;i=o}}return i};r.prototype["distanceToSegment"]=function(e,r,t){return this["distanceToLine"](e,[r,t])};r.prototype["distanceToLine"]=function(e,r){r=this["normalizeLine"](r);if(!this["isPoint"](r[0])){r=r[0]}var t=Infinity;for(var i=0,a=r.length;i<a-1;i++){var n=this["closestOnSegment"](e,r[i],r[i+1]);t=Math.min(t,this["distance"](e,n))}return t};r.prototype["distanceToPolygon"]=function(e,r){if(this["isPointInRing"](e,r)){return 0}else{return this["distanceToLine"](e,r)}};r.prototype["isPointOnSegment"]=function(e,r,t,i){if(!i&&i!==0||i<0){i=this._opts["onSegmentTolerance"]}return this["distanceToSegment"](e,r,t)<=i};r.prototype["isPointOnLine"]=function(e,r,t){r=this["normalizeLine"](r);for(var i=0,a=r.length;i<a-1;i++){if(this["isPointOnSegment"](e,r[i],r[i+1],t)){return true}}return false};r.prototype["isPointOnRing"]=function(e,r,t){r=this["normalizeLine"](r);for(var i=0,a=r.length;i<a;i++){if(this["isPointOnSegment"](e,r[i],r[i===a-1?0:i+1],t)){return true}}return false};r.prototype["isPointOnPolygon"]=function(e,r,t){r=this["normalizeMultiLines"](r);for(var i=0,a=r.length;i<a;i++){if(this["isPointOnRing"](e,r[i],t)){return true}}return false};r.prototype["makesureClockwise"]=function(e){if(!isClockwise(e)){e=[].concat(e);e.reverse()}return e};r.prototype["makesureAntiClockwise"]=function(e){if(isClockwise(e)){e=[].concat(e);e.reverse()}return e};r.prototype["pointInRing"]=function(e,r,t){var i=false;for(var a=0;a<r.length&&!i;a++){if(f(e,r[a][0],t)){var n=false;var o=1;while(o<r[a].length&&!n){if(f(e,r[a][o],!t)){n=true}o++}if(!n){i=true}}}function f(e,r,t){var i=false;if(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]){r=r.slice(0,r.length-1)}for(var a=0,n=r.length-1;a<r.length;n=a++){var o=r[a][0];var f=r[a][1];var s=r[n][0];var u=r[n][1];var l=e[1]*(o-s)+f*(s-e[0])+u*(e[0]-o)===0&&(o-e[0])*(s-e[0])<=0&&(f-e[1])*(u-e[1])<=0;if(l){return!t}var v=f>e[1]!==u>e[1]&&e[0]<(s-o)*(e[1]-f)/(u-f)+o;if(v){i=!i}}return i}return i};r.prototype["isPointInBbox"]=function(e,r){var t=Infinity;var i=Infinity;var a=-Infinity;var n=-Infinity;for(var o=0;o<r.length;o++){var f=r[o];t=Math.min(t,f[0]);a=Math.max(a,f[0]);i=Math.min(i,f[1]);n=Math.max(n,f[1])}return e[0]>t&&e[0]<a&&e[1]>i&&e[1]<n};r.prototype["isPointInRing"]=function(e,r){r=this["normalizeLine"](r);var t=this.xr(r,true);var i=Coordinate.ss(this["project"](e),t,false);return i};r.prototype["isRingInRing"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this["isPointInRing"](e[t],r)){return false}}return true};r.prototype["isRingInRingByOutsea"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this["isPointInRing"](e[t],r)){return true}}for(var t=0,i=r.length;t<i;t++){if(this["isPointInRing"](r[t],e)){return true}}return false};r.prototype["isRingInRingByMapbox"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this["isPointInRing"](e[t],r)){return false}}return true};r.prototype["isRingInRingByMapboxB"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this["isPointInRing"](e[t],r)){return true}}return false};r.prototype["isPixelRingInRing"]=function(e,r){for(var t=0,i=e.length;t<i;t++){var a=Coordinate.ss(e[t],r,false);if(a){return true}}return false};r.prototype["isPointInPolygon"]=function(e,r){r=this["normalizeMultiLines"](r);var t;for(var i=0,a=r.length;i<a;i+=1){t=this["isPointInRing"](e,r[i]);if(i>0){t=!t}if(!t){break}}return Boolean(t)};r.prototype["isPointInPolygons"]=function(e,r){for(var t=0;t<r.length;t++){var i=r[t];i=this["normalizeMultiLines"](i);var a=void 0;for(var n=0,o=i.length;n<o;n+=1){a=this["isPointInRing"](e,i[n]);if(n>0){a=!a}if(!a){break}}if(a){return true}}return false};r.prototype["doesSegmentsIntersect"]=function(e,r,t,i){var a=this.xr([e,r,t,i]);e=a[0];r=a[1];t=a[2];i=a[3];var n=false;var o=(i[0]-t[0])*(e[1]-t[1])-(i[1]-t[1])*(e[0]-t[0]);var f=(r[0]-e[0])*(e[1]-t[1])-(r[1]-e[1])*(e[0]-t[0]);var s=(i[1]-t[1])*(r[0]-e[0])-(i[0]-t[0])*(r[1]-e[1]);if(s!==0){var u=o/s;var l=f/s;if(0<=u&&u<=1&&0<=l&&l<=1){n=true}}return n};r.prototype["doesSegmentLineIntersect"]=function(e,r,t){t=this["normalizeLine"](t);for(var i=0,a=t.length;i<a-1;i++){if(this["doesSegmentsIntersect"](e,r,t[i],t[i+1])){return true}}return false};r.prototype["doesSegmentRingIntersect"]=function(e,r,t){t=this["normalizeLine"](t);for(var i=0,a=t.length;i<a;i++){if(this["doesSegmentsIntersect"](e,r,t[i],t[i===a-1?0:i+1])){return true}}return false};r.prototype["doesSegmentPolygonIntersect"]=function(e,r,t){t=this["normalizeMultiLines"](t);for(var i=0,a=t.length;i<a;i++){if(this["doesSegmentRingIntersect"](e,r,t[i])){return true}}return false};r.prototype["doesLineLineIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i-1;t++){if(this["doesSegmentLineIntersect"](e[t],e[t+1],r)){return true}}return false};r.prototype["doesLineRingIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i-1;t++){if(this["doesSegmentRingIntersect"](e[t],e[t+1],r)){return true}}return false};r.prototype["doesPolygonPolygonIntersect"]=function(e,r){if(this["doesRingRingIntersect"](r,e)||this["isRingInRing"](e,r)||this["isRingInRing"](r,e)){return true}return false};r.prototype["doesRingRingIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i;t++){if(this["doesSegmentRingIntersect"](e[t],e[t===i-1?0:t+1],r)){return true}}return false};r.prototype["along"]=function(e,r){var t=0;for(var i=0;i<e.length-1;i+=1){var a=this["distance"](e[i],e[i+1]);if(a+t<r){t+=a;continue}var n=(r-t)/a;return[e[i][0]+n*(e[i+1][0]-e[i][0]),e[i][1]+n*(e[i+1][1]-e[i][1]),i]}return null};r.prototype.gr=function(e,r){e=this["makesureAntiClockwise"](e);r=this["makesureClockwise"](r);var n,o,f,s;var t=function(e){return(o[0]-n[0])*(e[1]-n[1])>(o[1]-n[1])*(e[0]-n[0])};var i=function(){var e=[n[0]-o[0],n[1]-o[1]],r=[f[0]-s[0],f[1]-s[1]],t=n[0]*o[1]-n[1]*o[0],i=f[0]*s[1]-f[1]*s[0],a=1/(e[0]*r[1]-e[1]*r[0]);return[(t*r[0]-i*e[0])*a,(t*r[1]-i*e[1])*a]};var a=e;n=r[r.length-1];for(var u=0,l=r.length;u<l;u++){o=r[u];var v=a;a=[];f=v[v.length-1];for(var c=0,h=v.length;c<h;c++){s=v[c];if(t(s)){if(!t(f)){a.push(i())}a.push(s)}else if(t(f)){a.push(i())}f=s}n=o}return a};r.prototype["ringRingClip"]=function(e,r){e=this.xr(e);r=this.xr(r);if(!isEqual(e[0],e[e.length-1])){e.push(e[0].slice())}if(!isEqual(r[0],r[r.length-1])){r.push(r[0].slice())}var t=martinez.qP([e],[r]);if(!t||!t[0]||!t[0][0]){return[]}return this.br(t[0][0])};r.prototype["ringArea"]=function(e){throw new Error("distance Not implemented!")};r.prototype["distanceOfLine"]=function(e){e=this["normalizeLine"](e);var r=0;for(var t=0,i=e.length;t<i-1;t++){r+=this["distance"](e[t],e[t+1])}return r};r.prototype["isClockwise"]=function(e){e=this.xr(e);return isClockwise(e)};r.prototype["typePolygon"]=function(e){if(!isArray(e)||!isArray(e[0])){return"never"}if(e[0][0].length===2||e[0][0]instanceof LngLat$2){return"Polygon"}else if(e[0][0].length>2&&(e[0][0][0].length===2||e[0][0][0]instanceof LngLat$2)){return"MultiPolygon"}else{return"never"}};return r}();var GeometryUtilInstance=new GeometryUtilCls({});var PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance["setCrs"]("plane");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isPointInBbox:GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointInPolygons:GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)};var PlaneGeometryUtil={distance:PlaneGeometryUtilInstance.distance.bind(PlaneGeometryUtilInstance),ringArea:PlaneGeometryUtilInstance.ringArea.bind(PlaneGeometryUtilInstance),isClockwise:PlaneGeometryUtilInstance.isClockwise.bind(PlaneGeometryUtilInstance),typePolygon:PlaneGeometryUtilInstance.typePolygon.bind(PlaneGeometryUtilInstance),makesureClockwise:PlaneGeometryUtilInstance.makesureClockwise.bind(PlaneGeometryUtilInstance),makesureAntiClockwise:PlaneGeometryUtilInstance.makesureAntiClockwise.bind(PlaneGeometryUtilInstance),distanceOfLine:PlaneGeometryUtilInstance.distanceOfLine.bind(PlaneGeometryUtilInstance),ringRingClip:PlaneGeometryUtilInstance.ringRingClip.bind(PlaneGeometryUtilInstance),doesSegmentsIntersect:PlaneGeometryUtilInstance.doesSegmentsIntersect.bind(PlaneGeometryUtilInstance),doesSegmentLineIntersect:PlaneGeometryUtilInstance.doesSegmentLineIntersect.bind(PlaneGeometryUtilInstance),doesSegmentRingIntersect:PlaneGeometryUtilInstance.doesSegmentRingIntersect.bind(PlaneGeometryUtilInstance),doesSegmentPolygonIntersect:PlaneGeometryUtilInstance.doesSegmentPolygonIntersect.bind(PlaneGeometryUtilInstance),doesLineLineIntersect:PlaneGeometryUtilInstance.doesLineLineIntersect.bind(PlaneGeometryUtilInstance),doesLineRingIntersect:PlaneGeometryUtilInstance.doesLineRingIntersect.bind(PlaneGeometryUtilInstance),doesRingRingIntersect:PlaneGeometryUtilInstance.doesRingRingIntersect.bind(PlaneGeometryUtilInstance),pointInRing:PlaneGeometryUtilInstance.pointInRing.bind(PlaneGeometryUtilInstance),isPointInRing:PlaneGeometryUtilInstance.isPointInRing.bind(PlaneGeometryUtilInstance),isPointInBbox:PlaneGeometryUtilInstance.isPointInBbox.bind(PlaneGeometryUtilInstance),isRingInRing:PlaneGeometryUtilInstance.isRingInRing.bind(PlaneGeometryUtilInstance),isPointInPolygon:PlaneGeometryUtilInstance.isPointInPolygon.bind(PlaneGeometryUtilInstance),isPointInPolygons:PlaneGeometryUtilInstance.isPointInPolygons.bind(PlaneGeometryUtilInstance),isPointOnSegment:PlaneGeometryUtilInstance.isPointOnSegment.bind(PlaneGeometryUtilInstance),isPointOnLine:PlaneGeometryUtilInstance.isPointOnLine.bind(PlaneGeometryUtilInstance),isPointOnRing:PlaneGeometryUtilInstance.isPointOnRing.bind(PlaneGeometryUtilInstance),isPointOnPolygon:PlaneGeometryUtilInstance.isPointOnPolygon.bind(PlaneGeometryUtilInstance),closestOnSegment:PlaneGeometryUtilInstance.closestOnSegment.bind(PlaneGeometryUtilInstance),closestOnLine:PlaneGeometryUtilInstance.closestOnLine.bind(PlaneGeometryUtilInstance),distanceToSegment:PlaneGeometryUtilInstance.distanceToSegment.bind(PlaneGeometryUtilInstance),distanceToLine:PlaneGeometryUtilInstance.distanceToLine.bind(PlaneGeometryUtilInstance)};var LngLat$2=function(){function o(e,r,t){if(t===void 0){t=false}this.className="AMap.LngLat";if(isNumberArray(e)){e=parseFloat(e[0]);r=parseFloat(e[1])}else{r=parseFloat(r);e=parseFloat(e)}if(isNaN(e)||isNaN(r)){throw Error("Invalid Object: LngLat("+e+", "+r+")")}if(t!==true){r=Math.max(Math.min(r,90),-90);e=(e+180)%360+(e<-180||e===180?180:-180)}this.kT=r;this.KL=e;this.lng=Math.round(e*1e6)/1e6;this.lat=Math.round(r*1e6)/1e6;this.pos=ProjectionManager.getProjection("EPSG:3857").project(e,r)}o.from=function(e){if(isLngLat(e)){return new o(e.KL,e.kT)}return new o(e[0],e[1])};o.prototype["setLng"]=function(e){this.KL=e;this.lng=Math.round(e*1e6)/1e6;return this};o.prototype["setLat"]=function(e){this.kT=e;this.lat=Math.round(e*1e6)/1e6;return this};o.prototype["getLng"]=function(){return this.lng};o.prototype["getLat"]=function(){return this.lat};o.prototype["equals"]=function(e){e=parseLngLatData(e);if(!(e instanceof o)){return false}var r=Math.max(Math.abs(this.kT-e.kT),Math.abs(this.KL-e.KL));return r<=1e-9};o.prototype["add"]=function(e,r){return new o(this.KL+e.KL,this.kT+e.kT,r)};o.prototype["subtract"]=function(e,r){return new o(this.KL-e.KL,this.kT-e.kT,r)};o.prototype["divideBy"]=function(e,r){return new o(this.KL/e,this.kT/e,r)};o.prototype["multiplyBy"]=function(e,r){return new o(this.KL*e,this.kT*e,r)};o.prototype["offset"]=function(e,r){if(isNaN(e)||isNaN(r)){throw Error("valid offset args, require number")}var t=2*Math.asin(Math.sin(Math.round(e)/(2*6378137))/Math.cos(this.kT*Math.PI/180));var i=this.KL+t*180/Math.PI;var a=2*Math.asin(Math.round(r)/(2*6378137));var n=this.kT+a*180/Math.PI;return new o(i,n)};o.prototype["toString"]=function(){return this.lng+","+this.lat};o.prototype["toArray"]=function(){return[this.lng,this.lat]};o.prototype["toJSON"]=function(){return[this.lng,this.lat]};o.prototype["distanceTo"]=function(e){return GeometryUtil["distance"](this,e)};o.prototype["distance"]=function(e){return GeometryUtil["distance"](this,e)};return o}();var Size=function(){function e(e,r,t){if(t===void 0){t=false}this.className="AMap.Size";if(isNaN(e)||isNaN(r)){throw new Error("Invalid Object: Pixel("+e+", "+r+")")}this["width"]=t?Math.round(e):Number(e);this["height"]=t?Math.round(r):Number(r)}e.prototype["getWidth"]=function(){return this.width};e.prototype["getHeight"]=function(){return this.height};e.prototype["toString"]=function(){return this.width+","+this.height};e.prototype["toArray"]=function(){return[this.width,this.height]};return e}();var easing=function(){var o={};var f=4;var l=.001;var s=1e-7;var u=10;var v=11;var c=1/(v-1);var h=typeof Float32Array==="function";function i(e,r){return 1-3*r+3*e}function a(e,r){return 3*r-6*e}function n(e){return 3*e}function d(e,r,t){return((i(r,t)*e+a(r,t))*e+n(r))*e}function _(e,r,t){return 3*i(r,t)*e*e+2*a(r,t)*e+n(r)}function g(e,r,t,i,a){var n,o,f=0;do{o=r+(t-r)/2;n=d(o,i,a)-e;if(n>0){t=o}else{r=o}}while(Math.abs(n)>s&&++f<u);return o}function y(e,r,t,i){for(var a=0;a<f;++a){var n=_(r,t,i);if(n===0){return r}var o=d(r,t,i)-e;r-=o/n}return r}function m(e){return e}return function(f,r,s,t){if(!(0<=f&&f<=1&&0<=s&&s<=1)){throw new Error("bezier x values must be in [0, 1] range")}var e=arguments.toString();if(o[e]){return o[e]}if(f===r&&s===t){return m}var u=h?new Float32Array(v):new Array(v);for(var i=0;i<v;++i){u[i]=d(i*c,f,s)}function a(e){var r=0;var t=1;var i=v-1;for(;t!==i&&u[t]<=e;++t){r+=c}--t;var a=(e-u[t])/(u[t+1]-u[t]);var n=r+a*c;var o=_(n,f,s);if(o>=l){return y(e,n,f,s)}else if(o===0){return n}else{return g(e,r,r+c,f,s)}}var n=function(e){if(e===0){return 0}if(e===1){return 1}return d(a(e),r,t)};o[e]=n;return n}}();function getQuadBezierValue(e,r,t,i){if(e>=1){return i}var a=1-e;return a*a*r+2*a*e*t+e*e*i}function cubic(e,r,t,i,a){if(e>=1){return a}var n=3*(t.pos[0]-r.pos[0]),o=3*(i.pos[0]-t.pos[0])-n,f=a.pos[0]-r.pos[0]-n-o;var s=3*(t.pos[1]-r.pos[1]),u=3*(i.pos[1]-t.pos[1])-s,l=a.pos[1]-r.pos[1]-s-u;var v=f*Math.pow(e,3)+o*Math.pow(e,2)+n*e+r.pos[0];var c=l*Math.pow(e,3)+u*Math.pow(e,2)+s*e+r.pos[1];return ProjectionManager.getProjection("EPSG:3857").unproject(v,c)}function quad(e,r,t,i){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(e,r.pos[0],t.pos[0],i.pos[0]),getQuadBezierValue(e,r.pos[1],t.pos[1],i.pos[1]))}function p20CoordsToLngLat(e,r){if(Array.isArray(r)){r=new Pixel(r[0],r[1])}return e.ai(r,20)}function getSplitNum(e,r){var t={tolerance:4,interpolateNumLimit:[3,300]};var i=t["tolerance"],a=t["interpolateNumLimit"];i=Math.max(2,i);var n=0,o=0;for(var f=0,s=e.length;f<s-1;f++){var u=e[f],l=e[f+1];n+=Math.abs(l.pos[0]-u.pos[0]);o+=Math.abs(l.pos[1]-u.pos[1])}return Math.min(a[1],Math.max(a[0],Math.round(Math.max(n,o)/r/i)))}function interpolateCoords(e,r){var t=null;switch(r.length){case 3:t=quad;break;case 4:t=cubic;break;default:return null}var i=[];var a=[0].concat(r);for(var n=1;n<e-2;n++){a[0]=n/e;i.push(t.apply(null,a))}i.push(r[r.length-1]);return i}function getCoordsWithControlPoints(e,r,t,i){var a=null;if(e&&t&&t.length){var n=[e];n.push.apply(n,t);n.push(r);var o=n.length;var f=getSplitNum(n,i);a=interpolateCoords(f,n)}return a||[r]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(e,r){var t,i,a=[];for(t=0,i=e.length;t<i;t+=1){a.push.apply(a,getCoordsWithControlPoints(e[t-1],e[t],e[t]["controlPoints"],r))}return a},fg:function(e,r,t,i){var a=this.xb(e,r,t,i);var n=[];for(var o=0,f=a.length;o<f;o++){n.push(p20CoordsToLngLat(r,a[o]))}return n}};var TagMap={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"};var colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Util$3=function(){var s={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:function(){var r=Browser.DW===true;var t=1e5;var i="_amap_id";return function(e){e[i]=r?++t:--t;return e[i]}}(),singlton:function(e){var r=c.Single;var t=r[e];if(!t){t=new e}return t},getOptimalZoom:function(e){return e<Math.floor(e)+.8?Math.floor(e):Math.ceil(e)},join:function(e,r){if(e.join){return e.join(r)}else{var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(i+"="+(e[i]||""))}}return t.join(r)}},getGuid:function(e,r){if(r===void 0){r=10}return(e||"")+Math.round(Math.random()*Math.pow(10,r))+"_"+(new Date).getTime()},uuid:function(){var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(e,r){if(e===void 0){e=0}if(r===void 0){r=62}var t=o;var i=[];var a;r=r||t.length;if(e){for(a=0;a<e;a++){i[a]=t[0|Math.random()*r]}}else{var n=void 0;i[8]=i[13]=i[18]=i[23]="-";i[14]="4";for(a=0;a<36;a++){if(!i[a]){n=0|Math.random()*16;i[a]=t[a===19?n&3|8:n]}}}return i.join("")}}(),endsWith:function(e,r){if(e["endsWith"]){return e["endsWith"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)===r){return true}return false},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(r){r.startTime=new Date;r.jg=[];var t=(new Date).getTime();var i=function(){var e=(new Date).getTime();r.jg.push(e-t);t=e;r.id=c.requestAnimFrame(i)};r.id=c.requestAnimFrame(i)},cancel:function(e){if(e.id){c.cancelAnimFrame(e.id)}},stop:function(e){e.Ag=Date.now()-e.startTime;this.cancel(e);e.Mg=Math.round(1e3/(e.Ag/(e.jg.length+1)))}},kg:function(e,r,t,i,a){if(i===void 0){i="linear"}if(a===void 0){a=false}if(e===r){return r}else{switch(i){case"ease":t=BezierUtil.sg(.25,.1,.25,1)(t);break;case"ease-in":t=BezierUtil.sg(.42,0,1,1)(t);break;case"ease-out":t=BezierUtil.sg(0,0,.58,1)(t);break;case"ease-in-out":t=BezierUtil.sg(.42,0,.58,1)(t);break}var n=e+(r-e)*t;if(a){n=n>>0}return n}},createObjectURL:function(e,r){if(r===void 0){r="text/javascript; charset=utf-8"}var t=null;try{var i=globalInstance["URL"]||globalInstance["webkitURL"];t=i["createObjectURL"](new Blob([e],{type:r}))}catch(e){t=null}return t},revokeObjectURL:function(e){try{var r=globalInstance["URL"]||globalInstance["webkitURL"];r["revokeObjectURL"](e)}catch(e){}},Og:function(e){var r={};for(var t=0,i=e.length;t<i;t++){r[e[t]]=t}return r},EV:function(e,r){var t=Math.pow(2,r);var i=360/t;var a=180/t;var n=Math.floor(e[0]/i)+t/2;var o=t/2-Math.ceil(e[1]/a);return[n,o]},WY:function(e,r,t){if(t===void 0){t=false}var i=[e[0],e[3]];var a=[e[2],e[1]];var n=this.EV(i,r);var o=this.EV(a,r);var f=n[0];var s=n[1];var u=o[0];var l=o[1];if(t){return{ja:f,Fa:s,Oa:u,Ea:l,z:r}}this.Pa={ja:f,Fa:s,Oa:u,Ea:l,z:r};var v=[];for(var c=f;c<=u;c+=1){for(var h=s;h<=l;h+=1){v.push([r,c,h])}}return v},xg:function(e){var r={};if(c.is(e,"object")){for(var t in e){if(e.hasOwnProperty(t)){r[e[t]]=t}}}return r},Ig:function(e,r){if(r.length<5e4){e.push.apply(e,r);return}for(var t=0,i=r.length;t<i;t+=1){e.push(r[t])}},clone:function(e){if(typeof e==="object"&&e!==null){if(e.Tg||this.is(e,"Float32Array")||this.is(e,"Uint16Array")){return e}else{var r=this.isArray(e)?[]:{};for(var t in e){if(e.hasOwnProperty(t)){r[t]=c.clone(e[t])}}return r}}else{return e}},isInteger:function(e){return(e|0)===e},vB:function(e){return!isNaN(e)},setPrototypeOf:function(){if(typeof Object["setPrototypeOf"]==="function"){return Object["setPrototypeOf"]}else{return function(e,r){for(var t in r){e[t]=r[t]}}}}(),isFunction:function(e){return typeof e==="function"},_g:function(e,r){if(r===void 0){r="webgl"}if(!e){return e}var t=[];for(var i=0,a=e.length;i<a;i+=2){var n=parseInt(e.substr(i,2),16);if(r==="webgl"||r==="rgba"&&i===0){n=this.format(n/255,3)}t.push(n)}t.push(t.shift());return t},Sg:function(){},keys:function(){if(typeof Object.keys==="function"){return Object.keys}else{return function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}}return r}}}(),map:function(i,a,n){if(n===void 0){n=null}var o=[];if(i&&i.length){c.Cg(i,function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var t=e[1];o[t]=a.apply(n||i,e)})}else{return i}return o},forEach:function(e,r){if(e&&e.length){var t=e.length;if(t>0){r(e[0],0);if(t>1){r(e[1],1);for(var i=2;i<t;i++){r(e[i],i)}}}}},Cg:function(e,r,t){if(t===void 0){t=null}if(e&&e.length){for(var i=0,a=e.length;i<a;i++){if(r.call(t,e[i],i,e)===false){break}}}},find:function(e,r,t){if(t===void 0){t=null}for(var i=0,a=e.length;i<a;i++){if(typeof r==="function"){if(r.call(t,e[i],i,e)){return e[i]}}else{if(e[i]===r){return e[i]}}}return null},isDOM:function(e){if(typeof HTMLElement==="object"){return e instanceof HTMLElement}else{return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"}},Eg:function(e,r){var t="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";r=r||"v5";var i,a;if(r>"v5"){i=t.length;a=512}else{i=27;t=t.substr(0,27);a=333}var n,o,f,s,u;o=[];f=NaN;for(s=0,u=e.length;s<u;s++){n=e[s];n=t.indexOf(n);if(isNaN(f)){f=n*i}else{o.push(f+n-a);f=NaN}}return o},Ng:function(e,r){var t=1;if(r.length>512){t=Math.round(Math.pow(r.length,.5))}else{t=r.length}var i=Math.ceil(r.length/t);for(var a=0;a<i;a+=1){var n=t*a;var o=n+t;if(o>r.length){o=r.length}for(var f=n;f<o;f+=1){e(r[f])}}},Lg:function(e){if(/^rgba\\(/.test(e)){return this.Dg(e)}else{var r=this.colorNameToHex(e);var t=r;if(r[0]==="#"){r=r.substring(1);if(r.length===3){r=r.replace(/./g,function(e){return e+e})}t=this.argbHex2Rgba(r.length===8?r:"ff"+r)}return this.Dg(t)}},colorNameToHex:function(e){if(e===void 0){e=""}e=e.toLowerCase();if(typeof e==="string"){if(colorNameDist[e]){return colorNameDist[e]}else{return e}}else{return e}},Rg:function(e,r,t){var i,a,n,o,f,s;o=Math.floor(t/2);n=t-o;i=(1<<o)-1<<n;a=(1<<n)-1;s=r&i|e&a;f=e&i|r&a;return[t,f,s]},Pg:function(e){if(e){return encodeURIComponent(e)}return""},getStyle:function(e,r,t,i){var a,n,o;o=e[r]["i"][t];if(typeof o==="undefined"){return null}n=e[r]["s"];if(typeof o==="number"){return n[o]}while(typeof o[i.toString()]==="undefined"){i-=1;if(i<3){break}}a=o[i.toString()];if(typeof a==="number"){return n[a]}else{return null}},Dg:function(e){var r=e.split(",");r[0]=parseFloat(r[0].split("rgba(")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;r[3]=parseFloat(r[3]);return r},Ug:function(e){var r=e.split(",");r[0]=parseFloat(r[0].split("rgb(")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;return r},Bg:function(e){return"rgba("+e[0]*255+","+e[1]*255+","+e[2]*255+","+e[3]+")"},color2Rgba:function(e){return this.Bg(this.color2RgbaArray(e))},color2RgbaArray:function(e){if(e instanceof Array){if(e.length==3){e.push(1)}return e}var r=this.colorNameToHex(e);if(r.indexOf("rgb(")==0){var t=this.Ug(r);t.push(1);return t}else if(r.indexOf("rgba(")==0){return this.Dg(r)}else if(r.indexOf("#")==0){if(r.length===4){var i=r.substr(1);var a=i.replace(/./g,function(e){return e+e});return this.zg(a)}else if(r.length==7){return this.zg(r.substr(1))}else if(r.length==9){var n=r.substr(1);return this.qg(n)}}else if(r.indexOf("hsla")===0){var o=e.substr(5).split(",");var f=parseInt(o[0],10)/360;var s=parseInt(o[1],10)/100;var u=parseInt(o[2],10)/100;var l=parseFloat(o[3]);return this.GQ(f,s,u,l)}else if(r.indexOf("hsl")===0){var o=e.substr(4).split(",");var f=parseInt(o[0],10)/360;var s=parseInt(o[1],10)/100;var u=parseInt(o[2],10)/100;return this.GQ(f,s,u,1)}else{if(r.length===3){var a=r.replace(/./g,function(e){return e+e});return this.zg(a)}else if(r.length==6){return this.zg(r)}else if(r.length==8){return this.qg(r)}}},GQ:function(e,r,t,i){var a;var n;var o;if(r===0){a=n=o=t}else{var f=t<.5?t*(1+r):t+r-t*r;var s=2*t-f;a=this.uQ(s,f,e+1/3);n=this.uQ(s,f,e);o=this.uQ(s,f,e-1/3)}return[a,n,o,i]},uQ:function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e},rgbHex2Rgba:function(e){if(e.startsWith("#")){e=e.slice(1)}return c.argbHex2Rgba("ff"+e)},argbHex2Rgba:function(e){if(e.startsWith("#")){e=e.slice(1)}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push((r.shift()/255).toFixed(2));return"rgba("+r.join(",")+")"},Opacity2Rgba:function(e,r){var t=r;if(r&&r[3]&&e){r[3]=Math.floor(255*e)}return t},Hex2Rgba:function(e){if(typeof e!=="string"){return false}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(parseInt(r.shift()));return r},zg:function(e){return this.uE(e+"ff")},qg:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16)/255)}r.push(r.shift());return r},uE:function(e){var r=parseInt(e,16);var t=[(r>>24&255)/255,(r>>16&255)/255,(r>>8&255)/255,(r&255)/255];return t},isEmpty:function(e){for(var r in e){if(e.hasOwnProperty(r)){return false}}return true},Wg:function(e,r){if(r>=0){e.splice(r,1)}return e},startsWith:function(e,r){if(e["startsWith"]){return e["startsWith"](r)}else{return e.substr(0,r.length)===r}},deleteItemFromArray:function(e,r){var t=c.indexOf(e,r);return c.Wg(e,t)},deleteItemFromArrayByIndex:function(e,r){return c.Wg(e,r)},filter:function(e,t,i){var a=[];c.Cg(e,function(e,r){if(t.call(i,e,r)){a.push(e)}});return a},indexOf:function(e,r){if(!e||!e.length){return-1}if(e["indexOf"]){return e["indexOf"](r)}else{for(var t=0;t<e.length;t+=1){if(e[t]===r){return t}}return-1}},Gg:function(e,r){if(e["endsWith"]){return e["endsWith"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)==r){return true}return false},bind:function(){var i=false;if(Boolean(Function.prototype.bind)){i=true}return function(e,r){var t=arguments.length>2?Array.prototype.slice.call(arguments,2):null;if(i){if(t){t.unshift(r);return e.bind.apply(e,t)}else{return e.bind(r)}}else{return function(){return e.apply(r,t||arguments)}}}}(),setOptions:function(e,r){r=r||{};e.opts=assign({},e.opts,r);return e.opts},yn:function(e,r,t){return typeof r=="function"?this.Hg(e,true,this.Vg(r,t,1)):this.Hg(e,true)},Hg:function(t,i,a,e,r,n,o){var f;if(a){f=r?a(t,e,r):a(t)}if(f!==undefined){return f}if(!this.$g(t)){return t}var s=this.isArray(t);if(s){f=this.Yg(t);if(!i){return this.Kg(t,f)}}else{var u=Object.prototype.toString.call(t),l=u=="[object Function]";if(u=="[object Object]"||u=="[object Arguments]"||l&&!r){f=this.Xg(l?{}:t);if(!i){return this.baseAssign(f,t)}}else{return r?t:{}}}n||(n=[]);o||(o=[]);var v=n.length;while(v--){if(n[v]==t){return o[v]}}n.push(t);o.push(f);(s?this.Zg:this.Qg)(t,function(e,r){f[r]=c.Hg(e,i,a,r,t,n,o)});return f},baseAssign:function(e,r){return r==null?e:this.tM(r,Object.keys(r),e)},$g:function(e){var r=typeof e;return!!e&&(r=="object"||r=="function")},rM:function(e){return!!e&&typeof e=="object"},nM:function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Yg:function(e){var r=e.length,t=new Array(r);if(r&&typeof e[0]=="string"&&Object.hasOwnProperty.call(e,"index")){t.index=e.index;t.input=e.input}return t},Kg:function(e,r){var t=-1,i=e.length;r||(r=Array(i));while(++t<i){r[t]=e[t]}return r},Xg:function(e){var r=e.constructor;if(!(typeof r=="function"&&r instanceof r)){r=Object}return new r},Vg:function(n,o,e){if(typeof n!="function"){return this.identity}if(o===undefined){return n}switch(e){case 1:return function(e){return n.call(o,e)};case 3:return function(e,r,t){return n.call(o,e,r,t)};case 4:return function(e,r,t,i){return n.call(o,e,r,t,i)};case 5:return function(e,r,t,i,a){return n.call(o,e,r,t,i,a)}}return function(){return n.apply(o,arguments)}},Zg:function(e,r){var t=-1,i=e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e},identity:function(e){return e},iM:function(s){return function(e,r,t){var i=c.eM(e),a=t(e),n=a.length,o=s?n:-1;while(s?o--:++o<n){var f=a[o];if(r(i[f],f,i)===false){break}}return e}},Qg:function(e,r){var t=c.iM();return t(e,r,Object.keys)},eM:function(e){return c.$g(e)?e:Object(e)},tM:function(e,r,t){t||(t={});var i=-1,a=r.length;while(++i<a){var n=r[i];t[n]=e[n]}return t},oM:function(){return false},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:function(){return Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}}(),sM:function(e,r,t,i){var a;if(i){var n=0,o,f=this.uM;a=function(){o=f();if(o-n<r){return false}n=o;e.apply(t,arguments)}}else{var s,u,l;l=function(){s=false;if(u){a.apply(t,u);u=false}};a=function(){if(s){u=arguments}else{s=true;e.apply(t,arguments);setTimeout(l,r)}}}return a},format:function(e,r){if(e===e<<0){return e}return+parseFloat(e+"").toFixed(r||0)},isArray:function(){if(Array.isArray){return Array.isArray}else{return function(e){return this.is(e,"array")}}}(),is:function(e,r){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1).toLowerCase()===r.toLowerCase()},includes:function(){if(typeof Array.prototype.includes==="function"){return function(e,r){return e.includes(r)}}else{return function(e,r){return this.indexOf(e,r)!==-1}}}(),fM:function(e){var r=0;if(e.length===0){return r}var t;for(var i=0,a=e.length;i<a;i+=1){t=e.charCodeAt(i);r=(r<<5)-r+t;r=r&r}return r},hM:function(e,r){r=r?Math.ceil(parseInt(r.substr(6))/24):1;var t="";for(var i=0,a=e.length;i<a;i++){t+=String.fromCharCode((e.charCodeAt(i)-256-r+65535)%65535)}return t},cM:function(e,r){var t=(e+"").slice(-2);var i=(r+"").slice(-2);e=e.slice(0,-2);r=r.slice(0,-2);var a=parseInt((i+t).slice(1));var n=Math.ceil(a/250)%2?1:-1;var o=a/500>1?1:-1;var f=parseInt("1"+t)/3e3;var s=parseInt("1"+i)/3e3;e-=f*n;r-=s*o;return new LngLat$2(parseFloat(e).toFixed(5),parseFloat(r).toFixed(5))},vM:function(e){if(typeof JSON!=="undefined"&&JSON.stringify){return c.fM(JSON.stringify(e))}return null},lM:function(e,r){var t="_amap_hash";if(r||!e.hasOwnProperty(t)){var i=c.vM(e);if(i){e[t]=i}}return e[t]},parseLngLatData:function(e){if(c.isArray(e)){if(c.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=c.parseLngLatData(e[r])}}else{var t=typeof e[0];if(t==="string"||t==="number"){return new LngLat$2(e[0],e[1])}else{return e}}}return e},dM:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=1){r[t]=[e[t].x,e[t].y]}return r},bM:function(e){if(c.isArray(e)){return new Size(e[0],e[1])}return e},hp:function(e,r){var t=[0,0];var i=c.getOptimalZoom(r.viewState.zoom);if(e&&i>=LocalZoom){var a=lcs$2.getSize();var n=r.viewState.centerCoord;var o=lcs$2.getLocalByCoord([n[0],n[1]]);var f=e.x-o.x;var s=e.y-o.y;if(f!==0){f*=a[0];t[0]=f}if(s!==0){s*=a[1];t[1]=s}}else if(e){t[0]+=e.center[0];t[1]+=e.center[1]}return t},dS:function(e,r){return e>=r[0]&&e<=r[1]},kD:function(e,r,t){if(e===void 0){e=""}if(t===void 0){t=false}var i=e.split(",")[0]||"";if(t){return"all"}if(i&&r){return TagMap[r]||"all"}return"all"},VF:function(e,r,t){if(t===void 0){t=false}if(t){return"all"}if(e&&r){return TagMap[r]||"all"}return"all"},LD:function(e,r){var t=false;if(!e||!r){return t}var i=this.iN(e);var a=this.iN(r);return i>=a},SD:function(e){if(e===void 0){e="all"}var r;switch(e){case"lite":{r=0;break}case"left":{r=1;break}case"all":default:{r=2}}return r},pW:function(e){if(e===void 0){e=2}var r;switch(e){case 0:{r=NebulaTagType.LITE;break}case 1:{r=NebulaTagType.LEFT;break}case 2:default:{r=NebulaTagType.ALL}}return r},iN:function(e){var r=0;switch(e){case"lite":{r=0;break}case"left":{r=1;break}case"all":{r=2;break}}return r}};(function(){var i=0;function e(e){var r=+new Date,t=Math.max(0,(Browser.HV?50:20)-(r-i));i=r+t;return globalInstance.setTimeout(e,50)}var r=function(e){globalInstance.clearTimeout(e)};if(Browser.DW){var a=e;var t=r;s["requestAnimFrame"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return a(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};s["cancelAnimFrame"]=function(e){if(e){t.call(globalInstance,e)}};return}function n(e){var r,t,i=["webkit","moz","o","ms"];for(r=0;r<i.length&&!t;r+=1){t=globalInstance[i[r]+e]}return t}var o=globalInstance.requestAnimationFrame||n("RequestAnimationFrame")||e;var f=globalInstance.cancelAnimationFrame||n("CancelAnimationFrame")||n("CancelRequestAnimationFrame")||r;s["requestAnimFrame"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return o(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};s["cancelAnimFrame"]=function(e){if(e){f.call(globalInstance,e)}}})();(function(){if(Browser.DW){return}s["requestIdleCallback"]=globalInstance["requestIdleCallback"]?function(e,r){return globalInstance["requestIdleCallback"](e,r)}:function(e,r){if(r===void 0){r={}}var t=c.uM();return setTimeout(function(){e({didTimeout:false,timeRemaining:function(){return Math.max(0,70-(c.uM()-t))}})},r.timeout||0)};s["cancelIdleCallback"]=globalInstance["cancelIdleCallback"]?function(e){return globalInstance["cancelIdleCallback"](e)}:function(e){clearTimeout(e)}})();var c=s;return c}();var LabelFormat=function(){function e(){this.Fs={};this.Es={};this.Ts=[]}e.prototype.Ns=function(e,r){if(r.lang){this.lang=r.lang}};e.prototype.rV=function(e,r){return e};e.prototype.Ws=function(e,r){if(e===void 0){e=""}if(r===void 0){r=[]}var t=this.Es;var i=labelsUtil$2.EQ(e,r);var a=labelsUtil$2.aQ(i);for(var n=0;n<a.length;n++){t[a[n]]=1}};e.id="labelFormat";return e}();var SmartTypedArray$2=function(){function e(e,r){if(r===void 0){r=1024}this.type=e;this.length=0;this.uf=0;this.value=this.cf(r)}e.prototype.set=function(e){if(!this.check(e)){assert("SmartTypedArray: error value");return}if(e.length<this.uf){this.value.set(e);return}this.cf(e.length);this.value.set(e);this.length=e.length};e.prototype.check=function(e){if(Array.isArray(e)){return true}var r=false;switch(this.type){case"uint8":r=e instanceof Uint8Array;break;case"int8":r=e instanceof Int8Array;break;case"uint16":r=e instanceof Uint16Array;break;case"int16":r=e instanceof Int16Array;break;case"uint32":r=e instanceof Uint32Array;break;case"int32":r=e instanceof Int32Array;break;case"float32":r=e instanceof Float32Array;break;case"float64":r=e instanceof Float64Array;break;default:r=false}return r};e.prototype.subarray=function(e,r){return this.value.subarray(e,r)};e.prototype.ff=function(e){if(this.uf<e){this.cf(e)}this.length=e};e.prototype.cf=function(e){var r=this.pf();var t=this.value;this.value=new r(e);if(t){this.value.set(t)}this.uf=e;return this.value};e.prototype.pf=function(){var e=Float32Array;switch(this.type){case"uint8":e=Uint8Array;break;case"int8":e=Int8Array;break;case"uint16":e=Uint16Array;break;case"int16":e=Int16Array;break;case"uint32":e=Uint32Array;break;case"int32":e=Int32Array;break;case"float32":e=Float32Array;break;case"float64":e=Float64Array;break;default:e=Float32Array}return e};e=__decorate([InnerClass("SmartTypedArray")],e);return e}();var EnumSDFProperty;(function(e){e[e["fontWidth"]=0]="fontWidth";e[e["fontHeight"]=1]="fontHeight";e[e["horiBearingX"]=2]="horiBearingX";e[e["horiBearingY"]=3]="horiBearingY";e[e["horiAdvance"]=4]="horiAdvance";e[e["posX"]=5]="posX";e[e["posY"]=6]="posY";e[e["iconWidth"]=7]="iconWidth";e[e["iconHeight"]=8]="iconHeight"})(EnumSDFProperty||(EnumSDFProperty={}));var INF=1e20;var ControlChars=[[0,31],[127,159]];var ZeroWidthChars=[[8203,8207]];var f=new SmartTypedArray$2("float64",64*64);var d=new SmartTypedArray$2("float64",64*64);var z=new SmartTypedArray$2("float64",64*64);var v=new SmartTypedArray$2("float64",64*64);var ua=navigator.userAgent;var TinySDF=function(){function e(e,r,t,i,a,n,o){this.fontSize=e||24;this.buffer=t===undefined?3:t;this.MU=a||.25;this.fontFamily=n||"sans-serif";this.fontWeight=o||"lighter";this.radius=i||8;this.size=r;this.xU();var f=r[0]*r[1];this.TU=new SmartTypedArray$2("float64",f);this.AU=new SmartTypedArray$2("float64",f);var s=ua.indexOf("Gecko/")>=0||ua.indexOf("Windows")>=0;this.wU=Math.round(r[1]/2*(s?1.2:1))}e.prototype.bU=function(e){this.size=e||[];this.xU();this.mU()};e.prototype.Ce=function(e){var r=this.size,t=r[0],i=r[1];var a=t*i;var n=this.Nz;if(n){n.clearRect(0,0,t,i);n.fillText(e,this.buffer,this.wU);var o=n.getImageData(0,0,t,i);var f=new Uint8ClampedArray(a);var s=new Array(9).fill(0);s[0]=1;s[1]=1;var u=e.charCodeAt(0);if(this.RU(u)){return{bitmap:f,info:s}}var l=0;var v=0;var c=INF;var h=INF;var d=0;var _=0;for(var g=0;g<a;g++){l=Math.floor(g/t);v=g-l*t;var y=o.data[g*4+3]/255;if(y>0){if(c>l){c=l}if(h>v){h=v}if(d<l){d=l}if(_<v){_=v}}this.TU.value[g]=y===1?0:y===0?INF:Math.pow(Math.max(0,.5-y),2);this.AU.value[g]=y===1?INF:y===0?0:Math.pow(Math.max(0,y-.5),2)}var m=this.buffer;var p=this.getWidth(e,_-h);var b=d-c;var x=h;var C=-c+m;var S=p;var M=h-3;var w=c-3;var k=void 0;if(u===32){k=[6,6,0,-21,9,0,0,t,i]}else{k=[p,b,x,C,S,M,w,t,i]}edt(this.TU.value,t,i);edt(this.AU.value,t,i);for(var g=0;g<a;g++){var T=this.TU.value[g]-this.AU.value[g];var I=Math.max(0,Math.min(255,Math.round(255-255*(T/this.radius+this.MU))));f[g]=I}return{bitmap:f,info:k}}return{}};e.prototype.getWidth=function(e,r){var t;switch(e){case"y":case"A":case"T":case"V":case"W":case"Y":{t=r;break}default:t=r+2}return t};e.prototype.measureText=function(e){return this.Nz.measureText(e)};e.prototype.xU=function(){var e=this.size;if(!this.canvas){this.canvas=document.createElement("canvas")}this.canvas.width=e[0];this.canvas.height=e[1];this.Nz=this.canvas.getContext("2d");if(this.Nz){this.Nz.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.Nz.textBaseline="middle";this.Nz.fillStyle="black"}};e.prototype.mU=function(){var e=this.size,r=e[0],t=e[1];var i=r*t;if(i>this.AU.uf){this.AU.ff(i);this.TU.ff(i)}var a=ua.indexOf("Gecko/")>=0||ua.indexOf("Windows")>=0;this.wU=Math.round(t/2*(a?1.2:1))};e.prototype.RU=function(e){var r=this.SU(e,ControlChars);var t=this.SU(e,ZeroWidthChars);return r||t};e.prototype.SU=function(e,r){for(var t=0,i=r;t<i.length;t++){var a=i[t];if(e>=a[0]&&e<=a[1]){return true}}};return e}();function expandTypeArray(e){f.ff(e);d.ff(e);z.ff(e);v.ff(e)}function edt(e,r,t){if(f.uf<t){expandTypeArray(t)}for(var i=0;i<r;i++){for(var a=0;a<t;a++){f.value[a]=e[a*r+i]}edt1d(f.value,d.value,v.value,z.value,t);for(var a=0;a<t;a++){e[a*r+i]=d.value[a]}}if(f.uf<r){expandTypeArray(t)}for(var a=0;a<t;a++){for(var i=0;i<r;i++){f.value[i]=e[a*r+i]}edt1d(f.value,d.value,v.value,z.value,r);for(var i=0;i<r;i++){e[a*r+i]=Math.sqrt(d.value[i])}}}function edt1d(e,r,t,i,a){t[0]=0;i[0]=-INF;i[1]=+INF;for(var n=1,o=0;n<a;n++){var f=(e[n]+n*n-(e[t[o]]+t[o]*t[o]))/(2*n-2*t[o]);while(f<=i[o]){o--;f=(e[n]+n*n-(e[t[o]]+t[o]*t[o]))/(2*n-2*t[o])}o++;t[o]=n;i[o]=f;i[o+1]=+INF}for(var n=0,o=0;n<a;n++){while(i[o+1]<n){o++}r[n]=(n-t[o])*(n-t[o])+e[t[o]]}}var LangConf={ch:{type:"ch",size:[32,32],fontSize:24,name:"中文简体"},en:{type:"en",size:[32,32],fontSize:24,name:"英文"},th:{type:"th",size:[32,32],fontSize:24,name:"泰语"},my:{type:"my",size:[56,56],fontSize:24,name:"缅甸语"},ja:{type:"ja",size:[32,32],fontSize:24,name:"日文"},km:{type:"km",size:[40,40],fontSize:24,name:"高棉语"},PU:{type:"lao",size:[40,40],fontSize:24,name:"老挝语"},$U:{type:"arabic",size:[40,40],fontSize:24,name:"阿拉伯语"},default:{type:"ch",size:[32,32],fontSize:24,name:"汉语"}};var Lang=function(){function e(e){var r=this.CU=e,t=r.type,i=r.size,a=r.fontSize;this.type=t;var n=this.width=i[0];var o=this.height=i[1];this.NU=new TinySDF(a,[n,o],(n-a)/2,8,.25,"PingFang SC","normal")}e.prototype.Ce=function(e){if(this.type===LangConf.PU.type){this.width=Math.floor(this.NU.measureText(e).width/10)*10+10+LangConf.PU.fontSize/2;this.NU.bU([this.width,this.height])}else if((this.type===LangConf.my.type||this.type===LangConf.PU.type||this.type===LangConf.th.type||this.type===LangConf.$U.type||this.type===LangConf.km.type)&&e.length>1){this.width=Math.floor(this.CU.size[0]*e.length*.5);this.NU.bU([this.width,this.height])}return this.NU.Ce(e)};return e}();var LangManager=function(){function i(){this.OU={}}i.gG=function(e){var r=e.split("|");var t=parseInt(r[0],10);return this.IU(t)};i.kU=function(e){var r=[];for(var t=0;t<e.length;t++){r.push(e.charCodeAt(t))}return i.gG(r.join("|"))};i.LU=function(e){var r=i.kU(e);return i.EU.indexOf(r)!==-1};i.IU=function(e){var r="";if(e>32&&e<591){r="en"}else if(e>=4096&&e<=4255){r="my"}else if(e>=3584&&e<=3711){r="th"}else if(e>=6016&&e<=6143){r="km"}else if(e>=3712&&e<=3839){r="lao"}else if(e>=1536&&e<=1791){r="arabic"}else{r="ch"}return r};i.prototype.D$=function(e){if(e===void 0){e="ch"}var r=this.OU[e];if(!r){var t=LangConf[e]?LangConf[e]:LangConf.default;r=new Lang(t);this.OU[e]=r}return r};i.EU=[LangConf.my.type,LangConf.km.type,LangConf.PU.type];return i}();var CHN=[["90.398619","47.62125"],["90.493569","47.512157"],["90.491338","47.430787"],["90.552986","47.391174"],["90.522859","47.318461"],["90.584915","47.224989"],["90.782025","47.019194"],["90.923517","46.97996"],["90.986624","46.807403"],["91.082926","46.722064"],["91.051812","46.596604"],["91.100242","46.564068"],["91.102624","46.537196"],["90.935125","46.300398"],["91.032801","46.126363"],["91.055181","46.011658"],["90.741148","45.713536"],["90.699563","45.544726"],["90.700228","45.504993"],["90.795887","45.449956"],["90.832257","45.31629"],["90.919719","45.26871"],["90.920899","45.225065"],["91.136978","45.244316"],["91.253943","45.164928"],["91.372068","45.142003"],["91.45689","45.18485"],["91.624753","45.098124"],["92.062061","45.11548"],["92.497694","45.030848"],["92.887666","45.075869"],["93.513157","44.997233"],["94.22699","44.694971"],["94.374082","44.542037"],["94.620202","44.47394"],["94.737532","44.366876"],["95.002041","44.282908"],["95.42701","44.324539"],["95.440292","44.292217"],["95.365491","44.054053"],["95.549126","44.026335"],["95.883651","43.431746"],["95.911953","43.287656"],["96.385653","42.919774"],["96.41151","42.75927"],["97.176454","42.824161"],["98.198333","42.682435"],["99.505985","42.597497"],["99.964106","42.676693"],["100.259793","42.666107"],["100.320604","42.718863"],["100.867753","42.700052"],["101.814637","42.530852"],["102.090733","42.250567"],["102.451458","42.173439"],["102.716911","42.181644"],["103.426452","41.910629"],["103.858223","41.830321"],["104.537873","41.903108"],["104.55755","41.881352"],["104.554117","41.69046"],["104.929798","41.682608"],["105.010371","41.620463"],["105.220141","41.778353"],["105.732529","41.977008"],["106.776853","42.319288"],["107.167833","42.354897"],["107.458928","42.487147"],["107.937949","42.433308"],["108.241189","42.489425"],["108.84269","42.425722"],["109.022141","42.487574"],["109.290662","42.465227"],["109.534657","42.500548"],["109.723763","42.60669"],["110.100045","42.671172"],["110.420666","42.80617"],["111.005001","43.354829"],["111.446257","43.521761"],["111.555004","43.519925"],["111.780481","43.697712"],["111.925235","43.719055"],["111.936243","43.796237"],["111.863286","43.902314"],["111.643689","44.039247"],["111.386948","44.360034"],["111.610923","44.793044"],["111.742544","44.988614"],["111.9942","45.118751"],["112.435906","45.103062"],["112.61512","44.956037"],["112.806373","44.882816"],["113.624854","44.775834"],["113.896701","44.9424"],["114.104283","44.984106"],["114.437113","45.233044"],["114.543629","45.41585"],["114.742713","45.46746"],["114.977202","45.40645"],["115.36123","45.421513"],["115.688202","45.487095"],["116.023886","45.712008"],["116.163919","45.717567"],["116.251037","45.785617"],["116.213851","45.874652"],["116.246574","45.98171"],["116.56904","46.316673"],["116.83033","46.413023"],["117.353361","46.390324"],["117.41533","46.528251"],["117.39222","46.582448"],["117.411768","46.610108"],["117.618878","46.628442"],["117.72387","46.549579"],["118.312433","46.768455"],["118.774374","46.71799"],["118.828619","46.795917"],["118.912926","46.804113"],["118.941979","46.764971"],["119.028625","46.769292"],["119.119864","46.669494"],["119.724391","46.623078"],["119.791059","46.707882"],["119.884572","46.701717"],["119.896224","46.880494"],["119.836485","46.899381"],["119.742007","47.13776"],["119.30249","47.404711"],["119.315214","47.461827"],["119.134262","47.517476"],["119.10804","47.64174"],["118.755577","47.747779"],["118.55396","47.96464"],["118.177657","48.02096"],["117.82558","47.987997"],["117.388809","47.612384"],["117.082887","47.796869"],["116.816533","47.867783"],["116.452289","47.808327"],["116.270714","47.845797"],["115.938377","47.653883"],["115.559971","47.900966"],["115.500727","48.161305"],["115.791907","48.279437"],["115.776629","48.537807"],["116.042275","48.826715"],["116.024444","48.890046"],["116.709459","49.880215"],["117.07866","49.723328"],["117.482128","49.648667"],["117.801998","49.554185"],["117.858689","49.620567"],["118.068073","49.643304"],["118.210831","49.759243"],["118.358674","49.80286"],["118.37378","49.853853"],["118.468623","49.857768"],["118.559926","49.957101"],["119.082034","50.01451"],["119.311051","50.169532"],["119.328389","50.327724"],["119.175332","50.320094"],["119.103534","50.373674"],["119.103642","50.409488"],["119.224019","50.469114"],["119.262214","50.625767"],["119.470096","50.763554"],["119.480245","50.910299"],["119.734497","51.106944"],["119.73542","51.228925"],["119.789064","51.243368"],["119.787948","51.298691"],["119.896417","51.365189"],["119.889615","51.410731"],["119.950318","51.426267"],["120.067241","51.699773"],["120.632029","51.963004"],["120.755196","52.16206"],["120.733974","52.23734"],["120.60276","52.318868"],["120.688398","52.529211"],["120.459208","52.615218"],["120.046556","52.554881"],["120.004778","52.785297"],["120.275145","52.889292"],["120.877526","53.323248"],["121.231921","53.310391"],["122.338707","53.534212"],["122.443142","53.474191"],["122.84101","53.486577"],["123.278553","53.592823"],["123.480492","53.533829"],["123.518364","53.587614"],["123.901491","53.509565"],["124.129157","53.379309"],["124.260864","53.404185"],["124.447374","53.252351"],["124.696798","53.233398"],["124.854212","53.143501"],["124.877429","53.19179"],["125.14374","53.233437"],["125.500989","53.129213"],["125.53472","53.084642"],["125.631731","53.108131"],["125.776978","53.000452"],["125.732839","52.906456"],["125.842016","52.927481"],["125.973551","52.795444"],["126.049747","52.829373"],["126.137295","52.788424"],["126.136093","52.7501"],["126.082878","52.727183"],["126.094744","52.66376"],["126.01078","52.632295"],["126.225078","52.557751"],["126.227546","52.502887"],["126.28664","52.498733"],["126.378071","52.405299"],["126.365626","52.334723"],["126.460233","52.313556"],["126.457937","52.278438"],["126.370797","52.21752"],["126.587327","52.146539"],["126.544647","52.022831"],["126.483493","52.004144"],["126.489866","51.963387"],["126.757379","51.72942"],["126.769931","51.638237"],["126.737959","51.604012"],["126.870396","51.541384"],["126.8313","51.449554"],["126.939726","51.411373"],["126.952021","51.35238"],["127.007918","51.339647"],["126.930671","51.194554"],["126.950047","51.077214"],["127.328668","50.761993"],["127.324612","50.674039"],["127.399564","50.585975"],["127.336199","50.480736"],["127.39435","50.441709"],["127.374866","50.346296"],["127.622938","50.242265"],["127.624762","50.159938"],["127.524126","50.053819"],["127.569466","49.832087"],["127.686474","49.798414"],["127.716987","49.69577"],["127.838395","49.617717"],["128.185065","49.56898"],["128.533065","49.633229"],["128.791094","49.618148"],["128.84167","49.562161"],["128.811865","49.506248"],["129.022107","49.485245"],["129.11165","49.389985"],["129.230032","49.429552"],["129.343135","49.392234"],["129.383497","49.461849"],["129.526126","49.451932"],["129.593332","49.316758"],["129.745059","49.313625"],["129.972146","49.057136"],["130.243692","48.89923"],["130.444579","48.939218"],["130.526934","48.889044"],["130.693552","48.907086"],["130.705612","48.869994"],["130.580449","48.630526"],["130.630317","48.609845"],["130.648105","48.52472"],["130.790884","48.525345"],["130.778868","48.413864"],["130.875106","48.300724"],["130.708423","48.108792"],["130.914073","47.945556"],["131.01546","47.736076"],["131.552374","47.750448"],["131.621768","47.692216"],["131.711934","47.740348"],["131.958075","47.703033"],["131.995368","47.741041"],["132.235458","47.739381"],["132.340472","47.796162"],["132.546873","47.750881"],["132.655685","47.89209"],["132.654505","47.979308"],["132.811511","47.967327"],["133.097413","48.158185"],["133.473394","48.128346"],["133.728504","48.281365"],["134.199908","48.411499"],["134.519091","48.448618"],["134.797053","48.402511"],["134.903462","48.476549"],["135.111473","48.465979"],["135.087461","48.366044"],["134.70854","48.235879"],["134.705815","48.142967"],["134.587133","47.991745"],["134.802439","47.732613"],["134.805079","47.701502"],["134.584837","47.454022"],["134.327302","47.405829"],["134.203448","47.309543"],["134.189801","47.25835"],["134.258273","47.190339"],["134.25029","47.096963"],["134.160018","47.066453"],["134.091868","46.968583"],["134.042215","46.633997"],["133.892806","46.477753"],["133.978872","46.404235"],["133.938468","46.35728"],["133.943124","46.251663"],["133.734856","46.143924"],["133.77584","46.068467"],["133.698828","45.924364"],["133.509421","45.823745"],["133.533154","45.779212"],["133.488886","45.719859"],["133.513906","45.69461"],["133.496869","45.599732"],["133.229721","45.489276"],["133.168674","45.414886"],["133.124621","45.258199"],["133.158975","45.105773"],["132.946351","44.989767"],["131.996377","45.226214"],["131.893723","45.301592"],["131.80903","45.186922"],["131.72307","45.208468"],["131.688416","45.166214"],["131.716461","45.107939"],["131.507506","44.942491"],["131.131804","44.90387"],["131.021662","44.839439"],["131.137726","44.723122"],["131.338398","44.056058"],["131.273661","43.974086"],["131.248341","43.566337"],["131.344342","43.514183"],["131.346252","43.391702"],["131.236002","43.22857"],["131.242955","43.131057"],["131.13749","43.018486"],["131.168904","42.923466"],["131.065779","42.901952"],["131.05005","42.834641"],["130.673962","42.819219"],["130.46123","42.731347"],["130.617421","42.685874"],["130.650616","42.595365"],["130.604267","42.509264"],["130.661752","42.412289"],["130.553477","42.421191"],["130.507536","42.571366"],["130.42958","42.523293"],["130.416105","42.590452"],["130.235238","42.692151"],["130.237405","42.873951"],["130.125611","42.876169"],["130.075765","42.911319"],["130.092008","42.956423"],["129.933178","42.975108"],["129.878311","42.92378"],["129.795163","42.719399"],["129.815032","42.601778"],["129.735103","42.411401"],["129.607751","42.418118"],["129.55415","42.330996"],["129.383025","42.403749"],["129.268527","42.323223"],["129.222093","42.257635"],["129.2434","42.19201"],["128.992774","42.075243"],["128.959644","41.997184"],["128.121765","41.974471"],["128.183949","41.746614"],["128.336234","41.608881"],["128.268621","41.434008"],["128.127944","41.337429"],["128.00482","41.417516"],["127.65285","41.377517"],["127.537794","41.447986"],["127.248116","41.454805"],["127.234962","41.492217"],["127.08566","41.544545"],["127.128081","41.592273"],["127.012339","41.679643"],["127.035706","41.702541"],["126.914964","41.778689"],["126.809177","41.669562"],["126.74607","41.691325"],["126.612003","41.629975"],["126.529799","41.412013"],["126.562243","41.368516"],["126.557908","41.33825"],["126.45328","41.325763"],["126.3043","41.139979"],["126.148946","41.070584"],["126.132917","40.990783"],["126.041744","40.924117"],["126.041787","40.876401"],["125.721896","40.840697"],["125.681319","40.80754"],["125.712733","40.774611"],["125.686641","40.761853"],["125.582743","40.75319"],["125.423162","40.624246"],["125.310595","40.636606"],["125.022783","40.521123"],["125.06057","40.46396"],["124.907556","40.445935"],["124.374311","40.078794"],["124.388452","39.905638"],["123.741782","39.10294"],["123.282201","38.058466"],["124.24299","31.368588"],["124.714351","29.508006"],["125.072136","25.859069"],["124.935837","25.676612"],["123.836839","25.5127"],["122.751321","24.515956"],["121.947788","22.070621"],["121.867355","21.383021"],["119.827087","18.177352"],["119.026527","16.873489"],["119.11665","15.951676"],["119.101406","14.063252"],["119.100623","12.209516"],["119.07742","11.23357"],["116.011301","7.678721"],["114.941852","6.182877"],["114.229887","5.47862"],["113.86269","4.692236"],["112.795642","3.695169"],["111.953841","3.231846"],["109.894631","3.714037"],["108.659956","4.748032"],["107.925439","5.91737"],["107.96348","6.895899"],["108.555028","9.28242"],["110.128544","11.338543"],["109.983314","12.44102"],["109.806102","13.535124"],["109.636428","14.636855"],["109.78629","15.402577"],["109.449813","15.723154"],["108.117871","17.258818"],["107.310076","18.842045"],["107.374728","19.467179"],["108.051095","20.114414"],["108.328478","21.187373"],["108.278139","21.403412"],["108.107378","21.47839"],["107.943356","21.509097"],["107.849844","21.619412"],["107.547355","21.55724"],["107.470751","21.571209"],["107.451932","21.615722"],["107.357798","21.570152"],["107.289755","21.702532"],["107.207551","21.682454"],["106.998789","21.79714"],["107.015655","21.907972"],["106.951239","21.893876"],["106.768184","21.978429"],["106.703854","21.935422"],["106.674027","21.941175"],["106.664565","22.266461"],["106.643493","22.30484"],["106.538715","22.328641"],["106.53142","22.460275"],["106.592939","22.622033"],["106.708553","22.615477"],["106.793547","22.794758"],["106.548972","22.899047"],["106.304634","22.830954"],["106.190543","22.951201"],["106.088791","22.966118"],["105.867991","22.889816"],["105.712488","23.033058"],["105.550311","23.045755"],["105.530806","23.163759"],["105.330691","23.346393"],["105.249667","23.237422"],["105.089657","23.231409"],["104.951169","23.149476"],["104.843495","23.101267"],["104.893084","22.94393"],["104.747257","22.79551"],["104.567764","22.813411"],["104.371855","22.65974"],["104.249053","22.720536"],["104.237015","22.806132"],["104.137495","22.783462"],["104.078336","22.740585"],["104.017096","22.520843"],["103.962035","22.492019"],["103.666692","22.741534"],["103.525093","22.580551"],["103.458703","22.648987"],["103.394201","22.751092"],["103.341286","22.767397"],["103.306804","22.661878"],["103.215652","22.621855"],["103.205309","22.536362"],["103.107505","22.486567"],["103.076606","22.416444"],["102.91784","22.456309"],["102.840786","22.583305"],["102.610223","22.696625"],["102.558017","22.673838"],["102.493515","22.738071"],["102.424293","22.676273"],["102.446694","22.621241"],["102.327948","22.511268"],["102.278531","22.386786"],["102.142661","22.36867"],["102.03475","22.427651"],["101.942096","22.415036"],["101.8765","22.355136"],["101.764791","22.472926"],["101.700847","22.453176"],["101.694624","22.349917"],["101.579332","22.223979"],["101.631925","21.988099"],["101.718335","21.962549"],["101.79863","21.848016"],["101.778824","21.73654"],["101.856952","21.62392"],["101.847124","21.595911"],["101.773932","21.558438"],["101.760328","21.349162"],["101.862724","21.239522"],["101.764727","21.115389"],["101.663511","21.164623"],["101.587808","21.146813"],["101.574161","21.209359"],["101.53264","21.221881"],["101.293538","21.149214"],["101.203866","21.206559"],["101.216612","21.289294"],["101.114173","21.403592"],["101.183052","21.497378"],["101.111941","21.560533"],["101.095719","21.734009"],["100.901892","21.659343"],["100.747526","21.494902"],["100.586185","21.423588"],["100.468576","21.433695"],["100.414267","21.504705"],["100.248806","21.434534"],["100.115855","21.481604"],["100.078626","21.591362"],["100.11579","21.654357"],["100.010068","21.666462"],["99.916813","21.811046"],["99.968591","21.972539"],["99.950867","22.023392"],["99.699748","22.008512"],["99.585378","22.083453"],["99.19384","22.094388"],["99.129961","22.147006"],["99.24403","22.347694"],["99.226069","22.407775"],["99.348979","22.505302"],["99.289627","22.751963"],["99.429595","22.858203"],["99.422858","22.95454"],["99.521735","22.955884"],["99.488432","23.051046"],["99.336512","23.101188"],["99.258964","23.048934"],["99.10449","23.057463"],["98.99924","23.151389"],["98.858693","23.167152"],["98.89811","23.292382"],["98.844295","23.323341"],["98.878284","23.4184"],["98.821571","23.466061"],["98.773527","23.530055"],["98.849638","23.617887"],["98.774085","23.751823"],["98.656368","23.775684"],["98.63961","23.801661"],["98.649909","23.978332"],["98.828974","24.077833"],["98.83893","24.109859"],["98.594849","24.051324"],["98.534853","24.098401"],["98.118939","24.06406"],["97.652578","23.812007"],["97.500916","23.916402"],["97.507889","23.946076"],["97.703905","24.12772"],["97.7321","24.242073"],["97.646012","24.307132"],["97.678134","24.384313"],["97.653759","24.420913"],["97.528617","24.403523"],["97.504349","24.421636"],["97.520614","24.750904"],["97.686181","24.867223"],["97.726886","24.872596"],["97.701159","24.901891"],["97.691374","25.085579"],["97.816257","25.289948"],["97.844152","25.297669"],["97.93803","25.249897"],["98.122308","25.413237"],["98.152177","25.643055"],["98.313818","25.589382"],["98.380058","25.615679"],["98.510756","25.863626"],["98.635018","25.83211"],["98.668857","25.860517"],["98.546226","26.121072"],["98.648708","26.171346"],["98.686366","26.138757"],["98.648","26.279486"],["98.751404","26.620222"],["98.701365","26.849746"],["98.733852","27.033154"],["98.685272","27.065508"],["98.663149","27.194049"],["98.708661","27.325701"],["98.657935","27.422786"],["98.67244","27.532116"],["98.574979","27.540164"],["98.537407","27.61841"],["98.464022","27.631357"],["98.417695","27.512725"],["98.29766","27.498051"],["98.144388","27.832814"],["98.155954","27.920407"],["98.109477","27.953809"],["98.111","28.123353"],["97.991245","28.182664"],["97.984571","28.253152"],["97.904449","28.328541"],["97.775702","28.306704"],["97.650433","28.498038"],["97.537651","28.471615"],["97.537544","28.300942"],["97.374809","28.215134"],["97.340262","28.085365"],["97.441328","28.020526"],["97.41045","27.866111"],["97.271254","27.865238"],["97.104206","27.710621"],["97.074959","27.716851"],["96.959302","27.833554"],["96.799979","27.862962"],["96.485238","28.041967"],["96.435456","28.122218"],["96.282742","28.11548"],["96.254032","28.195619"],["96.011753","28.160892"],["95.866721","28.266533"],["95.747824","28.246895"],["95.417182","28.118906"],["95.304315","27.916842"],["94.898787","27.716889"],["94.531603","27.567615"],["94.290032","27.552854"],["93.888688","27.17204"],["93.845987","27.008916"],["93.571308","26.909059"],["92.944937","26.862668"],["92.647405","26.922873"],["92.093539","26.830122"],["92.094247","26.952103"],["91.998589","27.089524"],["92.083004","27.299047"],["92.034273","27.387239"],["91.995907","27.444668"],["91.729424","27.433927"],["91.566002","27.518015"],["91.534996","27.644815"],["91.602566","27.75719"],["91.514804","27.82382"],["91.562676","27.867913"],["91.468799","27.914302"],["91.441784","27.98019"],["91.319818","28.026891"],["91.09123","27.815659"],["90.700164","28.042914"],["90.592875","27.992071"],["90.457885","28.016188"],["90.284765","28.126494"],["90.15898","28.149257"],["90.026414","28.108761"],["89.808083","28.209972"],["89.741178","28.14466"],["89.620585","28.133666"],["89.394701","27.853894"],["89.261577","27.776101"],["89.129934","27.494282"],["89.208705","27.359876"],["89.003119","27.183627"],["88.914757","27.261172"],["88.754318","27.459692"],["88.742559","27.575756"],["88.824484","27.683585"],["88.858366","27.84585"],["88.817167","27.989323"],["88.749833","28.04227"],["88.643789","28.079175"],["88.414536","27.948938"],["88.164768","27.927649"],["88.119621","27.836742"],["87.844298","27.914245"],["87.731731","27.773994"],["87.596998","27.78341"],["87.555606","27.832169"],["87.226918","27.783961"],["87.114007","27.809055"],["87.017899","27.921014"],["86.741974","28.007834"],["86.699681","28.06541"],["86.621253","28.036683"],["86.583402","28.057988"],["86.53626","27.935498"],["86.410089","27.875861"],["86.21079","27.953771"],["86.168518","28.117581"],["86.115561","28.075237"],["86.149271","27.905693"],["85.994046","27.879218"],["85.944521","27.932939"],["85.832512","28.151055"],["85.730202","28.210313"],["85.701256","28.320003"],["85.608344","28.222546"],["85.501399","28.296408"],["85.379283","28.245137"],["85.108273","28.308745"],["85.080035","28.467918"],["85.159664","28.55567"],["85.153999","28.618263"],["85.06716","28.641711"],["84.995663","28.560816"],["84.851232","28.539159"],["84.68178","28.609315"],["84.624424","28.696084"],["84.465938","28.711423"],["84.389849","28.828396"],["84.202845","28.880867"],["84.21602","29.009754"],["84.163899","29.035197"],["84.138279","29.170731"],["84.156046","29.210987"],["84.110534","29.218441"],["84.085858","29.266484"],["83.922973","29.294016"],["83.658078","29.134976"],["83.571818","29.151918"],["83.232014","29.552591"],["83.070545","29.578981"],["82.920063","29.684809"],["82.816744","29.661877"],["82.675381","29.739992"],["82.684436","29.800693"],["82.605515","29.811846"],["82.541184","29.930689"],["82.159367","30.045582"],["82.174859","30.141657"],["82.084479","30.216893"],["82.077913","30.310431"],["81.993091","30.291904"],["81.637645","30.413095"],["81.562006","30.34101"],["81.44238","30.380465"],["81.419613","30.185719"],["81.306617","30.138261"],["81.279452","29.994378"],["81.11603","30.010804"],["80.995588","30.23662"],["80.302677","30.539587"],["80.0878","30.543727"],["79.94236","30.672449"],["79.868267","30.834188"],["79.825373","30.839126"],["79.673774","30.945519"],["79.593372","30.894565"],["79.4033","31.036535"],["79.346716","31.001927"],["79.336288","30.933391"],["79.224193","30.920174"],["79.170227","30.981969"],["79.092743","30.963258"],["78.986249","31.027673"],["78.96668","31.157988"],["78.856924","31.281503"],["78.783796","31.274131"],["78.728542","31.344273"],["78.757918","31.433515"],["78.697536","31.51499"],["78.804524","31.611708"],["78.62458","31.82264"],["78.722126","31.927562"],["78.578596","31.999524"],["78.497701","32.11424"],["78.432641","32.118838"],["78.402622","32.220389"],["78.4762","32.31131"],["78.36638","32.528271"],["78.381336","32.554898"],["78.75176","32.731065"],["78.809223","32.496551"],["78.976872","32.364195"],["79.005883","32.376536"],["79.080126","32.394077"],["79.114029","32.491665"],["79.279168","32.61355"],["79.272795","32.713951"],["79.195912","32.779409"],["79.222884","32.93039"],["79.135616","33.001861"],["79.1289","33.16414"],["78.818901","33.407102"],["78.715496","33.540948"],["78.723736","33.604683"],["78.656015","33.65053"],["78.749506","33.746395"],["78.715582","33.972994"],["78.631468","34.014908"],["78.635867","34.100789"],["78.894839","34.171104"],["78.97243","34.341399"],["78.867137","34.336615"],["78.698266","34.491737"],["78.566988","34.478543"],["78.527312","34.539705"],["78.430667","34.514354"],["78.403587","34.570207"],["78.247139","34.615374"],["78.238835","34.685346"],["78.179204","34.722162"],["78.172767","34.964414"],["78.056982","35.102584"],["77.985699","35.231108"],["77.986279","35.376996"],["78.060694","35.455461"],["77.904546","35.435236"],["77.815948","35.484733"],["77.688854","35.41908"],["77.389219","35.439747"],["77.300084","35.509365"],["77.189727","35.490691"],["76.844516","35.637645"],["76.746969","35.630442"],["76.675837","35.721674"],["76.57151","35.752903"],["76.552477","35.878323"],["76.372211","35.795695"],["76.149781","35.797227"],["76.124933","35.947734"],["75.922673","36.058952"],["75.911558","36.150212"],["76.037836","36.25097"],["75.962627","36.325913"],["75.987883","36.449905"],["75.852334","36.642976"],["75.645268","36.740208"],["75.442793","36.696296"],["75.389578","36.92691"],["75.229053","36.936669"],["75.144038","36.993436"],["74.896481","36.905551"],["74.830134","37.022531"],["74.731107","36.999897"],["74.690745","37.052831"],["74.559724","37.004866"],["74.481919","37.046871"],["74.437845","37.120308"],["74.499922","37.266966"],["74.739861","37.314987"],["74.866312","37.253902"],["75.109062","37.372562"],["75.102367","37.44057"],["74.921629","37.536802"],["74.864573","37.654148"],["74.964759","37.773242"],["74.890065","37.834937"],["74.908884","37.982278"],["74.777327","38.153069"],["74.761705","38.335766"],["74.838288","38.415972"],["74.834661","38.466073"],["74.630191","38.571841"],["74.373536","38.625873"],["74.159667","38.646204"],["74.103234","38.581"],["74.111817","38.521998"],["74.000838","38.494528"],["73.77285","38.599147"],["73.670411","38.8621"],["73.725193","38.95749"],["73.802719","38.951449"],["73.807654","38.986017"],["73.72221","39.008697"],["73.473516","39.38863"],["73.616295","39.498494"],["73.852308","39.511093"],["73.918183","39.600828"],["73.897347","39.705585"],["73.808942","39.800228"],["73.93934","39.994893"],["73.923182","40.040084"],["74.206402","40.150079"],["74.349396","40.120697"],["74.57305","40.295485"],["74.65313","40.30568"],["74.68538","40.371234"],["74.834146","40.370645"],["74.764109","40.445837"],["74.82522","40.547706"],["74.991968","40.485604"],["75.234225","40.478276"],["75.595829","40.68866"],["75.623209","40.675235"],["75.670288","40.537172"],["75.761075","40.482617"],["75.702088","40.361506"],["75.718331","40.319244"],["75.831778","40.356634"],["75.909498","40.327457"],["75.962198","40.405801"],["76.169136","40.4108"],["76.276231","40.468254"],["76.350474","40.381058"],["76.518981","40.485522"],["76.629574","40.63177"],["76.618888","40.769281"],["76.705191","40.836687"],["76.738064","40.970777"],["76.866853","41.052415"],["77.002079","41.102703"],["77.174621","41.038594"],["77.761016","41.051719"],["77.819595","41.177071"],["78.104789","41.252161"],["78.153155","41.41058"],["78.633699","41.494773"],["78.691227","41.573398"],["79.204752","41.752489"],["79.314144","41.836204"],["79.760721","41.919283"],["79.886034","42.062214"],["80.133162","42.067184"],["80.141101","42.212865"],["80.253518","42.271926"],["80.176806","42.427971"],["80.233755","42.509043"],["80.134728","42.629333"],["80.233669","42.836907"],["80.527124","42.908804"],["80.358446","43.012006"],["80.363209","43.05597"],["80.77054","43.196057"],["80.751915","43.283969"],["80.657952","43.321619"],["80.722024","43.489763"],["80.498157","43.799783"],["80.367136","44.112086"],["80.382199","44.282371"],["80.320637","44.484489"],["80.375676","44.600628"],["80.200903","44.711915"],["80.153825","44.809898"],["79.982829","44.769908"],["79.863417","44.896027"],["79.863911","44.925979"],["80.099001","45.081976"],["80.380783","45.073778"],["80.472493","45.151008"],["80.593643","45.1361"],["80.723355","45.20611"],["80.897505","45.157969"],["81.777248","45.412611"],["81.933761","45.262246"],["82.295816","45.254845"],["82.544253","45.206065"],["82.569401","45.340669"],["82.52743","45.402307"],["82.265496","45.514783"],["82.238288","45.626914"],["82.311373","45.780155"],["82.319655","45.956177"],["82.440763","46.003982"],["82.822452","46.775333"],["83.012309","47.24291"],["83.148286","47.241861"],["83.371532","47.179737"],["83.583899","47.087891"],["83.927865","46.999324"],["84.753106","47.038661"],["84.955001","46.896507"],["85.227256","47.083274"],["85.529079","47.087102"],["85.670679","47.295094"],["85.656817","47.416255"],["85.581307","47.505664"],["85.500433","48.023314"],["85.564678","48.210504"],["85.778117","48.445159"],["86.21609","48.461326"],["86.297393","48.520485"],["86.571493","48.56921"],["86.745751","48.738276"],["86.72689","48.79468"],["86.785169","48.850936"],["86.706676","48.980358"],["86.708565","49.011387"],["86.889625","49.162344"],["87.145572","49.183316"],["87.435358","49.10582"],["87.476878","49.120484"],["87.490826","49.169134"],["87.836187","49.198616"],["87.895432","49.115877"],["87.87024","49.056222"],["87.9406","48.974696"],["87.803872","48.87904"],["88.125672","48.72326"],["88.023491","48.591881"],["88.35763","48.495848"],["88.450756","48.423234"],["88.527102","48.435337"],["88.631537","48.352171"],["88.608513","48.280466"],["88.657844","48.207172"],["88.828926","48.136652"],["88.942652","48.146274"],["89.088199","48.017358"],["89.571383","48.066881"],["89.777999","47.863838"],["90.077548","47.910676"],["90.155997","47.747389"],["90.399628","47.669347"],["90.413575","47.647046"],["90.398619","47.62125"]];var JPN=[["145.824681","43.408601"],["145.802708","43.198731"],["145.188847","43.068449"],["144.992667","42.907867"],["143.970938","42.890345"],["143.384543","42.351736"],["143.299399","41.875506"],["142.95333","42.100071"],["142.391844","42.272669"],["141.369501","42.535185"],["140.832544","42.147648"],["141.028863","41.945699"],["141.296655","41.765675"],["141.564447","41.265171"],["141.675004","40.481173"],["141.829516","40.300647"],["141.982619","40.122464"],["142.142627","39.594221"],["142.025897","39.368452"],["142.021777","39.317473"],["141.850783","38.901626"],["140.939308","35.65669"],["139.436268","34.193845"],["137.347075","34.1603"],["135.63835","33.29272"],["133.488103","32.70897"],["131.614016","31.325292"],["130.633951","28.842845"],["127.785048","25.789008"],["126.597333","26.344784"],["128.404011","28.563857"],["128.940636","30.856318"],["128.544464","32.79621"],["129.194642","34.475467"],["129.324698","34.765641"],["129.502255","34.700627"],["129.480282","33.855809"],["130.439605","33.915587"],["130.801388","34.159716"],["130.791882","34.445506"],["131.121471","34.437578"],["131.298124","34.567727"],["132.535148","35.287335"],["132.978675","36.154847"],["133.268559","36.366209"],["134.710796","35.708808"],["135.303308","35.794165"],["136.404389","36.456814"],["136.612743","37.37546"],["137.409252","37.580348"],["137.291471","36.906421"],["137.982237","37.126821"],["138.504087","37.383552"],["138.758146","37.83898"],["139.207212","38.04151"],["139.310081","38.315743"],["139.737028","38.85997"],["139.403318","39.234917"],["139.952634","39.328459"],["140.002073","39.745742"],["139.695586","39.824208"],["139.679107","40.025361"],["139.935912","40.077921"],["140.001079","40.309807"],["139.922802","40.434311"],["139.828954","40.646676"],["139.95008","40.766604"],["139.957833","41.432491"],["140.001779","42.027933"],["139.389291","42.038134"],["139.346719","42.242877"],["139.63099","42.291658"],["139.72712","42.641155"],["139.942098","42.710048"],["140.194783","42.842098"],["140.30396","42.856193"],["140.309453","43.306551"],["140.393224","43.399418"],["140.61976","43.355264"],["140.788732","43.238558"],["140.923314","43.24556"],["141.029058","43.24356"],["141.083989","43.216544"],["141.141667","43.185513"],["141.336675","43.240561"],["141.328435","43.731771"],["141.350408","43.792272"],["141.594854","43.937818"],["141.565334","44.291761"],["141.70541","44.45177"],["141.708157","44.742196"],["141.683437","45.002047"],["141.226594","45.076599"],["141.053559","45.165748"],["140.987641","45.335905"],["140.943696","45.481498"],["141.201589","45.501064"],["141.972005","45.52416"],["142.341996","45.204477"],["142.567215","45.014513"],["142.747966","44.801094"],["143.487122","44.343678"],["144.463587","44.078617"],["144.874201","44.098345"],["145.125513","44.222478"],["145.300832","44.391445"],["145.487445","44.320885"],["145.111163","43.848378"],["145.420933","43.545126"],["145.451146","43.393635"]];var EAST=[["73.757316","29.95798"],["73.045185","28.989136"],["72.434431","28.60931"],["72.060098","28.097836"],["71.631749","27.60702"],["70.67236","27.593264"],["69.82743","27.041579"],["70.337045","26.566045"],["70.070655","26.098932"],["70.070655","25.85946"],["70.290717","25.713457"],["70.626599","25.671708"],["70.68451","25.201036"],["70.974064","24.791642"],["70.811914","24.612763"],["70.139151","24.465923"],["69.268014","24.435423"],["68.313114","24.267539"],["67.911051","23.808548"],["68.547651","23.00912"],["69.11724","22.684917"],["68.748682","22.406416"],["69.301519","21.536417"],["70.153052","20.55461"],["71.170222","20.332219"],["72.234349","21.204506"],["72.501752","21.087142"],["72.627589","19.003767"],["72.973641","16.878922"],["74.267757","13.888898"],["75.369075","10.48118"],["76.976429","7.781262"],["78.374805","8.242836"],["79.427902","9.641233"],["80.513091","10.734685"],["80.254133","11.953377"],["80.702994","13.082541"],["80.402232","15.312175"],["82.991824","16.887862"],["85.259974","19.051683"],["87.784208","21.10679"],["89.263244","21.658877"],["89.121009","23.437218"],["88.869364","23.717994"],["88.93501","24.317619"],["88.267603","24.596482"],["88.727129","25.073086"],["89.186656","25.132532"],["88.891246","25.626788"],["88.650542","25.666241"],["88.201956","25.892841"],["88.420778","26.12883"],["88.54113","26.285892"],["89.241361","26.020727"],["89.613359","25.863309"],["89.657124","25.330477"],["90.190932","25.070998"],["91.175632","25.051175"],["91.811935","25.05221"],["92.234344","24.983507"],["92.104658","24.649259"],["91.844714","24.363456"],["91.46563","24.215373"],["90.999897","23.839459"],["91.216517","23.054471"],["91.389672","22.300847"],["92.125338","20.623521"],["93.946113","18.753448"],["92.823675","16.135717"],["91.224276","9.998681"],["93.522355","5.752403"],["96.409859","0.991383"],["100.048825","-3.72227"],["104.60328","-7.736835"],["114.01025","-9.967468"],["123.433702","-11.032285"],["123.717523","-10.536628"],["124.427075","-10.257467"],["125.004217","-9.79418"],["125.026253","-9.527403"],["125.12788","-9.406056"],["125.031601","-9.358561"],["124.946021","-9.216037"],["125.026253","-9.168516"],["125.192065","-9.13155"],["125.181368","-8.982538"],["124.999509","-8.987821"],["124.919277","-8.924418"],["125.095787","-8.596662"],["125.555784","-8.088612"],["125.721597","-8.120384"],["127.292232","-8.326419"],["132.424841","-8.447132"],["139.646777","-8.512957"],["141.039618","-9.209048"],["141.025347","-6.894209"],["140.978655","-6.887392"],["140.92235","-6.851943"],["140.912737","-6.791946"],["140.905871","-6.737397"],["140.850939","-6.695117"],["140.903124","-6.59554"],["140.945696","-6.509588"],["141.000442","-6.341825"],["140.971754","-2.322171"],["131.63417","2.671779"],["125.182746","17.665698"],["120.512231","19.243264"],["119.486602","16.550429"],["119.820154","12.379244"],["115.293339","5.77989"],["114.675587","4.850295"],["114.550618","4.735342"],["113.923024","4.60805"],["113.581092","3.881824"],["113.423754","3.763395"],["113.138025","3.427757"],["112.798973","3.119213"],["111.886744","2.960093"],["109.608393","3.016867"],["108.771364","3.935896"],["107.181008","7.101455"],["110.509765","12.398562"],["108.171244","18.449712"],["108.482399","21.923911"],["106.042422","23.36869"],["103.861684","23.500971"],["101.853026","22.51803"],["101.964992","22.453371"],["102.079606","22.467488"],["102.100842","22.366033"],["102.192713","22.264854"],["102.457234","22.052786"],["102.482552","21.991854"],["102.505944","21.933096"],["102.598494","21.858522"],["102.635027","21.768076"],["102.625285","21.706993"],["102.652076","21.663993"],["102.749497","21.641356"],["102.798208","21.673047"],["102.841349","21.836472"],["102.857688","21.688772"],["102.936435","21.684707"],["102.971433","21.587108"],["102.897061","21.530145"],["102.831439","21.416153"],["102.853313","21.363197"],["102.770191","21.249074"],["102.905811","20.975636"],["103.219101","20.747931"],["103.517772","20.714677"],["103.809332","20.581588"],["103.928404","20.796397"],["104.17602","20.868718"],["104.456453","20.674762"],["104.597217","20.649539"],["104.494205","20.561152"],["104.33078","20.448774"],["104.574769","20.381484"],["104.658948","20.213054"],["104.76838","20.149846"],["104.838529","20.181454"],["104.938282","20.043215"],["104.745932","19.888842"],["104.790827","19.817585"],["104.656142","19.725166"],["104.580381","19.643265"],["104.41625","19.738372"],["104.315236","19.711959"],["104.004834","19.776374"],["103.978829","19.601517"],["104.057089","19.487272"],["103.795479","19.292317"],["104.05618","19.205901"],["104.303857","19.041792"],["104.509718","18.953592"],["104.638381","18.819682"],["104.82816","18.734411"],["105.081179","18.714495"],["105.090265","18.561021"],["105.010482","18.494337"],["105.215532","18.232365"],["105.507333","18.022503"],["105.673181","17.706155"],["105.959258","17.411042"],["106.393016","16.974064"],["106.530565","16.907086"],["106.511314","16.705452"],["106.610307","16.485756"],["106.704089","16.360817"],["106.855183","16.430793"],["106.917705","16.245803"],["107.074009","16.275813"],["107.178212","16.130721"],["107.386617","15.975505"],["107.256364","15.895346"],["107.157745","15.729918"],["107.270294","15.538977"],["107.541111","15.371176"],["107.598724","15.119441"],["107.495192","15.087312"],["107.421241","14.973038"],["107.491494","14.719275"],["107.439728","14.558285"],["107.365777","14.619117"],["107.28443","14.576179"],["107.125343","14.454386"],["107.058787","14.468707"],["106.862816","14.336197"],["106.714913","14.443644"],["106.640961","14.525985"],["106.467176","14.622607"],["106.385829","14.475868"],["106.219438","14.500928"],["106.189858","14.42932"],["106.104814","14.407834"],["105.956911","14.346944"],["105.993887","14.192854"],["106.138092","14.056594"],["106.067838","13.984846"],["105.938423","13.948964"],["105.860774","14.067355"],["105.570516","14.196239"],["105.40579","14.123984"],["105.307739","14.207645"],["105.23322","14.257067"],["105.284207","14.321679"],["105.397946","14.336879"],["105.499919","14.435654"],["105.550906","14.617894"],["105.535217","14.773437"],["105.660723","14.90613"],["105.629347","15.019802"],["105.511685","15.118269"],["105.543062","15.182626"],["105.660723","15.2848"],["105.543062","15.368016"],["105.641113","15.40205"],["105.652879","15.526792"],["105.672489","15.723201"],["105.433244","15.866611"],["105.419865","16.077323"],["105.134284","16.158015"],["105.05029","16.303179"],["104.798307","16.56635"],["104.815106","16.791639"],["104.807079","17.064937"],["104.834545","17.357467"],["104.746654","17.518618"],["104.392993","17.569592"],["104.221867","17.790865"],["104.071113","18.043041"],["103.989584","18.196169"],["103.880878","18.236734"],["103.692584","18.269917"],["103.616878","18.310466"],["103.546996","18.349162"],["103.428584","18.336313"],["103.370348","18.277339"],["103.302336","18.221647"],["103.237773","18.102183"],["103.207191","18.040806"],["103.105249","17.937384"],["102.938746","17.875949"],["102.914959","17.827432"],["102.813018","17.765959"],["102.687291","17.753015"],["102.568359","17.830667"],["102.510593","17.840371"],["102.422244","17.921219"],["102.310109","17.960013"],["102.204769","17.995566"],["102.143605","18.066652"],["101.987295","17.966477"],["101.868364","17.927685"],["101.647491","17.811257"],["101.148809","17.535022"],["101.023374","17.599797"],["101.039054","17.808912"],["101.175591","17.993048"],["101.212078","18.10208"],["101.219896","18.173904"],["101.206865","18.240749"],["101.212078","18.344679"],["101.107829","18.394147"],["101.092192","18.45349"],["101.206865","18.578877"],["101.31372","18.655442"],["101.272021","18.741845"],["101.272021","18.830671"],["101.311114","18.939171"],["101.370997","19.079681"],["101.298023","19.148632"],["101.279779","19.212632"],["101.22818","19.375675"],["101.230424","19.441269"],["101.295484","19.487804"],["101.29997","19.591402"],["101.239397","19.633668"],["101.145173","19.587175"],["101.093574","19.629442"],["100.94102","19.650571"],["100.893907","19.65691"],["100.864742","19.616763"],["100.835578","19.570265"],["100.770518","19.534326"],["100.611233","19.574493"],["100.584312","19.52164"],["100.525983","19.540669"],["100.46541","19.637894"],["100.436245","19.777288"],["100.541687","19.91867"],["100.597773","20.190526"],["100.502946","20.195053"],["100.428788","20.262059"],["100.379218","20.36601"],["100.329779","20.413638"],["100.244635","20.387895"],["100.173224","20.317079"],["100.160865","20.244943"],["100.114789","20.260301"],["100.107922","20.315689"],["100.155988","20.507461"],["100.211891","20.650056"],["100.290818","20.736459"],["100.399973","20.811825"],["100.562866","20.788277"],["100.673701","20.899705"],["100.59616","20.954029"],["100.751867","21.254036"],["100.998402","21.338663"],["101.211622","21.580378"],["101.209043","21.846211"],["100.909901","21.894492"],["100.207565","21.580378"],["100.051491","22.159742"],["99.466212","22.436515"],["99.71333","23.024318"],["99.352488","23.281431"],["99.03983","24.3247"],["98.101855","24.95993"],["98.855913","25.608485"],["98.911088","26.812993"],["98.892697","27.483968"],["98.340947","27.826069"],["98.120247","28.377665"],["97.586888","28.733061"],["97.108705","28.329109"],["96.658506","27.787659"],["96.296725","28.010502"],["95.847241","28.136253"],["95.288126","27.787659"],["94.685158","27.233428"],["93.281889","26.647032"],["92.037851","26.720259"],["90.141229","26.820605"],["88.984724","26.833974"],["88.731159","27.080308"],["88.794435","27.331629"],["88.741186","27.914582"],["88.223484","27.953015"],["88.169108","27.50057"],["87.774017","27.262697"],["88.215457","26.870398"],["87.783036","26.535989"],["87.047344","26.702224"],["84.777332","27.310285"],["83.539214","27.665305"],["82.385985","27.880248"],["81.010299","28.662263"],["80.547568","29.001896"],["81.345045","30.304903"],["80.749935","31.185747"],["80.056967","31.015739"],["79.215234","31.178494"],["78.991224","31.346766"],["79.254658","31.656243"],["78.835019","31.979804"],["78.65109","32.12011"],["78.595912","32.240756"],["78.591313","32.400075"],["78.669483","32.54361"],["78.739513","32.426665"],["78.84424","32.288005"],["79.067657","32.24668"],["79.277111","32.470789"],["79.395802","32.676713"],["79.235221","33.233259"],["79.011803","33.47819"],["78.84424","33.681772"],["79.182009","34.336185"],["78.821102","34.565916"],["78.428537","34.758609"],["78.294895","34.940474"],["78.23791","35.530039"],["77.722544","35.628785"],["77.294994","35.609184"],["76.821489","35.701892"],["76.684572","35.988603"],["76.399329","35.919333"],["76.159724","35.933192"],["76.165429","36.20986"],["76.074151","36.366207"],["75.999987","36.641347"],["75.714744","36.787688"],["75.562518","36.805399"],["75.481245","36.811057"],["75.45651","36.950968"],["75.253968","37.023882"],["75.084541","37.066268"],["74.894884","37.084426"],["74.735572","37.122745"],["74.643309","37.074934"],["74.566145","37.033976"],["74.549925","36.938948"],["74.491692","37.015218"],["74.377803","36.998366"],["74.261908","36.915016"],["74.132106","36.91687"],["74.057933","36.840851"],["73.967535","36.853836"],["73.925813","36.892775"],["73.808039","36.908632"],["73.728388","36.920709"],["73.639124","36.911926"],["73.699986","36.820121"],["73.765904","36.814624"],["73.833196","36.776135"],["73.853795","36.743128"],["73.834569","36.711208"],["73.735692","36.736525"],["73.657414","36.707906"],["73.599736","36.711208"],["73.57227","36.735425"],["73.517339","36.729922"],["73.397862","36.757433"],["73.319585","36.738726"],["73.241307","36.720664"],["73.175389","36.732772"],["73.112218","36.71516"],["73.032567","36.686532"],["73.039433","36.651284"],["73.060033","36.609405"],["73.036687","36.564195"],["73.002355","36.529994"],["72.958409","36.507921"],["72.944676","36.475904"],["72.886998","36.474799"],["72.855412","36.448292"],["72.848546","36.400777"],["72.832334","36.374217"],["72.796629","36.362053"],["72.685258","36.303681"],["72.663286","36.274901"],["72.574022","36.267151"],["72.461412","36.175196"],["73.530389","35.809316"],["74.170542","35.420826"],["74.340245","35.055408"],["73.9237","34.612198"],["73.676858","34.332391"],["73.880481","33.422673"],["74.651862","32.906095"],["75.747223","32.542685"],["75.623802","32.256112"],["74.975842","31.968632"],["74.759855","31.732749"],["74.759855","30.955369"],["74.327882","30.584206"],["74.18929","30.224947"],["74.035013","29.864372"]];var getOutseaData=function(e){if(e&&e==="mapbox"){return{boundsP16:[[CHN]],nebulaOutSea:[]}}else{return{boundsP16:[[CHN],[JPN],[EAST]],nebulaOutSea:[[JPN],[EAST]]}}};var geoUtil=new GeometryUtilCls({});var CONSTS$1={sV:"https://webapi.amap.com/style_icon/sprite_v8@2x.png",EU:[LangConf.my.type,LangConf.km.type,LangConf.PU.type,LangConf.th.type,LangConf.$U.type]};var MapboxLabelFormat$1=function(t){__extends(e,t);function e(e){var r=t.call(this)||this;r.kQ={};return r}e.prototype.Ns=function(e,r){t.prototype.Ns.call(this,e,r);return this.rV(e,r)};e.prototype.rV=function(e,r){var t=e.data||{};var i=t.poilabel||[];var a=e.road||[];var n={};var o=this.hV(e);var f;for(var s in i){if(i.hasOwnProperty(s)){f=i[s];var u=this.nV(f,o,r.zoom,r.VQ);n[s]=u}}var l=this.oV(a,{});return n};e.prototype.nV=function(e,r,t,i){var a=[];var n=this.kQ;for(var o=0,f=e;o<f.length;o++){var s=f[o];var u=s.name,l=s.position,v=s.id,c=s.minzoom,h=s.maxzoom,d=s.style,_=d===void 0?{}:d;if(i!=="mapbox"&&t>=9&&r&&!this.uV(l[0])){continue}var g=_.lV,y=_.th,m=_.ih,p=_.nh,b=_.qU,x=_.eh,C=_.textAnchor,S=C===void 0?"bottom":C,M=_.rh,w=_.sh,k=_.Kr,T=_.Qr;var I=[c,h];var A=null;if(p&&b&&x){this.Fs[CONSTS$1.sV]=1;A=[{image:CONSTS$1.sV,size:[b[6]/2,b[7]/2],clipOrigin:[b[4],b[5]],clipSize:[b[6],b[7]]}]}var $=null;if(u&&k){if(!n[k]){n[k]=Util$3.color2RgbaArray(k)}var F=n[k];var P=void 0;var L=0;if(!n[T]){n[T]=Util$3.color2RgbaArray(T||"")}if(n[T]){P=n[T];L=3}var R=this.fV(u)?[0,u.length]:[];this.Ws(u,R);$={txt:u,$G:R,direction:S||"center",offset:[0,0],style:{fontSize:M,fillColor:F,strokeColor:P,strokeWidth:L,fold:false}}}var E={data:{id:v,name:u,txt:u,position:l[0],positionType:"relative",zooms:[y,m],extData:{id:v,type:"poi"}},opts:{zIndex:g,zooms:I,visible:true}};if(A){E.opts.icon=A}if($){E.opts.text=$}if(E.opts.text||E.opts.icon){a.push(E)}}return a};e.prototype.oV=function(e,r){var t;var i;for(var a=0,n=e;a<n.length;a++){var o=n[a];t=o.name;i=this.fV(t)?[0,t.length]:[];if(t){this.Ws(t,i)}}};e.prototype.DQ=function(e,r){var t=[];var i;var a;var n;var o;var f;for(var s=0,u=e;s<u.length;s++){var l=u[s];i=l.path;a=l.name||"";n=labelsUtil$2.aQ(a.split(""));f=l.distance||1e5;o=l.style&&l.style[1]||{};o=l.style||{};var v=o.th,c=v===void 0?zoomRange[0]:v,h=o.ih,d=h===void 0?zoomRange[1]:h,_=o.Kr,g=o.Qr,y=o.rh,m=o.zIndex,p=o.Hr,b=p===void 0?"name_en":p;var x=_;var C=g;if(a&&i&&i.length){var S={path:i,positionType:"absolute",name:a,$G:[],CO:n,rank:m,BG:b,distance:f,zooms:[c,d],style:{fontSize:y||12,fillColor:x,strokeColor:C}};t.push(S)}}return t};e.prototype.fV=function(e){var r=LangManager.kU(e);return CONSTS$1.EU.indexOf(r)!==-1};e.prototype.uV=function(e){var r="EPSG:3857";var t=ProjectionManager.getProjection(r).unproject(e[0],e[1]);var i=getOutseaData("mapbox");var a=i.boundsP16;for(var n=0;n<a.length;n++){var o=a[n];var f=geoUtil.isPointInPolygon(t,o[0]);if(f){return false}}return true};e.prototype.hV=function(e){var r=e.Ro;var t=[[r[0],r[1]],[r[2],r[1]],[r[2],r[3]],[r[0],r[3]]];return this.cV(t)};e.prototype.cV=function(e){var r=[];for(var t=0;t<e.length;t++){var i=e[t];var a="EPSG:3857";var n=ProjectionManager.getProjection(a).unproject(i[0],i[1]);r.push(n)}var o=getOutseaData("mapbox");var f=o.boundsP16;for(var s=0;s<f.length;s++){var u=f[s];var l=geoUtil["isRingInRingByMapboxB"](r,u[0]);if(l){return true}}return false};e.id="mapbox";return e}(LabelFormat);var Color$1=function(){function e(e){this.type="AMap.Color";this.rgba=[];this.Vb(e)}r=e;e.Wb=function(e,r){return{rgba:e.rgba}};e.Gb=function(e){return new r(e.rgba)};e.FV=function(e,r){var t=this.DV(e[0],e[1],e[2],e[3]);var i=t[0];var a=t[1];var n=t[2];var o=t[3];var f=.35;n=n-(n-.5)*r*f;a=a-(a-.5)*r*f*5;i=i+(i>.5?-.5:.5)*r*f;var s=this.GQ(i,a,n,o);return s};e.DV=function(e,r,t,i){var a=Math.max(e,r,t),n=Math.min(e,r,t),o,f,s=(a+n)/2,u;if(a===n){o=f=0}else{u=a-n;f=s>.5?u/(2-a-n):u/(a+n);switch(a){case e:o=(r-t)/u+(r<t?6:0);break;case r:o=(t-e)/u+2;break;case t:o=(e-r)/u+4;break}o/=6}return[o,f,s,i]};e.uQ=function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e};e.GQ=function(e,r,t,i){var a,n,o;if(r===0){a=n=o=t}else{var f=t<.5?t*(1+r):t+r-t*r,s=2*t-f;a=this.uQ(s,f,e+1/3);n=this.uQ(s,f,e);o=this.uQ(s,f,e-1/3)}return[a,n,o,i]};e.Hb=function(e,r){if(r===void 0){r=[]}for(var t=0,i=e.length;t<i;t+=2){r[t/2]=parseInt(e.substr(t,2),16)}return r};e.Yx=function(e){if(e.startsWith("#")){e=e.substr(1)}if(colorNames[e]){return r.Hb(colorNames[e].substr(1))}if(e.length===1){return r.Hb(e+e+e+e+e+e)}if(e.length===3){return r.Hb(e[0]+e[0]+e[1]+e[1]+e[2]+e[2])}if(e.length===6){return r.Hb(e)}return[0,0,0]};e.normalize=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r[t]=e[t]/255}return r};e.create=function(e){if(e){return new r(e)}else{return null}};e.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]};e.prototype.Vb=function(e){if(typeof e==="string"){if(colorNames[e]){this.Hb(colorNames[e].substr(1));return}if(e.length===0){return}if(e.startsWith("#")){e=e.substr(1)}if(e.length===1){this.Hb(e+e+e+e+e+e);return}if(e.length===3){this.Hb(e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);return}if(e.length===6){this.Hb(e);return}if(e.length===8){this.$b(e);return}if(e.startsWith("rgba(")){this.Yb(colorNames[e].substr(1));return}if(e.startsWith("rgb(")){this.Kb(colorNames[e].substr(1));return}}else if(e instanceof Array){this.rgba[0]=e[0];this.rgba[1]=e[1];this.rgba[2]=e[2];this.rgba[3]=e[3]||255}};e.prototype.Hb=function(e){this.$b(e+"FF")};e.prototype.$b=function(e){for(var r=0,t=e.length;r<t;r+=2){this.rgba[r/2]=parseInt(e.substr(r,2),16)}};e.prototype.Kb=function(e){var r=e.split(",");this.rgba[0]=parseInt(r[0].substr(4),10);this.rgba[1]=parseInt(r[1],10);this.rgba[2]=parseInt(r[2],10);this.rgba[3]=255};e.prototype.Yb=function(e){var r=e.split(",");this.rgba[0]=parseInt(r[0].substr(5),10);this.rgba[1]=parseInt(r[1],10);this.rgba[2]=parseInt(r[2],10);this.rgba[3]=parseFloat(r[3])*255<<0};var r;e=r=__decorate([InnerClass("Color")],e);return e}();var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var NebulaLabelFormat$1=function(t){__extends(e,t);function e(e){var r=t.call(this)||this;r.bt=20;r.WW=20;r._opts={};r.uA={};r.vn=e.vn;return r}e.prototype.Ns=function(e,r){if(r.lang){this.lang=r.lang}this._opts=r;this.bt=r.zoom;this.WW=r.ZL;return this.rV(e,r.R_)};e.prototype.rV=function(e,r){var t=e.data||{};var i=t.poilabel||[];var a={};var n=e.cQ;for(var o in i){if(i.hasOwnProperty(o)){var f=this.nV(i[o],{aV:e.zo.z<10,cQ:n,R_:r});a[o]=f}}var s=t.roadName||[];var u=this.oV(s,{R_:r});a.eA=u;return a};e.prototype.nV=function(e,r){if(r===void 0){r={}}var t=CONSTS.Lj,i=t.file,a=t.size;var n=CONSTS.Mp,o=CONSTS.Rp,f=CONSTS.Pp,s=CONSTS.jp;var u=this._opts.scale;var l=r.aV,v=r.cQ;var c=this.bt;var h=[];var d="https";var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I;var A;var $;var F;var P;var L;var R;var E;var O;var D;var U;var N;var B;var H;var z=this.lang;var G=!v&&c>=5;for(var j=0,V=e;j<V.length;j++){var W=V[j];_=W.cw;g=W.ew;y=W.pos;H=labelsUtil$2.tQ(W,z,G?r.R_:undefined);m=H.name;B=H.$G||[];p=W.rank;b=W.minzoom||n;x=l?zoomRange[1]:W.maxzoom||o;C=W.Fp;S=W.Ep;if(b===3){b=2}if(C===10002&&S===28){continue}M=this.oA(C,S,this.WW);if(!M){continue}w=u>1||M.fontSize>9?M.fontSize:9;A=M.sn;$=M.Qe;F=M.forceShow;P=M.zIndex;L=M.zooms;R=labelsUtil$2.Jj([b,zoomRange[1]],L);if(!R){continue}R=labelsUtil$2.$p(R);var q=R[0];var Z=[];var Y={};while(q<=R[1]){var K=this.vn.dn(C,S,q);if(K&&K.iconID!=="0"){var X=K.iconID;if(Z.indexOf(X)===-1){Z.push(X);Y[X]=[]}Y[X].push(q)}q++}if((C!==10002||S!==20&&S!==18)&&w>16){w=15}var J=[R[0]-f,R[1]+s];if(C===10002&&(S===13||S===18)&&J[0]<=3){J[0]=2.5}E=A&&d+i[A];O={data:{id:_?_+S:"",position:y,name:m,txt:m,rank:p,BG:H.type,extData:{Lp:C,Ap:S,id:_,type:"poi",bz:g}},opts:{type:"billboard",angle:0,forceShow:F,zIndex:P,visible:true,zooms:J}};D=M.nn||0;U=M.an||0;var Q=[];var ee=void 0;var re=[0,0];var te=void 0;for(var ie=0;ie<Z.length;ie++){var X=Z[ie];var ae=A&&this.aA(parseInt(X,10));var ne=[0,0];var oe=a;var fe=labelsUtil$2.$p(Y[X]);var se=1;if(m&&(X==="152"||X==="153"||X==="154")){se=m.length<=2?1:m.length/2}te=vector$3.Up(oe,2);if(E){Q.push({type:"image",image:E,clipOrigin:vector$3.add(ae,ne),clipSize:oe,size:[te[0]*se,te[1]],anchor:[10-D*20/24,10-U*20/24],angle:0,_2:true,zooms:[fe[0]-f,fe[fe.length-1]+s]})}}if(m){if(m==="曾母暗沙"){ee="top";re=[0,5]}else if(Q.length&&Q[0].image){var X=Z[0];if(v){ee="bottom";re=[0,0]}if(m==="北京"){ee="top";re=[0,3]}else if(m==="澳门"){ee="left";re=[0,-2]}else if(m==="合肥"){ee="bottom";re=[0,-3]}else if(m==="太原"){ee="bottom";re=[0,-3]}else if(m==="西安"){ee="bottom";re=[0,-3]}else if(m==="郑州"){ee="bottom";re=[0,-3]}else if(m==="杭州"){ee="bottom";re=[0,-3]}else if(m==="台北"){ee="bottom";re=[0,-3]}else if(m==="加德满都"){ee="bottom";re=[0,-3]}else if(C===10002&&(S===31||S===32||S===34||S===5)){ee="right";re=[-3,-3]}else if($===1){ee="right";re=[0,-2]}else if(X==="152"||X==="153"||X==="154"){ee="center";re=[0,-1]}else{ee="right";re=[0,-2]}}else{ee="center";re=[D,U]}}var ue=""+C+S;var le=this.uA[ue];if(le){k=le.faceColor;T=le.borderColor;I=le.holoColor}else{k=M.faceColor&&Color$1.normalize(M.faceColor.rgba);T=M.borderColor&&Color$1.normalize(M.borderColor.rgba);I=M.Qe===3?M.holoColor&&Color$1.normalize(M.holoColor.rgba):null;this.uA[ue]={faceColor:k,borderColor:T,holoColor:I}}N=m?{direction:ee,offset:re,$G:B,style:{fontSize:w,strokeWidth:2,padding:[0,1,0,1],fold:!v&&c>=5}}:{};if(O.opts){O.opts.icon=Q;O.opts.text=N}if(E){this.Fs[E]=1}if(m){this.Ws(m,B)}h.push(O);M=null}return h};e.prototype.oV=function(e,r){if(r===void 0){r={}}var t=CONSTS.Lj,i=t.file,a=t.size;var n=CONSTS.Mp,o=CONSTS.Rp,f=CONSTS.Pp,s=CONSTS.jp;var u=[];var l=this._opts.scale;var v=this.lang;var c=r&&r.R_&&r.R_["protocol"]||"https";var h;var d;var _;var g;var y;var m;var p;var b;for(var x=0,C=e;x<C.length;x++){var S=C[x];_=S.path;g=S.rank;y=S.minzoom||n;m=S.maxzoom||o;p=S.shield;b=S.shieldType;var M=labelsUtil$2.tQ(S,v);h=M.name;d=M.$G;if(h){this.Ws(h,d)}if(!p){continue}var w=Math.floor(_.length/2);if(w<1){continue}var k=[_[w-1],_[w]];var T=40001;var I=b;var A=this.oA(T,I,this.WW);if(!A){continue}var $=l>1||A.fontSize>9?A.fontSize:9;var F=A.faceColor;var P=A.iconID;var L={data:{id:Util$3.stamp(this),position:k,positionType:"relative",name:h,txt:p,rank:g,BG:M.type,extData:{type:"shield",Lp:T,Ap:I}},opts:{type:"billboard",angle:0,zooms:[y-f,m+s],visible:true}};var R=[0,0];var E="center";var O=this.aA(parseInt(P,10));var D=p.length/4>1?p.length/4:1;D=l>1?D:D*9/7;var U=c+i["0"];var N={type:"image",image:U,clipOrigin:O,clipSize:a,size:[24*D,24],anchor:"center",angle:0,_2:true};var B=p?{direction:E,offset:R,style:{fontSize:$,fillColor:F&&Color$1.normalize(F.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{};if(L.opts){L.opts.text=B;L.opts.icon=[N]}if(p){this.Ws(p)}u.push(L)}return u};e.prototype.DQ=function(e,r){var t;var i=CONSTS.Mp,a=CONSTS.Rp,n=CONSTS.Pp,o=CONSTS.jp;var f=this.WW=r.zoom;var s;var u;var l;var v;var c=0;var h;var d;var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w=[];var k=this.lang;var T;for(var I=0,A=e;I<A.length;I++){var $=A[I];T=$.id;_=labelsUtil$2.tQ($,k);s=_.name;g=_.$G||[];if(!s){continue}y=_.type;m=labelsUtil$2.EQ(s,g);p=labelsUtil$2.aQ(m);u=$.rank;l=$.Fp;v=$.Ep;c=$.distance||0;h=$.minzoom||i;d=$.maxzoom||a;b=this.vn.dn(l,v,f);x=b&&b[1]||{};C=x.fontSize;S=x.faceColor;M=x.borderColor;t=labelsUtil$2.$p([h,d]),h=t[0],d=t[1];d=d>=20?zoomRange[1]:d;if(s&&T&&C&&S){var F={id:T,positionType:"relative",name:s,$G:g,CO:p,rank:u,BG:y,distance:c,zooms:[h-n,d+o],path:$.path.length>0?$.path:undefined,style:{fontSize:C,fillColor:vector$3.Up(S.rgba,255),strokeColor:M&&vector$3.Up(M.rgba,255)},extData:{mainkey:l,subkey:v}};w.push(F)}}return w};e.prototype.aA=function(e){var r=CONSTS.Lj,t=r.Rj,i=t,a=r.size;var n=Math.floor(e/i);if(e%10===0){n=n-1}var o=e-i*n-1;var f=[o*a[0],n*a[1]];return f};e.prototype.oA=function(e,r,t){var i=[3,20];var a=this.vn.dn(e,r,t);var n=this.vn.mn(e,r);if(!a){var o=1;while(t-o>=i[0]||t+o<=i[1]){a=this.vn.dn(e,r,t-o);if(!a){a=this.vn.dn(e,r,t+o)}if(a){break}else{o++}}}if(a){a.zooms=n}return a};e.prototype.mN=function(e,r){var t=[0,0];if(e==="0"){switch(r){case"3":{t=[6,6];break}case"4":case"5":case"6":{t=[9,9];break}}}return t};e.prototype.TN=function(e,r,t){if(t===void 0){t=[0,0]}var i=t;if(e==="0"){switch(r){case"3":{i=[30,30];break}case"4":case"5":case"6":{i=[20,20];break}}}return i};e.id=StaticSourceID.nebulaLabel;return e}(LabelFormat);function quickselect(e,r,t,i,a){quickselectStep(e,r,t||0,i||e.length-1,a||defaultCompare)}function quickselectStep(e,r,t,i,a){while(i>t){if(i-t>600){var n=i-t+1;var o=r-t+1;var f=Math.log(n);var s=.5*Math.exp(2*f/3);var u=.5*Math.sqrt(f*s*(n-s)/n)*(o-n/2<0?-1:1);var l=Math.max(t,Math.floor(r-o*s/n+u));var v=Math.min(i,Math.floor(r+(n-o)*s/n+u));quickselectStep(e,r,l,v,a)}var c=e[r];var h=t;var d=i;swap(e,t,r);if(a(e[i],c)>0)swap(e,t,i);while(h<d){swap(e,h,d);h++;d--;while(a(e[h],c)<0)h++;while(a(e[d],c)>0)d--}if(a(e[t],c)===0)swap(e,t,d);else{d++;swap(e,d,i)}if(d<=r)t=d+1;if(r<=d)i=d-1}}function swap(e,r,t){var i=e[r];e[r]=e[t];e[t]=i}function defaultCompare(e,r){return e<r?-1:e>r?1:0}var quickselect$1=Object.freeze({__proto__:null,default:quickselect});var quickselect$2=getCjsExportFromNamespace(quickselect$1);var _rbush_2_0_2_rbush=rbush$1;var default_1=rbush$1;function rbush$1(e,r){if(!(this instanceof rbush$1))return new rbush$1(e,r);this.Bc=Math.max(4,e||9);this.Wc=Math.max(2,Math.ceil(this.Bc*.4));if(r){this.Gc(r)}this.clear()}rbush$1.prototype={all:function(){return this.qc(this.data,[])},search:function(e){var r=this.data,t=[],i=this.Yc;if(!intersects(e,r))return t;var a=[],n,o,f,s;while(r){for(n=0,o=r.children.length;n<o;n++){f=r.children[n];s=r.Zc?i(f):f;if(intersects(e,s)){if(r.Zc)t.push(f);else if(contains(e,s))this.qc(f,t);else a.push(f)}}r=a.pop()}return t},Vc:function(e){var r=this.data,t=this.Yc;if(!intersects(e,r))return false;var i=[],a,n,o,f;while(r){for(a=0,n=r.children.length;a<n;a++){o=r.children[a];f=r.Zc?t(o):o;if(intersects(e,f)){if(r.Zc||contains(e,f))return true;i.push(o)}}r=i.pop()}return false},load:function(e){if(!(e&&e.length))return this;if(e.length<this.Wc){for(var r=0,t=e.length;r<t;r++){this.Xc(e[r])}return this}var i=this.Hc(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=i}else if(this.data.height===i.height){this.Jc(this.data,i)}else{if(this.data.height<i.height){var a=this.data;this.data=i;i=a}this.Kc(i,this.data.height-i.height-1,true)}return this},Xc:function(e){if(e)this.Kc(e,this.data.height-1);return this},clear:function(){this.data=createNode([]);return this},remove:function(e,r){if(!e)return this;var t=this.data,i=this.Yc(e),a=[],n=[],o,f,s,u;while(t||a.length){if(!t){t=a.pop();f=a[a.length-1];o=n.pop();u=true}if(t.Zc){s=findItem(e,t.children,r);if(s!==-1){t.children.splice(s,1);a.push(t);this.Qc(a);return this}}if(!u&&!t.Zc&&contains(t,i)){a.push(t);n.push(o);o=0;f=t;t=t.children[0]}else if(f){o++;t=f.children[o];u=false}else t=null}return this},Yc:function(e){return e},tf:compareNodeMinX,if:compareNodeMinY,toJSON:function(){return this.data},ef:function(e){this.data=e;return this},qc:function(e,r){var t=[];while(e){if(e.Zc)r.push.apply(r,e.children);else t.push.apply(t,e.children);e=t.pop()}return r},Hc:function(e,r,t,i){var a=t-r+1,n=this.Bc,o;if(a<=n){o=createNode(e.slice(r,t+1));calcBBox(o,this.Yc);return o}if(!i){i=Math.ceil(Math.log(a)/Math.log(n));n=Math.ceil(a/Math.pow(n,i-1))}o=createNode([]);o.Zc=false;o.height=i;var f=Math.ceil(a/n),s=f*Math.ceil(Math.sqrt(n)),u,l,v,c;multiSelect(e,r,t,s,this.tf);for(u=r;u<=t;u+=s){v=Math.min(u+s-1,t);multiSelect(e,u,v,f,this.if);for(l=u;l<=v;l+=f){c=Math.min(l+f-1,v);o.children.push(this.Hc(e,l,c,i-1))}}calcBBox(o,this.Yc);return o},nf:function(e,r,t,i){var a,n,o,f,s,u,l,v;while(true){i.push(r);if(r.Zc||i.length-1===t)break;l=v=Infinity;for(a=0,n=r.children.length;a<n;a++){o=r.children[a];s=bboxArea(o);u=enlargedArea(e,o)-s;if(u<v){v=u;l=s<l?s:l;f=o}else if(u===v){if(s<l){l=s;f=o}}}r=f||r.children[0]}return r},Kc:function(e,r,t){var i=this.Yc,a=t?e:i(e),n=[];var o=this.nf(a,this.data,r,n);o.children.push(e);extend$1(o,a);while(r>=0){if(n[r].children.length>this.Bc){this.af(n,r);r--}else break}this.sf(a,n,r)},af:function(e,r){var t=e[r],i=t.children.length,a=this.Wc;this.rf(t,a,i);var n=this.hf(t,a,i);var o=createNode(t.children.splice(n,t.children.length-n));o.height=t.height;o.Zc=t.Zc;calcBBox(t,this.Yc);calcBBox(o,this.Yc);if(r)e[r-1].children.push(o);else this.Jc(t,o)},Jc:function(e,r){this.data=createNode([e,r]);this.data.height=e.height+1;this.data.Zc=false;calcBBox(this.data,this.Yc)},hf:function(e,r,t){var i,a,n,o,f,s,u,l;s=u=Infinity;for(i=r;i<=t-r;i++){a=distBBox(e,0,i,this.Yc);n=distBBox(e,i,t,this.Yc);o=intersectionArea(a,n);f=bboxArea(a)+bboxArea(n);if(o<s){s=o;l=i;u=f<u?f:u}else if(o===s){if(f<u){u=f;l=i}}}return l},rf:function(e,r,t){var i=e.Zc?this.tf:compareNodeMinX,a=e.Zc?this.if:compareNodeMinY,n=this.lf(e,r,t,i),o=this.lf(e,r,t,a);if(n<o)e.children.sort(i)},lf:function(e,r,t,i){e.children.sort(i);var a=this.Yc,n=distBBox(e,0,r,a),o=distBBox(e,t-r,t,a),f=bboxMargin(n)+bboxMargin(o),s,u;for(s=r;s<t-r;s++){u=e.children[s];extend$1(n,e.Zc?a(u):u);f+=bboxMargin(n)}for(s=t-r-1;s>=r;s--){u=e.children[s];extend$1(o,e.Zc?a(u):u);f+=bboxMargin(o)}return f},sf:function(e,r,t){for(var i=t;i>=0;i--){extend$1(r[i],e)}},Qc:function(e){for(var r=e.length-1,t;r>=0;r--){if(e[r].children.length===0){if(r>0){t=e[r-1].children;t.splice(t.indexOf(e[r]),1)}else this.clear()}else calcBBox(e[r],this.Yc)}},Gc:function(e){var r=["return a"," - b",";"];this.tf=new Function("a","b",r.join(e[0]));this.if=new Function("a","b",r.join(e[1]));this.Yc=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function findItem(e,r,t){if(!t)return r.indexOf(e);for(var i=0;i<r.length;i++){if(t(e,r[i]))return i}return-1}function calcBBox(e,r){distBBox(e,0,e.children.length,r,e)}function distBBox(e,r,t,i,a){if(!a)a=createNode(null);a.ja=Infinity;a.Fa=Infinity;a.Oa=-Infinity;a.Ea=-Infinity;for(var n=r,o;n<t;n++){o=e.children[n];extend$1(a,e.Zc?i(o):o)}return a}function extend$1(e,r){e.ja=Math.min(e.ja,r.ja);e.Fa=Math.min(e.Fa,r.Fa);e.Oa=Math.max(e.Oa,r.Oa);e.Ea=Math.max(e.Ea,r.Ea);return e}function compareNodeMinX(e,r){return e.ja-r.ja}function compareNodeMinY(e,r){return e.Fa-r.Fa}function bboxArea(e){return(e.Oa-e.ja)*(e.Ea-e.Fa)}function bboxMargin(e){return e.Oa-e.ja+(e.Ea-e.Fa)}function enlargedArea(e,r){return(Math.max(r.Oa,e.Oa)-Math.min(r.ja,e.ja))*(Math.max(r.Ea,e.Ea)-Math.min(r.Fa,e.Fa))}function intersectionArea(e,r){var t=Math.max(e.ja,r.ja),i=Math.max(e.Fa,r.Fa),a=Math.min(e.Oa,r.Oa),n=Math.min(e.Ea,r.Ea);return Math.max(0,a-t)*Math.max(0,n-i)}function contains(e,r){return e.ja<=r.ja&&e.Fa<=r.Fa&&r.Oa<=e.Oa&&r.Ea<=e.Ea}function intersects(e,r){return r.ja<=e.Oa&&r.Fa<=e.Ea&&r.Oa>=e.ja&&r.Ea>=e.Fa}function createNode(e){return{children:e,height:1,Zc:true,ja:Infinity,Fa:Infinity,Oa:-Infinity,Ea:-Infinity}}function multiSelect(e,r,t,i,a){var n=[r,t],o;while(n.length){t=n.pop();r=n.pop();if(t-r<=i)continue;o=r+Math.ceil((t-r)/i/2)*i;quickselect$2(e,o,r,t,a);n.push(r,o,o,t)}}_rbush_2_0_2_rbush.default=default_1;var Status;(function(e){e["loading"]="loading";e["loaded"]="loaded"})(Status||(Status={}));var M$1;M$1=getModule();function getModule(){if(!M$1){M$1={nS:function(clsName,clsText){try{eval(clsText)}catch(e){throw e}},eS:{iS:"__detaiVersion__",BY:Browser.DW?false:config[13]}}}return M$1}var Module=getModule();function InnerClass(r){return function(e){getModule()[r]=e}}getModule()["MapboxLabelFormat"]=MapboxLabelFormat$1;getModule()["NebulaLabelFormat"]=NebulaLabelFormat$1;getModule()["_LocalZoom"]={Ra:13,za:12,Ge:""};getModule()["Support"]=Browser;getModule()["geo"]={lcs:lcs$2,ProjectionManager:ProjectionManager};getModule()["transform"]=transform;getModule()["Util"]=Util$3;getModule()["TileState"]=TileState$1;getModule()["assign"]=assign;getModule()["labelsUtil"]=labelsUtil$2;getModule()["LabelsRenderUtil"]=LabelsRenderUtil$3;getModule()["vector"]=vector$3;getModule()["rbush"]=_rbush_2_0_2_rbush;getModule()["lodash"]={map:map,find:find,assign:assign,every:every,some:some};var TileState$1;(function(e){e["TOLOAD"]="toload";e["LOADING"]="loading";e["LOADED"]="loaded";e["UNLOADED"]="unloaded";e["ERROR"]="error";e["RELOADING"]="reloading"})(TileState$1||(TileState$1={}));var TileCoord=function(){function e(e,r,t){this.x=r;this.y=t;this.z=e;this.key=e+","+r+","+t}a=e;e.prototype.s0=function(e){var r=e-this.z;var t=Math.floor(Math.pow(2,r)*this.x);var i=Math.floor(Math.pow(2,r)*this.y);return new a(e,t,i)};var a;e=a=__decorate([InnerClass("TileCoord")],e);return e}();var Tile=function(){function e(e){this.type="tile";this.Ro=[0,0,0,0];this.stamp=0;this.zo=e;this.status=TileState$1.TOLOAD;this._v=null;this.data={}}e.YH=function(e){return e.status===TileState$1.LOADED||e.status===TileState$1.RELOADING};e.prototype.destroy=function(){assert(true,"Tile should not implement destroy")};e.prototype.nG=function(e){this.type=e};e=__decorate([InnerClass("Tile")],e);return e}();var NebulaTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type="nebula";e.region="world";e.aN=NebulaTagType.NONE;e.BN=NebulaTagType.NONE;return e}Object.defineProperty(e.prototype,"tag",{get:function(){return this.nN},set:function(e){this.aN=this.tag;this.nN=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"gB",{get:function(){return this.VN},set:function(e){this.BN=this.gB;this.VN=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"data",{get:function(){var e=[];if(this.qc&&this.qc.Dc){e.push(this.qc)}else{if(this.sN){e.push(this.sN)}if(this.uN){e.push(this.uN)}}if(this.lU&&this.lU.Dc){e.push(this.lU)}else{if(this.fU){e.push(this.fU)}if(this.cU){e.push(this.cU)}}if(this.zN&&this.zN.labels){e.push(this.zN)}else{if(this.HN){e.push(this.HN)}if(this.WN){e.push(this.WN)}}if(this.dU&&this.dU.labels){e.push(this.dU)}else{if(this.vU){e.push(this.vU)}if(this.gU){e.push(this.gU)}}return e},set:function(e){},enumerable:false,configurable:true});e.prototype.xa=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.uN=__assign(__assign({},this.uN),e);break}case NebulaTagType.LEFT:{this.sN=__assign(__assign({},this.sN),e);break}case NebulaTagType.ALL:default:{this.qc=__assign(__assign({},this.qc),e)}}};e.prototype.JE=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.cU=__assign(__assign({},this.cU),e);break}case NebulaTagType.LEFT:{this.fU=__assign(__assign({},this.fU),e);break}case NebulaTagType.ALL:default:{this.lU=__assign(__assign({},this.lU),e)}}};e.prototype.rO=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.WN=__assign(__assign({},this.WN),e);break}case NebulaTagType.LEFT:{this.HN=__assign(__assign({},this.HN),e);break}case NebulaTagType.ALL:default:{this.zN=__assign(__assign({},this.zN),e)}}};e.prototype.qE=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.gU=__assign(__assign({},this.gU),e);break}case NebulaTagType.LEFT:{this.vU=__assign(__assign({},this.vU),e);break}case NebulaTagType.ALL:default:{this.dU=__assign(__assign({},this.dU),e)}}};e.prototype.ID=function(e){if(e){if(e.uN){this.uN=e.uN}if(e.sN){this.sN=e.sN}if(e.qc){this.qc=e.qc}if(e.WN){this.WN=e.WN}if(e.HN){this.HN=e.HN}if(e.zN){this.zN=e.zN}}};e.prototype.rN=function(){if(this.aN){this.nN=this.aN}else{this.nN=NebulaTagType.NONE}if(this.BN){this.VN=this.BN;this.nN=NebulaTagType.NONE}};e.prototype.AB=function(){var e=[];if(this.qc&&this.qc.road&&this.zN&&this.zN.labels){e.push(this.qc)}else{if(this.sN&&this.sN.road&&this.HN&&this.HN.labels){e.push(this.sN)}if(this.uN&&this.uN.road&&this.WN&&this.WN.labels){e.push(this.uN)}}return e};e.prototype.LY=function(e,r){var t=this.data;for(var i=0,a=t;i<a.length;i++){var n=a[i];if(n.Dc){n.Dc.upload(e,true)}if(n.$c){n.$c.upload(e,true)}if(n.A_){n.A_.upload(e,true)}if(n.FD){n.FD.upload(e,true)}}};e.prototype.destroy=function(){var e=this.data;if(!e){return}for(var r=0,t=e;r<t.length;r++){var i=t[r];if(i.Dc){i.Dc.destroy();delete i.Dc}if(i.$c){i.$c.destroy();delete i.$c}if(i.labels){for(var a=0,n=i.labels;a<n.length;a++){var o=n[a];o.destroy()}delete i.labels}i.Ta=false;delete i.gf}};e.prototype.KE=function(e){var r=this.data;var t;var i=[];for(var a=0,n=e;a<n.length;a++){var o=n[a];if(o.road){i.push(o.road)}}for(var f=0,s=r;f<s.length;f++){var o=s[f];if(o.XE){t=o.XE;this.pU(i,t)}}};e.prototype.reload=function(){delete this.lU;delete this.cU;delete this.fU;delete this.zN;delete this.WN;delete this.HN;delete this.VN;this.BN=NebulaTagType.NONE};e.prototype.pU=function(e,r){for(var t=0,i=r;t<i.length;t++){var a=i[t];var n=a.id;if(!a.path){for(var o=0,f=e;o<f.length;o++){var s=f[o];a.path=this.yU(s,n)}}else{break}}};e.prototype.yU=function(e,r){for(var t=0,i=e;t<i.length;t++){var a=i[t];if(a.id===r){return a.path}}};e.prototype.oN=function(){var e=false;var r=this.qc;var t=Object.keys(r||{});if(!t.length){e=false}else if(t.length===1&&t[0]==="sdfLoaded"){e=false}else{e=true}return e};e=__decorate([InnerClass("NebulaTile")],e);return e}(Tile);var RasterTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type="raster";return e}e.prototype.destroy=function(){var e=this.data;if(!e){return}if(e.texture){e.texture.destroy();delete e.texture}if(e.zs){e.zs.context.deleteBuffer(e.zs);delete e.zs}if(e.Js){e.Js.destroy();delete e.Js}};return e}(Tile);var VectorTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type="vector";return e}e.prototype.destroy=function(){var e=this.data;if(!e){return}if(e.$c){e.$c.destroy();delete e.$c}if(e.Uc){delete e.Uc}};e=__decorate([InnerClass("VectorTile")],e);return e}(Tile);var Support$3=M["Support"];var scale$2=Support$3.scale;var MapboxVTRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){this.o2=e;var a=t.viewState.optimalZoom;if(a<i.zooms[0]||a>i.zooms[1]){return}if(i.ce){e.context.clear({depth:true})}var n=r.tiles;n.sort(function(e,r){return r.zo.z-e.zo.z});var o=i.layer["getLabelsLayer"]();var f=n.every(function(e){return o.Ho.indexOf(e.zo.key)>-1});if(!f){o.Ho=[];o["remove"](o["getAllOverlays"]())}if(n&&n.length){e.context.clear({stencil:true});for(var s=0,u=n;s<u.length;s++){var l=u[s];if(l.status!==TileState$1.LOADED){continue}if(!f){this.V2(o,l.data.labels,l)}this.lH(e,l,t,1);this.Lc(e,l,t,i);this.Ac(e,l,t,i);this.Ic(e,l,t,i);this.Cb(e,l,t,i);this.lH(e,l,t,2)}for(var v=0,c=n;v<c.length;v++){var l=c[v];if(l.status!==TileState$1.LOADED){continue}this.S_(e,l,t,i,true)}for(var h=0,d=n;h<d.length;h++){var l=d[h];if(l.status!==TileState$1.LOADED){continue}this.S_(e,l,t,i)}}var _=t.map.getMask();this.PB(e,t,i,_)};e.prototype.pickRender=function(e,r,t){var i=this.o2;if(!i){return}var a=i.context;var n=i.context.gl;var o=e.size[0]*scale$2;var f=e.size[1]*scale$2;var s=e.viewState.bounds.toString();var u=false;if(!this.W2){this.W2=this.IC(n,o,f,s);u=true}else if(o!==this.W2.w||f!==this.W2.h){this.q2(this.W2,n,o,f,s);u=true}else if(s!==this.W2.bounds){this.W2.bounds=s;u=true}if(u){a.bindFramebuffer.set(this.W2);a.be.set([0,0,o,f]);a.clear({color:true,stencil:true,depth:true});for(var l=0,v=t;l<v.length;l++){var c=v[l];if(c.status!==TileState$1.LOADED){continue}this.S_(i,c,e,r,false,true)}a.bindFramebuffer.set(null);a.setDirty()}return this.W2};e.prototype.destroy=function(){this["clearPickFbo"]()};e.prototype["clearPickFbo"]=function(){if(this.W2&&this.o2){var e=this.o2.context.gl;e.deleteTexture(this.W2.texture);e.deleteRenderbuffer(this.W2.AC);e.deleteFramebuffer(this.W2);delete this.W2}};e.prototype.Lc=function(e,r,t,i){var a=e.Wn();var n=r.data;var o=n.Dc;if(!o){return}o.upload(a.context,true);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=i.opacity;var v=[r.Sa[0],r.Sa[1]];var c=1;if(t.viewState.viewMode==="3D"){c=t.map.getView().EF()}var h=r.zo.z;if(h<LocalZoom){var d=r.localCoord.center;v[0]+=d[0];v[1]+=d[1]}for(var _=0,g=u.jc;_<g.length;_++){var y=g[_];var m=y.mainkey.split(":")[0];m=m.split(",");m[3]*=l;var p={u_matrix:t.viewState.mvpMatrix,u_color:m,u_offset:[0,0],u_localDeltaCenter:v,u_viewHeight:t.viewState.size[1],u_skyHeight:c};if(p){a.context.getExtension("OES_element_index_uint");a.Ce(p,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},y.length,s,"TRIANGLES",i.depthTest,ColorMode.Si,StencilMode.M2,undefined,y.offset)}}};e.prototype.Ac=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,"MapboxVT tile have no data");return}var n=r.data;var o=n.pX;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Fc;if(!u){return}var l=u.jc;var v=[r.Sa[0],r.Sa[1]];var c=r.zo.z;if(c<LocalZoom){var h=r.localCoord.center;v[0]+=h[0];v[1]+=h[1]}var d=i.opacity;var _=1;if(t.viewState.viewMode==="3D"){_=t.map.getView().EF()}for(var g=0,y=l.length;g<y;g++){var m=l[g];var p=m.mainkey.split(":");var b=p[0].split(",");b[3]*=d;var x=p[1].split(",");var C=+p[2];var S={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_color:b,u_border:0,u_width:C,u_dash:x,u_localDeltaCenter:v,u_skyHeight:_,u_viewHeight:t.viewState.size[1]};var M=f.size;a.context.getExtension("OES_element_index_uint");a.Ce(S,{a_pos:{type:"vec2",buffer:f,Re:M,offset:4*0},a_normal:{type:"vec2",buffer:f,Re:M,offset:4*2},a_distance:{type:"float",buffer:f,Re:M,offset:4*4},a_dir:{type:"vec2",buffer:f,Re:M,offset:4*5}},m.length,s,"TRIANGLES",i.depthTest,ColorMode.Si,StencilMode.M2,undefined,m.offset)}};e.prototype.S_=function(e,r,t,i,a,n){if(a===void 0){a=false}if(n===void 0){n=false}var o=r.data;var f=o.A_;if(!f){return}f.upload(e.context,true);var s=t.map;var u=s.getView();var l=t.viewState.size;var v=1;if(t.viewState.viewMode==="3D"){v=u.EF()}else{return}var c=u.X(l[0]/2,u.Uu()+5);var h=u.X(l[0]/2,u.Uu()-5);var d=u.pz().getPosition();var _=c[0]-d[0];var g=c[1]-d[1];var y=h[0]-d[0];var m=h[1]-d[1];var p=[Math.sqrt(_*_+g*g),Math.sqrt(y*y+m*m)];var b=[r.Sa[0],r.Sa[1]];var x=r.zo.z;if(x<LocalZoom){var C=r.localCoord.center;b[0]+=C[0];b[1]+=C[1]}var S=f.zs;var M=o.E0;for(var w=0,k=M.jc;w<k.length;w++){var T=k[w];var I=T.roofColor;var A=T.wallColor;var $=!!T.bz;if(!$&&(!I||!A)){continue}var F=void 0;if(n){F=i.layer.colorPick.find(T.mainkey);if(!F){F=i.layer.colorPick.add(T.mainkey)}}if(n&&!F){continue}if($&&!n){var P=getFillExtPatternUniformValues(t,T,b,i,{wallColor:A,roofColor:I},v,p);if(P){var L=s.getImage(P.u_image);if(L){P.u_image=L;P.u_imageSize=L.size;var R=e.sH();R.Ce(P,{a_pos:{type:"vec4",Re:S.size,offset:0,buffer:S},a_normal:{type:"vec3",Re:S.size,offset:4*4,buffer:S},a_textureCoord:{type:"vec2",Re:S.size,offset:4*7,buffer:S}},T.length,undefined,"TRIANGLES",true,a?ColorMode.disabled:ColorMode.Si,a?StencilMode.disable:StencilMode.T2,CullFaceMode.back,T.offset)}else if(P.u_image&&s.I_&&!s.I_.MH(P.u_image)){s.addImage(P.u_image,{url:P.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return s.setNeedUpdate(true)}})}}}else{var P=getFillExtUniformValues(t,T,b,i,{wallColor:n?F:A,roofColor:n?F:I},v,p);if(P){P["u_isPick"]=n;var R=e.k_();R.Ce(P,{a_pos:{type:"vec4",Re:S.size,offset:0,buffer:S},a_normal:{type:"vec3",Re:S.size,offset:4*4,buffer:S}},T.length,undefined,"TRIANGLES",true,a?ColorMode.disabled:ColorMode.Si,a?StencilMode.disable:StencilMode.T2,CullFaceMode.back,T.offset)}}}};e.prototype.Ic=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,"MapboxVT tile have no data");return}var n=r.data;var o=n.$c;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Uc;if(!u){return}var l=u.jc;var v=[r.Sa[0],r.Sa[1]];var c=r.zo.z;if(c<LocalZoom){var h=r.localCoord.center;v[0]+=h[0];v[1]+=h[1]}var d=i.opacity;var _=1;if(t.viewState.viewMode==="3D"){_=t.map.getView().EF()}for(var g=0,y=l.length;g<y;g++){var m=l[g];var p=m.mainkey.split(":"),b=p[0],x=p[1],C=p[2];b=b.split(",");b[3]*=d;C=C.split(",");x=+x;var S={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_color:b,u_border:0,u_width:x,u_dash:C,u_localDeltaCenter:v,u_skyHeight:_,u_viewHeight:t.viewState.size[1]};var M=f.size;a.context.getExtension("OES_element_index_uint");a.Ce(S,{a_pos:{type:"vec2",buffer:f,Re:M,offset:4*0},a_normal:{type:"vec2",buffer:f,Re:M,offset:4*2},a_distance:{type:"float",buffer:f,Re:M,offset:4*4},a_dir:{type:"vec2",buffer:f,Re:M,offset:4*5}},m.length,s,"TRIANGLES",i.depthTest,ColorMode.Si,StencilMode.M2,undefined,m.offset)}};e.prototype.Cb=function(e,r,t,i){var a=r.data;var n=a.dX;if(!n){return}var o=e.Z2();n.upload(o.context);var f=n.zs;var s=a.IX;if(!s){return}var u=1;if(t.viewState.viewMode==="3D"){u=t.map.getView().EF()}var l=[r.Sa[0],r.Sa[1]];var v=r.zo.z;if(v<LocalZoom){var c=r.localCoord.center;l[0]+=c[0];l[1]+=c[1]}var h=i.opacity;var d=s.jc;for(var _=0,g=d.length;_<g;_++){var y=d[_];var m={u_offset:[0,0],u_matrix:t.viewState.mvpMatrix,u_localDeltaCenter:l,u_skyHeight:u,u_viewHeight:t.viewState.size[1],u_retinaRatio:Support$3.Ue?2:1,u_opacity:h};o.Ce(m,{a_pos:{buffer:f,type:"vec2",Re:f.size,offset:0},a_radius:{buffer:f,type:"float",Re:f.size,offset:4*2},a_borderWidth:{buffer:f,type:"float",Re:f.size,offset:4*3},a_color:{buffer:f,type:"vec4",Re:f.size,offset:4*4},a_borderColor:{buffer:f,type:"vec4",Re:f.size,offset:4*8},a_visible:{buffer:f,type:"float",Re:f.size,offset:4*12}},y.length,undefined,"POINTS",i.depthTest,ColorMode.Si,StencilMode.M2,undefined,y.offset)}};e.prototype.lH=function(e,r,t,i){if(i===void 0){i=1}var a=e.Wn();var n=a.context;var o=new Float32Array(this.fH(r));var f=[r.Sa[0],r.Sa[1]];var s=n.fe(o,8);var u=r.zo.z;if(u<LocalZoom){var l=r.localCoord.center;f[0]+=l[0];f[1]+=l[1]}var v=[0,1,0,0];if(u===t.viewState.optimalZoom-1){v=[1,0,0,0]}var c={u_matrix:t.viewState.mvpMatrix,u_color:v,u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:t.viewState.size[1],u_skyHeight:1};a.Ce(c,{a_pos:{type:"vec2",buffer:s,Re:0,offset:0}},6,undefined,"TRIANGLES",false,ColorMode.Si,i===1?StencilMode.S2:StencilMode.w2,undefined,0)};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass("AMap.MaskLayer");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};e.prototype.V2=function(e,r,t){if(!r){return}if(e.Ho&&e.Ho.indexOf(t.zo.key)>-1){return}var i=[];for(var a=0;a<r.length;a++){var n=r[a];var o=new AMap.LabelMarker(n);i.push(o)}e.add(i);e.Ho.push(t.zo.key)};e.prototype.IC=function(e,r,t,i){var a=e.createFramebuffer();a.w=r;a.h=t;a.bounds=i;var n=e.createTexture();a.texture=n;e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,t,0,e.RGBA,e.UNSIGNED_BYTE,null);var o=e.createRenderbuffer();a.AC=o;e.bindRenderbuffer(e.RENDERBUFFER,o);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r,t);e.bindFramebuffer(e.FRAMEBUFFER,a);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,o);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==f){console.log("Frame buffer object is incomplete: "+f.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return a};e.prototype.q2=function(e,r,t,i,a){e.w=t;e.h=i;e.bounds=a;r.bindTexture(r.TEXTURE_2D,e.texture);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,i,0,r.RGBA,r.UNSIGNED_BYTE,null);r.bindRenderbuffer(r.RENDERBUFFER,e.AC);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t,i);r.bindTexture(r.TEXTURE_2D,null);r.bindRenderbuffer(r.RENDERBUFFER,null)};return e}(LayerRender);var Support$4=M["Support"];var lcs$3=M["geo"]["lcs"];var MaskLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.SC=new Uint8Array(0);return e}e.prototype.EH=function(e,r){var t=r.map.coordToContainer([e[0],e[1]]);var i=Math.round(t[0]);var a=Math.round(t[1]);var n=r.size[0];var o=r.size[1];var f=((o-a)*n+i)*4+3;if(i<0||a<0||i>=n||a>=o){return false}if(this.SC[f]){return true}return false};e.prototype.renderFrame=function(e,r,t,i,a,n){var o=e.aS();var f=t.viewState;var s=f.centerCoord;var u=o.context;var l=[0,0];if(t.viewState.optimalZoom<LocalZoom){l=r.LS.center}else{var v=lcs$3.getLocalByCoord([s[0],s[1]]).center;l=[r.LS.center[0]-v[0],r.LS.center[1]-v[1]]}r.Dc.upload(o.context,true);var c={data:r,$i:o,viewState:f,Sa:l};this.RC(u,t,c);this.zC(u,c)};e.prototype.zC=function(e,r){var t=e.gl;var i=r.data.Dc.zs;var a=r.data.Dc.Pc;var n=r.data.Oc;var o=n.jc;for(var f=0,s=o.length;f<s;f++){var u=o[f];r.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:r.Sa,u_mvpMatrix:r.viewState.mvpMatrix},{a_pos:{type:"vec2",buffer:i,Re:i.size,offset:0}},u.length,a,"TRIANGLES",undefined,ColorMode.zi,StencilMode.Ai,undefined,u.offset)}};e.prototype.RC=function(e,r,t){var i=e.gl;var a=r.size[0];var n=r.size[1];if(!this.CC){this.CC=this.IC(i,r)}i.bindFramebuffer(i.FRAMEBUFFER,this.CC);i.viewport(0,0,a,n);i.clear(i.COLOR_BUFFER_BIT);var o=t.data.Dc.zs;var f=t.data.Dc.Pc;var s=t.data.Oc;var u=s.jc;for(var l=0,v=u.length;l<v;l++){var c=u[l];t.$i.Ce({u_color:[1,0,0,1],u_deltaCenter:t.Sa,u_mvpMatrix:t.viewState.mvpMatrix},{a_pos:{type:"vec2",buffer:o,Re:o.size,offset:0}},c.length,f,"TRIANGLES",undefined,ColorMode.zi,undefined,c.offset)}var h=a*n*4;if(!this.SC||h!==this.SC.length){this.SC=new Uint8Array(h)}i.readPixels(0,0,a,n,i.RGBA,i.UNSIGNED_BYTE,this.SC);i.bindFramebuffer(i.FRAMEBUFFER,null);var d=Support$4.Ue?2:1;i.viewport(0,0,a*d,n*d)};e.prototype.IC=function(e,r){var t=e.createFramebuffer();var i=r.size[0];var a=r.size[1];var n=e.createRenderbuffer();t.AC=n;n.w=i;n.h=a;e.bindRenderbuffer(e.RENDERBUFFER,n);e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i,a);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==o){console.log("Frame buffer object is incomplete: "+o.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return t};return e}(LayerRender);var lineFragmentString="precision highp float;\\n\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform vec4 u_dash;\\nuniform float u_border;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\n\\nvarying highp float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    float offset = mod(v_distance, u_dash.r + u_dash.g + u_dash.b + u_dash.a);\\n    if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n        discard;\\n    }else if(offset> u_dash.r + u_dash.g + u_dash.b){\\n        discard;\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n    gl_FragColor = u_color;\\n    // gl_FragColor.a *= opacity;\\n\\n    // gl_FragColor = vec4(1, 0, 0, 1);\\n\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var lineVertextString="precision highp float;\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_width;\\n\\nvarying float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width * 0.5);\\n\\n    vec2 pos=a_pos;\\n    pos.x+=u_localDeltaCenter.x;\\n    pos.y+=u_localDeltaCenter.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_normal = normalize(a_normal*sign(width*u_meter_per_pixel*.5));\\n    v_width = width;\\n    v_pos = gl_Position;\\n}";var ColorConstructor=M["Color"];var lineUniforms={u_skyHeight:"float",u_viewHeight:"float",u_width:"float",u_border:"float",u_matrix:"mat4",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec4",u_localDeltaCenter:"vec2"};var lineAttributes={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}};var linePropertys={roadColor:new LineProperty("roadColor","linear"),roadWidth:new LineProperty("roadWidth","linear"),roadDash:new LineProperty("roadDash","const"),borderColor:new LineBorderProperty("borderColor","linear"),borderWidth:new LineBorderProperty("borderWidth","linear"),borderDash:new LineBorderProperty("borderDash","const")};var line={uniforms:lineUniforms,attributes:lineAttributes,vertexSource:lineVertextString,fragmentSource:lineFragmentString};var getLineUniformValues=function(e,r,t,i,a,n){if(i===void 0){i=[0,0]}var o=r.minzoom;var f=r.maxzoom;var s=e.viewState.zoom;if(o-.2>s&&o>3||f+.8<s&&f<18){return}var u=r.mainkey;var l=r.subkey;if(t){return getLineBorderUniformValues(e,r,i,a,n)}else{return getLineFaceUniformValues(e,r,i,a,n)}};function getLineBorderUniformValues(e,r,t,i,a){if(t===void 0){t=[0,0]}var n=e.map.bZ.MZ.drawMode==="fast"?e.viewState.optimalZoom:e.viewState.zoom;var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=linePropertys.borderColor.An(i,o,f,n,s);if(!u){return undefined}var l=e.map.bZ.MZ.KY;if(l&&o===l.Lp&&l.Ap.indexOf(f)>-1){u=ColorConstructor.FV(u,l.NY)}var v=linePropertys.roadWidth.An(i,o,f,n,s)+linePropertys.borderWidth.An(i,o,f,n,s);var c=linePropertys.borderDash.An(i,o,f,n,s)||[1,0,1,0];return{u_skyHeight:a,u_matrix:e.viewState.mvpMatrix,u_meter_per_pixel:e.viewState.resolution,u_width:v,u_border:1,u_color:u,u_dash:c,u_localDeltaCenter:t,u_viewHeight:e.size[1]}}function getLineFaceUniformValues(e,r,t,i,a){if(t===void 0){t=[0,0]}var n=e.map.bZ.MZ.drawMode==="fast"?e.viewState.optimalZoom:e.viewState.zoom;var o=r.mainkey,f=r.subkey,s=r.minzoom,u=r.maxzoom;var l=linePropertys.roadColor.An(i,o,f,n,s);if(f<0&&o<0){l=[1,0,0,e.debug?1:0]}if(!l){return undefined}var v=e.map.bZ.MZ.KY;if(v&&o===v.Lp&&v.Ap.indexOf(f)>-1){l=ColorConstructor.FV(l,v.NY)}var c=linePropertys.roadWidth.An(i,o,f,n,s);var h=linePropertys.roadDash.An(i,o,f,n,s)||[1,0,1,0];return{u_matrix:e.viewState.mvpMatrix,u_meter_per_pixel:e.viewState.resolution,u_width:c,u_color:l,u_dash:h,u_border:0,u_localDeltaCenter:t,u_viewHeight:e.size[1],u_skyHeight:a}}var fillFragmentString="precision highp float;\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = v_color;\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n    // return;\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\\n";var fillVertextString="precision highp float;\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n}\\n";var fillPatternFragmentString="precision highp float;\\n#define GLSLIFY 1\\nuniform vec4 u_color;\\nuniform sampler2D u_image;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform float u_resolution;\\nuniform vec2 u_imageSize;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n// varying vec2 v_texture_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n    gl_FragColor = texture2D(u_image, v_texture_pos);\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n   \\n    float y = v_pos.y / v_pos.w;\\n    if(u_skyHeight > 0.0 && y > u_skyHeight) {\\n        gl_FragColor.a = 1.0 - smoothstep(u_skyHeight, 1.0, y);\\n    }\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var fillPatternVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_resolution;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n\\n// varying vec2 v_texture_pos;\\nvoid main(){\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n    v_coord = pos;\\n}\\n";var fillUniforms={u_skyColor:"vec3",u_color:"vec4",u_skyHeight:"float",u_viewHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2"};var fillAttributes={a_pos:{Me:"float32",Oe:"vec2"}};var fill={uniforms:fillUniforms,attributes:fillAttributes,vertexSource:fillVertextString,fragmentSource:fillFragmentString};var fillProperties={faceColor:new FillProperty("faceColor","linear"),borderWidth:new FillProperty("borderWidth","linear"),borderColor:new FillProperty("borderColor","linear"),texture:new FillProperty("texture","const")};var ColorConstructor$1=M["Color"];var getFillUniformValues=function(e,r,t,i,a){if(t===void 0){t=[0,0]}if(a===void 0){a=1}var n=e.map.bZ.MZ.drawMode==="fast"?e.viewState.optimalZoom:e.viewState.zoom;if(r.minzoom-.2>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillProperties.faceColor.An(i,o,f,n,s);if(!u){return undefined}var l=e.map;var v=e.map.bZ.MZ.KY;if(v&&o===v.Lp&&v.Ap.indexOf(f)>-1){u=ColorConstructor$1.FV(u,v.NY)}var c=l.JF(e.viewState.optimalZoom);return{u_matrix:e.viewState.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:a,u_viewHeight:e.viewState.size[1],u_skyColor:c||[1,1,1,0],u_image:fillProperties.texture.An(i,o,f,n,s),u_imageSize:[1,1],u_localDeltaCenter:t,u_resolution:e.viewState.optimalResolution}};var getFillPatternUniformValues=function(e,r,t,i,a){if(t===void 0){t=[0,0]}if(a===void 0){a=1}var n=e.viewState.zoom;if(r.minzoom-.2>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillProperties.faceColor.An(i,o,f,n,s);var l=e.map;var v=l.JF(e.viewState.optimalZoom);if(!u){return undefined}return{u_matrix:e.viewState.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:a,u_viewHeight:e.viewState.size[1],u_skyColor:v||[1,1,1,0],u_image:fillProperties.texture.An(i,o,f,n,s),u_imageSize:[1,1],u_localDeltaCenter:t,u_resolution:e.viewState.optimalResolution}};var fillPatternUniforms={u_color:"vec4",u_skyColor:"vec4",u_viewHeight:"float",u_skyHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_resolution:"float",u_imageSize:"vec2"};var fillPatternAttributes={a_pos:{Me:"float32",Oe:"vec2"}};var fillPattern={uniforms:fillPatternUniforms,attributes:fillPatternAttributes,vertexSource:fillPatternVertextString,fragmentSource:fillPatternFragmentString};function drawFillPattern(e,r,t,i,a,n,o,f,s,u,l){if(n===void 0){n="TRIANGLES"}if(o===void 0){o=false}if(f===void 0){f=ColorMode.Mi}if(s===void 0){s=StencilMode.disable}if(u===void 0){u=CullFaceMode.we}if(l===void 0){l=0}var v=e.aH();v.Ce(r,t,i,a,n,o,f,s,u,l)}var lineFragmentString$1="precision mediump float;\\nuniform vec4 u_color;\\nvarying vec4 v_pos;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nvoid main(){\\n    // float dist=length(v_pos-gl_FragCoord.xy);\\n    // float alpha=1.-smoothstep(0.,1.,dist);\\n    gl_FragColor=u_color;\\n    // gl_FragColor=vec4(0.8, 0.8, 0.8, 0.5);\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor=vec4(1.);\\n    #endif\\n}\\n";var lineVertextString$1="precision highp float;\\nattribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x,a_pos.y+u_localDeltaCenter.y);\\n    gl_Position=u_matrix*vec4(pos,0,1);\\n    v_pos=gl_Position;\\n}\\n";var fillOutlineUniforms={u_color:"vec4",u_normal:"vec3",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_skyHeight:"float",u_viewHeight:"float"};var fillOutlineAttributes={a_pos:{Oe:"vec2",Me:"float32"}};var fillOutline={uniforms:fillOutlineUniforms,attributes:fillOutlineAttributes,vertexSource:lineVertextString$1,fragmentSource:lineFragmentString$1};var fillOutlineProperties={faceColor:new BuildingProperty("faceColor","linear"),borderWidth:new BuildingBorderProperty("borderWidth","const"),borderColor:new BuildingBorderProperty("borderColor","linear"),wallColor1:new BuildingProperty("wallColor1","linear"),wallColor2:new BuildingProperty("wallColor2","linear")};var getFillOutlineUniformValues=function(e,r,t,i,a){if(a===void 0){a=1}var n=e.map.bZ.MZ.drawMode==="fast"?e.viewState.optimalZoom:e.viewState.zoom;if(r.minzoom-.5>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillOutlineProperties.borderColor.An(i,o,f,n,s);if(!u){return undefined}return{u_color:u,u_normal:[0,0,-.1],u_matrix:e.viewState.mvpMatrix,u_localDeltaCenter:t,u_skyHeight:a,u_viewHeight:e.viewState.size[1]}};var Tile$1=M["Tile"];var lcs$4=M["geo"]["lcs"];var find$2=M["lodash"]["find"];var map$2=M["lodash"]["map"];var Browser$1=M["Support"];var NebulaRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.yz=1;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!a.map.mapStyle.vn){return}this.kG=i.rejectMapMask||!t.map["getMask"]()?undefined:StencilMode["writeWithStencil"];var n=t.map.getOutseaState();var o=t.map.getOutseaDataType();if(n&&t.viewState.optimalZoom>=9.8){this.kG=StencilMode["nbStencil"];var f=r&&r.outseaData;if(f){this.wG(e,t,i,a,f)}}if(t.map.bZ.MZ.drawMode!=="fast"&&!r.s_){return}var s=r.tiles;var u={};for(var l=0,v=s;l<v.length;l++){var c=v[l];if(Tile$1.YH(c)){var h=c.zo.z;if(!u[h]){u[h]=[]}u[h].push(c)}}var d=i.layer;var _=t.map.getStatus().features;var g=d.uo.getSource(d.co());var y=g.ra(t.viewState.optimalZoom);var m=map$2(Object.keys(u),function(e){return parseInt(e,10)});m.sort(function(e,r){return e-r});var p=m.indexOf(y);if(p>=0){m.splice(p,1);m.push(y)}if(t.viewState.viewMode==="3D"){this.yz=t.map.getView().EF()}for(var b=0,x=m;b<x.length;b++){var C=x[b];var S=u[C];if(!(_&&_.indexOf("bg")===-1)){for(var M=0,w=S;M<w.length;M++){var c=w[M];if(!Tile$1.YH(c)){continue}this.Lc(e,c,t,i,a)}}if(!(_&&_.indexOf("building")===-1)){for(var k=0,T=S;k<T.length;k++){var c=T[k];if(!Tile$1.YH(c)){continue}this.PD(e,c,t,i,a)}}if(!(_&&_.indexOf("building")===-1)){for(var I=0,A=S;I<A.length;I++){var c=A[I];if(!Tile$1.YH(c)){continue}this.Ac(e,c,t,i,a)}}if(!(_&&_.indexOf("road")===-1)){for(var $=0,F=S;$<F.length;$++){var c=F[$];if(!Tile$1.YH(c)){continue}this.Tc(e,c,t,i,a)}}if(!(_&&_.indexOf("road")===-1)){for(var P=0,L=S;P<L.length;P++){var c=L[P];if(!Tile$1.YH(c)){continue}this.Ic(e,c,t,i,a)}}}if(r.tiles&&r.tiles.length>0){a.map.bZ.dynamic.set("firstPaint",true)}if(window["testTime"]&&!window["testTime"]["renderTime"]&&s&&s.length>0){var R=(new Date).getTime();window["testTime"]["renderTime"]=R-window["testTime"]["start"]}if(n&&t.viewState.optimalZoom>=10){this.kG=StencilMode["nbStencil"];var f=r&&r.outseaData;if(f){e.context.clear({stencil:true})}}};e.prototype.destroy=function(){};e.prototype.wG=function(e,r,t,i,a){if(!a||!a.LS){return}var n=e.aS();var o=n.context;var f=r.viewState;var s=[0,0];var u=f.centerCoord;if(r.viewState.optimalZoom<LocalZoom){s=a.LS.center}else{var l=lcs$4.getLocalByCoord([u[0],u[1]]).center;var v=a.LS.center[0]-l[0];var c=a.LS.center[1]-l[1];s=[v,c]}var h={outseaData:a,$i:n,viewState:f,Sa:s};this.zC(o,h)};e.prototype.zC=function(e,r){r.outseaData.Dc.upload(e,true);var t=r.outseaData.Dc.zs;var i=r.outseaData.Dc.Pc;var a=r.outseaData.Oc;var n=a.jc;for(var o=0,f=n.length;o<f;o++){var s=n[o];r.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:r.Sa,u_mvpMatrix:r.viewState.mvpMatrix},{a_pos:{type:"vec2",buffer:t,Re:t.size,offset:0}},s.length,i,"TRIANGLES",undefined,ColorMode.zi,StencilMode["outseaStencil"],undefined,s.offset)}};e.prototype.Lc=function(e,r,t,i,a){var n=e.Wn();var o=r.data;var f=true;for(var s=0,u=o;s<u.length;s++){var l=u[s];var v=l.Dc;if(!v){continue}v.upload(n.context,true);var c=v.zs;var h=v.Pc;var d=l.Oc;var _=f?0:1;f=false;var g={a_pos:{type:"vec2",Re:c.size,offset:0,buffer:c}};for(var y=_,m=d.jc.length;y<m;y++){var p=d.jc[y];var b=fillProperties.texture.An(a.map.mapStyle,p.mainkey,p.subkey,t.viewState.optimalZoom,p.minzoom);if(b){var x=getFillPatternUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(x){var C=a.map.getImage(x.u_image);if(C&&x.u_image){x.u_image=C;x.u_imageSize=C.size;drawFillPattern(e,x,g,p.length,h,"TRIANGLES",false,ColorMode.Si,this.kG,undefined,p.offset)}else if(x.u_image&&a.map.I_&&!a.map.I_.MH(x.u_image)){a.map.I_["addImage"](x.u_image,{url:x.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return a.map.setNeedUpdate(true)}})}}}else{var x=getFillUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(x){n.Ce(x,g,p.length,h,"TRIANGLES",false,ColorMode.Si,this.kG,undefined,p.offset)}}}}};e.prototype.PD=function(e,r,t,i,a){var n=e.Wn();var o=r.data;var f=find$2(t.map.getLayers(),function(e){return e.CLASS_NAME==="AMap.IndoorMap"});var s;if(f){s=f.yD().show}var u=true;for(var l=0,v=o;l<v.length;l++){var c=v[l];var h=c.FD;if(!h){continue}h.upload(n.context,true);var d=h.zs;var _=h.Pc;var g=c.BD;if(!g){continue}var y=u?0:1;u=false;var m={a_pos:{type:"vec2",Re:d.size,offset:0,buffer:d}};for(var p=y,b=g.jc.length;p<b;p++){var x=g.jc[p];if(!f||!(x.bz&&x.bz!=="indoor_out_building"&&s)){var C=getFillUniformValues(t,x,r.Sa,a.map.mapStyle,this.yz);if(C){n.Ce(C,m,x.length,_,"TRIANGLES",false,ColorMode.Si,this.kG,undefined,x.offset)}}}}};e.prototype.Ac=function(e,r,t,i,a){var n=e.Yn();var o=r.data;var f=find$2(t.map.getLayers(),function(e){return e.CLASS_NAME==="AMap.IndoorMap"});var s;if(f){s=f.yD().show}for(var u=0,l=o;u<l.length;u++){var v=l[u];var c=v.Dc;if(!c){continue}c.upload(n.context,true);var h=v.Fc;var d=c.Ec;var _=c.Nc;var g={a_pos:{type:"vec2",Re:0,offset:0,buffer:d}};for(var y=0,m=h.jc.length;y<m;y++){var p=h.jc[y];var b=getFillOutlineUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(!f||!(p.bz&&p.bz!=="indoor_out_building"&&s)){if(b){n.Ce(b,g,p.length,_,"LINES",false,ColorMode.Si,this.kG,undefined,p.offset)}}}}};e.prototype.Ic=function(e,r,t,i,a){var n=e.Vn();if(!r.data){assert(r.data,"tile have no data");return}var o=r.data;for(var f=0,s=o;f<s.length;f++){var u=s[f];var l=u.$c;if(!l){continue}n.context.getExtension("OES_element_index_uint");l.upload(n.context,true);var v=u.$c.zs.buffer;var c=u.$c.Pc.buffer;var h=u.Uc;var d=h.jc;var _=v.size;var g={a_pos:{type:"vec2",buffer:v,Re:_,offset:4*0},a_normal:{type:"vec2",buffer:v,Re:_,offset:4*2},a_distance:{type:"float",buffer:v,Re:_,offset:4*4},a_dir:{type:"vec2",buffer:v,Re:_,offset:4*5}};for(var y=0,m=d.length;y<m;y++){var p=d[y];var b=getLineUniformValues(t,p,false,r.Sa,a.map.mapStyle,this.yz);if(p.mainkey===-2&&a.map.debug){b={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:2,u_color:[1,0,0,1],u_dash:0,u_border:0,u_localDeltaCenter:r.Sa,u_skyHeight:1,u_viewHeight:1}}if(!b){continue}if(b){n.Ce(b,g,p.length,c,"TRIANGLES",false,ColorMode.Si,this.kG,undefined,p.offset)}}}};e.prototype.Tc=function(e,r,t,i,a){var n=e.Vn();if(!r.data){assert(r.data,"tile have no data");return}var o=r.data;for(var f=0,s=o;f<s.length;f++){var u=s[f];var l=u.$c;if(!l){continue}n.context.getExtension("OES_element_index_uint");l.upload(n.context,true);var v=u.$c.zs.buffer;var c=u.$c.Pc.buffer;var h=u.Uc;var d=h.jc;var _=v.size;var g={a_pos:{type:"vec2",buffer:v,Re:_,offset:4*0},a_normal:{type:"vec2",buffer:v,Re:_,offset:4*2},a_distance:{type:"float",buffer:v,Re:_,offset:4*4},a_dir:{type:"vec2",buffer:v,Re:_,offset:4*5}};for(var y=0,m=d.length;y<m;y++){var p=d[y];var b=getLineUniformValues(t,p,true,r.Sa,a.map.mapStyle,this.yz);if(b){n.Ce(b,g,p.length,c,"TRIANGLES",false,ColorMode.Si,this.kG,undefined,p.offset)}}}};return e}(LayerRender);var TileState$2=M["TileState"];var ColorScaleConstructor=M["ColorScale"];var RasterLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a,n){if(!a.map.mapStyle.vn){return}var o=t.viewState;var f=n.getLayerConfig();var s=f.zooms;var u=o.size,l=o.pitch,v=o.optimalZoom;if(o.optimalZoom<s[0]||o.optimalZoom>s[1]){return}var c=e.Gn();var h=t.map;var d=h.JF(t.viewState.optimalZoom);var _=d||[1,1,1,0];var g=r.tiles;var y=1;if(t.viewState.viewMode==="3D"){y=t.map.getView().EF()}if(i.ce){e.context.clear({depth:true})}var m=null;if(f.OY){var p=h.mapStyle.vn.MS("satellite");if(p&&p["filter"]){m=ColorScaleConstructor["getTexture"](e.context,p["filter"])||null}}for(var b=0,x=g.length;b<x;b+=1){var C=g[b];for(var S=0,M=C.length;S<M;S+=1){var w=C[S];if(w.status===TileState$2.LOADED){c.Ce({u_skyColor:_,u_viewHeight:o.size[1],u_skyHeight:y,u_opacity:f.opacity||1,u_texture:w.data.texture,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:w.data.Sa,u_flterFlag:m?true:false,u_colorscale:m},{a_Position:{type:"vec4",buffer:w.data.zs,Re:0,offset:0}},6,undefined,undefined,i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil)}}for(var S=0,M=C.length;S<M;S+=1){var w=C[S];if(w.status===TileState$2.LOADED&&t.debug){c.Ce({u_skyColor:_,u_viewHeight:o.size[1],u_skyHeight:y,u_opacity:f.opacity||1,u_texture:w.data.Js,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:w.data.Sa,u_flterFlag:false,u_colorscale:null},{a_Position:{type:"vec4",buffer:w.data.zs,Re:0,offset:0}},6,undefined,"TRIANGLES",undefined,undefined,undefined)}}}return};return e}(LayerRender);var Util$4=AMap["Util"];var PolygonWebglRender=function(){function e(e){this.a2=e}e.prototype.render=function(e,r,t){if(!e._map){return}if(e._opts.extrusionHeight&&e._opts.extrusionHeight>0){this.S_(e,r,t)}else{this.Wx(e,r,t);this.Gx(e,r,t)}};e.prototype.S_=function(e,r,t,i,a){if(i===void 0){i=false}if(a===void 0){a=false}if(!e.visible){return}var n=e.Q0;if(!n){return}n.upload(t.context,true);var o=r.map;var f=r.viewState.size;var s=o.getView();var u=e.rY(r);var l={zooms:e._opts.zooms,layer:{CLASS_NAME:"AMap.VectorLayer"},opacity:1,heightFactor:1,visible:true,zIndex:e._opts.zIndex,depthTest:true};var v=1;if(r.viewState.viewMode==="3D"){v=s.EF()}else{return}var c=s.X(f[0]/2,s.Uu()+5);var h=s.X(f[0]/2,s.Uu()-5);var d=s.pz().getPosition();var _=c[0]-d[0];var g=c[1]-d[1];var y=h[0]-d[0];var m=h[1]-d[1];var p=[Math.sqrt(_*_+g*g),Math.sqrt(y*y+m*m)];var b=e.K0;var x=n.zs;for(var C=0,S=b.jc;C<S.length;C++){var M=S[C];var w=Util$4.color2RgbaArray(e._opts.roofColor);var k=Util$4.color2RgbaArray(e._opts.wallColor);var T=void 0;if(a){T=this.a2.find(M.mainkey);if(!T){T=this.a2.add(M.mainkey)}}if(a&&!T){return}var I=!!M.bz;if(I&&!a){var A=getFillExtPatternUniformValues(r,M,u,l,{wallColor:k,roofColor:w},v,p);if(A){var $=o.getImage(A.u_image);if($){A.u_image=$;A.u_imageSize=$.size;var F=t.sH();F.Ce(A,{a_pos:{type:"vec4",Re:x.size,offset:0,buffer:x},a_normal:{type:"vec3",Re:x.size,offset:4*4,buffer:x},a_textureCoord:{type:"vec2",Re:x.size,offset:4*7,buffer:x}},M.length,undefined,"TRIANGLES",l.depthTest,i?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,M.offset)}else if(A.u_image&&o.I_&&!o.I_.MH(A.u_image)){o.addImage(A.u_image,{url:A.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return o.setNeedUpdate(true)}})}}}else{var A=getFillExtUniformValues(r,M,u,l,{wallColor:a?T:k,roofColor:a?T:w},v,p);if(A){var F=t.k_();A.u_isPick=a;F.Ce(A,{a_pos:{type:"vec4",Re:x.size,offset:0,buffer:x},a_normal:{type:"vec3",Re:x.size,offset:4*4,buffer:x}},M.length,undefined,"TRIANGLES",l.depthTest,i?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,M.offset)}}}};e.prototype.qx=function(e,r,t){var i=e.rY(r);var a=e._opts;if(!a.fillColor){return}var n;if(typeof a.fillColor==="function"){n=Util$4.color2RgbaArray(a.fillColor(t))}else{n=Util$4.color2RgbaArray(a.fillColor)}if(!n){return}n=n.slice(0,3);var o;if(typeof a.fillOpacity==="function"){o=a.fillOpacity(t)}else{o=a.fillOpacity}n.push(o);return{u_offset:e.zx,u_color:n,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Vx=function(e,r,t){var i=e.rY(r);var a=e._opts;if(!a.strokeColor){return}var n;if(typeof a.strokeColor==="function"){n=Util$4.color2RgbaArray(a.strokeColor(t))}else{n=Util$4.color2RgbaArray(a.strokeColor)}if(!n){return}n=n.slice(0,3);n.push(a.strokeOpacity);var o=this.Xx(e);return{u_color:n,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_width:a.strokeWeight,u_offset:e.zx,u_meter_per_pixel:r.viewState.resolution,u_dash:o.dash,u_dashType:o.Jx,u_border:false,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Wx=function(e,r,t){if(!e.Dx){return}var i=e.Dx;var a=e.XB;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var n=i.zs;var o=t.Wn();o.context.getExtension("OES_element_index_uint");for(var f=0,s=a.jc.length;f<s;f++){var u=this.qx(e,r,f);if(!u){continue}var l=a.jc[f];o.Ce(u,{a_pos:{buffer:n,type:"vec2",Re:n.size,offset:0}},l.length,i.Pc,undefined,undefined,ColorMode.Si,undefined,undefined,l.offset)}};e.prototype.Gx=function(e,r,t){if(!e.Px){return}var i=e.Px;var a=e.qB;i.upload(t.context);if(!i.uploaded&&!i.zs){return}var n=i.zs.buffer;if(!e.visible){return}var o=t.Xn();o.context.getExtension("OES_element_index_uint");for(var f=0,s=a.jc.length;f<s;f++){var u=this.Vx(e,r,f);if(!u){continue}var l=a.jc[f];o.Ce(u,{a_pos:{buffer:n,type:"vec2",Re:n.size,offset:0},a_normal:{type:"vec2",buffer:n,Re:n.size,offset:4*2},a_distance:{type:"float",buffer:n,Re:n.size,offset:4*4},a_dir:{type:"vec2",buffer:n,Re:n.size,offset:4*5}},l.length,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,l.offset)}};e.prototype.Xx=function(e){var r=e._opts;var t=2;var i=[1,0,0];if(r.strokeStyle==="dashed"&&r.strokeDasharray){if(r.strokeDasharray.length>=3){t=3;i=r.strokeDasharray.slice(0,3)}else{t=2;i=__spreadArrays(r.strokeDasharray.slice(0),[0])}}return{Jx:t,dash:i}};return e}();var Util$5=AMap["Util"];var PolylineWebglRender=function(){function e(){this.Y2=performance.now()}e.prototype.render=function(e,r,t){if(!e._map){return}var i=e._opts;this.Tc(e,r,t);this.Ic(e,r,t);if(i.lineGradient){this.nC(e,r,t)}if(i.showDir){this.N_(e,r,t,i)}};e.prototype.fb=function(e,r){var t=e.rY(r);var i=e._opts;var a=i.strokeWeight||-1;if(a<=0){return}if(i.strokeOpacity<=0){return}if(!i.strokeColor){return}var n=Util$5.color2RgbaArray(i.strokeColor);if(!n){return}n=n.slice(0,3);var o=this.Xx(e);n.push(i.strokeOpacity);if(i.unit==="meter"){a/=r.viewState.resolution}return{u_color:n,u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:a,u_offset:e.zx,u_localDeltaCenter:t,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.pb=function(e,r){var t=e.rY(r);var i=e._opts;if(!i.outlineColor){return}var a=Util$5.color2RgbaArray(i.outlineColor);if(!a){return}a=a.slice(0,3);a.push(i.strokeOpacity);var n=i.strokeWeight+i.borderWeight*2;if(n<=0){return}if(i.strokeOpacity<=0){return}var o=this.Xx(e);return{u_color:a,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:t,u_width:n,u_offset:e.zx,u_meter_per_pixel:r.viewState.resolution,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.B_=function(e,r,t){if(!e._map){return}var i=e.rY(r);var a=e._opts;var n=a.strokeWeight;var o;if(n<=0){return}var f=Boolean(a.dirImg);if(f){e.U_(t);o=e.E_}else{o=e._map.getImage("AMapArrow")}if(!o){return}var s=Util$5.color2RgbaArray(a.dirColor).slice(0,3);if(a.unit==="meter"){n/=r.viewState.resolution}return{u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_meter_per_pixel_optimal:r.viewState.optimalResolution,u_width:n,u_offset:e.zx,u_localDeltaCenter:i,u_texture:o,u_iconsize:o.size,u_custom_img_flag:f,u_dir_color:s,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1],u_timer:performance.now()-this.Y2,u_speed:a.speed,u_size_scale:a["dirImgGap"],u_animate:!!a.animate}};e.prototype.oC=function(e,r,t){if(!e._map){return}var i=e.rY(r);var a=e._opts;if(!a.lineGradient){return}var n=a.strokeWeight;if(n<=0){return}if(!e.rC){e.aC(t,a.lineGradient)}if(a.unit==="meter"){n/=r.viewState.resolution}return{u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:n,u_offset:e.zx,u_localDeltaCenter:i,u_texture:e.rC,u_total_distance:e.sC,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.U_=function(e,r){if(e.F_){if(!e.E_){e.E_=r.createTexture(e.F_,{Zi:true});e.E_.bind(r.gl.CLAMP_TO_EDGE,r.gl.LINEAR,r.gl.LINEAR)}}};e.prototype.aC=function(e,r,t){if(!e.rC){var i=createLineGradinetCanvas(t.values);e.rC=r.createTexture(i,{Zi:true});var a=r.gl;e.rC.bind(a.CLAMP_TO_EDGE,a.NEAREST,a.NEAREST_MIPMAP_NEAREST)}};e.prototype.Xx=function(e){var r=e._opts;var t=2;var i=[1,0,0];if(r.strokeStyle==="dashed"&&r.strokeDasharray){if(r.strokeDasharray.length>=3){t=3;i=r.strokeDasharray.slice(0,3)}else{t=2;i=__spreadArrays(r.strokeDasharray.slice(0),[0])}}return{Jx:t,dash:i}};e.prototype.N_=function(e,r,t,i){if(!e.Px){return}var a=e.Px;a.upload(t.context);if(!a.uploaded||!a.zs){return}if(!e.visible){return}var n=a.zs.buffer;var o=this.B_(e,r,t.context);if(!o){return}var f=t.M_();f.Ce(o,{a_pos:{buffer:n,type:"vec2",Re:n.size,offset:0},a_normal:{type:"vec2",buffer:n,Re:n.size,offset:4*2},a_distance:{type:"float",buffer:n,Re:n.size,offset:4*4},a_dir:{type:"vec2",buffer:n,Re:n.size,offset:4*5}},a.Qx.length*3,a.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);f.Ni()};e.prototype.Ic=function(e,r,t){if(!e.Px){return}var i=e.Px;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var a=i.zs.buffer;var n=this.fb(e,r);if(!n){return}var o=t.Xn();o.Ce(n,{a_pos:{buffer:a,type:"vec2",Re:a.size,offset:0},a_normal:{type:"vec2",buffer:a,Re:a.size,offset:4*2},a_distance:{type:"float",buffer:a,Re:a.size,offset:4*4},a_dir:{type:"vec2",buffer:a,Re:a.size,offset:4*5}},i.Qx.length*3,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);o.Ni()};e.prototype.nC=function(e,r,t){if(!e.Px){return}var i=e.Px;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var a=i.zs.buffer;var n=this.oC(e,r,t.context);if(!n){return}var o=t.sS();o.Ce(n,{a_pos:{buffer:a,type:"vec2",Re:a.size,offset:0},a_normal:{type:"vec2",buffer:a,Re:a.size,offset:4*2},a_distance:{type:"float",buffer:a,Re:a.size,offset:4*4},a_dir:{type:"vec2",buffer:a,Re:a.size,offset:4*5}},i.Qx.length*3,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);o.Ni()};e.prototype.Tc=function(e,r,t){var i=e._opts;if(!i||!i.isOutline){return}if(!e.Px){return}var a=e.Px;a.upload(t.context);if(!a.uploaded&&!a.zs){return}var n=a.zs.buffer;if(!e.visible){return}var o=this.pb(e,r);if(!o){return}var f=t.Xn();f.Ce(o,{a_pos:{buffer:n,type:"vec2",Re:n.size,offset:0},a_normal:{type:"vec2",buffer:n,Re:n.size,offset:4*2},a_distance:{type:"float",buffer:n,Re:n.size,offset:4*4},a_dir:{type:"vec2",buffer:n,Re:n.size,offset:4*5}},a.Qx.length*3,a.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);f.Ni()};return e}();function createLineGradinetCanvas(e){var r=document.createElement("canvas");var t=4096;r.height=1;r.width=t;var i=r.getContext("2d");var a=i.createImageData(t,1);var n=0;for(var o=0;o<t;o++){var f=void 0;for(;n<e.length;n++){if(n===e.length-1){f=e[n][1];break}var s=e[n+1][0];if(o>s*t){continue}f=e[n][1];break}f=e[n][1];var u=Util$5.color2RgbaArray(f);a.data[o*4]=u[0]*255;a.data[o*4+1]=u[1]*255;a.data[o*4+2]=u[2]*255;a.data[o*4+3]=u[3]*255}i.putImageData(a,0,0);return r}var Util$6=AMap["Util"];var Support$5=M["Support"];var CircleWebglRender=function(){function e(){}e.prototype.render=function(e,r,t){if(!e._map){return}if(!e["getRadius"]()){return}if(Support$5["safari"]){this.K2(e,r,t)}else{this.Cb(e,r,t)}};e.prototype.Cb=function(e,r,t){if(!e.visible){return}var i=this.Ab(e,r);if(!i){return}var a=t.Un();a.Ce(i,{},1,undefined,"POINTS",false,ColorMode.Si,undefined,undefined,0)};e.prototype.K2=function(e,r,t){var i=e.Sb;if(!i){return}i.upload(t.context);if(!i.upload){return}if(!e.visible){return}var a=i.zs;var n=this.Ab(e,r);if(!n){return}var o=t.X2();o.Ce(n,{a_pos:{buffer:a,type:"vec2",Re:a.size,offset:0}},i._b.length,undefined,"POINTS",false,ColorMode.Si,undefined,undefined,0)};e.prototype.Lb=function(e,r,t){if(!e.visible){return}var i=this.Tb(e,r);if(!i){return}var a=t.Un();a.Ce(i,{},1,undefined,"POINTS",false,ColorMode.Si,undefined,undefined,0)};e.prototype.Ab=function(e,r){var t=e.KB;if(!t){return}var i=e.rY(r);var a=e._opts;if(!a.fillColor){return}var n=Util$6.color2RgbaArray(a.fillColor).slice(0,3);n.push(a.fillOpacity);var o=a.radius+(a.strokeWeight||0);var f=[0,a.radius/o];var s=[0,0,0,0];if(a.strokeColor&&a.strokeWeight&&a.strokeOpacity){s=Util$6.color2RgbaArray(a.strokeColor).slice(0,3);s.push(a.strokeOpacity)}return{u_pos:t,u_color:n,u_borderColor:s,u_offset:e.zx,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_radius:this.Ib(e),u_range:f,u_retinaRatio:Support$5.Ue?2:1,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Tb=function(e,r){var t=e.KB;if(!t){return}var i=e.rY(r);var a=e._opts;if(!a.strokeWeight){return}if(!a.strokeColor){return}var n=Util$6.color2RgbaArray(a.strokeColor).slice(0,3);n.push(a.strokeOpacity);var o=a.radius+a.strokeWeight;var f=[a.radius/o,1];var s=n.slice(0,3);s.push(0);return{u_pos:t,u_color:n,u_borderColor:s,u_offset:e.zx,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_radius:this.Ib(e),u_range:f,u_retinaRatio:Support$5.Ue?2:1,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Ib=function(e){var r=e._opts;var t=r.radius+(r.strokeWeight||0);return Math.min(t,64)};return e}();var ColorPick=function(){function e(){this.uA={};this.J2=[0,0,0,255];this.Q2=256}e.prototype.add=function(e){this.uA[this.e4()]=e;return __spreadArrays(this.J2)};e.prototype.find=function(e){var r=this.Q2;var t=r*r;for(var i in this.uA){var a=Number(i);if(isEqual(this.uA[a],e)){return[a%r,~~(a/r)%r,~~(a/t)%r,255]}}return undefined};e.prototype.clear=function(){this.J2=[0,0,0,255];this.uA={}};e.prototype.r4=function(){return __spreadArrays(this.J2)};e.prototype.GV=function(e){var r=this.Q2;var t=r*r;var i=e[0],a=e[1],n=e[2];var o=i+a*r+n*t;return this.uA[o]};e.prototype.e4=function(){var e=this.Q2;var r=e*e;var t=this.J2,i=t[0],a=t[1],n=t[2];var o=i+a*e+n*r+1;this.J2[0]=o%e;this.J2[1]=~~(o/e)%e;this.J2[2]=~~(o/r)%e;return o};return e}();var Support$6=M["Support"];var scale$3=Support$6.scale;var OverlayRender=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.a2=new ColorPick;e.uC=new PolygonWebglRender(e.a2);e.cC=new PolylineWebglRender;e.dC=new CircleWebglRender;return e}e.prototype.renderFrame=function(e,r,t,i,a){var n=t.viewState.zoom;this.wf=t;this.o2=e;this.t4=r.sr;this.pu=scale$3;if(r.sr){for(var o=0,f=r.sr;o<f.length;o++){var s=f[o];if(n<s._opts.zooms[0]||n>s._opts.zooms[1]){continue}switch(s.CLASS_NAME){case"Overlay.Polygon":case"Overlay.Rectangle":case"Overlay.Circle":case"Overlay.Ellipse":this.hC(s,t,e);break;case"Overlay.Polyline":case"Overlay.BezierCurve":this.lC(s,t,e);break;case"Overlay.CircleMarker":this.fC(s,t,e);break}}}};e.prototype.pickRender=function(e,r){if(!this.o2){return}var t=this.o2.context;var i=this.o2.context.gl;if(!e){return}var a=e.size[0]*scale$3;var n=e.size[1]*scale$3;var o=e.viewState.bounds.toString();var f=false;if(!this.W2){this.W2=this.i4(i,a,n,o);f=true}else if(a!==this.W2.w||n!==this.W2.h){this.a4(this.W2,i,a,n,o);f=true}else if(o!==this.W2.bounds){this.W2.bounds=o;f=true}if(f){t.bindFramebuffer.set(this.W2);t.be.set([0,0,a,n]);t.clear({color:true,stencil:true,depth:true});if(this.t4){var s=e.viewState.zoom;for(var u=0,l=this.t4;u<l.length;u++){var v=l[u];var c=v;if(s<v._opts.zooms[0]||s>v._opts.zooms[1]){continue}if(v.CLASS_NAME==="Overlay.Polygon"&&c._opts.extrusionHeight>0){this.uC.S_(c,e,this.o2,false,true)}}}t.bindFramebuffer.set(null)}return this.W2};e.prototype.n4=function(){if(this.o2){var e=this.o2.context;e.bindFramebuffer.set(null);e.setDirty()}};e.prototype.destroy=function(){if(this.a2&&this.a2["clear"]){this.a2.clear();delete this.a2}if(this.W2&&this.o2){var e=this.o2.context.gl;if(e){e.deleteFramebuffer(this.W2)}this.W2=null;delete this.W2}if(this.t4){this.t4=[]}};e.prototype.hC=function(e,r,t){this.uC.render(e,r,t)};e.prototype.lC=function(e,r,t){this.cC.render(e,r,t)};e.prototype.fC=function(e,r,t){this.dC.render(e,r,t)};e.prototype.i4=function(e,r,t,i){var a=e.createFramebuffer();a.w=r;a.h=t;a.bounds=i;var n=e.createTexture();a.texture=n;e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,t,0,e.RGBA,e.UNSIGNED_BYTE,null);var o=e.createRenderbuffer();a.AC=o;e.bindRenderbuffer(e.RENDERBUFFER,o);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r,t);e.bindFramebuffer(e.FRAMEBUFFER,a);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,o);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==f){console.log("Frame buffer object is incomplete: "+f.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return a};e.prototype.a4=function(e,r,t,i,a){e.w=t;e.h=i;e.bounds=a;r.bindTexture(r.TEXTURE_2D,e.texture);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,i,0,r.RGBA,r.UNSIGNED_BYTE,null);r.bindRenderbuffer(r.RENDERBUFFER,e.AC);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t,i);r.bindTexture(r.TEXTURE_2D,null);r.bindRenderbuffer(r.RENDERBUFFER,null)};return e}(LayerRender);var TileState$3=M["TileState"];var VectorTrafficRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=t.viewState.optimalZoom;if(a<i.zooms[0]||a>i.zooms[1]){return}if(i.ce){e.context.clear({depth:true})}var n=r.tiles[0];if(n&&n.length){for(var o=0,f=n;o<f.length;o++){var s=f[o];if(s.status!==TileState$3.LOADED){continue}this.Ic(e,s,t,i)}}};e.prototype.destroy=function(){};e.prototype.Ic=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,"tile have no data");return}var n=r.data;var o=n.$c;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Uc;if(!u){return}var l=u.jc;var v=t.viewState.optimalZoom;var c=n.Sa;var h=i.opacity;var d=1;if(t.viewState.viewMode==="3D"){d=t.map.getView().EF()}for(var _=0,g=l.length;_<g;_++){var y=l[_];var m=i.HY[y.color]||i.HY[4];var p={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:y.width,u_color:[m[0],m[1],m[2],m[3]*h],u_border:0,u_dash:undefined,u_localDeltaCenter:c,u_skyHeight:d,u_viewHeight:t.viewState.size[1]};var b=f.size;a.context.getExtension("OES_element_index_uint");a.Ce(p,{a_pos:{type:"vec2",buffer:f,Re:b,offset:4*0},a_normal:{type:"vec2",buffer:f,Re:b,offset:4*2},a_distance:{type:"float",buffer:f,Re:b,offset:4*4},a_dir:{type:"vec2",buffer:f,Re:b,offset:4*5}},y.length,s,"TRIANGLES",i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil,undefined,y.offset)}};return e}(LayerRender);var VTRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=e.context;var n=a.gl;return};return e}(LayerRender);var skyFragmentString="precision highp float;\\nuniform float u_opacity;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n  // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity;\\n}";var skyVertextString="precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute vec4 a_color;\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec4 pos = vec4(a_pos.xy, 0, 1);\\n    // vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_color = a_color;\\n    v_pos = gl_Position;\\n}\\n";var skyPatternFragmentString="precision highp float;\\nuniform sampler2D u_texture;\\n\\nuniform float u_opacity;\\nuniform float u_rotation;\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\nvoid main() {\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n  gl_FragColor = texture2D(u_texture, vec2(v_coord.x+u_rotation, v_coord.y));\\n  // // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity*v_opacity;\\n}";var skyPatternVertextString="precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute float a_opacity;\\nattribute vec2 a_coord;\\n\\n\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\n\\nvoid main() {\\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_coord = a_coord;\\n    v_opacity = a_opacity;\\n}\\n";var skyUniforms={u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2"};var skyAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_color:{Me:"float32",Oe:"vec4"}};function getAtmosphereTexture(e,r){var t=e.vn.nX("00001","2","texture",r);if(t){return"https://"+t}return""}function getSkyTexture(e,r){var t=e.vn.nX("00001","1","texture",r);if(t){return"https://"+t}return""}var sky={uniforms:skyUniforms,attributes:skyAttributes,vertexSource:skyVertextString,fragmentSource:skyFragmentString};var skyPatternUniforms={u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2",u_texture:"sampler2D",u_rotation:"float"};var skyPatternAttributes={a_pos:{Me:"float32",Oe:"vec4"},a_opacity:{Me:"float32",Oe:"float"},a_coord:{Me:"float32",Oe:"vec2"}};var skyPattern={uniforms:skyPatternUniforms,attributes:skyPatternAttributes,vertexSource:skyPatternVertextString,fragmentSource:skyPatternFragmentString};var SmartArrayBuffer$3=M["SmartArrayBuffer"];var SkyLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a,n){if(!a.map.mapStyle.vn){return}var o=getAtmosphereTexture(a.map.mapStyle,t.viewState.optimalZoom);var f=o?a.map.getImage(o):undefined;if(f){this.jB(e,t,a,o,t.viewState.zoom<12?1:0)}else if(o&&a.map.I_&&!a.map.I_.MH(o)){a.map.addImage(o,{url:o,filter:"LINEAR",wrap:"REPEAT",cb:function(){return a.map.setNeedUpdate(true)}})}if(!o||!f){this.NB(e,t,t.map.sX(t.viewState.optimalZoom),t.viewState.zoom<12?1:0)}var s=getSkyTexture(a.map.mapStyle,t.viewState.optimalZoom);var u=s?a.map.getImage(s):undefined;if(u){this.jB(e,t,a,s,step(t.viewState.zoom-11,1,0))}else if(s&&a.map.I_&&!a.map.I_.MH(s)){a.map.addImage(s,{url:s,filter:"LINEAR",wrap:"REPEAT",cb:function(){return a.map.setNeedUpdate(true)}})}if(!s||!u){this.NB(e,t,t.map.JF(t.viewState.optimalZoom),step(t.viewState.zoom-11,1,0))}return};e.prototype.NB=function(e,r,t,i){var a=e.rS();var n=r.viewState;var o=e.context;var f=r.map.getView();var s=n.size,u=n.pitch,l=n.optimalZoom;if(f.type==="2D"){return}var v=f.Uu();v=this.yz(f.getStatus().pitch,v,f.getStatus().size[1],l);if(v<=0||u<=0){return}var c=r.map;var h=this.WF(v,t,n,f);if(!this.zs){this.zs=new SmartArrayBuffer$3(o,h,32,"ARRAY_BUFFER")}else{this.zs.update(h)}var d=this.zs.buffer;a.Ce({u_opacity:i,u_mvpMatrix:n.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:d,Re:d.size,offset:0},a_color:{type:"vec4",buffer:d,Re:d.size,offset:16}},d.length,undefined,"TRIANGLES",undefined,ColorMode.Si,undefined)};e.prototype.jB=function(e,r,t,i,a){if(a===0){return}var n=e.EB();var o=e.rS();var f=r.viewState;var s=e.context;var u=r.map.getView();var l=f.size,v=f.pitch,c=f.optimalZoom;if(u.type==="2D"){return}var h=u.Uu();h=this.yz(u.getStatus().pitch,h,u.getStatus().size[1],c);if(h<=0||v<=0){return}var d=r.map;var _=d.JF(f.optimalZoom);var g=(180-f.rotation)/360;var y=this.WB(h,f,u);if(!this.zs){this.zs=new SmartArrayBuffer$3(s,y,32,"ARRAY_BUFFER")}else{this.zs.update(y)}var m=this.zs.buffer;var p=t.map.getImage(i);if(p){n.Ce({u_opacity:a,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0],u_texture:p,u_rotation:g},{a_pos:{type:"vec4",buffer:m,Re:m.size,offset:0},a_opacity:{type:"float",buffer:m,Re:m.size,offset:16},a_coord:{type:"vec2",buffer:m,Re:m.size,offset:24}},m.length/2,undefined,"TRIANGLES",undefined,ColorMode.Si,undefined);o.Ce({u_opacity:1,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:m,Re:m.size,offset:0},a_color:{type:"vec4",buffer:m,Re:m.size,offset:16}},m.length/2,undefined,"TRIANGLES",undefined,ColorMode.Si,undefined,undefined,m.length/2)}};e.prototype.WF=function(e,r,t,i){var a=t.size[1]/2;var n=t.pitch,o=t.zoom;var f=[-1,1-e/a];var s=[1,1-e/a];r[3]=1;var u=i.map.mapStyle.dn(30001,1,o);var l=[.988,.976,.949,1];if(u&&u.faceColor){l=u.faceColor.normalize()}var v=__spreadArrays(l);v[3]=1;var c=__spreadArrays(l)||[1,1,1,0];c[3]=0;var h=__spreadArrays(l)||[1,1,1,Math.min(.1,1/o)];h[3]=Math.min(.1,5/o);var d=__spreadArrays(r)||[1,1,1,1];d[3]=-.7;var _=new Float32Array(__spreadArrays([f[0],f[1],0,0],v,[-1,1,0,0],r,[s[0],s[1],0,0],v,[s[0],s[1],0,0],v,[-1,1,0,0],r,[1,1,0,0],r,[f[0],f[1],0,0],h,[-1,1,0/3,0],c,[s[0],s[1],0,0],h,[s[0],s[1],0,0],h,[-1,1,0/3,0],c,[1,1,0/3,0],c));return _};e.prototype.WB=function(e,r,t){var i=r.size[1]/2;var a=r.pitch,n=r.zoom,o=r.rotation;var f=t.X(0,e);var s=t.X(r.size[0],e);var u=t.X(0,e+0);var l=t.X(r.size[0],e+0);var v=.5;var c=t.pz().dz()*v;var h=0;var d=r.fov/Math.PI/2/2;var _=0-d;var g=0+d;var y=-0;var m=1;var p=t.map.mapStyle.dn(30001,1,n);var b=[.988,.976,.949,1];if(p&&p.faceColor){b=p.faceColor.normalize()}var x=__spreadArrays(b)||[1,1,1,0];x[3]=0;var C=__spreadArrays(b)||[1,1,1,Math.min(.1,1/n)];C[3]=Math.min(.1,5/n);var S=new Float32Array(__spreadArrays([f[0],f[1],h,0,1,0,_,m,f[0],f[1],c,0,1,0,_,y,s[0],s[1],h,0,1,0,g,m,s[0],s[1],h,0,1,0,g,m,s[0],s[1],c,0,1,0,g,y,f[0],f[1],c,0,1,0,_,y,u[0],u[1],0,0],C,[u[0],u[1],c/3,0],x,[l[0],l[1],0,0],C,[l[0],l[1],0,0],C,[l[0],l[1],c/3,0],x,[u[0],u[1],c/3,0],x));return S};e.prototype.yz=function(e,r,t,i){var a=Math.max(e/100-.4,0);var n=Math.max((i-24)*4,0)/100;return t*(a-n)};return e}(LayerRender);function step(e,r,t){return Math.max(Math.min(e,r),t)}var indoorStyles={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"},StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19",desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"},StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"},StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20",desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20",desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20",desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}],RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]},{$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};var allowedStyleKeys=["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","strokeDasharray","fontSize"];var indoorStyleSet={setOptions:function(e){},init:function(){this.NC={};this.UC(indoorStyles);this.WC=[];return this.NC},GC:function(e){var r=AMap.getConfig()["protocol"]+"://webapi.amap.com"+"/images/indoor_icon/"+("36/"+e+"@2x")+".png";return r},HC:function(e){var r=true;for(var t=13;t<=22;t++){var i=this.VC(e,t);if(i&&(i.fontSize>0||i.iconId)){r=false;break}}return r},VC:function(e,r){return this.Tn(e,r)},ZC:function(e,r){return this.Tn(e,r)},Pr:function(e,r){return this.Tn(e,r)},YC:function(e,r){var t=allowedStyleKeys;if(r){for(var i in r){if(r.hasOwnProperty(i)&&t.indexOf(i)>=0&&e[i]===void 0){e[i]=r[i]}}}return e},JC:function(e,r){if(!e){return null}var t=allowedStyleKeys;var i={};for(var a=0,n=t.length;a<n;a++){var o=t[a];if(e.hasOwnProperty(o)&&e[o]!==void 0){i[o]=e[o]}}this.YC(i,r);return i},Tn:function(e,r){var t=e[0];var i=e[1];var a=t+"_"+i;r=Math.round(r);var n=this.NC[a];if(!n){if(this.WC.indexOf(a)<0){this.WC.push(a)}return null}for(var o=0,f=n.length;o<f;o++){if(n[o].levels.indexOf(""+r)>=0){return n[o].styleOpts}}if(r>20){var s=n[n.length-1];if(s.levels.indexOf("20")>=0){s.levels.push(""+r);return s.styleOpts}}return null},UC:function(e){for(var r in e){if(e.hasOwnProperty(r)){this.XC(e[r],r)}}},XC:function(e,r){for(var t=0,i=e.length;t<i;t++){this.qC(e[t],r)}},qC:function(e,r){var t=e["$"];if(!t){return}var i=t["mainkey"];var a=t["subkey"];var n=e["StyleItem"];var o=i+"_"+a;if(this.NC[o]);this.NC[o]=this.QC(n,r)},QC:function(e,r){var t=[];for(var i=0,a=e.length;i<a;i++){var n=this.KC(e[i],r);if(!n){continue}t.push(n)}return t},KC:function(e,r){var t=e["$"];if(!t){return}var i={};i["levels"]=t["level"].split(",");i["desc"]=t["desc"].split(",");i["styleOpts"]=this.$I(i,i.desc,r);i["styleOpts"]["levels"]=i.levels;return i},BI:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(r.shift());r=r.slice(0,3);var a="rgb("+r.join(",")+")";return a},WI:function(e){if(e.trim){e=e.trim()}var r=this.BI(e.substr(2,8));return r},GI:function(){return this.HI++},$I:function(e,r,t){var i;switch(t){case"PoiStyle":i={iconId:parseInt(r[1],10),fontSize:Math.min(15,parseInt(r[4],10)||0),fillColor:this.WI(r[5]),strokeColor:this.WI(r[6]),VI:parseInt(r[8],10)===0};if(i.iconId===1){i.iconId=0}break;case"LineStyle":i={fillColor:"rgb(252, 249, 242)",strokeColor:this.WI(r[7]),strokeWeight:Math.max(2,Math.round(parseInt(r[2],10)/3))};break;case"RegionStyle":i={fillColor:this.WI(r[2])};break;case"BuildingStyle":i={fillColor:this.WI(r[1]),strokeColor:this.WI(r[2])};break;default:return null}i["_uid"]=this.GI();return i}};var assign$1=M["lodash"]["assign"];var outLineStyle={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}};var IndoorRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e._config=AMap["getConfig"]();e.YI=[17,zoomRange[1]];e.l$=indoorStyleSet.init();e.a$=new AMap["LabelsLayer"]({opacity:1,collision:true,allowCollision:true,zIndex:9,zooms:[17,zoomRange[1]],visible:false});e.GL=false;e.i$=false;e.WL="";e._map=null;e.f$=false;e.UL=null;e.pD=false;e.t$();e.sZ=false;return e}e.prototype["getContainer"]=function(){return document.createElement("div")};e.prototype.renderFrame=function(e,r,t,i,a){};e.prototype.render=function(e){var r=this;var t=e.data;if(!t||t.length<1||!this.gs){return false}this._map=this.gs.map;if(!this.sZ){this.sZ=true;this._map.on("click",function(e){if(r.e$){r.e$.hide()}r.gs.oZ()})}var i=this.gs.ZI();var a=i.indoor,n=i.floorInfo;if(i&&i["visible"]===false){return false}var o=this.qI(t);this.UL=t;if(!o){return false}if(!i["changeFloor"]){var f={centerId:o};this.gs.setRenderData(f)}var s=Object.keys(t);for(var u=0;u<s.length;u++){var l=s[u];var v=t[l];var c=v["building"];if(!c||!c["properties"]){continue}var h=this.gs["getIntersect"](c["properties"]["outside_outline"]);if(!h){continue}if(!a[l]){var d="1";if(n[l]){d=n[l]}this.gS(v,d)}else{var _=a[l]["curFloor"];var d=n[l];if(_!==d){this.gS(v,d)}}}};e.prototype.HF=function(e){this.gs=e};e.prototype.t$=function(){var e=this;if(!this.i$){AMap["plugin"]("AMap.IndoorMapFloorBar",function(){e.i$=true})}};e.prototype.QI=function(e,r){var o=this;var t=this.gs.ZI();var i=t.floorInfo,a=t.showId,n=t.centerId,f=t.o4;var s=null;var u=null;var l=Number(i[r])||1;var v=e.properties;if(v&&v["floor_nonas"]){s=v["floor_nonas"];u=v["floor_indexs"]}if(!s||!u){return false}if(u.length>1){if(u[0]>u[1]){s=s.reverse();u=u.reverse()}}if(!this.e$&&this.i$){if(M&&M["IndoorMapFloorBar"]){this.e$=new M["IndoorMapFloorBar"]({floors:s,floorIndexs:u,currentFloor:l});this.WL=n;this.gs.setBar(this.e$);this.gs.setRenderData({barCenterId:this.WL})}if(!this.e$){return false}this._map.addControl(this.e$);this.e$.on("floorchange",function(e){o.pD=true;var r=e["currentIndex"];var t=o.gs.ZI();var i=r;var a=t.centerId;o.gs.n$(a,i);var n=o._map.Mv.getSource(o.gs.co());if(a){o.gs.setRenderData({changeFloor:true});n.JR(a,i)}})}else if(this.e$){this.WL=n;this.e$["setOption"]({floors:s,floorIndexs:u,currentFloor:l});this.gs.setRenderData({barCenterId:this.WL})}if(f&&this.e$){this.e$.hide()}if(!this.GL&&this._map){this.GL=true;this._map.on("moveend",function(){var e=o.vD();if(e){var r={centerId:e};o.gs.setRenderData(r)}o.gs.setRenderData({changeFloor:false});o.f4();o.gs.uD()})}};e.prototype.f4=function(){var e=1;var r=this.gs.ZI();var t=r.centerId;if(t===this.WL){return false}if(r["floorInfo"][t]){e=r["floorInfo"][t]}if(this.UL&&this.UL[t]&&this.UL[t]["building"]){var i=this.UL[t]["building"];var a=i.properties;var n=null;var o=null;if(a&&a["floor_nonas"]){n=a["floor_nonas"];o=a["floor_indexs"]}if(!n||!o){return false}if(o.length>1){if(o[0]>o[1]){n=n.reverse();o=o.reverse()}}if(this.e$){this.e$["setOption"]({floors:n,floorIndexs:o,currentFloor:Number(e)});this.WL=t;this.gs.setRenderData({barCenterId:this.WL})}}};e.prototype.qI=function(e){var r=this._map.getCenter().toJSON();var t=null;var i="";var a=Object.keys(e);for(var n=0;n<a.length;n++){var o=a[n];var f=e[o];if(f["building"]&&f["building"]["properties"]&&f["building"]["properties"]["centerPoint"]){var s=f["building"]["properties"]["centerPoint"];var u=new AMap["LngLat"](s[0],s[1]);var l=AMap["GeometryUtil"]["distance"](r,u);if(t){if(l<t){t=l;i=o}}else{t=l;i=o}}}return i};e.prototype.vD=function(){var e=this._map.getCenter().toJSON();var r=null;var t="";var i=this.gs.ZI();var a=i["indoor"];var n=Object.keys(a);for(var o=0;o<n.length;o++){var f=n[o];var s=a[f];if(s["buildingCenter"]){var u=s["buildingCenter"];var l=new AMap["LngLat"](u[0],u[1]);var v=AMap["GeometryUtil"]["distance"](e,l);if(r){if(v<r){r=v;t=f}}else{r=v;t=f}}}return t};e.prototype.fD=function(e,r){var t=this.gs.ZI();if(!t["floorInfo"]){t["floorInfo"]={}}t["floorInfo"][e]=r;this.gs.setRenderData(t)};e.prototype.gS=function(e,r){var t=Object.keys(e["data"])[0];if(r){t=r}if(!e["data"][t]){return false}var i=e["data"][t]["floor"];var a=e["data"][t]["id"];if(!i||!a){return false}var n=this.gs.ZI();this.fD(a,r);var o=n["centerId"];if(o===a){this.QI(e["building"],a)}this.o$(i,a,e["building"],r);this.gs.mD(true)};e.prototype.ar=function(e){var r=this.gs.ZI();var t=r.indoor;if(t&&t[e]){if(t[e]["polygons"]){this.gs.$F.remove(t[e]["polygons"])}if(t[e]&&t[e]["markers"]&&t[e]["markers"].length>0){this.a$.remove(t[e]["markers"])}}};e.prototype.h$=function(e){var r=this;if(!e||!e["properties"]){return null}var t=e["properties"]["poitype"];var i=e["position"];var a=t.join("_");var n=this.l$[a]&&this.l$[a][0];var o=this.gs.ZI();if(n&&n["styleOpts"]&&n["styleOpts"]["iconId"]){var f=n["styleOpts"]["iconId"];var s=indoorStyleSet.GC(f);var u={position:i,zooms:e["zooms"],opacity:o["opacity"],rank:3e5,icon:{size:[18,18],image:s,anchor:"center"},extData:e["properties"],innerOverlay:true,bubble:true};if(e["text"]){var l=n["styleOpts"]["fillColor"]||"rgb(132,99,142)";var v=n["styleOpts"]["strokeColor"]||"#FFFFFF";u=assign$1(u,{text:{content:e["text"],direction:"bottom",style:{fillColor:l,strokeColor:v,fontSize:12}}})}var c=new AMap["LabelMarker"](u);c.on("click",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("click",e)}});c.on("mousemove",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("mousemove",e)}});c.on("mouseout",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("mousemove",e)}});return c}return null};e.prototype.bi=function(e,r){var t="hotspot";var i;var a=r.target.getExtData();switch(e){case"click":i=t+e;break;case"mouseover":i=t+"over";break;case"mouseout":i=t+"out";break}if(i){var n=this._map.getProjection();var o=n["unproject"](r["lnglat"]["lng"],r["lnglat"]["lat"]),f=o[0],s=o[1];var u={type:i,id:a["pid"],name:a["name"],lnglat:r["lnglat"],originEvent:r["originEvent"]};this._map.emit(i,u)}};e.prototype.o$=function(e,r,t,i){var s=this;if(!this._map||!r){return false}var a=this.gs.ZI();this.ar(r);var n=this._map["getZoom"]();var o=[];var f=[];var u=e["shops"];var l=e["floor"];var v=e["cons"];var c={building_id:r,floor:l};var h=u.length;var d=[];var _=[];var g=[];var y=[];var m=[];for(var p=0;p<h;p++){var b=u[p];var x=b.properties,C=b.geometry;var S=assign$1({shop:{id:x["cpid"],name:x["name"]}},c);var M="#FFFFFF";var w="#FE9A2E";if(x&&x["regiontype"]){var k=x["regiontype"].join("_");var T=this.l$[k]&&this.l$[k][0];if(T&&T["styleOpts"]){M=T["styleOpts"]["fillColor"];w=T["styleOpts"]["strokeColor"]}}_.push(M);g.push(w);m.push(a["opacity"]);y.push({indoorPolygon:true,indoorData:S,id:r});d.push(C.coordinates);if(x["zoom_min"]&&x["zoom_max"]&&x["font_anthor_point"]){var I=x["font_anthor_point"];var A={position:[I[0],I[1]],text:x["name"],properties:x,zooms:[x["zoom_min"],x["zoom_max"]]};var $=this.h$(A);if($){f.push($)}}}var F=new AMap["Polygon"]({bubble:true,path:d,innerOverlay:true,cursor:a["cursor"],zooms:this.YI,async:true,fillColor:function(e){return _[e]},strokeColor:function(e){return g[e]},fillOpacity:function(e){return m[e]},strokeOpacity:a["opacity"],strokeWeight:1,zIndex:a["zIndex"]+2});F.on("click",function(e){var r=y[e.vectorIndex];var t=r.id;if(s.e$){s.e$.show()}if(t){var i={centerId:t,changeFloor:true};s.gs.setRenderData(i);s.f4();s.gs.uD()}r["indoorData"]["ext"]={type:"polygon",data:e};s.gs.emit("click",r["indoorData"])});F.on("mouseover",function(e){for(var r=0,t=y.length;r<t;r++){var i=y[r];if(i["originFillOpacity"]&&i["originFillColor"]){_[r]=i["originFillColor"];m[r]=i["originFillOpacity"]}}var a=y[e.vectorIndex];var n=e.lnglat;a["originFillOpacity"]=m[e.vectorIndex];a["originFillColor"]=_[e.vectorIndex];_[e.vectorIndex]="#B45F04";m[e.vectorIndex]=.4;if(a["indoorData"]&&a["indoorData"]["shop"]&&a["indoorData"]["shop"]["name"]){var o=a["indoorData"]["shop"]["name"];var f="<div style="+\'"padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;">\'+o+"</div>";s.JT=new AMap["Marker"]({position:n,content:f,anchor:"bottom-left",map:s._map,noSelect:true})}F.to()});F.on("mouseout",function(e){for(var r=0,t=y.length;r<t;r++){var i=y[r];if(i["originFillOpacity"]&&i["originFillColor"]){_[r]=i["originFillColor"];m[r]=i["originFillOpacity"]}}if(s.JT){s._map.remove(s.JT)}F.to()});o.push(F);var P=null;var L=[];if(l["geometry"]&&l["geometry"]["coordinates"]){var M=outLineStyle["unHigh"]["fillColor"];var w=outLineStyle["unHigh"]["strokeColor"];if(a["centerId"]===r){w=outLineStyle["high"]["strokeColor"]}var R=l["geometry"]["coordinates"];if(l["geometry"]["type"]&&l["geometry"]["type"]==="MultiPolygon"){if(R[0]&&R[0].length>1){var E=[];for(var O=0;O<R[0].length;O++){E.push(R[0][O])}R=E}}for(var D=0;D<R.length;D++){var U=new AMap["Polygon"]({bubble:true,async:true,strokeWeight:3,innerOverlay:true,zooms:this.YI,path:R[D],fillColor:M,strokeColor:w,zIndex:a["zIndex"]+1,fillOpacity:a["opacity"],strokeOpacity:a["opacity"],extData:{indoorPolygon:true,id:r}});P=true;U.on("click",function(e){var r=e.target.getExtData();var t=r.id;if(s.e$){s.e$.show()}if(t){var i={centerId:t,changeFloor:true};s.gs.setRenderData(i)}s.f4();s.gs.uD()});L.push(U);o.push(U)}}if(a["showId"]){this.gs.setRenderData({centerId:a["showId"]})}this.gs.uD();this.gs.$F.add(o);if(!a["indoor"][r]){a["indoor"][r]={}}a["indoor"][r]["curFloor"]=i;a["indoor"][r]["polygons"]=o;a["indoor"][r]["outline"]=L;if(t&&t["properties"]&&t["properties"]["centerPoint"]){a["indoor"][r]["buildingCenter"]=t["properties"]["centerPoint"]}if(a&&a["showId"]===r&&P){if(a["animateState"]!=="undefined"){this._map.setStatus({animateEnable:a["animateState"]})}}var N=v.length;for(var B=0;B<N;B++){var H=v[B];var C=H.geometry,x=H.properties;var z=x.zoom_min,G=x.zoom_max;var A={properties:x,position:[C["coordinates"][0],C["coordinates"][1]],zooms:[z,G]};var $=this.h$(A);if($){f.push($)}}if(!this.f$){this._map.add(this.a$);this.gs.setRenderData({labelsLayer:this.a$});this.f$=true}a["indoor"][r]["markers"]=f;if(typeof a["zIndex"]!=="undefined"){this.a$.setzIndex(a["zIndex"]+9)}this.a$.add(f);var j=this._map&&this._map["showLabel"];if(a["showLabels"]&&j){this.a$.show()}this.gs.KI(a);var V={status:0,id:r,building:{id:r}};if(t["properties"]){var W=t["properties"];V["building"]["name"]=W["name_cn"];V["building"]["lnglat"]=W["centerPoint"];V["building"]["floor"]=i||1;V["building"]["floor_details"]={floor_indexs:W["floor_indexs"],floor_nonas:W["floor_nonas"],floor_names:W["floor_names"]};this.gs.setRenderData(V)}if(!a["complete"]){a["complete"]={}}if(!a["complete"][r]){a["complete"][r]={}}if(!a["complete"][r][i]){this.gs.emit("floor_complete",V);a["complete"][r][i]=true}else if(this.pD){this.gs.emit("floor_complete",V);this.pD=false}this.gs.setRenderData(a["complete"])};return e}(LayerRender);var map$3=M["lodash"]["map"];var DistrictRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.gC={Nation_Border_China:"nation-stroke",Nation_Border_Foreign:"nation-stroke",Coastline_China:"coastline-stroke",Coastline_Foreign:"coastline-stroke",Province_Border_China:"province-stroke",Province_Border_Foreign:"province-stroke",City_Border_China:"city-stroke",County_Border_China:"county-stroke"};e.xC={};return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}var n=t.viewState.optimalZoom;var o=t.map.getMask();var f=r.tiles;var s=i.layer.getLayerOptions(),u=s.styles,l=s.adcode;if(i.ce){e.context.clear({depth:true})}for(var v=0,c=f;v<c.length;v++){var h=c[v];if(h.status!==TileState$1.LOADED){continue}this.Lc(e,h,t,i,u,l);this.Ic(e,h,t,i,u,l);this.lH(e,h,t,i)}this.PB(e,t,i,o)};e.prototype.destroy=function(){};e.prototype.clearStyleCache=function(){this.xC={}};e.prototype.Lc=function(e,r,t,i,a,n){var o=e.Wn();var f=r.data;var s=f.Dc;if(!s){return}s.upload(o.context,true);var u=s.zs;var l=s.Pc;var v=f.Oc;var c=i.opacity;var h=[r.Sa[0],r.Sa[1]];var d=1;if(t.viewState.viewMode==="3D"){d=t.map.getView().EF()}var _=r.zo.z;if(_<LocalZoom){var g=r.localCoord.center;h[0]+=g[0];h[1]+=g[1]}for(var y=0,m=v.jc;y<m.length;y++){var p=m[y];var b=JSON.parse(""+p["mainkey"]);var x=this.Mn(a,b,"polygon");var C=x["fill"];if(!C||C.length!==4||n&&!n[b.adcode]&&!n[b.SOC]&&!n[b.adcode_pro]&&!n[b.adcode_cit]){continue}var S={u_matrix:t.viewState.mvpMatrix,u_color:[C[0],C[1],C[2],C[3]*c],u_offset:[0,0],u_localDeltaCenter:h,u_viewHeight:t.viewState.size[1],u_skyHeight:d};if(S){o.context.getExtension("OES_element_index_uint");o.Ce(S,{a_pos:{type:"vec2",Re:u.size,offset:0,buffer:u}},p.length,l,"TRIANGLES",i.depthTest,ColorMode.Si,this.OH(i.rejectMapMask,!!t.map.getMask()),undefined,p.offset)}}};e.prototype.Ic=function(e,r,t,i,s,a){var u=this;var n=e.Vn();if(!r.data){console.error("tile have no data");return}var o=r.data;var f=o.$c;if(!f){return}f.upload(n.context,true);var l=f.zs.buffer;var v=f.Pc.buffer;var c=o.Uc;var h=c.jc;var d=t.viewState.optimalZoom;var _=[r.Sa[0],r.Sa[1]];var g=i.opacity;var y=1;if(t.viewState.viewMode==="3D"){y=t.map.getView().EF()}var m=r.zo.z;if(m<LocalZoom){var p=r.localCoord.center;_[0]+=p[0];_[1]+=p[1]}var b={};var x={};if(h.length===1){var C=h[0]["mainkey"];var S=JSON.parse(C,undefined);var M=this.Mn(s,S,"line");b[C]=M;x[C]=S}h.sort(function(e,r){var t=e["mainkey"];var i=JSON.parse(t,undefined);var a=u.Mn(s,i,"line");if(!b[t]){b[t]=a}if(!x[t]){x[t]=i}var n=r["mainkey"];var o=JSON.parse(n,undefined);var f=u.Mn(s,o,"line");if(!b[n]){b[n]=f}if(!x[n]){x[n]=o}return a.zIndex-f.zIndex});for(var w=0,k=h.length;w<k;w++){var T=h[w];var C=T["mainkey"];var S=x[C];var I=+S.type_;var M=b[C];var A=[1,0,1,0];if(M["dash"]){A=__spreadArrays(M["dash"])}if(I===1||I===8){A=[3,2,3,2]}else if(I===10){A=[1,2,1,2]}else if(I===11){A=[5,5,5,5]}else if(I===4){A=[2,2,6,2]}var $=M[this.gC[S.type]];if(!$||$.length!==4||a&&!a[S.adcode]&&!a[S.SOC]&&!a[S.adcode_pro]&&!a[S.adcode_cit]){continue}var F={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:M["stroke-width"],u_color:[$[0],$[1],$[2],$[3]*g],u_dash:A,u_border:0,u_localDeltaCenter:_,u_viewHeight:t.viewState.size[1],u_skyHeight:y};if(!F){continue}if(F){var P=l.size;n.context.getExtension("OES_element_index_uint");n.Ce(F,{a_pos:{type:"vec2",buffer:l,Re:P,offset:4*0},a_normal:{type:"vec2",buffer:l,Re:P,offset:4*2},a_distance:{type:"float",buffer:l,Re:P,offset:4*4},a_dir:{type:"vec2",buffer:l,Re:P,offset:4*5}},T.length,v,"TRIANGLES",i.depthTest,ColorMode.Si,this.OH(i.rejectMapMask,!!t.map.getMask()),undefined,T.offset)}}};e.prototype.lH=function(e,r,t,i){var a=e.Wn();var n=a.context;var o=new Float32Array(this.fH(r));var f=[r.Sa[0],r.Sa[1]];var s=n.fe(o,8);var u=r.zo.z;if(u<LocalZoom){var l=r.localCoord.center;f[0]+=l[0];f[1]+=l[1]}var v=[0,1,0,0];if(u===t.viewState.optimalZoom-1){v=[1,0,0,0]}var c={u_matrix:t.viewState.mvpMatrix,u_color:v,u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:t.viewState.size[1],u_skyHeight:1};a.Ce(c,{a_pos:{type:"vec2",buffer:s,Re:0,offset:0}},6,undefined,"TRIANGLES",false,ColorMode.Si,this.BH(i.rejectMapMask,!!t.map.getMask()),undefined,0)};e.prototype.Mn=function(e,r,t){var i=JSON.stringify(r);if(this.xC[i]){return this.xC[i]}var a=["nation-stroke","coastline-stroke","province-stroke","city-stroke","county-stroke"];var n={};if(!r){return n}if(t==="line"){for(var o=0,f=a.length;o<f;o++){var s=a[o];if(e[s]){if(AMap.Util["isFunction"](e[s])){n[s]=AMap.Util.color2RgbaArray(e[s](r))}else{n[s]=AMap.Util.color2RgbaArray(e[s])}}}if(AMap.Util["isFunction"](e["stroke-width"])){n["stroke-width"]=e["stroke-width"](r)}else{n["stroke-width"]=e["stroke-width"]}if(r&&(r["adcode_pro"]||r["adcode_city"])){n["dash"]=AMap.Util["isFunction"](e["dash"])?e["dash"](r):e["dash"]}if(r&&e["zIndex"]!==undefined){n["zIndex"]=AMap.Util["isFunction"](e["zIndex"])?e["zIndex"](r):e["zIndex"]}}else if(t==="polygon"){if(AMap.Util["isFunction"](e["fill"])){n["fill"]=AMap.Util.color2RgbaArray(e["fill"](r))}else{n["fill"]=AMap.Util.color2RgbaArray(e["fill"])}n["stroke-width"]=e["stroke-width"]}this.xC[i]=n;return n};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass("AMap.MaskLayer");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};return e}(LayerRender);var Util$7=AMap["Util"];var MapboxRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.yz=1;e.VG=1;e.VG=1;e.ZG=StencilMode.HE;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}if(!r||r.tiles.length<1){return}var n=t.viewState.optimalZoom;if(n<=9.8){this.ZG=undefined}else{this.ZG=StencilMode.HE}for(var o=0;o<r.tiles.length;o++){var f=r.tiles[o];if(!f){continue}this.GG(e,f,t,i);this.Lc(e,f,t,i);this.sT(e,f,t,i);this.Ic(e,f,t,i)}if(r.tiles&&r.tiles.length>0){a.map.bZ.dynamic.set("firstPaint",true)}var s=t.map.getMask();this.PB(e,t,i,s)};e.prototype.GG=function(e,r,t,i){var a=e.Wn();var n=r.stencil;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode==="3D"){h=t.map.getView().EF()}if(l<LocalZoom){c=[0,0]}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(y&&o.Qx){a.context.getExtension("OES_element_index_uint");a.Ce(y,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},g.length,s,"TRIANGLES",undefined,ColorMode.Si,StencilMode.TE,undefined,g.offset)}}};e.prototype.UG=function(e,r,t,i){var a=e.Wn();var n=r.stencil;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode==="3D"){h=t.map.getView().EF()}if(l<LocalZoom){c=[0,0]}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(y&&o.Qx){a.context.getExtension("OES_element_index_uint");a.Ce(y,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},g.length,s,"TRIANGLES",undefined,ColorMode.Si,StencilMode.FE,undefined,g.offset)}}};e.prototype.Lc=function(e,r,t,i){var a=e.Wn();var n=r.data;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode==="3D"){h=t.map.getView().EF()}if(l<LocalZoom){if(r.fY);else{c=[0,0]}}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:n.bgColor,u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(g.style){var m=g.style;if(m.fillColor){var p=m.fillColor;y["u_color"]=p}}if(y&&o.Qx){a.context.getExtension("OES_element_index_uint");a.Ce(y,{a_pos:{type:"vec2",Re:f.size,offset:0,buffer:f}},g.length,s,"TRIANGLES",undefined,ColorMode.Si,this.ZG,undefined,g.offset)}}};e.prototype.Ic=function(e,r,t,i){var a=r.data;if(!a||!a.$c){return}var n=a.Uc;var o=t.viewState.optimalZoom;var f=[r.Sa[0],r.Sa[1]];if(o<LocalZoom){f=[0,0]}var s=a.$c;s.upload(e.context);if(!s.uploaded||!s.zs){return}n.jc.sort(function(e,r){if(e.style&&e.style[0]&&e.style[0].jr&&r.style&&r.style[0]&&r.style[0].jr){if(r.style[0].jr<e.style[0].jr){return 1}else{return-1}}return 0});for(var u=0,l=n.jc;u<l.length;u++){var v=l[u];var c=s.zs.buffer;if(!v.style||v.style.length<1){continue}var h={u_color:[0,0,0,.5],u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1};var d=v.style[0];if(d&&d["faceColor"]&&d["faceWidth"]&&d["type"]&&d["type"]==="line"){var _=v.style[0]["faceColor"];h["u_color"]=_;h["u_width"]=d["faceWidth"]}else{continue}if(!h){return}var g=e.Xn();g.context.getExtension("OES_element_index_uint");g.Ce(h,{a_pos:{buffer:c,type:"vec2",Re:c.size,offset:0},a_normal:{type:"vec2",buffer:c,Re:c.size,offset:4*2},a_distance:{type:"float",buffer:c,Re:c.size,offset:4*4},a_dir:{type:"vec2",buffer:c,Re:c.size,offset:4*5}},v.length,s.Pc.buffer,undefined,undefined,ColorMode.Si,this.ZG,undefined,v.offset)}};e.prototype.sT=function(e,r,t,i){var a=r.data;if(!a||!a.$c){return}var n=a.Uc;var o=t.viewState.optimalZoom;var f=[r.Sa[0],r.Sa[1]];if(o<LocalZoom){f=[0,0]}var s=a.$c;s.upload(e.context);if(!s.uploaded||!s.zs){return}n.jc.sort(function(e,r){if(e.style&&e.style[0]&&e.style[0].Or&&r.style&&r.style[0]&&r.style[0].Or){if(r.style[0].Or<e.style[0].Or){return 1}else{return-1}}return 0});for(var u=0,l=n.jc;u<l.length;u++){var v=l[u];var c=s.zs.buffer;if(!v.style||v.style.length<1){continue}var h={u_color:[0,0,0,.5],u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1};var d=v.style[0];if(d&&d["borderColor"]&&d["borderWidth"]&&d["type"]&&d["type"]==="line"){var _=v.style[0]["borderColor"];h["u_color"]=_;h["u_width"]=d["borderWidth"]}else{continue}if(!h){return}var g=e.Xn();g.context.getExtension("OES_element_index_uint");g.Ce(h,{a_pos:{buffer:c,type:"vec2",Re:c.size,offset:0},a_normal:{type:"vec2",buffer:c,Re:c.size,offset:4*2},a_distance:{type:"float",buffer:c,Re:c.size,offset:4*4},a_dir:{type:"vec2",buffer:c,Re:c.size,offset:4*5}},v.length,s.Pc.buffer,undefined,undefined,ColorMode.Si,this.ZG,undefined,v.offset)}};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass("AMap.MaskLayer");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};e.prototype.fb=function(e,r){var t={strokeWeight:2,strokeOpacity:1,strokeColor:"rgb(0,0,0)"};var i=t.strokeWeight;var a=Util$7.color2RgbaArray(t.strokeColor);if(!a){return}a=a.slice(0,3);a.push(t.strokeOpacity);return{u_color:a,u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:i,u_offset:e.zx}};return e}(LayerRender);var Attribute=function(){function e(e,r,t,i,a,n){if(a===void 0){a=false}if(n===void 0){n=0}this.context=e;this.type=r;this.Me=t;this.location=i;this.normalize=a;this.s4=n}e.prototype.set=function(e){var r=this.context.gl;if(!e){this.current=undefined;r.disableVertexAttribArray(this.location);return}if(e.type!==this.type){console.error("error webglBuffer type,need "+this.type+", receive "+e.type+" ");return}if(!this.ke(e)){return}this.current=e;var t;r.enableVertexAttribArray(this.location);this.context.de.set(e.buffer);switch(this.type){case"float":case"int":t=1;break;case"vec2":t=2;break;case"vec3":t=3;break;case"vec4":t=4;break;default:t=1}var i;switch(this.Me){case"int8":i=r.BYTE;break;case"uint8":i=r.UNSIGNED_BYTE;break;case"int16":i=r.SHORT;break;case"uint16":i=r.UNSIGNED_SHORT;break;case"float32":i=r.FLOAT;break}assert(i,"invalid datatype "+this.Me);r.vertexAttribPointer(this.location,t,i,this.normalize,e.Re,e.offset);var a=this.context.getExtension("ANGLE_instanced_arrays");if(a){a.vertexAttribDivisorANGLE(this.location,0)}if(this.s4>0){if(a){a.vertexAttribDivisorANGLE(this.location,this.s4)}}};e.prototype.ke=function(e){return true};return e}();var Uniform=function(){function e(e,r,t){this.context=e;this.type=r;this.location=t;this.Re=0;this.offset=0;this.te=same;this.ze=e.gl}e.prototype.set=function(e){if(this.te(this.current,e)){return}if(e!==undefined){switch(this.type){case"bool":case"int":case"sampler2D":this.ze.uniform1i(this.location,e);break;case"sampler2D[]":this.ze.uniform1iv(this.location,e);break;case"float":this.ze.uniform1f(this.location,e);break;case"float[]":this.ze.uniform1fv(this.location,e);break;case"vec2":this.ze.uniform2f(this.location,e[0],e[1]);break;case"vec3":this.ze.uniform3f(this.location,e[0],e[1],e[2]);break;case"vec4":this.ze.uniform4f(this.location,e[0],e[1],e[2],e[3]);break;case"mat2":this.ze.uniformMatrix2fv(this.location,false,new Float32Array(e));break;case"mat3":this.ze.uniformMatrix3fv(this.location,false,new Float32Array(e));break;case"mat4":this.ze.uniformMatrix4fv(this.location,false,new Float32Array(e));break}this.current=e}};return e}();var Program=function(){function d(e,r,t,i,a,n){this.name=n;this.Ie=[];this.context=e;this.attributes={};this.Te={};var o=e.gl;var f=d.createProgram(o,r,t);this.$i=f;if(!this.$i){console.log("createProgram fail",this.name);this.je=false;return this}this.je=true;for(var s in i){if(i.hasOwnProperty(s)){var u=i[s].Oe;var l=i[s].Me;var v=o.getAttribLocation(this.$i,s);var c=i[s].normalize;var h=i[s].s4;this.attributes[s]=new Attribute(e,u,l,v,c,h)}}for(var s in a){if(a.hasOwnProperty(s)){var u=a[s];var v=o.getUniformLocation(this.$i,s);if(v){this.Te[s]=new Uniform(e,u,v)}if(u==="sampler2D"){this.Ie.push(s)}}}}d.createProgram=function(e,r,t){var i=d.Se(e,e.VERTEX_SHADER,r);var a=d.Se(e,e.FRAGMENT_SHADER,t);if(!i||!a){return null}var n=e.createProgram();if(!n){return null}e.attachShader(n,i);e.attachShader(n,a);e.bindAttribLocation(n,0,"a_Position");e.linkProgram(n);var o=e.getProgramParameter(n,e.LINK_STATUS);e.deleteShader(a);e.deleteShader(i);if(!o){var f=e.getProgramInfoLog(n);console.log("Failed to link program: "+f);e.deleteProgram(n);return null}return n};d.Se=function(e,r,t){var i=e.createShader(r);if(i===null){return null}e.shaderSource(i,t);e.compileShader(i);var a=e.getShaderParameter(i,e.COMPILE_STATUS);if(!a){var n=e.getShaderInfoLog(i);console.log("Failed to compile shader: "+n);e.deleteShader(i);return null}return i};d.prototype.Ce=function(e,r,t,i,a,n,o,f,s,u,l){if(a===void 0){a="TRIANGLES"}if(n===void 0){n=false}if(o===void 0){o=ColorMode.Mi}if(f===void 0){f=StencilMode.disable}if(s===void 0){s=CullFaceMode.we}if(u===void 0){u=0}if(!this.je){return}var v=this.context;var c=v.gl;v.ge.set(this);v.ne(n);v.ae(f);v.Qi(o);v.re(s);v.hB.set(false);this.Le(e);this.Ae(r);if(i){v.me.set(i);if(l){var h=v.getExtension("ANGLE_instanced_arrays");if(h){if(i.size===32){h.drawElementsInstancedANGLE(c[a],t,c.UNSIGNED_INT,i.size/8*u,l.divisor)}else{h.drawElementsInstancedANGLE(c[a],t,c.UNSIGNED_SHORT,i.size/8*u,l.divisor)}}}else{if(i.size===32){c.drawElements(c[a],t,c.UNSIGNED_INT,i.size/8*u)}else{c.drawElements(c[a],t,c.UNSIGNED_SHORT,i.size/8*u)}}}else{if(l){var h=v.getExtension("ANGLE_instanced_arrays");if(h){h.drawArraysInstancedANGLE(c[a],u,t,l.divisor)}}else{c.drawArrays(c[a],u,t)}}};d.prototype.Le=function(e){if(!this.je){return}for(var r in this.Te){var t=this.Te[r];if(t.type==="sampler2D"){var i=this.Ie.indexOf(r);if(i>=0){var a=e[r];if(a){this.context.bindTexture.setDirty();this.context.activeTexture.set(i);this.context.bindTexture.set(a.texture)}else{this.context.activeTexture.set(i);this.context.bindTexture.setDirty();this.context.bindTexture.set(null)}t.set(i)}}else if(t.type==="sampler2D[]"){var n=e[r];var o=n.De;var f=n.offset||0;var s=n.count||o.length;var u=[];for(var l=0;l<s;l++){var a=o[l];var i=f+l;if(a){this.context.activeTexture.set(i);this.context.bindTexture.set(a.texture);u.push(i)}else{this.context.activeTexture.set(f);var v=o[0];this.context.bindTexture.set(v.texture);u.push(f)}}t.set(u)}else{t.set(e[r])}}};d.prototype.Ae=function(e){if(!this.je){return}for(var r in this.attributes){if(this.attributes.hasOwnProperty(r)){this.attributes[r].set(e[r])}}};d.prototype.Pe=function(e,r,t,i,a,n,o,f){if(r===void 0){r=0}if(i===void 0){i="TRIANGLES"}if(a===void 0){a=false}if(n===void 0){n=ColorMode.Mi}if(o===void 0){o=StencilMode.disable}if(f===void 0){f=CullFaceMode.we}if(!this.je){return}var s=this.context;var u=s.gl;s.ge.set(this);s.ne(a);s.ae(o);s.Qi(n);s.re(f);if(t){s.me.set(t);u.drawElements(u[i],e,u.UNSIGNED_SHORT,t.size/8*r)}else{u.drawArrays(u[i],r,e)}};d.prototype.Ni=function(){if(!this.je){return}for(var e in this.attributes){if(this.attributes.hasOwnProperty(e)){this.attributes[e].set(null)}}};d.prototype.destroy=function(){if(!this.je){return}this.context.gl.deleteProgram(this.$i);this.$i=null};return d}();M["Program"]=Program;var rasterVertextString="precision highp float;\\n\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nattribute vec4 a_Position;\\n\\nvoid main(){\\n    v_TextureCoord=a_Position.zw;\\n    vec4 pos=vec4(a_Position.x+u_localDeltaCenter.x,a_Position.y+u_localDeltaCenter.y,0.,1.);\\n    gl_Position=u_mvpMatrix*pos;\\n    v_pos = gl_Position;\\n}\\n";var rasterFragmentString="precision highp float;\\n\\nuniform sampler2D u_texture;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\nuniform bool u_flterFlag;\\nuniform sampler2D u_colorscale; \\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nvoid main(void) {\\n    vec4 smpColor = texture2D(u_texture, v_TextureCoord);\\n    if(smpColor.a < 0.01){\\n        discard;\\n    }\\n    if(u_flterFlag){\\n       float grey = (smpColor.r*0.299) + (smpColor.g*0.587) + (smpColor.b*0.114);\\n       smpColor = texture2D(u_colorscale,vec2(grey,0.5));\\n    }\\n    gl_FragColor = smpColor;\\n    gl_FragColor.a *= u_opacity;\\n\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor = vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n";var rasterUniforms={u_skyColor:"vec3",u_viewHeight:"float",u_skyHeight:"float",u_texture:"sampler2D",u_opacity:"float",u_mvpMatrix:"mat4",u_localDeltaCenter:"vec2",u_flterFlag:"bool",u_colorscale:"sampler2D"};var rasterAttributes={a_Position:{Oe:"vec4",Me:"float32"}};var raster={uniforms:rasterUniforms,attributes:rasterAttributes,vertexSource:rasterVertextString,fragmentSource:rasterFragmentString};var labelsLayerVertexString="precision mediump float;\\nattribute highp vec2 a_vertex;\\nattribute vec2 a_texcoord;\\nattribute highp vec2 a_origin;\\nattribute lowp float a_type;\\nattribute lowp float a_texIndex;\\nattribute vec4 a_color;\\nattribute lowp vec2 a_zooms;\\nattribute lowp float a_visible;\\nattribute highp float a_height;\\nattribute lowp float a_angle;\\nattribute lowp float a_highflag;\\n\\nuniform lowp vec2 u_gl_size;\\nuniform highp mat4 u_matrix;\\nuniform float u_texsize[_TotalTextureLenTwice];\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform highp vec2 u_delta_center;\\nuniform highp vec2 u_offset;\\n// u_transform.x => rotate; u_transform.y => pinch; u_transform.z => scale\\nuniform lowp vec4 u_transform;\\nuniform lowp float u_skyHeight;\\nuniform lowp float u_fontSizeFactor;\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\nvarying float v_highflag;\\n\\nmat4 rotateMat4(mat4 a, float rad, vec3 axis) {\\n    float x = axis[0], y = axis[1], z = axis[2];\\n    float len = length(axis);\\n    float s, c, t;\\n    float a00, a01, a02, a03;\\n    float a10, a11, a12, a13;\\n    float a20, a21, a22, a23;\\n    float b00, b01, b02;\\n    float b10, b11, b12;\\n    float b20, b21, b22;\\n\\n    len = 1.0 / len;\\n    x *= len;\\n    y *= len;\\n    z *= len;\\n\\n    s = sin(rad);\\n    c = cos(rad);\\n    t = 1.0 - c;\\n\\n    a00 = a[0][0]; a01 = a[0][1]; a02 = a[0][2]; a03 = a[0][3];\\n    a10 = a[1][0]; a11 = a[1][1]; a12 = a[1][2]; a13 = a[1][3];\\n    a20 = a[2][0]; a21 = a[2][1]; a22 = a[2][2]; a23 = a[2][3];\\n\\n    // Construct the elements of the rotation matrix\\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\\n\\n    // Perform rotation-specific matrix multiplication\\n    mat4 outMatrix = mat4(\\n    a00 * b00 + a10 * b01 + a20 * b02,\\n    a00 * b10 + a10 * b11 + a20 * b12,\\n    a00 * b20 + a10 * b21 + a20 * b22,\\n    a[3][0],\\n\\n    a01 * b00 + a11 * b01 + a21 * b02,\\n    a01 * b10 + a11 * b11 + a21 * b12,\\n    a01 * b20 + a11 * b21 + a21 * b22,\\n    a[3][1],\\n\\n    a02 * b00 + a12 * b01 + a22 * b02,\\n    a02 * b10 + a12 * b11 + a22 * b12,\\n    a02 * b20 + a12 * b21 + a22 * b22,\\n    a[3][2],\\n\\n    a03 * b00 + a13 * b01 + a23 * b02,\\n    a03 * b10 + a13 * b11 + a23 * b12,\\n    a03 * b20 + a13 * b21 + a23 * b22,\\n    a[3][3]\\n    );\\n\\n\\n    //    outMatrix = mat4(1.0);\\n    return outMatrix;\\n}\\n\\nmat4 scaleMat4(mat4 a, vec3 v) {\\n    float x = v.x, y = v.y, z = v.z;\\n\\n    mat4 outMatrix = mat4(\\n        a[0][0] * x, a[1][0] * y, a[2][0] * z, a[3][0],\\n        a[0][1] * x, a[1][1] * y, a[2][1] * z, a[3][1],\\n        a[0][2] * x, a[1][2] * y, a[2][2] * z, a[3][2],\\n        a[0][3] * x, a[1][3] * y, a[2][3] * z, a[3][3]\\n    );\\n\\n    return outMatrix;\\n}\\n\\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx){\\n    vec2 texsize;\\n\\n    if (ndx==0){\\n        texsize=vec2(u_texsize[0], u_texsize[1]);\\n    } else if (ndx==1){\\n        texsize=vec2(u_texsize[2], u_texsize[3]);\\n    } \\n    // else if (ndx==2){\\n    //     texsize=vec2(u_texsize[4], u_texsize[5]);\\n    // } else if (ndx==3){\\n    //     texsize=vec2(u_texsize[6], u_texsize[7]);\\n    // } else if (ndx==4){\\n    //     texsize=vec2(u_texsize[8], u_texsize[9]);\\n    // } else if (ndx==5){\\n    //     texsize=vec2(u_texsize[10], u_texsize[11]);\\n    // }else if (ndx==6){\\n    //     texsize=vec2(u_texsize[12], u_texsize[13]);\\n    // }\\n\\n    return texsize;\\n}\\n\\nvoid main(){\\n    float pi = 3.141592653589793238462;\\n    v_highflag = a_highflag;\\n\\nif (a_visible!=0. && u_zoom>=a_zooms.x && u_zoom<=a_zooms.y){\\n        // 绘制背景 || border\\n        if (a_type==6. || a_type==8.){\\n            vec4 cur_position=u_matrix*vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n            gl_Position=cur_position/cur_position.w+vec4(a_vertex.x/u_gl_size.x*2.*u_fontSizeFactor, -a_vertex.y/u_gl_size.y*2.*u_fontSizeFactor, 0, 0);\\n            v_type=a_type;\\n            v_pos = gl_Position.xy;\\n        }else if(a_type==1.){\\n            // 绘制贴地效果文字\\n            gl_Position = u_matrix * vec4(a_vertex.xy*u_fontSizeFactor, 0, 1);\\n        } else {\\n            // 绘制 billborad 效果\\n            mat4 originMatirx = mat4(1.0);\\n            mat4 scaleMatrix = scaleMat4(originMatirx, vec3(u_transform.z));\\n            mat4 rotateMatrix = rotateMat4(originMatirx, a_angle + u_transform.x, vec3(0, 0, 1));\\n            vec4 trans_position = rotateMatrix * scaleMatrix * vec4(a_vertex.x*u_fontSizeFactor, -a_vertex.y*u_fontSizeFactor, 0, 1);\\n\\n            vec4 trans_normalize_position = vec4(trans_position.xy/u_gl_size.xy*2., 0, 1);\\n\\n            vec4 cur_position = u_matrix * vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n\\n            // 修复文字超出 z 轴范围没有裁剪的问题，现象就是在地图最大级别、pitch 最大的时候出现文字（不应该在地图中的）悬浮在高空中。\\n            gl_Position=vec4(cur_position.xy/cur_position.w+trans_normalize_position.xy/trans_normalize_position.w,cur_position.z/cur_position.w,1);\\n        }\\n\\n        v_texcoord=a_texcoord/getSizeFromArray(u_texsize, int(a_texIndex));\\n        v_texIndex=a_texIndex;\\n        v_type=floor(a_type + 0.1);\\n        v_pos = gl_Position.xy;\\n    }else {\\n       v_type= -1.0; \\n    }\\n}\\n";var labelsLayerFragmentString="precision mediump float;\\nuniform sampler2D u_texture[_TotalTextureLen];\\nuniform vec4 u_color;\\nuniform vec4 u_borderColor;\\nuniform vec4 u_strokeColor;\\nuniform vec4 u_backgroundColor;\\nuniform float u_borderBuffer;\\nuniform float u_buffer;\\nuniform float u_gamma;\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform lowp float u_opacity;\\nuniform lowp float u_skyHeight;\\nuniform lowp vec3 u_hlColorFactor;\\nuniform vec4 u_highlightFillColor;\\nuniform vec4 u_highlightStrokeColor;\\n\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\nvarying float v_highflag;\\n\\nfloat skyOpacity() {\\n    if (v_pos.y > u_skyHeight){\\n        return 1.0 - smoothstep(u_skyHeight, u_skyHeight + (1.0 - u_skyHeight) / 6.0, v_pos.y);\\n    }\\n    return 1.0;\\n}\\n\\n/*由于片元着色器的数据index必须是常量，只能如此取出相应的值*/\\n\\nvoid main() {\\n    \\n    // texture5\\n    int texIdx = int(floor(v_texIndex + 0.1));\\n\\n    vec4 distColor;\\n     __SmpColorLoop__\\n    if (v_type == 6.0){\\n        // bg\\n        gl_FragColor = vec4(u_backgroundColor.rgb, u_backgroundColor.a * u_opacity);\\n        gl_FragColor.a *= skyOpacity();\\n    } else if (v_type == 8.0){\\n        // textborder\\n        gl_FragColor = vec4(u_borderColor.rgb, u_borderColor.a * u_opacity);\\n        // gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(v_highflag,0.1));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(v_highflag,0.1));\\n        gl_FragColor.a *= skyOpacity();\\n    } else if(v_type == 0.0){\\n        // icon\\n        // gl_FragColor = vec4(0,0,1.0,0.2);\\n        // return;\\n        float opacity = u_opacity * distColor.a;\\n        if (opacity < 0.03){\\n            discard;\\n        }\\n        gl_FragColor = vec4(distColor.rgb, opacity);\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(v_highflag,0.1));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(v_highflag,0.1));\\n        // gl_FragColor = vec4(distColor.rgb, u_opacity * distColor.a);\\n        gl_FragColor.a *= skyOpacity();\\n    }else if(v_type==2.0){\\n        // text\\n        float dist;\\n        float alpha;\\n\\n        // 后端加载纹理 rgba => [[0, 255], [0, 255], [0, 255], [0, 1]]\\n        // 前端加载纹理 rgba => [[0, 0, 0, [0, 1]]\\n        if (distColor.r != 0.){\\n            dist = distColor.r;\\n        } else if (distColor.a == 1.0){\\n            dist = 0.0;\\n        } else {\\n            dist = distColor.a;\\n        }\\n\\n        //    gl_FragColor = vec4(dist, dist, dist, 1);\\n        //    return;\\n        //    dist = 255.0;\\n       vec4 color = mix(u_color,u_highlightFillColor,step(0.1,v_highflag));\\n       vec4 stokeColor =mix(u_strokeColor,u_highlightStrokeColor,step(0.1,v_highflag));\\n        if (u_borderBuffer == 0.0){\\n            alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n            gl_FragColor = vec4(color.rgb, alpha * color.a * u_opacity);\\n        } else {\\n            if (dist <= u_buffer - u_gamma){\\n                // border 与外界交界\\n                alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\\n                float opacity = alpha * stokeColor.a * u_opacity;\\n                if (opacity == 0.0){\\n                    // gl_FragColor = vec4(1.0,0,0,0.1);\\n                    // return;\\n                    discard;\\n                }\\n                gl_FragColor = vec4(stokeColor.rgb, opacity);\\n                // gl_FragColor = vec4(0,0,1.0,0.2);\\n            } else if (dist < u_buffer){\\n                // 文字与 border 交界\\n                alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n                gl_FragColor = vec4(alpha * color.rgb + (1.0 - alpha) * stokeColor.rgb, 1.0 * color.a *\\n                alpha * u_opacity + (1.0 - alpha) * stokeColor.a * u_opacity);\\n            } else {\\n                // 文字\\n                alpha = 1.0;\\n                gl_FragColor = vec4(color.rgb, alpha * color.a * u_opacity);\\n            }\\n        }\\n        // gl_FragColor.r*= 1.0;\\n        // gl_FragColor.g*=1.0;\\n        // gl_FragColor.b*= 1.0;\\n        // gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(0.1,v_highflag));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(0.1,v_highflag));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(0.1,v_highflag));\\n\\n        // if(v_highflag>0.1){\\n        //     gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        //     gl_FragColor.g*=u_hlColorFactor.g;\\n        //     gl_FragColor.b*=u_hlColorFactor.b;\\n        // } \\n        gl_FragColor.a *= skyOpacity();\\n\\n    }else {\\n        discard;\\n    }\\n   \\n}\\n";var labelsLayerUniforms={u_gl_size:"vec2",u_matrix:"mat4",u_texsize:"float[]",u_texture:"sampler2D[]",u_event:"int",u_zoom:"float",u_color:"vec4",u_borderColor:"vec4",u_strokeColor:"vec4",u_backgroundColor:"vec4",u_borderBuffer:"float",u_buffer:"float",u_gamma:"float",u_opacity:"float",u_delta_center:"vec2",u_offset:"vec2",u_transform:"vec4",u_skyHeight:"float",u_fontSizeFactor:"float",u_hlColorFactor:"vec3",u_highlightFillColor:"vec4",u_highlightStrokeColor:"vec4"};var labelsLayerAttributes={a_vertex:{Oe:"vec2",Me:"float32"},a_texcoord:{Oe:"vec2",Me:"float32"},a_origin:{Oe:"vec2",Me:"float32"},a_zooms:{Oe:"vec2",Me:"float32"},a_height:{Oe:"float",Me:"float32"},a_angle:{Oe:"float",Me:"float32"},a_type:{Oe:"float",Me:"float32"},a_texIndex:{Oe:"float",Me:"float32"},a_visible:{Oe:"float",Me:"uint8"},a_highflag:{Oe:"float",Me:"float32"}};var labelsLayer={uniforms:labelsLayerUniforms,attributes:labelsLayerAttributes,vertexSource:labelsLayerVertexString,fragmentSource:labelsLayerFragmentString};var combineTextVertexString="precision highp float;\\n\\nattribute vec2 a_targetTexturePos;\\nattribute vec2 a_sourceTexturePos;\\n\\nuniform vec2 u_targetTextureSize;\\nuniform vec2 u_sourceTextureSize;\\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n  v_textureCoord = a_sourceTexturePos / u_sourceTextureSize;\\n  // v_textureCoord = vec2(a_sourceTexturePos.x / u_sourceTextureSize.x, a_sourceTexturePos.y / u_sourceTextureSize.y);\\n\\n  vec2 pos = (a_targetTexturePos / u_targetTextureSize) *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = vec2(a_targetTexturePos.x / u_targetTextureSize.x, a_targetTexturePos.y / u_targetTextureSize.y);\\n  // pos.x = (pos.x - 0.5)*2.0;\\n  // pos.y = (pos.y - 0.5)*2.0;\\n\\n  gl_Position = vec4(pos, 0, 1.0);\\n  // gl_Position = vec4(a_targetTexturePos,0,1.0);\\n}";var combineTextFragmentString="precision highp float;\\n\\nuniform sampler2D u_sourceTexture; \\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_sourceTexture, v_textureCoord);\\n  // gl_FragColor = vec4(1,0, 0, 0 ,1.0);\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n}";var combineTextUniforms={u_sourceTexture:"sampler2D",u_sourceTextureSize:"vec2",u_targetTextureSize:"vec2"};var combineTextAttributes={a_targetTexturePos:{Oe:"vec2",Me:"uint16"},a_sourceTexturePos:{Oe:"vec2",Me:"uint16"}};var combineText={uniforms:combineTextUniforms,attributes:combineTextAttributes,vertexSource:combineTextVertexString,fragmentSource:combineTextFragmentString};var debugImageVertexString="precision highp float;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_coord;\\n\\nvarying vec2 v_coord;\\n\\nvoid main() {\\n  v_coord = vec2(a_coord.x,1.0 - a_coord.y) ;\\n  vec2 pos = a_pos *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = a_pos -vec2(,1.0);\\n  gl_Position = vec4(pos,0,1.0);\\n}";var debugImageFragmentString="precision highp float;\\n\\nvarying vec2 v_coord;\\n\\nuniform sampler2D u_texture;\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_texture, v_coord);\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n";var debugImageUniforms={u_texture:"sampler2D"};var debugImageAttributes={a_pos:{Oe:"vec2",Me:"uint16"},a_coord:{Oe:"vec2",Me:"uint16"}};var debugImage={uniforms:debugImageUniforms,attributes:debugImageAttributes,vertexSource:debugImageVertexString,fragmentSource:debugImageFragmentString};var circleFragmentString="\\n\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform  float u_radius;\\nuniform  vec2 u_range;\\nuniform highp vec4 u_color;\\nuniform highp vec4 u_borderColor;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nvarying vec4 v_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\\n  float flag = step(1.0,offset);\\n  float borderFlag = 1.- smoothstep(1.0 -1./u_radius, 1.0, offset);\\n  if(flag > 0.0){\\n    discard;\\n  }\\n  float opacity_t = 1.-smoothstep(u_range[1] -1./u_radius, u_range[1], offset);\\n  gl_FragColor = mix(u_borderColor, u_color, opacity_t);\\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight)*borderFlag;\\n}";var circleVertextString="precision highp float;\\n#define GLSLIFY 1\\nuniform vec2 u_pos;\\nuniform mat4 u_matrix;\\nuniform float u_radius;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(u_pos.x+u_localDeltaCenter.x+u_offset.x,u_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position=u_matrix * vec4(pos,0,1);\\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n}\\n";var circleAttrVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform float u_radius;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position=u_matrix * vec4(pos,0,1);\\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n}\\n";var circleUniforms={u_pos:"vec2",u_color:"vec4",u_borderColor:"vec4",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_radius:"float",u_range:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"};var circleAttributes={};var circle={uniforms:circleUniforms,attributes:circleAttributes,vertexSource:circleVertextString,fragmentSource:circleFragmentString};var circleAttrUniforms={u_color:"vec4",u_borderColor:"vec4",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_radius:"float",u_range:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"};var circleAttrAttributes={a_pos:{Oe:"vec2",Me:"float32"}};var circleAttr={uniforms:circleAttrUniforms,attributes:circleAttrAttributes,vertexSource:circleAttrVertextString,fragmentSource:circleFragmentString};var pointFragmentString="\\n\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform float u_skyHeight;\\nuniform float u_viewHeight; // 地图容器高度，单位像素\\nuniform bool u_pick;\\n\\nvarying vec4 v_pos;\\nvarying float v_radius;\\nvarying float v_visible;\\nvarying float v_borderWidth;\\nvarying vec4 v_color;\\nvarying vec4 v_borderColor;\\n// varying vec4 v_pickColor;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\\n  float flag = step(1.0,offset);\\n  float borderFlag = 1.- smoothstep(1.0 - 1. / v_radius, 1.0, offset);\\n  if(flag > 0.0){\\n    discard;\\n  }\\n  float range = v_radius / (v_radius + v_borderWidth);\\n  float opacity_t = 1. - smoothstep(range - 1. / v_radius, range, offset);\\n  gl_FragColor = mix(v_borderColor, v_color, opacity_t);\\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight) * borderFlag * v_visible;\\n\\n  // if(u_pick) {\\n  //   gl_FragColor = vec4(v_pickColor.xyz / 256.0, 1);\\n  // }\\n}";var pointVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute float a_radius;\\nattribute float a_borderWidth;\\nattribute float a_visible;\\nattribute vec4 a_color;\\nattribute vec4 a_borderColor;\\nattribute vec4 a_pickColor;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\n\\nvarying vec4 v_pos;\\nvarying float v_radius;\\nvarying float v_visible;\\nvarying float v_borderWidth;\\nvarying vec4 v_color;\\nvarying vec4 v_borderColor;\\nvarying vec4 v_pickColor;\\n\\nvoid main() {\\n    vec2 pos = vec2(a_pos.x + u_localDeltaCenter.x + u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos,0,1);\\n    gl_PointSize = (a_radius + a_borderWidth) * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n    v_radius = a_radius;\\n    v_borderWidth = a_borderWidth;\\n    v_color = a_color;\\n    v_borderColor = a_borderColor;\\n    v_visible = a_visible;\\n    v_pickColor = a_pickColor;\\n}\\n";var pointUniforms={u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"};var pointAttributes={a_pos:{Oe:"vec2",Me:"float32"},a_radius:{Oe:"float",Me:"float32"},a_borderWidth:{Oe:"float",Me:"float32"},a_color:{Oe:"vec4",Me:"float32"},a_borderColor:{Oe:"vec4",Me:"float32"},a_visible:{Oe:"float",Me:"float32"}};var point={uniforms:pointUniforms,attributes:pointAttributes,vertexSource:pointVertextString,fragmentSource:pointFragmentString};var lineFragmentString$2="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_color;\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\n\\nvarying highp float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // vec2 icon_offset = vec2(80.0, 0.0);\\n    // vec2 icon_size = vec2(40.0, 40.0);\\n    // vec2 icon_offset = vec2(0.0, 0.0);\\n    // vec2 icon_size = vec2(44.0, 32.0);\\n    // vec2 texture_size = vec2(512.0, 2048.0);\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n\\n    gl_FragColor = u_color;\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var lineVertextString$2="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_width = width;\\n    v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}";var linePatternFragmentString="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D u_texture;\\nuniform  highp vec2 u_iconsize;\\nuniform  mediump vec3 u_dir_color;\\nuniform  bool u_custom_img_flag;\\nuniform  highp float u_width;\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\n\\nvarying highp float v_distance;\\n// varying float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nuniform float u_timer;\\nuniform float u_speed;\\nuniform float u_size_scale;\\nuniform bool u_animate;\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // if(abs(v_flag)>=1.0){\\n    //     discard;\\n    // }\\n    vec2 icon_size = u_iconsize * vec2(u_width/u_iconsize.y, 1.0 );\\n    float offset = 0.0;\\n    float ani = u_animate ? u_timer / 1000.0 : 0.0;\\n    float text_offset_x = mod(v_distance - ani * u_speed, (icon_size.x*4.0*u_size_scale)*u_meter_per_pixel_optimal/u_meter_per_pixel);\\n    // float text_offset_x = mod(v_distance, 120.0);\\n\\n    if(text_offset_x<=0.0){\\n        discard;\\n    }\\n    if(text_offset_x>=icon_size.x){\\n        discard;\\n    }\\n\\n    text_offset_x = 1.0 - clamp(0.0,1.0,text_offset_x/icon_size.x);\\n\\n    // float  text_offset_y  = (v_flag+1.0)/2.0  ;\\n    float  text_offset_y  = v_flag  ;\\n\\n    if(u_custom_img_flag){\\n        gl_FragColor = texture2D(u_texture, vec2(text_offset_y, text_offset_x));\\n    }else{\\n        vec4 color = texture2D(u_texture, vec2(text_offset_y,text_offset_x));\\n        if(color.a>0.0){\\n            gl_FragColor = vec4(u_dir_color,1.0);\\n        }\\n    }\\n   gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var linePatternVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  highp float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying highp float v_distance;\\n// varying mediump float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    // sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    // v_width = width;\\n    // v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}";var lineGradinetFragmentString="precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\nuniform  highp float u_total_distance;\\n\\nvarying highp float v_distance;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n    float texture_x = v_distance/u_total_distance;\\n    gl_FragColor = texture2D(u_texture, vec2(texture_x,0.5));\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n";var lineGradientVertextString="precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\n\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n\\n    v_distance = a_distance + (cosValue * width *0.5)*u_meter_per_pixel;\\n    // v_distance = a_distance;\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_pos = gl_Position;\\n}";var lineUniforms$1={u_width:"float",u_dashType:"int",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec3",u_localDeltaCenter:"vec2",u_skyHeight:"float",u_viewHeight:"float"};var lineAttributes$1={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}};var linePatternUniforms={u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_meter_per_pixel_optimal:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_iconsize:"vec2",u_dir_color:"vec3",u_custom_img_flag:"bool",u_skyHeight:"float",u_viewHeight:"float",u_timer:"float",u_animate:"bool",u_speed:"float",u_size_scale:"float"};var linePatternAttributes={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}};var lineGradientUniforms={u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_total_distance:"float",u_skyHeight:"float",u_viewHeight:"float"};var polyline={uniforms:lineUniforms$1,attributes:lineAttributes$1,vertexSource:lineVertextString$2,fragmentSource:lineFragmentString$2};var polylinePattern={uniforms:linePatternUniforms,attributes:linePatternAttributes,vertexSource:linePatternVertextString,fragmentSource:linePatternFragmentString};var polylineGradient={uniforms:lineGradientUniforms,attributes:linePatternAttributes,vertexSource:lineGradientVertextString,fragmentSource:lineGradinetFragmentString};var maskFragmentString="precision highp float;\\n// uniform float u_opacity;\\nuniform vec4 u_color;\\n\\n// varying vec4 v_color;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = vec4(0, 0, 0, 0);\\n}";var maskVertextString="precision highp float;\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_deltaCenter;\\nattribute vec2 a_pos;\\n\\nvoid main() {\\n    gl_Position = u_mvpMatrix * vec4(a_pos.xy+u_deltaCenter, 0, 1);\\n}\\n";var maskUniforms={u_mvpMatrix:"mat4",u_color:"vec4",u_deltaCenter:"vec2"};var maskAttributes={a_pos:{Me:"float32",Oe:"vec2"}};var mask={uniforms:maskUniforms,attributes:maskAttributes,vertexSource:maskVertextString,fragmentSource:maskFragmentString};var programs={fill:fill,fillPattern:fillPattern,sky:sky,skyPattern:skyPattern,mask:mask,fillExtrusion:fillExt,fillExtrusionPattern:fillExtPattern,raster:raster,labelsLayer:labelsLayer,fillOutline:fillOutline,line:line,combineText:combineText,debugImage:debugImage,circle:circle,circleAttr:circleAttr,point:point,polyline:polyline,"polyline-pattern":polylinePattern,"polyline-gradient":polylineGradient};var ProgramManager=function(){function e(e){this.context=e;this.context=e;this.cache={}}e.prototype.Un=function(){return this.Bn("circle")};e.prototype.X2=function(){return this.Bn("circleAttr")};e.prototype.Z2=function(){return this.Bn("point")};e.prototype.rS=function(){return this.Bn("sky")};e.prototype.EB=function(){return this.Bn("skyPattern")};e.prototype.aS=function(){return this.Bn("mask")};e.prototype.Wn=function(){return this.Bn("fill")};e.prototype.aH=function(){return this.Bn("fillPattern")};e.prototype.k_=function(){return this.Bn("fillExtrusion")};e.prototype.sH=function(){return this.Bn("fillExtrusionPattern")};e.prototype.Gn=function(){return this.Bn("raster")};e.prototype.Zn=function(){var e=this.context;var r=e.gl;var t="labelsLayer";if(!this.cache[t]){var i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);var a=Math.min(i,16,TextureMaxLength);var n=programs[t];var o=[];for(var f=0;f<a;f++){o.push((f>0?"else ":" ")+"if(texIdx=="+f+"){ distColor = texture2D(u_texture["+f+"], v_texcoord); }")}n.vertexSource=n.vertexSource.replace(/_TotalTextureLenTwice/g,(a*2).toString()).replace(/_TotalTextureLen/g,a.toString());n.fragmentSource=n.fragmentSource.replace(/_TotalTextureLen/g,a.toString()).replace(/__SmpColorLoop__/g,o.join("\\n"))}return this.Bn(t)};e.prototype.Yn=function(){return this.Bn("fillOutline")};e.prototype.Vn=function(){return this.Bn("line")};e.prototype.Xn=function(){return this.Bn("polyline")};e.prototype.M_=function(){return this.Bn("polyline-pattern")};e.prototype.sS=function(){return this.Bn("polyline-gradient")};e.prototype.Hn=function(){return this.Bn("combineText")};e.prototype.Jn=function(){return this.Bn("debugImage")};e.prototype.destroy=function(){for(var e in this.cache){if(this.cache.hasOwnProperty(e)){var r=this.cache[e];r.destroy();delete this.cache[e]}}};e.prototype.Bn=function(e){if(this.cache[e]){return this.cache[e]}var r=programs[e];if(r){this.cache[e]=new Program(this.context,r.vertexSource,r.fragmentSource,r.attributes,r.uniforms,e)}return this.cache[e]};return e}();var Util$8=AMap["Util"];var LandRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.CLASS_NAME="AMap.Land";e.e_=[0,0,0,0];e.Qn={color:[.9882352941176471,.9764705882352941,.9490196078431372,1]};return e}e.prototype.renderFrame=function(e,r,t,i,a){return};return e}(LayerRender);var MapRenderBase=function(){function e(e){this.map=e}e.prototype.lS=function(e,r){var t=this.map.fS();var i=t.uS();var a={};for(var n in i){if(i.hasOwnProperty(n)){var o=i[n];var f=r.uo.getData(o.co(),r.viewState,this.context||null);a[n]=f}}t.cS(e,r,a)};return e}();var Support$7=M["Support"];var DomUtil$1=AMap["DomUtil"];var utils$1=AMap["Util"];var scale$4=Support$7.scale;var MapRender=function(t){__extends(e,t);function e(e){var r=t.call(this,e)||this;r.map=e;r.gl=e["getGL"]();r.io=r.gl.canvas;r.gl.getExtension("OES_standard_derivatives");r.gl.getExtension("OES_element_index_uint");r.context=new Context(r.gl);r.oo=new ProgramManager(r.context);r.z_=e.z_;r.R_=e.R_;r.no=new LandRender;r.u4();r.P2=r.context.createTexture({height:4096,width:4096,data:null});r.P2.bind(r.context.gl.CLAMP_TO_EDGE,r.context.gl.LINEAR,r.context.gl.LINEAR);return r}e.prototype.getMapState=function(){return this.map&&this.map.getMapState()||{}};e.prototype.l4=function(){return this.map};e.prototype.to=function(){if(this.map){this.map.setNeedUpdate(true)}};e.prototype.renderFrame=function(e){if(e.size[0]*scale$4!==this.io.width){this.io.width=e.size[0]*scale$4;this.io.style.width=e.size[0]+"px"}if(e.size[1]*scale$4!==this.io.height){this.io.height=e.size[1]*scale$4;this.io.style.height=e.size[1]+"px"}this.context.be.set([0,0,this.io.width,this.io.height]);this.context.clear({stencil:true,color:true,depth:true});var r=e.viewState.zoom;var t=e.layers.sort(function(e,r){return e.getLayerConfig().zIndex-r.getLayerConfig().zIndex});this.no.renderFrame(this.oo,this.map.options.backgroundColor,e,{},this);this.map.so.update(this.oo);var i=this.map.TL();if(!i&&this.map.bZ.MZ.gY.Kv){this.P2.update(this.map.bZ.MZ.gY.mY);this.map.bZ.MZ.gY.Kv=false}if(this.map.bZ.MZ.drawMode!=="fast"&&(this.map.bZ.dynamic.get("firstLabelDataAllLoaded")||this.map.bZ.dynamic.get("firstLabelLayerDataAllLoaded"))){this.lS(this.oo,e)}else if(this.map.bZ.MZ.drawMode==="fast"&&(this.map.bZ.dynamic.get("firstLabelDataAllLoaded")||this.map.bZ.dynamic.get("firstLabelLayerDataAllLoaded"))&&!i){this.lS(this.oo,e)}var a;var n=true;for(var o=0,f=t.length;o<f;o+=1){a=t[o];var s=a.getState();var u=a.getLayerConfig().zooms;var l=s.opacity>0;if(a.CLASS_NAME==="AMap.IndoorMap"){l=s.opacity>=0}if(s.visible&&l&&utils$1.dS(r,u)||a.CLASS_NAME==="AMap.CustomLayer"){var v=a.getRender();if(v){if(!a.lo()){n=false}var c=e.uo.getData(t[o].co(),e.viewState,this.context);if(c){a.beforeRender();v.renderFrame(this.oo,c,e,s,this,t[o],c.fo);a.afterRender()}}}}if(!this.map.complete&&n){this.map.emit("complete");this.map.complete=true}if(this.map["getView"]()&&!this.map["getView"]().h_()){this.map.getView().aD();this.map.emit("viewchange",{zoom:e.viewState.zoom,center:e.viewState.center,pitch:e.viewState.pitch,rotation:e.viewState.rotation})}if(!this.map.bZ){return}var h=this.map.bZ.dynamic.get("stamp");var d=Date.now();this.map.bZ.dynamic.set("stamp",d);var _=Math.floor(1e3/(d-h));this.map.bZ.MZ.tY.update();if(_>=50){this.map.bZ.MZ.tY.RZ("default")}if(this.map.bZ.MZ.tY.BZ("default")>0||this.map.bZ.MZ.gY.Kv){this.to()}};e.prototype.destroy=function(){if(this.oo&&this.oo["destroy"]){this.oo.destroy()}if(this.R_&&this.R_["destroy"]){this.R_.destroy();delete this.R_}if(this.context){delete this.context}};e.prototype.u4=function(){var e=this;this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Hn()},UZ:function(){return Boolean(e.oo.cache["combineText"])},group:"default",FZ:function(){return 1}});if(this.map["getViewMode_"]()==="3D"){this.map.bZ.MZ.tY.add({NZ:function(){e.oo.rS()},UZ:function(){return Boolean(e.oo.cache["sky"])},group:"default",FZ:function(){return 1}})}if(!this.map.yS()){this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Yn()},UZ:function(){return Boolean(e.oo.cache["fillOutline"])},group:"default",FZ:function(){return 1}})}this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Wn()},UZ:function(){return Boolean(e.oo.cache["fill"])},group:"default",FZ:function(){return 1}});this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Vn()},UZ:function(){return Boolean(e.oo.cache["line"])},group:"default",FZ:function(){return 1}});this.map.setNeedUpdate(true)};return e}(MapRenderBase);M.v4=MapRender;M.WebGLRender=MapRender;M["LayerRenderManager"]["addLayerRender"]("AMap.NebulaLayer",NebulaRender);M["LayerRenderManager"]["addLayerRender"]("AMap.Buildings",BuildingRender);M["LayerRenderManager"]["addLayerRender"]("AMap.Inner.LabelsLayer",TileLabelsLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.LabelsLayer",LabelsLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.ImageLayer",ImageRender);M["LayerRenderManager"]["addLayerRender"]("AMap.CanvasLayer",ImageRender);M["LayerRenderManager"]["addLayerRender"]("AMap.RasterLayer",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Flexible",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.RoadNet",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Satellite",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Traffic",VectorTrafficRender);M["LayerRenderManager"]["addLayerRender"]("AMap.WMTSLayer",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.WMS",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.WMTS",RasterLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.CustomLayer",CustomRender);M["LayerRenderManager"]["addLayerRender"]("AMap.GLCustomLayer",GLCustomRender);M["LayerRenderManager"]["addLayerRender"]("AMap.VTLayer",VTRender);M["LayerRenderManager"]["addLayerRender"]("AMap.SkyLayer",SkyLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.MaskLayer",MaskLayerRender);M["LayerRenderManager"]["addLayerRender"]("AMap.MapboxLayer",MapboxRender);M["LayerRenderManager"]["addLayerRender"]("AMap.VectorLayer",OverlayRender);M["LayerRenderManager"]["addLayerRender"]("AMap.VectorSvgLayer",OverlayRender);M["LayerRenderManager"]["addLayerRender"]("AMap.IndoorMap",IndoorRender);M["LayerRenderManager"]["addLayerRender"]("AMap.DistrictLayer",DistrictRender);M["LayerRenderManager"]["addLayerRender"]("AMap.DistrictLayer.World",DistrictRender);M["LayerRenderManager"]["addLayerRender"]("AMap.DistrictLayer.Country",DistrictRender);M["LayerRenderManager"]["addLayerRender"]("AMap.DistrictLayer.Province",DistrictRender);M["LayerRenderManager"]["addLayerRender"]("AMap.MapboxVectorTileLayer",MapboxVTRender)})(); ');
_jsload_('AMap.3DTilesLayer.js',"!function(AMap){\"use strict\";function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var getPrototypeOf=createCommonjsModule(function(module){function _getPrototypeOf(o){module.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}module.exports=_getPrototypeOf});function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=getPrototypeOf(object);if(object===null)break}return object}var superPropBase=_superPropBase;var get=createCommonjsModule(function(module){function _get(target,property,receiver){if(typeof Reflect!==\"undefined\"&&Reflect.get){module.exports=_get=Reflect.get}else{module.exports=_get=function _get(target,property,receiver){var base=superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}module.exports=_get});var runtime_1=createCommonjsModule(function(module){var runtime=function(exports){var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined$1;var $Symbol=typeof Symbol===\"function\"?Symbol:{};var iteratorSymbol=$Symbol.iterator||\"@@iterator\";var asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\";var toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});return obj[key]}try{define({},\"\")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}exports.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)}}catch(err){return{type:\"throw\",arg:err}}}var GenStateSuspendedStart=\"suspendedStart\";var GenStateSuspendedYield=\"suspendedYield\";var GenStateExecuting=\"executing\";var GenStateCompleted=\"completed\";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\");function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg)})})}exports.isGeneratorFunction=function(genFun){var ctor=typeof genFun===\"function\"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)===\"GeneratorFunction\":false};exports.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;define(genFun,toStringTagSymbol,\"GeneratorFunction\")}genFun.prototype=Object.create(Gp);return genFun};exports.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type===\"throw\"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value===\"object\"&&hasOwn.call(value,\"__await\")){return PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject)},function(err){invoke(\"throw\",err,resolve,reject)})}return PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result)},function(error){return invoke(\"throw\",error,resolve,reject)})}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};exports.AsyncIterator=AsyncIterator;exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){if(PromiseImpl===void 0)PromiseImpl=Promise;var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error(\"Generator is already running\")}if(state===GenStateCompleted){if(method===\"throw\"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method===\"next\"){context.sent=context._sent=context.arg}else if(context.method===\"throw\"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method===\"return\"){context.abrupt(\"return\",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type===\"normal\"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type===\"throw\"){state=GenStateCompleted;context.method=\"throw\";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined$1){context.delegate=null;if(context.method===\"throw\"){if(delegate.iterator[\"return\"]){context.method=\"return\";context.arg=undefined$1;maybeInvokeDelegate(delegate,context);if(context.method===\"throw\"){return ContinueSentinel}}context.method=\"throw\";context.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type===\"throw\"){context.method=\"throw\";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method=\"throw\";context.arg=new TypeError(\"iterator result is not an object\");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!==\"return\"){context.method=\"next\";context.arg=undefined$1}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);define(Gp,toStringTagSymbol,\"Generator\");Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return\"[object Generator]\"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}exports.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next===\"function\"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined$1;next.done=true;return next};return next.next=next}}return{next:doneResult}}exports.values=values;function doneResult(){return{value:undefined$1,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined$1;this.done=false;this.delegate=null;this.method=\"next\";this.arg=undefined$1;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)===\"t\"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined$1}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type===\"throw\"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type=\"throw\";record.arg=exception;context.next=loc;if(caught){context.method=\"next\";context.arg=undefined$1}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc===\"root\"){return handle(\"end\")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\");var hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error(\"try statement without catch or finally\")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type===\"break\"||type===\"continue\")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method=\"next\";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type===\"throw\"){throw record.arg}if(record.type===\"break\"||record.type===\"continue\"){this.next=record.arg}else if(record.type===\"return\"){this.rval=this.arg=record.arg;this.method=\"return\";this.next=\"end\"}else if(record.type===\"normal\"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type===\"throw\"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error(\"illegal catch attempt\")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method===\"next\"){this.arg=undefined$1}return ContinueSentinel}};return exports}(module.exports);try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function(\"r\",\"regeneratorRuntime = r\")(runtime)}});var regenerator=runtime_1;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(undefined)})}}var asyncToGenerator=_asyncToGenerator;var _typeof_1=createCommonjsModule(function(module){function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){module.exports=_typeof=function _typeof(obj){return typeof obj}}else{module.exports=_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}module.exports=_typeof});function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var arrayLikeToArray=_arrayLikeToArray;function _arrayWithoutHoles(arr){if(Array.isArray(arr))return arrayLikeToArray(arr)}var arrayWithoutHoles=_arrayWithoutHoles;function _iterableToArray(iter){if(typeof Symbol!==\"undefined\"&&Symbol.iterator in Object(iter))return Array.from(iter)}var iterableToArray=_iterableToArray;function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return arrayLikeToArray(o,minLen)}var unsupportedIterableToArray=_unsupportedIterableToArray;function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var nonIterableSpread=_nonIterableSpread;function _toConsumableArray(arr){return arrayWithoutHoles(arr)||iterableToArray(arr)||unsupportedIterableToArray(arr)||nonIterableSpread()}var toConsumableArray=_toConsumableArray;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}var classCallCheck=_classCallCheck;function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var createClass=_createClass;var setPrototypeOf=createCommonjsModule(function(module){function _setPrototypeOf(o,p){module.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}module.exports=_setPrototypeOf});function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)setPrototypeOf(subClass,superClass)}var inherits=_inherits;function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}var assertThisInitialized=_assertThisInitialized;function _possibleConstructorReturn(self,call){if(call&&(_typeof_1(call)===\"object\"||typeof call===\"function\")){return call}return assertThisInitialized(self)}var possibleConstructorReturn=_possibleConstructorReturn;function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var TilesLayer=function(_AMap$Event){inherits(TilesLayer,_AMap$Event);var _super=_createSuper(TilesLayer);function TilesLayer(opts){var _this;classCallCheck(this,TilesLayer);_this=_super.call(this);opts=opts||{};_this._map=opts.map;_this._url=opts.url;_this.mapZoom=_this._map.getZoom();_this._map.on(\"zoomchange\",function(){_this.mapZoom=_this._map.getZoom()});_this.style=opts.style?opts.style:null;_this.gltfs=[];_this.tileCache={};_this.renderLayer=null;_this.light=null;_this.gl=null;_this.init();return _this}createClass(TilesLayer,[{key:\"init\",value:function init(){var _this2=this;window.onresize=function(){if(_this2.camera){var aspect=window.innerWidth/window.innerHeight;if(_this2.gl&&_this2.gl.canvas){aspect=_this2.gl.canvas.clientWidth/_this2.gl.canvas.clientHeight}_this2.camera.aspect=aspect}};this.tileSet=new TileSet;this.resourcePath=THREE.LoaderUtils.extractUrlBase(this._url);this.tileSet.load(this._url).then(function(obj){if(obj&&obj.structure){if(obj.json.root&&obj.json.root.boundingVolume){var boundingVolume=obj.json.root.boundingVolume;if(boundingVolume.box){var box=boundingVolume.box;_this2.boxCenter=new THREE.Vector4(box[0],box[1],box[2],1);if(obj.json.root.transform){var transform=new THREE.Matrix4;transform.elements=obj.json.root.transform;_this2.boxCenter=_this2.boxCenter.applyMatrix4(transform)}_this2.tileCenter=_this2._getLngLat(_this2.boxCenter)}if(boundingVolume.region){_this2.tileCenter={lng:116,lat:37}}}_this2.structure=obj.structure;_this2.initTree()}})}},{key:\"destroy\",value:function destroy(){this._map.remove(this.renderLayer);delete this.renderLayer}},{key:\"show\",value:function show(){this.renderLayer.show()}},{key:\"hide\",value:function hide(){this.renderLayer.hide()}},{key:\"setStyle\",value:function setStyle(opts){if(!opts.light){return}if(opts.light.color){var lightColor=new THREE.Color(opts.light.color);var r=lightColor.r,g=lightColor.g,b=lightColor.b;this.light.color.setRGB(r,g,b)}if(opts.light.intensity){this.light.intensity=opts.light.intensity}this.renderer.render(this.scene,this.camera)}},{key:\"initTree\",value:function initTree(){var _this3=this;this.centerDatas={lnglat:[[121.3382664763276,31.380435958970704]],mercator:null};if(this.tileCenter){this.centerDatas[\"lnglat\"]=[[this.tileCenter.lng,this.tileCenter.lat]]}if(this.style&&this.style.position){this.centerDatas[\"lnglat\"]=[[this.style.position[0],this.style.position[1]]]}var customCoords=this._map.customCoords;var coords=customCoords.lngLatsToCoords(this.centerDatas[\"lnglat\"]);this.centerDatas[\"mercator\"]=this._getMercator({lng:this.centerDatas[\"lnglat\"][0][0],lat:this.centerDatas[\"lnglat\"][0][1]});var cameraState=customCoords.getCameraParams();this.cameraState=cameraState;var gllayer=new AMap.GLCustomLayer({zIndex:1e4,init:function init(gl){_this3.gl=gl;_this3.camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3);if(gl.canvas){_this3.camera.aspect=gl.canvas.clientWidth/gl.canvas.clientHeight}_this3.renderer=new THREE.WebGLRenderer({context:gl});_this3.renderer.autoClear=false;_this3.renderer.outputEncoding=THREE.sRGBEncoding;_this3.scene=new THREE.Scene;if(_this3.style&&_this3.style.debug){var axesHelper=new THREE.AxesHelper(500);_this3.scene.add(axesHelper)}var lightColor=16777215;var intensity=1;if(_this3.style&&_this3.style.light){lightColor=_this3.style.light.color?new THREE.Color(_this3.style.light.color):lightColor;intensity=_this3.style.light.intensity?_this3.style.light.intensity:intensity}var aLight=new THREE.DirectionalLight(lightColor,intensity);aLight.position.set(.5,-.5,.5).normalize();_this3.light=aLight;console.log(aLight);_this3.scene.add(aLight)},render:function render(){var _this3$camera$positio,_this3$camera$up,_this3$camera;_this3.renderer.state.reset();var _customCoords$getCame=customCoords.getCameraParams(),near=_customCoords$getCame.near,far=_customCoords$getCame.far,fov=_customCoords$getCame.fov,up=_customCoords$getCame.up,lookAt=_customCoords$getCame.lookAt,position=_customCoords$getCame.position;_this3.camera.near=near;_this3.camera.far=far;(_this3$camera$positio=_this3.camera.position).set.apply(_this3$camera$positio,toConsumableArray(position));(_this3$camera$up=_this3.camera.up).set.apply(_this3$camera$up,toConsumableArray(up));(_this3$camera=_this3.camera).lookAt.apply(_this3$camera,toConsumableArray(lookAt));_this3.camera.fov=fov;_this3.camera.updateProjectionMatrix();var tiles=_this3.getTiles();if(tiles){_this3.addTile(tiles[\"toAddTiles\"]);_this3.removeTile(tiles[\"toRemoveTiles\"])}_this3.renderer.render(_this3.scene,_this3.camera)}});this.renderLayer=gllayer;this._map.add(gllayer)}},{key:\"clone\",value:function clone(obj){var str,newobj=obj.constructor===Array?[]:{};if(_typeof_1(obj)!==\"object\"){return}else if(window.JSON){str=JSON.stringify(obj),newobj=JSON.parse(str)}else{for(var i in obj){newobj[i]=_typeof_1(obj[i])===\"object\"?cloneObj(obj[i]):obj[i]}}return newobj}},{key:\"getTiles\",value:function getTiles(){var structure=this.structure;var keys=Object.keys(structure);keys.sort(function(a,b){return b-a});var resultTiles={toAddTiles:[],toRemoveTiles:[]};var zoomRange=this._map.getZooms()[1]-this._map.getZooms()[0]+1;var unit=zoomRange/keys.length;var zoomLevel=null;for(var i=0;i<keys.length;i++){if(this.mapZoom>=2+i*unit&&this.mapZoom<2+(i+1)*unit){zoomLevel=keys[i]}}var customCoords=this._map.customCoords;var _customCoords$getCame2=customCoords.getCameraParams(),near=_customCoords$getCame2.near,far=_customCoords$getCame2.far,fov=_customCoords$getCame2.fov,up=_customCoords$getCame2.up,lookAt=_customCoords$getCame2.lookAt,position=_customCoords$getCame2.position;var tanF=Math.tan(fov/2*Math.PI/180);for(var k=0;k<keys.length;k++){var key=keys[k];var tilesSet=structure[key];var geometricError=tilesSet[0].geometricError||16;var boundingVolume=tilesSet[0].boundingVolume;var xS=0;if(boundingVolume.box){var box=this.clone(boundingVolume.box);var cameraPosition=position;if(this.boxCenter){box[0]=this.boxCenter.x;box[1]=this.boxCenter.y;box[2]=this.boxCenter.z}if(this.centerDatas&&this.centerDatas.mercator){var mercator=this.centerDatas.mercator;if(mercator.x&&mercator.y){box[0]=box[0]-mercator.x;box[1]=box[1]-mercator.y}}var detX=Math.pow(cameraPosition[0]-box[0],2);var detY=Math.pow(cameraPosition[1]-box[1],2);var detZ=Math.pow(cameraPosition[2]-box[2],2);var distance=Math.sqrt(detX+detY+detZ);xS=tanF*distance/50}var refine=tilesSet[0].refine||\"add\";if(refine===\"add\"||1){if(xS<geometricError){resultTiles[\"toAddTiles\"]=resultTiles[\"toAddTiles\"].concat(tilesSet)}else{resultTiles[\"toRemoveTiles\"]=resultTiles[\"toRemoveTiles\"].concat(tilesSet)}}}return resultTiles}},{key:\"testTile\",value:function testTile(){var geometry=new THREE.BoxBufferGeometry(100,100,100);var material=new THREE.MeshBasicMaterial({color:16776960});var mesh=new THREE.Mesh(geometry,material);this.scene.add(mesh);this.renderer.render(this.scene,this.camera)}},{key:\"removeTile\",value:function removeTile(tilesData){for(var i=0;i<tilesData.length;i++){var tileData=tilesData[i];if(tileData[\"loaded\"]){tileData[\"loaded\"]=false;if(tileData[\"gltf\"]){for(var g=0;g<tileData[\"gltf\"].length;g++){var gltf=tileData[\"gltf\"][g];this.scene.remove(gltf.scene);this.renderer.render(this.scene,this.camera)}}}}}},{key:\"addTile\",value:function addTile(toLoadTile){var _this4=this;var _loop=function _loop(i){var tileData=toLoadTile[i];if(tileData[\"loaded\"]){return\"continue\"}tileData[\"loaded\"]=true;if(tileData&&tileData[\"content\"]){var loadUrl=tileData[\"content\"][\"uri\"]||tileData[\"content\"][\"url\"];var opts={resourcePath:_this4.resourcePath};if(_this4.tileCache[loadUrl]){var tileCacheData=_this4.tileCache[loadUrl];_this4.renderTile(tileCacheData.type,tileCacheData.data,tileData)}else{var tile=new Tile(opts);tile.load(loadUrl,function(type,data){if(!_this4.tileCache[loadUrl]){var keys=Object.keys(_this4.tileCache);var keysLen=keys.length;if(keysLen>100){delete _this4.tileCache[keys[0]]}_this4.tileCache[loadUrl]={type:type,data:data}}_this4.renderTile(type,data,tileData)})}}};for(var i=0;i<toLoadTile.length;i++){var _ret=_loop(i);if(_ret===\"continue\")continue}}},{key:\"renderTile\",value:function renderTile(type,data,tileData){var _this5=this;var rotateChilid=new THREE.Matrix4;if(type===\"b3dm\"){var loader=new THREE.GLTFLoader;loader.parse(data.glbData,this.resourcePath,function(gltf){if(!tileData[\"gltf\"]){tileData[\"gltf\"]=[]}tileData[\"gltf\"].push(gltf);gltf.scene.traverse(function(child){if(child instanceof THREE.Mesh){if(_this5.style&&_this5.style.color){var color=new THREE.Color(_this5.style.color);child.material.color.set(color)}}});if(_this5.style&&_this5.style.scale){var scale=_this5.style.scale;gltf.scene.scale.set(scale,scale,scale)}if(tileData.transform){rotateChilid.elements=tileData.transform;gltf.scene.applyMatrix4(rotateChilid)}gltf.scene.rotateOnAxis(new THREE.Vector3(1,0,0),Math.PI/2);if(tileData.extData&&tileData.extData.rotate){var rotate=tileData.extData.rotate;var rot=3.14/180*rotate;gltf.scene.rotateY(-rot)}_this5.scene.add(gltf.scene);_this5.renderer.render(_this5.scene,_this5.camera)},function(error){throw new Error(\"error parsing gltf: \"+error)})}else if(type===\"pnts\"){this.scene.add(data);this.renderer.render(this.scene,this.camera)}else if(type===\"i3dm\"){var _loader=new THREE.GLTFLoader;if(data&&data.position&&0){if(data.featureTableJson&&data.featureTableJson.INSTANCES_LENGTH){var instancelen=data.featureTableJson.INSTANCES_LENGTH;for(var i=0;i<instancelen;i++){var x=data.position[i*3];var y=data.position[i*3+1];var z=data.position[i*3+2];var lnglat=this._getLngLat({x:x,y:y});_loader.parse(data.glb,this.resourcePath,function(gltf){clallBack(\"i3dm\",gltf)},function(error){throw new Error(\"error parsing gltf: \"+error)})}}}else{_loader.parse(data.glb,this.resourcePath,function(gltf){if(!tileData[\"gltf\"]){tileData[\"gltf\"]=[]}gltf.scene.traverse(function(child){if(child instanceof THREE.Mesh){if(_this5.style&&_this5.style.color){var color=new THREE.Color(_this5.style.color);child.material.color.set(color)}}});if(_this5.style&&_this5.style.scale){var scale=_this5.style.scale;gltf.scene.scale.set(scale,scale,scale)}if(tileData.transform){rotateChilid.elements=tileData.transform;gltf.scene.applyMatrix4(rotateChilid)}gltf.scene.rotateOnAxis(new THREE.Vector3(1,0,0),Math.PI/2);_this5.scene.add(gltf.scene);_this5.renderer.render(_this5.scene,_this5.camera)},function(error){throw new Error(\"error parsing gltf: \"+error)})}}}},{key:\"checkLoad\",value:function checkLoad(tiles,keys){if(!tiles.length){return null}var resultTiles={toAddTiles:[],toRemoveTiles:[]};var zoomRange=map.getZooms()[1]-map.getZooms()[0]+1;var unit=zoomRange/keys.length;var geometricError=tiles[0].geometricError||16;var refine=tiles[0].refine||\"add\";var curNum=0;for(var i=0;i<keys.length;i++){if(geometricError==keys[i]){curNum=i}}if(refine===\"add\"){if(this.mapZoom>=2+unit*curNum){resultTiles[\"toAddTiles\"]=tiles}else{resultTiles[\"toRemoveTiles\"]=tiles}}else if(refine===\"replace\"){if(this.mapZoom>=2+unit*curNum&&this.mapZoom<2+unit*(curNum+1)){resultTiles[\"toAddTiles\"]=tiles}else{resultTiles[\"toRemoveTiles\"]=tiles}}return resultTiles}},{key:\"_getMercator\",value:function _getMercator(poi){var mercator={};var earthRad=6378137;mercator.x=poi.lng*Math.PI/180*earthRad;var a=poi.lat*Math.PI/180;mercator.y=earthRad/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return mercator}},{key:\"_getLngLat\",value:function _getLngLat(poi){var lnglat={};lnglat.lng=poi.x/20037508.34*180;var mmy=poi.y/20037508.34*180;lnglat.lat=180/Math.PI*(2*Math.atan(Math.exp(mmy*Math.PI/180))-Math.PI/2);return lnglat}}]);return TilesLayer}(AMap.Event);var TileSet=function(){function TileSet(opts){classCallCheck(this,TileSet)}createClass(TileSet,[{key:\"load\",value:function(){var _load=asyncToGenerator(regenerator.mark(function _callee(url){var response,json,structure;return regenerator.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.structure={};this.url=url;_context.next=4;return fetch(this.url);case 4:response=_context.sent;if(response.ok){_context.next=7;break}throw new Error(\"HTTP \".concat(response.status,\" - \").concat(response.statusText));case 7:_context.next=9;return response.json();case 9:json=_context.sent;structure=null;if(json&&json.root){structure=this.wideTraversal(json.root)}return _context.abrupt(\"return\",{structure:structure,json:json});case 13:case\"end\":return _context.stop()}}},_callee,this)}));function load(_x){return _load.apply(this,arguments)}return load}()},{key:\"wideTraversal\",value:function wideTraversal(selectNode){var nodes={};if(selectNode!=null){var queue=[];queue.unshift(selectNode);while(queue.length!=0){var item=queue.shift();var geometricError=item.geometricError||16;if(!nodes[geometricError]){nodes[geometricError]=[]}nodes[geometricError].push(item);var children=item&&item.children;if(!children){continue}for(var i=0;i<children.length;i++){queue.push(children[i])}}}return nodes}}]);return TileSet}();var Tile=function(){function Tile(opts){classCallCheck(this,Tile);this.resourcePath=opts.resourcePath}createClass(Tile,[{key:\"load\",value:function(){var _load2=asyncToGenerator(regenerator.mark(function _callee2(url,clallBack){var type,b3dm,b3dmData,pnts,pointData,geometry,material,points,id3m,i3dmData;return regenerator.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(url){_context2.next=2;break}return _context2.abrupt(\"return\");case 2:if(url.substr(0,4)!=\"http\"){url=this.resourcePath+url}type=url.slice(-4);_context2.t0=type;_context2.next=_context2.t0===\"json\"?7:_context2.t0===\"b3dm\"?8:_context2.t0===\"pnts\"?20:_context2.t0===\"i3dm\"?39:_context2.t0===\"cmpt\"?45:47;break;case 7:return _context2.abrupt(\"break\",48);case 8:_context2.prev=8;b3dm=new B3DM(url);_context2.next=12;return b3dm.load();case 12:b3dmData=_context2.sent;clallBack(\"b3dm\",b3dmData);_context2.next=19;break;case 16:_context2.prev=16;_context2.t1=_context2[\"catch\"](8);console.error(_context2.t1);case 19:return _context2.abrupt(\"break\",48);case 20:_context2.prev=20;pnts=new PNTS(url);_context2.next=24;return pnts.load();case 24:pointData=_context2.sent;geometry=new THREE.BufferGeometry;geometry.setAttribute(\"position\",new THREE.Float32BufferAttribute(pointData.points,3));material=new THREE.PointsMaterial;material.size=10;if(this.styleParams&&this.styleParams.color){material.vertexColors=THREE.NoColors;material.color=new THREE.Color(this.styleParams.color);material.opacity=this.styleParams.opacity!=null?this.styleParams.opacity:1}else if(pointData.rgba){geometry.setAttribute(\"color\",new THREE.Float32BufferAttribute(pointData.rgba,4));material.vertexColors=THREE.VertexColors}else if(pointData.rgb){geometry.setAttribute(\"color\",new THREE.Float32BufferAttribute(pointData.rgb,3));material.vertexColors=THREE.VertexColors}points=new THREE.Points(geometry,material);points.scale.set(20,20,20);clallBack(type,points);_context2.next=38;break;case 35:_context2.prev=35;_context2.t2=_context2[\"catch\"](20);console.error(_context2.t2);case 38:return _context2.abrupt(\"break\",48);case 39:id3m=new I3DM(url);_context2.next=42;return id3m.load();case 42:i3dmData=_context2.sent;clallBack(\"i3dm\",i3dmData);return _context2.abrupt(\"break\",48);case 45:throw new Error(\"cmpt tiles not yet implemented\");case 47:throw new Error(\"invalid tile type: \"+type);case 48:case\"end\":return _context2.stop()}}},_callee2,this,[[8,16],[20,35]])}));function load(_x2,_x3){return _load2.apply(this,arguments)}return load}()},{key:\"_getLngLat\",value:function _getLngLat(poi){var lnglat={};lnglat.lng=poi.x/20037508.34*180;var mmy=poi.y/20037508.34*180;lnglat.lat=180/Math.PI*(2*Math.atan(Math.exp(mmy*Math.PI/180))-Math.PI/2);return lnglat}}]);return Tile}();var TileLoader=function(){function TileLoader(url){classCallCheck(this,TileLoader);this.url=url;this.type=url.slice(-4);this.version=null;this.byteLength=null;this.featureTableJSON=null;this.featureTableBinary=null;this.batchTableJson=null;this.batchTableBinary=null;this.binaryData=null}createClass(TileLoader,[{key:\"load\",value:function(){var _load3=asyncToGenerator(regenerator.mark(function _callee3(){var response,buffer,res;return regenerator.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(this.url,{headers:{\"Access-Control-Allow-Origin\":\"*\",\"Content-Type\":\"application/octet-stream\"}});case 2:response=_context3.sent;if(response.ok){_context3.next=5;break}throw new Error(\"HTTP \".concat(response.status,\" - \").concat(response.statusText));case 5:_context3.next=7;return response.arrayBuffer();case 7:buffer=_context3.sent;res=this.parseResponse(buffer);return _context3.abrupt(\"return\",res);case 10:case\"end\":return _context3.stop()}}},_callee3,this)}));function load(){return _load3.apply(this,arguments)}return load}()},{key:\"parseResponse\",value:function parseResponse(buffer){var header=new Uint32Array(buffer.slice(0,28));var decoder=new TextDecoder;var magic=decoder.decode(new Uint8Array(buffer.slice(0,4)));if(magic!=this.type){throw new Error(\"Invalid magic string, expected '\".concat(this.type,\"', got '\").concat(this.magic,\"'\"))}this.version=header[1];this.byteLength=header[2];var featureTableJSONByteLength=header[3];var featureTableBinaryByteLength=header[4];var batchTableJsonByteLength=header[5];var batchTableBinaryByteLength=header[6];var pos=28;if(featureTableJSONByteLength>0){var decodeData=decoder.decode(new Uint8Array(buffer.slice(pos,pos+featureTableJSONByteLength)));this.featureTableJSON=JSON.parse(decodeData);pos+=featureTableJSONByteLength}else{this.featureTableJSON={}}this.featureTableBinary=buffer.slice(pos,pos+featureTableBinaryByteLength);pos+=featureTableBinaryByteLength;if(batchTableJsonByteLength>0){var _decodeData=decoder.decode(new Uint8Array(buffer.slice(pos,pos+batchTableJsonByteLength)));this.batchTableJson=JSON.parse(_decodeData);pos+=batchTableJsonByteLength}else{this.batchTableJson={}}this.batchTableBinary=buffer.slice(pos,pos+batchTableBinaryByteLength);pos+=batchTableBinaryByteLength;this.binaryData=buffer.slice(pos);return this}}]);return TileLoader}();var B3DM=function(_TileLoader){inherits(B3DM,_TileLoader);var _super2=_createSuper(B3DM);function B3DM(url){var _this6;classCallCheck(this,B3DM);_this6=_super2.call(this,url);_this6.glbData=null;return _this6}createClass(B3DM,[{key:\"parseResponse\",value:function parseResponse(buffer){get(getPrototypeOf(B3DM.prototype),\"parseResponse\",this).call(this,buffer);this.glbData=this.binaryData;return this}}]);return B3DM}(TileLoader);var PNTS=function(_TileLoader2){inherits(PNTS,_TileLoader2);var _super3=_createSuper(PNTS);function PNTS(url){var _this7;classCallCheck(this,PNTS);_this7=_super3.call(this,url);_this7.points=new Float32Array;_this7.rgba=null;_this7.rgb=null;return _this7}createClass(PNTS,[{key:\"parseResponse\",value:function parseResponse(buffer){get(getPrototypeOf(PNTS.prototype),\"parseResponse\",this).call(this,buffer);if(this.featureTableJSON.POINTS_LENGTH&&this.featureTableJSON.POSITION){var len=this.featureTableJSON.POINTS_LENGTH;var pos=this.featureTableJSON.POSITION.byteOffset;this.points=new Float32Array(this.featureTableBinary.slice(pos,pos+len*Float32Array.BYTES_PER_ELEMENT*3));this.rtc_center=this.featureTableJSON.RTC_CENTER;if(this.featureTableJSON.RGBA){pos=this.featureTableJSON.RGBA.byteOffset;var colorInts=new Uint8Array(this.featureTableBinary.slice(pos,pos+len*Uint8Array.BYTES_PER_ELEMENT*4));var rgba=new Float32Array(colorInts.length);for(var i=0;i<colorInts.length;i++){rgba[i]=colorInts[i]/255}this.rgba=rgba}else if(this.featureTableJSON.RGB){pos=this.featureTableJSON.RGB.byteOffset;var _colorInts=new Uint8Array(this.featureTableBinary.slice(pos,pos+len*Uint8Array.BYTES_PER_ELEMENT*3));var rgb=new Float32Array(_colorInts.length);for(var _i2=0;_i2<_colorInts.length;_i2++){rgb[_i2]=_colorInts[_i2]/255}this.rgb=rgb}else if(this.featureTableJSON.RGB565){console.error(\"RGB565 is currently not supported in pointcloud tiles.\")}}return this}}]);return PNTS}(TileLoader);var I3DM=function(_TileLoader3){inherits(I3DM,_TileLoader3);var _super4=_createSuper(I3DM);function I3DM(url){var _this8;classCallCheck(this,I3DM);_this8=_super4.call(this,url);_this8.glbData=null;_this8.url=url;return _this8}createClass(I3DM,[{key:\"parseResponse\",value:function parseResponse(buffer){var headerByteLength=32;var header=new Uint32Array(buffer.slice(0,32));var decoder=new TextDecoder;var magic=decoder.decode(new Uint8Array(buffer.slice(0,4)));if(magic!=this.type){throw new Error(\"Invalid magic string, expected '\".concat(this.type,\"', got '\").concat(this.magic,\"'\"))}var version=header[1];var byteLength=header[2];var featureTableJsonByteLength=header[3];var featureTableBinaryByteLength=header[4];var batchTableJsonByteLength=header[5];var batchTableBinaryByteLength=header[6];var gltfFormat=header[7];if(magic!==\"i3dm\"){return\"Invalid magic: \".concat(magic)}if(version!==1){return\"Invalid version: \".concat(version,\". Version must be 1.\")}if(gltfFormat>1){return'invalid gltfFormat \"'.concat(gltfFormat,'\". Must be 0 or 1.')}var featureTableJsonByteOffset=headerByteLength;var featureTableBinaryByteOffset=featureTableJsonByteOffset+featureTableJsonByteLength;var batchTableJsonByteOffset=featureTableBinaryByteOffset+featureTableBinaryByteLength;var batchTableBinaryByteOffset=batchTableJsonByteOffset+batchTableJsonByteLength;var glbByteOffset=batchTableBinaryByteOffset+batchTableBinaryByteLength;var glbByteLength=Math.max(byteLength-glbByteOffset,0);if(featureTableBinaryByteOffset%8>0){return\"Feature table binary must be aligned to an 8-byte boundary.\"}if(batchTableBinaryByteOffset%8>0){return\"Batch table binary must be aligned to an 8-byte boundary.\"}var embeddedGlb=gltfFormat===1;if(embeddedGlb&&glbByteOffset%8>0){return\"Glb must be aligned to an 8-byte boundary.\"}if(headerByteLength+featureTableJsonByteLength+featureTableBinaryByteLength+batchTableJsonByteLength+batchTableBinaryByteLength+glbByteLength>byteLength){return\"Feature table, batch table, and glb byte lengths exceed the tile's byte length.\"}var featureTableJsonBuffer=buffer.slice(featureTableJsonByteOffset,featureTableBinaryByteOffset);var featureTableBinary=buffer.slice(featureTableBinaryByteOffset,batchTableJsonByteOffset);var batchTableJsonBuffer=buffer.slice(batchTableJsonByteOffset,batchTableBinaryByteOffset);var batchTableBinary=buffer.slice(batchTableBinaryByteOffset,glbByteOffset);var glb=embeddedGlb?buffer.slice(glbByteOffset,glbByteOffset+glbByteLength):glbByteLength;var featureTableJson;var batchTableJson;var featureTableBinaryData;try{var decoderFeature=new TextDecoder;featureTableJson=decoderFeature.decode(featureTableJsonBuffer);featureTableJson=JSON.parse(featureTableJson)}catch(error){return\"Feature table JSON could not be parsed: \".concat(error.message)}try{var decoderBatchTableJson=new TextDecoder;batchTableJson=decoderBatchTableJson.decode(batchTableJsonBuffer);batchTableJson=JSON.parse(batchTableJson)}catch(error){return\"Batch table JSON could not be parsed: \".concat(error.message)}try{featureTableBinaryData=new Float32Array(featureTableBinary)}catch(error){return\"Feature table b could not be parsed: \".concat(error.message)}return{glb:glb,position:featureTableBinaryData||null,featureTableJson:featureTableJson||null}}}]);return I3DM}(TileLoader);AMap[\"3DTilesLayer\"]=TilesLayer}(window.AMap);\n");
_jsload_('AMap.ArrivalRange.js',"!function(f){\"use strict\";function r(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function s(t,n){return!n||\"object\"!=typeof n&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):n}var t=function(){function e(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(n=s(this,i(e).call(this,t))).CLASS_NAME=\"AMap.ArrivalRange\",n.config=f.getConfig(),n.url=n.config.server+\"/v3/direction/reachcircle\",n}var t,n,o;return function(t,n){if(\"function\"!=typeof n&&null!==n)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)}(e,f.Event),t=e,(n=[{key:\"search\",value:function(t,n,e,o){var r=this;this.opt=o||this.opt||{},t=f.Util.parseLngLatData(t);var i=(this.opt.policy?this.opt.policy:\"BUS,SUBWAY\").toLowerCase(),a=0;\"bus\"===i&&(a=0),\"subway\"===i&&(a=1),\"bus,subway\"!==i&&\"subway,bus\"!==i||(a=2);var s={location:t.toString(),time:n,extensions:\"all\",output:\"json\",strategy:a};if(this.opt.destination){5<this.opt.destination.length&&console&&console.log&&console.log(\"Support 5 destination points only!\");var u=f.Util.parseLngLatData(this.opt.destination);f.Util.isArray(u)||(u=[u]);for(var l,c=[],p=0;p<u.length;p++)l=u[p],c.push(l+\"\");s.unreviewloc=c.join(\"|\")}f.WebService.get(this.url,s,function(t,n){\"complete\"===t&&n.status&&\"1\"===n.status&&r._onComplete(n,e),\"error\"===t&&r._onError(n,e)})}},{key:\"_onComplete\",value:function(t,n){var e={};if(e.info=t.info,t.polylines){for(var o,r=[],i=0;i<t.polylines.length;i++){for(var a=[],s=(o=t.polylines[i]).outer.split(\";\"),u=[],l=0;l<s.length;l+=1)u.push(s[l].split(\",\"));if(a.push(u),o.inners)for(var c,p=0;p<o.inners.length;p++){c=o.inners[p].split(\";\");for(var f=[],h=0;h<c.length;h+=1)f.push(c[h].split(\",\"));a.push(f)}r.push(a)}e.bounds=r}if(t.contain&&t.contain.length){e.inRange=t.contain.split(\";\");for(var g=e.inRange.length-1;0<=g;--g)e.inRange[g]=\"true\"===e.inRange[g]}e.infocode=t.infocode,e.info=t.info,\"1\"===t.status?t.polygon||t.poi?n(\"complete\",e):n(\"no_data\",e):n(\"error\",e)}},{key:\"_onError\",value:function(t,n){this.emit(\"error\",t),n&&\"function\"==typeof n&&n(\"error\",t.info)}}])&&r(t.prototype,n),o&&r(t,o),e}();f.ArrivalRange=t}(window.AMap);\n");
_jsload_('AMap.AutoComplete.js',"!function(AMap){\"use strict\";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,function(arg){arg=function(input,hint){if(\"object\"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0===prim)return(\"string\"===hint?String:Number)(input);prim=prim.call(input,hint||\"default\");if(\"object\"!=typeof prim)return prim;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(arg,\"string\");return\"symbol\"==typeof arg?arg:String(arg)}(descriptor.key),descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&(\"object\"==typeof NewTarget||\"function\"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError(\"Derived constructors may only return object or undefined\");return _assertThisInitialized(Super)}}var defaultAutoCompleteOpts={type:\"all\",city:\"010\",datatype:\"all\",citylimit:!1,outPutDirAuto:!0,closeResultOnScroll:!0,noshowDistrict:!0,lang:\"zh_cn\"},AutoComplete=function(_AMap$Event){var subClass=AutoComplete;if(\"function\"!=typeof _AMap$Event&&null!==_AMap$Event)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(_AMap$Event&&_AMap$Event.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,\"prototype\",{writable:!1}),_AMap$Event&&_setPrototypeOf(subClass,_AMap$Event);var staticProps,_super=_createSuper(AutoComplete);function AutoComplete(opt){var _this;if(!(this instanceof AutoComplete))throw new TypeError(\"Cannot call a class as a function\");(_this=_super.call(this)).CLASS_NAME=\"AMap.Autocomplete\",_this.opt={},_this.config=AMap.getConfig(),_this.url=_this.config.server+\"query/inputtips\",Object.assign(_this.opt,defaultAutoCompleteOpts,opt);var opt=_this.opt.output,inputOpt=_this.opt.input;if(opt&&(\"string\"==typeof opt?_this.output=document.getElementById(opt):AMap.Util.isDOM(opt)&&(_this.output=opt)),inputOpt){\"string\"==typeof inputOpt?_this.input=document.getElementById(inputOpt):AMap.Util.isDOM(inputOpt)&&(_this.input=inputOpt),_this.input&&_this.initInput(),_this.output||(_this.output=AMap.DomUtil.create(\"div\",document.body,\"amap-sug-result\"),_this.output.style.visibility=\"hidden\",_this.officialOutput=!0);var closeResult=function(){_this.output&&(_this.output.style.visibility=\"hidden\")},maps=document.getElementsByClassName(\"amap-maps\");if(maps&&maps.length)for(var i=0;i<maps.length;i+=1)maps[i].addEventListener(\"click\",closeResult);document.addEventListener(\"click\",closeResult),document.addEventListener(\"mousewheel\",closeResult),window.addEventListener(\"resize\",_this.positionOutput.bind(_assertThisInitialized(_this))),_this.opt.closeResultOnScroll?window.addEventListener(\"scroll\",_this.closeResult.bind(_assertThisInitialized(_this))):window.addEventListener(\"scroll\",_this.positionOutput.bind(_assertThisInitialized(_this)))}return _this}return subClass=AutoComplete,(_AMap$Event=[{key:\"closeResult\",value:function(){this.output&&(this.output.style.visibility=\"hidden\")}},{key:\"initInput\",value:function(){var input=this.input;input&&(\"oninput\"in input&&input.addEventListener(\"input\",this.onInPut.bind(this)),input.addEventListener(\"keyup\",this.onkeyUp.bind(this)),input.addEventListener(\"keydown\",function(e){e.stopPropagation()}))}},{key:\"onInPut\",value:function(event){this.output&&this.autoSearch()}},{key:\"onkeyUp\",value:function(event){var cur,next,tipArr,event=(event||window.event).keyCode,output=this.output;output&&this.input&&(cur=output.curSelect,tipArr=output.tipArr,40===event?tipArr&&tipArr.length&&(output.childNodes[cur]&&(output.childNodes[cur].style.background=\"\"),next=(cur+1)%tipArr.length,output.curSelect=next,output.childNodes[next].style.background=\"#CAE1FF\",this.input&&(this.input.value=tipArr[next].name),this.emit(\"choose\",{poi:output.tipArr[next]})):38===event?tipArr&&tipArr.length&&(output.childNodes[cur]&&(output.childNodes[cur].style.background=\"\"),next=(cur-1+tipArr.length)%tipArr.length,output.curSelect=next,output.childNodes[next].style.background=\"#CAE1FF\",this.input&&(this.input.value=tipArr[next].name),this.emit(\"choose\",{poi:output.tipArr[next]})):13===event?output&&-1!==output.curSelect&&this.selectResult(cur):\"oninput\"in this.input||this.autoSearch())}},{key:\"selectResult\",value:function(index){var text,input=this.input,output=this.output;output&&output.tipArr&&input&&(text=output.tipArr[index].name,this.emit(\"select\",{poi:output.tipArr[index]}),input.value=text,output.tipArr=\"\",output.style.display=\"none\")}},{key:\"autoSearch\",value:function(){var input=this.input;input&&(0<(input=input.value).length?this.lastKeywords!==input&&this.search(input):this.output&&(this.lastKeywords=\"\",this.output.style.display=\"none\"))}},{key:\"setIfNoDistrict\",value:function(value){}},{key:\"autocomplete_CallBack\",value:function(tipArr){var _this2=this,output=this.output;if(output){output.innerHTML=\"\";var fragment=document.createDocumentFragment();if(tipArr&&0<tipArr.length&&this.input){for(var onclick=function(e){_this2.selectResult(e.target.rIndex)},i=0;i<tipArr.length;i++){var item=AMap.DomUtil.create(\"div\",fragment,\"auto-item\");item.id=\"amap-sug\"+i,item.rIndex=i,AMap.DomUtil.fillText(item,tipArr[i].name),item.addEventListener(\"click\",onclick),this.opt.noshowDistrict||!tipArr[i].district&&!tipArr[i].city||(item=AMap.DomUtil.create(\"span\",item,\"auto-item-span\"),AMap.DomUtil.fillText(item,tipArr[i].district||tipArr[i].city),item.rIndex=i)}output.curSelect=-1,output.tipArr=tipArr,output.appendChild(fragment),output.style.display=\"block\",output.style.visibility=\"visible\"}else output.style.visibility=\"hidden\";this.officialOutput&&this.positionOutput()}}},{key:\"setType\",value:function(type){this.opt.type=type}},{key:\"setLang\",value:function(lang){this.opt.lang=lang||\"zh_cn\"}},{key:\"getLang\",value:function(){return this.opt.lang}},{key:\"setCity\",value:function(city){this.opt.city=city}},{key:\"setCityLimit\",value:function(citylimit){this.opt.citylimit=citylimit}},{key:\"search\",value:function(keyword,cbk){var opts,_this3=this;keyword?(this.lastKeywords=keyword,opts={city:(opts=this.opt).city,type:opts.type,citylimit:opts.citylimit,datatype:opts.datatype,language:this.getLang(),s:\"rsv3\",key:this.config.key},this._filterData(opts),opts=Object.assign(opts,{keywords:keyword}),keyword=this.url,AMap.WebService.get(keyword,opts,function(status,data){return\"complete\"===status?_this3._onComplete(data,cbk):\"error\"===status&&_this3._onError(data,cbk),{}})):cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\")}},{key:\"positionOutput\",value:function(){var outputPosHeight,outputPos,scrollT,scrollL,input=this.input,output=this.output;if(input&&output)return input=input.getBoundingClientRect(),void 0===(outputPosHeight=(outputPos=output.getBoundingClientRect()).height)&&(outputPosHeight=outputPos.bottom-outputPos.top),void 0===(outputPos=input.width)&&(outputPos=input.right-input.left),scrollT=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,scrollL=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,this.output&&(this.output.style.left=input.left+scrollL-1+\"px\"),scrollL=document.documentElement.clientHeight,this.opt.outPutDirAuto&&input.bottom+outputPosHeight+10>scrollL&&input.bottom>outputPosHeight&&this.output?output.style.top=input.top+scrollT-outputPosHeight-2+\"px\":output.style.top=input.bottom+scrollT+2+\"px\",output.style.minWidth=outputPos+2+\"px\",this}},{key:\"parseEmpityArray\",value:function(value){return value instanceof Array&&!value.length?\"\":value}},{key:\"_onError\",value:function(e,cbk){this.emit(\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_parseInt\",value:function(v){v=parseInt(v,10);return isNaN(v)?0:v}},{key:\"_onComplete\",value:function(data,cbk){var result;if(parseInt(data.status,10)){var tips=data.tips;if(tips&&0!==tips.length){for(var i=0;i<tips.length;i+=1){var tip=tips[i];tip.location&&tip.location.length&&(tip.location=AMap.Util.parseLngLatData(tip.location.split(\",\"))),tip.location=this.parseEmpityArray(tip.location),tip.adcode=this.parseEmpityArray(tip.adcode),tip.district=this.parseEmpityArray(tip.district),tip.id=this.parseEmpityArray(tip.id)}result={info:data.info,count:this._parseInt(data.count),tips:data.tips},this.emit(\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result),this.input&&this.autocomplete_CallBack(data.tips)}else this.output&&(this.output.innerHTML=\"\",this.output.style.visibility=\"hidden\"),result={info:\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info},this.emit(\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"no_data\",{})}else result={info:data.info},this.emit(\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_filterData\",value:function(data){for(var key in data)data.hasOwnProperty(key)&&void 0===data[key]&&delete data[key]}}])&&_defineProperties(subClass.prototype,_AMap$Event),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,\"prototype\",{writable:!1}),AutoComplete}(AMap.Event);AMap.AutoComplete=AutoComplete,AMap.Autocomplete=AutoComplete}(window.AMap);\n");
_jsload_('AMap.BezierCurveEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _get(target,property,receiver){if(typeof Reflect!==\"undefined\"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);var _super=_createSuper(PointList);function PointList(){var _this;_classCallCheck(this,PointList);_this=_super.apply(this,arguments);_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);var _super2=_createSuper(AbstractPointListNode);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_super2.apply(this,arguments);_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);var _super=_createSuper(Point);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_super.call(this);_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);var _super2=_createSuper(PointWithMarker);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_super2.call(this);_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);function getMiddleLatLngByMarker(marker1,marker2){var p1=marker1.getPosition();var p2=marker2.getPosition();return p1.divideBy(2,false).add(p2.divideBy(2,false),false)}var callbacks=[];document.addEventListener(\"keydown\",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var BezierCurvePoint=function(_AbstractPointListNod){_inherits(BezierCurvePoint,_AbstractPointListNod);var _super=_createSuper(BezierCurvePoint);function BezierCurvePoint(map,pos,controlPoint,opts){var _this;_classCallCheck(this,BezierCurvePoint);_this=_super.call(this);_this.map=map;_this.opts=opts;_this.editing=false;_this.middleFlag=false;_this._isHead=false;_this.point=new PointWithMarker(map,pos,opts.controlPoint);_this.bezierCurveControlPoint=new BezierCurveControlPoint(map,_assertThisInitialized(_this),controlPoint,opts);_this.bindEvents();return _this}_createClass(BezierCurvePoint,[{key:\"setPrev\",value:function setPrev(node){_get(_getPrototypeOf(BezierCurvePoint.prototype),\"setPrev\",this).call(this,node);this.bezierCurveControlPoint.updateData({prevPos:node?node.point.marker.getPosition().toJSON():undefined})}},{key:\"setHead\",value:function setHead(v){this._isHead=v}},{key:\"bindEvents\",value:function bindEvents(){this.point.marker.on(\"dragstart\",this._handleHandleDragStart);this.point.marker.on(\"dragend\",this._handleHandleDragEnd);this.point.marker.on(\"dragging\",this._handleHandleDragging);this.point.marker.on(\"click\",this._handlePathNodeClick);this.point.marker.on(\"rightclick\",this._handleRightClick);this.point.marker.on(\"longpress\",this._handleRightClick);this.bezierCurveControlPoint.on(ListEvent.change,this._handleControPointDragging);this.bezierCurveControlPoint.on(ListEvent.adjust,this._handleHandleDragEnd);this.bezierCurveControlPoint.on(ListEvent.addNode,this._eventExpress);this.bezierCurveControlPoint.on(ListEvent.removeNode,this._controlPointRemoveNode)}},{key:\"unbindEvents\",value:function unbindEvents(){this.point.marker.off(\"dragstart\",this._handleHandleDragStart);this.point.marker.off(\"dragend\",this._handleHandleDragEnd);this.point.marker.off(\"dragging\",this._handleHandleDragging);this.point.marker.off(\"click\",this._handlePathNodeClick);this.point.marker.off(\"rightclick\",this._handleRightClick);this.point.marker.off(\"longpress\",this._handleRightClick);this.bezierCurveControlPoint.off(ListEvent.change,this._handleControPointDragging);this.bezierCurveControlPoint.off(ListEvent.adjust,this._handleHandleDragEnd);this.bezierCurveControlPoint.off(ListEvent.addNode,this._eventExpress);this.bezierCurveControlPoint.off(ListEvent.removeNode,this._controlPointRemoveNode)}},{key:\"_handleHandleDragStart\",value:function _handleHandleDragStart(){this.editing=true}},{key:\"_handlePathNodeClick\",value:function _handlePathNodeClick(e){if(!this.list){return}if(this.middleFlag){return}this.destroy();this.emit(ListEvent.removeNode,e)}},{key:\"_handleHandleDragging\",value:function _handleHandleDragging(){var newPos=this.point.marker.getPosition().toJSON();if(!this.middleFlag){this.bezierCurveControlPoint.updateData({});if(this.next){this.next.bezierCurveControlPoint.updateData({prevPos:newPos})}}if(!this.middleFlag){if(this.prev&&this.prev.middleFlag&&this.prev.prev){var _newPos=getMiddleLatLngByMarker(this.point.marker,this.prev.prev.point.marker);this.prev.point.marker.setPosition(_newPos.toJSON())}if(this.next&&this.next.middleFlag&&this.next.next){var _newPos2=getMiddleLatLngByMarker(this.point.marker,this.next.next.point.marker);this.next.point.marker.setPosition(_newPos2.toJSON())}}this.emit(ListEvent.change)}},{key:\"_handleControPointDragging\",value:function _handleControPointDragging(e){this.emit(ListEvent.change,e)}},{key:\"_handleHandleDragEnd\",value:function _handleHandleDragEnd(e){this.editing=false;if(this.middleFlag&&this.list){this.setMiddle(false);var prevPos=getMiddleLatLngByMarker(this.point.marker,this.prev.point.marker);var nextPos=getMiddleLatLngByMarker(this.point.marker,this.next.point.marker);var prev=new BezierCurvePoint(this.map,prevPos,[],this.opts);var next=new BezierCurvePoint(this.map,nextPos,[],this.opts);this.list.insertBefore(prev,this);this.list.insertAfter(next,this);prev.show();next.show();prev.setMiddle(true);next.setMiddle(true);this.emit(ListEvent.addNode,e)}else{this.emit(ListEvent.adjust,e)}}},{key:\"_controlPointRemoveNode\",value:function _controlPointRemoveNode(e){if(!this.prev&&this.next);if(this.bezierCurveControlPoint.controlPoints.length===0){console.log(\"should add mid point\");if(this.prev&&this.list){var pos=getMiddleLatLngByMarker(this.point.marker,this.prev.point.marker).toJSON();var mid=new BezierCurvePoint(this.map,pos,[],this.opts);this.list.insertBefore(mid,this);mid.setMiddle(true);mid.show()}}this.emit(ListEvent.removeNode,e)}},{key:\"_eventExpress\",value:function _eventExpress(e){this.emit(e.type,e)}},{key:\"_handleRightClick\",value:function _handleRightClick(e){if(!this.prev){return}if(this.bezierCurveControlPoint.controlPoints.length===0){if(this.prev.middleFlag){this.prev.destroy()}var newPos=getMiddleLatLngByMarker(this.point.marker,this.prev.point.marker);this.bezierCurveControlPoint.controlPoints.push(newPos.toJSON());this.bezierCurveControlPoint.updateData({});this.emit(ListEvent.addNode,e)}else if(this.bezierCurveControlPoint.controlPoints.length===1){var _newPos3=this._getLatLngParallel(this.point.marker.getPosition(),this.prev.point.marker.getPosition(),new AMap.LngLat(this.bezierCurveControlPoint.controlPoints[0][0],this.bezierCurveControlPoint.controlPoints[0][1]));this.bezierCurveControlPoint.controlPoints.push(_newPos3);this.bezierCurveControlPoint.updateData({});this.emit(ListEvent.addNode,e)}else{console.warn(\"control point number should less than 2\")}}},{key:\"destroy\",value:function destroy(){this.unbindEvents();this.point.remove();this.bezierCurveControlPoint.destroy();if(!this.list){return}if(!this.middleFlag){if(this.prev&&this.prev.middleFlag){this.prev.destroy()}if(this.next&&this.next.middleFlag){this.next.destroy()}if(this.list){var prev=this.prev;var next=this.next;this.list.remove(this);if(next&&!next.prev){next.bezierCurveControlPoint.hide()}if(prev&&next&&next.bezierCurveControlPoint.controlPoints.length===0){var newPos=getMiddleLatLngByMarker(prev.point.marker,next.point.marker);var newMiddleMarker=new BezierCurvePoint(this.map,newPos,[],this.opts);newMiddleMarker.setMiddle(true);newMiddleMarker.show();this.list.insertAfter(newMiddleMarker,prev)}}}else{this.list.remove(this)}}},{key:\"show\",value:function show(){this.point.show();if(!this._isHead){this.bezierCurveControlPoint.show()}}},{key:\"hide\",value:function hide(){this.point.hide();this.bezierCurveControlPoint.hide()}},{key:\"setMiddle\",value:function setMiddle(middle){this.middleFlag=middle;if(middle){var options=this.opts.midControlPoint;this._setMarkerOptions(this.point.marker,options)}else{var _options=this.opts.controlPoint;this._setMarkerOptions(this.point.marker,_options)}}},{key:\"_getLatLngParallel\",value:function _getLatLngParallel(a1,a2,b1){return b1.add(a1.subtract(a2,false),false).toJSON()}},{key:\"_setMarkerOptions\",value:function _setMarkerOptions(marker,options){marker.setTitle(options.title);marker.setIcon(options.icon);marker.setLabel(options.label);marker.setCursor(options.cursor);marker.setExtData(options.extData);marker.setOffset(options.offset);marker.setAngle(options.angle);marker.setSize(options.size);marker.setAnchor(options.anchor);marker.setzIndex(options.zIndex);marker.setContent(options.content);marker.setTop(options.top)}}]);return BezierCurvePoint}(AbstractPointListNode);__decorate([autobind],BezierCurvePoint.prototype,\"_handleHandleDragStart\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_handlePathNodeClick\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_handleHandleDragging\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_handleControPointDragging\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_handleHandleDragEnd\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_controlPointRemoveNode\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_eventExpress\",null);__decorate([autobind],BezierCurvePoint.prototype,\"_handleRightClick\",null);var BezierCurveControlPoint=function(_AMap$Event){_inherits(BezierCurveControlPoint,_AMap$Event);var _super2=_createSuper(BezierCurveControlPoint);function BezierCurveControlPoint(map,parent,controlPoints,_opts,prevPos){var _this2;_classCallCheck(this,BezierCurveControlPoint);_this2=_super2.call(this);_this2.map=map;_this2.parent=parent;_this2.controlPoints=controlPoints;_this2._opts=_opts;_this2.prevPos=prevPos;_this2._poly1=new AMap.Polyline(AMap.extend({map:map,innerOverlay:true},_this2._opts.bezierControlLine));_this2._poly2=new AMap.Polyline(AMap.extend({map:map,innerOverlay:true},_this2._opts.bezierControlLine));_this2._marke1=new AMap.Marker(AMap.extend({map:map,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},_this2._opts.bezierControlPoint));_this2._marke2=new AMap.Marker(AMap.extend({map:map,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},_this2._opts.bezierControlPoint));_this2.bindEvents();_this2.updateMarker();_this2.updateLinePath();return _this2}_createClass(BezierCurveControlPoint,[{key:\"bindEvents\",value:function bindEvents(){this._marke1.on(\"dragging\",this._handleHandleMarker1Dragging);this._marke2.on(\"dragging\",this._handleHandleMarker2Dragging);this._marke1.on(\"dragend\",this._handleMarkerDragend);this._marke2.on(\"dragend\",this._handleMarkerDragend);this._marke1.on(\"click\",this._handleMarkerClick);this._marke2.on(\"click\",this._handleMarkerClick)}},{key:\"unbindEvents\",value:function unbindEvents(){this._marke1.off(\"dragging\",this._handleHandleMarker1Dragging);this._marke2.off(\"dragging\",this._handleHandleMarker2Dragging);this._marke1.off(\"dragend\",this._handleMarkerDragend);this._marke2.off(\"dragend\",this._handleMarkerDragend);this._marke1.off(\"click\",this._handleMarkerClick);this._marke2.off(\"click\",this._handleMarkerClick)}},{key:\"_handleMarkerDragend\",value:function _handleMarkerDragend(e){this.emit(ListEvent.adjust,e)}},{key:\"_handleMarkerClick\",value:function _handleMarkerClick(e){var target=e.target;if(target===this._marke1){this.controlPoints.splice(0,1)}else if(target===this._marke2){this.controlPoints.splice(1,1)}this.updateMarker();this.updateLinePath();this.emit(ListEvent.removeNode,e)}},{key:\"_handleHandleMarker1Dragging\",value:function _handleHandleMarker1Dragging(){var newPos=this._marke1.getPosition().toJSON();var controlPoints=this.controlPoints;controlPoints[0]=newPos;this.updateData({controlPoints:controlPoints});this.emit(ListEvent.change)}},{key:\"_handleHandleMarker2Dragging\",value:function _handleHandleMarker2Dragging(){var newPos=this._marke2.getPosition().toJSON();var controlPoints=this.controlPoints;controlPoints[1]=newPos;this.updateData({controlPoints:controlPoints});this.emit(ListEvent.change)}},{key:\"updateData\",value:function updateData(data){if(data.prevPos){this.prevPos=data.prevPos}if(data.controlPoints){this.controlPoints=this.controlPoints}this.updateMarker();this.updateLinePath()}},{key:\"updateMarker\",value:function updateMarker(){if(this.controlPoints.length==0){this._marke1.hide();this._marke2.hide()}else if(this.controlPoints.length==1){this._marke1.show();this._marke2.hide();this._marke1.setPosition(this.controlPoints[0])}else if(this.controlPoints.length===2){this._marke1.show();this._marke2.show();this._marke1.setPosition(this.controlPoints[0]);this._marke2.setPosition(this.controlPoints[1])}else{console.error(\"controlPoints length > 2\")}}},{key:\"updateLinePath\",value:function updateLinePath(){if(!this.prevPos){return}if(!this.parent){return}var currentPos=this.parent.point.marker.getPosition().toJSON();if(this.controlPoints.length==0){this._poly1.hide();this._poly2.hide()}else if(this.controlPoints.length==1){this._poly2.hide();var path=[this.prevPos,this.controlPoints[0],currentPos];this._poly1.setPath(path);this._poly1.show()}else if(this.controlPoints.length===2){var path1=[this.prevPos,this.controlPoints[0]];var path2=[currentPos,this.controlPoints[1]];this._poly1.setPath(path1);this._poly2.setPath(path2);this._poly1.show();this._poly2.show()}else{console.error(\"controlPoints length > 2\")}}},{key:\"hide\",value:function hide(){this._poly1.hide();this._poly2.hide();this._marke1.hide();this._marke2.hide()}},{key:\"show\",value:function show(){if(this.controlPoints.length===1){this._poly1.show();this._marke1.show()}else if(this.controlPoints.length===2){this._poly1.show();this._poly2.show();this._marke1.show();this._marke2.show()}}},{key:\"destroy\",value:function destroy(){this.unbindEvents();this._poly1.setMap(null);this._poly2.setMap(null);this._marke1.setMap(null);this._marke2.setMap(null)}}]);return BezierCurveControlPoint}(AMap.Event);__decorate([autobind],BezierCurveControlPoint.prototype,\"_handleMarkerDragend\",null);__decorate([autobind],BezierCurveControlPoint.prototype,\"_handleMarkerClick\",null);__decorate([autobind],BezierCurveControlPoint.prototype,\"_handleHandleMarker1Dragging\",null);__decorate([autobind],BezierCurveControlPoint.prototype,\"_handleHandleMarker2Dragging\",null);var PolylineCreator=function(_AMap$Event){_inherits(PolylineCreator,_AMap$Event);var _super=_createSuper(PolylineCreator);function PolylineCreator(_map){var _this;_classCallCheck(this,PolylineCreator);_this=_super.call(this);_this._map=_map;_this._onMapClick=_this._onMapClick.bind(_assertThisInitialized(_this));_this._onMapMouseMove=_this._onMapMouseMove.bind(_assertThisInitialized(_this));_this._onMapDbClick=_this._onMapDbClick.bind(_assertThisInitialized(_this));_this._onMapRightClick=_this._onMapRightClick.bind(_assertThisInitialized(_this));return _this}_createClass(PolylineCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat;var resolution=this._map.getResolution();var pos1=center.offset(resolution*-30,0).toJSON();var pos2=center.offset(resolution*30,0).toJSON();var path=[pos1,pos2];this.emit(\"create\",{path:path});this.close()}},{key:\"_onMapMouseMove\",value:function _onMapMouseMove(){}},{key:\"_onMapDbClick\",value:function _onMapDbClick(){}},{key:\"_onMapRightClick\",value:function _onMapRightClick(){}}]);return PolylineCreator}(AMap.Event);var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};function isNumber(obj){return typeof obj===\"number\"}function isNumberArray(obj){return Array.isArray(obj)&&isNumber(obj[0])}function isNumberArrayArray(obj){return Array.isArray(obj)&&isNumberArray(obj[0])}var BezierCurveEditor=function(_AMap$Event){_inherits(BezierCurveEditor,_AMap$Event);var _super=_createSuper(BezierCurveEditor);function BezierCurveEditor(_map,_poly){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,BezierCurveEditor);_this=_super.call(this);_this._map=_map;_this.opts=opts;_this._normalPolylineStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeColor:\"#3366FF\",strokeOpacity:1,strokeWeight:6,strokeStyle:\"solid\",lineJoin:\"round\",lineCap:\"round\"};_this._editingPolylineStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeWeight:4,strokeStyle:\"solid\",strokeDasharray:[10,10],strokeColor:\"#1791fc\",strokeOpacity:.8,lineJoin:\"round\",lineCap:\"round\"};_this.className=\"AMap.BezierCurveEditor\";_this._editing=false;_this.getCtrlLineOptions=function(){return{lineCap:\"round\",strokeDasharray:[10,10],strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:4,strokeStyle:\"dashed\"}};_this.getMarkerOptions=function(type){var isMobile=AMap.Browser.mobile;return{content:'<div class=\"'+(isMobile?\"amap-bzcv-mobile \":\"\")+\"amap-bzcv-node amap-bzcv-\"+type+'\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)}};var isMobile=AMap.Browser.mobile;_this._creator=new PolylineCreator(_map);_this._poly=_poly;_this.opts.bezierControlLine=AMap.extend({lineCap:\"round\",strokeDasharray:[10,10],strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:4,strokeStyle:\"dashed\"},_this.opts.bezierControlLine||{});_this.opts.bezierControlPoint=_this.opts.bezierControlPoint||{content:'<div class=\"'+(isMobile?\"amap-bzcv-mobile \":\"\")+'amap-bzcv-node amap-bzcv-ctrlNode\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)};_this.opts.controlPoint=_this.opts.controlPoint||{content:'<div class=\"'+(isMobile?\"amap-bzcv-mobile \":\"\")+'amap-bzcv-node amap-bzcv-pathNode\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)};_this.opts.midControlPoint=_this.opts.midControlPoint||{content:'<div class=\"'+(isMobile?\"amap-bzcv-mobile \":\"\")+'amap-bzcv-node amap-bzcv-midNode\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)};_this._normalPolylineStyle=AMap.extend(_this._normalPolylineStyle,_this.opts.createOptions||{});_this._editingPolylineStyle=AMap.extend(_this._editingPolylineStyle,_this.opts.editOptions||{});_this._creator.on(\"create\",function(data){_this._creator.close();var path=data.path;var poly=new AMap.BezierCurve(AMap.extend({map:_map,path:path},_this._normalPolylineStyle));_this.setTarget(poly);_this.open();_this.emit(ListEvent.add,{target:_this.getTarget(),obj:poly})});return _this}_createClass(BezierCurveEditor,[{key:\"initList\",value:function initList(){if(!this._poly){return}if(!this.list){this.list=new PointList;var path=this._poly.getPath();var prev;for(var i=0,len=path.length;i<len;i++){var lnglats=path[i];var controlPos=[];var currentPos=void 0;if(isNumberArrayArray(lnglats)){var length=lnglats.length;for(var _i=0,_len=length-1;_i<_len;_i+=1){var lng=lnglats[_i][0];var lat=lnglats[_i][1];controlPos.push([lng,lat])}currentPos=lnglats[lnglats.length-1]}else{var _length=lnglats.length;for(var _i2=0,_len2=_length-2;_i2<_len2;_i2+=2){var _lng=lnglats[_i2];var _lat=lnglats[_i2+1];controlPos.push([_lng,_lat])}currentPos=[lnglats[lnglats.length-2],lnglats[lnglats.length-1]]}var current=new BezierCurvePoint(this._map,currentPos,controlPos,this._generateBezierPointOptions());if(i>0&&prev&&current.bezierCurveControlPoint.controlPoints.length===0){var middlePos=getMiddleLatLngByMarker(prev.point.marker,current.point.marker);var middle=new BezierCurvePoint(this._map,middlePos,[],this._generateBezierPointOptions());this.list.add(middle);this.list.add(current);middle.setMiddle(true)}else{this.list.add(current)}if(i==0){current.setHead(true);current.bezierCurveControlPoint.hide()}prev=current}this.bindListEvent()}this.list.forEach(function(node){node.show()});this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds;this._poly.setOptions(this._editingPolylineStyle?this._editingPolylineStyle:{})}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.removeNode,this.handleRemoveNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.removeNode,this.handleRemoveNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange)}}},{key:\"handleChange\",value:function handleChange(){this._updatePath()}},{key:\"handleAddNode\",value:function handleAddNode(e){this._updatePath();this.emit(ListEvent.addNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){var _a;if(!this.list){return}if(this.list.length<2){this.emit(ListEvent.removeNode);(_a=this._poly)===null||_a===void 0?void 0:_a.setMap(null);this.close();this.destroy();delete this._poly;return}this._updatePath();this.emit(ListEvent.removeNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"handleAdjust\",value:function handleAdjust(e){this._updatePath();this.emit(ListEvent.adjust,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this.list&&overlay!==this._poly){this.destroy()}this._poly=overlay}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"open\",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList()}else{this._creator.open()}}},{key:\"close\",value:function close(){this._editing=false;this._creator.close();if(!this._poly){return}if(!this.list){return}this.list.forEach(function(node){node.hide()});this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){if(this.list){this.unbindListEvent();this.list.forEach(function(node){node.point.marker.hide()});this.list.destroy();delete this.list}delete this._poly}},{key:\"_updatePath\",value:function _updatePath(){if(!this._poly){return}if(!this.list){return}var path=[];this.list.forEach(function(node){if(!node.middleFlag||node.editing){var pos=[];Array.prototype.push.apply(pos,node.bezierCurveControlPoint.controlPoints);pos.push(node.point.marker.getPosition().toJSON());path.push(pos)}});this._poly.setPath(path)}},{key:\"_generateBezierPointOptions\",value:function _generateBezierPointOptions(){return this.opts}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return BezierCurveEditor}(AMap.Event);__decorate$1([autobind],BezierCurveEditor.prototype,\"handleChange\",null);__decorate$1([autobind],BezierCurveEditor.prototype,\"handleAddNode\",null);__decorate$1([autobind],BezierCurveEditor.prototype,\"handleRemoveNode\",null);__decorate$1([autobind],BezierCurveEditor.prototype,\"handleAdjust\",null);AMap.BezierCurveEditor=BezierCurveEditor}(window.AMap);\n");
_jsload_('AMap.CallAMap.js',"!function(o){\"use strict\";function t(a,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function r(a){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function s(a,e){return(s=Object.setPrototypeOf||function(a,e){return a.__proto__=e,a})(a,e)}function p(a,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(a){if(void 0===a)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return a}(a):e}var a=function(){function n(a){var e;return function(a,e){if(!(a instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(e=p(this,r(n).call(this))).CLASS_NAME=\"AMap.CallAMap\",e.opt=a||{},e.mapConfig=o.getConfig(),e}var a,e,i;return function(a,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&s(a,e)}(n,o.Event),a=n,(e=[{key:\"open\",value:function(a){o.Browser.mobile?window.location.href=a:window.open(a)}},{key:\"poiOnAMAP\",value:function(a){var e={},n=o.Util.parseLngLatData(a.location);e.id=a.id,n&&(e.y=n.lat,e.x=n.lng),e.name=a.name,e.address=a.address;var i=this.getPoiUrl(e);this.open(i)}},{key:\"detailOnAMAP\",value:function(a){var e={},n=o.Util.parseLngLatData(a.location);e.id=a.id,n&&(e.y=n.lat,e.x=n.lng),e.name=a.name;var i=this.getPoiDetailUrl(e);this.open(i)}},{key:\"markOnAMAP\",value:function(a){var e={};e.name=a.name||\"\";var n=o.Util.parseLngLatData(a.location);e.y=n.lat,e.x=n.lng;var i=this.getPositionUrl(e);this.open(i)}},{key:\"drivingOnAMAP\",value:function(a){var e={t:0};e.m=void 0!==a.m?a.m:a.policy;var n=o.Util.parseLngLatData(a.origin),i=o.Util.parseLngLatData(a.destination);e.sy=n.lat,e.sx=n.lng,e.sname=a.originName||\"\",e.dy=i.lat,e.dx=i.lng,e.dname=a.destinationName||\"\";var t=this.getRouteUrl(e);this.open(t)}},{key:\"transferOnAMAP\",value:function(a){var e={t:1};e.m=a.policy;var n=o.Util.parseLngLatData(a.origin),i=o.Util.parseLngLatData(a.destination);e.sy=n.lat,e.sx=n.lng,e.sname=a.originName||\"\",e.dy=i.lat,e.dx=i.lng,e.dname=a.destinationName||\"\";var t=this.getRouteUrl(e);this.open(t)}},{key:\"walkingOnAMAP\",value:function(a){var e={t:2,m:0},n=o.Util.parseLngLatData(a.origin),i=o.Util.parseLngLatData(a.destination);e.sy=n.lat,e.sx=n.lng,e.sname=a.originName||\"\",e.dy=i.lat,e.dx=i.lng,e.dname=a.destinationName||\"\";var t=this.getRouteUrl(e);this.open(t)}},{key:\"dealParam\",value:function(a){return void 0===a?\"\":a}},{key:\"getPositionUrl\",value:function(a){a.name=this.dealParam(a.name);var e=[a.y,a.x,a.name];if(o.Browser.mobile){var n=[this.mapConfig.mo+\"/callAPP?\",\"src=jsapi_q\"];return n.push(\"&ios=\"+encodeURIComponent(\"viewMap?sourceApplication=jsapi_q&dev=0&poiname=\"+a.name+\"&lat=\"+a.y+\"&lon=\"+a.x)),n.push(\"&android=\"+encodeURIComponent(\"androidamap?action=shorturl&q=\"+e.join(\",\")+\"&sourceApplication=jsapi_q\")),n.push(\"&wp=\"+encodeURIComponent(\"viewMap?sourceApplication=jsapi_q&dev=0&poiname=\"+a.name+\"&lat=\"+a.y+\"&lon=\"+a.x)),n.push(\"&mo=\"+encodeURIComponent(this.mapConfig.mo+\"?q=\"+e.join(\",\")+\"&callapp=0&sourceApplication=jsapi_q\")),n.join(\"\")}return this.mapConfig.pc+\"?q=\"+e.join(\",\")+\"&src=jsapi_q\"}},{key:\"getPoiUrl\",value:function(a){a.name=this.dealParam(a.name),a.address=this.dealParam(a.address),a.x=this.dealParam(a.x),a.y=this.dealParam(a.y);var e=[a.id,a.y,a.x,a.name,a.address];if(o.Browser.mobile){var n=[this.mapConfig.mo+\"/callAPP?\",\"src=jsapi_p\"];return n.push(\"&ios=\"+encodeURIComponent(\"multiPointShow?sourceApplication=jsapi_p&dev=0&q=\"+[a.y,a.x,a.name,a.address,a.id].join(\",\")+\"&title=\"+a.name)),n.push(\"&android=\"+encodeURIComponent(\"androidamap?action=shorturl&p=\"+e.join(\",\")+\"&sourceApplication=jsapi_p\")),n.push(\"&wp=\"+encodeURIComponent(\"multiPointShow?sourceApplication=jsapi_p&dev=0&q=\"+[a.y,a.x,a.name,a.address,a.id].join(\",\")+\"&title=\"+a.name)),n.join(\"\")}return this.mapConfig.pc+\"?p=\"+e.join(\",\")+\"&src=jsapi_p\"}},{key:\"getPoiDetailUrl\",value:function(a){if(o.Browser.mobile){var e=[this.mapConfig.mo+\"/callAPP?\",\"src=jsapi_detail\"];return e.push(\"&ios=\"+encodeURIComponent(\"viewPOIDetail?sourceApplication=jsapi_detail&poiid=\"+a.id)),a.name=this.dealParam(a.name),a.x=this.dealParam(a.x),a.y=this.dealParam(a.y),e.push(\"&android=\"+encodeURIComponent(\"androidamap?action=openFeature&featureName=PoiDetail&poiid=\"+a.id+\"&poiname=\"+a.name+\"&x=\"+a.x+\"&y=\"+a.y+\"&sourceApplication=jsapi_detail\")),e.push(\"&wp=\"+encodeURIComponent(\"viewPOIDetail?sourceApplication=jsapi_detail&poiid=\"+a.id)),e.push(\"&mo=\"+encodeURIComponent(this.mapConfig.mo+\"/detail/index/poiid=\"+a.id+\"&sourceApplication=jsapi_detail\")),e.join(\"\")}return this.mapConfig.pc+\"/detail/\"+a.id+\"?src=jsapi_detail\"}},{key:\"getRouteUrl\",value:function(a){a.sname=this.dealParam(a.sname),\"\"===a.sname&&(a.sname=\"起点\"),a.dname=this.dealParam(a.dname),\"\"===a.dname&&(a.dname=\"终点\"),a.mcount=this.dealParam(a.mcount),a.my=this.dealParam(a.my),a.mx=this.dealParam(a.mx),a.mname=this.dealParam(a.mname);var e=[a.sy,a.sx,a.sname,a.dy,a.dx,a.dname,a.m,a.t,a.mcount,a.my,a.mx,a.mname];if(o.Browser.mobile){var n=[this.mapConfig.mo+\"/callAPP?\",\"src=jsapi_r_\"+a.t];n.push(\"&ios=\"+encodeURIComponent(\"path?sourceApplication=jsapi_r_\"+a.t+\"&dev=0&slat=\"+a.sy+\"&slon=\"+a.sx+\"&sname=\"+a.sname+\"&dlat=\"+a.dy+\"&dlon=\"+a.dx+\"&dname=\"+a.dname+\"&m=\"+a.m+\"&t=\"+a.t+\"&vian=0&vialons=&vialats=&vianames=\"));var i=a.t;return 0===a.t?i=2:2===a.t&&(i=4),n.push(\"&android=\"+encodeURIComponent(\"androidamap://route?sourceApplication=jsapi_r_\"+a.t+\"&slat=\"+a.sy+\"&slon=\"+a.sx+\"&sname=\"+a.sname+\"&dlat=\"+a.dy+\"&dlon=\"+a.dx+\"&dname=\"+a.dname+\"&dev=0&\"+a.m+\"&t=\"+i)),n.push(\"&wp=\"+encodeURIComponent(\"path?sourceApplication=jsapi_r_\"+a.t+\"&dev=0&slat=\"+a.sy+\"&slon=\"+a.sx+\"&sname=\"+a.sname+\"&dlat=\"+a.dy+\"&dlon=\"+a.dx+\"&dname=\"+a.dname+\"&m=\"+a.m+\"&t=\"+a.t+\"&vian=0&vialons=&vialats=&vianames=\")),n.push(\"&mo=\"+encodeURIComponent(this.mapConfig.mo+\"/?r=\"+e.join(\",\")+\"&callapp=0&sourceApplication=jsapi_r_\"+a.t)),n.join(\"\")}return this.mapConfig.pc+\"?r=\"+e.join(\",\")+\"src=jsapi_r_\"+a.t}}])&&t(a.prototype,e),i&&t(a,i),n}();o.CallAMap=a}(window.AMap);\n");
_jsload_('AMap.CircleEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);var _super=_createSuper(PointList);function PointList(){var _this;_classCallCheck(this,PointList);_this=_super.apply(this,arguments);_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);var _super2=_createSuper(AbstractPointListNode);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_super2.apply(this,arguments);_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);var _super=_createSuper(Point);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_super.call(this);_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);var _super2=_createSuper(PointWithMarker);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_super2.call(this);_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);var CirlePoint=function(_AMap$Event){_inherits(CirlePoint,_AMap$Event);var _super=_createSuper(CirlePoint);function CirlePoint(map,circle){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,CirlePoint);_this=_super.call(this);_this.map=map;_this.circle=circle;var center=circle.getCenter();var radius=circle.getRadius();var isMobile=AMap.Browser.mobile;_this.movePoint=new PointWithMarker(map,center.toJSON(),opts.movePoint||{content:'<div class=\"'+(isMobile?\"amap-circle-mobile \":\"\")+\"amap-circle-node amap-circle-\"+\"moveNode\"+'\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)});var movePos=center.offset(radius,0);_this.resizePoint=new PointWithMarker(map,movePos,opts.resizePoint||{content:'<div class=\"'+(isMobile?\"amap-circle-mobile \":\"\")+\"amap-circle-node amap-circle-\"+\"resizeNode\"+'\"></div>',offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)});_this.bindEvent();return _this}_createClass(CirlePoint,[{key:\"bindEvent\",value:function bindEvent(){this.movePoint.marker.on(\"dragging\",this._handleMovePointDragging.bind(this));this.resizePoint.marker.on(\"dragging\",this._handleResizePointDragging.bind(this));this.movePoint.marker.on(\"dragend\",this._handleMovePointDragend.bind(this));this.resizePoint.marker.on(\"dragend\",this._handleResizePointDragend.bind(this))}},{key:\"unbindEvent\",value:function unbindEvent(){this.movePoint.marker.off(\"dragging\",this._handleMovePointDragging.bind(this));this.resizePoint.marker.off(\"dragging\",this._handleResizePointDragging.bind(this));this.movePoint.marker.off(\"dragend\",this._handleMovePointDragend.bind(this));this.resizePoint.marker.off(\"dragend\",this._handleResizePointDragend.bind(this))}},{key:\"show\",value:function show(){this.movePoint.show();this.resizePoint.show();this._updateText();this._updateText()}},{key:\"hide\",value:function hide(){this.movePoint.hide();this.resizePoint.hide()}},{key:\"destroy\",value:function destroy(){this.unbindEvent();this.movePoint.remove();this.resizePoint.remove()}},{key:\"getBounds\",value:function getBounds(){return new AMap.Bounds(this.movePoint.marker.getPosition(),this.resizePoint.marker.getPosition())}},{key:\"_updateText\",value:function _updateText(){var radius=this.circle.getRadius();this.resizePoint.marker.setLabel({content:\"半径：\".concat(radius,\"米\")})}},{key:\"_handleMovePointDragging\",value:function _handleMovePointDragging(){var pos=this.movePoint.marker.getPosition();var resizePos=this.resizePoint.marker.getPosition();var circleCenter=this.circle.getCenter();if(!pos||!resizePos){return}var newPos=pos.add(resizePos.subtract(circleCenter,false),false);this.resizePoint.marker.setPosition(newPos.toJSON());this.circle.setCenter(pos);this._updateText();this.emit(ListEvent.change)}},{key:\"_handleResizePointDragging\",value:function _handleResizePointDragging(){var moveLatLng=this.circle[\"getCenter\"]();var resizeLatlng=this.resizePoint.marker.getPosition();var radius=Math.round(AMap.GeometryUtil.distance(moveLatLng,resizeLatlng));this.circle.setRadius(radius);this._updateText();this.emit(ListEvent.change)}},{key:\"_handleResizePointDragend\",value:function _handleResizePointDragend(event){var radius=this.circle.getRadius();this.emit(ListEvent.adjust,{radius:radius,lnglat:event.lnglat,pixel:event.pixel})}},{key:\"_handleMovePointDragend\",value:function _handleMovePointDragend(event){this.emit(ListEvent.move,event)}}]);return CirlePoint}(AMap.Event);function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var BaseEditor=function(_AMap$Event){_inherits(BaseEditor,_AMap$Event);var _super=_createSuper(BaseEditor);function BaseEditor(_map,_poly){var _this;_classCallCheck(this,BaseEditor);_this=_super.call(this);_this._map=_map;_this.className=\"AMap.BaseEditor\";_this._editing=false;_this._poly=_poly;return _this}_createClass(BaseEditor,[{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}if(overlay){this._poly=overlay}}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange);this.list.on(ListEvent.move,this.handleMove)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange);this.list.off(ListEvent.move,this.handleMove)}}},{key:\"handleChange\",value:function handleChange(){}},{key:\"handleMove\",value:function handleMove(event){this.emit(ListEvent.move,{target:this.getTarget(),lnglat:event.lnglat,pixel:event.pixel})}},{key:\"handleAddNode\",value:function handleAddNode(event){this.emit(ListEvent.addNode,event)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(){}},{key:\"handleAdjust\",value:function handleAdjust(event){this.emit(ListEvent.adjust,AMap.extend({},event,{target:this.getTarget()}))}},{key:\"open\",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList();this._openEdit()}else{this._creator.open()}if(!this._poly||!this.list){return}}},{key:\"_openEdit\",value:function _openEdit(){if(!this.list||!this._poly){return}this.list.show();this._saveCustomStyle();this._poly.setOptions(this._editStyle?this._editStyle:{})}},{key:\"_saveCustomStyle\",value:function _saveCustomStyle(){if(!this._poly){return}this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds}},{key:\"close\",value:function close(){this._editing=false;if(!this._poly){return}if(!this.list){return}this.list.hide();this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){if(this.list){this.unbindListEvent();this.list.destroy();delete this.list}delete this._poly}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return BaseEditor}(AMap.Event);__decorate([autobind],BaseEditor.prototype,\"handleChange\",null);__decorate([autobind],BaseEditor.prototype,\"handleMove\",null);__decorate([autobind],BaseEditor.prototype,\"handleAddNode\",null);__decorate([autobind],BaseEditor.prototype,\"handleRemoveNode\",null);__decorate([autobind],BaseEditor.prototype,\"handleAdjust\",null);var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var CirclrCreator=function(_AMap$Event){_inherits(CirclrCreator,_AMap$Event);var _super=_createSuper(CirclrCreator);function CirclrCreator(_map){var _this;_classCallCheck(this,CirclrCreator);_this=_super.call(this);_this._map=_map;return _this}_createClass(CirclrCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat.toJSON();var radius=this._map.getResolution()*60;this.emit(\"create\",{center:center,radius:radius});this.close()}}]);return CirclrCreator}(AMap.Event);__decorate$1([autobind],CirclrCreator.prototype,\"_onMapClick\",null);var CircleEditor=function(_BaseEditor){_inherits(CircleEditor,_BaseEditor);var _super2=_createSuper(CircleEditor);function CircleEditor(map,_poly){var _this2;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,CircleEditor);_this2=_super2.call(this,map,_poly);_this2.className=\"AMap.CircleEditor\";_this2._normalCircleStyle={draggbable:true,strokeColor:\"#FF33FF\",strokeWeight:3,strokeOpacity:.2,fillOpacity:.4,strokeStyle:\"dashed\",strokeDasharray:[10,10],fillColor:\"#1791fc\",zIndex:50};_this2._editStyle={strokeColor:\"#1791fc\",strokeWeight:3,strokeOpacity:.8,fillOpacity:.4,strokeStyle:\"solid\",strokeDasharray:[10,10],fillColor:\"#1791fc\",draggable:false};_this2._opts=opts;_this2._normalCircleStyle=AMap.extend(_this2._normalCircleStyle,opts.createOptions||{});_this2._editStyle=AMap.extend(_this2._editStyle,opts.editOptions||{});_this2._creator=new CirclrCreator(map);_this2._creator.on(\"create\",function(data){_this2._creator.close();var poly=new AMap.Circle(AMap.extend({map:_this2._map,center:data.center,radius:data.radius},_this2._normalCircleStyle));_this2.setTarget(poly);_this2.open();_this2.emit(ListEvent.add,{target:_this2.getTarget(),obj:poly})});return _this2}_createClass(CircleEditor,[{key:\"initList\",value:function initList(){if(!this._poly){return}if(!this.list){this.list=new CirlePoint(this._map,this._poly,this._opts)}this.bindListEvent()}}]);return CircleEditor}(BaseEditor);AMap.CircleEditor=CircleEditor}(window.AMap);\n");
_jsload_('AMap.CitySearch.js',"!function(i){\"use strict\";function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}var t=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(e=u(this,c(n).call(this))).CLASS_NAME=\"AMap.CitySearch\",e.config=i.getConfig(),e.opt=t||{},e.url=e.config.server+\"/v3/ip\",e}var t,e,o;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(n,i.Event),t=n,(e=[{key:\"getLocalCity\",value:function(n){var o=this,t=[\"key=\"+this.config.key,\"s=rsv3\"],e=this.url+(0<t.length?\"?\"+t.join(\"&\"):\"\");i.WebService.get(e,{},function(t,e){\"complete\"===t&&e.status&&\"1\"===e.status&&o._onComplete(e,n),\"error\"===t&&o._onError(e,n)})}},{key:\"getCityByIp\",value:function(t,n){var o=this;if(t){var e=[\"ip=\"+t,\"key=\"+this.config.key,\"s=rsv3\"],r=this.url+(0<e.length?\"?\"+e.join(\"&\"):\"\");i.WebService.get(r,{},function(t,e){\"complete\"===t&&e.status&&\"1\"===e.status&&o._onComplete(e,n),\"error\"===t&&o._onError(e,n)})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"_onError\",value:function(t,e){this.emit(\"error\",t.info),e&&\"function\"==typeof e&&e(\"error\",t.info)}},{key:\"_onComplete\",value:function(t,e){var n;if(parseInt(t.status,10))if(t.city&&\"string\"==typeof t.city&&t.rectangle&&\"string\"==typeof t.rectangle){var o=t.rectangle.split(\";\");o=o[0].split(\",\").concat(o[1].split(\",\")),n=Object.assign({},t,{bounds:new i.Bounds(o[0],o[1],o[2],o[3])}),this.emit(\"complete\",n),e&&\"function\"==typeof e&&e(\"complete\",n)}else n={info:\"ok\"===t.info.toLowerCase()?\"NO_DATA\":t.info},this.emit(\"complete\",n),e&&\"function\"==typeof e&&e(\"no_data\",{});else n={info:t.info},this.emit(\"error\",n),e&&\"function\"==typeof e&&e(\"error\",t.info)}}])&&r(t.prototype,e),o&&r(t,o),n}();i.CitySearch=t}(window.AMap);\n");
_jsload_('AMap.CloudDataLayer.js',"!function(l){\"use strict\";function r(t){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e,i){var a,o,n;if(function(t){if(!(t instanceof p))throw new TypeError(\"Cannot call a class as a function\")}(this),o=this,a=!(n=s(p).call(this))||\"object\"!=r(n)&&\"function\"!=typeof n?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(o):n,\"string\"!=typeof t)throw\"第一个参数必须传入数据源url\";return a._url=t,i=i||{},a._tileSize=i.tileSize||256,a._resolution=i.resolution||4,a._pointerCursor=i.pointerCursor||!0,a._subdomains=i.subdomains||\"abcd\",\"string\"==typeof a._subdomains&&(a._subdomains=a._subdomains.split(\"\")),a._data={},a._isOnData=!1,e&&a.setMap(e),a}var O,M,t,h,e;function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function v(){this.CLASS_NAME=\"AMap.CloudDataSearchRender\";var u=this;u.autoRender=function(t){u.clear(),t&&t.methodName&&t.methodArgumments&&(t.panel||t.map)&&(this.options=t,this.callback(\"complete\",t.data))},u.callback=function(t,e){u.clear();var i=u.options;if(i.callback&&i.callback(t,e),\"complete\"===t){if(u.result=e,i.map){if(u._infoWindow=new h.InfoWindow({isCustom:!0,offset:new h.Pixel(0,-30)}),u._overlays=[],u._highlightOverlay=null,e.datas&&u.drawOverlays(e),\"searchNearBy\"===i.methodName){var a=u.options.methodArgumments;u.drawCircle(a[0],a[1])}\"searchInPolygon\"===i.methodName&&(a=u.options.methodArgumments,u.drawPolygon(a[0]))}i.panel&&(\"[object String]\"===Object.prototype.toString.call(i.panel)&&(i.panel=document.getElementById(i.panel)),i.panel.innerHTML=u.view.createPanel(e),u.enableListeners())}},u.clear=function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearPolygon()},u.drawOverlays=function(t){u.clearOverlays();var e=t.datas;u._overlays=this.addOverlays(e),u.options.autoFitView&&u.options.map.setFitView(this._overlays)},u.addOverlays=function(t){for(var e,i=this.options.map,a=[],o=0;o<t.length;o++)(e=new h.Marker({map:i,topWhenClick:!0,position:t[o]._location,anchor:\"bottom-center\",content:'<div class=\"amap_lib_cloudDataSearch_poi\">'+(o+1)+\"</div>\"})).isOfficial=!0,t[o].index=o,e._data=t[o],e.on(\"click\",this.listener.markerClick),a.push(e);return a},u.clearPanel=function(){this.options&&this.options.panel&&this.options.panel.innerHTML&&(this.options.panel.innerHTML=\"\")},u.clearOverlays=function(){if(this._overlays){for(var t=0;t<this._overlays.length;t++)this._overlays[t].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close()},u.setCenter=function(t){var e=u.result.datas[t];e.index=t,u.options.map.setCenter(e._location),u._overlays[t].setTop(!0),u.listener.markerClick.call({_data:e,getPosition:function(){return e._location}})},u.util={},u.util.getElementsByClassName=function(t,e,i){for(var a,o=new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|$)\"),n=(e=e||\"*\",(i=i||document).getElementsByTagName(e)),r=[],s=0;s<n.length;s++)a=n[s],o.test(a.className)&&r.push(a);return r},u.enableListeners=function(){for(var t=u.util.getElementsByClassName(\"poibox\",\"*\",u.options.panel),e=0;e<t.length;e++)t[e].addEventListener(\"click\",this.listener.unfocusTitleClick);var i=u.util.getElementsByClassName(\"pageLink\",\"*\",u.options.panel);for(e=0;e<i.length;e++)i[e].addEventListener(\"click\",u.listener.toPage)},u.listener={},u.listener.markerClick=function(){var t=this._data;u._infoWindow.setContent(u.view.createInfowindowContent(t)),u._infoWindow.open(u.options.map,this.getPosition()),u.options.map.setCenter(this.getPosition())},u.listener.unfocusTitleClick=function(){var t;u.last&&(u.last.className=\"poibox\");for(var e=(u._currentDiv=this).parentNode.children,i=0;i<e.length;i++)if(e[i]===this){t=i;break}u._currentIndex=t;var a=u._currentDiv;a.className=\"poibox active\",u.last=a,u.options.map&&u.setCenter(u._currentIndex)},u.listener.toPage=function(){var t=this.getAttribute(\"pageNo\");u.toPage(t)},u.toPage=function(t){t.length&&(t=parseInt(t)),u.options.cloudDataSearchInstance.setPageIndex(t),u.options.cloudDataSearchInstance[u.options.methodName].apply(u.options.cloudDataSearchInstance,u.options.methodArgumments)},u.view={},u.view.createInfowindowContent=function(t){var e=document.createElement(\"div\"),i=document.createElement(\"div\");i.className=\"amap-content-body\";var a=[];a.push('<div class=\"amap-lib-infowindow\">'),a.push('    <div class=\"amap-lib-infowindow-title\">'+(t.index+1)+\".\"+t._name+\"</div>\"),a.push('    <div class=\"amap-lib-infowindow-content\">'),a.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),a.push(\"             <div>地址：\"+t._address+\"</div>\"),a.push(\"             <div>类型：\"+t.type+\"</div>\"),t._image&&t._image.length&&a.push('         <img style = \"margin-top:5px;width:224px;height:100px\" src=\"'+t._image[0]._preurl+'\"\"></img>'),a.push(\"        </div>\"),a.push(\"    </div>\"),a.push(\"</div>\"),i.innerHTML=a.join(\"\");var o=document.createElement(\"div\");o.className=\"amap-combo-sharp\",i.appendChild(o);var n=document.createElement(\"div\");return n.className=\"amap-combo-close\",i.appendChild(n),n.href=\"javascript: void(0)\",n.addEventListener(\"touchend\",function(t){u._infoWindow.close()},this),n.addEventListener(\"click\",function(t){u._infoWindow.close()},this),e.appendChild(i),e.appendChild(n),e.appendChild(o),e},u.view.createPanel=function(t){if(!(\"OK\"===t.info&&t.datas&&0<t.datas.length))return\"<div class='amap_lib_cloudDataSearch'>抱歉，未搜索到有效的结果。</div>\";var e=t.datas,i=[];i.push('<div class=\"amap_lib_cloudDataSearch\">'),i.push('    <div class=\"amap_lib_cloudDataSearch_list\">'),i.push(\"        <ul>\");for(var a,o=0;o<e.length;o++)a=e[o],i.push('            <li class=\"poibox\">'),i.push('                <div class=\"amap_lib_cloudDataSearch_poi poibox-icon\">'+(o+1)+\"</div>\"),i.push('                <h3 class=\"poi-title\">'),i.push('                \\t<span class=\"poi-name\">'+a._name+\"</span>\"),i.push(\"                </h3>\"),i.push('                <div class=\"poi-info\">'),i.push('                \\t<p class=\"poi-addr\">地址：'+a._address+\"</p>\"),i.push(\"                </div>\"),i.push(\"            </li>\");i.push(\"        </ul>\"),i.push(\"    </div>\"),i.push('    <div class=\"amap_lib_cloudDataSearch_page\">'),i.push(\"        <div>\"),i.push(\"            <p>\"),t.poiList;var n=t.count,r=u.options.pageIndex?u.options.pageIndex:1,s=u.options.pageSize?u.options.pageSize:500,l=Math.ceil(n/s);return 3<r&&i.push(u.view.createPageButton(1,\"首页\")),1<r&&i.push(u.view.createPageButton(r-1,\"上一页\")),1<=r-2&&i.push(u.view.createPageButton(r-2,r-2)),1<=r-1&&i.push(u.view.createPageButton(r-1,r-1)),i.push(\"                <span>\"+r+\"</span>\"),r+1<=l&&i.push(u.view.createPageButton(r+1,r+1)),r+2<=l&&i.push(u.view.createPageButton(r+2,r+2)),r<l&&i.push(u.view.createPageButton(r+1,\"下一页\")),i.push(\"            </p>\"),i.push(\"        </div>\"),i.push(\"    </div>\"),i.push(\"</div>\"),i.join(\"\")};var i={id:\"cloudData-search-circle\",radius:3e3,strokeColor:\"#72ccff\",strokeOpacity:.7,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.5};u.drawCircle=function(t,e){u.clearCircle(),i.map=u.options.map,i.center=t,i.radius=e,u.searchCircle=new h.Circle(i),u.searchCircle.isOfficial=!0},u.clearCircle=function(){u.searchCircle&&(u.searchCircle.setMap(null),u.searchCircle=null)};var e={id:\"cloudData-search-bound\",strokeColor:\"#72ccff\",strokeOpacity:.7,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2};u.drawPolygon=function(t){u.clearPolygon(),e.path=t,e.map=u.options.map,(t=new h.Polygon(e)).isOfficial=!0,u.searchPolygon=t},u.clearPolygon=function(){u.searchPolygon&&(u.searchPolygon.setMap(null),u.searchPolygon=null)},u.view.createPageButton=function(t,e){return\"<span><a pageNo=\"+t+' class=\"pageLink\" >'+e+\"</a></span>\"}}function y(t,e){var i,a;!function(t){if(!(t instanceof y))throw new TypeError(\"Cannot call a class as a function\")}(this),(i=!(a=n(y).call(this))||\"object\"!=r(a)&&\"function\"!=typeof a?f(this):a).CLASS_NAME=\"AMap.CloudDataSearch\";var o=h.getConfig().protocol+\"://yuntuapi.amap.com\";return i.url=o+\"/datasearch/\",e=e||{},\"string\"==typeof t?(e.tableid=t,i._initialize(e)):i._initialize.apply(f(i),arguments),i}O=window.AMap,M=20037508.342789244,function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(p,O.Event),function(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(p.prototype,[{key:\"setMap\",value:function(t){this._map&&(this._map.off(\"click\",this._onClick),this._map.off(\"mousemove\",this._onMouseMove),this._map.off(\"moveend\",this._updateData),this._map.off(\"zoomend\",this._updateData),this._map.setDefaultCursor(this._originCursor)),(this._map=t)&&(t.on(\"click\",this._onClick,this),t.on(\"mousemove\",this._onMouseMove.bind(this)),t.on(\"moveend\",this._updateData.bind(this)),t.on(\"zoomend\",this._updateData.bind(this)),this._originCursor=t.getDefaultCursor(),this._updateData())}},{key:\"_onClick\",value:function(t){var e=t.lnglat,i=this._searchData(e);i&&this.emit(\"click\",{lnglat:e,data:i})}},{key:\"_onMouseMove\",value:function(t){var e=t.lnglat,i=this._searchData(e);i&&this._currentData!==i&&(this._pointerCursor&&this._map.setDefaultCursor(\"pointer\"),this._currentData&&this.emit(\"mouseout\",{lnglat:e,data:this._currentData}),this.emit(\"mouseover\",{lnglat:e,data:i})),!i&&this._currentData&&(this._pointerCursor&&this._map.setDefaultCursor(this._originCursor),this.emit(\"mouseout\",{lnglat:e,data:this._currentData})),this._currentData=i}},{key:\"_updateData\",value:function(){var t=this._map,e=Math.floor(t.getZoom()),i=t.getBounds(),a=t.getResolution(),o=i.getNorthWest().pos,n=i.getSouthEast().pos,r=this._tileSize,s=o[0]+M,l=M-n[1],u=n[0]+M,c=s/a,p=(M-o[1])/a,h=u/a,d=l/a,f=Math.floor(c/r),v=Math.floor(p/r),y=Math.floor(h/r),m=Math.floor(d/r),g=Math.pow(2,e);y<f&&(y+=g);for(var _=f;_<=y;_+=1)for(var b=v;b<=m;b+=1){var w=(_+g)%g,k=[e,w,b].join(\"_\");if(!this._data.hasOwnProperty(k)){var C=this._getUrl(w,b,e);O.WebService.get(C,{},this._complete.bind(this,k))}}}},{key:\"_complete\",value:function(t,e,i){if(\"complete\"===e){for(var a in i.data)if(i.data.hasOwnProperty(a)){var o=i.data[a];if(o._ll){var n=o._ll.split(\",\");i.data[a]={_name:o._name,_location:new O.LngLat(n[0],n[1]),_id:o._id}}}this._data[t]=i}return{}}},{key:\"_getUrl\",value:function(t,e,i){var a=Math.floor(3*Math.random()),o=this._subdomains[a];return this._url.replace(\"[s]\",o).replace(\"[x]\",t).replace(\"[y]\",e).replace(\"[z]\",i)}},{key:\"_searchData\",value:function(t){var e=this._map,i=e.getProjection().project(t.lng,t.lat),a=M,o=this._tileSize,n=e.getResolution(),r=this._resolution,s=(i[0]+a)/n,l=(a-i[1])/n,u=Math.floor(s/o),c=Math.floor(l/o),p=Math.floor((s-u*o)/r),h=Math.floor((l-c*o)/r),d=this._data[Math.floor(e.getZoom())+\"_\"+u+\"_\"+c];if(!d||!d.grid)return null;var f=this._utfDecode(d.grid[h].charCodeAt(p)),v=d.keys[f],y=d.data[v];return d.data.hasOwnProperty(v)||(y=null),y}},{key:\"_utfDecode\",value:function(t){return 93<=t&&--t,35<=t&&--t,t-32}}]),t=p,window.AMap.UTFGrid=t,function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(y,(h=window.AMap).Event),function(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(y.prototype,[{key:\"_initialize\",value:function(t){this.opts=this._extend(t,{extensions:\"base\",language:\"en\",enc:\"utf-8\",output:\"jsonp\",autoFitView:!0}),(this.opts.map||this.opts.panel)&&(this.opts.extensions=\"all\")}},{key:\"_optionMap\",value:function(t){var e={};for(var i in t=this._extend(t,this.opts))if(t.hasOwnProperty(i))switch(i){case\"pageSize\":e.limit=t[i];break;case\"pageIndex\":e.page=t[i];break;case\"orderBy\":var a=/([^:]+)(:([^:]+))?/.exec(t[i]);a&&(\"_weight\"===a[0]||\"_distance\"===a[0]||void 0===a[3]?e.sortrule=a[0]:e.sortrule=(a[1]&&a[1])+\":\"+(a[3]&&\"ASC\"!==a[3]?0:1));break;case\"id\":e._id=t[i];break;default:e[i]=t[i]}return e}},{key:\"setOptions\",value:function(t){this.opts=this._extend(t,this.opts)}},{key:\"clear\",value:function(){this.render&&this.render.clear()}},{key:\"setPageIndex\",value:function(t){this.opts.pageIndex=t}},{key:\"setPageSize\",value:function(t){this.opts.pageSize=t}},{key:\"searchNearBy\",value:function(t,e,a){var o=this;if(t instanceof h.LngLat&&\"number\"==typeof e){e=\"number\"==typeof e&&0<e&&e<=5e4?e:3e3;var i={center:t.toString(),radius:e};i=this._extend(i,this.opts),i=this._optionMap(i);var n=this._spliceUrl({},\"around\"),r=arguments;h.WebService.get(n,i,function(t,e){var i=e;return\"complete\"===t?o._onComplete(i,a,\"searchNearBy\",r):\"error\"===t&&o._onError(i,a),{}})}else a&&\"function\"==typeof a&&a(\"error\",\"NO_PARAMS\")}},{key:\"searchById\",value:function(t,a){var o=this;if(t){var e={id:t};e=this._extend(e,this.opts),e=this._optionMap(e);var i=this._spliceUrl({},\"id\");h.WebService.get(i,e,function(t,e){var i=e;return\"complete\"===t?o._onComplete(i,a):\"error\"===t&&o._onError(i,a),{}})}else a&&\"function\"==typeof a&&a(\"error\",\"NO_PARAMS\")}},{key:\"searchByDistrict\",value:function(t,a){var o=this;if(t){var e={city:t};e=this._extend(e,this.opts),(e=this._optionMap(e)).hasOwnProperty(\"keywords\")||(e.keywords=\"\");var i=this._spliceUrl({},\"local\"),n=arguments;h.WebService.get(i,e,function(t,e){var i=e;return\"complete\"===t?o._onComplete(i,a,\"searchByDistrict\",n):\"error\"===t&&o._onError(e,a),{}})}else a&&\"function\"==typeof a&&a(\"error\",\"NO_PARAMS\")}},{key:\"searchInPolygon\",value:function(t,a){var o=this;if(t=h.Util.parseLngLatData(t),this._isArray(t)&&t[0]instanceof h.LngLat){var e={polygon:this._parseArea(t)};e=this._extend(e,this.opts),e=this._optionMap(e);var i=this._spliceUrl({},\"polygon\"),n=arguments;h.WebService.get(i,e,function(t,e){var i=e;return\"complete\"===t?o._onComplete(i,a,\"searchInPolygon\",n):\"error\"===t&&o._onError(i,a),{}})}else a&&\"function\"==typeof a&&a(\"error\",\"NO_PARAMS\")}},{key:\"_parseArea\",value:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i].toString());return e.join(\";\")}},{key:\"_spliceUrl\",value:function(t,e){var i=[];for(var a in t)t.hasOwnProperty(a)&&i.push(a+\"=\"+t[a]);return this.url+e+(0<i.length?\"?\"+i.join(\"&\"):\"\")}},{key:\"_parseResult\",value:function(t){var e={info:t.info,count:parseInt(t.count,10)},i=[];t=t.datas;for(var a=0;a<t.length;a+=1){var o={};for(var n in t[a])if(t[a].hasOwnProperty(n))switch(n){case\"_distance\":o[n]=+t[a][n];break;case\"_location\":var r=t[a][n].split(\",\");o[n]=new h.LngLat(+r[0],+r[1]);break;default:o[n]=t[a][n]}i.push(o)}return e.datas=i,e}},{key:\"_onComplete\",value:function(t,e,i,a){var o,n=1==+t.status&&this._isArray(t.datas)&&0<t.datas.length,r=\"ok\"===t.info.toLowerCase()&&this._isArray(t.datas)&&0===t.datas.length;n?(o=this._parseResult(t),(this.opts.map||this.opts.panel)&&this._autoRender(o,i,a),e&&\"function\"==typeof e&&e(\"complete\",o)):(o=r?{info:\"NO_DATA\"}:{info:t.info},(this.opts.map||this.opts.panel)&&this._autoRender(o,i,a),e&&\"function\"==typeof e&&e(\"no_data\",{}))}},{key:\"_autoRender\",value:function(t,e,i){var a=this;a.render||(a.render=new v),a.render.autoRender({cloudDataSearchInstance:a,pageIndex:a.opts.pageIndex,pageSize:a.opts.pageSize,methodName:e,methodArgumments:i,data:t,panel:a.opts.panel,map:a.opts.map,autoFitView:a.opts.autoFitView})}},{key:\"_onError\",value:function(t,e){a2js.event.trigger(this,\"error\",t),e&&\"function\"==typeof e&&e(\"error\",t.info)}},{key:\"_isArray\",value:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},{key:\"_parseString\",value:function(t){return\"string\"==typeof t?t:\"\"}},{key:\"_extend\",value:function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}}]),e=y,window.AMap.CloudDataSearch=e;var m=function(){function s(t,e){var i,a,o;if(!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,s),a=this,(i=!(o=u(s).call(this))||\"object\"!=typeof o&&\"function\"!=typeof o?c(a):o).CLASS_NAME=\"AMap.CloudDataLayer\",!t)throw\"tableId is required\";i.config=l.getConfig();var n=i.config.protocol+\"://yuntuapi.amap.com\";i.tableId=t,void 0===(e=e||{}).clickable&&(e.clickable=!0),void 0===e.showLabel&&(e.showLabel=!0),e.imgUrl=e.imgUrl||n+\"/rendered/img\",e.dataUrl=e.dataUrl||n+\"/rendered/data\",i.options=e,i.label=new l.Marker({offset:new l.Pixel(15,0),innerOverlay:!0}),i.label.isOfficial=!0,1===e.mode&&(i.resolution=3);var r=c(i);return r.loaded=!0,r.setMap(r.options.map),i}var t,e,i;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(s,l.Event),t=s,(e=[{key:\"reload\",value:function(){var t=(new Date).getTime();this.tilelayer&&(this.tilelayer.setTileUrl(this.wrapUrl(this.options.imgUrl,!0)+\"&tm=\"+t),this.tilelayer.reload()),this.utfgrid&&(this.utfgrid._url=this.wrapUrl(this.options.dataUrl)+\"&tm=\"+t,this.utfgrid._updateData())}},{key:\"setMap\",value:function(t){if(t&&(this.options.map=t,this.loaded)){if(this.tilelayer)this.tilelayer.setTileUrl(this.wrapUrl(this.options.imgUrl,!0)),this.tilelayer.reload();else{var e=this.wrapUrl(this.options.imgUrl,!0)+\"s=rsv3\";this.tilelayer=new l.TileLayer({innerLayer:!0,transparency:!0,rejectMapMask:!0,zIndex:105,tileUrl:e})}this.utfgrid||(this.utfgrid=new l.UTFGrid(this.wrapUrl(this.options.dataUrl),t,{resolution:this.resolution||4}),this.mouseoverListener=this.utfgrid.on(\"mouseover\",this.onMouseOver,this),this.mouseoutListener=this.utfgrid.on(\"mouseout\",this.onMouseOut,this),this.clickListener=this.utfgrid.on(\"click\",this.onClick,this)),this.cloudDataSearch||(this.cloudDataSearch=new l.CloudDataSearch(this.tableId)),this.tilelayer.setMap(t),this.utfgrid.setMap(t)}}},{key:\"getMap\",value:function(){return this.options.map}},{key:\"setOptions\",value:function(t){void 0!==(t=t||{}).map&&this.setMap(t.map),void 0!==t.clickable&&(this.options.clickable=t.clickable),void 0!==t.query&&(this.isQueryEqual(this.options.query,t.query)||(this.options.query=t.query,(this.tilelayer||this.utfgrid)&&(this.tilelayer&&this.tilelayer.setMap(null),this.utfgrid&&(l.Event.removeListener(this.mouseoverListener),l.Event.removeListener(this.mouseoutListener),l.Event.removeListener(this.clickListener),this.utfgrid.setMap(null)),this.tilelayer=null,this.utfgrid=null,this.setMap(this.options.map)))),void 0!==t.showLabel&&(this.options.showLabel=t.showLabel)}},{key:\"wrapUrl\",value:function(t){var e=t;return e+=\"?key=\"+this.config.key,e+=\"&tableid=\"+this.tableId,3===this.resolution&&(e+=\"&model=1\"),this.options.query&&this.options.query.keywords&&(e+=\"&keywords=\"+this.options.query.keywords),this.options.query&&this.options.query.filter&&(e+=\"&filter=\"+this.options.query.filter),e+=\"&z=[z]&x=[x]&y=[y]&\"}},{key:\"isQueryEqual\",value:function(t,e){var i=t&&t.keywords,a=e&&e.keywords,o=t&&t.filter,n=e&&e.filter;return i===a&&o===n}},{key:\"onMouseOver\",value:function(t){this.options.showLabel&&(this.label.setContent('<div style=\"white-space:nowrap; border: solid #ccc 1px; border-radius:3px; background-image: -ms-linear-gradient(top, #FFFFFF 0%, #ddd 100%);background-image: -moz-linear-gradient(top, #FFFFFF 0%, #ddd 100%);background-image: -o-linear-gradient(top, #FFFFFF 0%, #ddd 100%);background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #FFFFFF), color-stop(1, #ddd));background-image: -webkit-linear-gradient(top, #FFFFFF 0%, #ddd 100%);background-image: linear-gradient(to bottom, #FFFFFF 0%, #ddd 100%);background-color: #fff; padding:2px;box-shadow: 0 3px 14px rgba(0, 0, 0, 0.5);\">'+t.data._name+\"</div>\"),this.label.setPosition(t.lnglat),this.label.setMap(this.options.map)),this.emit(this,\"mouseover\",{lnglat:t.lnglat,data:t.data,target:this})}},{key:\"onMouseOut\",value:function(t){this.label.setMap(null),this.emit(\"mouseout\",{lnglat:t.lnglat,data:t.data,target:this})}},{key:\"onClick\",value:function(i){if(this.options.clickable&&this.cloudDataSearch){var a=this;this.cloudDataSearch.searchById(i.data._id,function(t,e){\"complete\"===t&&a.onIdSearch(e,i.lnglat)})}}},{key:\"onIdSearch\",value:function(t,e){this.emit(\"click\",{lnglat:e,data:t.datas&&t.datas[0],target:this})}}])&&a(t.prototype,e),i&&a(t,i),s}();window.AMap.CloudDataLayer=m}(window.AMap);\n");
_jsload_('AMap.CloudDataSearch.js',"!function(s){\"use strict\";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function o(){this.CLASS_NAME=\"AMap.CloudDataSearchRender\";var c=this;c.autoRender=function(e){c.clear(),e&&e.methodName&&e.methodArgumments&&(e.panel||e.map)&&(this.options=e,this.callback(\"complete\",e.data))},c.callback=function(e,t){c.clear();var a=c.options;if(a.callback&&a.callback(e,t),\"complete\"===e){if(c.result=t,a.map){if(c._infoWindow=new s.InfoWindow({isCustom:!0,offset:new s.Pixel(0,-30)}),c._overlays=[],c._highlightOverlay=null,t.datas&&c.drawOverlays(t),\"searchNearBy\"===a.methodName){var n=c.options.methodArgumments;c.drawCircle(n[0],n[1])}if(\"searchInPolygon\"===a.methodName){n=c.options.methodArgumments;c.drawPolygon(n[0])}}a.panel&&(\"[object String]\"===Object.prototype.toString.call(a.panel)&&(a.panel=document.getElementById(a.panel)),a.panel.innerHTML=c.view.createPanel(t),c.enableListeners())}},c.clear=function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearPolygon()},c.drawOverlays=function(e){c.clearOverlays();var t=e.datas;c._overlays=this.addOverlays(t),c.options.autoFitView&&c.options.map.setFitView(this._overlays)},c.addOverlays=function(e){for(var t,a=this.options.map,n=[],i=0;i<e.length;i++)(t=new s.Marker({map:a,topWhenClick:!0,position:e[i]._location,anchor:\"bottom-center\",content:'<div class=\"amap_lib_cloudDataSearch_poi\">'+(i+1)+\"</div>\"})).isOfficial=!0,e[i].index=i,t._data=e[i],t.on(\"click\",this.listener.markerClick),n.push(t);return n},c.clearPanel=function(){this.options&&this.options.panel&&this.options.panel.innerHTML&&(this.options.panel.innerHTML=\"\")},c.clearOverlays=function(){if(this._overlays){for(var e=0;e<this._overlays.length;e++)this._overlays[e].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close()},c.setCenter=function(e){var t=c.result.datas[e];t.index=e,c.options.map.setCenter(t._location),c._overlays[e].setTop(!0),c.listener.markerClick.call({_data:t,getPosition:function(){return t._location}})},c.util={},c.util.getElementsByClassName=function(e,t,a){for(var n,i=new RegExp(\"(^|\\\\s)\"+e+\"(\\\\s|$)\"),o=(t=t||\"*\",(a=a||document).getElementsByTagName(t)),r=[],s=0;s<o.length;s++)n=o[s],i.test(n.className)&&r.push(n);return r},c.enableListeners=function(){for(var e=c.util.getElementsByClassName(\"poibox\",\"*\",c.options.panel),t=0;t<e.length;t++)e[t].addEventListener(\"click\",this.listener.unfocusTitleClick);var a=c.util.getElementsByClassName(\"pageLink\",\"*\",c.options.panel);for(t=0;t<a.length;t++)a[t].addEventListener(\"click\",c.listener.toPage)},c.listener={},c.listener.markerClick=function(){var e=this._data;c._infoWindow.setContent(c.view.createInfowindowContent(e)),c._infoWindow.open(c.options.map,this.getPosition()),c.options.map.setCenter(this.getPosition())},c.listener.unfocusTitleClick=function(){var e;c.last&&(c.last.className=\"poibox\");for(var t=(c._currentDiv=this).parentNode.children,a=0;a<t.length;a++)if(t[a]===this){e=a;break}c._currentIndex=e;var n=c._currentDiv;n.className=\"poibox active\",c.last=n,c.options.map&&c.setCenter(c._currentIndex)},c.listener.toPage=function(){var e=this.getAttribute(\"pageNo\");c.toPage(e)},c.toPage=function(e){e.length&&(e=parseInt(e)),c.options.cloudDataSearchInstance.setPageIndex(e),c.options.cloudDataSearchInstance[c.options.methodName].apply(c.options.cloudDataSearchInstance,c.options.methodArgumments)},c.view={},c.view.createInfowindowContent=function(e){var t=document.createElement(\"div\"),a=document.createElement(\"div\");a.className=\"amap-content-body\";var n=[];n.push('<div class=\"amap-lib-infowindow\">'),n.push('    <div class=\"amap-lib-infowindow-title\">'+(e.index+1)+\".\"+e._name+\"</div>\"),n.push('    <div class=\"amap-lib-infowindow-content\">'),n.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),n.push(\"             <div>地址：\"+e._address+\"</div>\"),n.push(\"             <div>类型：\"+e.type+\"</div>\"),e._image&&e._image.length&&n.push('         <img style = \"margin-top:5px;width:224px;height:100px\" src=\"'+e._image[0]._preurl+'\"\"></img>'),n.push(\"        </div>\"),n.push(\"    </div>\"),n.push(\"</div>\"),a.innerHTML=n.join(\"\");var i=document.createElement(\"div\");i.className=\"amap-combo-sharp\",a.appendChild(i);var o=document.createElement(\"div\");return o.className=\"amap-combo-close\",a.appendChild(o),o.href=\"javascript: void(0)\",o.addEventListener(\"touchend\",function(e){c._infoWindow.close()},this),o.addEventListener(\"click\",function(e){c._infoWindow.close()},this),t.appendChild(a),t.appendChild(o),t.appendChild(i),t},c.view.createPanel=function(e){if(!(\"OK\"===e.info&&e.datas&&0<e.datas.length))return\"<div class='amap_lib_cloudDataSearch'>抱歉，未搜索到有效的结果。</div>\";var t=e.datas,a=[];a.push('<div class=\"amap_lib_cloudDataSearch\">'),a.push('    <div class=\"amap_lib_cloudDataSearch_list\">'),a.push(\"        <ul>\");for(var n,i=0;i<t.length;i++)n=t[i],a.push('            <li class=\"poibox\">'),a.push('                <div class=\"amap_lib_cloudDataSearch_poi poibox-icon\">'+(i+1)+\"</div>\"),a.push('                <h3 class=\"poi-title\">'),a.push('                \\t<span class=\"poi-name\">'+n._name+\"</span>\"),a.push(\"                </h3>\"),a.push('                <div class=\"poi-info\">'),a.push('                \\t<p class=\"poi-addr\">地址：'+n._address+\"</p>\"),a.push(\"                </div>\"),a.push(\"            </li>\");a.push(\"        </ul>\"),a.push(\"    </div>\"),a.push('    <div class=\"amap_lib_cloudDataSearch_page\">'),a.push(\"        <div>\"),a.push(\"            <p>\");e.poiList;var o=e.count,r=c.options.pageIndex?c.options.pageIndex:1,s=c.options.pageSize?c.options.pageSize:500,l=Math.ceil(o/s);return 3<r&&a.push(c.view.createPageButton(1,\"首页\")),1<r&&a.push(c.view.createPageButton(r-1,\"上一页\")),1<=r-2&&a.push(c.view.createPageButton(r-2,r-2)),1<=r-1&&a.push(c.view.createPageButton(r-1,r-1)),a.push(\"                <span>\"+r+\"</span>\"),r+1<=l&&a.push(c.view.createPageButton(r+1,r+1)),r+2<=l&&a.push(c.view.createPageButton(r+2,r+2)),r<l&&a.push(c.view.createPageButton(r+1,\"下一页\")),a.push(\"            </p>\"),a.push(\"        </div>\"),a.push(\"    </div>\"),a.push(\"</div>\"),a.join(\"\")};var a={id:\"cloudData-search-circle\",radius:3e3,strokeColor:\"#72ccff\",strokeOpacity:.7,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.5};c.drawCircle=function(e,t){c.clearCircle(),a.map=c.options.map,a.center=e,a.radius=t,c.searchCircle=new s.Circle(a),c.searchCircle.isOfficial=!0},c.clearCircle=function(){c.searchCircle&&(c.searchCircle.setMap(null),c.searchCircle=null)};var t={id:\"cloudData-search-bound\",strokeColor:\"#72ccff\",strokeOpacity:.7,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2};c.drawPolygon=function(e){c.clearPolygon(),t.path=e,t.map=c.options.map,(e=new s.Polygon(t)).isOfficial=!0,c.searchPolygon=e},c.clearPolygon=function(){c.searchPolygon&&(c.searchPolygon.setMap(null),c.searchPolygon=null)},c.view.createPageButton=function(e,t){return\"<span><a pageNo=\"+e+' class=\"pageLink\" >'+t+\"</a></span>\"}}var e=function(){function r(e,t){var a,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,r),n=this,(a=!(i=l(r).call(this))||\"object\"!=typeof i&&\"function\"!=typeof i?c(n):i).CLASS_NAME=\"AMap.CloudDataSearch\";var o=s.getConfig().protocol+\"://yuntuapi.amap.com\";return a.url=o+\"/datasearch/\",t=t||{},\"string\"==typeof e?(t.tableid=e,a._initialize(t)):a._initialize.apply(c(a),arguments),a}var e,t,a;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,s.Event),e=r,(t=[{key:\"_initialize\",value:function(e){this.opts=this._extend(e,{extensions:\"base\",language:\"en\",enc:\"utf-8\",output:\"jsonp\",autoFitView:!0}),(this.opts.map||this.opts.panel)&&(this.opts.extensions=\"all\")}},{key:\"_optionMap\",value:function(e){var t={};for(var a in e=this._extend(e,this.opts))if(e.hasOwnProperty(a))switch(a){case\"pageSize\":t.limit=e[a];break;case\"pageIndex\":t.page=e[a];break;case\"orderBy\":var n=/([^:]+)(:([^:]+))?/.exec(e[a]);n&&(\"_weight\"===n[0]||\"_distance\"===n[0]||void 0===n[3]?t.sortrule=n[0]:t.sortrule=(n[1]&&n[1])+\":\"+(n[3]&&\"ASC\"!==n[3]?0:1));break;case\"id\":t._id=e[a];break;default:t[a]=e[a]}return t}},{key:\"setOptions\",value:function(e){this.opts=this._extend(e,this.opts)}},{key:\"clear\",value:function(){this.render&&this.render.clear()}},{key:\"setPageIndex\",value:function(e){this.opts.pageIndex=e}},{key:\"setPageSize\",value:function(e){this.opts.pageSize=e}},{key:\"searchNearBy\",value:function(e,t,n){var i=this;if(\"AMap.LngLat\"===e.className&&\"number\"==typeof t){t=\"number\"==typeof t&&0<t&&t<=5e4?t:3e3;var a={center:e.toString(),radius:t};a=this._extend(a,this.opts),a=this._optionMap(a);var o=this._spliceUrl({},\"around\"),r=arguments;s.WebService.get(o,a,function(e,t){var a=t;return\"complete\"===e?i._onComplete(a,n,\"searchNearBy\",r):\"error\"===e&&i._onError(a,n),{}})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"searchById\",value:function(e,n){var i=this;if(e){var t={id:e};t=this._extend(t,this.opts),t=this._optionMap(t);var a=this._spliceUrl({},\"id\");s.WebService.get(a,t,function(e,t){var a=t;return\"complete\"===e?i._onComplete(a,n):\"error\"===e&&i._onError(a,n),{}})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"searchByDistrict\",value:function(e,n){var i=this;if(e){var t={city:e};t=this._extend(t,this.opts),(t=this._optionMap(t)).hasOwnProperty(\"keywords\")||(t.keywords=\"\");var a=this._spliceUrl({},\"local\"),o=arguments;s.WebService.get(a,t,function(e,t){var a=t;return\"complete\"===e?i._onComplete(a,n,\"searchByDistrict\",o):\"error\"===e&&i._onError(t,n),{}})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"searchInPolygon\",value:function(e,n){var i=this;if(e=s.Util.parseLngLatData(e),this._isArray(e)&&\"AMap.LngLat\"===e[0].className){var t={polygon:this._parseArea(e)};t=this._extend(t,this.opts),t=this._optionMap(t);var a=this._spliceUrl({},\"polygon\"),o=arguments;s.WebService.get(a,t,function(e,t){var a=t;return\"complete\"===e?i._onComplete(a,n,\"searchInPolygon\",o):\"error\"===e&&i._onError(a,n),{}})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"_parseArea\",value:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a].toString());return t.join(\";\")}},{key:\"_spliceUrl\",value:function(e,t){var a=[];for(var n in e)e.hasOwnProperty(n)&&a.push(n+\"=\"+e[n]);return this.url+t+(0<a.length?\"?\"+a.join(\"&\"):\"\")}},{key:\"_parseResult\",value:function(e){var t={info:e.info,count:parseInt(e.count,10)},a=[];e=e.datas;for(var n=0;n<e.length;n+=1){var i={};for(var o in e[n])if(e[n].hasOwnProperty(o))switch(o){case\"_distance\":i[o]=+e[n][o];break;case\"_location\":var r=e[n][o].split(\",\");i[o]=new s.LngLat(+r[0],+r[1]);break;default:i[o]=e[n][o]}a.push(i)}return t.datas=a,t}},{key:\"_onComplete\",value:function(e,t,a,n){var i,o=1==+e.status&&this._isArray(e.datas)&&0<e.datas.length,r=\"ok\"===e.info.toLowerCase()&&this._isArray(e.datas)&&0===e.datas.length;o?(i=this._parseResult(e),(this.opts.map||this.opts.panel)&&this._autoRender(i,a,n),t&&\"function\"==typeof t&&t(\"complete\",i)):(i=r?{info:\"NO_DATA\"}:{info:e.info},(this.opts.map||this.opts.panel)&&this._autoRender(i,a,n),t&&\"function\"==typeof t&&t(\"no_data\",{}))}},{key:\"_autoRender\",value:function(e,t,a){var n=this;n.render||(n.render=new o),n.render.autoRender({cloudDataSearchInstance:n,pageIndex:n.opts.pageIndex,pageSize:n.opts.pageSize,methodName:t,methodArgumments:a,data:e,panel:n.opts.panel,map:n.opts.map,autoFitView:n.opts.autoFitView})}},{key:\"_onError\",value:function(e,t){a2js.event.trigger(this,\"error\",e),t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"_isArray\",value:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},{key:\"_parseString\",value:function(e){return\"string\"==typeof e?e:\"\"}},{key:\"_extend\",value:function(e,t){var a;for(a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}}])&&n(e.prototype,t),a&&n(e,a),r}();window.AMap.CloudDataSearch=e}(window.AMap);\n");
_jsload_('AMap.ControlBar.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var defultOpts={position:{top:\"20px\",left:\"20px\"},showControlButton:!0},ControlBar=function(_super){function __(){this.constructor=d}var d,b;function ControlBar(opts){var _this=_super.call(this,opts=void 0===opts?defultOpts:opts)||this;return _this._className=\"controlbar\",_this._handleViewChange=_this._handleViewChange.bind(_this),_this._config=AMap.extend(defultOpts,opts),_this.initContainer(),_this._initUI(),_this}return extendStatics(d=ControlBar,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),ControlBar.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),map.on(\"viewchange\",this._handleViewChange),this._handleViewChange()},ControlBar.prototype.remove=function(){this.map&&this.map.off(\"viewchange\",this._handleViewChange),_super.prototype.remove.call(this)},ControlBar.prototype.removeFrom=function(map){map&&map.off(\"viewchange\",this._handleViewChange),_super.prototype.removeFrom.call(this,map)},ControlBar.prototype._handleViewChange=function(){var rotation=this.map.getRotation(),pitch=this.map.getPitch();this._compass.style.transform=\"rotateX(\"+pitch+\"deg) rotateZ(\"+rotation+\"deg)\"},ControlBar.prototype._initUI=function(){var _this=this;this._luopan=AMap.DomUtil.create(\"div\",this._container,\"amap-luopan\"),this._compass=AMap.DomUtil.create(\"div\",this._luopan,\"amap-compass\"),this._pointers=AMap.DomUtil.create(\"div\",this._compass,\"amap-pointers\"),this._pitchUp=AMap.DomUtil.create(\"div\",this._luopan,\"amap-pitchUp\"),this._pitchDown=AMap.DomUtil.create(\"div\",this._luopan,\"amap-pitchDown\"),this._rotateLeft=AMap.DomUtil.create(\"div\",this._luopan,\"amap-rotateLeft\"),this._rotateRight=AMap.DomUtil.create(\"div\",this._luopan,\"amap-rotateRight\"),this._pitchUp.setAttribute(\"data-type\",\"pitchUp\"),this._pitchDown.setAttribute(\"data-type\",\"pitchDown\"),this._rotateLeft.setAttribute(\"data-type\",\"rotateLeft\"),this._rotateRight.setAttribute(\"data-type\",\"rotateRight\"),this._pointers.setAttribute(\"data-type\",\"pointers\"),this._compass.setAttribute(\"data-type\",\"pointers\"),this._config.showControlButton||(this._pitchUp.style.display=\"none\",this._pitchDown.style.display=\"none\",this._rotateLeft.style.display=\"none\",this._rotateRight.style.display=\"none\",this._luopan.style.background=\"rgba(0,0,0,0)\",this._compass.className+=\" amap-compass-black\");function down(event){if(up(),event.target instanceof HTMLElement)switch(event.target.getAttribute(\"data-type\")){case\"pitchUp\":_this._changePitch(\"pitchUp\");break;case\"pitchDown\":_this._changePitch(\"pitchDown\");break;case\"rotateLeft\":_this._changeRotation(\"rotateLeft\");break;case\"rotateRight\":_this._changeRotation(\"rotateRight\");break;case\"pointers\":_this._returnZero()}}var up=function(){AMap.Util.cancelAnimFrame(_this._raf)};this._luopan.addEventListener(\"mousedown\",down),this._luopan.addEventListener(\"touchstart\",down),this._luopan.addEventListener(\"mouseout\",up),this._luopan.addEventListener(\"mouseup\",up),this._luopan.addEventListener(\"touchend\",up),this._luopan.addEventListener(\"touchmove\",up)},ControlBar.prototype._changePitch=function(type){var deltaP=1;function pitching(){var _this=this,pitch=this.map.getPitch();this._raf=AMap.Util.requestAnimFrame(function(){_this.map.setPitch(pitch+deltaP,!0),pitching.call(_this)})}\"pitchDown\"===type&&(deltaP=-1),pitching.call(this)},ControlBar.prototype._changeRotation=function(type){var deltaR=5;function rotating(){var _this=this,rotation=this.map.getRotation();this._raf=AMap.Util.requestAnimFrame(function(){_this.map.setRotation(rotation+deltaR,!0),rotating.call(_this)})}\"rotateLeft\"===type&&(deltaR=-5),rotating.call(this)},ControlBar.prototype._returnZero=function(){this.map.viewChange({rotation:0,pitch:0})},ControlBar}(AMap.Control);AMap.ControlBar=ControlBar}();\n");
_jsload_('AMap.DistrictSearch.js',"!function(l){\"use strict\";function e(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function o(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,r;e=n,t=i[r=t],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function a(r){var n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(r);return u(this,n?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}var t=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,l.Event);var t,e,r,n=a(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,i),(e=n.call(this,t)).CLASS_NAME=\"AMap.DistrictSearch\",e.config=l.getConfig(),e.url=e.config.server+\"polygon/dataquery/district\",e.opts=o(o({},t=t||{}),{},{extensions:t.extensions||\"base\",key:e.config.key,s:\"rsv3\",output:\"json\"}),e}return t=i,(e=[{key:\"setLevel\",value:function(t){this.opts.level=t}},{key:\"setExtensions\",value:function(t){this.opts.extensions=t}},{key:\"setSubdistrict\",value:function(t){this.opts.subdistrict=t}},{key:\"search\",value:function(t,r){var n=this,e=o({},this.opts);e.keywords=this._parseString(t),l.WebService.get(this.url,e,function(t,e){\"complete\"===t&&e.status&&\"1\"===e.status&&n._onComplete(e,r),\"error\"===t&&n._onError(e,r)})}},{key:\"_onComplete\",value:function(t,e){var r=\"1\"===t.status&&this._isArray(t.districts)&&0<t.districts.length,n=\"ok\"===t.info.toLowerCase()&&this._isArray(t.districts)&&0===t.districts.length;r?(r={info:t.info,districtList:this._parseDistricts(t.districts)},this.emit(\"complete\",r),e&&\"function\"==typeof e&&e(\"complete\",r)):(n?this.emit(\"error\",{info:\"NO_DATA\",districtList:[]}):this.emit(\"error\",{info:t.info,districtList:[]}),e&&\"function\"==typeof e&&e(\"no_data\",{}))}},{key:\"_onError\",value:function(t,e){this.emit(\"error\",t),e&&\"function\"==typeof e&&e(\"error\",t.info)}},{key:\"_parseDistricts\",value:function(t){for(var e,r,n,i,o,s=[],c=0;c<t.length;c+=1){if(\"all\"===this.opts.extensions){if(\"string\"==typeof(r=t[c].polyline)&&0<r.length){t[c].boundaries=[];for(var u,a=0,f=(u=this._parseString(r).split(\"|\")).length;a<f;a+=1){for(n=this._parseString(u[a]).split(\";\"),s=[],e=0;e<n.length;e+=1)i=n[e].split(\",\"),s.push(new l.LngLat(parseFloat(i[0]),parseFloat(i[1])));t[c].boundaries.push(s)}}else t[c].boundaries=[];delete t[c].polyline}\"string\"==typeof t[c].center&&0<t[c].center.length&&(o=t[c].center.split(\",\"),t[c].center=new l.LngLat(o[0],o[1])),o=t[c].districts,this._isArray(o)&&0<o.length&&(t[c].districtList=this._parseDistricts(o)),delete t[c].districts}return t}},{key:\"_isArray\",value:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},{key:\"_parseString\",value:function(t){return\"string\"==typeof t?t:\"\"}},{key:\"_extend\",value:function(t,e){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}}])&&s(t.prototype,e),r&&s(t,r),i}();l.DistrictSearch=t}(window.AMap);\n");
_jsload_('AMap.DragRoute.js',"!function(AMap){\"use strict\";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _possibleConstructorReturn(self,call){if(call&&(\"object\"==typeof call||\"function\"==typeof call))return call;if(void 0!==call)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}(self)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived);return _possibleConstructorReturn(this,hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments))}}var DrivingPolicy=AMap.DrivingPolicy||{LEAST_TIME:0,LEAST_FEE:1,LEAST_DISTANCE:2,REAL_TRAFFIC:4,MULTI_POLICIES:5,HIGHWAY:6,FEE_HIGHWAY:7,FEE_TRAFFIC:8,TRAFFIC_HIGHWAY:9};function forOf(arr,cb){for(var i=0,len=arr.length;i<len;i++)cb(arr[i])}var DragRoute=function(_AMap$Event){var subClass=DragRoute;if(\"function\"!=typeof _AMap$Event&&null!==_AMap$Event)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(_AMap$Event&&_AMap$Event.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,\"prototype\",{writable:!1}),_AMap$Event&&_setPrototypeOf(subClass,_AMap$Event);var staticProps,_super=_createSuper(DragRoute);function DragRoute(obj,path,policy,opts){var _this;if(!(this instanceof DragRoute))throw new TypeError(\"Cannot call a class as a function\");(_this=_super.call(this)).CLASS_NAME=\"AMap.DragRoute\",_this.opts=AMap.extend({showDir:!0},opts=opts||{}),path=AMap.Util.parseLngLatData(path),_this.avoid=opts.avoid||null,_this.client=AMap.getConfig().client,_this.url=AMap.getConfig().server+\"/v3/direction/driving\",_this.policy=policy,_this._list=[],_this._obj=obj;for(var i=0;i<path.length;i+=1)_this._list.push({id:\"s_\"+_this._getGuid(),poi:path[i],o:1});return _this._path=path,_this._route=[],_this._f=1,_this._event={},_this._markers=[],_this.polyOptions=AMap.extend({strokeColor:\"#0091ff\",strokeWeight:6,zIndex:50,borderWeight:1.5,isOutline:!0,strokeOpacity:1,outlineColor:\"white\",lineJoin:\"round\",innerOverlay:!0},opts.polyOptions||{}),_this.startMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/start.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.startMarkerOptions||{}),_this.midMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/mid.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.midMarkerOptions||{}),_this.endMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/end.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.endMarkerOptions||{}),_this.pcMap=!!opts.pcMap||!1,_this.disMarker=new AMap.Marker({content:'<div class = \"amap-dis amap-ranging-label\">行驶：小时 - 公里</div>',offset:new AMap.Pixel(20,0),innerOverlay:!0}),_this.showTraffic=!1!==opts.showTraffic,_this.disMarker.isOfficial=!0,_this}return subClass=DragRoute,(_AMap$Event=[{key:\"setAvoidPolygons\",value:function(areas){AMap.BuryPoint.add(this,\"setAvoidPolygons\"),this._dodgeAreas=areas}},{key:\"clearAvoidPolygons\",value:function(){AMap.BuryPoint.add(this,\"clearAvoidPolygons\"),this._dodgeAreas=[]}},{key:\"getAvoidPolygons\",value:function(){return AMap.BuryPoint.add(this,\"getAvoidPolygons\"),this._dodgeAreas}},{key:\"setAvoidRoad\",value:function(value){AMap.BuryPoint.add(this,\"setAvoidRoad\"),this._dodgeRoad=value}},{key:\"clearAvoidRoad\",value:function(){AMap.BuryPoint.add(this,\"clearAvoidRoad\"),this._dodgeRoad=\"\"}},{key:\"getAvoidRoad\",value:function(){return AMap.BuryPoint.add(this,\"getAvoidRoad\"),this._dodgeRoad}},{key:\"_getGuid\",value:function(){return\"g_\"+1e4*Math.random()}},{key:\"search\",value:function(){AMap.BuryPoint.add(this,\"search\");for(var self=this,obj=this._obj,path=[],i=0;i<this._list.length;i+=1)this._event[this._list[i].id]=[],function(p,i){function showDis(e){self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function changeFun(mkr){for(var arr=[],lnglat=mkr.getPosition(),i=0;i<self._list.length;i+=1)self._list[i].id===p.id&&(self._list[i].poi=lnglat),arr.push(self._list[i].poi);return arr}function dg(e){var arr=changeFun(mkr);self._reSearch(arr),self.disMarker.setPosition(e.lnglat)}function de(e){self._reSearch(changeFun(mkr),!0),self.disMarker.setMap(null)}var midMarkerCloseButton,markerOptions={id:p.id,position:p.poi,map:obj},markerOptions=0===i?self._extend(self.startMarkerOptions,markerOptions):i===self._list.length-1?self._extend(self.endMarkerOptions,markerOptions):self._extend(self.midMarkerOptions,markerOptions),mkr=new AMap.Marker(markerOptions);mkr.isOfficial=!0,0===i?self._startMarker=mkr:i===self._list.length-1?self._endMarker=mkr:((midMarkerCloseButton=document.createElement(\"div\")).title=\"删除此途经点\",midMarkerCloseButton.style.cssText=\"width:16px;height:16px;position:absolute;left:19px;top:6px;z-index:2;background:url(\"+self.client+\"/images/close.gif) 0px 0px no-repeat;\",AMap.Event.addDomListener(midMarkerCloseButton,\"mousedown\",function(e){e.preventDefault(),self.removeWay(p.id),mkr.setMap(null)}),markerOptions=function(){var dom=mkr.dom;midMarkerCloseButton.parentNode===dom&&dom.removeChild(midMarkerCloseButton)},mkr.on(\"mouseover\",i=function(){var dom=mkr.dom;dom.title=\"拖动以更改路线\",dom.appendChild(midMarkerCloseButton)}),mkr.on(\"mouseout\",markerOptions),self._event[p.id].push({obj:mkr,t:\"mouseover\",fn:i}),self._event[p.id].push({obj:mkr,t:\"mouseout\",fn:markerOptions}),mkr.on(\"dragstart\",markerOptions),mkr.on(\"dragend\",i),self._event[p.id].push({obj:mkr,t:\"dragend\",fn:i}),self._event[p.id].push({obj:mkr,t:\"dragstart\",fn:markerOptions})),(p.marker=mkr).on(\"dragstart\",showDis),mkr.on(\"dragging\",dg);mkr.on(\"dragend\",de),self._event[p.id].push({obj:mkr,t:\"dragstart\",fn:showDis}),self._event[p.id].push({obj:mkr,t:\"dragging\",fn:dg}),self._event[p.id].push({obj:mkr,t:\"dragend\",fn:de})}(this._list[i],i),path.push(this._list[i].poi);this._roadSearch(path,this._onComplete)}},{key:\"_roadSearch\",value:function(path,func){if(!this.closed){var polylinesLength=(window.path=path).length,origin=path[0],destination=path[path.length-1],waypoints=[];if(origin instanceof AMap.LngLat&&destination instanceof AMap.LngLat){for(var i=1;i<polylinesLength-1&&i<16;i+=1)waypoints.push(path[i]);var that=this,searchTime=(this._path=path,(new Date).getTime());this.lastSearchAt=searchTime,AMap.plugin(\"AMap.Driving\",function(){that.driving||(that.driving=new AMap.Driving({extensions:\"all\"})),that.opts.province&&that.opts.number&&that.driving.setProvinceAndNumber(that.opts.province,that.opts.number),that.setPolicy(that.policy),that._dodgeRoad&&that.driving.setAvoidRoad(that._dodgeRoad),that._dodgeAreas&&that.driving.setAvoidPolygons(that._dodgeAreas),that.driving.search(origin,destination,{waypoints:waypoints},function(status,result){searchTime<that.lastSearchAt||\"complete\"===status&&func.call(that,result)})})}}}},{key:\"setProvinceAndNumber\",value:function(province,number){province&&number&&(this.opts.province=province,this.opts.number=number)}},{key:\"setPolicy\",value:function(policy){AMap.BuryPoint.add(this,\"setPolicy\"),this.driving&&this.driving.setPolicy(policy)}},{key:\"getContent\",value:function(data){var dis=AMap.Util.format(data.routes[0].distance/1e3,1),data=AMap.Util.format(data.routes[0].time/60,0),h=Math.floor(data/60),data=data%60,text='<div class = \"amap-dis amap-ranging-label\">行驶 ';return h&&(text+=h+\"小时\"),data&&(text+=data+\"分\"),text+=\" - \"+dis+\"公里</div>\"}},{key:\"showRoute\",value:function(index){if(AMap.BuryPoint.add(this,\"showRoute\"),this._routes[index]){this._routeIndex=index;for(var i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap();this._route=this._routes[index],this._polyline.setPath(this._route);for(i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap(this._obj)}}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"_onComplete\",value:function(data){if(!this.closed){this.disMarker.setContent(this.getContent(data)),this._routes=this.parsePath(data),this._route=this._routes[0],this._routeIndex=0,this._data=data;var polyOptions={id:\"p\"+this.guid,path:this._route,bubble:!0},polyOptions=(this._polyline=new AMap.Polyline(this._extend(this.polyOptions,polyOptions)),this._polyline.setMap(this._obj),this._polyline.isOfficial=!0,this._data.routes[0]);polyOptions.steps&&(polyOptions=this._getLineGradientFromSteps(polyOptions.steps),this._polyline.setOptions({lineGradient:polyOptions})),this.opts.showDir&&(polyOptions={id:\"p\"+this.guid,strokeWeight:this.polyOptions.strokeWeight,strokeOpacity:0,path:this._route,showDir:!0,bubble:!0,zIndex:this.polyOptions.zIndex+2,innerOverlay:!0},this._dirPolyline=new AMap.Polyline(polyOptions),this._dirPolyline.setMap(this._obj),this._dirPolyline.isOfficial=!0);for(var i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap(this._obj);this._obj.setFitView(this._polyline,!1,this.avoid),this._point=new AMap.Marker({id:\"m\"+this.guid,size:new AMap.Pixel(10,10),offset:new AMap.Pixel(-5,-5),position:this._route[0],zIndex:99,innerOverlay:!0,bubble:!0,draggable:!0,visible:!1,content:\"<div title='拖动以更改路线' class='drag_mapabc' style='width:11px;height:11px;background:url(\"+this.client+\"/images/dd-via.png) 0px 0px no-repeat;'></div>\"}),this._point.isOfficial=!0,this._point.setMap(this._obj),this._bind();polyOptions={data:data,target:this};AMap.Event.trigger(this,\"search\",polyOptions),AMap.Event.trigger(this,\"complete\",polyOptions),void 0!==window.DD_belatedPNG&&window.DD_belatedPNG.fix(\".drag_mapabc\")}}},{key:\"_getLineGradientFromSteps\",value:function(steps){var trafficGradientValues,totalDistance,currentDistance,_this2=this,trafficGradient=void 0;return steps&&(trafficGradientValues=[],totalDistance=0,forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){totalDistance+=tmcsPath.distance})}),currentDistance=0,forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){currentDistance+=tmcsPath.distance,trafficGradientValues.push([currentDistance/totalDistance,_this2.getColor(tmcsPath.status)])})}),trafficGradient={values:trafficGradientValues}),trafficGradient}},{key:\"_bind\",value:function(){function mv(){s=1,self._point.show(),obj.on(\"mousemove\",movestart)}function ds(e){d=1;for(var arr=[],i=0;i<self._list.length;i+=1)arr.push(self._list[i].poi);var steps=self._data.routes[self._routeIndex].steps,dis=1/0,nearest=null;for(s=0;s<steps.length;s+=1){var disInfo=self._pt2LineDist(steps[s].path,e.lnglat);disInfo.stepIndex=s,disInfo.dis<dis&&(dis=disInfo.dis,nearest=disInfo)}var midwayIndex=0;for(s=0;s<nearest.stepIndex;s+=1)\"到达途经地\"==steps[s].assistant_action&&(midwayIndex+=1);nearest.i=midwayIndex,startPoi=nearest,gid=\"s\"+self._getGuid(),self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function dg(e){d=1,self._reSearch(changeFun()),self.disMarker.setPosition(e.lnglat)}function de(e){d=0,self._addDragPoi(self._point.getPosition(),gid),self._point.hide(),obj.off(\"mousemove\",movestart),self._reSearch(changeFun(!0),!0,self._point.getPosition()),self.disMarker.setMap(null)}var startPoi,gid,self=this,obj=this._obj,s=0,d=0,movestart=function movestart(e){if(!s)return!1;e=self._pt2LineDist(self._route,e.lnglat);e.dis<10?self._point.setPosition(new AMap.LngLat(e.lng,e.lat)):(s=0,d||(self._point.hide(),obj.off(\"mousemove\",movestart)))},changeFun=(self._dirPolyline.on(\"mousemove\",mv),self._event[\"p\"+self.guid]=[],self._event[\"p\"+self.guid].push({obj:self._dirPolyline,t:\"mousemove\",fn:mv}),self._point.on(\"dragstart\",ds),self._event[\"m\"+self.guid]=[],self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragstart\",fn:ds}),function(isDragEnd){for(var lnglat=self._point.getPosition(),list=[],arr=[],i=0;i<self._list.length;i+=1)list.push(self._list[i]),arr.push(self._list[i].poi),i===startPoi.i&&(list.push({id:gid,poi:new AMap.LngLat(lnglat.lng,lnglat.lat)}),arr.push(new AMap.LngLat(lnglat.lng,lnglat.lat)));return isDragEnd&&(self._list=list),arr});self._point.on(\"dragging\",dg),self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragging\",fn:dg});self._point.on(\"dragend\",de),self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragend\",fn:de})}},{key:\"getColor\",value:function(status){var color;switch(status){case\"畅通\":color=\"#1BAC2E\";break;case\"缓行\":color=\"#FFA700\";break;case\"拥堵\":color=\"#E94B37\";break;case\"严重拥堵\":color=\"#A81212\";break;default:color=\"#adadad\"}return color}},{key:\"parsePath\",value:function(data){for(var routes=[],i=0;i<data.routes.length;i+=1){for(var oneRoute=[],l=data.routes[i].steps,j=0;j<l.length;j+=1){var path=l[j].path;[].push.apply(oneRoute,path),this.showTraffic}oneRoute.polylines=[],oneRoute.polylines=oneRoute.polylines,routes.push(oneRoute)}return routes}},{key:\"_reSearch\",value:function(path,ifComplete,ifAddWay){var self=this;self.toSearch_=[[path,ifComplete,ifAddWay,new Date]],self.waitingSearch||(self.waitingSearch=!0,setTimeout(function(){self.waitingSearch=!1;var params=self.toSearch_[0];params&&(self._roadSearch(params[0],function(data){if(self.lastSearchTime_){if(params[3]<self.lastSearchTime_)return;self.lastSearchTime_=params[3]}else self.lastSearchTime_=params[3];self._routes=this.parsePath(data),self._data=data,self._route=self._routes[0],self._routeIndex=0,self._polyline.setPath(self._route);var drivingPaths=self._data.routes[0],drivingPaths=(drivingPaths.steps&&(drivingPaths=this._getLineGradientFromSteps(drivingPaths.steps),self._polyline.setOptions({lineGradient:drivingPaths})),self._dirPolyline&&self._dirPolyline.setPath(self._route),self.disMarker.setContent(self.getContent(data)),{data:data,target:this});AMap.Event.trigger(self,\"search\",drivingPaths),params[2]&&AMap.Event.trigger(self,\"addway\",{target:this,lnglat:ifAddWay}),params[1]&&AMap.Event.trigger(self,\"complete\",drivingPaths)}),self.toSearch_=[])},60))}},{key:\"_addDragPoi\",value:function(lnglat,gid){function st(e){hided(),self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function dg(e){self._reSearch(changeFun()),self.disMarker.setPosition(e.lnglat)}function de(){showd(),self._reSearch(changeFun(),!0),self.disMarker.setMap(null)}var obj=this._obj,self=this,mkrC=new AMap.Marker(self._extend(self.midMarkerOptions,{id:gid,position:lnglat,map:obj})),d=(mkrC.isOfficial=!0,document.createElement(\"div\")),showd=(d.title=\"删除此途经点\",d.style.cssText=\"width:16px;height:16px;position:absolute;left:19px;top:6px;z-index:2;background:url(\"+this.client+\"/images/close.gif) 0px 0px no-repeat;\",AMap.Event.addDomListener(d,\"mousedown\",function(){self.removeWay(gid),mkrC.setMap(null),self._point.hide()}),function(){var dom=mkrC.dom;dom.title=\"拖动以更改路线\",dom.appendChild(d)}),hided=function(){var dom=mkrC.dom;d.parentNode===dom&&dom.removeChild(d)},changeFun=(mkrC.on(\"mouseover\",showd),mkrC.on(\"mouseout\",hided),mkrC.on(\"dragstart\",st),function(){for(var arr=[],lnglat=mkrC.getPosition(),i=0;i<self._list.length;i+=1)self._list[i].id===gid&&(self._list[i].poi=lnglat),arr.push(self._list[i].poi);return arr});mkrC.on(\"dragging\",dg);mkrC.on(\"dragend\",de),self._event[gid]=[],self._event[gid].push({obj:mkrC,t:\"dragstart\",fn:st}),self._event[gid].push({obj:mkrC,t:\"dragging\",fn:dg}),self._event[gid].push({obj:mkrC,t:\"dragend\",fn:de}),self._event[gid].push({obj:mkrC,t:\"mouseover\",fn:showd}),self._event[gid].push({obj:mkrC,t:\"mouseout\",fn:hided}),void 0!==window.DD_belatedPNG&&window.DD_belatedPNG.fix(\".drag_mapabc\")}},{key:\"_nearLine\",value:function(){this._obj;for(var i=0;i<this._list.length;i+=1){var poi=this._pt2LineDist(this._route,this._list[i].poi);this._events&&this._events[this._list[i].id]&&this._event[this._list[i].id][0].obj.setPosition(new AMap.LngLat(poi.lng,poi.lat))}}},{key:\"_pt2LineDist\",value:function(line,Pt){for(var a={dis:Number.MAX_VALUE},i=0;i<line.length-1;i+=1){var arr=[line[i],line[i+1]],arr=this._pt2LineSegmentDist(arr,Pt);arr.dis<a.dis&&(a={lng:arr.lng,lat:arr.lat,dis:arr.dis,i:i,_type:\"lnglat\"})}return a.dis=Math.round(new AMap.LngLat(Pt.lng,Pt.lat).distanceTo(new AMap.LngLat(a.lng,a.lat))/this._obj.getResolution()),a}},{key:\"_pt2LineSegmentDist\",value:function(line,pt){var dL,x=0,y=0,dX=line[1].lng-line[0].lng,dY=line[1].lat-line[0].lat,dR=-(line[0].lat-pt.lat)*dY-(line[0].lng-pt.lng)*dX,y=dR<=0?(x=line[0].lng,line[0].lat):dR>=(dL=dX*dX+dY*dY)?(x=line[1].lng,line[1].lat):(x=line[0].lng+dR*dX/dL,line[0].lat+dR*dY/dL);return{lng:x,lat:y,dis:Math.pow(pt.lng-x,2)+Math.pow(pt.lat-y,2)}}},{key:\"removeWay\",value:function(id){for(var arr=[],marker=(this._obj,null),i=0;i<this._list.length;i+=1)if(this._list[i].id===id){for(var a=this._event[id],j=0;j<a.length;j+=1)a[j].obj.off(a[j].t,a[j].fn),marker=marker||a[j].obj;this._event[id]=null,delete this._event[id],this._list.splice(i,1),--i}else arr.push(this._list[i].poi);marker.setMap(null),this._reSearch(arr,!0)}},{key:\"getWays\",value:function(){AMap.BuryPoint.add(this,\"getWays\");for(var arr=[],i=1;i<this._list.length-1;i+=1)arr.push(this._list[i].poi);return arr}},{key:\"getRoute\",value:function(){return AMap.BuryPoint.add(this,\"getRoute\"),this._route}},{key:\"destroy\",value:function(){AMap.BuryPoint.add(this,\"destroy\");this._obj;for(var i in this._event)if(this._event.hasOwnProperty(i)){for(var a=this._event[i],j=0;j<a.length;j+=1)a[j].obj.off(a[j].t,a[j].fn),a[j].obj.setMap(null);this._event[i]=null,delete this._event[i]}for(var _i=0;_i<this._list.length;_i+=1)this._list[_i].o||(this._list.splice(_i,1),--_i);if(this._point&&(this._point.setMap(null),this._point=null,delete this._point),this._polyline&&(this._polyline.setMap(null),this._polyline=null,this._dirPolyline&&this._dirPolyline.setMap(null),this._dirPolyline=null,delete this._polyline),this._route&&this._route.polylines)for(var _i2=0;_i2<this._route.polylines.length;_i2+=1)this._route.polylines[_i2].setMap();this._startMarker=null,this._endMarker=null}},{key:\"_extend\",value:function(orig,dest){for(var i in orig)orig.hasOwnProperty(i)&&(dest[i]=orig[i]);return dest}},{key:\"getPolyline\",value:function(){return AMap.BuryPoint.add(this,\"getPolyline\"),this._polyline}},{key:\"getStart\",value:function(){return AMap.BuryPoint.add(this,\"getStart\"),this._startMarker}},{key:\"getEnd\",value:function(){return AMap.BuryPoint.add(this,\"getEnd\"),this._endMarker}},{key:\"getPoint\",value:function(){return AMap.BuryPoint.add(this,\"getPoint\"),this._point}},{key:\"getRoutes\",value:function(){return AMap.BuryPoint.add(this,\"getRoutes\"),this._routes}}])&&_defineProperties(subClass.prototype,_AMap$Event),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,\"prototype\",{writable:!1}),DragRoute}(AMap.Event);AMap.DragRoute=DragRoute,AMap.DrivingPolicy=DrivingPolicy}(window.AMap);\n");
_jsload_('AMap.DragRouteTruck.js',"!function(AMap){\"use strict\";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _possibleConstructorReturn(self,call){if(call&&(\"object\"==typeof call||\"function\"==typeof call))return call;if(void 0!==call)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}(self)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived);return _possibleConstructorReturn(this,hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments))}}function forOf(arr,cb){for(var i=0,len=arr.length;i<len;i++)cb(arr[i])}var DragRouteTruck=function(_AMap$Event){var subClass=DragRouteTruck;if(\"function\"!=typeof _AMap$Event&&null!==_AMap$Event)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(_AMap$Event&&_AMap$Event.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,\"prototype\",{writable:!1}),_AMap$Event&&_setPrototypeOf(subClass,_AMap$Event);var staticProps,_super=_createSuper(DragRouteTruck);function DragRouteTruck(obj,opts){var _this;if(this instanceof DragRouteTruck)return(_this=_super.call(this)).CLASS_NAME=\"AMap.DragRoute\",_this.opts=AMap.extend({showDir:!0,refreshTime:300,autoRefresh:!0},opts=opts||{}),_this.avoid=opts.avoid||null,_this.client=AMap.getConfig().client,_this._list=[],_this._obj=obj,_this._route=[],_this._f=1,_this._event={},_this._markers=[],_this.polyOptions=AMap.extend({strokeColor:\"#0091ff\",strokeWeight:6,zIndex:50,borderWeight:1.5,isOutline:!0,strokeOpacity:1,outlineColor:\"white\",lineJoin:\"round\",innerOverlay:!0},opts.polyOptions||{}),_this.startMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/start.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.startMarkerOptions||{}),_this.midMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/mid.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.midMarkerOptions||{}),_this.endMarkerOptions=AMap.extend({icon:new AMap.Icon({image:AMap.getConfig().markers+\"/end.png\",imageSize:new AMap.Size(19,31),innerOverlay:!0}),draggable:!0,offset:{x:-9,y:-31},innerOverlay:!0},opts.endMarkerOptions||{}),_this.pcMap=!!opts.pcMap||!1,_this.disMarker=new AMap.Marker({content:'<div class = \"amap-dis amap-ranging-label\">行驶：小时 - 公里</div>',offset:new AMap.Pixel(20,0),innerOverlay:!0}),_this.opts.showTraffic=!1!==opts.showTraffic,_this.disMarker.isOfficial=!0,_this;throw new TypeError(\"Cannot call a class as a function\")}return subClass=DragRouteTruck,(_AMap$Event=[{key:\"setAvoidPolygons\",value:function(areas){AMap.BuryPoint.add(this,\"setAvoidPolygons\"),this._dodgeAreas=areas}},{key:\"clearAvoidPolygons\",value:function(){AMap.BuryPoint.add(this,\"clearAvoidPolygons\"),this._dodgeAreas=[]}},{key:\"getAvoidPolygons\",value:function(){return AMap.BuryPoint.add(this,\"getAvoidPolygons\"),this._dodgeAreas}},{key:\"_getGuid\",value:function(){return\"g_\"+1e4*Math.random()}},{key:\"search\",value:function(locations){AMap.BuryPoint.add(this,\"search\");for(var self=this,obj=(self.clearOverlay(),this._obj),path=[],i=0;i<locations.length;i+=1)this._list.push({id:\"s_\"+this._getGuid(),poi:AMap.Util.parseLngLatData(locations[i].lnglat),o:1});for(i=0;i<this._list.length;i+=1)this._event[this._list[i].id]=[],function(p,i){function showDis(e){self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function changeFun(mkr){for(var arr=[],lnglat=mkr.getPosition(),i=0;i<self._list.length;i+=1)self._list[i].id===p.id&&(self._list[i].poi=lnglat),arr.push({lnglat:self._list[i].poi});return arr}function dg(e){var arr=changeFun(mkr);self.opts.autoRefresh&&self._reSearch(arr),self.disMarker.setPosition(e.lnglat)}function de(e){var currentPath=changeFun(mkr);self.opts.autoRefresh&&self._reSearch(currentPath,!0),self.disMarker.setMap(null)}var midMarkerCloseButton,markerOptions={id:p.id,position:p.poi,map:obj},markerOptions=0===i?self._extend(self.startMarkerOptions,markerOptions):i===self._list.length-1?self._extend(self.endMarkerOptions,markerOptions):self._extend(self.midMarkerOptions,markerOptions),mkr=new AMap.Marker(markerOptions);mkr.isOfficial=!0,0===i?self._startMarker=mkr:i===self._list.length-1?self._endMarker=mkr:(self._markers.push(mkr),(midMarkerCloseButton=document.createElement(\"div\")).title=\"删除此途经点\",midMarkerCloseButton.style.cssText=\"width:16px;height:16px;position:absolute;left:19px;top:6px;z-index:2;background:url(\"+self.client+\"/images/close.gif) 0px 0px no-repeat;\",AMap.Event.addDomListener(midMarkerCloseButton,\"mousedown\",function(e){e.preventDefault(),self.removeWay(p.id),mkr.setMap(null),AMap.Util.deleteItemFromArray(self._markers,mkr)}),markerOptions=function(){var dom=mkr.dom;midMarkerCloseButton.parentNode===dom&&dom.removeChild(midMarkerCloseButton)},mkr.on(\"mouseover\",i=function(){var dom=mkr.dom;dom.title=\"拖动以更改路线\",dom.appendChild(midMarkerCloseButton)}),mkr.on(\"mouseout\",markerOptions),self._event[p.id].push({obj:mkr,t:\"mouseover\",fn:i}),self._event[p.id].push({obj:mkr,t:\"mouseout\",fn:markerOptions}),mkr.on(\"dragstart\",markerOptions),mkr.on(\"dragend\",i),self._event[p.id].push({obj:mkr,t:\"dragend\",fn:i}),self._event[p.id].push({obj:mkr,t:\"dragstart\",fn:markerOptions})),(p.marker=mkr).on(\"dragstart\",showDis),mkr.on(\"dragging\",dg);mkr.on(\"dragend\",de),self._event[p.id].push({obj:mkr,t:\"dragstart\",fn:showDis}),self._event[p.id].push({obj:mkr,t:\"dragging\",fn:dg}),self._event[p.id].push({obj:mkr,t:\"dragend\",fn:de})}(this._list[i],i),path.push(this._list[i].poi);this._roadSearch(locations,this._onComplete)}},{key:\"updatePath\",value:function(){for(var list=[],arr=[],i=0;i<this._list.length;i+=1)list.push(this._list[i]),arr.push({lnglat:this._list[i].poi});this._reSearch(arr,this._onComplete)}},{key:\"_roadSearch\",value:function(path,func){var that,searchTime;this.closed||((that=this)._path=path,searchTime=(new Date).getTime(),this.lastSearchAt=searchTime,AMap.plugin(\"AMap.TruckDriving\",function(){that.driving||(that.driving=new AMap.TruckDriving(that.opts)),that.driving.setOption(that.opts),that._dodgeAreas&&that.driving.setAvoidPolygons(that._dodgeAreas),that.driving.search(path,function(status,result){searchTime<that.lastSearchAt||\"complete\"===status&&func.call(that,result)})}))}},{key:\"setProvinceAndNumber\",value:function(province,number){province&&number&&(this.opts.province=province,this.opts.number=number)}},{key:\"setPolicy\",value:function(policy){AMap.BuryPoint.add(this,\"setPolicy\"),this.driving&&this.driving.setPolicy(policy)}},{key:\"getContent\",value:function(data){var dis=AMap.Util.format(data.routes[0].distance/1e3,1),data=AMap.Util.format(data.routes[0].time/60,0),h=Math.floor(data/60),data=data%60,text='<div class = \"amap-dis amap-ranging-label\">行驶 ';return h&&(text+=h+\"小时\"),data&&(text+=data+\"分\"),text+=\" - \"+dis+\"公里</div>\"}},{key:\"showRoute\",value:function(index){if(AMap.BuryPoint.add(this,\"showRoute\"),this._routes[index]){this._routeIndex=index;for(var i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap();this._route=this._routes[index],this._polyline.setPath(this._route);for(i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap(this._obj)}}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"_onComplete\",value:function(data){if(!this.closed){this.disMarker.setContent(this.getContent(data)),this._routes=this.parsePath(data),this._route=this._routes[0],this._routeIndex=0,this._data=data;var polyOptions={id:\"p\"+this.guid,path:this._route,bubble:!0},polyOptions=(this._polyline=new AMap.Polyline(this._extend(this.polyOptions,polyOptions)),this._polyline.setMap(this._obj),this._polyline.isOfficial=!0,this._data.routes[0]);this.opts.showTraffic&&polyOptions.steps&&(polyOptions=this._getLineGradientFromSteps(polyOptions.steps),this._polyline.setOptions({lineGradient:polyOptions})),this.opts.showDir&&(polyOptions={id:\"p\"+this.guid,strokeWeight:this.polyOptions.strokeWeight,strokeOpacity:0,path:this._route,showDir:!0,bubble:!0,zIndex:this.polyOptions.zIndex+2,innerOverlay:!0},this._dirPolyline=new AMap.Polyline(polyOptions),this._dirPolyline.setMap(this._obj),this._dirPolyline.isOfficial=!0);for(var i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap(this._obj);this._obj.setFitView(this._polyline,!1,this.avoid),this._point=new AMap.Marker({id:\"m\"+this.guid,size:new AMap.Pixel(10,10),offset:new AMap.Pixel(-5,-5),position:this._route[0],zIndex:99,innerOverlay:!0,bubble:!0,draggable:!0,visible:!1,content:\"<div title='拖动以更改路线' class='drag_mapabc' style='width:11px;height:11px;background:url(\"+this.client+\"/images/dd-via.png) 0px 0px no-repeat;'></div>\"}),this._point.isOfficial=!0,this._point.setMap(this._obj),this._bind();polyOptions={data:data,target:this};AMap.Event.trigger(this,\"search\",polyOptions),AMap.Event.trigger(this,\"complete\",polyOptions),void 0!==window.DD_belatedPNG&&window.DD_belatedPNG.fix(\".drag_mapabc\")}}},{key:\"_getLineGradientFromSteps\",value:function(steps){var trafficGradientValues,totalDistance,currentDistance,_this2=this,trafficGradient=void 0;return steps&&(trafficGradientValues=[],totalDistance=0,forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){totalDistance+=tmcsPath.distance})}),currentDistance=0,forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){currentDistance+=tmcsPath.distance,trafficGradientValues.push([currentDistance/totalDistance,_this2.getColor(tmcsPath.status)])})}),trafficGradient={values:trafficGradientValues}),trafficGradient}},{key:\"_bind\",value:function(){function mv(){s=1,self._point.show(),obj.on(\"mousemove\",movestart)}function ds(e){d=1;for(var arr=[],i=0;i<self._list.length;i+=1)arr.push(self._list[i].poi);var steps=self._data.routes[self._routeIndex].steps,dis=1/0,nearest=null;for(s=0;s<steps.length;s+=1){var disInfo=self._pt2LineDist(steps[s].path,e.lnglat);disInfo.stepIndex=s,disInfo.dis<dis&&(dis=disInfo.dis,nearest=disInfo)}var midwayIndex=0;for(s=0;s<nearest.stepIndex;s+=1)\"到达途经地\"==steps[s].assistant_action&&(midwayIndex+=1);nearest.i=midwayIndex,startPoi=nearest,gid=\"s\"+self._getGuid(),self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function dg(e){d=1;var currentPath=changeFun();self.opts.autoRefresh&&self._reSearch(currentPath),self.disMarker.setPosition(e.lnglat)}function de(e){d=0,self._addDragPoi(self._point.getPosition(),gid),self._point.hide(),obj.off(\"mousemove\",movestart);var currentPath=changeFun(!0);self.opts.autoRefresh&&self._reSearch(currentPath,!0,self._point.getPosition()),self.disMarker.setMap(null)}var startPoi,gid,self=this,obj=this._obj,s=0,d=0,movestart=function movestart(e){if(!s)return!1;e=self._pt2LineDist(self._route,e.lnglat);e.dis<10?self._point.setPosition(new AMap.LngLat(e.lng,e.lat)):(s=0,d||(self._point.hide(),obj.off(\"mousemove\",movestart)))},changeFun=(self._dirPolyline.on(\"mousemove\",mv),self._event[\"p\"+self.guid]=[],self._event[\"p\"+self.guid].push({obj:self._dirPolyline,t:\"mousemove\",fn:mv}),self._point.on(\"dragstart\",ds),self._event[\"m\"+self.guid]=[],self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragstart\",fn:ds}),function(isDragEnd){for(var lnglat=self._point.getPosition(),list=[],arr=[],i=0;i<self._list.length;i+=1)list.push(self._list[i]),arr.push({lnglat:self._list[i].poi}),i===startPoi.i&&(list.push({id:gid,poi:new AMap.LngLat(lnglat.lng,lnglat.lat)}),arr.push({lnglat:new AMap.LngLat(lnglat.lng,lnglat.lat)}));return isDragEnd&&(self._list=list),arr});self._point.on(\"dragging\",dg),self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragging\",fn:dg});self._point.on(\"dragend\",de),self._event[\"m\"+self.guid].push({obj:self._point,t:\"dragend\",fn:de})}},{key:\"getColor\",value:function(status){var color;switch(status){case\"畅通\":color=\"#1BAC2E\";break;case\"缓行\":color=\"#FFA700\";break;case\"拥堵\":color=\"#E94B37\";break;case\"严重拥堵\":color=\"#A81212\";break;default:color=\"#adadad\"}return color}},{key:\"parsePath\",value:function(data){for(var routes=[],i=0;i<data.routes.length;i+=1){for(var oneRoute=[],l=data.routes[i].steps,j=0;j<l.length;j+=1){var path=l[j].path;[].push.apply(oneRoute,path),this.opts.showTraffic}oneRoute.polylines=[],oneRoute.polylines=oneRoute.polylines,routes.push(oneRoute)}return routes}},{key:\"_reSearch\",value:function(path,ifComplete,ifAddWay){var self=this;self.toSearch_=[[path,ifComplete,ifAddWay,new Date]],self.waitingSearch&&(clearTimeout(self.waitingSearch),self.waitingSearch=null),self.waitingSearch=setTimeout(function(){self.waitingSearch=null;var params=self.toSearch_[0];params&&(self._roadSearch(params[0],function(data){if(self.lastSearchTime_){if(params[3]<self.lastSearchTime_)return;self.lastSearchTime_=params[3]}else self.lastSearchTime_=params[3];self._routes=this.parsePath(data),self._data=data,self._route=self._routes[0],self._routeIndex=0,self._polyline.setPath(self._route);var drivingPaths=self._data.routes[0],drivingPaths=(self.opts.showTraffic&&drivingPaths.steps&&(drivingPaths=this._getLineGradientFromSteps(drivingPaths.steps),self._polyline.setOptions({lineGradient:drivingPaths})),self._dirPolyline&&self._dirPolyline.setPath(self._route),self.disMarker.setContent(self.getContent(data)),{data:data,target:this});AMap.Event.trigger(self,\"search\",drivingPaths),params[2]&&AMap.Event.trigger(self,\"addway\",{target:this,lnglat:ifAddWay}),params[1]&&AMap.Event.trigger(self,\"complete\",drivingPaths)}),self.toSearch_=[])},self.opts.refreshTime)}},{key:\"_addDragPoi\",value:function(lnglat,gid){function st(e){hided(),self.disMarker.setPosition(e.lnglat),self.disMarker.setMap(obj)}function dg(e){var currentPath=changeFun();self.opts.autoRefresh&&self._reSearch(currentPath),self.disMarker.setPosition(e.lnglat)}function de(){showd();var currentPath=changeFun();self.opts.autoRefresh&&self._reSearch(currentPath,!0),self.disMarker.setMap(null)}var obj=this._obj,self=this,mkrC=new AMap.Marker(self._extend(self.midMarkerOptions,{id:gid,position:lnglat,map:obj})),d=(this._markers.push(mkrC),mkrC.isOfficial=!0,document.createElement(\"div\")),showd=(d.title=\"删除此途经点\",d.style.cssText=\"width:16px;height:16px;position:absolute;left:19px;top:6px;z-index:2;background:url(\"+this.client+\"/images/close.gif) 0px 0px no-repeat;\",AMap.Event.addDomListener(d,\"mousedown\",function(){self.removeWay(gid),mkrC.setMap(null),self._point.hide()}),function(){var dom=mkrC.dom;dom.title=\"拖动以更改路线\",dom.appendChild(d)}),hided=function(){var dom=mkrC.dom;d.parentNode===dom&&dom.removeChild(d)},changeFun=(mkrC.on(\"mouseover\",showd),mkrC.on(\"mouseout\",hided),mkrC.on(\"dragstart\",st),function(){for(var arr=[],lnglat=mkrC.getPosition(),i=0;i<self._list.length;i+=1)self._list[i].id===gid&&(self._list[i].poi=lnglat),arr.push({lnglat:self._list[i].poi});return arr});self._point.on(\"dragging\",dg),mkrC.on(\"dragging\",dg);mkrC.on(\"dragend\",de),self._event[gid]=[],self._event[gid].push({obj:mkrC,t:\"dragstart\",fn:st}),self._event[gid].push({obj:mkrC,t:\"dragging\",fn:dg}),self._event[gid].push({obj:mkrC,t:\"dragend\",fn:de}),self._event[gid].push({obj:mkrC,t:\"mouseover\",fn:showd}),self._event[gid].push({obj:mkrC,t:\"mouseout\",fn:hided}),void 0!==window.DD_belatedPNG&&window.DD_belatedPNG.fix(\".drag_mapabc\")}},{key:\"_nearLine\",value:function(){this._obj;for(var i=0;i<this._list.length;i+=1){var poi=this._pt2LineDist(this._route,this._list[i].poi);this._events&&this._events[this._list[i].id]&&this._event[this._list[i].id][0].obj.setPosition(new AMap.LngLat(poi.lng,poi.lat))}}},{key:\"_pt2LineDist\",value:function(line,Pt){for(var a={dis:Number.MAX_VALUE},i=0;i<line.length-1;i+=1){var arr=[line[i],line[i+1]],arr=this._pt2LineSegmentDist(arr,Pt);arr.dis<a.dis&&(a={lng:arr.lng,lat:arr.lat,dis:arr.dis,i:i,_type:\"lnglat\"})}return a.dis=Math.round(new AMap.LngLat(Pt.lng,Pt.lat).distanceTo(new AMap.LngLat(a.lng,a.lat))/this._obj.getResolution()),a}},{key:\"_pt2LineSegmentDist\",value:function(line,pt){var dL,x=0,y=0,dX=line[1].lng-line[0].lng,dY=line[1].lat-line[0].lat,dR=-(line[0].lat-pt.lat)*dY-(line[0].lng-pt.lng)*dX,y=dR<=0?(x=line[0].lng,line[0].lat):dR>=(dL=dX*dX+dY*dY)?(x=line[1].lng,line[1].lat):(x=line[0].lng+dR*dX/dL,line[0].lat+dR*dY/dL);return{lng:x,lat:y,dis:Math.pow(pt.lng-x,2)+Math.pow(pt.lat-y,2)}}},{key:\"removeWay\",value:function(id){for(var arr=[],marker=(this._obj,null),i=0;i<this._list.length;i+=1)if(this._list[i].id===id){for(var a=this._event[id],j=0;j<a.length;j+=1)a[j].obj.off(a[j].t,a[j].fn),marker=marker||a[j].obj;this._event[id]=null,delete this._event[id],this._list.splice(i,1),--i}else arr.push({lnglat:this._list[i].poi});marker.setMap(null),this.opts.autoRefresh&&this._reSearch(arr,!0)}},{key:\"getWays\",value:function(){AMap.BuryPoint.add(this,\"getWays\");for(var arr=[],i=1;i<this._list.length-1;i+=1)arr.push(this._list[i].poi);return arr}},{key:\"getRoute\",value:function(){return AMap.BuryPoint.add(this,\"getRoute\"),this._route}},{key:\"destroy\",value:function(){AMap.BuryPoint.add(this,\"destroy\");this._obj;for(var i in this._event)if(this._event.hasOwnProperty(i)){for(var a=this._event[i],j=0;j<a.length;j+=1)a[j].obj.off(a[j].t,a[j].fn),a[j].obj.setMap(null);this._event[i]=null,delete this._event[i]}this.clearOverlay()}},{key:\"clearOverlay\",value:function(){var _this3=this;if(this._list=[],this._point&&(this._obj.remove(this._point),this._point=null,delete this._point),this._polyline&&(this._polyline.setMap(null),this._polyline=null,this._dirPolyline&&this._dirPolyline.setMap(null),this._dirPolyline=null,delete this._polyline),this._route&&this._route.polylines)for(var i=0;i<this._route.polylines.length;i+=1)this._route.polylines[i].setMap();this._startMarker&&(this._obj.remove(this._startMarker),this._startMarker=null),this._endMarker&&(this._obj.remove(this._endMarker),this._endMarker=null),this.disMarker&&(this._obj.remove(this.disMarker),this._endMarker=null),forOf(this._markers,function(mkr){_this3._obj.remove(mkr)}),this._markers=[]}},{key:\"_extend\",value:function(orig,dest){for(var i in orig)orig.hasOwnProperty(i)&&(dest[i]=orig[i]);return dest}},{key:\"getPolyline\",value:function(){return AMap.BuryPoint.add(this,\"getPolyline\"),this._polyline}},{key:\"getStart\",value:function(){return AMap.BuryPoint.add(this,\"getStart\"),this._startMarker}},{key:\"getEnd\",value:function(){return AMap.BuryPoint.add(this,\"getEnd\"),this._endMarker}},{key:\"getPoint\",value:function(){return AMap.BuryPoint.add(this,\"getPoint\"),this._point}},{key:\"getRoutes\",value:function(){return AMap.BuryPoint.add(this,\"getRoutes\"),this._routes}},{key:\"setOption\",value:function(opts){this.opts=AMap.extend(this.opts,opts)}},{key:\"getOption\",value:function(){return this.opts}}])&&_defineProperties(subClass.prototype,_AMap$Event),staticProps&&_defineProperties(subClass,staticProps),Object.defineProperty(subClass,\"prototype\",{writable:!1}),DragRouteTruck}(AMap.Event);AMap.DragRouteTruck=DragRouteTruck}(window.AMap);\n");
_jsload_('AMap.Driving.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,\"prototype\",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,\"prototype\",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}else if(call!==void 0){throw new TypeError(\"Derived constructors may only return object or undefined\")}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}var markerOffset=[-12,-30];function forOf(arr,cb){for(var i=0,len=arr.length;i<len;i++){cb(arr[i])}}var DrivingRender=function DrivingRender(initOpts){this[\"CLASS_NAME\"]=\"AMap.DrivingRender\";var me=this;initOpts=initOpts||{};me._styleOpts={};me._styleOpts[\"zIndex\"]=typeof initOpts[\"zIndex\"]===\"number\"?initOpts[\"zIndex\"]:50;me._showTraffic=initOpts[\"showTraffic\"];me.showDir=!!(initOpts?initOpts.showDir:true);me._currentRouteTitle=null;me._currentRouteOptenitem=null;me.autoRender=function(options,drivingObject){me.clear(1);if(!options||!options.data||!options.panel&&!options.map){return}this.options=options;this.hideMarkers=options[\"hideMarkers\"]||false;if(options.map){this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:true,offset:new AMap.Pixel(0,-30)});this._overlays=[];this._route=[];this._highlightOverlay=null;if(!options.panel){this.drawRouteOverlays(0)}}if(options.panel){if(Object.prototype.toString.call(options.panel)===\"[object String]\"){options.panel=document.getElementById(options.panel)}if(drivingObject&&options.data.waypoints.length===0){me.listener.gotoAMap=function(){drivingObject.searchOnAMAP(options.data)};var a=document.createElement(\"div\");a.className=\"amap-call\";a.href=\"javascript:void(0)\";a.innerHTML=\"前往高德地图查看\";a.addEventListener(\"click\",me.listener.gotoAMap);options.panel.appendChild(a)}options.panel.appendChild(this.view.createPanel(options.data));this.enableListeners()}};me.clear=function(reserve){this.clearPanel();this.clearOverlays(reserve)};me.drawRoute=function(index){var data=this.options.data,route=data.routes[index];var distance=route.distance,steps=route.steps;var walkPaths=[],drivingPaths=[];walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var i=0,step;i<steps.length;i++){step=steps[i];drivingPaths=drivingPaths.concat(step.path)}if(drivingPaths.length>0){drivingPaths=[drivingPaths]}drivingPaths.steps=steps;this.clearRoute();this._route=this.addOverlays([],walkPaths,drivingPaths,{strokeOpacity:.4})};me.clearRoute=function(){if(this._route){for(var i=0;i<this._route.length;i++){this._route[i].setMap(null)}this._route=[]}};me.drawRouteOverlays=function(index){var data=this.options.data,route=data.routes[index];var distance=route.distance,steps=route.steps;var walkPaths=[],drivingPaths=[],points=[];points.push(data.start);if(data.waypoints){var waypoints=data.waypoints;for(var i=0,len=waypoints.length;i<len;i++){points.push(waypoints[i])}}points.push(data.end);walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var _i=0,step;_i<steps.length;_i++){step=steps[_i];drivingPaths=drivingPaths.concat(step.path)}if(drivingPaths.length>0){drivingPaths=[drivingPaths]}drivingPaths.steps=steps;this.clearOverlays(1);this._overlays=this.addOverlays(points,walkPaths,drivingPaths);if(me.options[\"autoFitView\"]){me.options.map.setFitView(this._overlays)}};me.addOverlays=function(points,walkPaths,drivingPaths,styleOptions){var _this=this;var map=this.options.map;styleOptions=styleOptions||{strokeOpacity:1};var _overlays=[];if(!this.hideMarkers){if(points[0]){if(!this.startMarker){this.startMarker=new AMap.Marker({offset:markerOffset,map:map,content:'<div class=\"amap-lib-marker-from\"></div>',innerOverlay:true});this.startMarker.isOfficial=true}var start=this.startMarker;start.setPosition(points[0].location);start.setMap(map);start._data=points[0];start.on(\"click\",this.listener.markerClick);AMap.Event.addListener(start,\"click\",this.listener.markerClick);_overlays.push(start)}if(points.length>1){if(!this.endMarker){this.endMarker=new AMap.Marker({offset:markerOffset,map:map,content:'<div class=\"amap-lib-marker-to\"></div>',innerOverlay:true});this.endMarker.isOfficial=true}var end=this.endMarker;end.setPosition(points[points.length-1].location);end.setMap(map);end._data=points[points.length-1];end.on(\"click\",this.listener.markerClick);AMap.Event.addListener(end,\"click\",this.listener.markerClick);_overlays.push(end)}for(var i=1,point;i<points.length-1;i++){if(points[i].isWaypoint){point=new AMap.Marker({map:map,offset:markerOffset,position:points[i].location,content:'<div class=\"amap-lib-marker-mid\"></div>',innerOverlay:true});point._data=points[i];AMap.Event.addListener(point,\"click\",this.listener.markerClick)}point.isOfficial=true;_overlays.push(point)}}styleOptions=me.util.extend({},me._styleOpts,styleOptions);for(var _i2=0,drivingPath;_i2<drivingPaths.length;_i2++){var trafficGradient=undefined;if(me._showTraffic&&drivingPaths.steps){(function(){var trafficGradientValues=[];var totalDistance=0;forOf(drivingPaths.steps,function(step){if(step.tmcsPaths){forOf(step.tmcsPaths,function(tmcsPath){totalDistance+=tmcsPath.distance})}});var currentDistance=0;forOf(drivingPaths.steps,function(step){if(step.tmcsPaths){forOf(step.tmcsPaths,function(tmcsPath){currentDistance+=tmcsPath.distance;trafficGradientValues.push([currentDistance/totalDistance,_this.getColorByTmcsStatus(tmcsPath.status)])})}});trafficGradient={values:trafficGradientValues}})()}drivingPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:drivingPaths[_i2],lineJoin:\"round\",strokeColor:\"#0091ff\",isOutline:me.options[\"isOutline\"],outlineColor:me.options[\"outlineColor\"],borderWeight:2,lineGradient:trafficGradient,strokeOpacity:1,showDir:me.showDir,strokeWeight:6,innerOverlay:true}));drivingPath.isOfficial=true;_overlays.push(drivingPath);me._drivingPolyline=drivingPath}for(var _i3=0,walkPath;_i3<walkPaths.length;_i3++){walkPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:walkPaths[_i3],strokeColor:\"grey\",strokeStyle:\"dashed\",strokeWeight:6,lineJoin:\"bevel\",innerOverlay:true}));walkPath.isOfficial=true;_overlays.push(walkPath)}if(me.showDir);return _overlays};me.getColorByTmcsStatus=function(status){var color;switch(status){case\"畅通\":color=\"#1BAC2E\";break;case\"缓行\":color=\"#FFA700\";break;case\"拥堵\":color=\"#E94B37\";break;case\"严重拥堵\":color=\"#A81212\";break;default:color=\"#adadad\";break}return color};me.clearPanel=function(){if(this.options&&this.options.panel){var a=me.util.getElementsByClassName(\"amap-call\",\"div\",this.options.panel)[0];if(a){a.removeEventListener(\"click\",me.listener.gotoAMap)}this.options.panel.innerHTML=\"\"}};me.clearOverlays=function(reserve){if(!reserve){if(this.startMarker){this.startMarker.setMap();this.startMarker=null}if(this.endMarker){this.endMarker.setMap();this.endMarker=null}}if(this._overlays){for(var i=0,overlay;i<this._overlays.length;i++){overlay=this._overlays[i];overlay.setMap(null)}this._overlays=[]}if(this._infoWindow){this._infoWindow.close()}if(this._highlightOverlay){this._highlightOverlay.setMap(null);this._highlightOverlay=null}this.clearRoute()};me.getTitle=function(route){var policy=route.policy?\" | <span class='blue'>\"+route.policy+\"</span>\":\"\";var result=me.util.getTime(route.time)+\"(\"+me.util.getDistance(route.distance)+\")\"+policy;return result};me.util={};me.util.extend=function(dest){var sources=Array.prototype.slice.call(arguments,1),i,j,len,src;for(j=0,len=sources.length;j<len;j=j+1){src=sources[j]||{};for(i in src){if(Object.prototype.hasOwnProperty.call(src,i)){if(typeof src[i]===\"function\"&&typeof dest[i]===\"function\"){src[i].__super=dest[i]}dest[i]=src[i]}}}return dest};me.util.getDistance=function(len){if(len<=1e3){var s=len;return s+\"米\"}else{var _s=Math.round(len/10);return\"\"+_s/100+\"公里\"}};me.util.getTime=function(second){var minute=+(second/60).toFixed(0);if(minute<60){return\"\"+minute+\"分钟\"}else{return\"\"+Math.floor(minute/60)+\"小时\"+minute%60+\"分钟\"}};me.util.domstr2dom=function(arg){var objE=document.createElement(\"div\");objE.innerHTML=arg;return objE};me.util.getElementsByClassName=function(className,tag,parent){var testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\");tag=tag||\"*\";parent=parent||document;var elements=parent.getElementsByTagName(tag);var returnElements=[];for(var i=0,current;i<elements.length;i++){current=elements[i];if(testClass.test(current.className)){returnElements.push(current)}}return returnElements};me.enableListeners=function(){var unfocusTitles=me.util.getElementsByClassName(\"planTitle\",\"div\",me.options.panel);for(var i=0,unfocusTitle;i<unfocusTitles.length;i++){unfocusTitle=unfocusTitles[i];AMap.Event.addDomListener(unfocusTitle,\"click\",this.listener.unfocusTitleClick);AMap.Event.addDomListener(unfocusTitle,\"mouseenter\",this.listener.unfocusTitleMouseenter);AMap.Event.addDomListener(unfocusTitle,\"mouseleave\",this.listener.unfocusTitleMouseleave)}var c_divs=this.util.getElementsByClassName(\"*\",\"dt\",me.options.panel);for(var _i4=0,c_div;_i4<c_divs.length;_i4++){c_div=c_divs[_i4];AMap.Event.addDomListener(c_div,\"click\",this.listener.routeStepItem)}if(unfocusTitles.length>0){me.listener.unfocusTitleClick.call(unfocusTitles[0])}};me.listener={};me.listener.markerClick=function(){var data=this._data;if(data.type===\"start\"||data.type===\"end\"){me._infoWindow.setOffset(new AMap.Pixel(0,-30))}else{me._infoWindow.setOffset(new AMap.Pixel(0,0))}if(data.name===\"起点\"||data.name===\"终点\"||data.name===\"途经点\");else{me._infoWindow.setContent(me.view.createInfowindowContent(data));me._infoWindow.open(me.options.map,this.getPosition())}me.options.map.setCenter(this.getPosition())};me.listener.routeStepItem=function(){if(!me.options.map){return}if(me._highlightOverlay){me._highlightOverlay.setMap(null)}this.style.backgroundColor=\"rgb(240, 240, 240)\";if(me.listener.routeStepItem.last){me.listener.routeStepItem.last.style.backgroundColor=\"\"}me.listener.routeStepItem.last=this;var p=this.parentNode;var children=p.children;var stepIndex;for(var i=0,child;i<children.length;i++){child=children[i];if(child===this){stepIndex=i;break}}if(stepIndex===0){me.listener.markerClick.call({_data:me.options.data.start,getPosition:function getPosition(){return me.options.data.start.location}});return}if(stepIndex===children.length-1){me.listener.markerClick.call({_data:me.options.data.end,getPosition:function getPosition(){return me.options.data.end.location}});return}me._infoWindow.close();stepIndex=stepIndex-1;var step=me.options.data.routes[me._currentRouteIndex].steps[stepIndex];var highlight;highlight=new AMap.Polyline({map:me.options.map,path:step.path,strokeColor:\"red\",strokeOpacity:.8,strokeWeight:8,lineJoin:\"round\",draggable:true,innerOverlay:true});highlight.isOfficial=true;me._highlightOverlay=highlight;me.options.map.setBounds(highlight.getBounds())};me.listener.driveTitleClick=function(){me._currentRouteTitle.style.display=\"block\";me._currentRouteOptenitem.style.display=\"none\";me.clearOverlays()};me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);if(target&&target.tagName===\"A\"){return}if(me._currentRouteTitleStatus===\"open\"&&me._currentRouteTitle===this){me.view.closeCurrentPlanDiv();me.clearOverlays()}else if(me._currentRouteTitleStatus===\"open\"){me.view.closeCurrentPlanDiv();me.view.openPlanDiv(this)}else{me.view.openPlanDiv(this)}};me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute(\"index\");me.drawRoute(index);me.listener.unfocusTitleMouseenter.last=this};me.listener.unfocusTitleMouseleave=function(e){me.clearRoute()};me.view={};me.view.openPlanDiv=function(planDiv){me._currentRouteTitle=planDiv;me._currentRouteOptenitem=planDiv.nextSibling;me.util.getElementsByClassName(\"icon-arrow-up\",\"div\",me._currentRouteTitle)[0].className=\"icon-arrow-up expand\";if(me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0]){me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0].style.display=\"inline-block\"}me._currentRouteOptenitem.style.display=\"block\";me._currentRouteTitleStatus=\"open\";var index=me._currentRouteTitle.getAttribute(\"index\");me._currentRouteIndex=index;if(me.options.map){me.drawRouteOverlays(me._currentRouteIndex)}};me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName(\"icon-arrow-up expand\",\"div\",me._currentRouteTitle)[0];var fix=me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0];if(title){title.className=\"icon-arrow-up\"}if(fix){fix.style.display=\"none\"}me._currentRouteOptenitem.style.display=\"none\";me._currentRouteTitleStatus=\"close\"};me.view.createInfowindowContent=function(data){var c=[data.name];return c.join(\"\")};me.view.createInfowindowContent=function(data){var content=document.createElement(\"div\");var div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];c.push('<div class=\"amap-lib-infowindow\">');c.push('    <div class=\"amap-lib-infowindow-title\">'+data.name+'&nbsp;<a href=\"http://detail.amap.com/detail/'+data.id+\"?spm=0.0.0.0.sWhSmy&citycode=\"+data.citycode+'\" target=\"_blank\">详情»</a></div>');c.push('    <div class=\"amap-lib-infowindow-content\">');c.push('        <div class=\"amap-lib-infowindow-content-wrap\">');c.push(\"             <div>地址：\"+data.address+\"</div>\");if(data.tel){c.push(\"             <div>电话：\"+data.tel+\"</div>\")}c.push(\"        </div>\");c.push(\"    </div>\");c.push(\"</div>\");div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\";div.appendChild(sharp);var close=document.createElement(\"div\");close.className=\"amap-combo-close\";div.appendChild(close);close.href=\"javascript: void(0)\";AMap.Event.addDomListener(close,\"touchend\",function(e){me._infoWindow[\"close\"]()});AMap.Event.addDomListener(close,\"click\",function(e){me._infoWindow[\"close\"]()});content.appendChild(div);content.appendChild(close);content.appendChild(sharp);return content};me.view.createPanel=function(data){var div=document.createElement(\"div\");div.className=\"amap-lib-driving\";if(!data.routes){div.innerHTML=\"抱歉，没有合适的路线。\";return div}var result=[];for(var i=0,route;i<data.routes.length;i++){route=data.routes[i];var isDisplay=false,title=me.getTitle(route);result=result.concat(me.view.createTitleDiv(i,title,route,!isDisplay));result=result.concat(me.view.createOpenitemDiv(i,title,data,isDisplay))}div.innerHTML=result.join(\"\");return div};me.view.createTitleDiv=function(index,title,route,isDisplay){var steps=route.steps,roadNameArray=[],roadNames=\"\",roadNames2=\"\";var temp=\"\";for(var i=0,road;i<steps.length;i++){road=steps[i].road;if(road&&road!==temp){roadNameArray.push(road);temp=road}}roadNames=roadNameArray.join(\">\");if(roadNameArray.length>4){roadNameArray.splice(2,roadNameArray.length-4,\"......\");roadNames2=roadNameArray.join(\">\")}else{roadNames2=roadNames}var r=[];r.push('<div class=\"planTitle\" index=\"'+index+'\">');r.push(\"    <h3  class='planTitle_route' title=\\\"\"+roadNames+'\">');r.push(\"         <b>\"+roadNames2+\"</b>\");r.push(\"    </h3>\");r.push(\"    <p>\"+title+\"</p>\");var d=me.options.data;r.push('    <div class=\"sidebar\">');r.push('        <div class=\"icon-arrow-up\" href=\"javascript:void(0)\"></div>');r.push(\"    </div>                \");r.push(\"</div>\");return r};me.view.createOpenitemDiv=function(index,title,data,isDisplay){var route=data.routes[index],steps=route.steps;var r=[];r.push('<dl class=\"plan plan-nobus\">');r.push(\"    <dt class=\\\"start\\\"><div class='beforedt'></div><div class='afterdt'></div><b>\"+data.start.name+\"</b></dt>\");for(var i=0,step;i<steps.length;i++){step=steps[i];r.push(' <dt class=\"route turn-'+me.getSigns(step.action)+'\"  index=\"'+index+'\">                ');r.push(\"  <div class='beforedt'></div><div class='afterdt'></div>       \"+step.instruction);r.push(\" </dt>\")}r.push(\"    <dt class=\\\"end\\\"><div class='beforedt'></div><b>\"+data.end.name+\"</b></dt>\");r.push(\"</dl>\");return r};me.getSigns=function(action){var signs=\"\";var routeSign={\"左转\":\"left\",\"右转\":\"right\",\"靠左\":\"keepleft\",\"靠右\":\"keepright\",\"向左前方行驶\":\"leftup\",\"向左后方行驶\":\"leftdown\",\"向右前方行驶\":\"rightup\",\"向右后方行驶\":\"rightdown\",\"左转调头\":\"leftback\",\"右转调头\":\"rightback\",\"进入环岛\":\"enterRing\",\"离开环岛\":\"leaveRing\",\"减速行驶\":\"slow\",\"向左前方行走\":\"leftup\",\"向左后方行走\":\"leftdown\",\"向右前方行走\":\"rightup\",\"向右后方行走\":\"rightdown\",\"通过人行横道\":\"crosswalk\",\"通过过街天桥\":\"overpass\",\"通过地下通道\":\"underpass\",\"通过广场\":\"squarepass\"};signs=routeSign[action];if(!signs){signs=\"advance\"}return signs}};var GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL);this.city=city||\"\";this.CLASS_NAME=\"AMap.GetLL\"}_createClass(GetLL,[{key:\"getCity\",value:function getCity(cbk){var url=AMap.getConfig().protocol+\"://webapi.amap.com/maps/ipCity\";AMap.WebService.get(url,{},function(status,data){if(status===\"complete\"){cbk(data)}else{cbk({})}})}},{key:\"get\",value:function get(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:\"all\"});var result=[];var getOne=function getOne(){if(keywordsList.length){var keyAndcity=keywordsList.shift();var keyword=keyAndcity[\"keyword\"];var city=keyAndcity[\"city\"]||defaultCity;if(!city){city=\"\"}psearch[\"setCity\"](city);psearch.search(keyword,function(status,data){if(status===\"error\"){cbk(\"error\",data)}else if(status===\"complete\"){if(data[\"poiList\"]&&data[\"poiList\"][\"pois\"].length){result.push(data[\"poiList\"][\"pois\"][0]);if(keywordsList.length){getOne()}else{cbk(\"complete\",result)}}else{if(!city){cbk(\"no_city\",keyAndcity)}else{cbk(\"no_poi\",keyAndcity)}}}else if(status===\"no_data\"){if(!city){cbk(\"no_city\",keyAndcity)}else{cbk(\"no_poi\",keyAndcity)}}})}};getOne()}}]);return GetLL}();var PlaceSearch=function(_AMap$Event){_inherits(PlaceSearch,_AMap$Event);var _super=_createSuper(PlaceSearch);function PlaceSearch(opt){var _this;_classCallCheck(this,PlaceSearch);_this=_super.call(this);_this.closed=false;_this.opt=AMap.extend({showCover:true,autoFitView:true},opt||{});_this.opt[\"pageIndex\"]=_this.opt[\"pageIndex\"]||1;_this.opt[\"pageSize\"]=typeof _this.opt[\"pageSize\"]!==\"number\"||_this.opt[\"pageSize\"]<0?10:_this.opt[\"pageSize\"]>50?50:_this.opt[\"pageSize\"];_this.url=AMap.getConfig().server+\"/v3/place\";return _this}_createClass(PlaceSearch,[{key:\"search\",value:function search(keyword,cbk){var params={s:\"rsv3\",children:+(this.opt[\"children\"]?\"1\":\"\")};var map={city:\"city\",rankBy:\"sortrule\",type:\"types\",pageIndex:\"page\",pageSize:\"offset\",extensions:\"extensions\",citylimit:\"citylimit\"};this._mergeParams(this.opt,map,params);this._query(this.url+\"/text\",params,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"setCity\",value:function setCity(city){AMap.BuryPoint.add(this,\"setCity\");this.opt[\"city\"]=city}},{key:\"_mergeParams\",value:function _mergeParams(data,map,params){for(var i in data){if(typeof data[i]!==\"undefined\"&&typeof map[i]!==\"undefined\"){params[map[i]]=data[i]}}return params}},{key:\"_query\",value:function _query(url,params,cbk,encodeURICom,type,args){var _this2=this;url=url+(params.length>0?\"?\"+params.join(\"&\"):\"\");AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:true},params,encodeURICom),function(status,data){if(status===\"complete\"){_this2._onComplete(data,cbk,type,args)}else{_this2._onError(data,cbk)}})}},{key:\"_onComplete\",value:function _onComplete(data,cbk,type,args){if(this.closed){return}var result;if(!parseInt(data.status,10)){result={info:data[\"info\"]};AMap.Event.trigger(this,\"error\",result);if(cbk&&typeof cbk===\"function\"){cbk(\"error\",data[\"info\"])}}else{result={info:data[\"info\"],poiList:{}};result[\"poiList\"]={pois:[],count:parseInt(data[\"count\"],10),pageIndex:this.opt[\"pageIndex\"],pageSize:this.opt[\"pageSize\"]};if(data[\"pois\"]){for(var i=0;i<data[\"pois\"].length;i+=1){var tmp=data[\"pois\"][i];result[\"poiList\"][\"pois\"][i]=this._parsePOI(tmp)}}if(data[\"suggestion\"]&&data[\"suggestion\"][\"keywords\"].length){result[\"keywordList\"]=data[\"suggestion\"][\"keywords\"];result[\"info\"]=\"TIP_KEYWORDS\"}if(data[\"suggestion\"]&&data[\"suggestion\"][\"cities\"].length){var cities=data[\"suggestion\"][\"cities\"],citiesnew=[];for(var j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city){if(city.hasOwnProperty(pro)&&pro===\"num\"){city[\"count\"]=city[pro];delete city[pro]}}city[\"count\"]=parseInt(city[\"count\"]);citiesnew.push(city)}result[\"info\"]=\"TIP_CITIES\";result[\"cityList\"]=citiesnew}if((!data[\"count\"]||parseInt(data[\"count\"],10)===0)&&!result[\"cityList\"]&&!result[\"keywordList\"]){result[\"info\"]=data[\"info\"].toLowerCase()===\"ok\"?\"NO_DATA\":data[\"info\"];AMap.Event.trigger(this,\"complete\",result);if(cbk&&typeof cbk===\"function\"){if(result[\"cityList\"]||result[\"keywordList\"]){cbk(\"complete\",result)}else{cbk(\"no_data\",{})}}}else{AMap.Event.trigger(this,\"complete\",result);if(cbk&&typeof cbk===\"function\"){cbk(\"complete\",result)}}}}},{key:\"_parsePOI\",value:function _parsePOI(poi){this._formatFields(poi);function getLngLat(location){if(location){var lngLat=location.split(\",\");return new AMap.LngLat(+lngLat[0],+lngLat[1])}else{return null}}var poiBaseInfo={id:poi[\"id\"],name:poi[\"name\"],type:poi[\"type\"],location:getLngLat(poi[\"location\"]),address:poi[\"address\"],tel:poi[\"tel\"],distance:parseFloat(poi[\"distance\"]),shopinfo:poi[\"shopinfo\"]};if(poi[\"shopinfo\"]&&poi[\"shopinfo\"].length){poiBaseInfo[\"shopinfo\"]=poi[\"shopinfo\"]}else{poiBaseInfo[\"shopinfo\"]=\"\"}if(poi[\"children\"]){var children=poi[\"children\"];for(var i=0,len=children.length;i<len;i++){children[i][\"location\"]=getLngLat(children[i][\"location\"])}poiBaseInfo[\"children\"]=children}var poiDetailInfo={website:poi[\"website\"],pcode:poi[\"pcode\"],citycode:poi[\"citycode\"],adcode:poi[\"adcode\"],postcode:poi[\"postcode\"+\"\"],pname:poi[\"pname\"],cityname:poi[\"cityname\"],adname:poi[\"adname\"],email:poi[\"email\"],photos:poi[\"photos\"],entr_location:getLngLat(poi[\"entr_location\"]),exit_location:getLngLat(poi[\"exit_location\"]),groupbuy:poi[\"groupbuy_num\"]!==\"0\",discount:poi[\"discount_num\"]!==\"0\"};if(poi[\"indoor_map\"]===\"1\"){poiDetailInfo[\"indoor_map\"]=true;poiDetailInfo[\"indoor_data\"]={cpid:this._parseString(poi[\"indoor_data\"][\"cpid\"]),floor:this._parseString(poi[\"indoor_data\"][\"floor\"]),truefloor:this._parseString(poi[\"indoor_data\"][\"truefloor\"])}}else{poiDetailInfo[\"indoor_map\"]=false}var poiDeepInfo={groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"};if(poi[\"rich_content\"]){if(poiDetailInfo[\"groupbuy\"]){var groupBuyTemp=poi[\"rich_content\"][\"groupbuys\"],groupBuyNum=groupBuyTemp.length;if(groupBuyNum>0){poiDeepInfo[\"groupbuys\"]=[]}for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n][\"title\"],type_code:groupBuyTemp[n][\"typecode\"],type:groupBuyTemp[n][\"type\"],detail:groupBuyTemp[n][\"detail\"],stime:groupBuyTemp[n][\"start_time\"],etime:groupBuyTemp[n][\"end_time\"],count:groupBuyTemp[n][\"num\"],sold_num:parseInt(groupBuyTemp[n][\"sold_num\"]),original_price:parseFloat(groupBuyTemp[n][\"original_price\"]),groupbuy_price:parseFloat(groupBuyTemp[n][\"groupbuy_price\"]),discount:parseFloat(groupBuyTemp[n][\"discount\"]),ticket_address:groupBuyTemp[n][\"ticket_address\"],ticket_tel:groupBuyTemp[n][\"ticket_tel\"],photos:groupBuyTemp[n][\"photos\"],url:groupBuyTemp[n][\"url\"],provider:\"\"};poiDeepInfo[\"groupbuys\"].push(groupBuy)}}if(poiDetailInfo[\"discount\"]){var discountTemp=poi[\"rich_content\"][\"discounts\"],disNum=discountTemp.length;if(disNum>0){poiDeepInfo[\"discounts\"]=[]}for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis][\"title\"],detail:discountTemp[dis][\"detail\"],start_time:discountTemp[dis][\"start_time\"],end_time:discountTemp[dis][\"end_time\"],sold_num:parseInt(discountTemp[dis][\"sold_num\"]),photos:discountTemp[dis][\"photos\"],url:discountTemp[dis][\"url\"],provider:\"\"};poiDeepInfo[\"discounts\"].push(discount)}}}if(poi[\"deep_info\"]){poiDeepInfo[\"deep_type\"]=poi[\"deep_info\"][\"type\"];var poiDeep=poi[\"deep_info\"];switch(poiDeepInfo[\"deep_type\"]){case\"cinema\":var cinema={intro:poiDeep[\"intro\"],rating:poiDeep[\"rating\"],deep_src:\"\",parking:poiDeep[\"parking\"],opentime_GDF:poiDeep[\"opentime_GDF\"],opentime:poiDeep[\"opentime\"],photos:poiDeep[\"photos\"]};poiDeepInfo[\"cinema\"]=cinema;poiDeepInfo[\"deep_type\"]=\"CINEMA\";break;case\"dining\":var dining={cuisines:poiDeep[\"cuisines\"],tag:poiDeep[\"tag\"],intro:poiDeep[\"intro\"],rating:poiDeep[\"rating\"],cp_rating:poiDeep[\"cp_rating\"],deep_src:\"\",taste_rating:poiDeep[\"taste_rating\"],environment_rating:poiDeep[\"environment_rating\"],service_rating:poiDeep[\"service_rating\"],cost:poiDeep[\"cost\"],recommend:poiDeep[\"recommend\"],atmosphere:poiDeep[\"atmosphere\"],ordering_wap_url:poiDeep[\"ordering_wap_url\"],ordering_web_url:poiDeep[\"ordering_web_url\"],ordering_app_url:poiDeep[\"ordering_app_url\"],opentime_GDF:poiDeep[\"opentime_GDF\"],opentime:poiDeep[\"opentime\"],addition:poiDeep[\"addition\"],photos:poiDeep[\"photos\"]};poiDeepInfo[\"dining\"]=dining;poiDeepInfo[\"deep_type\"]=\"DINING\";break;case\"scenic\":var scenic={intro:poiDeep[\"intro\"],rating:poiDeep[\"rating\"],deep_src:\"\",level:poiDeep[\"level\"],price:poiDeep[\"price\"],season:poiDeep[\"season\"],recommend:poiDeep[\"recommend\"],theme:poiDeep[\"theme\"],ordering_wap_url:poiDeep[\"ordering_wap_url\"],ordering_web_url:poiDeep[\"ordering_web_url\"],opentime_GDF:poiDeep[\"opentime_GDF\"],opentime:poiDeep[\"opentime\"],photos:poiDeep[\"photos\"]};poiDeepInfo[\"scenic\"]=scenic;poiDeepInfo[\"deep_type\"]=\"SCENIC\";break;case\"hotel\":var hotel={rating:poiDeep[\"rating\"],star:poiDeep[\"star\"],intro:poiDeep[\"intro\"],lowest_price:poiDeep[\"lowest_price\"],faci_rating:poiDeep[\"faci_rating\"],health_rating:poiDeep[\"health_rating\"],environment_rating:poiDeep[\"environment_rating\"],service_rating:poiDeep[\"service_rating\"],traffic:poiDeep[\"traffic\"],addition:poiDeep[\"addition\"],deep_src:\"\",photos:poiDeep[\"photos\"]};poiDeepInfo[\"hotel\"]=hotel;poiDeepInfo[\"deep_type\"]=\"HOTEL\";break}}var rePoi={};for(var baseK in poiBaseInfo){if(poiBaseInfo.hasOwnProperty(baseK)){rePoi[baseK]=poiBaseInfo[baseK]}}if(this.opt[\"extensions\"]&&this.opt[\"extensions\"]!==\"base\"){for(var deepK in poiDeepInfo){if(poiDeepInfo.hasOwnProperty(deepK)){if(poiDeepInfo[deepK]){rePoi[deepK]=poiDeepInfo[deepK]}}}for(var detailK in poiDetailInfo){if(poiDetailInfo.hasOwnProperty(detailK)){rePoi[detailK]=poiDetailInfo[detailK]}}if(poi.biz_ext){for(var key in poi.biz_ext){if(poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&rePoi[key]===undefined){rePoi[key]=poi.biz_ext[key]}}}}return rePoi}},{key:\"_parseString\",value:function _parseString(v){var n=v instanceof Array&&v.length===0||typeof v===\"undefined\"?\"\":v;return n}},{key:\"_formatFields\",value:function _formatFields(obj){for(var j in obj){if(obj.hasOwnProperty(j)){obj[j]=this._parseString(obj[j]);if(_typeof(obj[j])===\"object\"){this._formatFields(obj[j])}}}}},{key:\"_onError\",value:function _onError(e,cbk){AMap.Event.trigger(this,\"error\",e);if(cbk&&typeof cbk===\"function\"){cbk(\"error\",e[\"info\"])}}}]);return PlaceSearch}(AMap.Event);var DrivingPolicy=AMap.DrivingPolicy?AMap.DrivingPolicy:{LEAST_TIME:0,LEAST_FEE:1,LEAST_DISTANCE:2,REAL_TRAFFIC:4,MULTI_POLICIES:5,HIGHWAY:6,FEE_HIGHWAY:7,FEE_TRAFFIC:8,TRAFFIC_HIGHWAY:9};var Driving=function(_AMap$Event){_inherits(Driving,_AMap$Event);var _super=_createSuper(Driving);function Driving(opt){var _this2;_classCallCheck(this,Driving);_this2=_super.call(this);_this2.closed=false;_this2[\"CLASS_NAME\"]=\"AMap.Driving\";_this2.stampId=AMap.Util.stamp(_assertThisInitialized(_this2));_this2.opt=AMap.extend({showTraffic:true,showDir:true,policy:0,outlineColor:\"#ffe\",isOutline:true,autoFitView:true},opt);_this2.url=AMap.getConfig().server+\"local/direction/driving\";_this2._dodgeAreas=[];if(_this2.opt[\"map\"]||_this2.opt[\"panel\"]);return _this2}_createClass(Driving,[{key:\"_guid\",value:function _guid(){return Math.round(1e5*Math.random())}},{key:\"search\",value:function search(){var args=arguments;if(args.length>0){args[0]=AMap.Util.parseLngLatData(args[0]);args[1]=AMap.Util.parseLngLatData(args[1]);if(args[0].lng&&args[0].lat){this.search_.apply(this,args)}else if(args[0]instanceof Array){var this_=this;var cbk=args[1];if(!this_.getLL){this_.getLL=new GetLL}this_.getLL.getCity(function(data){var city=data[\"citycode\"]||\"\";this_.getLL.get(args[0],city,function(status,result){if(status===\"error\"){if(cbk&&typeof cbk===\"function\"){cbk(\"error\",result)}}else if(status===\"complete\"){var start=result[0][\"exit_location\"]||result[0].location;var end=result[result.length-1][\"entr_location\"]||result[result.length-1].location;var wps=result.slice(1,result.length-1),ps=[];for(var i=0;i<wps.length;i+=1){ps.push(wps[i][\"entr_location\"]||wps[i].location)}this_.search_(start,end,{waypoints:ps},args[1]||undefined,result)}else if(status===\"no_poi\"){args[1]&&args[1](\"error\",{info:\"在城市\"+result[\"city\"]+\"无法找到\"+result[\"keyword\"]})}else if(status===\"no_city\"){args[1]&&args[1](\"error\",{info:\"请设置\"+result[\"keyword\"]+\"的城市信息\"})}})})}}}},{key:\"clear\",value:function clear(){if(this.render){this.render[\"clear\"]()}}},{key:\"setAvoidPolygons\",value:function setAvoidPolygons(areas){areas=AMap.Util.parseLngLatData(areas);this._dodgeAreas=areas}},{key:\"clearAvoidPolygons\",value:function clearAvoidPolygons(){this._dodgeAreas=[]}},{key:\"getAvoidPolygons\",value:function getAvoidPolygons(){return this._dodgeAreas}},{key:\"setAvoidRoad\",value:function setAvoidRoad(value){this._dodgeRoad=value}},{key:\"clearAvoidRoad\",value:function clearAvoidRoad(){this._dodgeRoad=\"\"}},{key:\"getAvoidRoad\",value:function getAvoidRoad(){return this._dodgeRoad}},{key:\"searchOnAMAP\",value:function searchOnAMAP(p){var pp={};pp[\"t\"]=0;pp[\"m\"]=typeof p[\"m\"]!==\"undefined\"?p[\"m\"]:this.opt[\"policy\"];var o=AMap.Util.parseLngLatData(p[\"origin\"]);var d=AMap.Util.parseLngLatData(p[\"destination\"]);pp[\"sy\"]=o.lat;pp[\"sx\"]=o.lng;pp[\"sname\"]=p[\"originName\"]||\"\";pp[\"dy\"]=d.lat;pp[\"dx\"]=d.lng;pp[\"dname\"]=p[\"destinationName\"]||\"\"}},{key:\"setProvinceAndNumber\",value:function setProvinceAndNumber(province,number){if(province&&number){this.opt[\"province\"]=province;this.opt[\"number\"]=number}}},{key:\"search_\",value:function search_(origin,destination,opts,cbk,poiresult){var _this3=this;if(arguments.length===2){opts={}}if(arguments.length===3){if(typeof opts===\"function\"){cbk=opts;opts={}}}if(!(origin instanceof AMap.LngLat)||!(destination instanceof AMap.LngLat)){if(cbk&&typeof cbk===\"function\"){cbk(\"error\",\"NO_PARAMS\")}return}var params={origin:origin.toString(),destination:destination.toString(),extensions:this._parseString(this.opt[\"extensions\"]),s:\"rsv3\"};if(this.opt[\"province\"]&&this.opt[\"number\"]){params[\"province\"]=this.opt[\"province\"];params[\"number\"]=this.opt[\"number\"].toUpperCase()}params[\"strategy\"]=this._parseString(this.opt[\"policy\"]);params[\"ferry\"]=this._parseInt(this.opt[\"ferry\"]+0);if(opts[\"waypoints\"]&&opts[\"waypoints\"].slice){opts[\"waypoints\"]=opts[\"waypoints\"].slice(0,16);params[\"waypoints\"]=opts[\"waypoints\"].join(\";\")}if(this._dodgeAreas.length){var avoid=[];for(var i=0;i<this._dodgeAreas.length;i+=1){avoid.push(this._dodgeAreas[i].join(\";\"))}params[\"avoidpolygons\"]=avoid.join(\"|\")}if(this._dodgeRoad){params[\"avoidroad\"]=this._dodgeRoad}AMap.WebService.get(this.url,params,function(status,data){if(status===\"complete\"){_this3._onComplete(data,cbk,poiresult,{waypoints:AMap.Util.parseLngLatData(opts[\"waypoints\"])})}else{_this3._onError(data,cbk)}})}},{key:\"setPolicy\",value:function setPolicy(policy){this.opt[\"policy\"]=policy}},{key:\"setLocation\",value:function setLocation(city){this.opt[\"city\"]=city}},{key:\"_onError\",value:function _onError(e,cbk){this.emit(\"error\",e);if(cbk&&typeof cbk===\"function\"){cbk(\"error\",e[\"info\"])}}},{key:\"_str2LngLat\",value:function _str2LngLat(str){var arr=str.split(\",\");return new AMap.LngLat(+arr[0],+arr[1])}},{key:\"_multi2Lnglat\",value:function _multi2Lnglat(str){var result=[];var arr=str.split(\";\");for(var i=0;i<arr.length;i+=1){result[i]=this._str2LngLat(arr[i])}return result}},{key:\"_parseString\",value:function _parseString(v){var n=_typeof(v)===\"object\"||typeof v===\"undefined\"?\"\":v;return n}},{key:\"_parseInt\",value:function _parseInt(v){var n=parseInt(v,10);return isNaN(n)?0:n}},{key:\"_parseRoutes\",value:function _parseRoutes(data){var r=[];data=data[\"path\"]?[data[\"path\"]]:data;for(var i=0;i<data.length;i+=1){var t=data[i];r[i]={steps:this._parseStep(t[\"steps\"]),restriction:this._parseInt(t[\"restriction\"]),distance:this._parseInt(t[\"distance\"]),time:this._parseInt(t[\"duration\"]),policy:t[\"strategy\"],tolls:this._parseInt(t[\"tolls\"]),tolls_distance:this._parseInt(t[\"toll_distance\"])}}return r}},{key:\"_parseStep\",value:function _parseStep(data){var _this4=this;var r=[];var that=this;for(var i=0;i<data.length;i+=1){var driveStep=data[i];var path=this._multi2Lnglat(driveStep[\"polyline\"]);r[i]={start_location:path[0],end_location:path[path.length-1],instruction:this._parseString(driveStep[\"instruction\"]),orientation:this._parseString(driveStep[\"orientation\"]),road:this._parseString(driveStep[\"road\"]),distance:this._parseInt(driveStep[\"distance\"]),tolls:this._parseInt(driveStep[\"tolls\"]),toll_distance:this._parseInt(driveStep[\"toll_distance\"]),toll_road:this._parseString(driveStep[\"toll_road\"]),time:this._parseInt(driveStep[\"duration\"]),path:path,action:this._parseString(driveStep[\"action\"]),assistant_action:this._parseString(driveStep[\"assistant_action\"])};if(this._isArray(driveStep[\"cities\"])){r[i][\"cities\"]=this._parseArray(driveStep[\"cities\"],function(data,pro){var result;switch(pro){case\"districts\":result=that._parseArray(data);break;default:result=data}return result})}if(this._isArray(driveStep[\"tmcs\"])){r[i][\"tmcs\"]=this._parseArray(driveStep[\"tmcs\"],function(data,pro,arrItem){var result;switch(pro){case\"distance\":result=+data;break;case\"polyline\":arrItem[\"path\"]=_this4._multi2Lnglat(data);result=data;break;default:result=data}return result});r[i][\"tmcsPaths\"]=this._mergeTmcs(r[i][\"tmcs\"])}}return r}},{key:\"_mergeTmcs\",value:function _mergeTmcs(tmcs){var paths=[],lastTail=null,i,len;var tmcsPathDistance=0;for(i=0,len=tmcs.length;i<len;i++){var path=tmcs[i][\"path\"];var status=tmcs[i][\"status\"];var tmcsStepDistance=tmcs[i][\"distance\"];if(!path||!path.length){return}var lastTailEndPos=lastTail&&lastTail.path[lastTail[\"path\"].length-1];if(lastTail&&status===lastTail[\"status\"]&&path[0].equals(lastTailEndPos)){lastTail[\"path\"].push.apply(lastTail[\"path\"],path);tmcsPathDistance+=tmcsStepDistance;lastTail.distance=tmcsPathDistance}else{paths.push({path:[].concat(path),status:status,distance:0});tmcsPathDistance=tmcsStepDistance;lastTail=paths[paths.length-1];lastTail.distance=tmcsPathDistance}}return paths}},{key:\"_parseArray\",value:function _parseArray(data,filter){var results=[];for(var i=0;i<data.length;i+=1){var result={};for(var pro in data[i]){if(data[i].hasOwnProperty(pro)){if(typeof filter===\"function\"){result[pro]=filter.call(this,data[i][pro],pro,result)}else{result[pro]=data[i][pro]}}}results.push(result)}return results.length?results:null}},{key:\"_isArray\",value:function _isArray(array){if(Object.prototype.toString.call(array)===\"[object Array]\"){return true}return false}},{key:\"close\",value:function close(){this.closed=true}},{key:\"open\",value:function open(){this.closed=false}},{key:\"_onComplete\",value:function _onComplete(data,cbk,poiresult,extraOpts){if(this.closed){return}var result;var that=this;if(!parseInt(data[\"status\"],10)){result={info:data[\"info\"]};this.emit(\"error\",result);if(cbk&&typeof cbk===\"function\"){cbk(\"error\",data[\"info\"])}}else{if(data[\"route\"]){result={info:data[\"info\"],origin:this._str2LngLat(data[\"route\"][\"origin\"]),destination:this._str2LngLat(data[\"route\"][\"destination\"]),routes:this._parseRoutes(data[\"route\"][\"paths\"])};if(this.opt[\"extensions\"]===\"all\"){result[\"taxi_cost\"]=Math.ceil(data[\"route\"][\"taxi_cost\"])}if(poiresult){result[\"start\"]=poiresult[0];result[\"end\"]=poiresult[poiresult.length-1];result[\"originName\"]=result[\"start\"].name;result[\"destinationName\"]=result[\"end\"].name;result[\"waypoints\"]=poiresult.slice(1,poiresult.length-1);for(var i=0,len=result[\"waypoints\"].length;i<len;i++){result[\"waypoints\"][i][\"isWaypoint\"]=true}}else if(extraOpts){result[\"start\"]={location:result[\"origin\"],name:\"起点\"};result[\"end\"]={location:result[\"destination\"],name:\"终点\"};result[\"start\"].type=\"start\";result[\"end\"].type=\"end\";result[\"waypoints\"]=[];if(extraOpts&&extraOpts[\"waypoints\"]){var waypoints=extraOpts[\"waypoints\"];for(var _i=0,_len=waypoints.length;_i<_len;_i++){result[\"waypoints\"].push({isWaypoint:true,location:waypoints[_i],name:\"途经点\",type:\"waypoint\"})}}}if(that.opt[\"map\"]||that.opt[\"panel\"]){if(!that.render){that.render=new DrivingRender({showTraffic:that.opt[\"showTraffic\"],showDir:that.opt[\"showDir\"],zIndex:that.opt[\"zIndex\"]})}that.render[\"autoRender\"]({data:result,panel:that.opt[\"panel\"],map:that.opt[\"map\"],hideMarkers:that.opt[\"hideMarkers\"]||false,isOutline:that.opt[\"isOutline\"],outlineColor:that.opt[\"outlineColor\"],autoFitView:that.opt[\"autoFitView\"]},that)}this.emit(\"complete\",result);if(cbk&&typeof cbk===\"function\"){cbk(\"complete\",result)}}else{result={info:data[\"info\"].toLowerCase()===\"ok\"?\"NO_DATA\":data[\"info\"]};this.emit(\"complete\",result);if(cbk&&typeof cbk===\"function\"){cbk(\"no_data\",{})}}}}}]);return Driving}(AMap.Event);AMap.Driving=Driving;AMap.DrivingPolicy=DrivingPolicy}(window.AMap);\n");
_jsload_('AMap.ElasticMarker.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function extend(dest){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&(\"function\"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target);return dest}var Browser=function(localStore){var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if(\"object\"==typeof WebAssembly&&\"function\"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=(any3d=function(key){return-1!==ua.indexOf(key)})(\"macintosh\"),iPad=any3d(\"ipad;\")||any3d(\"ipad \"),viewportScale=any3d(\"ipod touch;\"),iPhone=any3d(\"iphone;\")||any3d(\"iphone \"),ios=iPhone||iPad||viewportScale,safari=(mac||ios)&&any3d(\"safari\")&&any3d(\"version/\"),ie3d=any3d(\"macwechat\"),isSvg=any3d(\"windowswechat\"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:ie3d,windowsWechat:isSvg,amapRunTime:amapRunTime};if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var win_1=window,baseRender=document,vdataVersion=baseRender.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),ie=\"ActiveXObject\"in win_1,retina=0!=window.detectRetina&&(\"devicePixelRatio\"in win_1&&1<win_1.devicePixelRatio||ie&&\"matchMedia\"in win_1&&win_1.matchMedia(\"(min-resolution:144dpi)\")&&win_1.matchMedia(\"(min-resolution:144dpi)\").matches),windows=any3d(\"windows nt\"),movingDraw=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),any3d(\"windows nt 10\"),any3d(\"windows phone\")),mb2345Browser=any3d(\"Mb2345Browser\"),ios10=(ios&&ua.search(/ os [456]_/),ios&&ua.search(/ os [4-8]_/),ios&&ua.search(/ os [78]_/),ios&&any3d(\"os 8_\"),ios&&any3d(\"os 10_\")),android_1=any3d(\"android\"),enableVector=0;android_1&&(enableVector=parseInt(ua.split(\"android\")[1])||0);var android23=android_1&&enableVector<4,plat_1=(android_1&&5<=enableVector||ua.search(/android 4.4/),android_1?\"android\":ios?\"ios\":windows?\"windows\":mac?\"mac\":\"other\"),ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!baseRender.querySelector,ielt9=ie&&!baseRender.addEventListener,ie9=ie&&any3d(\"msie 9\"),ie10=ie&&any3d(\"msie 10\"),ie11=ie&&any3d(\"rv:11\"),ielt10=ielt9||ie9,edge=any3d(\"edge\"),uc=(any3d(\"qtweb\"),any3d(\"ucbrowser\")),gaodeCoords=any3d(\"alipay\")||android_1&&uc,wechat=(any3d(\"miuibrowser\"),any3d(\"micromessenger\")),opera3d=any3d(\"dingtalk\"),qq=any3d(\"mqqbrowser\"),baidu=any3d(\"baidubrowser\"),byWebgl=any3d(\"crios/\"),chrome=any3d(\"chrome/\"),webkit_1=!((chrome||byWebgl)&&any3d(\"chromium\"))&&(chrome&&30<parseInt(ua.split(\"chrome/\")[1])||byWebgl&&30<parseInt(ua.split(\"crios/\")[1])),firefox=any3d(\"firefox\"),webkit3d=firefox&&27<parseInt(ua.split(\"firefox/\")[1]),gecko3d=safari&&7<parseInt(ua.split(\"version/\")[1]),mobile_1=(ios&&any3d(\"aliapp\"),android_1||ios||movingDraw||any3d(\"mobile\")),checkWebgl=\"ontouchstart\"in baseRender,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!checkWebgl&&(pointer||msPointer),touch_1=checkWebgl||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName(\"meta\")}catch(e){return 1}for(var i=metas.length-1;0<=i;--i)if(\"viewport\"===metas[i].name){var content=metas[i].content,initial_scale=void 0,minimum_scale=void 0,maximum_scale=void 0;return-1!==content.indexOf(\"initial-scale\")&&(initial_scale=parseFloat(content.split(\"initial-scale=\")[1])),minimum_scale=-1!==content.indexOf(\"minimum-scale\")?parseFloat(content.split(\"minimum-scale=\")[1]):0,maximum_scale=-1!==content.indexOf(\"maximum-scale\")?parseFloat(content.split(\"maximum-scale=\")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log(\"viewport参数不合法\"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log(\"viewport参数不合法\"),null)}}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&\"transition\"in vdataVersion.style,isSvg=!!baseRender.createElementNS&&!!baseRender.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,canvas_1=baseRender.createElement(\"canvas\"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),enableVector=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!webkit_1)&&window.Worker&&enableVector&&enableVector.createObjectURL&&window.Blob,webglContextName_1=\"\",graphicCard_1=\"\",maxRenderSize_1=0,byWebgl=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:byWebgl,depth:!0,stencil:!0}),checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var contextName=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var graphicCardShort=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!graphicCardShort)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,graphicCardShort[0],graphicCardShort[1]),safari&&\"mac\"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));graphicCardShort=Math.max(screen.width,screen.height);if(needFitRetina_1&&(graphicCardShort*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<graphicCardShort)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCardShort=function(graphicVersion){if(!graphicVersion)return null;var forShort=null,radeonIndex=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/);if(0<=(graphicVersion=(graphicVersion=radeonIndex?(graphicVersion=radeonIndex[1]).replace(/\\s*direct3d.*$/,\"\"):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\")).indexOf(\"intel\")){forShort=[\"Intel\"];return 0<=graphicVersion.indexOf(\"mobile\")&&forShort.push(\"Mobile\"),(0<=graphicVersion.indexOf(\"gma\")||0<=graphicVersion.indexOf(\"graphics media accelerator\"))&&forShort.push(\"GMA\"),0<=graphicVersion.indexOf(\"haswell\")?forShort.push(\"Haswell\"):0<=graphicVersion.indexOf(\"ivy\")?forShort.push(\"HD 4000\"):0<=graphicVersion.indexOf(\"sandy\")?forShort.push(\"HD 3000\"):0<=graphicVersion.indexOf(\"ironlake\")?forShort.push(\"HD\"):(0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase())),forShort=forShort.join(\" \")}if(0<=graphicVersion.indexOf(\"nvidia\")||0<=graphicVersion.indexOf(\"quadro\")||0<=graphicVersion.indexOf(\"geforce\")||0<=graphicVersion.indexOf(\"nvs\"))return forShort=[\"nVidia\"],0<=graphicVersion.indexOf(\"geforce\")&&forShort.push(\"geForce\"),0<=graphicVersion.indexOf(\"quadro\")&&forShort.push(\"Quadro\"),0<=graphicVersion.indexOf(\"nvs\")&&forShort.push(\"NVS\"),graphicVersion.match(/\\bion\\b/)&&forShort.push(\"ION\"),graphicVersion.match(/gtx\\b/)?forShort.push(\"GTX\"):graphicVersion.match(/gts\\b/)?forShort.push(\"GTS\"):graphicVersion.match(/gt\\b/)?forShort.push(\"GT\"):graphicVersion.match(/gs\\b/)?forShort.push(\"GS\"):graphicVersion.match(/ge\\b/)?forShort.push(\"GE\"):graphicVersion.match(/fx\\b/)&&forShort.push(\"FX\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"GS\",\"\")),0<=graphicVersion.indexOf(\"titan\")?forShort.push(\"TITAN\"):0<=graphicVersion.indexOf(\"ti\")&&forShort.push(\"Ti\"),forShort=forShort.join(\" \");if(0<=graphicVersion.indexOf(\"amd\")||0<=graphicVersion.indexOf(\"ati\")||0<=graphicVersion.indexOf(\"radeon\")||0<=graphicVersion.indexOf(\"firegl\")||0<=graphicVersion.indexOf(\"firepro\")){forShort=[\"AMD\"],0<=graphicVersion.indexOf(\"mobil\")&&forShort.push(\"Mobility\");var number,radeonIndex=graphicVersion.indexOf(\"radeon\");return 0<=radeonIndex&&forShort.push(\"Radeon\"),0<=graphicVersion.indexOf(\"firepro\")?forShort.push(\"FirePro\"):0<=graphicVersion.indexOf(\"firegl\")&&forShort.push(\"FireGL\"),0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=(graphicVersion=0<=radeonIndex?graphicVersion.substring(radeonIndex):graphicVersion).match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"HD\",\"\")),forShort=forShort.join(\" \")}return graphicVersion.substring(0,100)}(graphicCard_1=gl.getExtension(\"WEBGL_debug_renderer_info\")?gl.getParameter(37446):null);if(graphicCardShort){if(-1<graphicCardShort.indexOf(\"google swiftshader\"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(graphicCardShort))return!1}return webglContextName_1=contextName[i],!0}}return!1},baseRender=checkWebgl(),enableVector=void 0===localStore[8]||localStore[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&baseRender&&(window.forceWebGL||(webkit_1||webkit3d||gecko3d||edge||wechat||opera3d)&&\"other\"!=plat_1),baseRender=window.forceWebGLBaseRender||byWebgl?\"w\":\"d\",webkit_1=any3d(\"webkit\"),webkit3d=\"WebKitCSSMatrix\"in win_1&&\"m11\"in new window.WebKitCSSMatrix,gecko3d=\"MozPerspective\"in vdataVersion.style,opera3d=\"OTransition\"in vdataVersion.style,any3d=ie3d||webkit3d||gecko3d||opera3d,vdataVersion=void 0!==localStore[12]?localStore[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(chromeversion=(new Date).getTime()+\"\",win_1.localStorage.setItem(\"_test\",chromeversion),win_1.localStorage.getItem(\"_test\")!==chromeversion&&(localStore=!1),win_1.localStorage.removeItem(\"_test\"))}catch(e){localStore=!1}var chromeversion=parseInt(ua.split(\"chrome/\")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:ios,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=chromeversion,chrome64:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:byWebgl,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?baseRender:\"d\",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:checkWebgl};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}(\"undefined\"==typeof config?[]:config);\"undefined\"!=typeof createImageBitmap&&\"undefined\"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);var ElasticMarker=Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));Browser.canceledWorkerFetch=ElasticMarker,Browser.amapRunTime={workerTime:{}};var checked,_docIsLtr,DomUtil={getViewport:function(obj){return obj?[obj.clientWidth,obj.clientHeight]:[0,0]},getStyle:function(obj,key){var css,value=obj.style[key];return\"auto\"===(value=!((value=!((value=(!value||\"auto\"===value)&&document.defaultView?(css=document.defaultView.getComputedStyle(obj,null))?css[key]:null:value)&&\"auto\"!==value||\"height\"!==key)?obj.clientHeight+\"px\":value)&&\"auto\"!==value||\"width\"!==key)?obj.clientWidth+\"px\":value)?null:value},getViewportOffset:function(element){var pos,top=0,left=0,el=element,docBody=document.body,docEl=document.documentElement;do{if(top+=el.offsetTop||0,left+=el.offsetLeft||0,top+=parseInt(DomUtil.getStyle(el,\"borderTopWidth\"),10)||0,left+=parseInt(DomUtil.getStyle(el,\"borderLeftWidth\"),10)||0,pos=DomUtil.getStyle(el,\"position\"),el.offsetParent===docBody&&\"absolute\"===pos)break;if(\"fixed\"===pos){top+=docBody.scrollTop||docEl.scrollTop||0,left+=docBody.scrollLeft||docEl.scrollLeft||0;break}}while(el=el.offsetParent);for(el=element;el!==docBody&&(top-=el.scrollTop||0,left-=el.scrollLeft||0,!DomUtil.documentIsLtr()&&Browser.webkit&&(left+=el.scrollWidth-el.clientWidth),el=el.parentNode););return[left,top]},documentIsLtr:function(){return checked||(_docIsLtr=\"ltr\"===DomUtil.getStyle(document.body,\"direction\"),checked=!0),_docIsLtr},create:function(el,container,className,firstDom){el=document.createElement(el);return className&&(el.className=className),container&&(firstDom&&\"before\"===firstDom?(firstDom=container.firstChild,container.insertBefore(el,firstDom)):container.appendChild(el)),el},toggleClass:function(el,name,on){on?this.addClass(el,name):this.removeClass(el,name)},hasClass:function(el,name){if(el&&name)return 0<el.className.length&&new RegExp(\"(^|\\\\s)\"+name+\"(\\\\s|$)\").test(el.className)},addClass:function(el,name){el&&name&&(el.classList&&el.classList.add?el.classList.add(name):this.hasClass(el,name)||(el.className+=(el.className?\" \":\"\")+name))},setClass:function(el,name){el&&(el.className=name||\"\")},removeClass:function(el,name){el&&name&&(el.classList&&el.classList.remove?el.classList.remove(name):el.className=el.className.replace(/(\\S+)\\s*/g,function(w,match){return match===name?\"\":w}).replace(/(^\\s+|\\s+$)/,\"\"))},watchSize:function(element,listener,map){var iframe=document.createElement(\"iframe\");iframe.style.cssText=\"width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;\",iframe.onload=function(){iframe&&(iframe.contentWindow.onresize=sizeChange)},element.appendChild(iframe),iframe.src=\"about:blank\";var oldWidth=0,oldHeight=0;function sizeChange(){map._boundingClientRect=element.getBoundingClientRect(),map._clientPos=[element.clientLeft,element.clientTop];var width=element.offsetWidth,height=element.offsetHeight;width===oldWidth&&height===oldHeight||(listener(width,height),oldWidth=width,oldHeight=height)}return sizeChange(),map.resize=sizeChange,window.onscroll=sizeChange,function(){var _a;map.resize&&(map.resize=null),window.onscroll&&(window.onscroll=null),iframe.contentWindow&&(iframe.contentWindow.onresize=null,iframe.contentWindow.document.write(\"\"),iframe.parentNode.removeChild(iframe),null!==(_a=iframe.contentWindow)&&void 0!==_a&&_a.close())}},watchSize2:function(element,listener,map){var expand=document.createElement(\"_\");expand.className=\"expand\";var shrink=expand.appendChild(document.createElement(\"_\"));shrink.className=\"shrink\";var expandChild=expand.appendChild(document.createElement(\"_\"));expandChild.className=\"expandChild\";var lastWidth,lastHeight,shrinkChild=shrink.appendChild(document.createElement(\"_\"));shrinkChild.className=\"shrinkChild\";return shrink.style.cssText=expand.style.cssText=\"height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1\",shrinkChild.style.cssText=expandChild.style.cssText=\"display:block;height:100%;transition:0s;width:100%\",shrinkChild.style.width=shrinkChild.style.height=\"200%\",element.appendChild(expand),test(),function(){unbind(),element.removeChild(expand)};function test(){unbind(),map._boundingClientRect=element.getBoundingClientRect(),map._clientPos=[element.clientLeft,element.clientTop];var width=element.offsetWidth,height=element.offsetHeight;width===lastWidth&&height===lastHeight||(lastWidth=width,lastHeight=height,expandChild.style.width=2*width+\"px\",expandChild.style.height=2*height+\"px\",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight,shrink.scrollLeft=shrink.scrollWidth,shrink.scrollTop=shrink.scrollHeight,listener(width,height)),shrink.addEventListener(\"scroll\",test),expand.addEventListener(\"scroll\",test)}function unbind(){shrink.removeEventListener(\"scroll\",test),expand.removeEventListener(\"scroll\",test)}},mousePos:function(rect,t,map){rect&&(map._boundingClientRect=rect.getBoundingClientRect(),map._clientPos=[rect.clientLeft,rect.clientTop]);rect=map._boundingClientRect;return[(t=t.touches&&t.changedTouches?0<t.touches.length?t.touches[0]:t.changedTouches[t.changedTouches.length-1]:t).clientX-rect.left-map._clientPos[0],t.clientY-rect.top-map._clientPos[1]]},remove:function(el){el&&el.parentNode&&el.parentNode.removeChild(el)},empty:function(el){for(;el.firstChild;)el.removeChild(el.firstChild)},closest:function(parent,className){if(parent){if(this.hasClass(parent,className))return parent;parent=parent.parentElement;return parent?DomUtil.closest(parent,className):null}return null},fillText:function(el,text){if(el)return void 0!==el.textContent?el.textContent=text:void 0!==el.innerText?el.innerText=text:el.innerHTML=text,el},testProp:function(props){for(var style=document.documentElement.style,i=0;i<props.length;i+=1)if(props[i]in style)return props[i];return!1},rotate:function(t,sinDeg,center){var cache,cosDeg=DomUtil.TRANSFORM;center=center||{x:t.clientWidth/2,y:t.clientHeight/2},cosDeg?(cache=\"\",t.style[cosDeg]=cache+=\" rotate(\"+sinDeg+\"deg)\",t.style[DomUtil.trans[cosDeg]+\"-origin\"]=center.x+\"px \"+center.y+\"px\"):(cosDeg=Math.cos(sinDeg*Math.PI/180),sinDeg=Math.sin(sinDeg*Math.PI/180),t.style.filter=\"progid:DXImageTransform.Microsoft.Matrix()\",0<t.filters.length&&((t=t.filters.item(0)).Dx=-center.x*cosDeg+center.y*sinDeg+center.x,t.Dy=-center.x*sinDeg-center.y*cosDeg+center.y,t.M11=t.M22=cosDeg,t.M12=-(t.M21=sinDeg)))},setCss:function(obj,css){obj=obj instanceof Array?obj:[obj];for(var i=0;i<obj.length;i+=1)for(var j in css)css.hasOwnProperty(j)&&(obj[i].style[j]=css[j]);return this},setOpacity:function(el,finalOpacity){el.style&&(\"opacity\"in el.style?el.style.opacity=\"\"+finalOpacity:\"filter\"in el.style&&(finalOpacity=Math.round(100*finalOpacity),el.style.filter=\"\",100!==finalOpacity&&(el.style.filter=\" progid:DXImageTransform.Microsoft.Alpha(opacity=\"+finalOpacity+\")\")))},trans:{},TRANSFORM:_docIsLtr=checked=!1};DomUtil.TRANSFORM=DomUtil.testProp([\"WebkitTransform\",\"OTransform\",\"MozTransform\",\"msTransform\",\"transform\"]),DomUtil.trans={transform:\"transform\",WebkitTransform:\"-webkit-transform\",OTransform:\"-o-transform\",MozTransform:\"-moz-transform\",msTransform:\"-ms-transform\"};var zoomRange=[2,26],defaultMarkerOptions={map:null,visible:!0,zIndex:12,offset:[0,0],anchor:[0,0],rotate:0,scale:1,zooms:zoomRange,title:\"\",clickable:!0,draggable:!1,bubble:!1},CONSTS_Type=\"AMap.ElasticMarker\",CONSTS_ElasticMarkerClass=\"amap-overlay-elastic-container\",LabelDirectionMapping={BL:\"bottom-left\",BM:\"bottom-center\",BR:\"bottom-right\",ML:\"middle-left\",MR:\"middle-right\",TL:\"top-left\",TM:\"top-center\",TR:\"top-right\",C:\"center\"},ElasticMarker=function(_super){function __(){this.constructor=d}var d,b;function ElasticMarker(map){var _this=_super.call(this,map=void 0===map?{}:map)||this;_this.className=CONSTS_Type,_this.type=CONSTS_Type,_this._iconMap={},_this._elasticScale=1,_this._opts=AMap.extend({},defaultMarkerOptions,_this._opts);var styles=map.styles,zoomStyleMapping=map.zoomStyleMapping;styles&&_this.setStyle(styles),zoomStyleMapping&&_this.setMapping(zoomStyleMapping);map=map.map;return map&&_this.add(map),_this}return extendStatics(d=ElasticMarker,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),ElasticMarker.prototype.add=function(map){map&&(this._add(map),this._parent&&(this._parent.addToGroup(this),this.updateOverlay()))},ElasticMarker.prototype.setStyle=function(styles){this._elasticStyles=styles},ElasticMarker.prototype.setMapping=function(mapping){this._mapping=mapping},ElasticMarker.prototype.updateOverlay=function(params){this._createDom(this.dom),_super.prototype.updateOverlay.call(this)},ElasticMarker.prototype._createDom=function(container){(this.dom=container).innerHTML=\"\";var outter=this._createElasticOutter();return container.appendChild(outter),this._outter=outter,this._createElasticDom(),container},ElasticMarker.prototype._createElasticDom=function(){var outter=this._createElasticOutter();return this._updateElasticContent(),outter},ElasticMarker.prototype._getSize=function(){var elasticScale=this._elasticScale,_a=_super.prototype._getSize.call(this);return[_a[0]*elasticScale,_a[1]*elasticScale]},ElasticMarker.prototype._getImageSize=function(size){var elasticScale=this._elasticScale,size=size.getImageSize(),size=size.width?size.toArray():size;return[size[0]*elasticScale,size[1]*elasticScale]},ElasticMarker.prototype._getImageOffset=function(offset){var elasticScale=this._elasticScale,offset=offset.getImageOffset(),offset=offset.x?offset.toArray():offset;return[offset[0]*elasticScale,offset[1]*elasticScale]},ElasticMarker.prototype._createElasticOutter=function(){var container=document.createElement(\"div\");return DomUtil.addClass(container,CONSTS_ElasticMarkerClass),container},ElasticMarker.prototype._updateElasticContent=function(){var curZoom,zoom,icon,label;return this._map&&(curZoom=this._map.getZoom(),zoom=AMap.Util.getOptimalZoom(curZoom),(label=this._getContentByZoom(zoom))&&(icon=label.icon,label=void 0===(label=label.label)?{}:label,icon&&(this._elasticScale=this._updateElasticSize(icon,curZoom),this._updateIcon(icon)),label&&((label.minZoom||2)<=zoom?this._updateLabel(label):this._updateLabel({})))),null},ElasticMarker.prototype._getContentByZoom=function(styleIndex){var styles=this._elasticStyles,styleIndex=(this._mapping||{})[styleIndex];return void 0===styleIndex?null:styles[styleIndex]},ElasticMarker.prototype._updateIcon=function(icon){var iconElem,imageSize,imageOffset,img,iconParams_1,iconObj_1,iconElem_1,_this=this,curSize=this._iconMap[icon.img];curSize?(iconElem=curSize.elem,imageSize=curSize.params,imageOffset=curSize.size,img=curSize.icon,this._opts.anchor=imageSize.ancher||imageSize.anchor,this._opts.size=img.getSize(),curSize=this._getSize(),imageSize=imageSize.imageSize?this._getImageSize(img):curSize,this._size=imageOffset,imageOffset=this._getImageOffset(img),img=iconElem.children[0],this._setIconSize(iconElem,img,curSize,imageSize),this._setIconStyle(iconElem,img,{curSize:curSize,imageSize:imageSize,imageOffset:imageOffset}),this._outter.appendChild(iconElem)):(iconParams_1=AMap.extend({image:icon.img},icon),iconObj_1=new AMap.Icon(iconParams_1),this._opts.anchor=icon.ancher||icon.anchor,this._opts.size=iconObj_1.getSize(),iconElem_1=this._createIcon(iconObj_1,function(){_this._iconMap[icon.img]={icon:iconObj_1,elem:iconElem_1,size:_super.prototype._getSize.call(_this),params:iconParams_1};var curSize=_this._getSize(),imageSize=iconParams_1.imageSize?_this._getImageSize(iconObj_1):curSize,imageOffset=_this._getImageOffset(iconObj_1),img=iconElem_1.children[0];_this._setIconSize(iconElem_1,img,curSize,imageSize),_this._setIconStyle(iconElem_1,img,{curSize:curSize,imageSize:imageSize,imageOffset:imageOffset}),_super.prototype.updateOverlay.call(_this)}),this._outter.appendChild(iconElem_1))},ElasticMarker.prototype._updateLabel=function(_b){var offset=_b||{},content=offset.content,_b=offset.position,offset=offset.offset;this.setLabel({content:content,direction:LabelDirectionMapping[void 0===_b?\"C\":_b],offset:offset,_needUpdate:!1})},ElasticMarker.prototype._updateElasticSize=function(scaleAbs,lowerExponent){var scale=scaleAbs.fitZoom,minScale=scaleAbs.scaleFactor,lowerScatter=void 0===minScale?1:minScale,scaleZoom=scaleAbs.maxScale,maxScale=void 0===scaleZoom?zoomRange[0]:scaleZoom,upperExponent=scaleAbs.minScale,minScale=void 0===upperExponent?zoomRange[1]:upperExponent,scaleZoom=lowerExponent-(void 0===scale?lowerExponent:scale),scaleAbs=Math.abs(scaleZoom),upperExponent=Math.pow(lowerScatter,Math.ceil(scaleAbs)),lowerExponent=Math.pow(lowerScatter,Math.floor(scaleAbs)),scale=(Math.ceil(scaleAbs)-scaleAbs)*(lowerScatter-1)+1,lowerScatter=(scaleAbs-Math.floor(scaleAbs))*(lowerScatter-1)+1,scale=0<=scaleZoom?lowerExponent*lowerScatter:1/upperExponent*scale;return scale=Math.min(maxScale,Math.max(minScale,scale))},ElasticMarker}(AMap.Marker);AMap.ElasticMarker=ElasticMarker}();\n");
_jsload_('AMap.EllipseEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);var _super=_createSuper(PointList);function PointList(){var _this;_classCallCheck(this,PointList);_this=_super.apply(this,arguments);_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);var _super2=_createSuper(AbstractPointListNode);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_super2.apply(this,arguments);_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);var _super=_createSuper(Point);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_super.call(this);_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);var _super2=_createSuper(PointWithMarker);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_super2.call(this);_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);var EllipsePoint=function(_AMap$Event){_inherits(EllipsePoint,_AMap$Event);var _super=_createSuper(EllipsePoint);function EllipsePoint(map,ellipse){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,EllipsePoint);_this=_super.call(this);_this.map=map;_this.ellipse=ellipse;var center=ellipse.getCenter();var radius=ellipse.getRadius();var isMobile=AMap.Browser.mobile;_this.movePoint=new PointWithMarker(map,center.toJSON(),opts.movePoint||{content:'<div class=\"'+(isMobile?\"amap-elps-mobile \":\"\")+\"amap-elps-node amap-elps-\"+\"moveNode\"+'\"></div>',cursor:\"move\",offset:isMobile?new AMap.Pixel(-13,-13):new AMap.Pixel(-8,-8)});var movePosx=center.offset(radius[0],0);var movePosy=center.offset(0,radius[1]);_this.resizeXPoint=new PointWithMarker(map,movePosx,opts.resizeXPoint||{content:'<div class=\"'+(isMobile?\"amap-elps-mobile \":\"\")+\"amap-elps-node amap-elps-\"+\"resizeXNode\"+'\"></div>',offset:new AMap.Pixel(-10,-10)});_this.resizeYPoint=new PointWithMarker(map,movePosy,opts.resizeYPoint||{content:'<div class=\"'+(isMobile?\"amap-elps-mobile \":\"\")+\"amap-elps-node amap-elps-\"+\"resizeYNode\"+'\"></div>',offset:new AMap.Pixel(-10,-10)});_this.bindEvent();return _this}_createClass(EllipsePoint,[{key:\"bindEvent\",value:function bindEvent(){this.movePoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.resizeXPoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.resizeYPoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.movePoint.marker.on(\"dragend\",this._onMarkerDragEnd.bind(this));this.resizeXPoint.marker.on(\"dragend\",this._onMarkerDragEnd.bind(this));this.resizeYPoint.marker.on(\"dragend\",this._onMarkerDragEnd.bind(this))}},{key:\"unbindEvent\",value:function unbindEvent(){this.movePoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.resizeXPoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.resizeYPoint.marker.on(\"dragging\",this._onMarkerDrag.bind(this));this.movePoint.marker.off(\"dragend\",this._onMarkerDragEnd.bind(this));this.resizeXPoint.marker.off(\"dragend\",this._onMarkerDragEnd.bind(this));this.resizeYPoint.marker.off(\"dragend\",this._onMarkerDragEnd.bind(this))}},{key:\"show\",value:function show(){this.movePoint.show();this.resizeXPoint.show();this.resizeYPoint.show();this._updateText()}},{key:\"hide\",value:function hide(){this.movePoint.hide();this.resizeXPoint.hide();this.resizeYPoint.hide()}},{key:\"destroy\",value:function destroy(){this.unbindEvent();this.movePoint.remove();this.resizeXPoint.remove();this.resizeYPoint.remove()}},{key:\"_updateText\",value:function _updateText(){var radius=this.ellipse.getRadius();this.resizeXPoint.marker.setLabel({content:\"横轴半径：\".concat(radius[0],\"米\")});this.resizeYPoint.marker.setLabel({content:\"纵轴半径：\".concat(radius[1],\"米\")})}},{key:\"_handleMovePointDragging\",value:function _handleMovePointDragging(){var pos=this.movePoint.marker.getPosition();var resizePosX=this.resizeXPoint.marker.getPosition();var resizePosY=this.resizeYPoint.marker.getPosition();var circleCenter=this.ellipse.getCenter();if(!pos||!resizePosX||!resizePosY){return}var newPosX=pos.add(resizePosX.subtract(circleCenter,false),false);var newPosY=pos.add(resizePosY.subtract(circleCenter,false),false);this.resizeXPoint.marker.setPosition(newPosX.toJSON());this.resizeYPoint.marker.setPosition(newPosY.toJSON());this.ellipse.setCenter(pos);this._updateText();this.emit(ListEvent.change)}},{key:\"_handleResizePointDragging\",value:function _handleResizePointDragging(){var moveLatLng=this.ellipse[\"getCenter\"]();var resizeLatlngX=this.resizeXPoint.marker.getPosition();var resizeLatlngY=this.resizeYPoint.marker.getPosition();var radiusX=Math.round(AMap.GeometryUtil.distance(moveLatLng,resizeLatlngX));var radiusY=Math.round(AMap.GeometryUtil.distance(moveLatLng,resizeLatlngY));this.ellipse.setRadius([radiusX,radiusY]);this._updateResizeMarker();this._updateText();this.emit(ListEvent.change)}},{key:\"_handleResizePointDragend\",value:function _handleResizePointDragend(){this.emit(ListEvent.adjust)}},{key:\"_handleMovePointDragend\",value:function _handleMovePointDragend(){this.emit(ListEvent.move)}},{key:\"_onMarkerDrag\",value:function _onMarkerDrag(e){var marker=e.target;var lnglat=marker[\"getPosition\"]();if(marker===this.movePoint.marker){this._handleMovePointDragging()}else{this._handleResizePointDragging()}this.emit(ListEvent.change)}},{key:\"_onMarkerDragEnd\",value:function _onMarkerDragEnd(e){var marker=e.target;if(marker===this.movePoint.marker){this.emit(ListEvent.move,e)}else{var radius=this.ellipse.getRadius();this.emit(ListEvent.adjust,{radius:radius,lnglat:e.lnglat,pixel:e.pixel})}}},{key:\"_updateResizeMarker\",value:function _updateResizeMarker(){var resizeMarkerPointPos=this._getResizeMarkerPoint();this.resizeXPoint.marker.setPosition(resizeMarkerPointPos[0].toJSON());this.resizeYPoint.marker.setPosition(resizeMarkerPointPos[1].toJSON())}},{key:\"_getResizeMarkerPoint\",value:function _getResizeMarkerPoint(){var center=this.ellipse.getCenter();var radius=this.ellipse.getRadius();var deltaX=radius[0],deltaY=radius[1];return[center.offset(deltaX,0),center.offset(0,deltaY)]}}]);return EllipsePoint}(AMap.Event);function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var BaseEditor=function(_AMap$Event){_inherits(BaseEditor,_AMap$Event);var _super=_createSuper(BaseEditor);function BaseEditor(_map,_poly){var _this;_classCallCheck(this,BaseEditor);_this=_super.call(this);_this._map=_map;_this.className=\"AMap.BaseEditor\";_this._editing=false;_this._poly=_poly;return _this}_createClass(BaseEditor,[{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}if(overlay){this._poly=overlay}}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange);this.list.on(ListEvent.move,this.handleMove)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange);this.list.off(ListEvent.move,this.handleMove)}}},{key:\"handleChange\",value:function handleChange(){}},{key:\"handleMove\",value:function handleMove(event){this.emit(ListEvent.move,{target:this.getTarget(),lnglat:event.lnglat,pixel:event.pixel})}},{key:\"handleAddNode\",value:function handleAddNode(event){this.emit(ListEvent.addNode,event)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(){}},{key:\"handleAdjust\",value:function handleAdjust(event){this.emit(ListEvent.adjust,AMap.extend({},event,{target:this.getTarget()}))}},{key:\"open\",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList();this._openEdit()}else{this._creator.open()}if(!this._poly||!this.list){return}}},{key:\"_openEdit\",value:function _openEdit(){if(!this.list||!this._poly){return}this.list.show();this._saveCustomStyle();this._poly.setOptions(this._editStyle?this._editStyle:{})}},{key:\"_saveCustomStyle\",value:function _saveCustomStyle(){if(!this._poly){return}this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds}},{key:\"close\",value:function close(){this._editing=false;if(!this._poly){return}if(!this.list){return}this.list.hide();this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){if(this.list){this.unbindListEvent();this.list.destroy();delete this.list}delete this._poly}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return BaseEditor}(AMap.Event);__decorate([autobind],BaseEditor.prototype,\"handleChange\",null);__decorate([autobind],BaseEditor.prototype,\"handleMove\",null);__decorate([autobind],BaseEditor.prototype,\"handleAddNode\",null);__decorate([autobind],BaseEditor.prototype,\"handleRemoveNode\",null);__decorate([autobind],BaseEditor.prototype,\"handleAdjust\",null);var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var EllipseCreator=function(_AMap$Event){_inherits(EllipseCreator,_AMap$Event);var _super=_createSuper(EllipseCreator);function EllipseCreator(_map){var _this;_classCallCheck(this,EllipseCreator);_this=_super.call(this);_this._map=_map;return _this}_createClass(EllipseCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat.toJSON();var radius=this._map.getResolution()*60;this.emit(\"create\",{center:center,radius:[radius,radius]});this.close()}}]);return EllipseCreator}(AMap.Event);__decorate$1([autobind],EllipseCreator.prototype,\"_onMapClick\",null);var EllipseEditor=function(_BaseEditor){_inherits(EllipseEditor,_BaseEditor);var _super2=_createSuper(EllipseEditor);function EllipseEditor(map,_poly){var _this2;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,EllipseEditor);_this2=_super2.call(this,map,_poly);_this2._normalCircleStyle={draggbable:true,strokeColor:\"#FF33FF\",strokeWeight:3,strokeOpacity:.2,fillOpacity:.4,strokeStyle:\"dashed\",strokeDasharray:[10,10],fillColor:\"#1791fc\",zIndex:50};_this2._editStyle={strokeColor:\"#1791fc\",strokeWeight:3,strokeOpacity:.8,fillOpacity:.4,strokeStyle:\"solid\",strokeDasharray:[10,10],fillColor:\"#1791fc\",draggable:false};_this2.className=\"AMap.EllipseEditor\";_this2._opts=opts;_this2._normalCircleStyle=AMap.extend(_this2._normalCircleStyle,opts.createOptions||{});_this2._editStyle=AMap.extend(_this2._editStyle,opts.editOptions||{});_this2._creator=new EllipseCreator(map);_this2._creator.on(\"create\",function(data){_this2._creator.close();var poly=new AMap.Ellipse(AMap.extend({map:_this2._map,center:data.center,radius:data.radius},_this2._normalCircleStyle));_this2.setTarget(poly);_this2.open();_this2.emit(ListEvent.add,{target:_this2.getTarget(),obj:poly})});return _this2}_createClass(EllipseEditor,[{key:\"initList\",value:function initList(){if(!this._poly){return}if(!this.list){this.list=new EllipsePoint(this._map,this._poly,this._opts)}this.bindListEvent()}}]);return EllipseEditor}(BaseEditor);AMap.EllipseEditor=EllipseEditor}(window.AMap);\n");
_jsload_('AMap.GeoJSON.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var d1,d2,r,projections={},DataView=function(){function Projection(id,project,unproject,getResolution){this.project=project,this.unproject=unproject,this.getResolution=getResolution,projections[id]=this}return Projection.prototype.moveWithPixel=function(pos,offsetPixel,offsetX){var offsetY=this.getResolution(offsetX),offsetX=offsetPixel[0]*offsetY,offsetY=offsetPixel[1]*offsetY,pos=this.project(pos[0],pos[1]);return this.unproject(pos[0]+offsetX,pos[1]+offsetY)},Projection.prototype.moveWithPos=function(originPos,newPos){originPos=this.project(originPos[0],originPos[1]),newPos=[originPos[0]+newPos[0],originPos[1]+newPos[1]];return this.unproject(newPos[0],newPos[1])},Projection}(),ProjectionManager={getProjection:function(id){return projections[id]}};new DataView(\"EPSG:4326\",function(lng,lat){return[lng,lat]},function(x,y){return[x,y]},function(zoom){return.703125/Math.pow(2,zoom)}),d1=Math.PI/180,d2=180/Math.PI,r=6378137,new DataView(\"EPSG:3857\",function(x,y){y=Math.max(Math.min(85.0511287798,y),-85.0511287798);x*=d1,y*=d1,y=Math.log(Math.tan(Math.PI/4+y/2));return[x*r,y*r]},function(x,y){return[x/r*d2,(2*Math.atan(Math.exp(y/r))-Math.PI/2)*d2]},function(zoom){return 156543.03392804097/Math.pow(2,zoom)});var Promise=\"object\"==typeof global&&global&&global.Object===Object&&global,WeakMap=\"object\"==typeof self&&self&&self.Object===Object&&self,GeometryUtilInstance=Promise||WeakMap||Function(\"return this\")(),GeoJSON=GeometryUtilInstance.Symbol,getTag=Object.prototype,hasOwnProperty=getTag.hasOwnProperty,nativeObjectToString=getTag.toString,symToStringTag=GeoJSON?GeoJSON.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=GeoJSON?GeoJSON.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var Set=GeometryUtilInstance[\"__core-js_shared__\"],maskSrcKey=(DataView=/[^.]+$/.exec(Set&&Set.keys&&Set.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+DataView:\"\";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,WeakMap=Function.prototype,getTag=Object.prototype,Set=WeakMap.toString,DataView=getTag.hasOwnProperty,reIsNative=RegExp(\"^\"+Set.call(DataView).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,value){value=function(object,key){return null==object?void 0:object[key]}(object,value);return baseIsNative(value)?value:void 0}WeakMap=getNative(GeometryUtilInstance,\"WeakMap\");var nativeNow=Date.now;var func,count,lastCalled,defineProperty=function(){try{var func=getNative(Object,\"defineProperty\");return func({},\"\",{}),func}catch(e){}}(),setToString=(func=defineProperty?function(func,string){return defineProperty(func,\"toString\",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity,lastCalled=count=0,function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return(length=null==length?MAX_SAFE_INTEGER:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function baseAssignValue(object,key,value){\"__proto__\"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function eq(value,other){return value===other||value!=value&&other!=other}var hasOwnProperty$2=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$2.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var nativeMax=Math.max;function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$4)}function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var getTag=Object.prototype,hasOwnProperty$3=getTag.hasOwnProperty,propertyIsEnumerable=getTag.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var Set=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,DataView=Set&&\"object\"==typeof module&&module&&!module.nodeType&&module,getTag=DataView&&DataView.exports===Set?GeometryUtilInstance.Buffer:void 0,isBuffer=(getTag?getTag.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var DataView=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=DataView&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===DataView&&Promise.process,Set=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),getTag=Set&&Set.isTypedArray,isTypedArray=getTag?function(func){return function(value){return func(value)}}(getTag):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$4=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$4.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$5=Object.prototype.hasOwnProperty;function keys(object){return(isArrayLike(object)?arrayLikeKeys:function(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty$5.call(object,key)&&\"constructor\"!=key&&result.push(key);return result})(object)}var hasOwnProperty$6=Object.prototype.hasOwnProperty,assign=function(assigner){return setToString(overRest(func=function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0,customizer=3<assigner.length&&\"function\"==typeof customizer?(length--,customizer):void 0;for(guard&&function(value,index,object){if(isObject(object)){var type=typeof index;return(\"number\"==type?isArrayLike(object)&&isIndex(index,object.length):\"string\"==type&&index in object)&&eq(object[index],value)}}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object},start,identity),func+\"\");var func,start}(function(object,source){if(isPrototype(source)||isArrayLike(source))!function(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;(isNew?baseAssignValue:assignValue)(object,key,newValue=void 0===newValue?source[key]:newValue)}}(source,keys(source),object);else for(var key in source)hasOwnProperty$6.call(source,key)&&assignValue(object,key,source[key])}),nativeCreate=getNative(Object,\"create\");var hasOwnProperty$7=Object.prototype.hasOwnProperty;var hasOwnProperty$8=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return\"__lodash_hash_undefined__\"===result?void 0:result}return hasOwnProperty$7.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$8.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?\"__lodash_hash_undefined__\":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(GeometryUtilInstance,\"Map\");function getMapData(type,key){var value,data=type.__data__;return(\"string\"==(type=typeof(value=key))||\"number\"==type||\"symbol\"==type||\"boolean\"==type?\"__proto__\"!==value:null===value)?data[\"string\"==typeof key?\"string\":\"hash\"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:function(){return[]};function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(GeometryUtilInstance,\"DataView\"),Promise=getNative(GeometryUtilInstance,\"Promise\"),Set=getNative(GeometryUtilInstance,\"Set\"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag,getTag$1=getTag=DataView&&\"[object DataView]\"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&\"[object Map]\"!=getTag(new Map)||Promise&&\"[object Promise]\"!=getTag(Promise.resolve())||Set&&\"[object Set]\"!=getTag(new Set)||WeakMap&&\"[object WeakMap]\"!=getTag(new WeakMap)?function(ctorString){var result=baseGetTag(ctorString),ctorString=\"[object Object]\"==result?ctorString.constructor:void 0,ctorString=ctorString?toSource(ctorString):\"\";if(ctorString)switch(ctorString){case dataViewCtorString:return\"[object DataView]\";case mapCtorString:return\"[object Map]\";case promiseCtorString:return\"[object Promise]\";case setCtorString:return\"[object Set]\";case weakMapCtorString:return\"[object WeakMap]\"}return result}:getTag,Uint8Array$1=GeometryUtilInstance.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,\"__lodash_hash_undefined__\"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var GeometryUtilInstance=GeoJSON?GeoJSON.prototype:void 0,symbolValueOf=GeometryUtilInstance?GeometryUtilInstance.valueOf:void 0;var hasOwnProperty$9=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$3=1,argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\",hasOwnProperty$a=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsWrapped=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),isSameTag=othIsWrapped?arrayTag$1:getTag$1(other),objIsWrapped=(objTag=objTag==argsTag$2?objectTag$2:objTag)==objectTag$2,othIsWrapped=(isSameTag=isSameTag==argsTag$2?objectTag$2:isSameTag)==objectTag$2,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsWrapped=!(objIsArr=!0)}if(isSameTag&&!objIsWrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case\"[object DataView]\":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case\"[object ArrayBuffer]\":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array$1(object),new Uint8Array$1(other))?!0:!1;case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return eq(+object,+other);case\"[object Error]\":return object.name==other.name&&object.message==other.message;case\"[object RegExp]\":case\"[object String]\":return object==other+\"\";case\"[object Map]\":var result=mapToArray;case\"[object Set]\":result=result||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case\"[object Symbol]\":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){objIsWrapped=objIsWrapped&&hasOwnProperty$a.call(object,\"__wrapped__\"),othIsWrapped=othIsWrapped&&hasOwnProperty$a.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return!!isSameTag&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$9.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||\"constructor\"==key}return!result||skipCtor||(objCtor=object.constructor)!=(othCtor=other.constructor)&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function isEqual(value,other){return baseIsEqual(value,other)}var Coordinate_closestOnSegment=function(x2,y2){var x,x0=x2[0],along=x2[1],dx=y2[0],y=y2[1],x1=dx[0],y1=dx[1],x2=y[0],y2=y[1],dx=x2-x1,y=y2-y1,along=0==dx&&0==y?0:(dx*(x0-x1)+y*(along-y1))/(dx*dx+y*y||0),y=along<=0?(x=x1,y1):1<=along?(x=x2,y2):(x=x1+along*dx,y1+along*y);return[x,y]},Coordinate_containsCoordinate=function(coordinate,vertices,containBounds){for(var x=coordinate[0],y=coordinate[1],inside=!1,numVertices=vertices.length,i=0,j=numVertices-1;i<numVertices;j=i,i+=1){var intersect=!1,xx=vertices[i][0],yi=vertices[i][1],xj=vertices[j][0],yj=vertices[j][1];if(xx===x&&yi===y||xj===x&&yj===y)return!!containBounds;if(yi<y==y<=yj){xx=(xj-xx)*(y-yi)/(yj-yi)+xx;if(x===xx)return!!containBounds;intersect=x<xx}intersect&&(inside=!inside)}return inside},Pixel=function(){function Pixel(x,y,isRound){if(void 0===isRound&&(isRound=!1),this.className=\"AMap.Pixel\",isNaN(x)||isNaN(y))throw new Error(\"Invalid Object: Pixel(\"+x+\", \"+y+\")\");this.x=isRound?Math.round(x):Number(x),this.y=isRound?Math.round(y):Number(y)}return Pixel.prototype.getX=function(){return this.x},Pixel.prototype.round=function(){return new Pixel(Math.round(this.x),Math.round(this.y))},Pixel.prototype.getY=function(){return this.y},Pixel.prototype.toString=function(){return this.x+\",\"+this.y},Pixel.prototype.equals=function(point){return point instanceof Pixel&&Math.max(Math.abs(this.x-point.x),Math.abs(this.y-point.y))<=1e-9},Pixel.prototype.toArray=function(){return[this.x,this.y]},Pixel.prototype.subtract=function(other,isRound){return new Pixel(this.x-other.x,this.y-other.y,isRound)},Pixel.prototype.multiplyBy=function(num,noWrap){return new Pixel(this.x*num,this.y*num,noWrap)},Pixel.prototype.direction=function(){var x=this.x,y=this.y;if(0===x&&0===y)return null;if(0===x)return 0<y?90:270;var angle=180*Math.atan(y/x)/Math.PI;return x<0&&0<y||x<0&&y<0?180+angle:0<x&&y<0?360+angle:angle},Pixel.prototype.toJSON=function(){return[this.x,this.y]},Pixel}(),commonjsGlobal=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};var x,martinez=(x=function(fn,module){return fn(module={exports:{}},module.exports),module.exports}(function(module,exports){!function(exports){function DEFAULT_COMPARE(a,b){return a>b?1:a<b?-1:0}var SplayTree=function SplayTree(compare,noDuplicates){if(compare===void 0)compare=DEFAULT_COMPARE;if(noDuplicates===void 0)noDuplicates=false;this._compare=compare;this._root=null;this._size=0;this._noDuplicates=!!noDuplicates},prototypeAccessors={size:{configurable:true}};function loadRecursive(parent,keys,values,start,end){var size=end-start;if(size>0){var middle=start+Math.floor(size/2);var key=keys[middle];var data=values[middle];var node={key:key,data:data,parent:parent};node.left=loadRecursive(node,keys,values,start,middle);node.right=loadRecursive(node,keys,values,middle+1,end);return node}return null}function sort(keys,values,left,right,compare){if(left>=right)return;var pivot=keys[left+right>>1];var i=left-1;var j=right+1;while(true){do{i++}while(compare(keys[i],pivot)<0);do{j--}while(compare(keys[j],pivot)>0);if(i>=j)break;var tmp=keys[i];keys[i]=keys[j];keys[j]=tmp;tmp=values[i];values[i]=values[j];values[j]=tmp}sort(keys,values,left,j,compare);sort(keys,values,j+1,right,compare)}SplayTree.prototype.rotateLeft=function rotateLeft(x){var y=x.right;if(y){x.right=y.left;if(y.left)y.left.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.left=x;x.parent=y},SplayTree.prototype.rotateRight=function rotateRight(x){var y=x.left;if(y){x.left=y.right;if(y.right)y.right.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.right=x;x.parent=y},SplayTree.prototype._splay=function _splay(x){while(x.parent){var p=x.parent;if(!p.parent)if(p.left===x)this.rotateRight(p);else this.rotateLeft(p);else if(p.left===x&&p.parent.left===p){this.rotateRight(p.parent);this.rotateRight(p)}else if(p.right===x&&p.parent.right===p){this.rotateLeft(p.parent);this.rotateLeft(p)}else if(p.left===x&&p.parent.right===p){this.rotateRight(p);this.rotateLeft(p)}else{this.rotateLeft(p);this.rotateRight(p)}}},SplayTree.prototype.splay=function splay(x){var p,gp,ggp,l,r;while(x.parent){p=x.parent;gp=p.parent;if(gp&&gp.parent){ggp=gp.parent;if(ggp.left===gp)ggp.left=x;else ggp.right=x;x.parent=ggp}else{x.parent=null;this._root=x}l=x.left;r=x.right;if(x===p.left){if(gp)if(gp.left===p){if(p.right){gp.left=p.right;gp.left.parent=gp}else gp.left=null;p.right=gp;gp.parent=p}else{if(l){gp.right=l;l.parent=gp}else gp.right=null;x.left=gp;gp.parent=x}if(r){p.left=r;r.parent=p}else p.left=null;x.right=p;p.parent=x}else{if(gp)if(gp.right===p){if(p.left){gp.right=p.left;gp.right.parent=gp}else gp.right=null;p.left=gp;gp.parent=p}else{if(r){gp.left=r;r.parent=gp}else gp.left=null;x.right=gp;gp.parent=x}if(l){p.right=l;l.parent=p}else p.right=null;x.left=p;p.parent=x}}},SplayTree.prototype.replace=function replace(u,v){if(!u.parent)this._root=v;else if(u===u.parent.left)u.parent.left=v;else u.parent.right=v;if(v)v.parent=u.parent},SplayTree.prototype.minNode=function minNode(u){if(u===void 0)u=this._root;if(u)while(u.left)u=u.left;return u},SplayTree.prototype.maxNode=function maxNode(u){if(u===void 0)u=this._root;if(u)while(u.right)u=u.right;return u},SplayTree.prototype.insert=function insert(key,data){var z=this._root;var p=null;var comp=this._compare;var cmp;if(this._noDuplicates)while(z){p=z;cmp=comp(z.key,key);if(cmp===0)return;else if(comp(z.key,key)<0)z=z.right;else z=z.left}else while(z){p=z;if(comp(z.key,key)<0)z=z.right;else z=z.left}z={key:key,data:data,left:null,right:null,parent:p};if(!p)this._root=z;else if(comp(p.key,z.key)<0)p.right=z;else p.left=z;this.splay(z);this._size++;return z},SplayTree.prototype.find=function find(key){var z=this._root;var comp=this._compare;while(z){var cmp=comp(z.key,key);if(cmp<0)z=z.right;else if(cmp>0)z=z.left;else return z}return null},SplayTree.prototype.contains=function contains(key){var node=this._root;var comparator=this._compare;while(node){var cmp=comparator(key,node.key);if(cmp===0)return true;else if(cmp<0)node=node.left;else node=node.right}return false},SplayTree.prototype.remove=function remove(key){var z=this.find(key);if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.removeNode=function removeNode(z){if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.erase=function erase(key){var z=this.find(key);if(!z)return;this.splay(z);var s=z.left;var t=z.right;var sMax=null;if(s){s.parent=null;sMax=this.maxNode(s);this.splay(sMax);this._root=sMax}if(t){if(s)sMax.right=t;else this._root=t;t.parent=sMax}this._size--},SplayTree.prototype.pop=function pop(){var node=this._root,returnValue=null;if(node){while(node.left)node=node.left;returnValue={key:node.key,data:node.data};this.remove(node.key)}return returnValue},SplayTree.prototype.next=function next(node){var successor=node;if(successor)if(successor.right){successor=successor.right;while(successor&&successor.left)successor=successor.left}else{successor=node.parent;while(successor&&successor.right===node){node=successor;successor=successor.parent}}return successor},SplayTree.prototype.prev=function prev(node){var predecessor=node;if(predecessor)if(predecessor.left){predecessor=predecessor.left;while(predecessor&&predecessor.right)predecessor=predecessor.right}else{predecessor=node.parent;while(predecessor&&predecessor.left===node){node=predecessor;predecessor=predecessor.parent}}return predecessor},SplayTree.prototype.forEach=function forEach(callback){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();callback(current,i++);current=current.right}else done=true;return this},SplayTree.prototype.range=function range(low,high,fn,ctx){var Q=[];var compare=this._compare;var node=this._root,cmp;while(Q.length!==0||node)if(node){Q.push(node);node=node.left}else{node=Q.pop();cmp=compare(node.key,high);if(cmp>0)break;else if(compare(node.key,low)>=0)if(fn.call(ctx,node))return this;node=node.right}return this},SplayTree.prototype.keys=function keys(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.key);current=current.right}else done=true;return r},SplayTree.prototype.values=function values(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.data);current=current.right}else done=true;return r},SplayTree.prototype.at=function at(index){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();if(i===index)return current;i++;current=current.right}else done=true;return null},SplayTree.prototype.load=function load(keys,values,presort){if(keys===void 0)keys=[];if(values===void 0)values=[];if(presort===void 0)presort=false;if(this._size!==0)throw new Error(\"bulk-load: tree is not empty\");var size=keys.length;if(presort)sort(keys,values,0,size-1,this._compare);this._root=loadRecursive(null,keys,values,0,size);this._size=size;return this},SplayTree.prototype.min=function min(){var node=this.minNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.max=function max(){var node=this.maxNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.isEmpty=function isEmpty(){return this._root===null},prototypeAccessors.size.get=function(){return this._size},SplayTree.createTree=function createTree(keys,values,comparator,presort,noDuplicates){return new SplayTree(comparator,noDuplicates).load(keys,values,presort)},Object.defineProperties(SplayTree.prototype,prototypeAccessors);var NORMAL=0,NON_CONTRIBUTING=1,SAME_TRANSITION=2,DIFFERENT_TRANSITION=3,INTERSECTION=0,UNION=1,DIFFERENCE=2,XOR=3;function computeFields(event,prev,operation){if(prev===null){event.inOut=false;event.otherInOut=true}else{if(event.isSubject===prev.isSubject){event.inOut=!prev.inOut;event.otherInOut=prev.otherInOut}else{event.inOut=!prev.otherInOut;event.otherInOut=prev.isVertical()?!prev.inOut:prev.inOut}if(prev)event.prevInResult=!inResult(prev,operation)||prev.isVertical()?prev.prevInResult:prev}var isInResult=inResult(event,operation);if(isInResult)event.resultTransition=determineResultTransition(event,operation);else event.resultTransition=0}function inResult(event,operation){switch(event.type){case NORMAL:switch(operation){case INTERSECTION:return!event.otherInOut;case UNION:return event.otherInOut;case DIFFERENCE:return event.isSubject&&event.otherInOut||!event.isSubject&&!event.otherInOut;case XOR:return true}break;case SAME_TRANSITION:return operation===INTERSECTION||operation===UNION;case DIFFERENT_TRANSITION:return operation===DIFFERENCE;case NON_CONTRIBUTING:return false}return false}function determineResultTransition(event,operation){var thisIn=!event.inOut;var thatIn=!event.otherInOut;var isIn;switch(operation){case INTERSECTION:isIn=thisIn&&thatIn;break;case UNION:isIn=thisIn||thatIn;break;case XOR:isIn=thisIn^thatIn;break;case DIFFERENCE:if(event.isSubject)isIn=thisIn&&!thatIn;else isIn=thatIn&&!thisIn;break}return isIn?+1:-1}var SweepEvent=function SweepEvent(point,left,otherEvent,isSubject,edgeType){this.left=left;this.point=point;this.otherEvent=otherEvent;this.isSubject=isSubject;this.type=edgeType||NORMAL;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.resultTransition=0;this.otherPos=-1;this.outputContourId=-1;this.isExteriorRing=true},prototypeAccessors$1={inResult:{configurable:true}};function equals(p1,p2){if(p1[0]===p2[0])if(p1[1]===p2[1])return true;else return false;return false}SweepEvent.prototype.isBelow=function isBelow(p){var p0=this.point,p1=this.otherEvent.point;return this.left?(p0[0]-p[0])*(p1[1]-p[1])-(p1[0]-p[0])*(p0[1]-p[1])>0:(p1[0]-p[0])*(p0[1]-p[1])-(p0[0]-p[0])*(p1[1]-p[1])>0},SweepEvent.prototype.isAbove=function isAbove(p){return!this.isBelow(p)},SweepEvent.prototype.isVertical=function isVertical(){return this.point[0]===this.otherEvent.point[0]},prototypeAccessors$1.inResult.get=function(){return this.resultTransition!==0},SweepEvent.prototype.clone=function clone(){var copy=new SweepEvent(this.point,this.left,this.otherEvent,this.isSubject,this.type);copy.contourId=this.contourId;copy.resultTransition=this.resultTransition;copy.prevInResult=this.prevInResult;copy.isExteriorRing=this.isExteriorRing;copy.inOut=this.inOut;copy.otherInOut=this.otherInOut;return copy},Object.defineProperties(SweepEvent.prototype,prototypeAccessors$1);var epsilon=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon)*epsilon;function sum(elen,e,flen,f,h){var Q,Qnew,hh,bvirt;var enow=e[0];var fnow=f[0];var eindex=0;var findex=0;if(fnow>enow===fnow>-enow){Q=enow;enow=e[++eindex]}else{Q=fnow;fnow=f[++findex]}var hindex=0;if(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=enow+Q;hh=Q-(Qnew-enow);enow=e[++eindex]}else{Qnew=fnow+Q;hh=Q-(Qnew-fnow);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh;while(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex]}else{Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh}}while(eindex<elen){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex];Q=Qnew;if(hh!==0)h[hindex++]=hh}while(findex<flen){Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex];Q=Qnew;if(hh!==0)h[hindex++]=hh}if(Q!==0||hindex===0)h[hindex++]=Q;return hindex}function estimate(elen,e){var Q=e[0];for(var i=1;i<elen;i++)Q+=e[i];return Q}function vec(n){return commonjsGlobal.Float64Array?new Float64Array(n):new Array(n)}var ccwerrboundA=(3+16*epsilon)*epsilon,ccwerrboundB=(2+12*epsilon)*epsilon,ccwerrboundC=(9+64*epsilon)*epsilon*epsilon,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(ax,ay,bx,by,cx,cy,detsum){var acxtail,acytail,bcxtail,bcytail;var bvirt,c,ahi,alo,bhi,blo,_i,_j,_0,s1,s0,t1,t0,u3;var acx=ax-cx;var bcx=bx-cx;var acy=ay-cy;var bcy=by-cy;s1=acx*bcy;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcx;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;B[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;B[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;B[2]=_j-(u3-bvirt)+(_i-bvirt);B[3]=u3;var det=estimate(4,B);var errbound=ccwerrboundB*detsum;if(det>=errbound||-det>=errbound)return det;bvirt=ax-acx;acxtail=ax-(acx+bvirt)+(bvirt-cx);bvirt=bx-bcx;bcxtail=bx-(bcx+bvirt)+(bvirt-cx);bvirt=ay-acy;acytail=ay-(acy+bvirt)+(bvirt-cy);bvirt=by-bcy;bcytail=by-(bcy+bvirt)+(bvirt-cy);if(acxtail===0&&acytail===0&&bcxtail===0&&bcytail===0)return det;errbound=ccwerrboundC*detsum+resulterrbound*Math.abs(det);det+=acx*bcytail+bcy*acxtail-(acy*bcxtail+bcx*acytail);if(det>=errbound||-det>=errbound)return det;s1=acxtail*bcy;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcx;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C1len=sum(4,B,4,u,C1);s1=acx*bcytail;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcxtail;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C2len=sum(C1len,C1,4,u,C2);s1=acxtail*bcytail;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcxtail;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var Dlen=sum(C2len,C2,4,u,D);return D[Dlen-1]}function orient2d(ax,ay,bx,by,cx,cy){var detleft=(ay-cy)*(bx-cx);var detright=(ax-cx)*(by-cy);var det=detleft-detright;if(detleft===0||detright===0||detleft>0!==detright>0)return det;var detsum=Math.abs(detleft+detright);if(Math.abs(det)>=ccwerrboundA*detsum)return det;return-orient2dadapt(ax,ay,bx,by,cx,cy,detsum)}function signedArea(p0,p1,p2){var res=orient2d(p0[0],p0[1],p1[0],p1[1],p2[0],p2[1]);if(res>0)return-1;if(res<0)return 1;return 0}function compareEvents(e1,e2){var p1=e1.point;var p2=e2.point;if(p1[0]>p2[0])return 1;if(p1[0]<p2[0])return-1;if(p1[1]!==p2[1])return p1[1]>p2[1]?1:-1;return specialCases(e1,e2,p1)}function specialCases(e1,e2,p1,p2){if(e1.left!==e2.left)return e1.left?1:-1;if(signedArea(p1,e1.otherEvent.point,e2.otherEvent.point)!==0)return!e1.isBelow(e2.otherEvent.point)?1:-1;return!e1.isSubject&&e2.isSubject?1:-1}function divideSegment(se,p,queue){var r=new SweepEvent(p,false,se,se.isSubject);var l=new SweepEvent(p,true,se.otherEvent,se.isSubject);if(equals(se.point,se.otherEvent.point))console.warn(\"what is that, a collapsed segment?\",se);r.contourId=l.contourId=se.contourId;if(compareEvents(l,se.otherEvent)>0){se.otherEvent.left=true;l.left=false}se.otherEvent.otherEvent=l;se.otherEvent=r;queue.push(l);queue.push(r);return queue}function crossProduct(a,b){return a[0]*b[1]-a[1]*b[0]}function dotProduct(a,b){return a[0]*b[0]+a[1]*b[1]}function intersection(a1,a2,b1,b2,noEndpointTouch){var va=[a2[0]-a1[0],a2[1]-a1[1]];var vb=[b2[0]-b1[0],b2[1]-b1[1]];function toPoint(p,s,d){return[p[0]+s*d[0],p[1]+s*d[1]]}var e=[b1[0]-a1[0],b1[1]-a1[1]];var kross=crossProduct(va,vb);var sqrKross=kross*kross;var sqrLenA=dotProduct(va,va);if(sqrKross>0){var s=crossProduct(e,vb)/kross;if(s<0||s>1)return null;var t=crossProduct(e,va)/kross;if(t<0||t>1)return null;if(s===0||s===1)return noEndpointTouch?null:[toPoint(a1,s,va)];if(t===0||t===1)return noEndpointTouch?null:[toPoint(b1,t,vb)];return[toPoint(a1,s,va)]}kross=crossProduct(e,va);sqrKross=kross*kross;if(sqrKross>0)return null;var sa=dotProduct(va,e)/sqrLenA;var sb=sa+dotProduct(va,vb)/sqrLenA;var smin=Math.min(sa,sb);var smax=Math.max(sa,sb);if(smin<=1&&smax>=0){if(smin===1)return noEndpointTouch?null:[toPoint(a1,smin>0?smin:0,va)];if(smax===0)return noEndpointTouch?null:[toPoint(a1,smax<1?smax:1,va)];if(noEndpointTouch&&smin===0&&smax===1)return null;return[toPoint(a1,smin>0?smin:0,va),toPoint(a1,smax<1?smax:1,va)]}return null}function possibleIntersection(se1,se2,queue){var inter=intersection(se1.point,se1.otherEvent.point,se2.point,se2.otherEvent.point);var nintersections=inter?inter.length:0;if(nintersections===0)return 0;if(nintersections===1&&(equals(se1.point,se2.point)||equals(se1.otherEvent.point,se2.otherEvent.point)))return 0;if(nintersections===2&&se1.isSubject===se2.isSubject)return 0;if(nintersections===1){if(!equals(se1.point,inter[0])&&!equals(se1.otherEvent.point,inter[0]))divideSegment(se1,inter[0],queue);if(!equals(se2.point,inter[0])&&!equals(se2.otherEvent.point,inter[0]))divideSegment(se2,inter[0],queue);return 1}var events=[];var leftCoincide=false;var rightCoincide=false;if(equals(se1.point,se2.point))leftCoincide=true;else if(compareEvents(se1,se2)===1)events.push(se2,se1);else events.push(se1,se2);if(equals(se1.otherEvent.point,se2.otherEvent.point))rightCoincide=true;else if(compareEvents(se1.otherEvent,se2.otherEvent)===1)events.push(se2.otherEvent,se1.otherEvent);else events.push(se1.otherEvent,se2.otherEvent);if(leftCoincide&&rightCoincide||leftCoincide){se2.type=NON_CONTRIBUTING;se1.type=se2.inOut===se1.inOut?SAME_TRANSITION:DIFFERENT_TRANSITION;if(leftCoincide&&!rightCoincide)divideSegment(events[1].otherEvent,events[0].point,queue);return 2}if(rightCoincide){divideSegment(events[0],events[1].point,queue);return 3}if(events[0]!==events[3].otherEvent){divideSegment(events[0],events[1].point,queue);divideSegment(events[1],events[2].point,queue);return 3}divideSegment(events[0],events[1].point,queue);divideSegment(events[3].otherEvent,events[2].point,queue);return 3}function compareSegments(le1,le2){if(le1===le2)return 0;if(signedArea(le1.point,le1.otherEvent.point,le2.point)!==0||signedArea(le1.point,le1.otherEvent.point,le2.otherEvent.point)!==0){if(equals(le1.point,le2.point))return le1.isBelow(le2.otherEvent.point)?-1:1;if(le1.point[0]===le2.point[0])return le1.point[1]<le2.point[1]?-1:1;if(compareEvents(le1,le2)===1)return le2.isAbove(le1.point)?-1:1;return le1.isBelow(le2.point)?-1:1}if(le1.isSubject===le2.isSubject){var p1=le1.point,p2=le2.point;if(p1[0]===p2[0]&&p1[1]===p2[1]){p1=le1.otherEvent.point;p2=le2.otherEvent.point;if(p1[0]===p2[0]&&p1[1]===p2[1])return 0;else return le1.contourId>le2.contourId?1:-1}}else return le1.isSubject?-1:1;return compareEvents(le1,le2)===1?1:-1}function subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation){var sweepLine=new SplayTree(compareSegments);var sortedEvents=[];var rightbound=Math.min(sbbox[2],cbbox[2]);var prev,next,begin;while(eventQueue.length!==0){var event=eventQueue.pop();sortedEvents.push(event);if(operation===INTERSECTION&&event.point[0]>rightbound||operation===DIFFERENCE&&event.point[0]>sbbox[2])break;if(event.left){next=prev=sweepLine.insert(event);begin=sweepLine.minNode();if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);var prevEvent=prev?prev.key:null;var prevprevEvent=void 0;computeFields(event,prevEvent,operation);if(next)if(possibleIntersection(event,next.key,eventQueue)===2){computeFields(event,prevEvent,operation);computeFields(event,next.key,operation)}if(prev)if(possibleIntersection(prev.key,event,eventQueue)===2){var prevprev=prev;if(prevprev!==begin)prevprev=sweepLine.prev(prevprev);else prevprev=null;prevprevEvent=prevprev?prevprev.key:null;computeFields(prevEvent,prevprevEvent,operation);computeFields(event,prevEvent,operation)}}else{event=event.otherEvent;next=prev=sweepLine.find(event);if(prev&&next){if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);sweepLine.remove(event);if(next&&prev)possibleIntersection(prev.key,next.key,eventQueue)}}}return sortedEvents}var Contour=function Contour(){this.points=[];this.holeIds=[];this.holeOf=null;this.depth=null};function orderEvents(sortedEvents){var event,i,len,tmp;var resultEvents=[];for(i=0,len=sortedEvents.length;i<len;i++){event=sortedEvents[i];if(event.left&&event.inResult||!event.left&&event.otherEvent.inResult)resultEvents.push(event)}var sorted=false;while(!sorted){sorted=true;for(i=0,len=resultEvents.length;i<len;i++)if(i+1<len&&compareEvents(resultEvents[i],resultEvents[i+1])===1){tmp=resultEvents[i];resultEvents[i]=resultEvents[i+1];resultEvents[i+1]=tmp;sorted=false}}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];event.otherPos=i}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];if(!event.left){tmp=event.otherPos;event.otherPos=event.otherEvent.otherPos;event.otherEvent.otherPos=tmp}}return resultEvents}function nextPos(pos,resultEvents,processed,origPos){var newPos=pos+1,p=resultEvents[pos].point,p1;var length=resultEvents.length;if(newPos<length)p1=resultEvents[newPos].point;while(newPos<length&&p1[0]===p[0]&&p1[1]===p[1]){if(!processed[newPos])return newPos;else newPos++;p1=resultEvents[newPos].point}newPos=pos-1;while(processed[newPos]&&newPos>origPos)newPos--;return newPos}function initializeContourFromContext(event,contours,contourId){var contour=new Contour;if(event.prevInResult!=null){var prevInResult=event.prevInResult;var lowerContourId=prevInResult.outputContourId;var lowerResultTransition=prevInResult.resultTransition;if(lowerResultTransition>0){var lowerContour=contours[lowerContourId];if(lowerContour.holeOf!=null){var parentContourId=lowerContour.holeOf;contours[parentContourId].holeIds.push(contourId);contour.holeOf=parentContourId;contour.depth=contours[lowerContourId].depth}else{contours[lowerContourId].holeIds.push(contourId);contour.holeOf=lowerContourId;contour.depth=contours[lowerContourId].depth+1}}else{contour.holeOf=null;contour.depth=contours[lowerContourId].depth}}else{contour.holeOf=null;contour.depth=0}return contour}function connectEdges(sortedEvents){var i,len;var resultEvents=orderEvents(sortedEvents);var processed={};var contours=[];var loop=function(){if(processed[i])return;var contourId=contours.length;var contour=initializeContourFromContext(resultEvents[i],contours,contourId);var markAsProcessed=function(pos){processed[pos]=true;resultEvents[pos].outputContourId=contourId};var pos=i;var origPos=i;var initial=resultEvents[i].point;contour.points.push(initial);while(true){markAsProcessed(pos);pos=resultEvents[pos].otherPos;markAsProcessed(pos);contour.points.push(resultEvents[pos].point);pos=nextPos(pos,resultEvents,processed,origPos);if(pos==origPos)break}contours.push(contour)};for(i=0,len=resultEvents.length;i<len;i++)loop();return contours}Contour.prototype.isExterior=function isExterior(){return this.holeOf==null};var tinyqueue=TinyQueue,default_1=TinyQueue;function TinyQueue(data,compare){if(!(this instanceof TinyQueue))return new TinyQueue(data,compare);this.data=data||[];this.length=this.data.length;this.compare=compare||defaultCompare;if(this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function defaultCompare(a,b){return a<b?-1:a>b?1:0}TinyQueue.prototype={push:function(item){this.data.push(item);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var top=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return top},peek:function(){return this.data[0]},_up:function(pos){var data=this.data;var compare=this.compare;var item=data[pos];while(pos>0){var parent=pos-1>>1;var current=data[parent];if(compare(item,current)>=0)break;data[pos]=current;pos=parent}data[pos]=item},_down:function(pos){var data=this.data;var compare=this.compare;var halfLength=this.length>>1;var item=data[pos];while(pos<halfLength){var left=(pos<<1)+1;var right=left+1;var best=data[left];if(right<this.length&&compare(data[right],best)<0){left=right;best=data[right]}if(compare(best,item)>=0)break;data[pos]=best;pos=left}data[pos]=item}},tinyqueue.default=default_1;var max=Math.max,min=Math.min,contourId=0;function processPolygon(contourOrHole,isSubject,depth,Q,bbox,isExteriorRing){var i,len,s1,s2,e1,e2;for(i=0,len=contourOrHole.length-1;i<len;i++){s1=contourOrHole[i];s2=contourOrHole[i+1];e1=new SweepEvent(s1,false,undefined,isSubject);e2=new SweepEvent(s2,false,e1,isSubject);e1.otherEvent=e2;if(s1[0]===s2[0]&&s1[1]===s2[1])continue;e1.contourId=e2.contourId=depth;if(!isExteriorRing){e1.isExteriorRing=false;e2.isExteriorRing=false}if(compareEvents(e1,e2)>0)e2.left=true;else e1.left=true;var x=s1[0],y=s1[1];bbox[0]=min(bbox[0],x);bbox[1]=min(bbox[1],y);bbox[2]=max(bbox[2],x);bbox[3]=max(bbox[3],y);Q.push(e1);Q.push(e2)}}function fillQueue(subject,clipping,sbbox,cbbox,operation){var eventQueue=new tinyqueue(null,compareEvents);var polygonSet,isExteriorRing,i,ii,j,jj;for(i=0,ii=subject.length;i<ii;i++){polygonSet=subject[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],true,contourId,eventQueue,sbbox,isExteriorRing)}}for(i=0,ii=clipping.length;i<ii;i++){polygonSet=clipping[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(operation===DIFFERENCE)isExteriorRing=false;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],false,contourId,eventQueue,cbbox,isExteriorRing)}}return eventQueue}var EMPTY=[];function trivialOperation(subject,clipping,operation){var result=null;if(subject.length*clipping.length===0)if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.length===0?clipping:subject;return result}function compareBBoxes(subject,clipping,sbbox,cbbox,operation){var result=null;if(sbbox[0]>cbbox[2]||cbbox[0]>sbbox[2]||sbbox[1]>cbbox[3]||cbbox[1]>sbbox[3])if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.concat(clipping);return result}function boolean(subject,clipping,operation){if(typeof subject[0][0][0]===\"number\")subject=[subject];if(typeof clipping[0][0][0]===\"number\")clipping=[clipping];var trivial=trivialOperation(subject,clipping,operation);if(trivial)return trivial===EMPTY?null:trivial;var sbbox=[Infinity,Infinity,-Infinity,-Infinity];var cbbox=[Infinity,Infinity,-Infinity,-Infinity];var eventQueue=fillQueue(subject,clipping,sbbox,cbbox,operation);trivial=compareBBoxes(subject,clipping,sbbox,cbbox,operation);if(trivial)return trivial===EMPTY?null:trivial;var sortedEvents=subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation);var contours=connectEdges(sortedEvents);var polygons=[];for(var i=0;i<contours.length;i++){var contour=contours[i];if(contour.isExterior()){var rings=[contour.points];for(var j=0;j<contour.holeIds.length;j++){var holeId=contour.holeIds[j];rings.push(contours[holeId].points)}polygons.push(rings)}}return polygons}function union(subject,clipping){return boolean(subject,clipping,UNION)}function diff(subject,clipping){return boolean(subject,clipping,DIFFERENCE)}function xor(subject,clipping){return boolean(subject,clipping,XOR)}function intersection$1(subject,clipping){return boolean(subject,clipping,INTERSECTION)}var operations={UNION:UNION,DIFFERENCE:DIFFERENCE,INTERSECTION:INTERSECTION,XOR:XOR};exports.diff=diff,exports.intersection=intersection$1,exports.operations=operations,exports.union=union,exports.xor=xor,Object.defineProperty(exports,\"__esModule\",{value:true})}(exports)}))&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,\"default\")?x.default:x,zoomRange=[2,26],Const={deg2rad:Math.PI/180,rad2deg:180/Math.PI,earthRadius:6378137};function isClockwise(poly){for(var sum=0,len=poly.length,i=0;i<len-1;i++){var next,cur=poly[i];sum+=((next=poly[i+1])[0]-cur[0])*(next[1]+cur[1])}return poly[len-1][0]===poly[0][0]&&poly[len-1][1]===poly[0][1]||(cur=poly[len-1],sum+=((next=poly[0])[0]-cur[0])*(next[1]+cur[1])),0<sum}GeoJSON=function(){function GeometryUtilCls(opts){this.CLASS_NAME=\"AMap.GeometryUtil\",this._opts=assign({onSegmentTolerance:5,crs:\"EPSG3857\",maxZoom:zoomRange[1]},opts),this.setCrs(this._opts.crs)}return GeometryUtilCls.prototype.clone=function(opts){return new GeometryUtilCls(assign({},this._opts,opts))},GeometryUtilCls.prototype.isPoint=function(a){return a&&(a instanceof LngLat$1||Util.isArray(a)&&!isNaN(a[0]))},GeometryUtilCls.prototype.normalizePoint=function(a){return a},GeometryUtilCls.prototype.normalizeLine=function(p){for(var items=[],i=0,len=p.length;i<len;i++)items.push(this.normalizePoint(p[i]));return items},GeometryUtilCls.prototype.normalizeMultiLines=function(p){for(var items=[],i=0,len=(p=Util.isArray(p)&&this.isPoint(p[0])?[p]:p).length;i<len;i++)items.push(this.normalizeLine(p[i]));return items},GeometryUtilCls.prototype.setCrs=function(crs){crs=crs&&crs.project&&crs.unproject?crs:\"plane\"===crs?{normalizePoint:function(a){return a&&a.x&&a.y?[a.x,a.y]:a},distance:function(a,dY){var dX=a[0]-dY[0],dY=a[1]-dY[1];return Math.sqrt(dX*dX+dY*dY)},project:function(a){return a},unproject:function(a){return a},ringArea:function(a){for(var e0=[0,0],e1=[0,0],area=0,first=a[0],l=a.length,i=2;i<l;i++){var p=a[i-1],c=a[i];e0[0]=first[0]-c[0],e0[1]=first[1]-c[1],e1[0]=first[0]-p[0],e1[1]=first[1]-p[1],area+=e0[0]*e1[1]-e0[1]*e1[0]}return area/2}}:function(pro){var crs=function(pro){switch(pro){case\"EPSG3857\":return ProjectionManager.getProjection(\"EPSG:3857\");case\"EPSG4326\":return ProjectionManager.getProjection(\"EPSG:4326\")}return ProjectionManager.getProjection(\"EPSG3857\")}(pro);return{project:function(a){return Util.isArray(a)&&(a=new LngLat$1(a[0],a[1])),crs.project(a.lng,a.lat)},unproject:function(a){return Util.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.unproject(a.x,a.y)},normalizePoint:function(a){return Util.parseLngLatData(a)},distance:function(a,lon2){if(lon2=this.normalizePoint(lon2),Util.isArray(lon2))return this.distanceToLine(a,lon2);a=this.normalizePoint(a);var diam=Const.deg2rad,cos=Math.cos,lat1=a.lat*diam,dLon=a.lng*diam,a=lon2.lat*diam,lon2=lon2.lng*diam,diam=2*Const.earthRadius,dLon=lon2-dLon,a=(1-cos(a-lat1)+(1-cos(dLon))*cos(lat1)*cos(a))/2;return diam*Math.asin(Math.sqrt(a))},ringArea:function(yn){yn=this.normalizeLine(yn);var metrePerDegree=Const.earthRadius*Const.deg2rad,sum=0,arr=yn,len=arr.length;if(len<3)return 0;for(var i=0;i<len-1;i+=1){var x2=arr[i],n=arr[i+1],x1=x2.lng*metrePerDegree*Math.cos(x2.lat*Const.deg2rad),y1=x2.lat*metrePerDegree,x2=n.lng*metrePerDegree*Math.cos(n.lat*Const.deg2rad);sum+=x1*(n.lat*metrePerDegree)-x2*y1}var xf=arr[i],p=arr[0],xn=xf.lng*metrePerDegree*Math.cos(xf.lat*Const.deg2rad),yn=xf.lat*metrePerDegree,xf=p.lng*metrePerDegree*Math.cos(p.lat*Const.deg2rad);return sum+=xn*(p.lat*metrePerDegree)-xf*yn,.5*Math.abs(sum)},sphericalCalotteArea:function(h){var r=Const.earthRadius,h=r-r*Math.cos(h/r);return 2*Math.PI*r*h}}}(crs,this._opts.maxZoom);assign(this,crs)},GeometryUtilCls.prototype.distance=function(p1,p2){throw new Error(\"distance Not implemented!\")},GeometryUtilCls.prototype._lineToRawCoords=function(line,makeClockwise){line=this.normalizeLine(line);for(var items=[],i=0,len=(line=!this.isPoint(line[0])?line[0]:line).length;i<len;i++)items.push(this.project(line[i]));return!0===makeClockwise?items=this.makesureClockwise(items):!1===makeClockwise&&(items=this.makesureClockwise(items)).reverse(),items},GeometryUtilCls.prototype._rawCoordsToLine=function(items){for(var results=[],i=0,len=items.length;i<len;i++)results.push(this.unproject(items[i]));return results},GeometryUtilCls.prototype.closestOnSegment=function(a,p1,res){res=Coordinate_closestOnSegment(this.project(a),this._lineToRawCoords([p1,res]));return this.unproject(res)},GeometryUtilCls.prototype.closestOnLine=function(a,line){for(var p,minDist=1/0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++){var closest=this.closestOnSegment(a,line[i],line[i+1]),dist=this.distance(a,closest);dist<minDist&&(minDist=dist,p=closest)}return p},GeometryUtilCls.prototype.distanceToSegment=function(a,p1,p2){return this.distanceToLine(a,[p1,p2])},GeometryUtilCls.prototype.distanceToLine=function(a,line){line=this.normalizeLine(line);for(var dist2=1/0,i=0,len=(line=!this.isPoint(line[0])?line[0]:line).length;i<len-1;i++)var closest=this.closestOnSegment(a,line[i],line[i+1]),dist2=Math.min(dist2,this.distance(a,closest));return dist2},GeometryUtilCls.prototype.distanceToPolygon=function(a,polygon){return this.isPointInRing(a,polygon)?0:this.distanceToLine(a,polygon)},GeometryUtilCls.prototype.isPointOnSegment=function(p,p1,p2,tolerance){return(!tolerance&&0!==tolerance||tolerance<0)&&(tolerance=this._opts.onSegmentTolerance),this.distanceToSegment(p,p1,p2)<=tolerance},GeometryUtilCls.prototype.isPointOnLine=function(a,line,tolerance){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.isPointOnSegment(a,line[i],line[i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnRing=function(a,ring,tolerance){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.isPointOnSegment(a,ring[i],ring[i===len-1?0:i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnPolygon=function(a,rings,tolerance){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.isPointOnRing(a,rings[i],tolerance))return!0;return!1},GeometryUtilCls.prototype.makesureClockwise=function(coords){return isClockwise(coords)||(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.makesureAntiClockwise=function(coords){return isClockwise(coords)&&(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.pointInRing=function(pt,polys,ignoreBoundary){for(var insidePoly=!1,i=0;i<polys.length&&!insidePoly;i++)if(inRing(pt,polys[i][0],ignoreBoundary)){for(var inHole=!1,k=1;k<polys[i].length&&!inHole;)inRing(pt,polys[i][k],!ignoreBoundary)&&(inHole=!0),k++;inHole||(insidePoly=!0)}function inRing(pt,ring,ignoreBoundary){for(var isInside=!1,i=0,j=(ring=ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]?ring.slice(0,ring.length-1):ring).length-1;i<ring.length;j=i++){var xi=ring[i][0],yi=ring[i][1],xj=ring[j][0],yj=ring[j][1];if(pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)==0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0)return!ignoreBoundary;yi>pt[1]!=yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi&&(isInside=!isInside)}return isInside}return insidePoly},GeometryUtilCls.prototype.isPointInBbox=function(pt,bbox){for(var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<bbox.length;i++)var b=bbox[i],minX=Math.min(minX,b[0]),maxX=Math.max(maxX,b[0]),minY=Math.min(minY,b[1]),maxY=Math.max(maxY,b[1]);return pt[0]>minX&&pt[0]<maxX&&pt[1]>minY&&pt[1]<maxY},GeometryUtilCls.prototype.isPointInRing=function(a,coords){coords=this.normalizeLine(coords);coords=this._lineToRawCoords(coords,!0);return Coordinate_containsCoordinate(this.project(a),coords,!1)},GeometryUtilCls.prototype.isRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByOutsea=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;for(i=0,len=r2.length;i<len;i++)if(this.isPointInRing(r2[i],r1))return!0;return!1},GeometryUtilCls.prototype.isRingInRingByMapbox=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByMapboxB=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;return!1},GeometryUtilCls.prototype.isPixelRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(Coordinate_containsCoordinate(r1[i],r2,!1))return!0;return!1},GeometryUtilCls.prototype.isPointInPolygon=function(a,rings){for(var containsCoordinate,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);return Boolean(containsCoordinate)},GeometryUtilCls.prototype.isPointInPolygons=function(a,polys){for(var c=0;c<polys.length;c++){for(var rings=polys[c],containsCoordinate=void 0,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);if(containsCoordinate)return!0}return!1},GeometryUtilCls.prototype.doesSegmentsIntersect=function(ua,a2,b1,b2){var ub=this._lineToRawCoords([ua,a2,b1,b2]);ua=ub[0],a2=ub[1],b1=ub[2];var result=!1,ua_t=((b2=ub[3])[0]-b1[0])*(ua[1]-b1[1])-(b2[1]-b1[1])*(ua[0]-b1[0]),ub=(a2[0]-ua[0])*(ua[1]-b1[1])-(a2[1]-ua[1])*(ua[0]-b1[0]),ua=(b2[1]-b1[1])*(a2[0]-ua[0])-(b2[0]-b1[0])*(a2[1]-ua[1]);return 0!=ua&&(ub=ub/ua,0<=(ua=ua_t/ua)&&ua<=1&&0<=ub&&ub<=1&&(result=!0)),result},GeometryUtilCls.prototype.doesSegmentLineIntersect=function(p1,p2,line){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.doesSegmentsIntersect(p1,p2,line[i],line[i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentRingIntersect=function(p1,p2,ring){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.doesSegmentsIntersect(p1,p2,ring[i],ring[i===len-1?0:i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentPolygonIntersect=function(p1,p2,rings){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.doesSegmentRingIntersect(p1,p2,rings[i]))return!0;return!1},GeometryUtilCls.prototype.doesLineLineIntersect=function(l1,l2){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentLineIntersect(l1[i],l1[i+1],l2))return!0;return!1},GeometryUtilCls.prototype.doesLineRingIntersect=function(l1,ring){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentRingIntersect(l1[i],l1[i+1],ring))return!0;return!1},GeometryUtilCls.prototype.doesPolygonPolygonIntersect=function(polygon1,polygon2){return!!(this.doesRingRingIntersect(polygon2,polygon1)||this.isRingInRing(polygon1,polygon2)||this.isRingInRing(polygon2,polygon1))},GeometryUtilCls.prototype.doesRingRingIntersect=function(r1,r2){for(var i=0,len=(r1=this.normalizeLine(r1)).length;i<len;i++)if(this.doesSegmentRingIntersect(r1[i],r1[i===len-1?0:i+1],r2))return!0;return!1},GeometryUtilCls.prototype.along=function(path,distance){for(var dis=0,i=0;i<path.length-1;i+=1){var ppdis=this.distance(path[i],path[i+1]);if(!(ppdis+dis<distance)){var s=(distance-dis)/ppdis;return[path[i][0]+s*(path[i+1][0]-path[i][0]),path[i][1]+s*(path[i+1][1]-path[i][1]),i]}dis+=ppdis}return null},GeometryUtilCls.prototype._clip=function(subjectPolygon,clipPolygon){for(var e,inside=function(p){return(cp2[0]-cp1[0])*(p[1]-cp1[1])>(cp2[1]-cp1[1])*(p[0]-cp1[0])},intersection=function(){var dc=[cp1[0]-cp2[0],cp1[1]-cp2[1]],dp=[s[0]-e[0],s[1]-e[1]],n1=cp1[0]*cp2[1]-cp1[1]*cp2[0],n2=s[0]*e[1]-s[1]*e[0],n3=1/(dc[0]*dp[1]-dc[1]*dp[0]);return[(n1*dp[0]-n2*dc[0])*n3,(n1*dp[1]-n2*dc[1])*n3]},outputList=subjectPolygon=this.makesureAntiClockwise(subjectPolygon),cp1=(clipPolygon=this.makesureClockwise(clipPolygon))[clipPolygon.length-1],j=0,jlen=clipPolygon.length;j<jlen;j++){for(var cp2=clipPolygon[j],inputList=outputList,outputList=[],s=inputList[inputList.length-1],i=0,len=inputList.length;i<len;i++)inside(e=inputList[i])?(inside(s)||outputList.push(intersection()),outputList.push(e)):inside(s)&&outputList.push(intersection()),s=e;cp1=cp2}return outputList},GeometryUtilCls.prototype.ringRingClip=function(r1,clip){r1=this._lineToRawCoords(r1),clip=this._lineToRawCoords(clip),isEqual(r1[0],r1[r1.length-1])||r1.push(r1[0].slice()),isEqual(clip[0],clip[clip.length-1])||clip.push(clip[0].slice());clip=martinez.intersection([r1],[clip]);return clip&&clip[0]&&clip[0][0]?this._rawCoordsToLine(clip[0][0]):[]},GeometryUtilCls.prototype.ringArea=function(r){throw new Error(\"distance Not implemented!\")},GeometryUtilCls.prototype.distanceOfLine=function(line){for(var distance=0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)distance+=this.distance(line[i],line[i+1]);return distance},GeometryUtilCls.prototype.isClockwise=function(line){return isClockwise(line=this._lineToRawCoords(line))},GeometryUtilCls.prototype.typePolygon=function(polygon){return isArray(polygon)&&isArray(polygon[0])?2===polygon[0][0].length||polygon[0][0]instanceof LngLat$1?\"Polygon\":2<polygon[0][0].length&&(2===polygon[0][0][0].length||polygon[0][0][0]instanceof LngLat$1)?\"MultiPolygon\":\"never\":\"never\"},GeometryUtilCls}(),GeometryUtilInstance=new GeoJSON({}),GeoJSON=new GeoJSON({});GeoJSON.setCrs(\"plane\");function extend(dest){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&(\"function\"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target);return dest}var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isPointInBbox:GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointInPolygons:GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)},LngLat$1=(GeoJSON.distance.bind(GeoJSON),GeoJSON.ringArea.bind(GeoJSON),GeoJSON.isClockwise.bind(GeoJSON),GeoJSON.typePolygon.bind(GeoJSON),GeoJSON.makesureClockwise.bind(GeoJSON),GeoJSON.makesureAntiClockwise.bind(GeoJSON),GeoJSON.distanceOfLine.bind(GeoJSON),GeoJSON.ringRingClip.bind(GeoJSON),GeoJSON.doesSegmentsIntersect.bind(GeoJSON),GeoJSON.doesSegmentLineIntersect.bind(GeoJSON),GeoJSON.doesSegmentRingIntersect.bind(GeoJSON),GeoJSON.doesSegmentPolygonIntersect.bind(GeoJSON),GeoJSON.doesLineLineIntersect.bind(GeoJSON),GeoJSON.doesLineRingIntersect.bind(GeoJSON),GeoJSON.doesRingRingIntersect.bind(GeoJSON),GeoJSON.pointInRing.bind(GeoJSON),GeoJSON.isPointInRing.bind(GeoJSON),GeoJSON.isPointInBbox.bind(GeoJSON),GeoJSON.isRingInRing.bind(GeoJSON),GeoJSON.isPointInPolygon.bind(GeoJSON),GeoJSON.isPointInPolygons.bind(GeoJSON),GeoJSON.isPointOnSegment.bind(GeoJSON),GeoJSON.isPointOnLine.bind(GeoJSON),GeoJSON.isPointOnRing.bind(GeoJSON),GeoJSON.isPointOnPolygon.bind(GeoJSON),GeoJSON.closestOnSegment.bind(GeoJSON),GeoJSON.closestOnLine.bind(GeoJSON),GeoJSON.distanceToSegment.bind(GeoJSON),GeoJSON.distanceToLine.bind(GeoJSON),function(){function LngLat(lng,lat,noWrap){var obj;if(void 0===noWrap&&(noWrap=!1),this.className=\"AMap.LngLat\",obj=lng,Array.isArray(obj)&&function(tmp){tmp=+tmp;return\"number\"==typeof+tmp&&!isNaN(tmp)}(obj[0])?(lng=parseFloat(lng[0]),lat=parseFloat(lng[1])):(lat=parseFloat(lat),lng=parseFloat(lng)),isNaN(lng)||isNaN(lat))throw Error(\"Invalid Object: LngLat(\"+lng+\", \"+lat+\")\");!0!==noWrap&&(lat=Math.max(Math.min(lat,90),-90),lng=(lng+180)%360+(lng<-180||180===lng?180:-180)),this._highLat=lat,this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this.lat=Math.round(1e6*lat)/1e6,this.pos=ProjectionManager.getProjection(\"EPSG:3857\").project(lng,lat)}return LngLat.from=function(point){return(obj=point)&&\"AMap.LngLat\"===obj.className?new LngLat(point._highLng,point._highLat):new LngLat(point[0],point[1]);var obj},LngLat.prototype.setLng=function(lng){return this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this},LngLat.prototype.setLat=function(lat){return this._highLat=lat,this.lat=Math.round(1e6*lat)/1e6,this},LngLat.prototype.getLng=function(){return this.lng},LngLat.prototype.getLat=function(){return this.lat},LngLat.prototype.equals=function(another){return(another=function parseLngLatData(data){if(Array.isArray(data)){if(!Array.isArray(data[0])){var type=typeof data[0];return\"string\"==type||\"number\"==type?new LngLat$1(data[0],data[1]):data}for(var i=0;i<data.length;i+=1)data[i]=parseLngLatData(data[i])}return data}(another))instanceof LngLat&&Math.max(Math.abs(this._highLat-another._highLat),Math.abs(this._highLng-another._highLng))<=1e-9},LngLat.prototype.add=function(another,noWrap){return new LngLat(this._highLng+another._highLng,this._highLat+another._highLat,noWrap)},LngLat.prototype.subtract=function(another,noWrap){return new LngLat(this._highLng-another._highLng,this._highLat-another._highLat,noWrap)},LngLat.prototype.divideBy=function(num,noWrap){return new LngLat(this._highLng/num,this._highLat/num,noWrap)},LngLat.prototype.multiplyBy=function(num,noWrap){return new LngLat(this._highLng*num,this._highLat*num,noWrap)},LngLat.prototype.offset=function(lng,aLat){if(isNaN(lng)||isNaN(aLat))throw Error(\"valid offset args, require number\");lng=2*Math.asin(Math.sin(Math.round(lng)/12756274)/Math.cos(this._highLat*Math.PI/180)),lng=this._highLng+180*lng/Math.PI,aLat=2*Math.asin(Math.round(aLat)/12756274);return new LngLat(lng,this._highLat+180*aLat/Math.PI)},LngLat.prototype.toString=function(){return this.lng+\",\"+this.lat},LngLat.prototype.toArray=function(){return[this.lng,this.lat]},LngLat.prototype.toJSON=function(){return[this.lng,this.lat]},LngLat.prototype.distanceTo=function(another){return GeometryUtil.distance(this,another)},LngLat.prototype.distance=function(another){return GeometryUtil.distance(this,another)},LngLat}()),Size=function(){function Size(width,height,isRound){if(void 0===isRound&&(isRound=!1),this.className=\"AMap.Size\",isNaN(width)||isNaN(height))throw new Error(\"Invalid Object: Pixel(\"+width+\", \"+height+\")\");this.width=isRound?Math.round(width):Number(width),this.height=isRound?Math.round(height):Number(height)}return Size.prototype.getWidth=function(){return this.width},Size.prototype.getHeight=function(){return this.height},Size.prototype.toString=function(){return this.width+\",\"+this.height},Size.prototype.toArray=function(){return[this.width,this.height]},Size}();var Browser=function(localStore){var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if(\"object\"==typeof WebAssembly&&\"function\"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=(any3d=function(key){return-1!==ua.indexOf(key)})(\"macintosh\"),iPad=any3d(\"ipad;\")||any3d(\"ipad \"),viewportScale=any3d(\"ipod touch;\"),iPhone=any3d(\"iphone;\")||any3d(\"iphone \"),ios=iPhone||iPad||viewportScale,safari=(mac||ios)&&any3d(\"safari\")&&any3d(\"version/\"),ie3d=any3d(\"macwechat\"),isSvg=any3d(\"windowswechat\"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:ie3d,windowsWechat:isSvg,amapRunTime:amapRunTime};if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var win_1=window,baseRender=document,vdataVersion=baseRender.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),ie=\"ActiveXObject\"in win_1,retina=0!=window.detectRetina&&(\"devicePixelRatio\"in win_1&&1<win_1.devicePixelRatio||ie&&\"matchMedia\"in win_1&&win_1.matchMedia(\"(min-resolution:144dpi)\")&&win_1.matchMedia(\"(min-resolution:144dpi)\").matches),windows=any3d(\"windows nt\"),movingDraw=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),any3d(\"windows nt 10\"),any3d(\"windows phone\")),mb2345Browser=any3d(\"Mb2345Browser\"),ios10=(ios&&ua.search(/ os [456]_/),ios&&ua.search(/ os [4-8]_/),ios&&ua.search(/ os [78]_/),ios&&any3d(\"os 8_\"),ios&&any3d(\"os 10_\")),android_1=any3d(\"android\"),enableVector=0;android_1&&(enableVector=parseInt(ua.split(\"android\")[1])||0);var android23=android_1&&enableVector<4,plat_1=(android_1&&5<=enableVector||ua.search(/android 4.4/),android_1?\"android\":ios?\"ios\":windows?\"windows\":mac?\"mac\":\"other\"),ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!baseRender.querySelector,ielt9=ie&&!baseRender.addEventListener,ie9=ie&&any3d(\"msie 9\"),ie10=ie&&any3d(\"msie 10\"),ie11=ie&&any3d(\"rv:11\"),ielt10=ielt9||ie9,edge=any3d(\"edge\"),uc=(any3d(\"qtweb\"),any3d(\"ucbrowser\")),gaodeCoords=any3d(\"alipay\")||android_1&&uc,wechat=(any3d(\"miuibrowser\"),any3d(\"micromessenger\")),opera3d=any3d(\"dingtalk\"),qq=any3d(\"mqqbrowser\"),baidu=any3d(\"baidubrowser\"),byWebgl=any3d(\"crios/\"),chrome=any3d(\"chrome/\"),webkit_1=!((chrome||byWebgl)&&any3d(\"chromium\"))&&(chrome&&30<parseInt(ua.split(\"chrome/\")[1])||byWebgl&&30<parseInt(ua.split(\"crios/\")[1])),firefox=any3d(\"firefox\"),webkit3d=firefox&&27<parseInt(ua.split(\"firefox/\")[1]),gecko3d=safari&&7<parseInt(ua.split(\"version/\")[1]),mobile_1=(ios&&any3d(\"aliapp\"),android_1||ios||movingDraw||any3d(\"mobile\")),checkWebgl=\"ontouchstart\"in baseRender,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!checkWebgl&&(pointer||msPointer),touch_1=checkWebgl||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName(\"meta\")}catch(e){return 1}for(var i=metas.length-1;0<=i;--i)if(\"viewport\"===metas[i].name){var content=metas[i].content,initial_scale=void 0,minimum_scale=void 0,maximum_scale=void 0;return-1!==content.indexOf(\"initial-scale\")&&(initial_scale=parseFloat(content.split(\"initial-scale=\")[1])),minimum_scale=-1!==content.indexOf(\"minimum-scale\")?parseFloat(content.split(\"minimum-scale=\")[1]):0,maximum_scale=-1!==content.indexOf(\"maximum-scale\")?parseFloat(content.split(\"maximum-scale=\")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log(\"viewport参数不合法\"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log(\"viewport参数不合法\"),null)}}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&\"transition\"in vdataVersion.style,isSvg=!!baseRender.createElementNS&&!!baseRender.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,canvas_1=baseRender.createElement(\"canvas\"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),enableVector=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!webkit_1)&&window.Worker&&enableVector&&enableVector.createObjectURL&&window.Blob,webglContextName_1=\"\",graphicCard_1=\"\",maxRenderSize_1=0,byWebgl=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:byWebgl,depth:!0,stencil:!0}),checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var contextName=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var graphicCardShort=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!graphicCardShort)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,graphicCardShort[0],graphicCardShort[1]),safari&&\"mac\"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));graphicCardShort=Math.max(screen.width,screen.height);if(needFitRetina_1&&(graphicCardShort*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<graphicCardShort)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCardShort=function(graphicVersion){if(!graphicVersion)return null;var forShort=null,radeonIndex=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/);if(0<=(graphicVersion=(graphicVersion=radeonIndex?(graphicVersion=radeonIndex[1]).replace(/\\s*direct3d.*$/,\"\"):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\")).indexOf(\"intel\")){forShort=[\"Intel\"];return 0<=graphicVersion.indexOf(\"mobile\")&&forShort.push(\"Mobile\"),(0<=graphicVersion.indexOf(\"gma\")||0<=graphicVersion.indexOf(\"graphics media accelerator\"))&&forShort.push(\"GMA\"),0<=graphicVersion.indexOf(\"haswell\")?forShort.push(\"Haswell\"):0<=graphicVersion.indexOf(\"ivy\")?forShort.push(\"HD 4000\"):0<=graphicVersion.indexOf(\"sandy\")?forShort.push(\"HD 3000\"):0<=graphicVersion.indexOf(\"ironlake\")?forShort.push(\"HD\"):(0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase())),forShort=forShort.join(\" \")}if(0<=graphicVersion.indexOf(\"nvidia\")||0<=graphicVersion.indexOf(\"quadro\")||0<=graphicVersion.indexOf(\"geforce\")||0<=graphicVersion.indexOf(\"nvs\"))return forShort=[\"nVidia\"],0<=graphicVersion.indexOf(\"geforce\")&&forShort.push(\"geForce\"),0<=graphicVersion.indexOf(\"quadro\")&&forShort.push(\"Quadro\"),0<=graphicVersion.indexOf(\"nvs\")&&forShort.push(\"NVS\"),graphicVersion.match(/\\bion\\b/)&&forShort.push(\"ION\"),graphicVersion.match(/gtx\\b/)?forShort.push(\"GTX\"):graphicVersion.match(/gts\\b/)?forShort.push(\"GTS\"):graphicVersion.match(/gt\\b/)?forShort.push(\"GT\"):graphicVersion.match(/gs\\b/)?forShort.push(\"GS\"):graphicVersion.match(/ge\\b/)?forShort.push(\"GE\"):graphicVersion.match(/fx\\b/)&&forShort.push(\"FX\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"GS\",\"\")),0<=graphicVersion.indexOf(\"titan\")?forShort.push(\"TITAN\"):0<=graphicVersion.indexOf(\"ti\")&&forShort.push(\"Ti\"),forShort=forShort.join(\" \");if(0<=graphicVersion.indexOf(\"amd\")||0<=graphicVersion.indexOf(\"ati\")||0<=graphicVersion.indexOf(\"radeon\")||0<=graphicVersion.indexOf(\"firegl\")||0<=graphicVersion.indexOf(\"firepro\")){forShort=[\"AMD\"],0<=graphicVersion.indexOf(\"mobil\")&&forShort.push(\"Mobility\");var number,radeonIndex=graphicVersion.indexOf(\"radeon\");return 0<=radeonIndex&&forShort.push(\"Radeon\"),0<=graphicVersion.indexOf(\"firepro\")?forShort.push(\"FirePro\"):0<=graphicVersion.indexOf(\"firegl\")&&forShort.push(\"FireGL\"),0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=(graphicVersion=0<=radeonIndex?graphicVersion.substring(radeonIndex):graphicVersion).match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"HD\",\"\")),forShort=forShort.join(\" \")}return graphicVersion.substring(0,100)}(graphicCard_1=gl.getExtension(\"WEBGL_debug_renderer_info\")?gl.getParameter(37446):null);if(graphicCardShort){if(-1<graphicCardShort.indexOf(\"google swiftshader\"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(graphicCardShort))return!1}return webglContextName_1=contextName[i],!0}}return!1},baseRender=checkWebgl(),enableVector=void 0===localStore[8]||localStore[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&baseRender&&(window.forceWebGL||(webkit_1||webkit3d||gecko3d||edge||wechat||opera3d)&&\"other\"!=plat_1),baseRender=window.forceWebGLBaseRender||byWebgl?\"w\":\"d\",webkit_1=any3d(\"webkit\"),webkit3d=\"WebKitCSSMatrix\"in win_1&&\"m11\"in new window.WebKitCSSMatrix,gecko3d=\"MozPerspective\"in vdataVersion.style,opera3d=\"OTransition\"in vdataVersion.style,any3d=ie3d||webkit3d||gecko3d||opera3d,vdataVersion=void 0!==localStore[12]?localStore[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(chromeversion=(new Date).getTime()+\"\",win_1.localStorage.setItem(\"_test\",chromeversion),win_1.localStorage.getItem(\"_test\")!==chromeversion&&(localStore=!1),win_1.localStorage.removeItem(\"_test\"))}catch(e){localStore=!1}var chromeversion=parseInt(ua.split(\"chrome/\")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:ios,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=chromeversion,chrome64:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:byWebgl,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?baseRender:\"d\",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:checkWebgl};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}(\"undefined\"==typeof config?[]:config);\"undefined\"!=typeof createImageBitmap&&\"undefined\"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);var records,NEWTON_ITERATIONS,SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS,float32ArraySupported,GeoJSON=Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+3*aA1)*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+3*aA1}function LinearEasing(x){return x}function getQuadBezierValue(t,p1,p2,p3){if(1<=t)return p3;var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function cubic(t,y,bY,p2,aY){if(1<=t)return aY;var x=3*(bY.pos[0]-y.pos[0]),bX=3*(p2.pos[0]-bY.pos[0])-x,aX=aY.pos[0]-y.pos[0]-x-bX,cY=3*(bY.pos[1]-y.pos[1]),bY=3*(p2.pos[1]-bY.pos[1])-cY,aY=aY.pos[1]-y.pos[1]-cY-bY,x=aX*Math.pow(t,3)+bX*Math.pow(t,2)+x*t+y.pos[0],y=aY*Math.pow(t,3)+bY*Math.pow(t,2)+cY*t+y.pos[1];return ProjectionManager.getProjection(\"EPSG:3857\").unproject(x,y)}function quad(t,p0,p1,p2){return ProjectionManager.getProjection(\"EPSG:3857\").unproject(getQuadBezierValue(t,p0.pos[0],p1.pos[0],p2.pos[0]),getQuadBezierValue(t,p0.pos[1],p1.pos[1],p2.pos[1]))}function getCoordsWithControlPoints(coordsArr,next,cpList,scaleFactor){var result=null;return coordsArr&&cpList&&cpList.length&&((coordsArr=[coordsArr]).push.apply(coordsArr,cpList),coordsArr.push(next),coordsArr.length,result=function(num,pList){var func=null;switch(pList.length){case 3:func=quad;break;case 4:func=cubic;break;default:return null}for(var coords=[],params=[0].concat(pList),i=1;i<num-2;i++)params[0]=i/num,coords.push(func.apply(null,params));return coords.push(pList[pList.length-1]),coords}(function(pList,scaleFactor){for(var tolerance=4,interpolateLimit=[3,300],tolerance=Math.max(2,tolerance),xLen=0,yLen=0,i=0,len=pList.length;i<len-1;i++){var p1=pList[i],p2=pList[i+1];xLen+=Math.abs(p2.pos[0]-p1.pos[0]),yLen+=Math.abs(p2.pos[1]-p1.pos[1])}return Math.min(interpolateLimit[1],Math.max(interpolateLimit[0],Math.round(Math.max(xLen,yLen)/scaleFactor/tolerance)))}(coordsArr,scaleFactor),coordsArr)),result||[next]}Browser.canceledWorkerFetch=GeoJSON,Browser.amapRunTime={workerTime:{}};var NebulaTagType,BezierUtil={quad:quad,cubic:cubic,easing:(records={},NEWTON_ITERATIONS=4,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,float32ArraySupported=\"function\"==typeof Float32Array,function(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1))throw new Error(\"bezier x values must be in [0, 1] range\");var easingKey=arguments.toString();if(records[easingKey])return records[easingKey];if(mX1===mY1&&mX2===mY2)return LinearEasing;for(var sampleValues=new(float32ArraySupported?Float32Array:Array)(11),i=0;i<11;++i)sampleValues[i]=calcBezier(.1*i,mX1,mX2);function getTForX(aX){for(var intervalStart=0,currentSample=1;10!==currentSample&&sampleValues[currentSample]<=aX;++currentSample)intervalStart+=.1;var guessForT=intervalStart+.1*((aX-sampleValues[--currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample])),initialSlope=getSlope(guessForT,mX1,mX2);return.001<=initialSlope?function(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}(aX,guessForT,mX1,mX2):0===initialSlope?guessForT:function(aX,aA,aB,mX1,mX2){for(var currentX,currentT,i=0;0<(currentX=calcBezier(currentT=aA+(aB-aA)/2,mX1,mX2)-aX)?aB=currentT:aA=currentT,Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS;);return currentT}(aX,intervalStart,intervalStart+.1,mX1,mX2)}function easingFunction(x){return 0===x?0:1===x?1:calcBezier(getTForX(x),mY1,mY2)}return records[easingKey]=easingFunction}),getInterpolateCoords:function(lngLats,scaleFactor){for(var coords=[],i=0,len=lngLats.length;i<len;i+=1)coords.push.apply(coords,getCoordsWithControlPoints(lngLats[i-1],lngLats[i],lngLats[i].controlPoints,scaleFactor));return coords},getInterpolateLngLats:function(lngLats,crs,scaleFactor,opts){for(var coords=this.getInterpolateCoords(lngLats,crs,scaleFactor,opts),results=[],i=0,len=coords.length;i<len;i++)results.push(function(crs,a){return Array.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.containerTolnglat(a,20)}(crs,coords[i]));return results}},lcs=new(function(){function LCS(){this._wordCoord=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this._widthNum=128,this._heightNum=128,this._widthSize=(this._wordCoord[2]-this._wordCoord[0])/this._widthNum,this._heightSize=(this._wordCoord[3]-this._wordCoord[1])/this._heightNum}return LCS.prototype.setMap=function(map){this.map=map},LCS.prototype.getSize=function(){return[this._widthSize,this._heightSize]},LCS.prototype.getNum=function(){return[this._widthNum,this._heightNum]},LCS.prototype.getLocalByLnglat=function(coord){var _a,coord=(_a=ProjectionManager.getProjection(\"EPSG:3857\")).project.apply(_a,coord);return this.getLocalByCoord(coord)},LCS.prototype.getLocalByCoord=function(coord){var x=Math.floor(coord[0]/this._widthSize),y=Math.floor(coord[1]/this._heightSize),local=this.getLocalCenterByXY(x,y);return{deltaCenter:[coord[0]-local.center[0],coord[1]-local.center[1]],x:x,y:y,center:local.center,bbox:local.bbox}},LCS.prototype.getLocalCenterByXY=function(x,y){var center={x:x,y:y,center:[0,0],bbox:[0,0,0,0]};return center.center=[(x+.5)*this._widthSize,(y+.5)*this._heightSize],center.bbox=[x*this._widthSize,y*this._heightSize,(x+1)*this._widthSize,(y+1)*this._heightSize],center},LCS.prototype.getDeltaCoord=function(coord){var centerObj=this.getLocalByCoord(coord);return[coord[0]-centerObj.center[0],coord[1]-centerObj.center[1]]},LCS}()),globalInstance=self;!function(NebulaTagType){NebulaTagType.LITE=\"lite\",NebulaTagType.LEFT=\"left\",NebulaTagType.ALL=\"all\",NebulaTagType.NONE=\"\"}(NebulaTagType=NebulaTagType||{});var TagMap={2:\"all\",3:\"all\",4:\"all\",5:\"all\",6:\"lite\",7:\"all\",8:\"lite\",9:\"all\",10:\"lite\",11:\"lite\",12:\"all\",13:\"all\",14:\"all\",15:\"lite\",16:\"lite\",17:\"all\",18:\"all\",19:\"all\",20:\"all\"},colorNameDist={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",grey:\"#808080\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"},Util=function(){var supportNativeBind,CHARS,isWorker,lastId,originUtil={CLASS_NAME:\"AMap.Util\",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(isWorker=!0===Browser.isWorkerEnv,lastId=1e5,function(obj){return obj._amap_id=isWorker?++lastId:--lastId,obj._amap_id}),singlton:function(singltonClass){return Util.Single[singltonClass]||new singltonClass},getOptimalZoom:function(z){return z<Math.floor(z)+.8?Math.floor(z):Math.ceil(z)},join:function(object,sp){if(object.join)return object.join(sp);var i,r=[];for(i in object)object.hasOwnProperty(i)&&r.push(i+\"=\"+(object[i]||\"\"));return r.join(sp)},getGuid:function(pre,median){return void 0===median&&(median=10),(pre||\"\")+Math.round(Math.random()*Math.pow(10,median))+\"_\"+(new Date).getTime()},uuid:(CHARS=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\"),function(len,radix){var i,chars=CHARS,uuid=[];if(radix=(radix=void 0===radix?62:radix)||chars.length,len=void 0===len?0:len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else{var r;for(uuid[8]=uuid[13]=uuid[18]=uuid[23]=\"-\",uuid[14]=\"4\",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r])}return uuid.join(\"\")}),endsWith:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)===shortStr},suspendedServices:[],globalPan:268435456,p20Center:[215440491,106744817],fps:{start:function(instance){instance.startTime=new Date,instance.times=[];function animate(){var now_=(new Date).getTime();instance.times.push(now_-lastTime),lastTime=now_,instance.id=Util.requestAnimFrame(animate)}var lastTime=(new Date).getTime();instance.id=Util.requestAnimFrame(animate)},cancel:function(instance){instance.id&&Util.cancelAnimFrame(instance.id)},stop:function(instance){instance.costTime=Date.now()-instance.startTime,this.cancel(instance),instance.fps=Math.round(1e3/(instance.costTime/(instance.times.length+1)))}},getTransitionalVal:function(deltaValue,nextValue,percent,easeFunction,isRound){if(void 0===isRound&&(isRound=!1),deltaValue===nextValue)return nextValue;switch(easeFunction=void 0===easeFunction?\"linear\":easeFunction){case\"ease\":percent=BezierUtil.easing(.25,.1,.25,1)(percent);break;case\"ease-in\":percent=BezierUtil.easing(.42,0,1,1)(percent);break;case\"ease-out\":percent=BezierUtil.easing(0,0,.58,1)(percent);break;case\"ease-in-out\":percent=BezierUtil.easing(.42,0,.58,1)(percent)}deltaValue+=(nextValue-deltaValue)*percent;return isRound&&(deltaValue>>=0),deltaValue},createObjectURL:function(code,contentType){void 0===contentType&&(contentType=\"text/javascript; charset=utf-8\");var url=null;try{url=(globalInstance.URL||globalInstance.webkitURL).createObjectURL(new Blob([code],{type:contentType}))}catch(e){url=null}return url},revokeObjectURL:function(url){try{(globalInstance.URL||globalInstance.webkitURL).revokeObjectURL(url)}catch(e){}},arrayToVIObj:function(array){for(var obj={},i=0,l=array.length;i<l;i++)obj[array[i]]=i;return obj},lnglatToCoords:function(lnglat,dlat){var tileNum=Math.pow(2,dlat),dlat=180/tileNum;return[Math.floor(lnglat[0]/(360/tileNum))+tileNum/2,tileNum/2-Math.ceil(lnglat[1]/dlat)]},computeTileRange:function(minCoords,z,isPure){void 0===isPure&&(isPure=!1);var maxCoords=[minCoords[0],minCoords[3]],minX=[minCoords[2],minCoords[1]],minCoords=this.lnglatToCoords(maxCoords,z),maxCoords=this.lnglatToCoords(minX,z),minX=minCoords[0],minY=minCoords[1],maxX=maxCoords[0],maxY=maxCoords[1];if(isPure)return{minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};this._optimalTileRange={minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};for(var tileRange=[],i=minX;i<=maxX;i+=1)for(var j=minY;j<=maxY;j+=1)tileRange.push([z,i,j]);return tileRange},getMappingKey:function(conf){var obj={};if(Util.is(conf,\"object\"))for(var key in conf)conf.hasOwnProperty(key)&&(obj[conf[key]]=key);return obj},merge:function(array1,array2){if(array2.length<5e4)array1.push.apply(array1,array2);else for(var ii=0,iilen=array2.length;ii<iilen;ii+=1)array1.push(array2[ii])},clone:function(a){if(\"object\"!=typeof a||null===a)return a;if(a.noDeepClone||this.is(a,\"Float32Array\")||this.is(a,\"Uint16Array\"))return a;var i,b=this.isArray(a)?[]:{};for(i in a)a.hasOwnProperty(i)&&(b[i]=Util.clone(a[i]));return b},isInteger:function(num){return(0|num)===num},isNumber:function(num){return!isNaN(num)},setPrototypeOf:\"function\"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(obj,_prototype){for(var key in _prototype)obj[key]=_prototype[key]},isFunction:function(value){return\"function\"==typeof value},argbToArray:function(argb,format){if(void 0===format&&(format=\"webgl\"),!argb)return argb;for(var array=[],i=0,l=argb.length;i<l;i+=2){var val=parseInt(argb.substr(i,2),16);(\"webgl\"===format||\"rgba\"===format&&0===i)&&(val=this.format(val/255,3)),array.push(val)}return array.push(array.shift()),array},noop:function(){},keys:\"function\"==typeof Object.keys?Object.keys:function(obj){var key,keys=[];for(key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys},map:function(collection,fun,context){void 0===context&&(context=null);var newCollection=[];return collection&&collection.length?(Util.each(collection,function(){for(var args=[],_a=0;_a<arguments.length;_a++)args[_a]=arguments[_a];var index=args[1];newCollection[index]=fun.apply(context||collection,args)}),newCollection):collection},forEach:function(collection,fun){if(collection&&collection.length){var l=collection.length;if(0<l&&(fun(collection[0],0),1<l)){fun(collection[1],1);for(var i=2;i<l;i++)fun(collection[i],i)}}},each:function(collection,fun,context){if(void 0===context&&(context=null),collection&&collection.length)for(var i=0,l=collection.length;i<l&&!1!==fun.call(context,collection[i],i,collection);i++);},find:function(collection,fn,context){void 0===context&&(context=null);for(var i=0,l=collection.length;i<l;i++)if(\"function\"==typeof fn){if(fn.call(context,collection[i],i,collection))return collection[i]}else if(collection[i]===fn)return collection[i];return null},isDOM:function(obj){return\"object\"==typeof HTMLElement?obj instanceof HTMLElement:obj&&\"object\"==typeof obj&&1===obj.nodeType&&\"string\"==typeof obj.nodeName},uncodeCoords:function(ori,version){for(var charactersLength,d,characters=\"ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM\",offset=\"v5\"<(version=version||\"v5\")?(charactersLength=characters.length,512):(characters=characters.substr(0,charactersLength=27),333),res=[],temp=NaN,_i=0,_len=ori.length;_i<_len;_i++)d=ori[_i],d=characters.indexOf(d),temp=isNaN(temp)?d*charactersLength:(res.push(temp+d-offset),NaN);return res},separateDoForLoop:function(func,array){for(var unit=1,unit=512<array.length?Math.round(Math.pow(array.length,.5)):array.length,groups=Math.ceil(array.length/unit),i=0;i<groups;i+=1){var s=unit*i,e=s+unit;e>array.length&&(e=array.length);for(var j=s;j<e;j+=1)func(array[j])}},colorToArray:function(rgbaColor){if(/^rgba\\(/.test(rgbaColor))return this.rgbaStrToArray(rgbaColor);var hex=this.colorNameToHex(rgbaColor),rgbaColor=hex;return\"#\"===hex[0]&&(3===(hex=hex.substring(1)).length&&(hex=hex.replace(/./g,function(str){return str+str})),rgbaColor=this.argbHex2Rgba(8===hex.length?hex:\"ff\"+hex)),this.rgbaStrToArray(rgbaColor)},colorNameToHex:function(colorName){return\"string\"==typeof(colorName=(colorName=void 0===colorName?\"\":colorName).toLowerCase())&&colorNameDist[colorName]||colorName},enCodeTileCoord:function(x,y,z){var m1=Math.floor(z/2),m2=z-m1,m1=(1<<m1)-1<<m2,m2=(1<<m2)-1;return[z,x&m1|y&m2,y&m1|x&m2]},encodeURICom:function(keyword){return keyword?encodeURIComponent(keyword):\"\"},getStyle:function(styleList,index,styleid,level){var styleMap=styleList[index].i[styleid];if(void 0===styleMap)return null;if(styleList=styleList[index].s,\"number\"==typeof styleMap)return styleList[styleMap];for(;void 0===styleMap[level.toString()]&&!(--level<3););return\"number\"==typeof(index=styleMap[level.toString()])?styleList[index]:null},rgbaStrToArray:function(splits){splits=splits.split(\",\");return splits[0]=parseFloat(splits[0].split(\"rgba(\")[1])/255,splits[1]=parseFloat(splits[1])/255,splits[2]=parseFloat(splits[2])/255,splits[3]=parseFloat(splits[3]),splits},rgbStrToArray:function(splits){splits=splits.split(\",\");return splits[0]=parseFloat(splits[0].split(\"rgb(\")[1])/255,splits[1]=parseFloat(splits[1])/255,splits[2]=parseFloat(splits[2])/255,splits},rgbaArray2rgba:function(array){return\"rgba(\"+255*array[0]+\",\"+255*array[1]+\",\"+255*array[2]+\",\"+array[3]+\")\"},color2Rgba:function(color){return this.rgbaArray2rgba(this.color2RgbaArray(color))},color2RgbaArray:function(color){if(color instanceof Array)return 3==color.length&&color.push(1),color;var rgba=this.colorNameToHex(color);if(0==rgba.indexOf(\"rgb(\")){var a=this.rgbStrToArray(rgba);return a.push(1),a}if(0==rgba.indexOf(\"rgba(\"))return this.rgbaStrToArray(rgba);if(0!=rgba.indexOf(\"#\")){if(0===rgba.indexOf(\"hsla\")){var oc=color.substr(5).split(\",\"),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,hex=parseInt(oc[2],10)/100,a=parseFloat(oc[3]);return this.HSLA2RGBA(h,s,hex,a)}if(0===rgba.indexOf(\"hsl\")){oc=color.substr(4).split(\",\"),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,hex=parseInt(oc[2],10)/100;return this.HSLA2RGBA(h,s,hex,1)}if(3!==rgba.length)return 6==rgba.length?this.rgbHex2RgbaArray(rgba):8==rgba.length?this.argbHex2RgbaArray(rgba):void 0;hex=rgba.replace(/./g,function(str){return str+str});return this.rgbHex2RgbaArray(hex)}if(4===rgba.length){var hex=rgba.substr(1).replace(/./g,function(str){return str+str});return this.rgbHex2RgbaArray(hex)}if(7==rgba.length)return this.rgbHex2RgbaArray(rgba.substr(1));if(9==rgba.length){rgba=rgba.substr(1);return this.argbHex2RgbaArray(rgba)}},HSLA2RGBA:function(h,p,q,a){var r,g,b;return 0===p?r=g=b=q:(r=this.hue2rgb(p=2*q-(q=q<.5?q*(1+p):q+p-q*p),q,h+1/3),g=this.hue2rgb(p,q,h),b=this.hue2rgb(p,q,h-1/3)),[r,g,b,a]},hue2rgb:function(p,q,t){return t<0&&(t+=1),1<t&&--t,t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},rgbHex2Rgba:function(hex){return hex.startsWith(\"#\")&&(hex=hex.slice(1)),Util.argbHex2Rgba(\"ff\"+hex)},argbHex2Rgba:function(hex){for(var parts=[],i=0,len=(hex=hex.startsWith(\"#\")?hex.slice(1):hex).length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push((parts.shift()/255).toFixed(2)),\"rgba(\"+parts.join(\",\")+\")\"},Opacity2Rgba:function(opacity,color){var newColor=color;return color&&color[3]&&opacity&&(color[3]=Math.floor(255*opacity)),newColor},Hex2Rgba:function(hex){if(\"string\"!=typeof hex)return!1;for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push(parseInt(parts.shift())),parts},rgbHex2RgbaArray:function(hex){return this.rgbaHex2RgbaArray(hex+\"ff\")},argbHex2RgbaArray:function(hex){for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16)/255);return parts.push(parts.shift()),parts},rgbaHex2RgbaArray:function(color){color=parseInt(color,16);return[(color>>24&255)/255,(color>>16&255)/255,(color>>8&255)/255,(255&color)/255]},isEmpty:function(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0},delArrayItem:function(array,n){return 0<=n&&array.splice(n,1),array},startsWith:function(_long,_short){return _long.startsWith?_long.startsWith(_short):_long.substr(0,_short.length)===_short},deleteItemFromArray:function(array,index){index=Util.indexOf(array,index);return Util.delArrayItem(array,index)},deleteItemFromArrayByIndex:function(array,index){return Util.delArrayItem(array,index)},filter:function(array,fun,context){var ret=[];return Util.each(array,function(item,i){fun.call(context,item,i)&&ret.push(item)}),ret},indexOf:function(array,item){if(!array||!array.length)return-1;if(array.indexOf)return array.indexOf(item);for(var i=0;i<array.length;i+=1)if(array[i]===item)return i;return-1},endsWith_:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)==shortStr},bind:(supportNativeBind=!1,Boolean(Function.prototype.bind)&&(supportNativeBind=!0),function(fn,context){var args=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return supportNativeBind?args?(args.unshift(context),fn.bind.apply(fn,args)):fn.bind(context):function(){return fn.apply(context,args||arguments)}}),setOptions:function(obj,opts){return obj.opts=assign({},obj.opts,opts=opts||{}),obj.opts},cloneDeep:function(value,customizer,thisArg){return\"function\"==typeof customizer?this.baseClone(value,!0,this.bindCallback(customizer,thisArg,1)):this.baseClone(value,!0)},baseClone:function(value,isDeep,customizer,isFunc,object,stackA,stackB){var result;if(void 0!==(result=customizer?object?customizer(value,isFunc,object):customizer(value):result))return result;if(!this.isObject(value))return value;var isArr=this.isArray(value);if(isArr){if(result=this.initCloneArray(value),!isDeep)return this.arrayCopy(value,result)}else{var tag=Object.prototype.toString.call(value),isFunc=\"[object Function]\"==tag;if(\"[object Object]\"!=tag&&\"[object Arguments]\"!=tag&&(!isFunc||object))return object?value:{};if(result=this.initCloneObject(isFunc?{}:value),!isDeep)return this.baseAssign(result,value)}stackB=stackB||[];for(var length=(stackA=stackA||[]).length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?this.arrayEach:this.baseForOwn)(value,function(subValue,key){result[key]=Util.baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result},baseAssign:function(object,source){return null==source?object:this.baseCopy(source,Object.keys(source),object)},isObject:function(value){var type=typeof value;return!!value&&(\"object\"==type||\"function\"==type)},isObjectLike:function(value){return!!value&&\"object\"==typeof value},isLength:function(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991},initCloneArray:function(array){var length=array.length,result=new Array(length);return length&&\"string\"==typeof array[0]&&Object.hasOwnProperty.call(array,\"index\")&&(result.index=array.index,result.input=array.input),result},arrayCopy:function(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array},initCloneObject:function(Ctor){Ctor=Ctor.constructor;return new(Ctor=!(\"function\"==typeof Ctor&&Ctor instanceof Ctor)?Object:Ctor)},bindCallback:function(func,thisArg,argCount){if(\"function\"!=typeof func)return this.identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}},arrayEach:function(array,iteratee){for(var index=-1,length=array.length;++index<length&&!1!==iteratee(array[index],index,array););return array},identity:function(value){return value},createBaseFor:function(fromRight){return function(object,iteratee,keysFunc){for(var iterable=Util.toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(!1===iteratee(iterable[key],key,iterable))break}return object}},baseForOwn:function(object,iteratee){return Util.createBaseFor()(object,iteratee,Object.keys)},toObject:function(value){return Util.isObject(value)?value:Object(value)},baseCopy:function(source,props,object){object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object},falseFn:function(){return!1},emptyImageUrl:\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\",getTimestamp:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},limitExecByInterval:function(fn,time,context,ignoreWhenLock){var lastRunTime_1,curTime_1,fnGetTime_1,wrapperFn,lock_1,args_1,later_1;return wrapperFn=ignoreWhenLock?(lastRunTime_1=0,fnGetTime_1=this.getTimestamp,function(){if((curTime_1=fnGetTime_1())-lastRunTime_1<time)return!1;lastRunTime_1=curTime_1,fn.apply(context,arguments)}):(later_1=function(){lock_1=!1,args_1&&(wrapperFn.apply(context,args_1),args_1=!1)},function(){lock_1?args_1=arguments:(lock_1=!0,fn.apply(context,arguments),setTimeout(later_1,time))})},format:function(num,digits){return num===num<<0?num:+parseFloat(num+\"\").toFixed(digits||0)},isArray:Array.isArray||function(array){return this.is(array,\"array\")},is:function(obj,type){return Object.prototype.toString.call(obj).split(\" \")[1].slice(0,-1).toLowerCase()===type.toLowerCase()},includes:\"function\"==typeof Array.prototype.includes?function(arr,val){return arr.includes(val)}:function(arr,val){return-1!==this.indexOf(arr,val)},strHashCode:function(str){var hash=0;if(0===str.length)return hash;for(var i=0,len=str.length;i<len;i+=1)hash=(hash<<5)-hash+str.charCodeAt(i),hash&=hash;return hash},decode_:function(str,key){key=key?Math.ceil(parseInt(key.substr(6))/24):1;for(var result=\"\",i=0,strlen=str.length;i<strlen;i++)result+=String.fromCharCode((str.charCodeAt(i)-256-key+65535)%65535);return result},decodeLngLat:function(lng,lat){var lngKey=(lng+\"\").slice(-2),latKey=(lat+\"\").slice(-2);lng=lng.slice(0,-2),lat=lat.slice(0,-2);var latDir=parseInt((latKey+lngKey).slice(1)),lngDir=Math.ceil(latDir/250)%2?1:-1,latDir=1<latDir/500?1:-1;return lng-=parseInt(\"1\"+lngKey)/3e3*lngDir,lat-=parseInt(\"1\"+latKey)/3e3*latDir,new LngLat$1(parseFloat(lng).toFixed(5),parseFloat(lat).toFixed(5))},objHashCode:function(obj){return\"undefined\"!=typeof JSON&&JSON.stringify?Util.strHashCode(JSON.stringify(obj)):null},stampHashCode:function(obj,hash){var key=\"_amap_hash\";return!hash&&obj.hasOwnProperty(key)||(hash=Util.objHashCode(obj))&&(obj[key]=hash),obj[key]},parseLngLatData:function(data){if(Util.isArray(data)){if(!Util.isArray(data[0])){var type=typeof data[0];return\"string\"==type||\"number\"==type?new LngLat$1(data[0],data[1]):data}for(var i=0;i<data.length;i+=1)data[i]=Util.parseLngLatData(data[i])}return data},xy2arr:function(xys){for(var r=[],i=0,len=xys.length;i<len;i+=1)r[i]=[xys[i].x,xys[i].y];return r},parseSize:function(data){return Util.isArray(data)?new Size(data[0],data[1]):data},getDeltaCenter:function(localCenter,deltaY){var size,localDeltaCenter=[0,0],deltaX=Util.getOptimalZoom(deltaY.viewState.zoom);return localCenter&&13<=deltaX?(size=lcs.getSize(),deltaX=deltaY.viewState.centerCoord,deltaY=lcs.getLocalByCoord([deltaX[0],deltaX[1]]),deltaX=localCenter.x-deltaY.x,deltaY=localCenter.y-deltaY.y,0!=deltaX&&(deltaX*=size[0],localDeltaCenter[0]=deltaX),0!=deltaY&&(deltaY*=size[1],localDeltaCenter[1]=deltaY)):localCenter&&(localDeltaCenter[0]+=localCenter.center[0],localDeltaCenter[1]+=localCenter.center[1]),localDeltaCenter},checkInZooms:function(zoom,zooms){return zoom>=zooms[0]&&zoom<=zooms[1]},getTileTagByZoom:function(z,optimalZoom,forceAll){void 0===forceAll&&(forceAll=!1);z=(z=void 0===z?\"\":z).split(\",\")[0]||\"\";return!forceAll&&z&&optimalZoom&&TagMap[optimalZoom]||\"all\"},getTileTagByZ:function(z,optimalZoom,forceAll){return!(forceAll=void 0!==forceAll&&forceAll)&&z&&optimalZoom&&TagMap[optimalZoom]||\"all\"},containTag:function(tag1Number,tag2){if(!tag1Number||!tag2)return!1;tag1Number=this.getNumberByTag(tag1Number);return this.getNumberByTag(tag2)<=tag1Number},getNumberTag:function(tag){var numberTag;switch(tag=void 0===tag?\"all\":tag){case\"lite\":numberTag=0;break;case\"left\":numberTag=1;break;default:numberTag=2}return numberTag},getStringTag:function(tag){var numberTag;switch(tag=void 0===tag?2:tag){case 0:numberTag=NebulaTagType.LITE;break;case 1:numberTag=NebulaTagType.LEFT;break;default:numberTag=NebulaTagType.ALL}return numberTag},getNumberByTag:function(tag){var tagNumber=0;switch(tag){case\"lite\":tagNumber=0;break;case\"left\":tagNumber=1;break;case\"all\":tagNumber=2}return tagNumber}};!function(){var lastTime=0;function timeoutDefer(fn){var time=+new Date,timeToCall=Math.max(0,(Browser.android?50:20)-(time-lastTime));return lastTime=time+timeToCall,globalInstance.setTimeout(fn,50)}function timeoutClear(id){globalInstance.clearTimeout(id)}if(Browser.isWorkerEnv){var requestFn_1=timeoutDefer,cancelFn_1=timeoutClear;return originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn_1(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn_1.call(globalInstance,id)}}function getPrefixed(name){for(var fn,prefixes=[\"webkit\",\"moz\",\"o\",\"ms\"],i=0;i<prefixes.length&&!fn;i+=1)fn=globalInstance[prefixes[i]+name];return fn}var requestFn=globalInstance.requestAnimationFrame||getPrefixed(\"RequestAnimationFrame\")||timeoutDefer,cancelFn=globalInstance.cancelAnimationFrame||getPrefixed(\"CancelAnimationFrame\")||getPrefixed(\"CancelRequestAnimationFrame\")||timeoutClear;originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn.call(globalInstance,id)}}(),Browser.isWorkerEnv||(originUtil.requestIdleCallback=globalInstance.requestIdleCallback?function(callback,options){return globalInstance.requestIdleCallback(callback,options)}:function(cb,options){void 0===options&&(options={});var start=Util.getTimestamp();return setTimeout(function(){cb({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(Util.getTimestamp()-start))}})},options.timeout||0)},originUtil.cancelIdleCallback=globalInstance.cancelIdleCallback?function(handler){return globalInstance.cancelIdleCallback(handler)}:function(id){clearTimeout(id)});var Util=originUtil;return Util}();function isGeometryCollection(obj){return obj&&\"GeometryCollection\"===obj.type}GeoJSON=function(_super){function __(){this.constructor=d}var d,b;function GeoJSON(opts){var _this=_super.call(this)||this;return _this.className=\"Overlay.GeoJSON\",(_this._opts=opts).geoJSON&&_this.importData(opts.geoJSON),_this}return extendStatics(d=GeoJSON,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),GeoJSON.prototype.importData=function(geoJSON){this.clearOverlays();for(var overlays=[],_i=0,_a=(this._opts.geoJSON=geoJSON).features;_i<_a.length;_i++){var feature=_a[_i],geometry=feature.geometry;isGeometryCollection(geometry)?Array.prototype.push.apply(overlays,this._getOverlayByGeometryColection(geometry,feature)):Array.prototype.push.apply(overlays,this._getOverlayByGeometry(geometry.type,geometry.coordinates,feature))}this.addOverlays(overlays)},GeoJSON.prototype.getPolyline=function(feature,lnglats){return this._opts.getPolyline?this._opts.getPolyline(feature,lnglats):new AMap.Polyline({path:lnglats,extData:feature.properties})},GeoJSON.prototype.getPolygon=function(feature,lnglats){return this._opts.getPolygon?this._opts.getPolygon(feature,lnglats):new AMap.Polygon({path:lnglats,extData:feature.properties})},GeoJSON.prototype.getMarker=function(feature,lnglat){return this._opts.getMarker?this._opts.getMarker(feature,lnglat):new AMap.Marker({position:lnglat,extData:feature.properties})},GeoJSON.prototype.toGeoJSON=function(){for(var features=[],_i=0,_a=this._overlays;_i<_a.length;_i++){var geometry,overlay=_a[_i];!overlay.toGeometry||(geometry=overlay.toGeometry())&&features.push({type:\"Feature\",geometry:geometry,properties:overlay.getExtData()})}return{type:\"FeatureCollection\",features:features}},GeoJSON.prototype._getOverlayByGeometryColection=function(collection,feature){for(var result=[],_i=0,_a=collection.geometries;_i<_a.length;_i++){var geometry=_a[_i];isGeometryCollection(geometry)?Array.prototype.push.apply(result,this._getOverlayByGeometryColection(geometry,feature)):Array.prototype.push.apply(result,this._getOverlayByGeometry(geometry.type,geometry.coordinates,feature))}return result},GeoJSON.prototype._getOverlayByGeometry=function(type,coordinates,feature){var result=[];switch(type){case\"MultiPoint\":Array.prototype.push.apply(result,this._getOverlayByComplexGeometry(type,coordinates,feature));break;case\"Point\":case\"LineString\":case\"MultiLineString\":case\"MultiPolygon\":case\"Polygon\":Array.prototype.push.apply(result,this._getOverlayBySimpleGeometry(type,coordinates,feature));break;default:console.error(\"not support type \",type)}return result},GeoJSON.prototype._getOverlayByComplexGeometry=function(type,coordinates,feature){var result=[];if(\"MultiPoint\"===type)for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var point=coordinates_1[_i];Array.prototype.push.apply(result,this._getOverlayBySimpleGeometry(\"Point\",point,feature))}return result},GeoJSON.prototype._getOverlayBySimpleGeometry=function(type,coordinates,feature){var result=[];switch(type){case\"MultiLineString\":case\"LineString\":result.push(this.getPolyline(feature,coordinates));break;case\"MultiPolygon\":case\"Polygon\":result.push(this.getPolygon(feature,coordinates));break;case\"Point\":result.push(this.getMarker(feature,coordinates))}return result},GeoJSON}(AMap.OverlayGroup);AMap.GeoJSON=GeoJSON}();\n");
_jsload_('AMap.Geocoder.js',"!function(c){\"use strict\";function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if(\"object\"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return(\"string\"===t?String:Number)(e);r=r.call(e,t||\"default\");if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}(e,\"string\");return\"symbol\"==typeof e?e:String(e)}(n.key),n)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(t&&(\"object\"==typeof t||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");t=e;if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function p(r){var n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(r);return u(this,n?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}var e=function(e){var t=o;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&a(t,e);var r,n=p(o);function o(e){var t;if(this instanceof o)return(t=n.call(this)).CLASS_NAME=\"AMap.Geocoder\",t.opt=e||{},t.config=c.getConfig(),t.url=t.config.server,t;throw new TypeError(\"Cannot call a class as a function\")}return t=o,(e=[{key:\"getLocation\",value:function(e,r){var t,n=this;e?(t={key:this.config.key,s:\"rsv3\",language:this.opt.lang||\"zh_cn\"},e instanceof Array&&(e=e.join(\"|\"),t.batch=!0),(t.address=e)instanceof Array&&(e=e.join(\"|\"),t.push(\"batch=true\")),this._mergeParams(this.opt,{city:\"city\"},t),e=this.url+\"geo/get/xy\",c.WebService.get(e,t,function(e,t){\"complete\"===e&&t.status&&\"1\"===t.status&&n._geocodingComplete(t,r),\"error\"===e&&n._onError(t,r)})):(this.emit(\"error\",{info:\"NO_PARAMS\"}),r&&\"function\"==typeof r&&r(\"error\",\"NO_PARAMS\"))}},{key:\"setCity\",value:function(e){this.opt.city=e}},{key:\"setLang\",value:function(e){this.opt.lang=e||\"zh_cn\"}},{key:\"getLang\",value:function(){return this.opt.lang}},{key:\"getAddress\",value:function(e,r){var n=this,t=(e=c.Util.parseLngLatData(e),[]),o={key:this.config.key,s:\"rsv3\",language:this.opt.lang||\"zh_cn\"};if(e instanceof Array){for(var i=0,s=e.length;i<s;i+=1)t.push(e[i]+\"\");t=t.join(\"|\"),o.batch=!0}else t=e.lng+\",\"+e.lat;o.location=t;this._mergeParams(this.opt,{radius:\"radius\",extensions:\"extensions\"},o);var a=this.url+\"rgeo/get\";c.WebService.get(a,o,function(e,t){\"complete\"===e&&t.status&&\"1\"===t.status?n._rgeocodingComplete(t,r):n._onError(t,r)})}},{key:\"_mergeParams\",value:function(e,t,r){for(var n in e)void 0!==e[n]&&void 0!==t[n]&&(r[t[n]]=e[n])}},{key:\"_str2LngLat\",value:function(e){return e?(e=e.split(\",\"),new c.LngLat(e[0],e[1])):null}},{key:\"_parseString\",value:function(e){return\"object\"===i(e)||void 0===e?\"\":e}},{key:\"_parseInt\",value:function(e){e=parseInt(e,10);return isNaN(e)?0:e}},{key:\"_geocodingComplete\",value:function(e,t){var r;if(parseInt(e.status,10))if(r={info:e.info,resultNum:e.count,geocodes:[]},e.geocodes.length){for(var n=0,o=e.geocodes.length;n<o;n+=1){var i=e.geocodes[n],s=0==i.location.length?null:{location:this._str2LngLat(i.location),formattedAddress:this._parseString(i.formatted_address),adcode:this._parseString(i.adcode),level:this._parseString(i.level),addressComponent:{neighborhood:this._parseString(i.neighborhood.name),neighborhoodType:this._parseString(i.neighborhood.type),building:this._parseString(i.building.name),buildingType:this._parseString(i.building.type),province:this._parseString(i.province),city:this._parseString(i.city),district:this._parseString(i.district),township:this._parseString(i.township),citycode:this._parseString(i.citycode),street:this._parseString(i.street),streetNumber:this._parseString(i.number)}};s=Object.assign(i,s),r.geocodes.push(s)}this.emit(\"complete\",r),t&&\"function\"==typeof t&&t(\"complete\",r)}else r.info=\"NO_DATA\",this.emit(\"complete\",r),t&&\"function\"==typeof t&&t(\"no_data\",{});else r={info:e.info},this.emit(\"error\",{result:r}),t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"parseBusinessAreas\",value:function(e){var t=[];if(e)for(var r=0;r<e.length;r+=1)e[r].id&&t.push({name:this._parseString(e[r].name),id:this._parseString(e[r].id),location:this._str2LngLat(e[r].location)});return t}},{key:\"_buildRegeocodes\",value:function(e){var t=[];if(e)for(var r=0,n=e.length;r<n;r+=1){var o=e[r];t.push(this._buildRegeocode(o))}return t}},{key:\"_buildRegeocode\",value:function(e){var t,r={addressComponent:{citycode:this._parseString(e.addressComponent.citycode),adcode:this._parseString(e.addressComponent.adcode),businessAreas:this.parseBusinessAreas(e.addressComponent.businessAreas),neighborhoodType:this._parseString(e.addressComponent.neighborhood.type),neighborhood:this._parseString(e.addressComponent.neighborhood.name),building:this._parseString(e.addressComponent.building.name),buildingType:this._parseString(e.addressComponent.building.type),street:this._parseString(e.addressComponent.streetNumber.street),streetNumber:this._parseString(e.addressComponent.streetNumber.number),province:this._parseString(e.addressComponent.province),city:this._parseString(e.addressComponent.city),district:this._parseString(e.addressComponent.district),towncode:this._parseString(e.addressComponent.towncode),township:this._parseString(e.addressComponent.township)},formattedAddress:this._parseString(e.formatted_address),roads:[],crosses:[],pois:[]};return e.roads&&(r.roads=this._parseRoads(e.roads)),e.roadinters&&(t=e.roadinters,this._isArray(t)||(t=[e.roadinters.roadinter]),r.crosses=this._parseCross(t)),e.pois&&(r.pois=this._parsePOI(e.pois)),e.aois&&(r.aois=this._parseAOIs(e.aois)),r=Object.assign(e,r)}},{key:\"_rgeocodingComplete\",value:function(e,t){var r;if(parseInt(e.status,10)){if(r={info:e.info},e.regeocode){if(\"\"===this._parseString(e.regeocode.formatted_address))return r.info=\"NO_DATA\",this.emit(\"complete\",r),void(t&&\"function\"==typeof t&&t(\"no_data\",{}));r.regeocode=this._buildRegeocode(e.regeocode)}else e.regeocodes&&(r.regeocodes=this._buildRegeocodes(e.regeocodes));this.emit(\"complete\",r),t&&\"function\"==typeof t&&t(\"complete\",r)}else r={info:e.info},this.emit(\"error\",{result:r}),t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"_parsePOI\",value:function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];t[r]={id:n.id,name:n.name,type:n.type,address:this._parseString(n.address),distance:this._parseInt(n.distance),tel:this._parseString(n.tel),location:this._str2LngLat(n.location),direction:this._parseString(n.direction),businessArea:this._parseString(n.businessarea)}}return t}},{key:\"_parseAOIs\",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];t.push({adcode:this._parseString(o.adcode),area:this._parseString(o.area),id:this._parseString(o.id),location:this._str2LngLat(o.location),name:this._parseString(o.name),type:this._parseString(o.type)})}return t}},{key:\"_isArray\",value:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},{key:\"_parseCross\",value:function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];t[r]={distance:this._parseInt(n.distance),direction:this._parseString(n.direction),first_id:this._parseString(n.first_id),first_name:this._parseString(n.first_name),second_name:this._parseString(n.second_name),second_id:this._parseString(n.second_id),location:this._str2LngLat(n.location)}}return t}},{key:\"_parseRoads\",value:function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];t[r]={id:n.id,name:n.name,distance:this._parseInt(n.distance),direction:this._parseString(n.direction),location:this._str2LngLat(n.location)}}return t}},{key:\"_onError\",value:function(e,t){this.emit(\"error\",{e:e}),t&&\"function\"==typeof t&&t(\"error\",e.info)}}])&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),o}(c.Event);c.Geocoder=e}(window.AMap);\n");
_jsload_('AMap.Geolocation.js',"!function(s){\"use strict\";var i=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")};function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var n=t(function(e){function n(t){return\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},n(t)}e.exports=n});var r=function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t};var c=function(t,e){return!e||\"object\"!==n(e)&&\"function\"!=typeof e?r(t):e},u=t(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),l=t(function(n){function o(t,e){return n.exports=o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}n.exports=o});var f=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)};var p=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},g=t(function(t){var e=function(a){var c,t=Object.prototype,l=t.hasOwnProperty,e=\"function\"==typeof Symbol?Symbol:{},r=e.iterator||\"@@iterator\",n=e.asyncIterator||\"@@asyncIterator\",o=e.toStringTag||\"@@toStringTag\";function s(t,e,n,o){var i,a,s,c,r=e&&e.prototype instanceof y?e:y,u=Object.create(r.prototype),l=new P(o||[]);return u._invoke=(i=t,a=n,s=l,c=p,function(t,e){if(c===d)throw new Error(\"Generator is already running\");if(c===g){if(\"throw\"===t)throw e;return A()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var o=L(n,s);if(o){if(o===m)continue;return o}}if(\"next\"===s.method)s.sent=s._sent=s.arg;else if(\"throw\"===s.method){if(c===p)throw c=g,s.arg;s.dispatchException(s.arg)}else\"return\"===s.method&&s.abrupt(\"return\",s.arg);c=d;var r=f(i,a,s);if(\"normal\"===r.type){if(c=s.done?g:h,r.arg===m)continue;return{value:r.arg,done:s.done}}\"throw\"===r.type&&(c=g,s.method=\"throw\",s.arg=r.arg)}}),u}function f(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(t){return{type:\"throw\",arg:t}}}a.wrap=s;var p=\"suspendedStart\",h=\"suspendedYield\",d=\"executing\",g=\"completed\",m={};function y(){}function i(){}function u(){}var v={};v[r]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(S([])));b&&b!==t&&l.call(b,r)&&(v=b);var _=u.prototype=y.prototype=Object.create(v);function k(t){[\"next\",\"throw\",\"return\"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(c,u){var e;this._invoke=function(n,o){function t(){return new u(function(t,e){!function e(t,n,o,r){var i=f(c[t],c,n);if(\"throw\"!==i.type){var a=i.arg,s=a.value;return s&&\"object\"==typeof s&&l.call(s,\"__await\")?u.resolve(s.__await).then(function(t){e(\"next\",t,o,r)},function(t){e(\"throw\",t,o,r)}):u.resolve(s).then(function(t){a.value=t,o(a)},function(t){return e(\"throw\",t,o,r)})}r(i.arg)}(n,o,t,e)})}return e=e?e.then(t,t):t()}}function L(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,\"throw\"===e.method){if(t.iterator.return&&(e.method=\"return\",e.arg=c,L(t,e),\"throw\"===e.method))return m;e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return m}var o=f(n,t.iterator,e.arg);if(\"throw\"===o.type)return e.method=\"throw\",e.arg=o.arg,e.delegate=null,m;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=c),e.delegate=null,m):r:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(l.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:c,done:!0}}return i.prototype=_.constructor=u,u.constructor=i,u[o]=i.displayName=\"GeneratorFunction\",a.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===i||\"GeneratorFunction\"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,o in t||(t[o]=\"GeneratorFunction\")),t.prototype=Object.create(_),t},a.awrap=function(t){return{__await:t}},k(x.prototype),x.prototype[n]=function(){return this},a.AsyncIterator=x,a.async=function(t,e,n,o,r){void 0===r&&(r=Promise);var i=new x(s(t,e,n,o),r);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(_),_[o]=\"Generator\",_[r]=function(){return this},_.toString=function(){return\"[object Generator]\"},a.keys=function(n){var o=[];for(var t in n)o.push(t);return o.reverse(),function t(){for(;o.length;){var e=o.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=c,this.tryEntries.forEach(C),!t)for(var e in this)\"t\"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function t(t,e){return i.type=\"throw\",i.arg=n,o.next=t,e&&(o.method=\"next\",o.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e],i=r.completion;if(\"root\"===r.tryLoc)return t(\"end\");if(r.tryLoc<=this.prev){var a=l.call(r,\"catchLoc\"),s=l.call(r,\"finallyLoc\");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error(\"try statement without catch or finally\");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&l.call(o,\"finallyLoc\")&&this.prev<o.finallyLoc){var r=o;break}}r&&(\"break\"===t||\"continue\"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method=\"next\",this.next=r.finallyLoc,m):this.complete(i)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if(\"throw\"===o.type){var r=o.arg;C(n)}return r}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},\"next\"===this.method&&(this.arg=c),m}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function(\"r\",\"regeneratorRuntime = r\")(e)}});function h(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}var d=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var o=s.apply(t,a);function r(t){h(o,e,n,r,i,\"next\",t)}function i(t){h(o,e,n,r,i,\"throw\",t)}r(void 0)})}};function m(o){return function(){var t,e=u(o);if(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if(\"function\"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(t,e){var n=(t+\"\").slice(-2),o=(e+\"\").slice(-2);t=t.slice(0,-2),e=e.slice(0,-2);var r=parseInt((o+n).slice(1)),i=Math.ceil(r/250)%2?1:-1,a=1<r/500?1:-1;return t-=parseInt(\"1\"+n)/3e3*i,e-=parseInt(\"1\"+o)/3e3*a,new s.LngLat(parseFloat(t).toFixed(5),parseFloat(e).toFixed(5))}function b(r,i){return new Promise(function(o,t){var e=r.position;if(\"ipcity\"!==r.location_type){var n=_.protocol+\"://restapi.amap.com/v3/geocode/regeo\";s.WebService.get(n,{location:e.toString(),extensions:i},function(t,e){if(\"complete\"===t){var n={};!e.regeocode||\"\"===I(e.regeocode.formatted_address)?r.message+=\"Get address fail, no address result.\":(n=E(e.regeocode),r.message+=\"Get address success.\"),r=v({},r,{},n)}else r.message+=\"Get address fail,check your key or network.\";o(r)})}else r.message+=\"city center no address.\",o(r)})}var e=navigator.userAgent.toLowerCase(),_=s.getConfig(),k=-1!==e.indexOf(\"android\"),x=-1!==e.indexOf(\"mobile\"),L=-1!==e.indexOf(\"alipay\")||-1!==e.indexOf(\"ucbrowser\")&&k,O=function(){var e=d(g.mark(function t(n){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(r,t){var e=_.protocol+\"://restapi.amap.com/v3/assistant/coordinate/convert\";s.WebService.get(e,{coordsys:\"gps\",locations:n.toString()},function(t,e){if(\"complete\"==t)if(1===parseInt(e.status)&&e.locations){var n=e.locations.split(\",\"),o=new s.LngLat(parseFloat(n[0]),parseFloat(n[1]));r({status:0,location:o,message:\"Convert Success.\"})}else r({status:1,message:\"Convert failed.\"});else r({status:1,message:\"Convert request failed.\"})})}));case 1:case\"end\":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=d(g.mark(function t(e){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(n,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){if(t.coords&&t.coords.longitude&&t.coords.latitude){var e={status:0,code:0,info:\"SUCCESS\",position:new s.LngLat(t.coords.longitude,t.coords.latitude),location_type:\"html5\",message:\"Get geolocation success.\",accuracy:t.coords.accuracy,isConverted:L,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed};n(e)}else n({status:1,code:2,info:\"POSITION_UNAVAILABLE\",message:\"Get geolocation position unavailable.\"})},function(t){1!==t.code?3===t.code?n({status:1,code:3,info:\"TIMEOUT\",message:\"Get geolocation timeout.\",originMessage:t.message}):2===t.code&&n({status:1,code:2,info:\"POSITION_UNAVAILABLE\",message:\"Get geolocation position unavailable.\",originMessage:t.message}):n({status:1,code:1,info:\"PERMISSION_DENIED\",message:\"Geolocation permission denied.\",originMessage:t.message})},e):t({info:\"NOT_SUPPORTED\",message:\"Not Support HTML5 Geolocation.\"})}));case 1:case\"end\":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),P=function(){var t=d(g.mark(function t(){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(n,t){var e=_.protocol+\"://webapi.amap.com/maps/ipLocation\";s.WebService.get(e,{},function(t,e){\"complete\"==t?e.status&&null!=e.lng&&null!=e.lat?(e.position=w(e.lng,e.lat),delete e.lng,delete e.lat,e.status=0,e.message=\"Get ipLocation success.\",e.location_type=\"ip\",e.accuracy=null,e.isConverted=!0,n(e)):n({status:1,message:\"Get ipLocation failed.\"}):n({status:1,message:\"Request ipLocation failed.\"})})}));case 1:case\"end\":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),S=function(){var t=d(g.mark(function t(){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(n,t){var e=_.protocol+\"://webapi.amap.com/maps/ipCity\";s.WebService.get(e,{},function(t,e){\"complete\"==t?e.center&&1===e.status?(e.position=e.center,delete e.center,e.location_type=\"ipcity\",e.isConverted=!0,e.status=0,e.message=\"Get city by ip success.\",n(e)):n({status:1,message:\"Get city by ip failed.\"}):n({status:1,message:\"Request ipCity failed.\"})})}));case 1:case\"end\":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),A=function(){var e=d(g.mark(function t(e){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(n,t){s.Http.JSONP(\"http://127.0.0.1:43689/geolocation?to=3000&_=\"+(new Date).getTime(),function(t,e){\"complete\"==t&&e.location&&e.location.x&&e.location.y?n({status:0,position:new s.LngLat(e.location.x,e.location.y),accuracy:e.location.precision,message:\"Get sdkLocation success.\",location_type:\"sdk\",isConverted:!0}):n({status:1,message:\"Get sdkLocation failed.\"})})}));case 1:case\"end\":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=d(g.mark(function t(n){return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(e,t){W.instance.getLocation(n,function(t){t.result&&t.result.x&&t.result.y?e({status:0,position:new s.LngLat(t.result.x,t.result.y),accuracy:t.result.precision,message:\"Get sdkLocation success.\",location_type:\"sdk\",isConverted:!0}):e({status:1,sdkErrorInfo:t.errorInfo,sdkLocationDetail:t.locationDetail,message:\"Get sdkLocation failed.\"})})}));case 1:case\"end\":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),E=function(t){var e={addressComponent:{citycode:I(t.addressComponent.citycode),adcode:I(t.addressComponent.adcode),businessAreas:N(t.addressComponent.businessAreas),neighborhoodType:I(t.addressComponent.neighborhood.type),neighborhood:I(t.addressComponent.neighborhood.name),building:I(t.addressComponent.building.name),buildingType:I(t.addressComponent.building.type),street:I(t.addressComponent.streetNumber.street),streetNumber:I(t.addressComponent.streetNumber.number),province:I(t.addressComponent.province),city:I(t.addressComponent.city),district:I(t.addressComponent.district),township:I(t.addressComponent.township)},formattedAddress:I(t.formatted_address),roads:[],crosses:[],pois:[]};if(t.roads&&(e.roads=j(t.roads)),t.roadinters){var n=t.roadinters;D(n)||(n=[t.roadinters.roadinter]),e.crosses=B(n)}return t.pois&&(e.pois=T(t.pois)),t.aois&&(e.aois=M(t.aois)),e},I=function(t){return\"object\"===n(t)||void 0===t?\"\":t},j=function(t){for(var e=[],n=0;n<t.length;n+=1){var o=t[n];e[n]={id:o.id,name:o.name,distance:F(o.distance),direction:I(o.direction),location:R(o.location)}}return e},N=function(t){var e=[];if(t)for(var n=0;n<t.length;n+=1)t[n].id&&e.push({name:I(t[n].name),id:I(t[n].id),location:R(t[n].location)});return e},B=function(t){for(var e=[],n=0;n<t.length;n+=1){var o=t[n];e[n]={distance:F(o.distance),direction:I(o.direction),first_id:I(o.first_id),first_name:I(o.first_name),second_name:I(o.second_name),second_id:I(o.second_id),location:R(o.location)}}return e},T=function(t){for(var e=[],n=0;n<t.length;n+=1){var o=t[n];e[n]={id:o.id,name:o.name,type:o.type,address:I(o.address),distance:F(o.distance),tel:I(o.tel),location:R(o.location),direction:I(o.direction),businessArea:I(o.businessarea)}}return e},M=function(t){for(var e=[],n=0,o=t.length;n<o;n++){var r=t[n];e.push({adcode:I(r.adcode),area:I(r.area),id:I(r.id),location:R(r.location),name:I(r.name),type:I(r.type)})}return e},F=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},R=function(t){var e=t.split(\",\");return new s.LngLat(e[0],e[1])},D=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},U=function(t){f(r,t);var e,o=m(r);function r(t){var e;i(this,r);var n=v({position:\"RB\",offset:[15,15],borderColor:\"silver\",borderRadius:\"50%\",buttonSize:\"32px\",convert:!0,needAddress:!1,enableHighAccuracy:!1,timeout:1e4,maximumAge:0,showButton:!0,showCircle:!0,showMarker:!0,markerOptions:{innerOverlay:!0,offset:new s.Pixel(-10,-10),content:\"<img class='amap-geolocation-marker' src='http://47.93.246.7/api/static/jsapi/static/image/plugin/point.png'/>\"},circleOptions:{innerOverlay:!0,strokeColor:\"#0093FF\",noSelect:!0,strokeOpacity:.5,strokeWeight:1,fillColor:\"#02B0FF\",fillOpacity:.25},panToLocation:!0,zoomToAccuracy:!1,GeoLocationFirst:x,noIpLocate:0,noGeoLocation:0,useNative:!1,getCityWhenFail:!1,extensions:\"base\"},t);switch((e=o.call(this,n))._className=\"geolocation\",e.initContainer(),e.CLASS_NAME=\"AMap.Geolocation\",e._locateCallBacks=[],e._watchCallBacks=[],e._locating=!1,e._config.noGeoLocation){case 0:e.useGeoLocation=!0;break;case 1:e.useGeoLocation=!x;break;case 2:e.useGeoLocation=x;break;case 3:e.useGeoLocation=!1;break;default:e.useGeoLocation=!0}switch(e._config.noIpLocate){case 0:e.useIPLocation=!0;break;case 1:e.useIPLocation=!x;break;case 2:e.useIPLocation=x;break;case 3:case!0:e.useIPLocation=!1;break;default:e.useIPLocation=!0}return e.initUI(),e}return a(r,[{key:\"initUI\",value:function(){var t=this;if(this._config.showButton){this._container.style.width=this._container.style.height=this._config.buttonSize,this._container.style.borderRadius=this._config.borderRadius,this._container.addEventListener(\"click\",function(){t.getCurrentPosition()});var e=document.createElement(\"img\");e.style.display=\"none\",e.src=\"http://47.93.246.7/api/static/jsapi/static/image/plugin/waite.png\",this._container.appendChild(e),this.waite=e}else this._container.style.display=\"none\"}},{key:\"getCurrentPosition\",value:function(t){t&&this._locateCallBacks.push(t),this._locating||this._locate()}},{key:\"_locate\",value:(e=d(g.mark(function t(){var e,n,o,r,i,a,s,c,u,l,f,p,h,d;return g.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._locating)return t.abrupt(\"return\");t.next=2;break;case 2:if(this._locating=!0,this._config.showButton&&(this.waite.style.display=\"block\"),e={message:\"\",status:1},this._config.useNative&&k)return t.next=8,(window.AMapAndroidLoc?G:A)(this);t.next=10;break;case 8:(n=t.sent).status?e.message+=n.message:e=n;case 10:if(!this._config.GeoLocationFirst){t.next=23;break}if(e.status&&this.useGeoLocation)return t.next=14,C({timeout:this._config.timeout,enableHighAccuracy:this._config.enableHighAccuracy,maximumAge:this._config.maximumAge});t.next=16;break;case 14:(o=t.sent).status?(e.message+=o.message,e.originMessage=o.originMessage):(o.message=e.message+o.message,e=o);case 16:if(e.status&&this.useIPLocation)return t.next=19,P();t.next=21;break;case 19:(r=t.sent).status?e.message+=r.message:(r.message=e.message+r.message,r.originMessage=e.originMessage,e=r);case 21:t.next=33;break;case 23:if(e.status&&this.useIPLocation)return t.next=26,P();t.next=28;break;case 26:(i=t.sent).status?e.message+=i.message:(i.message=e.message+i.message,e=i);case 28:if(e.status&&this.useGeoLocation)return t.next=31,C({timeout:this._config.timeout,enableHighAccuracy:this._config.enableHighAccuracy,maximumAge:this._config.maximumAge});t.next=33;break;case 31:(a=t.sent).status?(e.message+=a.message,e.originMessage=a.originMessage):(a.message=e.message+a.message,e=a);case 33:if(e.status&&this._config.getCityWhenFail)return t.next=36,S();t.next=38;break;case 36:(s=t.sent).status?e.message+=s.message:(s.message=e.message+s.message,e=s);case 38:if(e.status){t.next=59;break}if(!e.isConverted){t.next=43;break}e.message+=\"No need convert.\",t.next=48;break;case 43:return t.next=45,O(e.position);case 45:(c=t.sent).status||(e.position=c.location),e.message+=c.message;case 48:if(this._config.needAddress)return t.next=51,b(e,this._config.extensions);t.next=52;break;case 51:e=t.sent;case 52:for(this.showPosition(e.position,e.accuracy),u=0,l=this._locateCallBacks.length;u<l;u+=1)\"function\"==typeof this._locateCallBacks[u]&&this._locateCallBacks[u].call(this,\"complete\",e);for(this._locateCallBacks=[],f=0,p=this._watchCallBacks.length;f<p;f+=1)\"function\"==typeof this._watchCallBacks[f]&&this._watchCallBacks[f].call(this,\"complete\",e);this.emit(\"complete\",e),t.next=62;break;case 59:for(h=0,d=this._locateCallBacks.length;h<d;h+=1)\"function\"==typeof this._locateCallBacks[h]&&this._locateCallBacks[h].call(this,\"error\",e);this._locateCallBacks=[],this.emit(\"error\",e);case 62:this._locating=!1,this._config.showButton&&(this.waite.style.display=\"none\");case 64:case\"end\":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:\"getCityInfo\",value:function(e){e&&S().then(function(t){t.status?e(\"error\",t):e(\"complete\",t)})}},{key:\"_handleViewChange\",value:function(){}},{key:\"showPosition\",value:function(t,e){if(this.map){this.options;this._config.showMarker&&(this._marker||(this._marker=new s.Marker(this._config.markerOptions),this._marker.isOfficial=!0),this._marker.setPosition(t),this.map.add(this._marker)),this._config.showCircle&&(this._circle||(this._circle=new s.Circle(this._config.circleOptions)),this._circle.setCenter(t),this._circle.setRadius(e||0),this.map.add(this._circle),this._circle.isOfficial=!0),this._config.panToLocation&&this.map.panTo([t.lng,t.lat]),this._config.zoomToAccuracy&&this.map.setFitView(this._circle,!0,void 0,17)}}},{key:\"watchPosition\",value:function(t){var e=this;if(navigator.geolocation)return this._watchCallBacks.push(t),this.watchInterval||(this.watchInterval=setInterval(function(){e.getCurrentPosition()},1e4)),this.watchInterval;t(\"error\",{status:0,info:\"NOT_SUPPORT\",message:\"Browser not Support GeoLocation.\"})}},{key:\"clearWatch\",value:function(){clearInterval(this.watchInterval),this._watchCallBacks=[]}}]),r}(s.Control),W=function(t){f(n,t);var e=m(n);function n(){return i(this,n),e.call(this)}return a(n,[{key:\"getLocation\",value:function(t,e){var n=window.AMapAndroidLoc;this.on(\"get\",e,t,!0),n.getLocation(JSON.stringify({to:t._container.timeout,useGPS:1,watch:0,callback:\"AMap.Geolocation.cbk\"}))}},{key:\"stopLocation\",value:function(t){var e=window.AMapAndroidLoc;this.off(\"get\",cbk,t),e.stopLocation()}}]),n}(s.Event);W.instance=new W,U.cbk=function(t){t=JSON.parse(t);var e=W.instance;e.emit(\"get\",t),e.emit(\"watch\",t)},s.Geolocation=U}(window.AMap);\n");
_jsload_('AMap.GraspRoad.js',"!function(o){\"use strict\";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}var e=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),(e=a(this,c(t).call(this))).CLASS_NAME=\"AMap.GraspRoad\",e.config=o.getConfig(),e.url=e.config.server+\"/v4/grasproad/\",e}var e,r,n;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.Event),e=t,(r=[{key:\"search\",value:function(e,t,r){o.WebService.post(e,t,function(e,t){if(\"complete\"===e&&(0===t.errcode?r(null,t):r(t)),\"error\"===e){r({errmsg:\"REQUEST_FAILED\"})}})}},{key:\"driving\",value:function(e,t){var r=this.url+\"driving\";this.search(r,e,t)}},{key:\"bicycling\",value:function(e,t){var r=this.url+\"bicycling\";this.search(r,e,t)}}])&&i(e.prototype,r),n&&i(e,n),t}();o.GraspRoad=e}(window.AMap);\n");
_jsload_('AMap.HawkEye.js',"!function(r){\"use strict\";function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function a(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=i,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function u(n){var i=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n),t=(e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&(\"object\"==typeof e||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return h(t)}}function f(){return(f=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i)return i=Object.getOwnPropertyDescriptor(i,t),i.get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}var e=function(e){var t=o;if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&l(t,e);var n,i=u(o);function o(e){if(!(this instanceof o))throw new TypeError(\"Cannot call a class as a function\");var e=a({position:\"RB\",offset:[-2,-2],width:\"150px\",height:\"180px\",borderStyle:\"double solid solid double\",borderColor:\"silver\",borderRadius:\"0px\",borderWidth:\"3px\",buttonSize:\"12px\",showRectangle:!0,mapStyle:\"\",layers:[],autoMove:!0,showButton:!0,isOpen:!0,visible:!0},e);return(e=i.call(this,e))._className=\"hawkeye\",e.initContainer(),e.CLASS_NAME=\"AMap.HawkEye\",e.initUI(),e._config.isOpen||(e._container.style.width=e._config.buttonSize,e._container.style.height=e._config.buttonSize,e._config.autoMove&&e.map&&e.map.off(\"viewchange\",e._handleViewChange,h(e))),e}return t=o,(e=[{key:\"initUI\",value:function(){for(var e=[\"width\",\"height\",\"borderStyle\",\"borderWidth\",\"borderColor\",\"borderRadius\"],t=0,n=e.length;t<n;t+=1)this._config[e[t]]&&(this._container.style[e[t]]=this._config[e[t]]);this.addButton()}},{key:\"addButton\",value:function(){var e,t=this;this._config.showButton&&((e=document.createElement(\"div\")).className=\"button\",e.style.width=e.style.height=this._config.buttonSize,this._container.appendChild(e),e.style.backgroundPositionX=this._config.isOpen?\"0\":\"100%\",e.addEventListener(\"click\",function(){e.style.backgroundPositionX=t._config.isOpen?\"0\":\"100%\",t._config.isOpen?t.close():t.open()}))}},{key:\"initMap\",value:function(){var e=document.createElement(\"div\");this._container.appendChild(e),this._smallMap=new r.Map(e,{zoom:this._config.zoom,mapStyle:this._config.mapStyle,center:this._config.center,layers:this._config.layers,dragEnable:!1,scrollWheel:!1,doubleClickZoom:!1,touchZoom:!1})}},{key:\"addTo\",value:function(e){f(c(o.prototype),\"addTo\",this).call(this,e),this._smallMap||this.initMap(),this._config.autoMove?(this._handleViewChange({zoom:e.getZoom(),center:e.getCenter()}),e.on(\"viewchange\",this._handleViewChange,this)):(this._smallMap.setStatus({}),this._smallMap.setZoomAndCenter(this._config.zoom,this._config.center,!0))}},{key:\"remove\",value:function(){this.map&&this.map.off(\"viewchange\",this._handleViewChange,this),this._smallMap&&(this.viewRectangle&&this._smallMap.remove(this.viewRectangle),this.optimalRectangle&&this._smallMap.remove(this.optimalRectangle),this._smallMap.destroy(),this._smallMap=null),f(c(o.prototype),\"remove\",this).call(this),this.viewRectangle=null,this.optimalRectangle=null,this._container.innerHTML=\"\"}},{key:\"_handleViewChange\",value:function(e){var t,n=this;this._smallMap.setZoomAndCenter(e.zoom-4,e.center,!0),this._config.showRectangle&&(t=this.map.getBounds(),this.viewRectangle||(this.viewRectangle=new r.Rectangle({bounds:t,draggable:!0,fillOpacity:.1,zIndex:111}),this.optimalRectangle=new r.Rectangle({bounds:t,draggable:!1,fillOpacity:.1,zIndex:110}),this.viewRectangle.on(\"dragstart\",function(){console.log(\"dragstart\",n.viewRectangle.getBounds()+\"\"),n.optimalRectangle.setBounds(n.viewRectangle.getBounds()),n._smallMap.add(n.optimalRectangle),n.optimalRectangle.show()}),this.viewRectangle.on(\"dragend\",function(){console.log(\"dragend\",n.viewRectangle.getBounds()+\"\");var e=n.viewRectangle.getBounds();n.optimalRectangle.setBounds(e),n.map.setBounds(e),n._smallMap.on(\"moveend\",function(){n.optimalRectangle.hide()},n,!0)}),this._smallMap.add(this.viewRectangle)),this.viewRectangle.setBounds(t),e.zoom<4.5?(this.viewRectangle.hide(),this.optimalRectangle.hide()):this.viewRectangle.show())}},{key:\"open\",value:function(){this.show(),this._config.isOpen||(this._config.isOpen=!0,this._container.style.display=\"block\",this._container.style.width=this._config.width,this._container.style.height=this._config.height,this._config.autoMove&&this.map.on(\"viewchange\",this._handleViewChange,this),this.emit(\"open\"))}},{key:\"close\",value:function(){this._config.isOpen&&(this._config.isOpen=!1,this._container.style.width=this._config.buttonSize,this._container.style.height=this._config.buttonSize,this._config.autoMove&&this.map.off(\"viewchange\",this._handleViewChange,this),this.emit(\"close\"))}},{key:\"show\",value:function(){this._config.visible||(this._config.visible=!0,this._container.style.display=\"block\",this.emit(\"show\"))}},{key:\"hide\",value:function(){this._config.visible&&(this._config.visible=!1,this._container.style.display=\"none\",this.emit(\"hide\"))}}])&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),o}(r.Control);r.HawkEye=e}(window.AMap);\n");
_jsload_('AMap.HeatMap.js',"!function(b){\"use strict\";function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function e(i){var n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(i);return o(this,n?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(t,e)||h(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function E(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function h(t,e){if(t){if(\"string\"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return\"Map\"===(i=\"Object\"===i&&t.constructor?t.constructor.name:i)||\"Set\"===i?Array.from(t):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(t){function e(i){return i=i||{},Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])}),i}var h,r={defaultRadius:30,defaultRenderer:\"canvas2d\",defaultGradient:{.25:\"rgb(0,0,255)\",.55:\"rgb(0,255,0)\",.85:\"yellow\",1:\"rgb(255,0,0)\"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:\"x\",defaultYField:\"y\",defaultValueField:\"value\",plugins:{}},a=(h=r.defaultRadius,e(i.prototype,{_organiseData:function(t,e){var i=t[this._xField],n=t[this._yField],r=this._radi,a=this._data,o=this._max,s=this._min,u=t[this._valueField]||1,t=t.radius||this._cfgRadius||h;return a[i]||(a[i]=[],r[i]=[]),a[i][n]?a[i][n]+=u:(a[i][n]=u,r[i][n]=t),a[i][n]>o?(e?this.setDataMax(a[i][n]):this._max=a[i][n],!1):{x:i,y:n,value:u,radius:t,min:s,max:o}},_unOrganizeData:function(){var t,e=[],i=this._data,n=this._radi;for(t in i)if(i.hasOwnProperty(t))for(var r in i[t])i[t].hasOwnProperty(r)&&e.push({x:t,y:r,radius:n[t][r],value:i[t][r]});return{min:this._min,max:this._max,data:e}},_onExtremaChange:function(){this._coordinator.emit(\"extremachange\",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var t=arguments[0],e=t.length;e;)e-=1,this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&this._coordinator.emit(\"renderpartial\",{min:this._min,max:this._max,data:[i]})}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var n=0;n<i;n+=1)this._organiseData(e[n],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit(\"renderall\",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit(\"renderall\",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit(\"renderall\",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}}),i);function i(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)}var _,n=(_=null,e(s.prototype,{_resetSize:function(t,e){var i=this._sizeScale||1;t=Math.ceil(t*i),e=Math.ceil(e*i),this.render&&this.render.resetSize([t,e])},renderPartial:function(t){this._drawAlpha(t)},renderAll:function(t){this._clear(),this._drawAlpha(function(t){for(var e=[],i=t.min,n=t.max,r=t.radi,a=t.data,o=Object.keys(a),s=o.length;1<=s;)for(var u=o[s-=1],h=Object.keys(a[u]),d=h.length;1<=d;){var c=h[d-=1],l=a[u][c],f=r[u][c];_&&(f=_),e.push({x:u,y:c,value:l,radius:f})}return{min:i,max:n,data:e}}(t))},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.render&&this.render.resetSize([t,e])},_clear:function(){this.render&&this.render.clear()},_setStyles:function(t){this._blur=0===t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this._backgroundColor=t.backgroundColor),this._opacity=255*(t.opacity||0),0===t.maxOpacity?this._maxOpacity=0:this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity,t.radius&&(this._reSetRadius=t.radius),this._noColorize=t._noColorize,this._sizeScale=t._sizeScale},_drawAlpha:function(t){var e,i,n,r,a,o=this._min=t.min,s=this._max=t.max,u=t.data||[],h=u.length,d=1-this._blur,c=u[0]&&u[0].radius||30;if(h){this._templates[c]?e=this._templates[c]:this._templates[c]=(i=c,n=d,r=document.createElement(\"canvas\"),a=r.getContext(\"2d\"),d=t=i,r.width=r.height=2*i,1===n?(a.beginPath(),a.arc(t,d,i,0,2*Math.PI,!1),a.fillStyle=\"rgba(0,0,0,1)\",a.fill()):((d=a.createRadialGradient(t,d,i*n,t,d,i)).addColorStop(0,\"rgba(0,0,0,1)\"),d.addColorStop(1,\"rgba(0,0,0,0)\"),a.fillStyle=d,a.fillRect(0,0,2*i,2*i)),e=r);for(var l=[];1<=h;){var f=u[h-=1],_=f.x,p=f.y,c=f.radius,v=Math.min(f.value,s),g=_-c,m=p-c,f=(v-o)/(s-o);l.push({x:_,y:p,radius:c,value:v,rectX:g,rectY:m,alpha:f})}this.render.renderShadow(e,l)}},getColorByAlpha:function(t){var e=4*t;if(!e)return[0,0,0,0];var i=this._opacity,n=this._maxOpacity,r=this._minOpacity,a=this._useGradientOpacity,o=this._palette,n=0<i?i:t<n?t<r?r:t:n;return[o[e],o[1+e],o[2+e],a?o[3+e]:n]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],i=this._max,t=this._min;return Math.abs(i-t)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()},resetRadius:function(t){_=t},resetSizeScale:function(t){this._sizeScale=t||1}}),s);function o(t){var e=t.gradient||t.defaultGradient,i=document.createElement(\"canvas\"),t=i.getContext(\"2d\");i.width=256,i.height=1;var n,r=t.createLinearGradient(0,0,256,1);for(n in e)e.hasOwnProperty(n)&&r.addColorStop(n,e[n]);return t.fillStyle=r,t.fillRect(0,0,256,1),t.getImageData(0,0,256,1).data}function s(t){this._renderBoundaries=[2e3,2e3,0,0];var e=getComputedStyle(t.container)||{};this._width=+e.width.replace(/px/,\"\"),this._height=+e.height.replace(/px/,\"\"),this._templates={},this._setStyles(t),this._palette=o(t)}var u,d=(v=!1,v=\"canvas2d\"===r.defaultRenderer?n:v),c=function(){for(var t={},e=arguments.length,i=0;i<e;i+=1){var n,r=arguments[i];for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t},l=(e(f.prototype,{on:function(t,e,i){var n=this.cStore;n[t]||(n[t]=[]),n[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var n=i[t].length,r=0;r<n;r+=1)(0,i[t][r])(e)}}),u=f,e(p.prototype,{addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},clear:function(){this._renderer._clear()},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=c(this._config,t),t.radius&&this._renderer.resetRadius(t.radius),this._renderer.updateConfig(this._config),this._coordinator.emit(\"renderall\",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit(\"renderall\",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null},resetSize:function(t,e){this._renderer._resetSize(t,e)}}),p);function f(){this.cStore={}}function p(t,e){this.render=e;var i,t=this._config=c(r,arguments[0]||{});if(this._coordinator=new u,t.plugin){var n=t.plugin;if(!r.plugins[n])throw new Error(\"Plugin '\"+n+\"' not found. Maybe it was not registered.\");var n=r.plugins[n];this._renderer=new n.renderer(t),this._store=new n.store(t)}else this._renderer=new d(t),this._renderer.render=e,this._store=new a(t);n=(i=this)._renderer,e=i._coordinator,t=i._store,e.on(\"renderpartial\",n.renderPartial,n),e.on(\"renderall\",n.renderAll,n),e.on(\"extremachange\",function(t){i._config.onExtremaChange&&i._config.onExtremaChange({min:t.min,max:t.max,gradient:i._config.gradient||i._config.defaultGradient})}),t.setCoordinator(e)}var v={create:function(t,e){return new l(t,e)},register:function(t,e){r.plugins[t]=e}};t.h337=v}(window);var p=[\"VERTEX_SHADER\",\"FRAGMENT_SHADER\"],u=window;function v(t){u.console&&(u.console.error?u.console.error(t):u.console.log&&u.console.log(t))}function c(t,e){return e===t.SAMPLER_2D?t.TEXTURE_2D:e===t.SAMPLER_CUBE?t.TEXTURE_CUBE_MAP:void 0}function d(t,e,i,n,r){for(var a,o,s,u,h,d,c,l,f=[],_=0;_<e.length;++_)f.push((a=t,o=e[_],s=t[p[_]],u=(u=r)||v,s=a.createShader(s),a.shaderSource(s,o),a.compileShader(s),a.getShaderParameter(s,a.COMPILE_STATUS)?s:(u(\"*** Error compiling shader '\"+s+\"':\"+a.getShaderInfoLog(s)),a.deleteShader(s),null)));return d=f,i=i,c=n,n=(n=r)||v,l=(h=t).createProgram(),d.forEach(function(t){h.attachShader(l,t)}),i&&i.forEach(function(t,e){h.bindAttribLocation(l,c?c[e]:e,t)}),h.linkProgram(l),h.getProgramParameter(l,h.LINK_STATUS)?l:(n(\"Error in program linking:\"+h.getProgramInfoLog(l)),h.deleteProgram(l),null)}function l(h,t){var d=0;for(var e={},i=h.getProgramParameter(t,h.ACTIVE_UNIFORMS),n=0;n<i;++n){var r=h.getActiveUniform(t,n);if(!r)break;var a=r.name;\"[0]\"===a.substr(-3)&&(a=a.substr(0,a.length-3));r=function(t,e){var i,n,r,a,o=h.getUniformLocation(t,e.name),t=e.type,e=1<e.size&&\"[0]\"===e.name.substr(-3);if(t===h.FLOAT&&e)return function(t){h.uniform1fv(o,t)};if(t===h.FLOAT)return function(t){h.uniform1f(o,t)};if(t===h.FLOAT_VEC2)return function(t){h.uniform2fv(o,t)};if(t===h.FLOAT_VEC3)return function(t){h.uniform3fv(o,t)};if(t===h.FLOAT_VEC4)return function(t){h.uniform4fv(o,t)};if(t===h.INT&&e)return function(t){h.uniform1iv(o,t)};if(t===h.INT)return function(t){h.uniform1i(o,t)};if(t===h.INT_VEC2)return function(t){h.uniform2iv(o,t)};if(t===h.INT_VEC3)return function(t){h.uniform3iv(o,t)};if(t===h.INT_VEC4)return function(t){h.uniform4iv(o,t)};if(t===h.BOOL)return function(t){h.uniform1iv(o,t)};if(t===h.BOOL_VEC2)return function(t){h.uniform2iv(o,t)};if(t===h.BOOL_VEC3)return function(t){h.uniform3iv(o,t)};if(t===h.BOOL_VEC4)return function(t){h.uniform4iv(o,t)};if(t===h.FLOAT_MAT2)return function(t){h.uniformMatrix2fv(o,!1,t)};if(t===h.FLOAT_MAT3)return function(t){h.uniformMatrix3fv(o,!1,t)};if(t===h.FLOAT_MAT4)return function(t){h.uniformMatrix4fv(o,!1,t)};if((t===h.SAMPLER_2D||t===h.SAMPLER_CUBE)&&e){for(var s=[],u=0;u<info.size;++u)s.push(d++);return i=c(h,t),n=s,function(t){h.uniform1iv(o,n),t.forEach(function(t,e){h.activeTexture(h.TEXTURE0+n[e]),h.bindTexture(i,t)})}}if(t===h.SAMPLER_2D||t===h.SAMPLER_CUBE)return r=c(h,t),a=d++,function(t){h.uniform1i(o,a),h.activeTexture(h.TEXTURE0+a),h.bindTexture(r,t)};throw\"unknown type: 0x\"+t.toString(16)}(t,r);e[a]=r}return e}function f(i,n){i=i.uniformSetters||i,Object.keys(n).forEach(function(t){var e=i[t];e&&e(n[t])})}function _(i,t){var e={};for(var n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES),r=0;r<n;++r){var a=i.getActiveAttrib(t,r);if(!a)break;var o=i.getAttribLocation(t,a.name);e[a.name]=function(e){return function(t){i.bindBuffer(i.ARRAY_BUFFER,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,t.numComponents||t.size,t.type||i.FLOAT,t.normalize||!1,t.stride||0,t.offset||0)}}(o)}return e}var g=function(){function i(t,e){a(this,i),this._parent=t,e.init=this.init.bind(this),e.id=\"gl_custom\";e=new b.GLCustomLayer(e);this.render=e}return t(i,[{key:\"init\",value:function(t){this.gl=t;var e=this.program=d(t,[\"precision mediump float;\\nattribute float a_index;\\nvarying highp vec2 v_uv;\\nuniform vec4 u_ceil;\\nuniform highp vec4 u_params;\\nuniform lowp int u_heightFuncType;\\nuniform vec4 u_bezier;\\nuniform highp mat4 u_mvp;\\nuniform sampler2D u_texture;\\nuniform highp vec2 u_size;\\nuniform highp float u_resolution;\\n\\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3)\\n{\\n    float t2 = t * t;\\n    float one_minus_t = 1.0 - t;\\n    float one_minus_t2 = one_minus_t * one_minus_t;\\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\\n}\\nvec2 toBezier(float t, vec4 p){\\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\\n}\\nfloat random (vec2 st) {\\n    return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);\\n}\\n\\nvoid main(void) {\\n    float origin_y = floor((a_index + 0.1) / (u_params.z + 1.0));\\n    float origin_x = a_index - origin_y * (u_params.z + 1.0);\\n\\n    vec2 normalized_uv = vec2(origin_x, origin_y) * u_ceil.xy / u_size;\\n    v_uv = vec2(normalized_uv.x, 1.0 - normalized_uv.y);\\n    vec4 color = texture2D(u_texture, v_uv);\\n    float alpha = color.a;\\n\\n    float fh = toBezier(alpha, u_bezier).y;\\n    float x = origin_x * u_resolution * u_ceil.x + u_ceil.z;\\n    float y = - origin_y * u_resolution * u_ceil.y + u_ceil.w;\\n\\n    vec4 pos =  vec4(x, y, fh * 10.0 * u_params.x, 1.0);\\n    vec4 targetPos = u_mvp * pos;\\n    gl_Position = targetPos;\\n    gl_PointSize = 10.0;\\n}\",\"precision mediump float;\\nvarying highp vec2 v_uv;\\nvarying highp vec4 v_pos;\\nvarying highp vec4 v_color;\\nuniform highp sampler2D u_texture;\\nuniform highp vec2 u_size;\\nuniform highp float u_resolution;\\nuniform highp vec4 u_params;\\nuniform vec4 u_gradient[8];\\nuniform vec2 u_opacity;\\n\\nfloat fade(float low, float high, float value) {\\n    if (value<low||value>high){ return 0.0; }\\n    return (value-low)/(high-low);\\n}\\n\\nvec4 getColor(float intensity) {\\n    int s=0;\\n    vec3 color = vec3(0);\\n    for (int gn=0;gn<8;gn+=1){\\n        if (u_gradient[gn].x>=intensity){\\n            s=gn;\\n            break;\\n        }\\n    }\\n    if (s<8){\\n        if (s==0){\\n            color = mix(vec3(0, 0, 1), u_gradient[0].yzw, fade(0.0, u_gradient[0].x, intensity));\\n        } else if(s == 1){\\n            color = mix(u_gradient[0].yzw, u_gradient[1].yzw, fade(u_gradient[0].x, u_gradient[1].x, intensity));\\n        }else if(s == 2){\\n            color = mix(u_gradient[1].yzw, u_gradient[2].yzw, fade(u_gradient[1].x, u_gradient[2].x, intensity));\\n        }else if(s == 3){\\n            color = mix(u_gradient[2].yzw, u_gradient[3].yzw, fade(u_gradient[2].x, u_gradient[3].x, intensity));\\n        }else if(s == 4){\\n            color = mix(u_gradient[3].yzw, u_gradient[4].yzw, fade(u_gradient[3].x, u_gradient[4].x, intensity));\\n        }else if(s == 5){\\n            color = mix(u_gradient[4].yzw, u_gradient[5].yzw, fade(u_gradient[4].x, u_gradient[5].x, intensity));\\n        }else if(s == 6){\\n            color = mix(u_gradient[5].yzw, u_gradient[6].yzw, fade(u_gradient[5].x, u_gradient[6].x, intensity));\\n        }else if(s == 7){\\n            color = mix(u_gradient[6].yzw, u_gradient[7].yzw, fade(u_gradient[6].x, u_gradient[7].x, intensity));\\n        }\\n    }\\n\\n    return vec4(color.xyz, intensity);\\n}\\n\\nvoid main(void) {\\n    vec4 textureColor = texture2D(u_texture, v_uv);\\n    float alpha = textureColor.a;\\n\\n    if (alpha < 0.003){\\n        discard;\\n    }\\n    vec4 color = getColor(alpha);\\n    gl_FragColor = vec4(color.xyz, clamp(color.w, u_opacity.x, u_opacity.y));\\n}\\n\"]);this.uniformSetters=l(t,e),_(t,e);e=this.shadowProgram=d(t,[\"precision mediump float;\\nattribute vec4 a_params;\\nvarying highp vec2 v_uv;\\nvarying float v_opacity;\\nuniform float u_radius;\\nuniform vec2 u_size;\\n\\nvec2 getPosByDirection(vec2 pos, float direction, float radius){\\n    vec2 targetPos;\\n\\n    if (direction == 0.0){\\n        targetPos = vec2(pos - radius);\\n    }else if (direction == 1.0){\\n        targetPos = vec2(pos.x + radius, pos.y - radius);\\n    }else if (direction == 2.0){\\n        targetPos = vec2(pos + radius);\\n    }else{\\n        targetPos = vec2(pos.x - radius, pos.y + radius);\\n    }\\n\\n    return targetPos;\\n}\\n\\nvec2 getUVByDirection(float direction){\\n    vec2 targetUV;\\n\\n    if (direction == 0.0){\\n        targetUV = vec2(0, 1);\\n    }else if (direction == 1.0){\\n        targetUV = vec2(1, 1);\\n    }else if (direction == 2.0){\\n        targetUV = vec2(1, 0);\\n    }else{\\n        targetUV = vec2(0, 0);\\n    }\\n\\n    return targetUV;\\n}\\n\\nvoid main(){\\n    float direction = a_params.z;\\n    vec2 pos = getPosByDirection(a_params.xy, direction, u_radius);\\n    v_uv = getUVByDirection(direction);\\n    v_opacity = a_params.w;\\n    vec2 formatPos = pos/u_size * 2.0 - 1.0;\\n    gl_Position = vec4(formatPos.x, - formatPos.y, 0, 1);\\n    gl_PointSize = 10.0;\\n}\\n\",\"precision mediump float;\\nvarying highp vec2 v_uv;\\nvarying float v_opacity;\\nuniform sampler2D u_texture;\\n\\nvoid main(){\\n    vec4 color = texture2D(u_texture, v_uv);\\n    float alpha = color.a * v_opacity;\\n    gl_FragColor = vec4(color.rgb, alpha);\\n//    gl_FragColor = vec4(1, 0, 0, 1);\\n}\"]);this.shadowUniformSetters=l(t,e),_(t,e),this._createFrameBuffer(),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:\"show\",value:function(){this.render.show()}},{key:\"hide\",value:function(){this.render.hide()}},{key:\"setzIndex\",value:function(t){this.render.setzIndex(t)}},{key:\"onRender\",value:function(t,e){var i=e.gl,n=e.frameState,r=e.viewState;e.useCache;i&&n&&r&&(this.frameState=n,this.viewState=r,e=this.program,r=i=this._parent._heatmap.options[\"3d\"].gridSize,this.dataState=t,r=(i=this._buildGrid(t,i,r)).size=t.size,this._bindTexture(this.shadowTexture,null,r.width,r.height),this._setTexture(!0),this._parent._reDrawShadowPicture(t,i,n)&&(this._currData&&this._currData.dataState.size.toString()===r.toString()||(r=this._buildBuffData(i),this._currData={grid:i,dataState:t,buffData:r}),this._doRender(e)))}},{key:\"setMap\",value:function(t){this.render&&this.render.setMap(t)}},{key:\"renderShadow\",value:function(t,e){this.tpl=t,this.data=e;var i,n,r=this.gl,a=this.shadowProgram,o=this.frameBuffer;r&&a&&o&&(i=r.drawingBufferWidth,n=r.drawingBufferHeight,e=this._buildShadowVertices(e),this.tplTexture||(this.tplTexture=r.createTexture()),this._bindTexture(this.tplTexture,t),this._setTexture(),t=this.dataState.size,r.useProgram(a),r.bindFramebuffer(r.FRAMEBUFFER,o),r.viewport(0,0,t.width,t.height),r.enable(r.BLEND),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),r.clear(r.DEPTH_BUFFER_BIT),o=this._parent._heatmap,f(this.shadowUniformSetters,{u_texture:this.tplTexture,u_radius:o.options.radius||30,u_size:t.toArray()}),t=(t=this._shadowBuffer)||(this._shadowBuffer=r.createBuffer()),this._bufferArray(r,a,e,t),r.enableVertexAttribArray(a.a_params),r.bindBuffer(r.ARRAY_BUFFER,t),r.vertexAttribPointer(a.a_params,4,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,e.verticesLen),r.bindFramebuffer(r.FRAMEBUFFER,null),r.disableVertexAttribArray(a.a_params),r.bindTexture(r.TEXTURE_2D,null),r.viewport(0,0,i,n))}},{key:\"resetSize\",value:function(){}},{key:\"clear\",value:function(){}},{key:\"_createFrameBuffer\",value:function(){var t=this.gl,e=this.frameBuffer=t.createFramebuffer(),i=this.shadowTexture;i||(i=this.shadowTexture=t.createTexture(),this._bindTexture(i,null,30,30)),e.texture=i,e._id=100*Math.random(),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}},{key:\"_bindTexture\",value:function(t,e,i,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,t);e=i&&n?[r.TEXTURE_2D,0,r.RGBA,i,n,0,r.RGBA,r.UNSIGNED_BYTE,e]:[r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e];r.texImage2D.apply(r,e)}},{key:\"_setTexture\",value:function(){var t=this.gl;t&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))}},{key:\"_buildShadowVertices\",value:function(t){var e=t.length,i=this.shadowVertices,n=4*e*6;(!i||this.beforeDataLen<e)&&(this.beforeDataLen=e,i=this.shadowVertices=new Float32Array(2*n)),i.verticesLen=n/4;var r=0,a=function(t,e){var i;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=h(t))||e&&t&&\"number\"==typeof t.length){i&&(t=i);var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,a=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(t);try{for(a.s();!(u=a.n()).done;){var o=u.value,s=o.x,u=o.y,o=o.alpha;i.set([s,u,0,o,s,u,1,o,s,u,3,o,s,u,3,o,s,u,1,o,s,u,2,o],r),r+=24}}catch(t){a.e(t)}finally{a.f()}return i}},{key:\"_buildBuffData\",value:function(t){var e=t.boundPixels,i=t.boundCoords,n=(t.resolution,t.xNum),r=t.yNum,a=e[0][1],o=e[0][0],e=i[0][1],i=i[0][0],o=t.boundPixels[1][0]-o,a=t.boundPixels[1][1]-a,s=Math.floor(n)||1,u=Math.floor(r)||1,h=s+1,d=u+1,r=parseFloat((o/s).toFixed(2)),o=parseFloat((a/u).toFixed(2)),a=h*d,c=this.vertices;(!this.vertices||this.beforeVerticesLen<a)&&(this.beforeVerticesLen=a,c=this.vertices=new Float32Array(2*a));for(var l=0;l<h*d;l++)c[l]=l;for(var f=0,_=new Uint32Array(s*u*6),p=0;p<u;p++)for(var v=0;v<s;v++){var g=v+h*p,m=v+h*(p+1),y=v+1+h*(p+1),x=v+1+h*p;_[f]=g,_[f+1]=m,_[f+2]=x,_[f+3]=x,_[f+4]=m,_[f+5]=y,f+=6}return{vertices:c,triangleIndices:_,segment_width:r,segment_height:o,boundCoordTop:e,boundCoordLeft:i,size:t.size}}},{key:\"_buildGrid\",value:function(t,e,i){var n=t.scaleFactor,r=t.boundPixels,a=t.boundCoords,o=t.resolution,s=t.size.width,t=t.size.height;return{scaleFactor:n,boundPixels:r,boundCoords:a,resolution:o,xNum:Math.ceil(s/e),yNum:Math.ceil(t/i),xStep:e,yStep:i,scoreRecord:null}}},{key:\"_doRender\",value:function(t){var e,i,n;this._currData&&(e=this.gl,i=this.frameState.size,n=this._parent,e.useProgram(t),e.viewport(0,0,i[0]*n.scale,i[1]*n.scale),e.bindFramebuffer(e.FRAMEBUFFER,null),e.getExtension(\"OES_element_index_uint\"),e.enable(e.DEPTH_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.enable(e.CULL_FACE),e.cullFace(e.FRONT),e.frontFace(e.CW),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),this._prepGlEnv(),e.enableVertexAttribArray(t.a_index),e.bindBuffer(e.ARRAY_BUFFER,this._currentVertexBuffer),e.vertexAttribPointer(t.a_index,1,e.FLOAT,!1,0,0),this._drawSurface(e,t),e.bindTexture(e.TEXTURE_2D,null),e.disableVertexAttribArray(t.a_index),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE))}},{key:\"_prepGlEnv\",value:function(){var t=this.gl;this._currentVertexBuffer||(this._currentVertexBuffer=t.createBuffer()),this._currentTriangleIndicesBuffer||(this._currentTriangleIndicesBuffer=t.createBuffer());var e=this.viewState,i=e.mvpMatrix,n=this._parent._heatmap,r=n.getMap().getZoom(),a=n.is3DMode(),o=this._currData,s=o.buffData,u=Math.pow(2,20-r),h=n.options[\"3d\"],d=h.heatToHeight,c=e.optimalZoom,l=this.dataState,t=e.centerCoord,r=D(b.lcs.getLocalByCoord([t[0],t[1]]).center||[0,0],2),e=r[0],t=r[1];c<13&&(t=e=0);r=n.options.opacity||[0,1],c=this.uniformSetters,o=[a?u*n.options[\"3d\"].heightScale:0,o.grid.xStep,o.grid.xNum,o.grid.yNum];i[10]-=.01,f(c,{u_params:o,u_ceil:[s.segment_width,s.segment_height,l.boundCoords[0][0]-e,l.boundCoords[0][1]-t],u_heightFuncType:d?1:0,u_bezier:h.heightBezier||[0,0,0,0],u_gradient:n.config.gradientWgl,u_mvp:i,u_texture:this.shadowTexture,u_size:s.size.toArray(),u_resolution:parseFloat(l.resolution),u_opacity:r}),i[10]+=.01}},{key:\"_drawSurface\",value:function(t,e){var i=this._currData.buffData;this._buffData(t,e,i),i.triangleIndices.length&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._currentTriangleIndicesBuffer),t.drawElements(t.TRIANGLES,i.triangleIndices.length,t.UNSIGNED_INT,0))}},{key:\"_buffData\",value:function(t,e,i){var n=i.vertices;this._bufferArray(t,e,n,this._currentVertexBuffer),this._bufferIndices(t,e,i.triangleIndices,this._currentTriangleIndicesBuffer)}},{key:\"_bufferArray\",value:function(t,e,i,n){return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),n}},{key:\"_bufferIndices\",value:function(t,e,i,n){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),n}}]),i}(),m=function(){function i(t,e){a(this,i),this._parent=t,this.initCanvas(),e.id=\"custom\";e=new b.CustomLayer(this.canvas,e);this.render=e}return t(i,[{key:\"initCanvas\",value:function(){var t=this.shadowCanvas=document.createElement(\"canvas\"),e=this.canvas=document.createElement(\"canvas\");this.shadowCtx=t.getContext(\"2d\"),this.ctx=e.getContext(\"2d\"),e.className=\"heatmap-canvas\";document.querySelector(\".amap-layers\");t.style.position=\"absolute\"}},{key:\"onRender\",value:function(t,e){this.dataState=t;var i,n,r,a,o=this.map=this._parent._heatmap.getMap(),s=o.getMapState();o&&(n=(i=this._parent._heatmap.options).zooms||[2,20],!(a=!0)!==(a=(r=o.zoom)<n[0]||n[1]<r||!1===i.visible?!1:a)?((s.zooming||s.rotating)&&this.clear(),this._beforeCenter||(this._beforeCenter=o.getCenter()),s.panning?this.renderByCss():(this._beforeCenter=o.getCenter(),this._parent._reDrawShadowPicture(t)&&(o=o.getSize().toArray(),this.canvasSize&&this._sameSize(this.canvasSize,o)||this.resetCanvasSize(o),this.setContainerOffset(0,0),o=this._parent.heatmapBase,o=this._renderer=o._renderer,this._renderBoundaries=o._renderBoundaries,this._colorize()))):this.clear())}},{key:\"setMap\",value:function(t){this.render&&this.render.setMap(t)}},{key:\"renderShadow\",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=this._parent.heatmapBase._sizeScale||1,n=this.shadowCtx;if(this.map){this.shadowCanvas;for(var r=0;r<e.length;r++){var a=e[r],o=a.radius,s=a.rectX,u=a.rectY,a=a.alpha;n.globalAlpha=a,1!==i?(o=2*o*i,n.drawImage(t,s*i,u*i,o,o)):n.drawImage(t,s,u)}}}},{key:\"resetSize\",value:function(t){this.size=t,this.shadowCanvas&&(this.shadowCanvas.width=t[0],this.shadowCanvas.height=t[1])}},{key:\"resetCanvasSize\",value:function(t){this.canvasSize=t,this.canvas&&(this.canvas.width=t[0],this.canvas.height=t[1])}},{key:\"show\",value:function(){this.render.show()}},{key:\"hide\",value:function(){this.render.hide()}},{key:\"setzIndex\",value:function(t){this.render.setzIndex(t)}},{key:\"clear\",value:function(){var t=D(this.size||[0,0],2),e=t[0],i=t[1],n=D(this.canvasSize||[0,0],2),t=n[0],n=n[1];this.ctx&&this.ctx.clearRect(0,0,t,n),this.shadowCtx&&this.shadowCtx.clearRect(0,0,e,i)}},{key:\"renderByCss\",value:function(){var t,e,i,n=this.map;n&&(e=n.getCenter().toArray(),i=this._beforeCenter,t=n.getProjection(),n=n.getResolution(),e=t.project(e[0],e[1]),i=t.project(i[0],i[1]),e=[e[0]/n,e[1]/n],i=[i[0]/n,i[1]/n],n=e[0]-i[0],i=e[1]-i[1],this.setContainerOffset(i,-n))}},{key:\"setContainerOffset\",value:function(t,e){this.render._container.style.top=t+\"px\",this.render._container.style.left=e+\"px\"}},{key:\"_colorize\",value:function(){var t=this._renderer;if(t){for(var e=t._opacity,i=t._maxOpacity,n=t._minOpacity,r=t._useGradientOpacity,a=this._parent,o=D(a.bounds,4),s=o[0],u=(o[1],o[2],o[3]),h=a._heatmap.getMap(),o=h.getProjection(),a=(h.getResolution(),o.project(s,u),D(this.dataState.boundCoords,1)[0]),a=o.unproject.apply(o,E(a)),u=[s,u],a=h.lngLatToContainer(a),u=h.lngLatToContainer(u),d=[Math.round(a.x-u.x),Math.round(-a.y+u.y)],u=this.shadowCanvas,c=u.width,l=u.height,f=this.shadowCtx.getImageData(0,0,c,l).data,_=f.length,p=t._palette,u=this.canvas,t=this.ctx,v=u.width,g=u.height,t=t.getImageData(0,0,v,g),m=t.data,y=3;y<_;y+=4){var x,b,S=f[y],w=4*S;w&&(x=0<e?e:S<i?S<n?n:S:i,(b=this._getImageDataPosition(d,(y-3)/4,{srcSize:[v,g],targetSize:[c,l]}))&&(b=(S=D(b,2))[0],m[4*(b=S[1]*v+b)]=p[w],m[4*b+1]=p[1+w],m[4*b+2]=p[2+w],m[4*b+3]=r?p[3+w]:x))}this.ctx.putImageData(t,0,0),this._renderBoundaries=[1e3,1e3,0,0]}}},{key:\"_getImageDataPosition\",value:function(t,e,i){var n=i.srcSize,r=i.targetSize,a=Math.floor(e/r[0]),i=-t[1]+a;if(i>n[1]||i<0)return!1;r=t[0]+(e-a*r[0]);return!(r>n[0]||r<0)&&[r,i]}},{key:\"_sameSize\",value:function(t,e){return t[0]===e[0]&&t[1]===e[1]}}]),i}(),y=function(){function n(t,e,i){a(this,n),this.opts={},this.opts.type=\"HeatMapRender\",this.scale=1<window.devicePixelRatio?2:1,(this._heatmap=t).on(\"clear\",this._reRender,this),t.on(\"reConfigure\",this._reConfigure,this),this.heatmapBase=window.h337.create(i,this);i={};i.zIndex=e.zIndex,i.visible=e.visible,i.zooms=e.zooms||[2,20],i.render=this.onRender.bind(this),this._render=new(this.isDOMMode()?m:g)(this,i),this._render.__id=Math.random()}return t(n,[{key:\"addTo\",value:function(t){t&&this._render&&this._render.render.setMap(t)}},{key:\"render\",value:function(){var t,e=this._heatmap.options;(t=this._render)&&(void 0===e.visible||e.visible?t.show():t.hide(),e.zooms&&t.render.setZooms(e.zooms),t.setzIndex(e.zIndex))}},{key:\"onRender\",value:function(t,e,i){var n,r,a,o,s=this._heatmap;s&&s._isReadyForRender()&&(s.options.visible&&s._isZoom()?(o=(a=s.getMap()).getBounds(),n=!(o=this.bounds=[o.southWest.lng,o.southWest.lat,o.northEast.lng,o.northEast.lat]),(r=this._getDataState(a,s._getRadius()+10,o))?(this.dataState&&(o=(a=this.dataState).boundCoords,a.scaleFactor===r.scaleFactor&&this._equalBounds(o,r.boundCoords)&&(n=!0)),s&&s.reconfig&&(n=s.reconfig=!1),this.dataState=r,this._render.onRender(r,{useCache:n,gl:t,frameState:e,viewState:i})):this.dataState=null):this.isDOMMode()&&this._render.onRender())}},{key:\"setMap\",value:function(t){this._render&&this._render.setMap(t)}},{key:\"isDOMMode\",value:function(){var t=-1!==location.search.indexOf(\"2_ddddd\");return!0==t?t:!(!window.AMap||!this._heatmap)&&!window.AMap.Browser.isWebGL}},{key:\"getRender\",value:function(){return this._render}},{key:\"renderShadow\",value:function(t,e){this._render&&this._render.renderShadow(t,e)}},{key:\"resetSize\",value:function(t){this._render&&this._render.resetSize(t)}},{key:\"clear\",value:function(){this._render&&this._render.clear()}},{key:\"_getDataState\",value:function(t,e,i){var n=this._heatmap.DataSetObj.data;if(!n||!n.length)return null;for(var r=t.getZoom(),a=Math.pow(2,20-r),o=i,s=b.extent.createEmpty(),u=!1,h=o,d=[],c=0,l=h.length;c<l;c+=2){var f=h[c];f<0&&(f=-80<f?0:170),d.push([h[c],h[c+1]])}new b.Bounds(d[0],d[1]);for(c=0,l=n.length;c<l;c++){var _=n[c],_=[parseFloat(_.lng),parseFloat(_.lat)];this._checkBounds(d,_)&&(b.extent.extendCoordinate(s,_),u=!0)}if(!u)return null;var p=t.getProjection(),v=t.getResolution(),g=p.project(s[0],s[1]),m=p.project(s[2],s[3]),y=3*e,i=g[0]/v-y,o=g[1]/v-y,e=m[0]/v+y,g=m[1]/v+y;p=this.isDOMMode()?(m=[s[0],s[3]],x=[s[2],s[1]],m=t.lngLatToContainer(m),x=t.lngLatToContainer(x),m=[m.x-y,m.y-y],x=[x.x+y,x.y+y],m=t.containerToLngLat(m),x=t.containerToLngLat(x),[p.project(m.lng,m.lat),p.project(x.lng,x.lat)]):[[i*v,g*v],[e*v,o*v]];var x=[[i,o],[e,g]],o=new b.Size(Math.ceil(e-i),Math.ceil(g-o));return{zoom:r,scaleFactor:a,size:o,coordSize:new b.Size(o.width*v,o.height*v),boundCoords:p,boundPixels:x,resolution:v}}},{key:\"_checkBounds\",value:function(t,e){var i=D(t,2),t=i[0],i=i[1];return 180<=i[0]-t[0]||t[0]<=e[0]&&t[1]<=e[1]&&i[0]>=e[0]&&i[1]>=e[1]}},{key:\"_reConfigure\",value:function(){this._currData=null,this._glEnvReady=!1}},{key:\"_reDrawShadowPicture\",value:function(t,e){t=this._heatmap._doRender({dataState:t});return t.data<=0?0:(this.heatmapBase.setData(t),1)}},{key:\"_equalBounds\",value:function(t,e){var i=D(t,2),n=i[0],t=i[1],i=D(e,2),e=i[0],i=i[1];return n[0]===e[0]&&n[1]===e[1]&&t[1]===i[1]&&i[1]==i[1]}}]),n}(),x=function(){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(r,b.Event);var n=e(r);function r(t,e){var i;return a(this,r),(i=n.call(this)).CLASS_NAME=\"AMap.Heatmap\",e=e||{},i.options={rejectMapMask:e.rejectMapMask,visible:e.visible||!0,radius:e.radius||30,radiusUnit:e.radiusUnit||\"px\",gradient:e.gradient||{.5:\"blue\",.65:\"rgb(117,211,248)\",.7:\"rgb(0, 255, 0)\",.9:\"#ffea00\",1:\"red\"},blur:e.blur,opacity:e.opacity||[0,1],zooms:e.zooms||[2,20],zIndex:e.zIndex||130,renderOnZooming:e.renderOnZooming,\"3d\":b.extend({heightScale:1,heightBezier:[.5,0,1,.5],gridSize:4,drawGridLine:!1},e[\"3d\"])},i.config={radius:i.options.radius,blur:i.options.blur,maxOpacity:i.options.opacity[1],minOpacity:i.options.opacity[0],gradient:i.options.gradient},i.gradient2webgl(),i.isCanavs=i._checkCanvas(),i.isCanavs?(i.DataSetStr=JSON.stringify({data:[]}),i.setMap(t),i):o(i)}return t(r,[{key:\"_checkCanvas\",value:function(){return!!document.createElement(\"canvas\").getContext(\"2d\")}},{key:\"is3DMode\",value:function(t){return(t=t||this.options.map)&&\"3D\"===t.getView().type}},{key:\"getRenderer\",value:function(){return this.heatmap._renderer}},{key:\"_isZoom\",value:function(){var t=this.options.zooms[1],e=this.options.zooms[0],i=this.options.map.getZoom();return parseInt(i)>=parseInt(e)&&parseInt(i)<=parseInt(t)}},{key:\"_isReadyForRender\",value:function(){return this.heatmap&&this.DataSetObj&&this.DataSetObj.data&&this.DataSetObj.data.length&&this.options.map}},{key:\"_render\",value:function(){var t;this._isReadyForRender()&&this.options.map?(t=this.options.map.getSize()).width&&t.height&&this._renderLayer.render():this._clear()}},{key:\"_doRender\",value:function(t){this.coordsData&&this.coordsData.length||this.dataSetToCoord();var e={max:this.DataSetObj.max};null==e.max&&(e.max=this.DataSetObj._autoMax);var i=[],n=this.options.radius;if(t&&t.dataState){var r=t.dataState,t=r.size,a=r.boundCoords[0],o=r.resolution;this.heatmap.resetSize(t.width,t.height);for(var s=this.coordsData,u=s.length,h=r.coordSize,d=n*r.resolution,c=this.getMap(),l=c.getProjection(),f=this._renderLayer.isDOMMode(),_=0;_<u;_+=1){var p,v,g,m,y=s[_],x=y[0]-a[0],b=a[1]-y[1];-d<x&&x<h.width+d&&-d<b&&b<h.height+d&&(m=g=void 0,m=f?(p=l.unproject.apply(l,E(y)),v=l.unproject.apply(l,E(a)),p=c.lngLatToContainer(p),v=c.lngLatToContainer(v),g=p.x-v.x,p.y-v.y):(g=x/o,b/o),i.push({x:g,y:m,value:y.count}))}return e.data=i,e}console.warn(\"Not dataState passed in!!\")}},{key:\"gradient2webgl\",value:function(t){var e=this.config.gradient,i=[],n=[];for(r in e)e.hasOwnProperty(r)&&i.push({stop:parseFloat(r),color:e[r]});i.sort(function(t,e){return t.stop-e.stop});for(var r=0;r<i.length;r+=1){var a=b.Util.color2RgbaArray(i[r].color);n.push(i[r].stop),n.push(a[0],a[1],a[2])}this.config.gradientWgl=n}},{key:\"_getRadius\",value:function(){return this.options.radius}},{key:\"_resetSizeScale\",value:function(t){this.heatmap._renderer.resetSizeScale(t)}},{key:\"getColorByAlpha\",value:function(t){return this.heatmap._renderer.getColorByAlpha(t)}},{key:\"_clear\",value:function(){this.heatmap.setData({data:[]}),this.heatmap.clear(),this.coordsData=[],this.coordsDataExtent=null,this.emit(\"clear\")}},{key:\"_configure\",value:function(){var t;this.heatmap&&(t=b.extend({},this.config,{_noColorize:!!this._renderLayer}),this.reconfig=!0,this.heatmap.configure(t),this.emit(\"reConfigure\"),this._renderLayer.render())}},{key:\"_draw2Condition\",value:function(){return!!(this.DataSetStr&&this.options.map&&this.isCanavs)}},{key:\"setOptions\",value:function(t){var e;b.BuryPoint.add(this,\"setOptions\"),this.isCanavs&&(t=t||{},e=this.options,this.options.radius=t.radius||e.radius,this.options.radiusUnit=t.radiusUnit||e.radiusUnit,this.options.gradient=t.gradient||e.gradient,this.options.opacity=t.opacity||e.opacity,this.options.zooms=t.zooms||e.zooms,this.options.zIndex=t.zIndex||e.zIndex,this.options.visible=(\"boolean\"==typeof t.visible?t:e).visible,this.options.rejectMapMask=t.rejectMapMask,this.options[\"3d\"]=b.extend({},this.options[\"3d\"],t[\"3d\"]),this.config={radius:this.options.radius,blur:this.options.blur,maxOpacity:this.options.opacity[1],minOpacity:this.options.opacity[0],gradient:this.options.gradient},this.gradient2webgl(),this.heatmap&&this._draw2Condition()&&this._configure())}},{key:\"getOptions\",value:function(){if(b.BuryPoint.add(this,\"getOptions\"),this.isCanavs){var t,e={};for(t in this.options)this.options.hasOwnProperty(t)&&\"map\"!==t&&\"visible\"!==t&&(e[t]=this.options[t]);return e}}},{key:\"setDataSet\",value:function(e){var i;b.BuryPoint.add(this,\"setDataSet\"),\"string\"==typeof e.data?(i=this,b.WebService.get(e.data,{},function(t){\"function\"==typeof e.dataParser?e.data=e.dataParser(t):e.data=t,i._setDataSet(e)})):this._setDataSet(e)}},{key:\"_setDataSet\",value:function(t){if(this.isCanavs)if(this.DataSetStr=JSON.stringify({data:[]}),this.DataSetObj=null,t){if(null==(this.DataSetObj=t).max){for(var e=0,i=0;i<t.data.length;i+=1)e=Math.max(t.data[i].count,e);t._autoMax=e}else delete t._autoMax;this.DataSetStr=JSON.stringify(t),this.coordsData=null,this.heatmap&&this.options.map&&this._configure()}else this._clear()}},{key:\"dataSetToCoord\",value:function(){if(this.coordsData=[],this.DataSetObj){var t=this.getMap().getProjection(),e=this.DataSetObj.data,i=e.length;i&&(this.localCenter=this._getCenterCoord(t,e[0]));for(var n=0;n<i;n+=1){var r=e[n],r=this.lnglatToCoords(t,r.lng,r.lat,r.count);this.coordsData.push(r)}}}},{key:\"lnglatToCoords\",value:function(t,e,i,n){i=t.project(e,i);return i.count=n,i}},{key:\"getDataSet\",value:function(){if(b.BuryPoint.add(this,\"getDataSet\"),this.isCanavs)return this.DataSetObj}},{key:\"addDataPoint\",value:function(t,e,i){var n,r;b.BuryPoint.add(this,\"addDataPoint\"),this.isCanavs&&(i||isNaN(i)||(i=1),n=this.getMap().getProjection(),this.DataSetObj?((r=JSON.parse(this.DataSetStr)).data.push({lng:t,lat:e,count:i}),this.DataSetObj=r):(this.DataSetObj={_autoMax:0},this.DataSetObj.data=[],this.DataSetObj.data.push({lng:t,lat:e,count:i})),null==this.DataSetObj.max&&(this.DataSetObj._autoMax=Math.max(this.DataSetObj._autoMax||0,i)),this.coordsData&&this.coordsData.push(this.lnglatToCoords(n,t,e,i)),this.DataSetStr=JSON.stringify(this.DataSetObj),this._configure())}},{key:\"removeFromMap\",value:function(t){this.options.map&&this._renderLayer&&(this._renderLayer.addTo(null),this._render(),this.options.map=null)}},{key:\"addToMap\",value:function(t){var e;t&&(this.options.map=t,this.config.container||(this.config.container=this.getMap().getContainer()),(e=(e=this._renderLayer)||(this._renderLayer=new y(this,this.options,this.config))).addTo(t),this.heatmap=e.heatmapBase)}},{key:\"setMap\",value:function(t){var e;b.BuryPoint.add(this,\"setMap\"),this.isCanavs&&(e=this.options.map,t?t!==e&&(e&&this.removeFromMap(e),this.addToMap(t),this.options.map=t):e&&(this.removeFromMap(e),this.options.map=null))}},{key:\"hide\",value:function(){b.BuryPoint.add(this,\"hide\"),this.isCanavs&&(this.options.visible=!1,this.emit(\"reConfigure\"),this._render())}},{key:\"show\",value:function(){b.BuryPoint.add(this,\"show\"),this.isCanavs&&(this.options.visible=!0,this.emit(\"reConfigure\"),this._isZoom()&&(this._wudi=!1,this._configure()))}},{key:\"getMap\",value:function(){if(b.BuryPoint.add(this,\"getMap\"),this.isCanavs)return this.options.map}},{key:\"setzIndex\",value:function(t){b.BuryPoint.add(this,\"setzIndex\"),this.options.zIndex=t,this._render()}},{key:\"getzIndex\",value:function(t){return b.BuryPoint.add(this,\"getzIndex\"),this.options.zIndex}},{key:\"_getCenterCoord\",value:function(t,e){e=t.project(e.lng,e.lat);return b.lcs.getLocalByCoord(e).center}}]),r}();window.AMap&&(window.AMap.HeatMap=x)}(window.AMap);\n");
_jsload_('AMap.IndexCluster.js',"!function(v){\"use strict\";var t=function(s){var t,i;function n(t,i,n){var r;return n=n||{},(r=s.call(this)||this).t=!1,r.i=t,r.s=n.gridSize||60,r.h=n.maxZoom||18,r.o=void 0===n.averageCenter||n.averageCenter,r.renderClusterMarker=n.renderClusterMarker||n.renderCluserMarker||null,r.renderMarker=n.renderMarker||null,r.customRender=n.customRender||null,r.u=n.clusterIndexSet||null,r.v=n.styles||r.l(),r.p=n.pointStyles||r.l(),r.g=n.clusterByZoomChange||!1,r.m=[],r.I=[],r.k=[],r.j=null,r.O=[],r.A=[],r.D={},r.M=r.N(i),t&&(r.C=r.i.getZoom(),r.K(),r.L(),r.J()),r}i=s,(t=n).prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i;var r=n.prototype;return r.setRenderMarkerStyle=function(t){this.renderMarker=t},r.setData=function(t){this.M=this.N(t),this.J()},r.addData=function(t){for(var i=this.N(t),n=i.length,r=0;r<n;r++){var s=i[r];this.M.push(s)}this.J()},r.getClustersCount=function(){return this.A.length},r.getMap=function(){return this.i},r.setMap=function(t){this.i!==t&&(this.S(),this.K(),t&&(this.i=t,this.L(),this.J()))},r.getGridSize=function(){return this.s},r.setGridSize=function(t){this.s=t,this.J()},r.getMaxZoom=function(){return this.h},r.setMaxZoom=function(t){this.h=t,this.J()},r.getUserDataLen=function(){return this.M.length},r.getStyles=function(){return this.v},r.setStyles=function(t){this.v=t,this.J()},r.isAverageCenter=function(){return this.o},r.setAverageCenter=function(t){this.o=t,this.J()},r.L=function(){this.i&&(this.i.on(\"zoomend\",this.X,this),this.i.on(\"zoomstart\",this.Y,this),this.g?this.i.on(\"zoomchange\",this.q,this):this.i.on(\"moveend\",this.moveEnd,this))},r.K=function(){this.i&&(this.i.off(\"zoomend\",this.X,this),this.i.on(\"zoomstart\",this.Y,this),this.g?this.i.off(\"zoomchange\",this.q,this):this.i.off(\"moveend\",this.moveEnd,this))},r.Y=function(){this.t=!0},r.X=function(){this.t=!1,this.J()},r.moveEnd=function(){this.t||this.J()},r.q=function(){this.J()},r.N=function(t){var i=[];if(!t)return i;for(var n=t.length,r=0;r<n;r++){var s=t[r];0===r&&void 0!==s.weight&&(this.o=!1),s.lnglat=this.B(s.lnglat),s.lnglat&&i.push(s)}return i},r.J=function(){var t;this.M.length;this.C=this.i.getZoom();this.C;(t=this.M).sort(function(t,i){return i.weight-t.weight});var i=this.F(t);if(this.customRender){var n=this.customRender.call(null,{clusterData:i});this.G(i,n)}else this.H(i)},r.G=function(t,i){var n=[],r=[],s=this.i.getBounds();if(s=this.P(s,5),!i.markers||i.markers.length<0)return!1;for(var h=i.markers.length,o=0;o<h;o++){var u=i.markers[o],e=u.getPosition(),a=this.i.lngLatToContainer(e);this.R(s,a)&&(\"AMap.LabelMarker\"===u.className?(this.j||(this.j=new v.LabelsLayer({}),this.i.add(this.j)),r.push(u)):n.push(u))}this.S(),0<n.length&&(this.i.add(n),this.I=n),0<r.length&&(this.j.add(r),this.k=r)},r.T=function(){for(var t=this.u,i=Object.keys(t),n=this.C,r=[],s=[],h=0;h<i.length;h++){var o=i[h],u=t[o],e=t[o].sub&&Object.keys(t[o].sub);if(n>=u.minZoom&&n<u.maxZoom&&r.push({mainKey:o}),e)for(var a=0;a<e.length;a++){var f=e[a],c=t[o].sub[f];n>=c.minZoom&&n<c.maxZoom&&s.unshift({mainKey:o,subKey:f})}}var v={U:r};return s&&0<s.length&&(v.sub=s),v},r.V=function(t,i){for(var n=t.length,r={},s=0;s<n;s++){var h=t[s],o=!1;if(i.sub)for(var u=0;u<i.sub.length;u++){var e=i.sub[u];if(h[e.mainKey]&&e.subKey&&h[e.mainKey]===e.subKey){var a=h[e.mainKey]+\"-\"+e.subKey;r[a]?r[a].data.push(h):(r[a]={},r[a].term=e,r[a].data=[h]),o=!0}}if(i.U&&!o)for(var f=0;f<i.U.length;f++){var c=i.U[f],v=h[c.mainKey];v&&(r[v]?r[v].data.push(h):(r[v]={},r[v].term=c,r[v].data=[h]))}}return r},r.F=function(t){this.C;var i=this.T(t);this.A={};return this.V(t,i)},r.W=function(){for(var t=this.M,i=[],n=0;n<t.length;n++){var r=t[n],s=r.lnglat,h=this.i.lngLatToContainer(s);r._amapMarker={posContainer:h,count:1,used:!1},i.push(r)}return i},r.S=function(){this.i&&this.i.remove(this.I),this.I=[],this.j&&this.j.remove(this.k)},r.Z=function(s){for(var h=this,t=s.length,o=[],i=function(t){var i=s[t],n=i.$().lnglat,r=i._();o.push(r),r.on(\"click\",function(t){h.emit(\"click\",{cluster:i,lnglat:n,target:h,marker:r})}),r.show()},n=0;n<t;n++)i(n);this.S(),this.i.add(o),this.I=o},r.tt=function(t,i){var n=document.createElement(\"div\");return n.style.width=i.size.width+\"px\",n.style.height=i.size.height+\"px\",n.innerHTML=t,n.style.backgroundColor=i.bgColor,n.style.textAlign=\"center\",n.style.lineHeight=i.size.height+\"px\",n.style.borderRadius=\"100%\",n.style.border=\"solid 1px \"+i.borderColor,n.style.color=i.textColor||\"#fff\",n.style.fontSize=i.textSize?i.textSize+\"px\":\"12px\",n.style.cursor=\"pointer\",{content:n,offset:i.offset||new v.Pixel(0,0)}},r.it=function(t){for(var i=0,n=t;0!==n;)n=parseInt(n/10,10),i+=1;return i=Math.min(i,5)-1},r.nt=function(t){var i=t.length,n=t[0].lnglat,r=this.getStyles()[this.it(i)],s=null;return this.renderClusterMarker||(s=this.tt(i,r)),{count:i,lnglat:n,rt:s,st:t}},r.H=function(u){var e=this,a=Object.keys(u),t=a.length,f=[],c=this.i.getBounds();c=this.P(c,5);for(var i=function(t){var i=a[t],n=u[i].data,r=(u[i].term,e.nt(n)),s=e.i.lngLatToContainer(r.lnglat);if(!e.R(c,s))return\"continue\";var h=new v.Marker({position:r.lnglat,anchor:\"top-left\"});h.on(\"click\",function(t){e.emit(\"click\",{clusterData:r.st,count:r.count,marker:h,index:u[i].term})});var o=e.renderClusterMarker;o?o.call(null,{clusterData:r.st,count:r.count,marker:h,index:u[i].term}):(h.setContent(r.rt.content),h.setOffset(r.rt.offset)),f.push(h)},n=0;n<t;n++)i(n);this.S(),this.i.add(f),this.I=f},r.P=function(t,i){var n=this.i.lngLatToContainer(t.getNorthEast()),r=this.i.lngLatToContainer(t.getSouthWest()),s=[parseInt(n.x),parseInt(r.x)],h=[parseInt(n.y),parseInt(r.y)];s.sort(function(t,i){return t-i}),h.sort(function(t,i){return t-i});var o=parseInt(this.s*i);return{ht:parseInt(s[0]-o),ot:parseInt(h[1]+o),ut:parseInt(s[1]+o),et:parseInt(h[0]-o)}},r.R=function(t,i){if(!(t&&i&&i.x&&i.y))return!1;var n=t.ht,r=t.ut,s=t.ot,h=t.et;return i.x<r&&i.x>n&&i.y>h&&i.y<s},r.B=function(t){if(!t)return!1;if(t.className&&\"AMap.LngLat\"===t.className)return t;if(Array.isArray(t)&&2===t.length&&(t={lng:Number(t[0]),lat:Number(t[1])}),!t.lng||!t.lat)return!1;var i=new v.LngLat(t.lng,t.lat);return!!i.lat&&(!!i.lng&&i)},r.l=function(){for(var t=[53,56,66,78,90],i=[\"rgba(158,202,225,.9)\",\"rgba(107,174,214,.9)\",\"rgba(66,146,198,.9)\",\"rgba(33,113,181,.9)\",\"rgba(8,81,156,.9)\"],n=[\"rgba(158,202,225,1)\",\"rgba(107,174,214,1)\",\"rgba(66,146,198,1)\",\"rgba(33,113,181,1)\",\"rgba(8,81,156,1)\"],r=[],s=0;s<5;s+=1)r.push({bgColor:i[s],borderColor:n[s],size:new v.Size(t[s],t[s]),offset:new v.Pixel(-t[s]/2,-t[s]/2,!0)});return r},r.at=function(t){var i,n=t.constructor===Array?[]:{};if(\"object\"==typeof t){if(window.JSON)i=JSON.stringify(t),n=JSON.parse(i);else for(var r in t)n[r]=\"object\"==typeof t[r]?cloneObj(t[r]):t[r];return n}},n}(v.Event);v.IndexCluster=t}(window.AMap);\n");
_jsload_('AMap.IndoorMapFloorBar.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Promise=\"object\"==typeof global&&global&&global.Object===Object&&global,DataView=\"object\"==typeof self&&self&&self.Object===Object&&self,canceledWorkerFetch=Promise||DataView||Function(\"return this\")(),IndoorMapFloorBar=canceledWorkerFetch.Symbol,WeakMap=Object.prototype,hasOwnProperty=WeakMap.hasOwnProperty,nativeObjectToString=WeakMap.toString,symToStringTag=IndoorMapFloorBar?IndoorMapFloorBar.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=IndoorMapFloorBar?IndoorMapFloorBar.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}function isSymbol(value){return\"symbol\"==typeof value||isObjectLike(value)&&\"[object Symbol]\"==baseGetTag(value)}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}var isArray=Array.isArray,getTag=IndoorMapFloorBar?IndoorMapFloorBar.prototype:void 0,symbolToString=getTag?getTag.toString:void 0;function baseToString(value){if(\"string\"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+\"\";if(isSymbol(value))return symbolToString?symbolToString.call(value):\"\";var result=value+\"\";return\"0\"==result&&1/value==-1/0?\"-0\":result}function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var Set=canceledWorkerFetch[\"__core-js_shared__\"],maskSrcKey=(DataView=/[^.]+$/.exec(Set&&Set.keys&&Set.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+DataView:\"\";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,WeakMap=Function.prototype,getTag=Object.prototype,Set=WeakMap.toString,DataView=getTag.hasOwnProperty,reIsNative=RegExp(\"^\"+Set.call(DataView).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,value){value=function(object,key){return null==object?void 0:object[key]}(object,value);return baseIsNative(value)?value:void 0}WeakMap=getNative(canceledWorkerFetch,\"WeakMap\");function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function eq(value,other){return value===other||value!=value&&other!=other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$3=Object.prototype;function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var getTag=Object.prototype,hasOwnProperty$2=getTag.hasOwnProperty,propertyIsEnumerable=getTag.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var Set=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,DataView=Set&&\"object\"==typeof module&&module&&!module.nodeType&&module,getTag=DataView&&DataView.exports===Set?canceledWorkerFetch.Buffer:void 0,isBuffer=(getTag?getTag.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var func,DataView=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=DataView&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===DataView&&Promise.process,Set=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),getTag=Set&&Set.isTypedArray,isTypedArray=getTag?(func=getTag,function(value){return func(value)}):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$3=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$3.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$4=Object.prototype.hasOwnProperty;function baseKeys(object){if(Ctor=(value=object)&&value.constructor,value!==(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$3))return nativeKeys(object);var value,Ctor,key,result=[];for(key in Object(object))hasOwnProperty$4.call(object,key)&&\"constructor\"!=key&&result.push(key);return result}function keys(object){return(isArrayLike(object)?arrayLikeKeys:baseKeys)(object)}var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(value,object){if(!isArray(value)){var type=typeof value;return\"number\"==type||\"symbol\"==type||\"boolean\"==type||null==value||isSymbol(value)||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}}var nativeCreate=getNative(Object,\"create\");var hasOwnProperty$5=Object.prototype.hasOwnProperty;var hasOwnProperty$6=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return\"__lodash_hash_undefined__\"===result?void 0:result}return hasOwnProperty$5.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$6.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?\"__lodash_hash_undefined__\":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(canceledWorkerFetch,\"Map\");function getMapData(type,key){var value,data=type.__data__;return(\"string\"==(type=typeof(value=key))||\"number\"==type||\"symbol\"==type||\"boolean\"==type?\"__proto__\"!==value:null===value)?data[\"string\"==typeof key?\"string\":\"hash\"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function memoize(func,resolver){if(\"function\"!=typeof func||null!=resolver&&\"function\"!=typeof resolver)throw new TypeError(\"Expected a function\");function memoized(){var result=arguments,key=resolver?resolver.apply(this,result):result[0],cache=memoized.cache;return cache.has(key)?cache.get(key):(result=func.apply(this,result),memoized.cache=cache.set(key,result)||cache,result)}return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;var result,cache,rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,reEscapeChar=/\\\\(\\\\)?/g,stringToPath=(cache=(result=memoize(result=function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(\"\"),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,\"$1\"):number||match)}),result},function(key){return 500===cache.size&&cache.clear(),key})).cache,result);function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(function(value){return null==value?\"\":baseToString(value)}(value))}function toKey(value){if(\"string\"==typeof value||isSymbol(value))return value;var result=value+\"\";return\"0\"==result&&1/value==-1/0?\"-0\":result}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:function(){return[]};function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(canceledWorkerFetch,\"DataView\"),Promise=getNative(canceledWorkerFetch,\"Promise\"),Set=getNative(canceledWorkerFetch,\"Set\"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag,getTag$1=getTag=DataView&&\"[object DataView]\"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&\"[object Map]\"!=getTag(new Map)||Promise&&\"[object Promise]\"!=getTag(Promise.resolve())||Set&&\"[object Set]\"!=getTag(new Set)||WeakMap&&\"[object WeakMap]\"!=getTag(new WeakMap)?function(ctorString){var result=baseGetTag(ctorString),ctorString=\"[object Object]\"==result?ctorString.constructor:void 0,ctorString=ctorString?toSource(ctorString):\"\";if(ctorString)switch(ctorString){case dataViewCtorString:return\"[object DataView]\";case mapCtorString:return\"[object Map]\";case promiseCtorString:return\"[object Promise]\";case setCtorString:return\"[object Set]\";case weakMapCtorString:return\"[object WeakMap]\"}return result}:getTag,Uint8Array$1=canceledWorkerFetch.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,\"__lodash_hash_undefined__\"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var canceledWorkerFetch=IndoorMapFloorBar?IndoorMapFloorBar.prototype:void 0,symbolValueOf=canceledWorkerFetch?canceledWorkerFetch.valueOf:void 0;var hasOwnProperty$7=Object.prototype.hasOwnProperty;var hasOwnProperty$8=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsWrapped=isArray(other),objTag=objIsArr?\"[object Array]\":getTag$1(object),isSameTag=othIsWrapped?\"[object Array]\":getTag$1(other),objIsWrapped=\"[object Object]\"==(objTag=\"[object Arguments]\"==objTag?\"[object Object]\":objTag),othIsWrapped=\"[object Object]\"==(isSameTag=\"[object Arguments]\"==isSameTag?\"[object Object]\":isSameTag),isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsWrapped=!(objIsArr=!0)}if(isSameTag&&!objIsWrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case\"[object DataView]\":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case\"[object ArrayBuffer]\":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array$1(object),new Uint8Array$1(other))?!0:!1;case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return eq(+object,+other);case\"[object Error]\":return object.name==other.name&&object.message==other.message;case\"[object RegExp]\":case\"[object String]\":return object==other+\"\";case\"[object Map]\":var result=mapToArray;case\"[object Set]\":result=result||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case\"[object Symbol]\":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){objIsWrapped=objIsWrapped&&hasOwnProperty$8.call(object,\"__wrapped__\"),othIsWrapped=othIsWrapped&&hasOwnProperty$8.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return!!isSameTag&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||\"constructor\"==key}return!result||skipCtor||(objCtor=object.constructor)!=(othCtor=other.constructor)&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}function baseMatches(source){var matchData=function(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||function(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var result,stack=new Stack;if(!(void 0===(result=customizer?customizer(objValue,srcValue,key,object,source,stack):result)?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}(object,source,matchData)}}function baseHasIn(object,key){return null!=object&&key in Object(object)}function hasIn(object,path){return null!=object&&function(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=function(object,result,defaultValue){return void 0===(result=null==object?void 0:baseGet(object,result))?defaultValue:result}(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function property(path){return isKey(path)?(key=toKey(path),function(object){return null==object?void 0:object[key]}):function(path){return function(object){return baseGet(object,path)}}(path);var key}var fromRight,baseFor=function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object};var baseEach=function(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}(function(object,iteratee){return object&&baseFor(object,iteratee,keys)});function forEach(collection,value){return(isArray(collection)?arrayEach:baseEach)(collection,\"function\"==typeof(value=value)?value:identity)}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function map(collection,value){return(isArray(collection)?arrayMap:baseMap)(collection,\"function\"==typeof(value=value)?value:null==value?identity:\"object\"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value))}function extend(dest){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&(\"function\"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target);return dest}IndoorMapFloorBar=function(){function Event(){this._events={}}return Event.addListener=function(intance,eventName,cb){intance.on(eventName,cb)},Event.trigger=function(intance,eventName,data){intance.emit(eventName,data)},Event.clearListeners=function(instance,eventName){instance.clearEvents(eventName)},Event.addDomListener=function(intance,eventName,cb){intance.addEventListener(eventName,cb)},Event.extend=function(types,from,target){forEach(types=\"string\"==typeof types?[types]:types,function(type){from.on(type,function(data){target.emit(type,data)})})},Event.prototype.on=function(type,fn,context,once){void 0===context&&(context=this),void 0===once&&(once=!1);for(var _i=0,types_1=Array.isArray(type)?type:[type];_i<types_1.length;_i++){var curType=types_1[_i];this._on(curType,fn,context,once)}return this},Event.prototype.off=function(type,fn,context){void 0===context&&(context=this);var events=this._events;if(type in events)for(var i=0;i<events[type].length;i+=1)if(events[type][i].fn===fn&&events[type][i].context===context)return events[type].splice(i,1),this;return this},Event.prototype.hasEvents=function(type,fn,context){void 0===context&&(context=this);var events=this._events;if(type&&fn&&type in events)for(var i=0;i<events[type].length;i+=1)if(events[type][i].fn===fn&&events[type][i].context===context)return!0;return!1},Event.prototype.clearEvents=function(type){return type?this._events[type]&&delete this._events[type]:this._events={},this},Event.prototype.emit=function(type,data){if(void 0===data&&(data={}),!(type in this._events))return this;for(var event=__assign(__assign({},data),{type:type}),listeners=this._events[type],i=0,len=listeners.length;i<len;i+=1){var cb=listeners[i];cb.fn&&(cb.fn.call(cb.context,event),cb.once&&(this._events[type].splice(i,1),--i,--len))}return 0===listeners.length&&delete this._events[type],this},Event.prototype.getEvents=function(){return this._events},Event.prototype._on=function(type,fn,context,once){if(void 0===once&&(once=!1),this.hasEvents(type,fn,context=void 0===context?this:context))return this;var events=this._events;return events[type]=events[type]||[],events[type].push({fn:fn,context:context||this,once:once}),this},Event}();var Browser=function(localStore){var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if(\"object\"==typeof WebAssembly&&\"function\"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=(any3d=function(key){return-1!==ua.indexOf(key)})(\"macintosh\"),iPad=any3d(\"ipad;\")||any3d(\"ipad \"),viewportScale=any3d(\"ipod touch;\"),iPhone=any3d(\"iphone;\")||any3d(\"iphone \"),ios=iPhone||iPad||viewportScale,safari=(mac||ios)&&any3d(\"safari\")&&any3d(\"version/\"),ie3d=any3d(\"macwechat\"),isSvg=any3d(\"windowswechat\"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:ie3d,windowsWechat:isSvg,amapRunTime:amapRunTime};if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var win_1=window,baseRender=document,vdataVersion=baseRender.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),ie=\"ActiveXObject\"in win_1,retina=0!=window.detectRetina&&(\"devicePixelRatio\"in win_1&&1<win_1.devicePixelRatio||ie&&\"matchMedia\"in win_1&&win_1.matchMedia(\"(min-resolution:144dpi)\")&&win_1.matchMedia(\"(min-resolution:144dpi)\").matches),windows=any3d(\"windows nt\"),movingDraw=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),any3d(\"windows nt 10\"),any3d(\"windows phone\")),mb2345Browser=any3d(\"Mb2345Browser\"),ios10=(ios&&ua.search(/ os [456]_/),ios&&ua.search(/ os [4-8]_/),ios&&ua.search(/ os [78]_/),ios&&any3d(\"os 8_\"),ios&&any3d(\"os 10_\")),android_1=any3d(\"android\"),enableVector=0;android_1&&(enableVector=parseInt(ua.split(\"android\")[1])||0);var android23=android_1&&enableVector<4,plat_1=(android_1&&5<=enableVector||ua.search(/android 4.4/),android_1?\"android\":ios?\"ios\":windows?\"windows\":mac?\"mac\":\"other\"),ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!baseRender.querySelector,ielt9=ie&&!baseRender.addEventListener,ie9=ie&&any3d(\"msie 9\"),ie10=ie&&any3d(\"msie 10\"),ie11=ie&&any3d(\"rv:11\"),ielt10=ielt9||ie9,edge=any3d(\"edge\"),uc=(any3d(\"qtweb\"),any3d(\"ucbrowser\")),gaodeCoords=any3d(\"alipay\")||android_1&&uc,wechat=(any3d(\"miuibrowser\"),any3d(\"micromessenger\")),opera3d=any3d(\"dingtalk\"),qq=any3d(\"mqqbrowser\"),baidu=any3d(\"baidubrowser\"),byWebgl=any3d(\"crios/\"),chrome=any3d(\"chrome/\"),webkit_1=!((chrome||byWebgl)&&any3d(\"chromium\"))&&(chrome&&30<parseInt(ua.split(\"chrome/\")[1])||byWebgl&&30<parseInt(ua.split(\"crios/\")[1])),firefox=any3d(\"firefox\"),webkit3d=firefox&&27<parseInt(ua.split(\"firefox/\")[1]),gecko3d=safari&&7<parseInt(ua.split(\"version/\")[1]),mobile_1=(ios&&any3d(\"aliapp\"),android_1||ios||movingDraw||any3d(\"mobile\")),checkWebgl=\"ontouchstart\"in baseRender,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!checkWebgl&&(pointer||msPointer),touch_1=checkWebgl||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName(\"meta\")}catch(e){return 1}for(var i=metas.length-1;0<=i;--i)if(\"viewport\"===metas[i].name){var content=metas[i].content,initial_scale=void 0,minimum_scale=void 0,maximum_scale=void 0;return-1!==content.indexOf(\"initial-scale\")&&(initial_scale=parseFloat(content.split(\"initial-scale=\")[1])),minimum_scale=-1!==content.indexOf(\"minimum-scale\")?parseFloat(content.split(\"minimum-scale=\")[1]):0,maximum_scale=-1!==content.indexOf(\"maximum-scale\")?parseFloat(content.split(\"maximum-scale=\")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log(\"viewport参数不合法\"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log(\"viewport参数不合法\"),null)}}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&\"transition\"in vdataVersion.style,isSvg=!!baseRender.createElementNS&&!!baseRender.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,canvas_1=baseRender.createElement(\"canvas\"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),enableVector=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!webkit_1)&&window.Worker&&enableVector&&enableVector.createObjectURL&&window.Blob,webglContextName_1=\"\",graphicCard_1=\"\",maxRenderSize_1=0,byWebgl=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:byWebgl,depth:!0,stencil:!0}),checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var contextName=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var graphicCardShort=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!graphicCardShort)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,graphicCardShort[0],graphicCardShort[1]),safari&&\"mac\"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));graphicCardShort=Math.max(screen.width,screen.height);if(needFitRetina_1&&(graphicCardShort*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<graphicCardShort)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCardShort=function(graphicVersion){if(!graphicVersion)return null;var forShort=null,radeonIndex=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/);if(0<=(graphicVersion=(graphicVersion=radeonIndex?(graphicVersion=radeonIndex[1]).replace(/\\s*direct3d.*$/,\"\"):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\")).indexOf(\"intel\")){forShort=[\"Intel\"];return 0<=graphicVersion.indexOf(\"mobile\")&&forShort.push(\"Mobile\"),(0<=graphicVersion.indexOf(\"gma\")||0<=graphicVersion.indexOf(\"graphics media accelerator\"))&&forShort.push(\"GMA\"),0<=graphicVersion.indexOf(\"haswell\")?forShort.push(\"Haswell\"):0<=graphicVersion.indexOf(\"ivy\")?forShort.push(\"HD 4000\"):0<=graphicVersion.indexOf(\"sandy\")?forShort.push(\"HD 3000\"):0<=graphicVersion.indexOf(\"ironlake\")?forShort.push(\"HD\"):(0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase())),forShort=forShort.join(\" \")}if(0<=graphicVersion.indexOf(\"nvidia\")||0<=graphicVersion.indexOf(\"quadro\")||0<=graphicVersion.indexOf(\"geforce\")||0<=graphicVersion.indexOf(\"nvs\"))return forShort=[\"nVidia\"],0<=graphicVersion.indexOf(\"geforce\")&&forShort.push(\"geForce\"),0<=graphicVersion.indexOf(\"quadro\")&&forShort.push(\"Quadro\"),0<=graphicVersion.indexOf(\"nvs\")&&forShort.push(\"NVS\"),graphicVersion.match(/\\bion\\b/)&&forShort.push(\"ION\"),graphicVersion.match(/gtx\\b/)?forShort.push(\"GTX\"):graphicVersion.match(/gts\\b/)?forShort.push(\"GTS\"):graphicVersion.match(/gt\\b/)?forShort.push(\"GT\"):graphicVersion.match(/gs\\b/)?forShort.push(\"GS\"):graphicVersion.match(/ge\\b/)?forShort.push(\"GE\"):graphicVersion.match(/fx\\b/)&&forShort.push(\"FX\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"GS\",\"\")),0<=graphicVersion.indexOf(\"titan\")?forShort.push(\"TITAN\"):0<=graphicVersion.indexOf(\"ti\")&&forShort.push(\"Ti\"),forShort=forShort.join(\" \");if(0<=graphicVersion.indexOf(\"amd\")||0<=graphicVersion.indexOf(\"ati\")||0<=graphicVersion.indexOf(\"radeon\")||0<=graphicVersion.indexOf(\"firegl\")||0<=graphicVersion.indexOf(\"firepro\")){forShort=[\"AMD\"],0<=graphicVersion.indexOf(\"mobil\")&&forShort.push(\"Mobility\");var number,radeonIndex=graphicVersion.indexOf(\"radeon\");return 0<=radeonIndex&&forShort.push(\"Radeon\"),0<=graphicVersion.indexOf(\"firepro\")?forShort.push(\"FirePro\"):0<=graphicVersion.indexOf(\"firegl\")&&forShort.push(\"FireGL\"),0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=(graphicVersion=0<=radeonIndex?graphicVersion.substring(radeonIndex):graphicVersion).match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"HD\",\"\")),forShort=forShort.join(\" \")}return graphicVersion.substring(0,100)}(graphicCard_1=gl.getExtension(\"WEBGL_debug_renderer_info\")?gl.getParameter(37446):null);if(graphicCardShort){if(-1<graphicCardShort.indexOf(\"google swiftshader\"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(graphicCardShort))return!1}return webglContextName_1=contextName[i],!0}}return!1},baseRender=checkWebgl(),enableVector=void 0===localStore[8]||localStore[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&baseRender&&(window.forceWebGL||(webkit_1||webkit3d||gecko3d||edge||wechat||opera3d)&&\"other\"!=plat_1),baseRender=window.forceWebGLBaseRender||byWebgl?\"w\":\"d\",webkit_1=any3d(\"webkit\"),webkit3d=\"WebKitCSSMatrix\"in win_1&&\"m11\"in new window.WebKitCSSMatrix,gecko3d=\"MozPerspective\"in vdataVersion.style,opera3d=\"OTransition\"in vdataVersion.style,any3d=ie3d||webkit3d||gecko3d||opera3d,vdataVersion=void 0!==localStore[12]?localStore[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(chromeversion=(new Date).getTime()+\"\",win_1.localStorage.setItem(\"_test\",chromeversion),win_1.localStorage.getItem(\"_test\")!==chromeversion&&(localStore=!1),win_1.localStorage.removeItem(\"_test\"))}catch(e){localStore=!1}var chromeversion=parseInt(ua.split(\"chrome/\")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:ios,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=chromeversion,chrome64:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:byWebgl,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?baseRender:\"d\",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:checkWebgl};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}(\"undefined\"==typeof config?[]:config);\"undefined\"!=typeof createImageBitmap&&\"undefined\"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);canceledWorkerFetch=Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));Browser.canceledWorkerFetch=canceledWorkerFetch,Browser.amapRunTime={workerTime:{}};var checked,_docIsLtr,DomUtil={getViewport:function(obj){return obj?[obj.clientWidth,obj.clientHeight]:[0,0]},getStyle:function(obj,key){var css,value=obj.style[key];return\"auto\"===(value=!((value=!((value=(!value||\"auto\"===value)&&document.defaultView?(css=document.defaultView.getComputedStyle(obj,null))?css[key]:null:value)&&\"auto\"!==value||\"height\"!==key)?obj.clientHeight+\"px\":value)&&\"auto\"!==value||\"width\"!==key)?obj.clientWidth+\"px\":value)?null:value},getViewportOffset:function(element){var pos,top=0,left=0,el=element,docBody=document.body,docEl=document.documentElement;do{if(top+=el.offsetTop||0,left+=el.offsetLeft||0,top+=parseInt(DomUtil.getStyle(el,\"borderTopWidth\"),10)||0,left+=parseInt(DomUtil.getStyle(el,\"borderLeftWidth\"),10)||0,pos=DomUtil.getStyle(el,\"position\"),el.offsetParent===docBody&&\"absolute\"===pos)break;if(\"fixed\"===pos){top+=docBody.scrollTop||docEl.scrollTop||0,left+=docBody.scrollLeft||docEl.scrollLeft||0;break}}while(el=el.offsetParent);for(el=element;el!==docBody&&(top-=el.scrollTop||0,left-=el.scrollLeft||0,!DomUtil.documentIsLtr()&&Browser.webkit&&(left+=el.scrollWidth-el.clientWidth),el=el.parentNode););return[left,top]},documentIsLtr:function(){return checked||(_docIsLtr=\"ltr\"===DomUtil.getStyle(document.body,\"direction\"),checked=!0),_docIsLtr},create:function(el,container,className,firstDom){el=document.createElement(el);return className&&(el.className=className),container&&(firstDom&&\"before\"===firstDom?(firstDom=container.firstChild,container.insertBefore(el,firstDom)):container.appendChild(el)),el},toggleClass:function(el,name,on){on?this.addClass(el,name):this.removeClass(el,name)},hasClass:function(el,name){if(el&&name)return 0<el.className.length&&new RegExp(\"(^|\\\\s)\"+name+\"(\\\\s|$)\").test(el.className)},addClass:function(el,name){el&&name&&(el.classList&&el.classList.add?el.classList.add(name):this.hasClass(el,name)||(el.className+=(el.className?\" \":\"\")+name))},setClass:function(el,name){el&&(el.className=name||\"\")},removeClass:function(el,name){el&&name&&(el.classList&&el.classList.remove?el.classList.remove(name):el.className=el.className.replace(/(\\S+)\\s*/g,function(w,match){return match===name?\"\":w}).replace(/(^\\s+|\\s+$)/,\"\"))},watchSize:function(element,listener,map){var iframe=document.createElement(\"iframe\");iframe.style.cssText=\"width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;\",iframe.onload=function(){iframe&&(iframe.contentWindow.onresize=sizeChange)},element.appendChild(iframe),iframe.src=\"about:blank\";var oldWidth=0,oldHeight=0;function sizeChange(){map._boundingClientRect=element.getBoundingClientRect(),map._clientPos=[element.clientLeft,element.clientTop];var width=element.offsetWidth,height=element.offsetHeight;width===oldWidth&&height===oldHeight||(listener(width,height),oldWidth=width,oldHeight=height)}return sizeChange(),map.resize=sizeChange,window.onscroll=sizeChange,function(){var _a;map.resize&&(map.resize=null),window.onscroll&&(window.onscroll=null),iframe.contentWindow&&(iframe.contentWindow.onresize=null,iframe.contentWindow.document.write(\"\"),iframe.parentNode.removeChild(iframe),null!==(_a=iframe.contentWindow)&&void 0!==_a&&_a.close())}},watchSize2:function(element,listener,map){var expand=document.createElement(\"_\");expand.className=\"expand\";var shrink=expand.appendChild(document.createElement(\"_\"));shrink.className=\"shrink\";var expandChild=expand.appendChild(document.createElement(\"_\"));expandChild.className=\"expandChild\";var lastWidth,lastHeight,shrinkChild=shrink.appendChild(document.createElement(\"_\"));shrinkChild.className=\"shrinkChild\";return shrink.style.cssText=expand.style.cssText=\"height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1\",shrinkChild.style.cssText=expandChild.style.cssText=\"display:block;height:100%;transition:0s;width:100%\",shrinkChild.style.width=shrinkChild.style.height=\"200%\",element.appendChild(expand),test(),function(){unbind(),element.removeChild(expand)};function test(){unbind(),map._boundingClientRect=element.getBoundingClientRect(),map._clientPos=[element.clientLeft,element.clientTop];var width=element.offsetWidth,height=element.offsetHeight;width===lastWidth&&height===lastHeight||(lastWidth=width,lastHeight=height,expandChild.style.width=2*width+\"px\",expandChild.style.height=2*height+\"px\",expand.scrollLeft=expand.scrollWidth,expand.scrollTop=expand.scrollHeight,shrink.scrollLeft=shrink.scrollWidth,shrink.scrollTop=shrink.scrollHeight,listener(width,height)),shrink.addEventListener(\"scroll\",test),expand.addEventListener(\"scroll\",test)}function unbind(){shrink.removeEventListener(\"scroll\",test),expand.removeEventListener(\"scroll\",test)}},mousePos:function(rect,t,map){rect&&(map._boundingClientRect=rect.getBoundingClientRect(),map._clientPos=[rect.clientLeft,rect.clientTop]);rect=map._boundingClientRect;return[(t=t.touches&&t.changedTouches?0<t.touches.length?t.touches[0]:t.changedTouches[t.changedTouches.length-1]:t).clientX-rect.left-map._clientPos[0],t.clientY-rect.top-map._clientPos[1]]},remove:function(el){el&&el.parentNode&&el.parentNode.removeChild(el)},empty:function(el){for(;el.firstChild;)el.removeChild(el.firstChild)},closest:function(parent,className){if(parent){if(this.hasClass(parent,className))return parent;parent=parent.parentElement;return parent?DomUtil.closest(parent,className):null}return null},fillText:function(el,text){if(el)return void 0!==el.textContent?el.textContent=text:void 0!==el.innerText?el.innerText=text:el.innerHTML=text,el},testProp:function(props){for(var style=document.documentElement.style,i=0;i<props.length;i+=1)if(props[i]in style)return props[i];return!1},rotate:function(t,sinDeg,center){var cache,cosDeg=DomUtil.TRANSFORM;center=center||{x:t.clientWidth/2,y:t.clientHeight/2},cosDeg?(cache=\"\",t.style[cosDeg]=cache+=\" rotate(\"+sinDeg+\"deg)\",t.style[DomUtil.trans[cosDeg]+\"-origin\"]=center.x+\"px \"+center.y+\"px\"):(cosDeg=Math.cos(sinDeg*Math.PI/180),sinDeg=Math.sin(sinDeg*Math.PI/180),t.style.filter=\"progid:DXImageTransform.Microsoft.Matrix()\",0<t.filters.length&&((t=t.filters.item(0)).Dx=-center.x*cosDeg+center.y*sinDeg+center.x,t.Dy=-center.x*sinDeg-center.y*cosDeg+center.y,t.M11=t.M22=cosDeg,t.M12=-(t.M21=sinDeg)))},setCss:function(obj,css){obj=obj instanceof Array?obj:[obj];for(var i=0;i<obj.length;i+=1)for(var j in css)css.hasOwnProperty(j)&&(obj[i].style[j]=css[j]);return this},setOpacity:function(el,finalOpacity){el.style&&(\"opacity\"in el.style?el.style.opacity=\"\"+finalOpacity:\"filter\"in el.style&&(finalOpacity=Math.round(100*finalOpacity),el.style.filter=\"\",100!==finalOpacity&&(el.style.filter=\" progid:DXImageTransform.Microsoft.Alpha(opacity=\"+finalOpacity+\")\")))},trans:{},TRANSFORM:_docIsLtr=checked=!1};DomUtil.TRANSFORM=DomUtil.testProp([\"WebkitTransform\",\"OTransform\",\"MozTransform\",\"msTransform\",\"transform\"]),DomUtil.trans={transform:\"transform\",WebkitTransform:\"-webkit-transform\",OTransform:\"-o-transform\",MozTransform:\"-moz-transform\",msTransform:\"-ms-transform\"};var IndoorMapFloorBar=function(_super){function Control(opts){var _this=_super.call(this)||this;return _this._visible=!0,_this._config=opts,_this._visible=void 0===opts.visible||opts.visible,_this}return __extends(Control,_super),Control.prototype.addTo=function(map){this.map=map,this.map.controls.push(this),map.getControlContainer().appendChild(this._container),map.on(\"beforeDestroy\",this.remove.bind(this))},Control.prototype.removeFrom=function(map){map?(map.off(\"beforeDestroy\",this.remove.bind(this)),map.getControlContainer().removeChild(this._container),delete this.map):this.map&&(this.map.off(\"beforeDestroy\",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Control.prototype.remove=function(){this.map&&(this.map.off(\"beforeDestroy\",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Control.prototype.show=function(){this._container.style.display=\"block\",this.emit(\"show\"),this._visible=!0},Control.prototype.hide=function(){this._container.style.display=\"none\",this.emit(\"hide\"),this._visible=!1},Control.prototype.initContainer=function(){this._className?(this._container=DomUtil.create(\"div\",null,\"amap-control amap-\"+this._className),void 0===this._config.visible||this._config.visible||(this._container.style.display=\"none\")):this._container=DomUtil.create(\"div\",null,\"amap-control\"),this._setPosition()},Control.prototype._setPosition=function(){var l=0,t=0,r=0,b=0;switch(this._config.offset&&0<this._config.offset.length&&(l=this._config.offset[0]+l,t=this._config.offset[1]+t,r=this._config.offset[0]+r,b=this._config.offset[1]+b),l+=\"px\",t+=\"px\",r+=\"px\",b+=\"px\",this._config.position){case\"LT\":this._container.style.top=t,this._container.style.left=l,this._container.style.bottom=\"\",this._container.style.right=\"\";break;case\"RT\":this._container.style.top=t,this._container.style.right=r,this._container.style.bottom=\"\",this._container.style.left=\"\";break;case\"LB\":this._container.style.bottom=b,this._container.style.left=l,this._container.style.top=\"\",this._container.style.right=\"\";break;case\"RB\":this._container.style.bottom=b,this._container.style.right=r,this._container.style.top=\"\",this._container.style.left=\"\";break;default:this._container.style.top=this._config.position.top||\"\",this._container.style.left=this._config.position.left||\"\",this._container.style.right=this._config.position.right||\"\",this._container.style.bottom=this._config.position.bottom||\"\"}},Control}(IndoorMapFloorBar),DomUtil$1=AMap.DomUtil,Pixel=AMap.Pixel,Util=AMap.Util,Support=AMap.Browser,DomEvent={on:function(target,type,fn,context){var key=\"event_\"+Util.stamp(target)+\"_\"+type+\"_\"+Util.stamp(fn)+\"_\"+Util.stamp(context||target);if(target[key])return this;function handler(evt){return(evt=evt||window.event).target||(evt.target=evt.srcElement),fn.call(context||target,evt,oriType)}var oriType=type;return\"addEventListener\"in target?target.addEventListener(type,handler,!1):\"attachEvent\"in target?target.attachEvent(\"on\"+type,handler):target[\"on\"+type]=handler,target[key]=handler,this},once:function(target,type,fn,context){var that=this;this.on(target,type,function once(evt){that.off(target,type,once,context);evt=evt||window.event;return fn.call(context||target,evt,type)},context)},off:function(target,type,key,handler){key=\"event_\"+Util.stamp(target)+\"_\"+type+\"_\"+Util.stamp(key)+\"_\"+Util.stamp(handler||target),handler=target[key];return\"removeEventListener\"in target?target.removeEventListener(type,handler,!1):\"detachEvent\"in target&&-1===type.indexOf(\"touch\")?handler&&target.detachEvent(\"on\"+type,handler):target[\"on\"+type]=null,delete target[key],this},clear:function(target,type){void 0===type&&(type=\"\");var i,keyPre=\"event_\"+Util.stamp(target)+\"_\"+(type?type+\"_\":\"\");for(i in target)Object.prototype.hasOwnProperty.call(target,i)&&-1!==i.indexOf(keyPre)&&(\"removeEventListener\"in target?target.removeEventListener(type,target[i],!1):\"detachEvent\"in target&&-1===type.indexOf(\"touch\")?target[i]&&target.detachEvent(\"on\"+type,target[i]):target[\"on\"+type]=null,delete target[i])},simulate:function(type,e){var simulate=document.createEvent(\"MouseEvents\");simulate.initMouseEvent(type,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(simulate)},addStopFlag:function(e){e._from=\"info\"},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},stopAllEvent:function(toStop){var addStopFlag=DomEvent.addStopFlag;Support.mobile||(DomEvent.on(toStop,\"mousedown\",addStopFlag,this),DomEvent.on(toStop,\"mouseup\",addStopFlag,this),DomEvent.on(toStop,\"mousemove\",addStopFlag,this),DomEvent.on(toStop,\"mousewheel\",addStopFlag,this))},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return DomEvent.preventDefault(e).stopPropagation(e)},setCachedBoundingClientRect:function(container){return!(!container||!container.getBoundingClientRect)&&(container.__cachedBoundingClientRect=container.getBoundingClientRect(),container.__cachedClientTopLeft=[container.clientLeft,container.clientTop],!0)},unsetCachedBoundingClientRect:function(container){container.__cachedBoundingClientRect&&(container.__cachedBoundingClientRect=null,container.__cachedClientTopLeft=null)},fastGetMousePosition:function(e,clientTopLeft){var rect=clientTopLeft.__cachedBoundingClientRect||clientTopLeft.getBoundingClientRect(),clientTopLeft=clientTopLeft.__cachedClientTopLeft||[clientTopLeft.clientLeft,clientTopLeft.clientTop];return new Pixel(e.clientX-rect.left-clientTopLeft[0],e.clientY-rect.top-clientTopLeft[1])},getMousePosition:function(e,container){if(container&&container.getBoundingClientRect)return this.fastGetMousePosition(e,container);var bd=document.body,tmp=document.documentElement,pos=e.clientX+(bd.scrollLeft||tmp.scrollLeft),tmp=e.clientY+(bd.scrollTop||tmp.scrollTop),pos=new Pixel(pos,tmp),tmp=DomUtil$1.getViewportOffset(container);return container?pos.subtract(new Pixel(tmp[0],tmp[1])):pos},isLeftButton:function(e){return 1===e.which||0===e.button||1===e.button}},defultOpts={position:{top:\"50%\",right:\"20px\"},visible:!0,zooms:[17,26]},IndoorMapFloorBar=function(_super){function IndoorMapFloorBar(opts){var _this=_super.call(this,opts)||this;return _this._className=\"indoormap-floorbar-control\",_this._config=AMap.extend(defultOpts,opts),_this._config.floors&&(_this._config.floors=_this._config.floors.reverse()),_this._config.floorIndexs&&(_this._config.floorIndexs=_this._config.floorIndexs.reverse()),_this.initContainer(),_this._initUI(),_this._currFloorIndex=_this._config.floorIndexs.indexOf(_this._config.currentFloor),_this}return __extends(IndoorMapFloorBar,_super),IndoorMapFloorBar.prototype.setOption=function(lis){this._config=AMap.extend(this._config,lis),this._config.floors&&(this._config.floors=this._config.floors.reverse()),this._config.floorIndexs&&(this._config.floorIndexs=this._config.floorIndexs.reverse()),this._currFloorIndex=this._config.floorIndexs.indexOf(this._config.currentFloor),this._config.floors&&0<this._config.floors.length&&(lis=map(this._config.floors,function(f){return'<li class=\"floor-list-item\"><div class=\"floor-btn floor-nonas\">'+f+\"</div></li>\"}),this._floorListDom.innerHTML=lis.join(\"\")),this._setDomDisplay(),this.map&&(this._changeSelected(this._currFloorIndex),this._calcScrollTop())},IndoorMapFloorBar.prototype.show=function(){_super.prototype.show.call(this),this._changeSelected(this._currFloorIndex),this._calcScrollTop()},IndoorMapFloorBar.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),this._changeSelected(this._currFloorIndex),this._calcScrollTop()},IndoorMapFloorBar.prototype._setDomDisplay=function(){this._plusDom&&this._minusDom&&(this._plusDom.style.display=5<this._config.floors.length?\"block\":\"none\",this._minusDom.style.display=5<this._config.floors.length?\"block\":\"none\")},IndoorMapFloorBar.prototype._initUI=function(){var lis,_this=this;this._panelBoxDom=AMap.DomUtil.create(\"div\",this._container,\"panel-box\"),this._plusDom=AMap.DomUtil.create(\"div\",this._panelBoxDom,\"floor-btn floor-nav floor-plus\"),this._floorListBoxDom=AMap.DomUtil.create(\"div\",this._panelBoxDom,\"floor-list-box\"),this._minusDom=AMap.DomUtil.create(\"div\",this._panelBoxDom,\"floor-btn floor-nav floor-minus\"),this._floorListDom=AMap.DomUtil.create(\"ul\",this._floorListBoxDom,\"floor-list\"),this._setDomDisplay(),this._config.floors&&0<this._config.floors.length&&(lis=map(this._config.floors,function(f){return'<li class=\"floor-list-item\">\\n                          <div class=\"floor-btn floor-nonas\">'+f+\"</div>\\n                        </li>\"}),this._floorListDom.innerHTML=lis.join(\"\")),DomEvent.on(this._minusDom,\"click\",function(event){var currentFloorIndex=_this._currFloorIndex;_this._currFloorIndex<_this._config.floors.length-1&&(currentFloorIndex=_this._currFloorIndex+1),_this.emit(\"floorchange\",{currentFloor:_this._config.floors[currentFloorIndex],currentIndex:_this._config.floorIndexs[currentFloorIndex]}),_this._currFloorIndex=currentFloorIndex,_this._changeSelected(currentFloorIndex),_this._calcScrollTop()},this),DomEvent.on(this._plusDom,\"click\",function(event){var currentFloorIndex=_this._currFloorIndex;0<_this._currFloorIndex&&(currentFloorIndex=_this._currFloorIndex-1),_this.emit(\"floorchange\",{currentFloor:_this._config.floors[currentFloorIndex],currentIndex:_this._config.floorIndexs[currentFloorIndex]}),_this._currFloorIndex=currentFloorIndex,_this._changeSelected(currentFloorIndex),_this._calcScrollTop()},this),DomEvent.on(this._floorListDom,\"click\",function(i){var v;\"DIV\"===i.target.nodeName&&(v=i.target.innerText,i=_this._config.floors.indexOf(v),_this.emit(\"floorchange\",{currentFloor:v,currentIndex:_this._config.floorIndexs[i]}),_this._currFloorIndex=i,_this._changeSelected(i),_this._calcScrollTop())},this)},IndoorMapFloorBar.prototype._changeSelected=function(index){for(var floorListDom=document.getElementsByClassName(\"floor-list-item\"),i=0;i<floorListDom.length;i++){var f=floorListDom[i],cls=f.className.split(\" \");-1<cls.indexOf(\"selected\")&&(cls.splice(cls.indexOf(\"selected\"),1),f.className=cls.join(\" \"))}floorListDom[index].className+=\" selected\",0===index?-1===this._plusDom.className.indexOf(\"disabled\")&&(this._plusDom.className+=\" disabled\"):-1<this._plusDom.className.indexOf(\"disabled\")&&(this._plusDom.className=this._plusDom.className.replace(/disabled/g,\"\")),index>=this._config.floors.length-1?-1===this._minusDom.className.indexOf(\"disabled\")&&(this._minusDom.className+=\" disabled\"):-1<this._minusDom.className.indexOf(\"disabled\")&&(this._minusDom.className=this._minusDom.className.replace(/disabled/g,\"\"))},IndoorMapFloorBar.prototype._calcScrollTop=function(){if(this._config.floors.length<=5)return 0;var heightSum=this._currFloorIndex,heightSum=2<heightSum?32*(heightSum-2):0;return this._floorListBoxDom.scrollTop=heightSum},IndoorMapFloorBar}(IndoorMapFloorBar);M.IndoorMapFloorBar=IndoorMapFloorBar}();\n");
_jsload_('AMap.LineSearch.js',"!function(a){\"use strict\";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}var e=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(t=u(this,i(n).call(this))).CLASS_NAME=\"AMap.LineSearch\",t.config=a.getConfig(),t.url=t.config.server+\"/v3/bus/\",t._initialize(e),t}var e,t,r;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,a.Event),e=n,(t=[{key:\"_initialize\",value:function(e){e&&e.pageSize?(100<e.pageSize?e.pageSize=100:e.pageSize<1&&(e.pageSize=1),e.offset=e.pageSize,delete e.pageSize):e&&e.pageIndex?(e.pageIndex<0&&(e.pageIndex=0),e.page=e.pageIndex,delete e.pageIndex):e=e||{},this.opts=this._extend(e,{extensions:\"base\",output:\"json\"})}},{key:\"setPageIndex\",value:function(e){e<0&&(e=0),this.opts.page=e}},{key:\"setPageSize\",value:function(e){100<e?e=100:e<1&&(e=1),this.opts.offset=e}},{key:\"setCity\",value:function(e){this.opts.city=e}},{key:\"searchById\",value:function(e,n){var r=this,t={s:\"rsv3\"},o=this.opts;for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);t.id=e;var s=this.url+\"lineid\";a.WebService.get(s,t,function(e,t){\"complete\"===e&&t.status&&\"1\"===t.status&&r._onComplete(t,n),\"error\"===e&&r._onError(t,n)})}},{key:\"search\",value:function(e,n){var r=this;if(e){var t={s:\"rsv3\"},o=this.opts;for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);t.keywords=this._parseString(e);var s=this.url+\"linename\";a.WebService.get(s,t,function(e,t){\"complete\"===e&&t.status&&\"1\"===t.status&&r._onComplete(t,n),\"error\"===e&&r._onError(t,n)})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"_parseResult\",value:function(e){var t,n,r={};for(r.info=e.info,r.lineInfo=[],t=0;t<e.buslines.length;t+=1){r.lineInfo[t]={};var o=e.buslines[t];for(n in o)o.hasOwnProperty(n)&&this._parseLineInfo(n,o,r.lineInfo[t])}if(e.suggestion&&e.suggestion.keywords.length&&(r.keywordList=e.suggestion.keywords),e.suggestion&&e.suggestion.cities.length){var i=e.suggestion.cities,s=[];for(t=0;t<i.length;t+=1){var a=i[t];for(n in a)a.hasOwnProperty(n)&&\"num\"===n&&(a.count=parseInt(a[n],10),delete a[n]);s.push(a)}r.cityList=s}return r}},{key:\"_parseLineInfo\",value:function(e,t,n){switch(e){case\"start_time\":return void(n.stime=t[e]);case\"end_time\":return void(n.etime=t[e]);case\"bounds\":var r=t[e].split(/[,;]+/);return void(n[e]=new a.Bounds(r[0],r[1],r[2],r[3]));case\"polyline\":return void(n.path=this._parsePolyline(t[e]));case\"busstops\":return void(n.via_stops=this._parseBusStops(t[e]));default:n[e]=this._parseString(t[e])}}},{key:\"_parseBusStops\",value:function(e){var t,n,r=[];for(t=0;t<e.length;t+=1){var o=e[t];for(n in r[t]={},o)o.hasOwnProperty(n)&&this._parseStop(n,o,r[t])}return r}},{key:\"_parseStop\",value:function(e,t,n){switch(e){case\"sequence\":return void(n[e]=parseFloat(t[e]));case\"location\":var r=t[e].split(\",\");return void(n[e]=new a.LngLat(r[0],r[1]));default:n[e]=this._parseString(t[e])}}},{key:\"_parsePolyline\",value:function(e){for(var t=e.split(/[,;]+/),n=[],r=0;r<t.length;r+=2)n.push(new a.LngLat(t[r],t[r+1]));return n}},{key:\"_onComplete\",value:function(e,t){var n,r=\"1\"===e.status&&this._isArray(e.buslines)&&0<e.buslines.length,o=e.suggestion&&this._isArray(e.suggestion.keywords)&&0<e.suggestion.keywords.length,i=e.suggestion&&this._isArray(e.suggestion.cities)&&0<e.suggestion.cities.length,s=\"ok\"===e.info.toLowerCase()&&this._isArray(e.buslines)&&0===e.buslines.length;r?(n=this._parseResult(e),t&&\"function\"==typeof t&&t(\"complete\",n)):o?((n=this._parseResult(e)).info=\"TIP_KEYWORDS\",t&&\"function\"==typeof t&&t(\"complete\",n)):i?((n=this._parseResult(e)).info=\"TIP_CITIES\",t&&\"function\"==typeof t&&t(\"complete\",n)):s?(n={info:\"NO_DATA\",lineInfo:[]},t&&\"function\"==typeof t&&t(\"no_data\",{})):(delete(n={info:e.info,lineInfo:[]}).lineInfo,t&&\"function\"==typeof t&&t(\"error\",e.info))}},{key:\"_onError\",value:function(e,t){t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"_isArray\",value:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},{key:\"_parseString\",value:function(e){return\"string\"==typeof e?e:\"\"}},{key:\"_extend\",value:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}])&&o(e.prototype,t),r&&o(e,r),n}();a.LineSearch=e}(window.AMap);\n");
_jsload_('AMap.MapType.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function extend(dest){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&(\"function\"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target);return dest}var Browser=function(localStore){var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if(\"object\"==typeof WebAssembly&&\"function\"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=(any3d=function(key){return-1!==ua.indexOf(key)})(\"macintosh\"),iPad=any3d(\"ipad;\")||any3d(\"ipad \"),viewportScale=any3d(\"ipod touch;\"),iPhone=any3d(\"iphone;\")||any3d(\"iphone \"),ios=iPhone||iPad||viewportScale,safari=(mac||ios)&&any3d(\"safari\")&&any3d(\"version/\"),ie3d=any3d(\"macwechat\"),isSvg=any3d(\"windowswechat\"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:ie3d,windowsWechat:isSvg,amapRunTime:amapRunTime};if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var win_1=window,baseRender=document,vdataVersion=baseRender.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),ie=\"ActiveXObject\"in win_1,retina=0!=window.detectRetina&&(\"devicePixelRatio\"in win_1&&1<win_1.devicePixelRatio||ie&&\"matchMedia\"in win_1&&win_1.matchMedia(\"(min-resolution:144dpi)\")&&win_1.matchMedia(\"(min-resolution:144dpi)\").matches),windows=any3d(\"windows nt\"),movingDraw=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),any3d(\"windows nt 10\"),any3d(\"windows phone\")),mb2345Browser=any3d(\"Mb2345Browser\"),ios10=(ios&&ua.search(/ os [456]_/),ios&&ua.search(/ os [4-8]_/),ios&&ua.search(/ os [78]_/),ios&&any3d(\"os 8_\"),ios&&any3d(\"os 10_\")),android_1=any3d(\"android\"),enableVector=0;android_1&&(enableVector=parseInt(ua.split(\"android\")[1])||0);var android23=android_1&&enableVector<4,plat_1=(android_1&&5<=enableVector||ua.search(/android 4.4/),android_1?\"android\":ios?\"ios\":windows?\"windows\":mac?\"mac\":\"other\"),ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!baseRender.querySelector,ielt9=ie&&!baseRender.addEventListener,ie9=ie&&any3d(\"msie 9\"),ie10=ie&&any3d(\"msie 10\"),ie11=ie&&any3d(\"rv:11\"),ielt10=ielt9||ie9,edge=any3d(\"edge\"),uc=(any3d(\"qtweb\"),any3d(\"ucbrowser\")),gaodeCoords=any3d(\"alipay\")||android_1&&uc,wechat=(any3d(\"miuibrowser\"),any3d(\"micromessenger\")),opera3d=any3d(\"dingtalk\"),qq=any3d(\"mqqbrowser\"),baidu=any3d(\"baidubrowser\"),byWebgl=any3d(\"crios/\"),chrome=any3d(\"chrome/\"),webkit_1=!((chrome||byWebgl)&&any3d(\"chromium\"))&&(chrome&&30<parseInt(ua.split(\"chrome/\")[1])||byWebgl&&30<parseInt(ua.split(\"crios/\")[1])),firefox=any3d(\"firefox\"),webkit3d=firefox&&27<parseInt(ua.split(\"firefox/\")[1]),gecko3d=safari&&7<parseInt(ua.split(\"version/\")[1]),mobile_1=(ios&&any3d(\"aliapp\"),android_1||ios||movingDraw||any3d(\"mobile\")),checkWebgl=\"ontouchstart\"in baseRender,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!checkWebgl&&(pointer||msPointer),touch_1=checkWebgl||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName(\"meta\")}catch(e){return 1}for(var i=metas.length-1;0<=i;--i)if(\"viewport\"===metas[i].name){var content=metas[i].content,initial_scale=void 0,minimum_scale=void 0,maximum_scale=void 0;return-1!==content.indexOf(\"initial-scale\")&&(initial_scale=parseFloat(content.split(\"initial-scale=\")[1])),minimum_scale=-1!==content.indexOf(\"minimum-scale\")?parseFloat(content.split(\"minimum-scale=\")[1]):0,maximum_scale=-1!==content.indexOf(\"maximum-scale\")?parseFloat(content.split(\"maximum-scale=\")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log(\"viewport参数不合法\"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log(\"viewport参数不合法\"),null)}}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&\"transition\"in vdataVersion.style,isSvg=!!baseRender.createElementNS&&!!baseRender.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,canvas_1=baseRender.createElement(\"canvas\"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),enableVector=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!webkit_1)&&window.Worker&&enableVector&&enableVector.createObjectURL&&window.Blob,webglContextName_1=\"\",graphicCard_1=\"\",maxRenderSize_1=0,byWebgl=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:byWebgl,depth:!0,stencil:!0}),checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var contextName=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var graphicCardShort=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!graphicCardShort)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,graphicCardShort[0],graphicCardShort[1]),safari&&\"mac\"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));graphicCardShort=Math.max(screen.width,screen.height);if(needFitRetina_1&&(graphicCardShort*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<graphicCardShort)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCardShort=function(graphicVersion){if(!graphicVersion)return null;var forShort=null,radeonIndex=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/);if(0<=(graphicVersion=(graphicVersion=radeonIndex?(graphicVersion=radeonIndex[1]).replace(/\\s*direct3d.*$/,\"\"):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\")).indexOf(\"intel\")){forShort=[\"Intel\"];return 0<=graphicVersion.indexOf(\"mobile\")&&forShort.push(\"Mobile\"),(0<=graphicVersion.indexOf(\"gma\")||0<=graphicVersion.indexOf(\"graphics media accelerator\"))&&forShort.push(\"GMA\"),0<=graphicVersion.indexOf(\"haswell\")?forShort.push(\"Haswell\"):0<=graphicVersion.indexOf(\"ivy\")?forShort.push(\"HD 4000\"):0<=graphicVersion.indexOf(\"sandy\")?forShort.push(\"HD 3000\"):0<=graphicVersion.indexOf(\"ironlake\")?forShort.push(\"HD\"):(0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase())),forShort=forShort.join(\" \")}if(0<=graphicVersion.indexOf(\"nvidia\")||0<=graphicVersion.indexOf(\"quadro\")||0<=graphicVersion.indexOf(\"geforce\")||0<=graphicVersion.indexOf(\"nvs\"))return forShort=[\"nVidia\"],0<=graphicVersion.indexOf(\"geforce\")&&forShort.push(\"geForce\"),0<=graphicVersion.indexOf(\"quadro\")&&forShort.push(\"Quadro\"),0<=graphicVersion.indexOf(\"nvs\")&&forShort.push(\"NVS\"),graphicVersion.match(/\\bion\\b/)&&forShort.push(\"ION\"),graphicVersion.match(/gtx\\b/)?forShort.push(\"GTX\"):graphicVersion.match(/gts\\b/)?forShort.push(\"GTS\"):graphicVersion.match(/gt\\b/)?forShort.push(\"GT\"):graphicVersion.match(/gs\\b/)?forShort.push(\"GS\"):graphicVersion.match(/ge\\b/)?forShort.push(\"GE\"):graphicVersion.match(/fx\\b/)&&forShort.push(\"FX\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"GS\",\"\")),0<=graphicVersion.indexOf(\"titan\")?forShort.push(\"TITAN\"):0<=graphicVersion.indexOf(\"ti\")&&forShort.push(\"Ti\"),forShort=forShort.join(\" \");if(0<=graphicVersion.indexOf(\"amd\")||0<=graphicVersion.indexOf(\"ati\")||0<=graphicVersion.indexOf(\"radeon\")||0<=graphicVersion.indexOf(\"firegl\")||0<=graphicVersion.indexOf(\"firepro\")){forShort=[\"AMD\"],0<=graphicVersion.indexOf(\"mobil\")&&forShort.push(\"Mobility\");var number,radeonIndex=graphicVersion.indexOf(\"radeon\");return 0<=radeonIndex&&forShort.push(\"Radeon\"),0<=graphicVersion.indexOf(\"firepro\")?forShort.push(\"FirePro\"):0<=graphicVersion.indexOf(\"firegl\")&&forShort.push(\"FireGL\"),0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=(graphicVersion=0<=radeonIndex?graphicVersion.substring(radeonIndex):graphicVersion).match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"HD\",\"\")),forShort=forShort.join(\" \")}return graphicVersion.substring(0,100)}(graphicCard_1=gl.getExtension(\"WEBGL_debug_renderer_info\")?gl.getParameter(37446):null);if(graphicCardShort){if(-1<graphicCardShort.indexOf(\"google swiftshader\"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(graphicCardShort))return!1}return webglContextName_1=contextName[i],!0}}return!1},baseRender=checkWebgl(),enableVector=void 0===localStore[8]||localStore[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&baseRender&&(window.forceWebGL||(webkit_1||webkit3d||gecko3d||edge||wechat||opera3d)&&\"other\"!=plat_1),baseRender=window.forceWebGLBaseRender||byWebgl?\"w\":\"d\",webkit_1=any3d(\"webkit\"),webkit3d=\"WebKitCSSMatrix\"in win_1&&\"m11\"in new window.WebKitCSSMatrix,gecko3d=\"MozPerspective\"in vdataVersion.style,opera3d=\"OTransition\"in vdataVersion.style,any3d=ie3d||webkit3d||gecko3d||opera3d,vdataVersion=void 0!==localStore[12]?localStore[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(chromeversion=(new Date).getTime()+\"\",win_1.localStorage.setItem(\"_test\",chromeversion),win_1.localStorage.getItem(\"_test\")!==chromeversion&&(localStore=!1),win_1.localStorage.removeItem(\"_test\"))}catch(e){localStore=!1}var chromeversion=parseInt(ua.split(\"chrome/\")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:ios,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=chromeversion,chrome64:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:byWebgl,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?baseRender:\"d\",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:checkWebgl};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}(\"undefined\"==typeof config?[]:config);\"undefined\"!=typeof createImageBitmap&&\"undefined\"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);var freeExports=Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));Browser.canceledWorkerFetch=freeExports,Browser.amapRunTime={workerTime:{}};var MapType=\"object\"==typeof global&&global&&global.Object===Object&&global,freeModule=\"object\"==typeof self&&self&&self.Object===Object&&self,freeExports$1=MapType||freeModule||Function(\"return this\")(),freeExports=freeExports$1.Symbol,freeModule=Object.prototype,hasOwnProperty=freeModule.hasOwnProperty,nativeObjectToString=freeModule.toString,symToStringTag=freeExports?freeExports.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=freeExports?freeExports.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var freeModule=freeExports$1[\"__core-js_shared__\"],maskSrcKey=(freeExports=/[^.]+$/.exec(freeModule&&freeModule.keys&&freeModule.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+freeExports:\"\";var funcToString=Function.prototype.toString;var reIsHostCtor=/^\\[object .+?Constructor\\]$/,freeModule=Function.prototype,freeExports=Object.prototype,freeModule=freeModule.toString,freeExports=freeExports.hasOwnProperty,reIsNative=RegExp(\"^\"+freeModule.call(freeExports).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}(value))}var nativeNow=Date.now;var func,count,lastCalled,defineProperty=function(){try{var func=(object=Object,baseIsNative(value=function(object,key){return null==object?void 0:object[key]}(object,value=\"defineProperty\"))?value:void 0);return func({},\"\",{}),func}catch(e){}var object,value}(),setToString=(func=defineProperty?function(func,string){return defineProperty(func,\"toString\",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity,lastCalled=count=0,function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return(length=null==length?MAX_SAFE_INTEGER:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function baseAssignValue(object,key,value){\"__proto__\"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function eq(value,other){return value===other||value!=value&&other!=other}var hasOwnProperty$2=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$2.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var nativeMax=Math.max;function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$4)}function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var freeModule=Object.prototype,hasOwnProperty$3=freeModule.hasOwnProperty,propertyIsEnumerable=freeModule.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var freeExports=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeExports$1=freeModule&&freeModule.exports===freeExports?freeExports$1.Buffer:void 0,isBuffer=(freeExports$1?freeExports$1.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var freeExports$1=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===freeExports$1&&MapType.process,MapType=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),MapType=MapType&&MapType.isTypedArray,isTypedArray=MapType?function(func){return function(value){return func(value)}}(MapType):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$4=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$4.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$5=Object.prototype.hasOwnProperty;function keys(object){return(isArrayLike(object)?arrayLikeKeys:function(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty$5.call(object,key)&&\"constructor\"!=key&&result.push(key);return result})(object)}var hasOwnProperty$6=Object.prototype.hasOwnProperty,assign=function(assigner){return setToString(overRest(func=function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0,customizer=3<assigner.length&&\"function\"==typeof customizer?(length--,customizer):void 0;for(guard&&function(value,index,object){if(isObject(object)){var type=typeof index;return(\"number\"==type?isArrayLike(object)&&isIndex(index,object.length):\"string\"==type&&index in object)&&eq(object[index],value)}}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object},start,identity),func+\"\");var func,start}(function(object,source){if(isPrototype(source)||isArrayLike(source))!function(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;(isNew?baseAssignValue:assignValue)(object,key,newValue=void 0===newValue?source[key]:newValue)}}(source,keys(source),object);else for(var key in source)hasOwnProperty$6.call(source,key)&&assignValue(object,key,source[key])}),MapType=function(_super){function __(){this.constructor=d}var d,b;function MapType(opts){var _this=_super.call(this,opts||{})||this;_this._className=\"maptype\",_this._guid=Math.random();var defultOpts={position:{top:\"20px\",right:\"20px\"},defaultType:0,showRoad:!1,showTraffic:!1,layerInfos:[{id:\"AMap.TileLayer\",name:\"标准图层\",enable:!0,type:\"base\",layer:\"w\"===Browser.baseRender?AMap.createDefaultLayer():new AMap.TileLayer({tileUrl:AMap.getConfig().defaultTileUrl})},{id:\"AMap.TileLayer.Satellite\",name:\"卫星图\",enable:!0,type:\"base\",layer:new AMap.TileLayer.Satellite({})},{id:\"AMap.TileLayer.RoadNet\",enable:!0,name:\"路网\",type:\"overlay\",layer:new AMap.TileLayer.RoadNet({})},{id:\"AMap.TileLayer.Traffic\",enable:!0,name:\"路况\",type:\"overlay\",layer:new AMap.TileLayer.Traffic({})}]};return _this._layerData={base:[],overlay:[]},_this._config=assign(defultOpts,opts),_this.initContainer(),_this._initUI(),_this}return extendStatics(d=MapType,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),MapType.prototype.addLayer=function(layerInfo){void 0===layerInfo.enable&&(layerInfo.enable=!0),\"base\"===layerInfo.type?this._addBaseDiv(layerInfo):\"overlay\"===layerInfo.type?this._addOverlayDiv(layerInfo):console.log('图层配置 type 信息不完正确！可选值：\"base\"、\"overlay\"')},MapType.prototype.removeLayer=function(id){for(var overlays=this._layerData.overlay,bases=this._layerData.base,i=0;i<overlays.length;i++){var o=overlays[i];id===o.layerInfo.id&&(this._layerOverlayList.removeChild(o.container),overlays.splice(i,1),i--)}for(i=0;i<bases.length;i++){var b=bases[i];id===b.layerInfo.id&&(this._layerBaseList.removeChild(b.container),bases.splice(i,1),i--)}return this},MapType.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),this._initLayers()},MapType.prototype.remove=function(){this._layerData={base:[],overlay:[]},AMap.DomUtil.empty(this._layerBaseList),AMap.DomUtil.empty(this._layerOverlayList),_super.prototype.remove.call(this)},MapType.prototype.removeFrom=function(map){this._layerData={base:[],overlay:[]},AMap.DomUtil.empty(this._layerBaseList),AMap.DomUtil.empty(this._layerOverlayList),_super.prototype.removeFrom.call(this,map)},MapType.prototype._initUI=function(){var _this=this;this._layerIcon=AMap.DomUtil.create(\"div\",this._container,\"amap-ctrl-icon-layer\"),this._layerIcon.style.display=\"none\",this._layerList=AMap.DomUtil.create(\"div\",this._container,\"amap-ctrl-list-layer\"),this._layerBaseList=AMap.DomUtil.create(\"ul\",this._container,\"amap-ctrl-base-layer\"),this._layerOverlayList=AMap.DomUtil.create(\"ul\",this._container,\"amap-ctrl-overlay-layer\"),this._layerList.appendChild(this._layerBaseList),this._layerList.appendChild(this._layerOverlayList),this._container.addEventListener(\"mouseenter\",function(event){}),this._container.addEventListener(\"mouseleave\",function(event){}),this._container.addEventListener(\"click\",function(t){t=t.target;if(t&&\"INPUT\"===t.nodeName){var id=t.getAttribute(\"data-id\"),type=t.getAttribute(\"data-type\"),checked=t.checked;if(type){if(\"base\"===type)for(var i=0;i<_this._layerData.base.length;i++)(l=_this._layerData.base[i]).layerInfo.layer.hide();for(var l,i=0;i<_this._layerData[type].length;i++)(l=_this._layerData[type][i]).layerInfo.id===id&&(checked?l.layerInfo.layer.show():l.layerInfo.layer.hide())}}})},MapType.prototype._initLayers=function(){for(var config=this._config,mapLayers=this.map.getLayers(),i=0;i<mapLayers.length;i++){var ml=mapLayers[i];if(/AMap\\.(TileLayer\\.RoadNet|TileLayer\\.Traffic|TileLayer\\.Satellite|NebulaLayer|TileLayer)/g.test(ml.CLASS_NAME)&&config.layerInfos)for(var u=0;u<config.layerInfos.length;u++)config.layerInfos[u].id===ml.CLASS_NAME&&(config.layerInfos[u].layer=ml)}if(config.layerInfos&&0<config.layerInfos.length)for(i=0;i<config.layerInfos.length;i++){var layerInfo=config.layerInfos[i];this.map.addLayer(layerInfo.layer),0===config.defaultType&&(\"AMap.NebulaLayer\"===layerInfo.layer.CLASS_NAME||\"AMap.TileLayer\"===layerInfo.layer.CLASS_NAME)||config.showRoad&&\"AMap.TileLayer.RoadNet\"===layerInfo.layer.CLASS_NAME||config.showTraffic&&\"AMap.TileLayer.Traffic\"===layerInfo.layer.CLASS_NAME||1===config.defaultType&&\"AMap.TileLayer.Satellite\"===layerInfo.layer.CLASS_NAME?(layerInfo.layer.show(),layerInfo.show=!0):layerInfo.layer.hide(),this.addLayer(layerInfo)}},MapType.prototype._addBaseDiv=function(layerInfo){var div=AMap.DomUtil.create(\"li\",this._container,\"amap-ui-ctrl-layer-base-item\");this._layerBaseList.appendChild(div),div.innerHTML=\"\\n                <input data-id='\"+layerInfo.id+\"'\\n                    data-type='base'\\n                    name='layer-base-item-\"+this._guid+\"'\\n                    type='radio' \"+(layerInfo.enable?\"\":\"disabled\")+\"\\n                    \"+(layerInfo.show?\"checked\":\"\")+\" />\\n                <p>\"+layerInfo.name+\"</p>\\n        \",this._layerData.base.push({layerInfo:layerInfo,container:div})},MapType.prototype._addOverlayDiv=function(layerInfo){var div=AMap.DomUtil.create(\"li\",this._container,\"amap-ui-ctrl-layer-overlay-item\");this._layerOverlayList.appendChild(div),div.innerHTML=\"\\n                <input data-id='\"+layerInfo.id+\"'\\n                    data-type='overlay'\\n                    name='layer-overlay-item'\\n                    type='checkbox' \"+(layerInfo.enable?\"\":\"disabled\")+\"\\n                    \"+(layerInfo.show?\"checked\":\"\")+\" />\\n                <p>\"+layerInfo.name+\"</p>\\n        \",this._layerData.overlay.push({layerInfo:layerInfo,container:div})},MapType}(AMap.Control);AMap.MapType=MapType}();\n");
_jsload_('AMap.MapboxVectorTileLayer.js',"(function(){\"use strict\";Object.defineProperty(exports,\"gP\",{value:true});var i=function(r,t){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var n in t)if(t.hasOwnProperty(n))r[n]=t[n]};return i(r,t)};function n(r,t){i(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var I=function(){I=Object.assign||function r(t){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a))t[a]=n[a]}return t};return I.apply(this,arguments)};function t(){for(var r=0,t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;for(var i=Array(r),e=0,t=0;t<n;t++)for(var a=arguments[t],u=0,o=a.length;u<o;u++,e++)i[e]=a[u];return i}var r=typeof global==\"object\"&&global&&global.Object===Object&&global;var e=typeof self==\"object\"&&self&&self.Object===Object&&self;var a=r||e||Function(\"return this\")();var u=a.Symbol;var o=Object.prototype;var f=o.hasOwnProperty;var s=o.toString;var v=u?u.toStringTag:undefined;function c(r){var t=f.call(r,v),n=r[v];try{r[v]=undefined;var i=true}catch(r){}var e=s.call(r);if(i){if(t){r[v]=n}else{delete r[v]}}return e}var h=Object.prototype;var l=h.toString;function b(r){return l.call(r)}var d=\"[object Null]\",p=\"[object Undefined]\";var j=u?u.toStringTag:undefined;function y(r){if(r==null){return r===undefined?p:d}return j&&j in Object(r)?c(r):b(r)}function A(r){return r!=null&&typeof r==\"object\"}var m=Array.isArray;function w(r){var t=typeof r;return r!=null&&(t==\"object\"||t==\"function\")}var _=\"[object AsyncFunction]\",g=\"[object Function]\",O=\"[object GeneratorFunction]\",x=\"[object Proxy]\";function S(r){if(!w(r)){return false}var t=y(r);return t==g||t==O||t==_||t==x}var k=a[\"__core-js_shared__\"];var z=function(){var r=/[^.]+$/.exec(k&&k.keys&&k.keys.Xb||\"\");return r?\"Symbol(src)_1.\"+r:\"\"}();function F(r){return!!z&&z in r}var T=Function.prototype;var D=T.toString;function U(r){if(r!=null){try{return D.call(r)}catch(r){}try{return r+\"\"}catch(r){}}return\"\"}var V=/[\\\\^$.*+?()[\\]{}|]/g;var $=/^\\[object .+?Constructor\\]$/;var B=Function.prototype,C=Object.prototype;var E=B.toString;var P=C.hasOwnProperty;var W=RegExp(\"^\"+E.call(P).replace(V,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function L(r){if(!w(r)||F(r)){return false}var t=S(r)?W:$;return t.test(U(r))}function N(r,t){return r==null?undefined:r[t]}function R(r,t){var n=N(r,t);return L(n)?n:undefined}var X=R(a,\"WeakMap\");var Y=9007199254740991;var Z=/^(?:0|[1-9]\\d*)$/;function G(r,t){var n=typeof r;t=t==null?Y:t;return!!t&&(n==\"number\"||n!=\"symbol\"&&Z.test(r))&&(r>-1&&r%1==0&&r<t)}function q(r,t){return r===t||r!==r&&t!==t}var H=9007199254740991;function J(r){return typeof r==\"number\"&&r>-1&&r%1==0&&r<=H}function K(r){return r!=null&&J(r.length)&&!S(r)}var Q=Object.prototype;function rr(r){var t=r&&r.constructor,n=typeof t==\"function\"&&t.prototype||Q;return r===n}function tr(r,t){var n=-1,i=Array(r);while(++n<r){i[n]=t(n)}return i}var nr=\"[object Arguments]\";function ir(r){return A(r)&&y(r)==nr}var er=Object.prototype;var ar=er.hasOwnProperty;var ur=er.propertyIsEnumerable;var or=ir(function(){return arguments}())?ir:function(r){return A(r)&&ar.call(r,\"callee\")&&!ur.call(r,\"callee\")};function fr(){return false}var sr=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var vr=sr&&typeof module==\"object\"&&module&&!module.nodeType&&module;var cr=vr&&vr.exports===sr;var hr=cr?a.Zb:undefined;var lr=hr?hr.isBuffer:undefined;var br=lr||fr;var dr=\"[object Arguments]\",pr=\"[object Array]\",jr=\"[object Boolean]\",yr=\"[object Date]\",Ar=\"[object Error]\",Mr=\"[object Function]\",mr=\"[object Map]\",wr=\"[object Number]\",_r=\"[object Object]\",gr=\"[object RegExp]\",Or=\"[object Set]\",xr=\"[object String]\",Sr=\"[object WeakMap]\";var kr=\"[object ArrayBuffer]\",zr=\"[object DataView]\",Fr=\"[object Float32Array]\",Ir=\"[object Float64Array]\",Tr=\"[object Int8Array]\",Dr=\"[object Int16Array]\",Ur=\"[object Int32Array]\",Vr=\"[object Uint8Array]\",$r=\"[object Uint8ClampedArray]\",Br=\"[object Uint16Array]\",Cr=\"[object Uint32Array]\";var Er={};Er[Fr]=Er[Ir]=Er[Tr]=Er[Dr]=Er[Ur]=Er[Vr]=Er[$r]=Er[Br]=Er[Cr]=true;Er[dr]=Er[pr]=Er[kr]=Er[jr]=Er[zr]=Er[yr]=Er[Ar]=Er[Mr]=Er[mr]=Er[wr]=Er[_r]=Er[gr]=Er[Or]=Er[xr]=Er[Sr]=false;function Pr(r){return A(r)&&J(r.length)&&!!Er[y(r)]}function Wr(t){return function(r){return t(r)}}var Lr=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var Nr=Lr&&typeof module==\"object\"&&module&&!module.nodeType&&module;var Rr=Nr&&Nr.exports===Lr;var Xr=Rr&&r.process;var Yr=function(){try{var r=Nr&&Nr.Qb&&Nr.Qb(\"util\").types;if(r){return r}return Xr&&Xr.tg&&Xr.tg(\"util\")}catch(r){}}();var Zr=Yr&&Yr.rg;var Gr=Zr?Wr(Zr):Pr;var qr=Object.prototype;var Hr=qr.hasOwnProperty;function Jr(r,t){var n=m(r),i=!n&&or(r),e=!n&&!i&&br(r),a=!n&&!i&&!e&&Gr(r),u=n||i||e||a,o=u?tr(r.length,String):[],f=o.length;for(var s in r){if((t||Hr.call(r,s))&&!(u&&(s==\"length\"||e&&(s==\"offset\"||s==\"parent\")||a&&(s==\"buffer\"||s==\"byteLength\"||s==\"byteOffset\")||G(s,f)))){o.push(s)}}return o}function Kr(t,n){return function(r){return t(n(r))}}var Qr=Kr(Object.keys,Object);var rt=Object.prototype;var tt=rt.hasOwnProperty;function nt(r){if(!rr(r)){return Qr(r)}var t=[];for(var n in Object(r)){if(tt.call(r,n)&&n!=\"constructor\"){t.push(n)}}return t}function it(r){return K(r)?Jr(r):nt(r)}var et=R(Object,\"create\");function at(){this.ng=et?et(null):{};this.size=0}function ut(r){var t=this.has(r)&&delete this.ng[r];this.size-=t?1:0;return t}var ot=\"__lodash_hash_undefined__\";var ft=Object.prototype;var st=ft.hasOwnProperty;function vt(r){var t=this.ng;if(et){var n=t[r];return n===ot?undefined:n}return st.call(t,r)?t[r]:undefined}var ct=Object.prototype;var ht=ct.hasOwnProperty;function lt(r){var t=this.ng;return et?t[r]!==undefined:ht.call(t,r)}var bt=\"__lodash_hash_undefined__\";function dt(r,t){var n=this.ng;this.size+=this.has(r)?0:1;n[r]=et&&t===undefined?bt:t;return this}function pt(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var i=r[t];this.set(i[0],i[1])}}pt.prototype.clear=at;pt.prototype[\"delete\"]=ut;pt.prototype.get=vt;pt.prototype.has=lt;pt.prototype.set=dt;function jt(){this.ng=[];this.size=0}function yt(r,t){var n=r.length;while(n--){if(q(r[n][0],t)){return n}}return-1}var At=Array.prototype;var Mt=At.splice;function mt(r){var t=this.ng,n=yt(t,r);if(n<0){return false}var i=t.length-1;if(n==i){t.pop()}else{Mt.call(t,n,1)}--this.size;return true}function wt(r){var t=this.ng,n=yt(t,r);return n<0?undefined:t[n][1]}function _t(r){return yt(this.ng,r)>-1}function gt(r,t){var n=this.ng,i=yt(n,r);if(i<0){++this.size;n.push([r,t])}else{n[i][1]=t}return this}function Ot(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var i=r[t];this.set(i[0],i[1])}}Ot.prototype.clear=jt;Ot.prototype[\"delete\"]=mt;Ot.prototype.get=wt;Ot.prototype.has=_t;Ot.prototype.set=gt;var xt=R(a,\"Map\");function St(){this.size=0;this.ng={hash:new pt,map:new(xt||Ot),string:new pt}}function kt(r){var t=typeof r;return t==\"string\"||t==\"number\"||t==\"symbol\"||t==\"boolean\"?r!==\"__proto__\":r===null}function zt(r,t){var n=r.ng;return kt(t)?n[typeof t==\"string\"?\"string\":\"hash\"]:n.map}function Ft(r){var t=zt(this,r)[\"delete\"](r);this.size-=t?1:0;return t}function It(r){return zt(this,r).get(r)}function Tt(r){return zt(this,r).has(r)}function Dt(r,t){var n=zt(this,r),i=n.size;n.set(r,t);this.size+=n.size==i?0:1;return this}function Ut(r){var t=-1,n=r==null?0:r.length;this.clear();while(++t<n){var i=r[t];this.set(i[0],i[1])}}Ut.prototype.clear=St;Ut.prototype[\"delete\"]=Ft;Ut.prototype.get=It;Ut.prototype.has=Tt;Ut.prototype.set=Dt;function Vt(r,t){var n=-1,i=t.length,e=r.length;while(++n<i){r[e+n]=t[n]}return r}function $t(){this.ng=new Ot;this.size=0}function Bt(r){var t=this.ng,n=t[\"delete\"](r);this.size=t.size;return n}function Ct(r){return this.ng.get(r)}function Et(r){return this.ng.has(r)}var Pt=200;function Wt(r,t){var n=this.ng;if(n instanceof Ot){var i=n.ng;if(!xt||i.length<Pt-1){i.push([r,t]);this.size=++n.size;return this}n=this.ng=new Ut(i)}n.set(r,t);this.size=n.size;return this}function Lt(r){var t=this.ng=new Ot(r);this.size=t.size}Lt.prototype.clear=$t;Lt.prototype[\"delete\"]=Bt;Lt.prototype.get=Ct;Lt.prototype.has=Et;Lt.prototype.set=Wt;function Nt(r,t){var n=-1,i=r==null?0:r.length,e=0,a=[];while(++n<i){var u=r[n];if(t(u,n,r)){a[e++]=u}}return a}function Rt(){return[]}var Xt=Object.prototype;var Yt=Xt.propertyIsEnumerable;var Zt=Object.getOwnPropertySymbols;var Gt=!Zt?Rt:function(t){if(t==null){return[]}t=Object(t);return Nt(Zt(t),function(r){return Yt.call(t,r)})};function qt(r,t,n){var i=t(r);return m(r)?i:Vt(i,n(r))}function Ht(r){return qt(r,it,Gt)}var Jt=R(a,\"DataView\");var Kt=R(a,\"Promise\");var Qt=R(a,\"Set\");var rn=\"[object Map]\",tn=\"[object Object]\",nn=\"[object Promise]\",en=\"[object Set]\",an=\"[object WeakMap]\";var un=\"[object DataView]\";var on=U(Jt),fn=U(xt),sn=U(Kt),vn=U(Qt),cn=U(X);var hn=y;if(Jt&&hn(new Jt(new ArrayBuffer(1)))!=un||xt&&hn(new xt)!=rn||Kt&&hn(Kt.resolve())!=nn||Qt&&hn(new Qt)!=en||X&&hn(new X)!=an){hn=function(r){var t=y(r),n=t==tn?r.constructor:undefined,i=n?U(n):\"\";if(i){switch(i){case on:return un;case fn:return rn;case sn:return nn;case vn:return en;case cn:return an}}return t}}var ln=hn;var bn=a.Uint8Array;var dn=\"__lodash_hash_undefined__\";function pn(r){this.ng.set(r,dn);return this}function jn(r){return this.ng.has(r)}function yn(r){var t=-1,n=r==null?0:r.length;this.ng=new Ut;while(++t<n){this.add(r[t])}}yn.prototype.add=yn.prototype.push=pn;yn.prototype.has=jn;function An(r,t){var n=-1,i=r==null?0:r.length;while(++n<i){if(t(r[n],n,r)){return true}}return false}function Mn(r,t){return r.has(t)}var mn=1,wn=2;function _n(r,t,n,i,e,a){var u=n&mn,o=r.length,f=t.length;if(o!=f&&!(u&&f>o)){return false}var s=a.get(r);var v=a.get(t);if(s&&v){return s==t&&v==r}var c=-1,h=true,l=n&wn?new yn:undefined;a.set(r,t);a.set(t,r);while(++c<o){var b=r[c],d=t[c];if(i){var p=u?i(d,b,c,t,r,a):i(b,d,c,r,t,a)}if(p!==undefined){if(p){continue}h=false;break}if(l){if(!An(t,function(r,t){if(!Mn(l,t)&&(b===r||e(b,r,n,i,a))){return l.push(t)}})){h=false;break}}else if(!(b===d||e(b,d,n,i,a))){h=false;break}}a[\"delete\"](r);a[\"delete\"](t);return h}function gn(r){var n=-1,i=Array(r.size);r.forEach(function(r,t){i[++n]=[t,r]});return i}function On(r){var t=-1,n=Array(r.size);r.forEach(function(r){n[++t]=r});return n}var xn=1,Sn=2;var kn=\"[object Boolean]\",zn=\"[object Date]\",Fn=\"[object Error]\",In=\"[object Map]\",Tn=\"[object Number]\",Dn=\"[object RegExp]\",Un=\"[object Set]\",Vn=\"[object String]\",$n=\"[object Symbol]\";var Bn=\"[object ArrayBuffer]\",Cn=\"[object DataView]\";var En=u?u.prototype:undefined,Pn=En?En.valueOf:undefined;function Wn(r,t,n,i,e,a,u){switch(n){case Cn:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset){return false}r=r.buffer;t=t.buffer;case Bn:if(r.byteLength!=t.byteLength||!a(new bn(r),new bn(t))){return false}return true;case kn:case zn:case Tn:return q(+r,+t);case Fn:return r.name==t.name&&r.message==t.message;case Dn:case Vn:return r==t+\"\";case In:var o=gn;case Un:var f=i&xn;o||(o=On);if(r.size!=t.size&&!f){return false}var s=u.get(r);if(s){return s==t}i|=Sn;u.set(r,t);var v=_n(o(r),o(t),i,e,a,u);u[\"delete\"](r);return v;case $n:if(Pn){return Pn.call(r)==Pn.call(t)}}return false}var Ln=1;var Nn=Object.prototype;var Rn=Nn.hasOwnProperty;function Xn(r,t,n,i,e,a){var u=n&Ln,o=Ht(r),f=o.length,s=Ht(t),v=s.length;if(f!=v&&!u){return false}var c=f;while(c--){var h=o[c];if(!(u?h in t:Rn.call(t,h))){return false}}var l=a.get(r);var b=a.get(t);if(l&&b){return l==t&&b==r}var d=true;a.set(r,t);a.set(t,r);var p=u;while(++c<f){h=o[c];var j=r[h],y=t[h];if(i){var A=u?i(y,j,h,t,r,a):i(j,y,h,r,t,a)}if(!(A===undefined?j===y||e(j,y,n,i,a):A)){d=false;break}p||(p=h==\"constructor\")}if(d&&!p){var M=r.constructor,m=t.constructor;if(M!=m&&(\"constructor\"in r&&\"constructor\"in t)&&!(typeof M==\"function\"&&M instanceof M&&typeof m==\"function\"&&m instanceof m)){d=false}}a[\"delete\"](r);a[\"delete\"](t);return d}var Yn=1;var Zn=\"[object Arguments]\",Gn=\"[object Array]\",qn=\"[object Object]\";var Hn=Object.prototype;var Jn=Hn.hasOwnProperty;function Kn(r,t,n,i,e,a){var u=m(r),o=m(t),f=u?Gn:ln(r),s=o?Gn:ln(t);f=f==Zn?qn:f;s=s==Zn?qn:s;var v=f==qn,c=s==qn,h=f==s;if(h&&br(r)){if(!br(t)){return false}u=true;v=false}if(h&&!v){a||(a=new Lt);return u||Gr(r)?_n(r,t,n,i,e,a):Wn(r,t,f,n,i,e,a)}if(!(n&Yn)){var l=v&&Jn.call(r,\"__wrapped__\"),b=c&&Jn.call(t,\"__wrapped__\");if(l||b){var d=l?r.value():r,p=b?t.value():t;a||(a=new Lt);return e(d,p,n,i,a)}}if(!h){return false}a||(a=new Lt);return Xn(r,t,n,i,e,a)}function Qn(r,t,n,i,e){if(r===t){return true}if(r==null||t==null||!A(r)&&!A(t)){return r!==r&&t!==t}return Kn(r,t,n,i,Qn,e)}function ri(r,t){return Qn(r,t)}var ti=function(){function r(){this.uA={};this.b2=[0,0,0,255];this.j2=256}r.prototype.add=function(r){this.uA[this.A2()]=r;return t(this.b2)};r.prototype.find=function(r){var t=this.j2;var n=t*t;for(var i in this.uA){var e=Number(i);if(ri(this.uA[e],r)){return[e%t,~~(e/t)%t,~~(e/n)%t,255]}}return undefined};r.prototype.clear=function(){this.b2=[0,0,0,255];this.uA={}};r.prototype.M2=function(){return t(this.b2)};r.prototype.GV=function(r){var t=this.j2;var n=t*t;var i=r[0],e=r[1],a=r[2];var u=i+e*t+a*n;return this.uA[u]};r.prototype.A2=function(){var r=this.j2;var t=r*r;var n=this.b2,i=n[0],e=n[1],a=n[2];var u=i+e*r+a*t+1;this.b2[0]=u%r;this.b2[1]=~~(u/r)%r;this.b2[2]=~~(u/t)%r;return u};return r}();var ni=function(t){n(r,t);function r(){var r=t!==null&&t.apply(this,arguments)||this;r.CLASS_NAME=\"AMap.MapboxVectorTileLayer\";r.colorPick=new ti;return r}r.prototype.getLayerConfig=function(){var r=t.prototype.getLayerConfig.call(this);return r};r.prototype.getSourceConfig=function(){return{id:this._id,tileUrl:this.Be||\"\",type:\"mapboxVectorTile\",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[3,18],projection:this.hl||\"EPS3857\"}};r.prototype.getLayerOptions=function(){return{zIndex:this.Qh,visible:this.il,zooms:this.xt,opacity:this.tl,styles:this.Ze,layer:this,rejectMapMask:this._rejectMapMask,depthTest:this.AF}};r.prototype.getState=function(){return I({},this.getLayerOptions())};r.prototype.co=function(){return this._id};r.prototype.destroy=function(){this.colorPick.clear();if(this.Jh&&this.Jh[\"destroy\"]){this.Jh.destroy();delete this.Jh}};r.prototype.reload=function(){this.colorPick.clear();if(this.Jh&&this.Jh[\"clearPickFbo\"]){this.Jh[\"clearPickFbo\"]()}if(this.map){var r=this.getSource();r[\"setTileUrl\"](this.Be);r.reload();this.map.setNeedUpdate(true)}};r.prototype.m2=function(r,t){if(t===void 0){t=5}var n=[r[0]-t,r[1]+t];var i=[r[0]-t,r[1]-t];var e=[r[0]+t,r[1]+t];var a=[r[0]+t,r[1]-t];var u=this.map&&this.map[\"containerToLngLat\"].bind(this.map);if(u){return[u(n).toArray(),u(i).toArray(),u(a).toArray(),u(e).toArray(),u(n).toArray()]}return[]};r.prototype.w2=function(r,t){var n=this.map&&this.map[\"getProjection\"]()[\"project\"];var i=[];for(var e=0,a=t.length;e<a;e++){var u=n(t[e][0],t[e][1]);i.push([u[0]-r.center[0],u[1]-r.center[1]])}return i};r.prototype._2=function(r,t){var n=this.g2(r);var i=this.map&&this.map[\"getProjection\"]();if(!i){return}var e=this.Qs||[2,18];t=Math.max(Math.min(t,e[1]),e[0])-0;var a=[i[\"project\"](n[0][0],n[0][1]),i[\"project\"](n[1][0],n[1][1])];var u=i[\"getResolution\"](t);var o=this.Xa||256;var f=20037508.342789244;var s=a[0][0]+f;var v=-(a[1][1]-f);var c=a[1][0]+f;var h=-(a[0][1]-f);var l=s/u;var b=c/u;var d=v/u;var p=h/u;var j=Math.floor(b/o);var y=Math.min((1<<t)-0,Math.floor(p/o));var A=Math.floor(l/o);var M=Math.max(Math.floor(d/o),0);return{Oa:j,Ea:y,ja:A,Fa:M,z:t}};r.prototype.g2=function(r){var t=Infinity;var n=Infinity;var i=-Infinity;var e=-Infinity;for(var a=0,u=r.length;a<u;a++){var o=r[a];t=Math.min(t,o[0]);i=Math.max(i,o[0]);n=Math.min(n,o[1]);e=Math.max(e,o[1])}return[[t,n],[i,e]]};r.prototype.O2=function(r,t,n){var i;var e=r.path;if(!this.map){return}var a=[];for(var u=0,o=e.length;u<o;u++){var f=e[u];var s=this.map[\"coordsToLngLat\"]([t[0]+f[0],t[1]+f[1]]).toArray();a.push(s)}return{properties:I({},r.properties),path:a};if(n===\"point\"){var f=(i=this.map)===null||i===void 0?void 0:i.coordsToLngLat([t[0]+e[0],t[1]+e[1]])}};return r}(AMap[\"TileLayer\"]);var ii=M[\"Support\"];var ei=ii.scale;var ai=function(v){n(r,v);function r(r){var t=v.call(this,r)||this;t.LE={};t.S2=0;t.iv=false;t.tP={id:r.id||\"MapboxVTLayer_\"+AMap[\"Util\"].uuid(),zooms:[2,22],dataZooms:[2,18],opacity:1,visible:true,zIndex:80,labelLayerOpts:{},styles:{polygon:{color:\"rgba(150,40,40,1)\",borderWidth:0,borderColor:\"rgba(255,255,255,1)\",Hx:[10,0,10,0],z2:[],visible:true,filter:[]},line:{lineWidth:10,color:\"rgba(150,40,40,1)\",Hx:[10,0,10,0],filter:[],z2:[],visible:true},point:{radius:20,color:\"rgba(150,40,40,1)\",borderWidth:0,borderColor:\"rgba(255,255,255,1)\",filter:[],z2:[],visible:true},polyhedron:{topColor:\"rgba(150,40,40,1)\",sideColor:\"rgba(150,40,40,1)\",texture:\"\",z2:[],visible:true,filter:[]},label:{}}};t._id=t.tP.id;t.Ze=r.styles||t.tP.styles;t.Ze.point=AMap[\"Util\"][\"baseAssign\"](t.tP.styles.point,r.styles.point);t.Ze.line=AMap[\"Util\"][\"baseAssign\"](t.tP.styles.line,r.styles.line);t.Ze.polygon=AMap[\"Util\"][\"baseAssign\"](t.tP.styles.polygon,r.styles.polygon);t.Ze.polyhedron=AMap[\"Util\"][\"baseAssign\"](t.tP.styles.polyhedron,r.styles.polyhedron);t.Ze.label=AMap[\"Util\"][\"baseAssign\"](t.tP.styles.label,r.styles.label);t.Ml=r.url||\"\";t.Be=t.F2(r.url||\"\");t.xt=r.zooms||t.tP.zooms;t.tl=r.opacity===undefined?t.tP.opacity:r.opacity;t.il=r.visible===undefined?t.tP.visible:r.visible;t.Qh=r.zIndex===undefined?t.tP.zIndex:r.zIndex;t.Qs=r.dataZooms||t.tP.dataZooms;t.sI=new AMap[\"LabelsLayer\"](r[\"labelLayerOpts\"]||{});t.sI.Ho=[];return t}r.prototype[\"setStyle\"]=function(r){var t=this;this.Ze.point=AMap[\"Util\"][\"baseAssign\"](this.Ze.point,r.point);this.Ze.line=AMap[\"Util\"][\"baseAssign\"](this.Ze.line,r.line);this.Ze.polygon=AMap[\"Util\"][\"baseAssign\"](this.Ze.polygon,r.polygon);this.Ze.polyhedron=AMap[\"Util\"][\"baseAssign\"](this.Ze.polyhedron,r.polyhedron);this.Ze.label=AMap[\"Util\"][\"baseAssign\"](this.Ze.label,r.label);this.sI.Ho=[];clearTimeout(this.I2);if(this.S2===0){if(this.map){this.sI.T2=true;this.source.reStyle(this.cX(),this.map.getView().getStatus().optimalZoom);this.map.setNeedUpdate(true);clearTimeout(this.I2)}}else{this.I2=setTimeout(function(){t.S2=0;t.setStyle({})},100)}this.S2=1};r.prototype[\"filterByRect\"]=function(m,w){var _=this;if(w===void 0){w=\"all\"}var g=[];var O=[];var x=[];var S=[];var k=this.map&&this.map[\"getView\"]()[\"getStatus\"]().optimalZoom||1;var z=this.Qs&&this.Qs[1]||1;var F=this._2(m,Math.min(k-1,z));if(!F){return}this.source.forEachTileCache(function(r){if((k===r.zo.z+1||z===r.zo.z)&&r.data&&r.status===\"loaded\"&&F.ja<=r.zo.x&&F.Oa>=r.zo.x&&F.Fa<=r.zo.y&&F.Ea>=r.zo.y){var t=_.w2(r.data.Hs,m);var n=r.data.visible;var i=r[\"localCoord\"].center;if((w===\"point\"||w===\"all\")&&r.data[\"points\"]){var e=r.data[\"points\"];for(var a in e){var u=_.Ze[\"point\"][\"sourceLayer\"];var o=false;if(u){if(u===a){o=true}}else{o=true}if(o){var f=r.data[\"points\"][a];if(f){for(var s=0,v=f.length;s<v;s++){var c=f[s].path[0];if(AMap[\"PlaneGeometryUtil\"][\"isPointInBbox\"](c,t)){if(n.point&&n.point[_.Ze[\"point\"][\"sourceLayer\"]]&&n.point[_.Ze[\"point\"][\"sourceLayer\"]].indexOf(f[s][\"_id_\"])>-1){g.push(I(I({},_.O2(f[s],i,\"\")),{source:a}))}}}}}}}if((w===\"line\"||w===\"all\")&&r.data[\"polylines\"]){var h=r.data[\"polylines\"];for(var a in h){var u=_.Ze[\"line\"][\"sourceLayer\"];var o=false;if(u){if(u===a){o=true}}else{o=true}if(o){var l=h[a];if(l){for(var s=0,v=l.length;s<v;s++){var c=l[s].path;if(AMap[\"PlaneGeometryUtil\"][\"doesLineRingIntersect\"](c,t)||AMap[\"PlaneGeometryUtil\"][\"isRingInRing\"](c,t)){if(n.line&&n.line[_.Ze[\"line\"][\"sourceLayer\"]]&&n.line[_.Ze[\"line\"][\"sourceLayer\"]].indexOf(l[s][\"_id_\"])>-1){O.push(I(I({},_.O2(l[s],i,\"\")),{source:a}))}}}}}}}if((w===\"polygon\"||w===\"all\")&&r.data[\"polygons\"]){var u=_.Ze[\"polygon\"][\"sourceLayer\"];var b=r.data[\"polygonOut\"];for(var a in b){var o=false;if(u){if(u===a){o=true}}else{o=true}if(o){var d=b[a];if(d){for(var s=0,v=d.length;s<v;s++){var c=d[s].path;var p=[];if(c[0][0]instanceof Array){p=c[0]}else{p=c}if(AMap[\"PlaneGeometryUtil\"][\"isRingInRing\"](p,t)||AMap[\"PlaneGeometryUtil\"][\"isRingInRing\"](t,p)||AMap[\"PlaneGeometryUtil\"][\"doesRingRingIntersect\"](p,t)){if(n.polygon&&n.polygon[_.Ze[\"polygon\"][\"sourceLayer\"]]&&n.polygon[_.Ze[\"polygon\"][\"sourceLayer\"]].indexOf(d[s][\"_id_\"])>-1){x.push(I(I({},_.O2(d[s],i,\"\")),{source:a}))}}}}}}}if((w===\"polyhedron\"||w===\"all\")&&r.data[\"polyhedrons\"]){var u=_.Ze[\"polyhedron\"][\"sourceLayer\"];var j=r.data[\"polyhedrons\"];for(var a in j){var o=false;if(u){if(u===a){o=true}}else{o=true}if(o){var y=j[a];if(y){for(var s=0,v=y.length;s<v;s++){var c=y[s].path;var A=[];for(var M=0;M<c.length;M+=2){A.push([c[M],c[M+1]])}if(AMap[\"PlaneGeometryUtil\"][\"isRingInRing\"](A,t)||AMap[\"PlaneGeometryUtil\"][\"isRingInRing\"](t,A)||AMap[\"PlaneGeometryUtil\"][\"doesRingRingIntersect\"](A,t)){if(n.polyhedron&&n.polyhedron[_.Ze[\"polyhedron\"][\"sourceLayer\"]]&&n.polyhedron[_.Ze[\"polyhedron\"][\"sourceLayer\"]].indexOf(y[s][\"_id_\"])>-1){S.push(I(I({},_.O2(I(I({},y[s]),{path:A}),i,\"\")),{source:a}))}}}}}}}}});return{points:g,lines:O,polygons:x,polyhedrons:S}};r.prototype[\"queryPolyhedronFeature\"]=function(r){var t=this.getRender();if(!this.map||!this.source.aa||!this.h2()||!t){return}var n=this.map;var i=n.getView().getStatus();var e={layers:n.getLayers(),uo:n.Mv,size:i.size,do:n.do,viewState:i,map:n};var a=this.getState();var u=this.source.getData(i).tiles;var o=n[\"getGL\"]();var f=r[0]*ei;var s=o.drawingBufferHeight-r[1]*ei;var v=new Uint8Array(4);var c=t.pickRender(e,a,u);o.bindFramebuffer(o.FRAMEBUFFER,c);o.readPixels(f,s,1,1,o.RGBA,o.UNSIGNED_BYTE,v);o.bindFramebuffer(o.FRAMEBUFFER,null);var h=this.colorPick.GV([v[0],v[1],v[2]]);if(!h){return}return this.D2(u,h)};r.prototype[\"reload\"]=function(){v.prototype[\"reload\"].call(this)};r.prototype[\"setUrl\"]=function(r){this.Be=r;this.reload()};r.prototype[\"getUrl\"]=function(){return this.Be};r.prototype.cX=function(){var r=this.Ze;var t={point:{},polygon:{},line:{},label:{},polyhedron:{}};t[\"label\"]=this.U2(r[\"label\"],t[\"label\"]);t[\"point\"]=this.U2(r[\"point\"],t[\"point\"]);t[\"line\"]=this.U2(r[\"line\"],t[\"line\"]);t[\"polygon\"]=this.U2(r[\"polygon\"],t[\"polygon\"]);t[\"polyhedron\"]=this.U2(r[\"polyhedron\"],t[\"polyhedron\"]);return t};r.prototype[\"on\"]=function(a,r,t){var u=this;var n;if(t===void 0){t={featType:\"all\",buffer:5}}var o=this[\"getEvents\"]();var i=!!o[a];var f=t[\"featType\"]||\"all\";var s=t[\"buffer\"];v.prototype[\"on\"].call(this,a,r,this,false);if(!this.map){var e={fn:r,context:this,once:false};if(this.LE[a]){this.LE[a].push(e)}else{this.LE[a]=[e]}return this}if(i){return this}if(a===\"click\"||a===\"mousemove\"){(n=this.map)===null||n===void 0?void 0:n.on(a,function(r){if(!o[a]){return u}r.type=a;r.target=u;var t=u.m2(r.pixel.toArray(),s);var n=u[\"filterByRect\"](t,f);if((a===\"click\"||!u.iv)&&(f===\"polyhedron\"||f===\"all\")){var i=u[\"queryPolyhedronFeature\"](r.pixel.toArray());if(i&&n){n.polyhedrons=[i]}}var e={preProps:u.IE,features:n,origin:r,mouseBounds:t};u[\"emit\"](a,e)})}return this};r.prototype[\"hide\"]=function(){v.prototype[\"hide\"].call(this);this.sI[\"hide\"]()};r.prototype[\"show\"]=function(){v.prototype[\"show\"].call(this);this.sI[\"show\"]()};r.prototype[\"onAdd\"]=function(){var r;v.prototype[\"onAdd\"].call(this);(r=this.map)===null||r===void 0?void 0:r.add(this.sI);this.tv();if(this.LE){for(var t in this.LE){if(this.LE.hasOwnProperty(t)){var n=this.LE[t];for(var i=0;i<n.length;i++){this[\"on\"](t,n[i].fn,n[i].context)}}}}};r.prototype[\"getLabelsLayer\"]=function(){return this.sI};r.prototype.getState=function(){return I(I({},this.getLayerOptions()),{layer:this})};r.prototype.U2=function(r,t){for(var n in r){var i=r[n];t[n]=i;if(i.toString().indexOf(\"function\")>-1){t[n]=i.toString()}if(n===\"icon\"||n===\"style\"||n===\"text\"){t[n]=this.U2(r[n],t[n])}}return t};r.prototype.tv=function(){var r=this;if(this.map){this.map.on(\"mousedown\",function(){r.iv=true});this.map.on(\"mouseup\",function(){r.iv=false})}};r.prototype.h2=function(){var r;if(!this.il){return false}if(this.tl<=0){return false}if((r=this.map)===null||r===void 0?void 0:r.TL()){return false}var t=this.map[\"getZoom\"]();if(t<this.xt[0]||t>this.xt[1]){return false}return true};r.prototype.D2=function(r,t){var n=this.map.getView().getStatus().optimalZoom||1;var i=this.Qs&&this.Qs[1]||1;for(var e=0,a=r;e<a.length;e++){var u=a[e];if((n===u.zo.z+1||i===u.zo.z)&&u.data&&u.data[\"polyhedrons\"]&&u.status===\"loaded\"){var o=this.Ze[\"polyhedron\"][\"sourceLayer\"];var f=u.data[\"polyhedrons\"];var s=u.data.visible;var v=u[\"localCoord\"].center;for(var c in f){var h=false;if(o){if(o===c){h=true}}else{h=true}if(h){var l=f[c];if(l){for(var b=0,d=l.length;b<d;b++){if(t===l[b][\"_id_\"]&&s.polyhedron&&s.polyhedron[this.Ze[\"polyhedron\"][\"sourceLayer\"]]&&s.polyhedron[this.Ze[\"polyhedron\"][\"sourceLayer\"]].indexOf(l[b][\"_id_\"])>-1){var p=l[b].path;var j=[];for(var y=0;y<p.length;y+=2){j.push([p[y],p[y+1]])}return I(I({},this.O2(I(I({},l[b]),{path:j}),v,\"\")),{source:c})}}}}}}}return null};r.prototype.F2=function(r){var t=r?r.split(\"amap://mvt/\"):[],n=t[0],i=t[1];if(!i){return r}var e=AMap[\"getConfig\"]()[\"appname\"];var a=AMap[\"getConfig\"]()[\"jscode\"];var u=AMap[\"getConfig\"]()[\"gaodeserver\"];var o=AMap[\"getConfig\"]()[\"server\"];var f=AMap[\"getConfig\"]()[\"key\"];if(e.includes(\"studio.amap.test\")){o=\"http://11.159.67.111\";f=\"78743c07e0d6aabdbd46234023a86e39\"}else if(e.includes(\"pre-lbs-studio.amap.com\")){o=\"https://restapi-pre-test.amap.com\"}var s=[\"z=[z]&x=[x]&y=[y]&size=512&id=\"+i];s.push(\"key=\"+f+\"&s=rsv3\");if(a){s.push(\"jscode=\"+a)}return(u||o)+\"/rest/lbs/geohub/tiles/mvt?\"+s.join(\"&\")};return r}(ni);AMap[\"MapboxVectorTileLayer\"]=ai;exports.MapboxVectorTileLayer=ai})();\n");
_jsload_('AMap.MarkerCluster.js',"!function(u){\"use strict\";function n(t,i){t.prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i}var v=function(r){function t(t,i){var n;return(n=r.call(this)||this).CLASS_NAME=\"AMap.DataCluster\",n.t=t,n.i=t.getMap(),n.s=t.getGridSize(),n.h=t.getMinClusterSize(),n.o=t.isAverageCenter(),n.u=t.getUserDataLen(),n.v=t.v,n.l=i,n.p=null,n.m=[],n.M=[],n.I=null,n.g=[],n}n(t,r);var i=t.prototype;return i.j=function(){return this.p},i.O=function(t,i){if(0===this.m.length&&(this.p=t),i&&(this.k=i),this.m.push(t),t._amapMarker&&t._amapMarker.originData&&0<t._amapMarker.originData.length)for(var n=t._amapMarker.originData.length,r=0;r<n;r++){var s=t._amapMarker.originData[r];this.M.push(s)}},i.N=function(t){if(0===this.m.length)return!1;var i=t._amapMarker.posContainer,n=this.p._amapMarker.posContainer;return Math.abs(i.x-n.x)<=this.s&&Math.abs(i.y-n.y)<=this.s},i.A=function(t,i){if(0===this.m.length)return!1;for(var n=!1,r=0;r<i.length;r++){var s=i[r];void 0!==t[s]&&void 0!==this.p[s]&&t[s]===this.p[s]&&(n=!0)}return n},i.S=function(){var t=this.m.length;if(!t)return null;var i={};if(this.o){i.lnglat=this.m[0].lnglat;for(var n=0,r=0,s=0;s<t;s++){var h=this.m[s];if(h.lnglat)n+=parseFloat(h.lnglat.lng),r+=parseFloat(h.lnglat.lat)}i.lnglat=[(n/t).toFixed(7),(r/t).toFixed(7)]}else this.p&&(i.lnglat=this.p.lnglat);for(var o=0,e=0;e<t;e++){o+=this.m[e]._amapMarker.count}return i.COUNT=o,this.m[0]&&this.m[0].originMarker&&(i.originMarker=this.m[0].originMarker),this.D(i)},i.D=function(t){var i=this.t.getStyles(),n=t.COUNT||1,r=null,s=i[this.J(n)-1],h=this.C(n,s),o=this.t.renderClusterMarker,e=this.t.renderMarker;return n>=this.h&&this.l<=this.v?(r=new u.Marker({position:t.lnglat,anchor:\"top-left\"}),o?o.call(null,{clusterData:this.m,count:n,marker:r,indexs:this.k}):(r.setContent(h.content),r.setOffset(h.offset))):(r=t.originMarker?t.originMarker:new u.Marker({position:t.lnglat,anchor:\"top-left\",offset:new u.Pixel(-9,-32)}),e&&e.call(null,{count:n,marker:r,data:this.m,indexs:this.k})),r},i.C=function(t,i){var n=document.createElement(\"div\");return n.style.width=i.size.width+\"px\",n.style.height=i.size.height+\"px\",n.innerHTML=t,n.style.backgroundImage=\"url(\"+i.url+\")\",n.style.textAlign=\"center\",n.style.lineHeight=i.size.height+\"px\",n.style.backgroundPosition=i.imageOffset?i.imageOffset.x+\"px \"+i.imageOffset.y+\"px\":\"0 0\",n.style.color=i.textColor||\"#000\",n.style.fontSize=i.textSize?i.textSize+\"px\":\"12px\",n.style.cursor=\"pointer\",{content:n,offset:i.offset||new u.Pixel(0,0)}},i.J=function(t){for(var i=0,n=t;0!==n;)n=parseInt(n/10,10),i+=1;return i=Math.min(i,5)},i.F=function(){return this.m},i.L=function(){for(var t=[],i=this.M.length,n=0;n<i;n++){var r=this.M[n];t=t.concat(r)}return t},i.X=function(t){var i,n=t.constructor===Array?[]:{};if(\"object\"==typeof t){if(window.JSON)i=JSON.stringify(t),n=JSON.parse(i);else for(var r in t)n[r]=\"object\"==typeof t[r]?cloneObj(t[r]):t[r];return n}},t}(u.Event),t=function(s){function t(t,i,n){var r;n=n||{},(r=s.call(this)||this).Y=!1,r.i=t,r.s=n.gridSize||60,r.h=2,r.v=n.maxZoom||18,r.o=void 0===n.averageCenter||n.averageCenter,r.renderClusterMarker=n.renderClusterMarker||n.renderCluserMarker||null,r.renderMarker=n.renderMarker||null,r.G=n.clusterIndexSet||null,r.R=n.styles||r.Z(),r.q=n.pointStyles||r.Z(),r.B=n.clusterByZoomChange||!1;return r.H={K:{default:Math.floor(r.s/3/1),P:Math.floor(r.s/3.5/1),big:Math.floor(r.s/4/1),T:Math.floor(r.s/4.5/1),small:Math.floor(r.s/5/1),U:2}},r.V=[],r.W=[],r.$=[],r._=[],r.tt={},r.it=r.nt(i),t&&(r.l=r.i.getZoom(),r.rt(),r.st(),r.ht()),r}n(t,s);var i=t.prototype;return i.setRenderMarkerStyle=function(t){this.renderMarker=t},i.setMarkers=function(t){if(!t.length)return!1;t.length},i.setData=function(t){this.it=this.nt(t),this.ht()},i.addData=function(t){for(var i=this.nt(t),n=i.length,r=0;r<n;r++){var s=i[r];this.it.push(s)}this.ht()},i.getClustersCount=function(){return this._.length},i.getMap=function(){return this.i},i.setMap=function(t){this.i!==t&&(this.ot(),this.rt(),t&&(this.i=t,this.st(),this.ht()))},i.getGridSize=function(){return this.s},i.setGridSize=function(t){this.s=t,this.ht()},i.getMaxZoom=function(){return this.v},i.setMaxZoom=function(t){this.v=t,this.ht()},i.getUserDataLen=function(){return this.it.length},i.getStyles=function(){return this.R},i.setStyles=function(t){this.R=t,this.ht()},i.getMinClusterSize=function(){return this.h},i.setMinClusterSize=function(t){this.h=t,this.ht()},i.isAverageCenter=function(){return this.o},i.setAverageCenter=function(t){this.o=t,this.ht()},i.st=function(){this.i&&(this.i.on(\"zoomend\",this.et,this),this.i.on(\"zoomstart\",this.ut,this),this.B?this.i.on(\"zoomchange\",this.at,this):this.i.on(\"moveend\",this.moveEnd,this))},i.rt=function(){this.i&&(this.i.off(\"zoomend\",this.et,this),this.i.on(\"zoomstart\",this.ut,this),this.B?this.i.off(\"zoomchange\",this.at,this):this.i.off(\"moveend\",this.moveEnd,this))},i.ut=function(){this.Y=!0},i.et=function(){this.Y=!1,this.ht()},i.moveEnd=function(){this.Y||this.ht()},i.at=function(){this.ht()},i.nt=function(t){var i=[];if(!t)return i;for(var n=t.length,r=0;r<n;r++){var s=t[r];0===r&&void 0!==s.weight&&(this.o=!1),s.lnglat=this.ft(s.lnglat),s.lnglat&&i.push(s)}return i},i.ht=function(){var t;if(this.l=this.i.getZoom(),this.l>this.v){t=this.ct(),this.V=t;var i=this.vt(t);this.lt(i)}else{t=this.pt(),this.V=t;var n=this.vt(t);this.lt(n)}},i.vt=function(t){this._=[];var i=t.length,n=this.l,r=this.i.getBounds();r=this.dt(r,5);for(var s=this.it.length,h=0;h<i;h++){var o=!0,e=t[h],u=(e.lnglat,e._amapMarker);if(this.wt(r,u.posContainer)){if(e._amapMarker.used=!0,n<=this.v&&s>this.h)for(var a=0;a<this._.length;a++){var f=this._[a];if(f.N(e)){f.O(e),o=!1;break}}if(o){var c=new v(this,n);c.O(e),this._.push(c)}}}return this._},i.ct=function(){for(var t=this.it,i=[],n=0;n<t.length;n++){var r=t[n],s=r.lnglat,h=this.i.lngLatToContainer(s);r._amapMarker={posContainer:h,count:1,used:!1},i.push(r)}return i},i.ot=function(){this.i&&this.i.remove(this.W),this.W=[]},i.lt=function(h){for(var o=this,t=h.length,e=[],i=function(t){var i=h[t],n=i.j().lnglat,r=i.S(),s=i.L();e.push(r),r.on(\"click\",function(){o.emit(\"click\",{cluster:i,lnglat:n,target:o,marker:r,clusterData:s})}),r.show()},n=0;n<t;n++)i(n);this.ot(),this.i.add(e),this.W=e},i.dt=function(t,i){var n=this.i.lngLatToContainer(t.getNorthEast()),r=this.i.lngLatToContainer(t.getSouthWest()),s=[parseInt(n.x),parseInt(r.x)],h=[parseInt(n.y),parseInt(r.y)];s.sort(function(t,i){return t-i}),h.sort(function(t,i){return t-i});var o=parseInt(this.s*i);return{Mt:parseInt(s[0]-o),bt:parseInt(h[1]+o),It:parseInt(s[1]+o),gt:parseInt(h[0]-o)}},i.wt=function(t,i){if(!(t&&i&&i.x&&i.y))return!1;var n=t.Mt,r=t.It,s=t.bt,h=t.gt;return i.x<r&&i.x>n&&i.y>h&&i.y<s},i.pt=function(){this.l=this.i.getZoom();var t=this.l,i=this.H.K.default;6<=t&&t<9?i=this.H.K.P:9<=t&&t<11?i=this.H.K.big:11<=t&&t<14?i=this.H.K.T:14<=t&&t<16?i=this.H.K.small:16<=t&&(i=this.H.K.U);var n=this.it,r={},s=[],h=this.i.getBounds();h=this.dt(h,5);for(var o=this.i.lnglatToPixelArray([108.939621,34.343147],this.l),e=Math.floor(o[0]),u=Math.floor(o[1]),a=0;a<n.length;a++){var f=n[a],c=f.lnglat,v=this.i.lngLatToContainer(c);if(this.wt(h,v)){var l=this.i.lnglatToPixelArray(c,this.l),p=Math.floor(l[0]),d=Math.floor(l[1]),m=f.weight,w=Math.floor((p-e)/i),M=Math.floor((d-u)/i);f._amapMarker={posContainer:v,used:!1};var b=r[w];if(b){var I=b[M];I?m?I[m]?I[m].push(f):I[m]=[f]:I[0]?I[0].push(f):I[0]=[f]:(r[w][M]={},m?r[w][M][m]=[f]:r[w][M][0]=[f])}else r[w]={},r[w][M]={},m?r[w][M][m]=[f]:r[w][M][0]=[f]}}for(var g in r){var x=r[g];for(var j in x){var O=r[g][j],y=Object.keys(O),z=O[y[y.length-1]],k=[],N=0;for(var A in O){var S=O[A];N+=S.length,k.push(S)}var D=z[0];D._amapMarker.count=N,D._amapMarker.originData=k,z&&z.length&&z.length,s.push(D)}}return s.sort(function(t,i){return i.weight-t.weight}),s},i.ft=function(t){if(!t)return!1;if(t.className&&\"AMap.LngLat\"===t.className)return t;if(Array.isArray(t)&&2===t.length&&(t={lng:Number(t[0]),lat:Number(t[1])}),!t.lng||!t.lat)return!1;var i=new u.LngLat(t.lng,t.lat);return!!i.lat&&(!!i.lng&&i)},i.Z=function(){for(var t=[53,56,66,78,90],i=[],n=0;n<5;n+=1)i.push({url:\"http://47.93.246.7/api/static/theme/v1.3/m\"+(n+1)+\".png\",size:new u.Size(t[n],t[n]),offset:new u.Pixel(-t[n]/2,-t[n]/2,!0)});return i},i.X=function(t){var i,n=t.constructor===Array?[]:{};if(\"object\"==typeof t){if(window.JSON)i=JSON.stringify(t),n=JSON.parse(i);else for(var r in t)n[r]=\"object\"==typeof t[r]?cloneObj(t[r]):t[r];return n}},t}(u.Event);u.MarkerClusterer=t,u.MarkerCluster=t}(window.AMap);\n");
_jsload_('AMap.MarkerClusterer.js',"!function(u){\"use strict\";function n(t,i){t.prototype=Object.create(i.prototype),(t.prototype.constructor=t).__proto__=i}var v=function(s){function t(t,i){var n;return(n=s.call(this)||this).CLASS_NAME=\"AMap.DataCluster\",n.t=t,n.i=t.getMap(),n.s=t.getGridSize(),n.h=t.getMinClusterSize(),n.o=t.isAverageCenter(),n.u=t.getUserDataLen(),n.v=t.v,n.l=i,n.p=null,n.m=[],n.M=null,n.I=[],n}n(t,s);var i=t.prototype;return i.g=function(){return this.p},i.j=function(t,i){0===this.m.length&&(this.p=t),i&&(this.O=i),this.m.push(t)},i.k=function(t){if(0===this.m.length)return!1;var i=t._amapMarker.posContainer,n=this.p._amapMarker.posContainer;return Math.abs(i.x-n.x)<=this.s&&Math.abs(i.y-n.y)<=this.s},i.N=function(t,i){if(0===this.m.length)return!1;for(var n=!1,s=0;s<i.length;s++){var r=i[s];void 0!==t[r]&&void 0!==this.p[r]&&t[r]===this.p[r]&&(n=!0)}return n},i.A=function(){var t=this.m.length;if(!t)return null;var i={};if(this.o){i.lnglat=this.m[0].lnglat;for(var n=0,s=0,r=0;r<t;r++){var h=this.m[r];if(h.lnglat)n+=parseFloat(h.lnglat.lng),s+=parseFloat(h.lnglat.lat)}i.lnglat=[(n/t).toFixed(7),(s/t).toFixed(7)]}else this.p&&(i.lnglat=this.p.lnglat);for(var e=0,o=0;o<t;o++){e+=this.m[o]._amapMarker.count}return i.COUNT=e,this.m[0]&&this.m[0].originMarker&&(i.originMarker=this.m[0].originMarker),this.S(i)},i.S=function(t){var i=this.t.getStyles(),n=t.COUNT||1,s=null,r=i[this.D(n)-1],h=this.J(n,r),e=this.t.renderClusterMarker,o=this.t.renderMarker;return n>=this.h&&this.l<=this.v?(s=new u.Marker({position:t.lnglat,anchor:\"top-left\"}),e?e.call(null,{clusterData:this.m,count:n,marker:s,indexs:this.O}):(s.setContent(h.content),s.setOffset(h.offset))):(s=t.originMarker?t.originMarker:new u.Marker({position:t.lnglat,anchor:\"top-left\",offset:new u.Pixel(-9,-32)}),o&&o.call(null,{count:n,marker:s,data:this.m,indexs:this.O})),s},i.J=function(t,i){var n=document.createElement(\"div\");return n.style.width=i.size.width+\"px\",n.style.height=i.size.height+\"px\",n.innerHTML=t,n.style.backgroundImage=\"url(\"+i.url+\")\",n.style.textAlign=\"center\",n.style.lineHeight=i.size.height+\"px\",n.style.backgroundPosition=i.imageOffset?i.imageOffset.x+\"px \"+i.imageOffset.y+\"px\":\"0 0\",n.style.color=i.textColor||\"#000\",n.style.fontSize=i.textSize?i.textSize+\"px\":\"12px\",n.style.cursor=\"pointer\",{content:n,offset:i.offset||new u.Pixel(0,0)}},i.D=function(t){for(var i=0,n=t;0!==n;)n=parseInt(n/10,10),i+=1;return i=Math.min(i,5)},i.C=function(){return this.m},i.F=function(t){var i,n=t.constructor===Array?[]:{};if(\"object\"==typeof t){if(window.JSON)i=JSON.stringify(t),n=JSON.parse(i);else for(var s in t)n[s]=\"object\"==typeof t[s]?cloneObj(t[s]):t[s];return n}},t}(u.Event),t=function(r){function t(t,i,n){var s;n=n||{},(s=r.call(this)||this).L=!1,s.i=t,s.s=n.gridSize||60,s.h=2,s.v=n.maxZoom||18,s.o=void 0===n.averageCenter||n.averageCenter,s.renderClusterMarker=n.renderClusterMarker||n.renderCluserMarker||null,s.renderMarker=n.renderMarker||null,s.X=n.clusterIndexSet||null,s.Y=n.styles||s.G(),s.R=n.pointStyles||s.G(),s.Z=n.clusterByZoomChange||!1;return s.q={B:{default:Math.floor(s.s/3/1),H:Math.floor(s.s/3.5/1),big:Math.floor(s.s/4/1),K:Math.floor(s.s/4.5/1),small:Math.floor(s.s/5/1),P:2}},s.T=[],s.U=[],s.V=[],s.W=[],s.$={},s._=s.tt(i),t&&(s.l=s.i.getZoom(),s.it(),s.nt(),s.st()),s}n(t,r);var i=t.prototype;return i.setRenderMarkerStyle=function(t){this.renderMarker=t},i.setMarkers=function(t){if(!t.length)return!1;t.length},i.setData=function(t){this._=this.tt(t),this.st()},i.addData=function(t){for(var i=this.tt(t),n=i.length,s=0;s<n;s++){var r=i[s];this._.push(r)}this.st()},i.getClustersCount=function(){return this.W.length},i.getMap=function(){return this.i},i.setMap=function(t){this.i!==t&&(this.rt(),this.it(),t&&(this.i=t,this.nt(),this.st()))},i.getGridSize=function(){return this.s},i.setGridSize=function(t){this.s=t,this.st()},i.getMaxZoom=function(){return this.v},i.setMaxZoom=function(t){this.v=t,this.st()},i.getUserDataLen=function(){return this._.length},i.getStyles=function(){return this.Y},i.setStyles=function(t){this.Y=t,this.st()},i.getMinClusterSize=function(){return this.h},i.setMinClusterSize=function(t){this.h=t,this.st()},i.isAverageCenter=function(){return this.o},i.setAverageCenter=function(t){this.o=t,this.st()},i.nt=function(){this.i&&(this.i.on(\"zoomend\",this.ht,this),this.i.on(\"zoomstart\",this.et,this),this.Z?this.i.on(\"zoomchange\",this.ot,this):this.i.on(\"moveend\",this.moveEnd,this))},i.it=function(){this.i&&(this.i.off(\"zoomend\",this.ht,this),this.i.on(\"zoomstart\",this.et,this),this.Z?this.i.off(\"zoomchange\",this.ot,this):this.i.off(\"moveend\",this.moveEnd,this))},i.et=function(){this.L=!0},i.ht=function(){this.L=!1,this.st()},i.moveEnd=function(){this.L||this.st()},i.ot=function(){this.st()},i.tt=function(t){var i=[];if(!t)return i;for(var n=t.length,s=0;s<n;s++){var r=t[s];0===s&&void 0!==r.weight&&(this.o=!1),r.lnglat=this.ut(r.lnglat),r.lnglat&&i.push(r)}return i},i.st=function(){var t;if(this.l=this.i.getZoom(),this.l>this.v){t=this.at(),this.T=t;var i=this.ft(t);this.ct(i)}else{t=this.vt(),this.T=t;var n=this.ft(t);this.ct(n)}},i.ft=function(t){this.W=[];var i=t.length,n=this.l,s=this.i.getBounds();s=this.lt(s,5);for(var r=this._.length,h=0;h<i;h++){var e=!0,o=t[h],u=(o.lnglat,o._amapMarker);if(this.pt(s,u.posContainer)){if(o._amapMarker.used=!0,n<=this.v&&r>this.h)for(var a=0;a<this.W.length;a++){var f=this.W[a];if(f.k(o)){f.j(o),e=!1;break}}if(e){var c=new v(this,n);c.j(o),this.W.push(c)}}}return this.W},i.at=function(){for(var t=this._,i=[],n=0;n<t.length;n++){var s=t[n],r=s.lnglat,h=this.i.lngLatToContainer(r);s._amapMarker={posContainer:h,count:1,used:!1},i.push(s)}return i},i.rt=function(){this.i&&this.i.remove(this.U),this.U=[]},i.ct=function(h){for(var e=this,t=h.length,o=[],i=function(t){var i=h[t],n=i.g().lnglat,s=i.A(),r=i.C();o.push(s),s.on(\"click\",function(){e.emit(\"click\",{cluster:i,lnglat:n,target:e,marker:s,clusterData:r})}),s.show()},n=0;n<t;n++)i(n);this.rt(),this.i.add(o),this.U=o},i.lt=function(t,i){var n=this.i.lngLatToContainer(t.getNorthEast()),s=this.i.lngLatToContainer(t.getSouthWest()),r=[parseInt(n.x),parseInt(s.x)],h=[parseInt(n.y),parseInt(s.y)];r.sort(function(t,i){return t-i}),h.sort(function(t,i){return t-i});var e=parseInt(this.s*i);return{dt:parseInt(r[0]-e),wt:parseInt(h[1]+e),Mt:parseInt(r[1]+e),bt:parseInt(h[0]-e)}},i.pt=function(t,i){if(!(t&&i&&i.x&&i.y))return!1;var n=t.dt,s=t.Mt,r=t.wt,h=t.bt;return i.x<s&&i.x>n&&i.y>h&&i.y<r},i.vt=function(){this.l=this.i.getZoom();var t=this.l,i=this.q.B.default;6<=t&&t<9?i=this.q.B.H:9<=t&&t<11?i=this.q.B.big:11<=t&&t<14?i=this.q.B.K:14<=t&&t<16?i=this.q.B.small:16<=t&&(i=this.q.B.P);var n=this._,s={},r=[],h=this.i.getBounds();h=this.lt(h,5);for(var e=this.i.lnglatToPixelArray([108.939621,34.343147],this.l),o=Math.floor(e[0]),u=Math.floor(e[1]),a=0;a<n.length;a++){var f=n[a],c=f.lnglat,v=this.i.lngLatToContainer(c);if(this.pt(h,v)){var l=this.i.lnglatToPixelArray(c,this.l),p=Math.floor(l[0]),d=Math.floor(l[1]),m=f.weight,w=Math.floor((p-o)/i),M=Math.floor((d-u)/i);f._amapMarker={posContainer:v,used:!1};var b=s[w];if(b){var I=b[M];I?m?I[m]?I[m].push(f):I[m]=[f]:I[0]?I[0].push(f):I[0]=[f]:(s[w][M]={},m?s[w][M][m]=[f]:s[w][M][0]=[f])}else s[w]={},s[w][M]={},m?s[w][M][m]=[f]:s[w][M][0]=[f]}}for(var g in s){var x=s[g];for(var j in x){var O=s[g][j],y=Object.keys(O),z=O[y[y.length-1]],k=0;for(var N in O){k+=O[N].length}var A=z[0];A._amapMarker.count=k,z&&z.length&&z.length,r.push(A)}}return r.sort(function(t,i){return i.weight-t.weight}),r},i.ut=function(t){if(!t)return!1;if(t.className&&\"AMap.LngLat\"===t.className)return t;if(Array.isArray(t)&&2===t.length&&(t={lng:Number(t[0]),lat:Number(t[1])}),!t.lng||!t.lat)return!1;var i=new u.LngLat(t.lng,t.lat);return!!i.lat&&(!!i.lng&&i)},i.G=function(){for(var t=[53,56,66,78,90],i=[],n=0;n<5;n+=1)i.push({url:\"http://47.93.246.7/api/static/theme/v1.3/m\"+(n+1)+\".png\",size:new u.Size(t[n],t[n]),offset:new u.Pixel(-t[n]/2,-t[n]/2,!0)});return i},i.F=function(t){var i,n=t.constructor===Array?[]:{};if(\"object\"==typeof t){if(window.JSON)i=JSON.stringify(t),n=JSON.parse(i);else for(var s in t)n[s]=\"object\"==typeof t[s]?cloneObj(t[s]):t[s];return n}},t}(u.Event);u.MarkerClusterer=t,u.MarkerCluster=t}(window.AMap);\n");
_jsload_('AMap.MouseTool.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var MouseTool=\"object\"==typeof global&&global&&global.Object===Object&&global,freeModule=\"object\"==typeof self&&self&&self.Object===Object&&self,freeExports$1=MouseTool||freeModule||Function(\"return this\")(),freeExports=freeExports$1.Symbol,freeModule=Object.prototype,hasOwnProperty=freeModule.hasOwnProperty,nativeObjectToString=freeModule.toString,symToStringTag=freeExports?freeExports.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=freeExports?freeExports.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var freeModule=freeExports$1[\"__core-js_shared__\"],maskSrcKey=(freeExports=/[^.]+$/.exec(freeModule&&freeModule.keys&&freeModule.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+freeExports:\"\";var funcToString=Function.prototype.toString;var reIsHostCtor=/^\\[object .+?Constructor\\]$/,freeModule=Function.prototype,freeExports=Object.prototype,freeModule=freeModule.toString,freeExports=freeExports.hasOwnProperty,reIsNative=RegExp(\"^\"+freeModule.call(freeExports).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}(value))}var nativeNow=Date.now;var func,count,lastCalled,defineProperty=function(){try{var func=(object=Object,baseIsNative(value=function(object,key){return null==object?void 0:object[key]}(object,value=\"defineProperty\"))?value:void 0);return func({},\"\",{}),func}catch(e){}var object,value}(),setToString=(func=defineProperty?function(func,string){return defineProperty(func,\"toString\",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity,lastCalled=count=0,function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return(length=null==length?MAX_SAFE_INTEGER:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function baseAssignValue(object,key,value){\"__proto__\"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function eq(value,other){return value===other||value!=value&&other!=other}var hasOwnProperty$2=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$2.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var nativeMax=Math.max;function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$4)}function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var freeModule=Object.prototype,hasOwnProperty$3=freeModule.hasOwnProperty,propertyIsEnumerable=freeModule.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var freeExports=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeExports$1=freeModule&&freeModule.exports===freeExports?freeExports$1.Buffer:void 0,isBuffer=(freeExports$1?freeExports$1.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var freeExports$1=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===freeExports$1&&MouseTool.process,MouseTool=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),MouseTool=MouseTool&&MouseTool.isTypedArray,isTypedArray=MouseTool?function(func){return function(value){return func(value)}}(MouseTool):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$4=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$4.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$5=Object.prototype.hasOwnProperty;function keys(object){return(isArrayLike(object)?arrayLikeKeys:function(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty$5.call(object,key)&&\"constructor\"!=key&&result.push(key);return result})(object)}var hasOwnProperty$6=Object.prototype.hasOwnProperty,assign=function(assigner){return setToString(overRest(func=function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0,customizer=3<assigner.length&&\"function\"==typeof customizer?(length--,customizer):void 0;for(guard&&function(value,index,object){if(isObject(object)){var type=typeof index;return(\"number\"==type?isArrayLike(object)&&isIndex(index,object.length):\"string\"==type&&index in object)&&eq(object[index],value)}}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object},start,identity),func+\"\");var func,start}(function(object,source){if(isPrototype(source)||isArrayLike(source))!function(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;(isNew?baseAssignValue:assignValue)(object,key,newValue=void 0===newValue?source[key]:newValue)}}(source,keys(source),object);else for(var key in source)hasOwnProperty$6.call(source,key)&&assignValue(object,key,source[key])}),MouseTool=function(_super){function __(){this.constructor=d}var d,b;function MouseTool(map){var _this=_super.call(this)||this;return _this.CLASS_NAME=\"AMap.MouseTool\",_this._map=map,_this._container=_this._map.getMapsContainer(),_this.overlays={marker:[],circle:[],rectangle:[],polyline:[],polygon:[],measureArea:[]},_this.ruler=null,_this.eventsList=[],_this.keyboardEventsList=[],_this}return extendStatics(d=MouseTool,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),MouseTool.prototype.marker=function(opts){this._onStart(),this._bind(\"click\",this._renderMarker.bind(this,opts))},MouseTool.prototype.circle=function(opts){this._onStart(),this._bind(\"mousedown\",this._createCircle.bind(this,opts)),this._bind(\"mouseup\",this._doneCircle)},MouseTool.prototype.rectangle=function(opts){this._onStart(),this._bind(\"mousedown\",this._createRectangle.bind(this,opts)),this._bind(\"mouseup\",this._doneRectangle)},MouseTool.prototype.polyline=function(opts){this._onStart(),this._bind(\"click\",this._addPolylinePoint.bind(this,opts)),this._bind(\"rightclick\",this._delPolylineLinePoint.bind(this)),this._bind(\"dblclick\",this._endPolylineLine.bind(this,\"db\"))},MouseTool.prototype.polygon=function(opts){this._onStart(),this._bind(\"click\",this._addPolygonPoint.bind(this,opts)),this._bind(\"dblclick\",this._delPolygonPoint.bind(this)),this._bind(\"rightclick\",this._endPolygon.bind(this))},MouseTool.prototype.measureArea=function(opts){this._onStart(),this._bind(\"click\",this._addMeasureAreaPoint.bind(this,opts)),this._bind(\"rightclick\",this._endMeasureArea.bind(this)),this._bind(\"dblclick\",this._endMeasureArea.bind(this)),this._bind(\"keydown\",this._keydownMeasureArea.bind(this,opts))},MouseTool.prototype.rule=function(opts){var _this=this;this._onStart(),AMap.plugin(\"AMap.RangingTool\",function(){_this.ruler=new AMap.RangingTool(_this._map,opts),_this.ruler.turnOn(),_this.ruler.on(\"end\",function(e){_this.emit(\"draw\",{obj:e.polyline})})})},MouseTool.prototype.rectZoomIn=function(opts){this._onStart(),this._bind(\"mousedown\",this._createRectangle.bind(this,opts)),this._bind(\"mouseup\",this._doneZoomIn)},MouseTool.prototype.rectZoomOut=function(opts){this._onStart(),this._bind(\"mousedown\",this._createRectangle.bind(this,opts)),this._bind(\"mouseup\",this._doneZoomOut)},MouseTool.prototype.close=function(ifClear){if(ifClear){this.ruler&&this.ruler.turnOff(!0);for(var keys=Object.keys(this.overlays),i=0;i<keys.length;i++){var overlay=this.overlays[keys[i]];this._map.remove(overlay)}this.overlays={marker:[],circle:[],rectangle:[],polyline:[],polygon:[],measureArea:[]}}this._onEnd(ifClear)},MouseTool.prototype._bind=function(TYPE,FUN){TYPE&&\"keydown\"===TYPE?(this._container.addEventListener(\"keydown\",FUN,this),this.keyboardEventsList.push({type:TYPE,fun:FUN})):(this._map.on(TYPE,FUN,this),this.eventsList.push({type:TYPE,fun:FUN}))},MouseTool.prototype._unbind=function(){for(var eventLen=this.eventsList.length,keyboardEventLen=this.keyboardEventsList.length,i=0;i<eventLen;i++){var event=this.eventsList[i];this._map.off(event.type,event.fun,this)}for(i=0;i<keyboardEventLen;i++){event=this.keyboardEventsList[i];this._container.removeEventListener(\"keydown\",event.fun)}},MouseTool.prototype._keydownMeasureArea=function(opts,e){e&&\"Escape\"===e.key&&this._endMeasureArea()},MouseTool.prototype._addMeasureAreaPoint=function(polylineOpts,options){var newPoint,pathArr;this.mapDoubleClickZoom=this._map.getStatus().doubleClickZoom,this._map.setStatus({doubleClickZoom:!1}),this.MeasureAreaTemp?(newPoint=[options.lnglat.lng,options.lnglat.lat],(pathArr=this.MeasureAreaTemp.obj.getPath()).push(newPoint),this.MeasureAreaTemp.obj.setPath(pathArr)):(options={path:[options.lnglat,options.lnglat],strokeColor:\"#1791fc\",fillColor:\"#1791fc\",strokeOpacity:.8,fillOpacity:.35,strokeWeight:2,strokeStyle:\"solid\",strokeDasharray:[10,5],zIndex:10,extData:{},bubble:!0,innerOverlay:!0},polylineOpts=assign(options,polylineOpts),this.MeasureAreaTemp={path:[]},this.MeasureAreaTemp.obj=new AMap.Polygon(polylineOpts),this._map.add(this.MeasureAreaTemp.obj),this._map.on(\"mousemove\",this._drawMeasureArea,this)),this.emit(\"addnode\",{obj:this.MeasureAreaTemp.obj})},MouseTool.prototype._drawMeasureArea=function(pathArr){var newPoint;this.MeasureAreaTemp&&this.MeasureAreaTemp.obj&&(newPoint=[pathArr.lnglat.lng,pathArr.lnglat.lat],(pathArr=this.MeasureAreaTemp.obj.getPath()).pop(),pathArr.push(newPoint),this.MeasureAreaTemp.obj.setPath(pathArr))},MouseTool.prototype._endMeasureArea=function(){this._map.setStatus({doubleClickZoom:this.mapDoubleClickZoom});var areaHTML,text=this.MeasureAreaTemp&&this.MeasureAreaTemp.obj&&this.MeasureAreaTemp.obj.getPath();text&&3<text.length?(text.pop(),this.MeasureAreaTemp.obj.setPath(text),areaHTML=1e5<(areaHTML=this.MeasureAreaTemp.obj.getArea())?(1e-6*areaHTML).toFixed(2)+\"平方公里\":areaHTML.toFixed(1)+\"平方米\",text=text[text.length-1],text=new AMap.Text({text:areaHTML,position:text}),this.overlays.measureArea.push(text),this._map.add(text),this.overlays.measureArea.push(this.MeasureAreaTemp.obj),this.emit(\"draw\",{obj:this.MeasureAreaTemp.obj})):this.MeasureAreaTemp&&this._map.remove(this.MeasureAreaTemp.obj),this.MeasureAreaTemp=null,this.emit(\"cancel\",{obj:this.MeasureAreaTemp&&this.MeasureAreaTemp.obj||!1}),this._map.off(\"mousemove\",this._drawMeasureArea,this)},MouseTool.prototype._addPolygonPoint=function(polylineOpts,e){var newPoint,options;this.mapDoubleClickZoom=this._map.getStatus().doubleClickZoom,this._map.setStatus({doubleClickZoom:!1}),this.polygonTemp?(newPoint=[e.lnglat.lng,e.lnglat.lat],(options=this.polygonTemp.obj.getPath()).push(newPoint),this.polygonTemp.obj.setPath(options)):(options={path:[e.lnglat,e.lnglat],strokeColor:\"#1791fc\",fillColor:\"#1791fc\",strokeOpacity:.8,fillOpacity:.35,strokeWeight:2,strokeStyle:\"solid\",strokeDasharray:[10,5],zIndex:10,extData:{},bubble:!0},this.polygonTemp={path:[]},polylineOpts=assign(options,polylineOpts),this.polygonTemp.path.push(e.lnglat),this.polygonTemp.obj=new AMap.Polygon(polylineOpts),this._map.add(this.polygonTemp.obj),this._map.on(\"mousemove\",this._drawGon,this)),this.overlays.polygon.push(this.polygonTemp.obj)},MouseTool.prototype._drawGon=function(pathArr){var newPoint;this.polygonTemp&&this.polygonTemp.obj&&(newPoint=[pathArr.lnglat.lng,pathArr.lnglat.lat],(pathArr=this.polygonTemp.obj.getPath()).pop(),pathArr.push(newPoint),this.polygonTemp.obj.setPath(pathArr))},MouseTool.prototype._delPolygonPoint=function(){var pathArr;this.polygonTemp&&this.polygonTemp.obj&&(pathArr=this.polygonTemp.obj.getPath(),this.polygonTemp.obj.setPath(pathArr)),this._endPolygon()},MouseTool.prototype._endPolygon=function(){var pathArr;this.polygonTemp&&this.polygonTemp.obj&&((pathArr=this.polygonTemp.obj.getPath()).pop(),this.polygonTemp.obj.setPath(pathArr),this.emit(\"draw\",{obj:this.polygonTemp.obj})),this.polygonTemp=null,this._map.setStatus({doubleClickZoom:this.mapDoubleClickZoom}),this._map.off(\"mousemove\",this._drawGon,this)},MouseTool.prototype._addPolylinePoint=function(polylineOpts,e){var newPoint,options;this.mapDoubleClickZoom=this._map.getStatus().doubleClickZoom,this._map.setStatus({doubleClickZoom:!1}),this.polylineTemp?(newPoint=[e.lnglat.lng,e.lnglat.lat],(options=this.polylineTemp.obj.getPath()).push(newPoint),this.polylineTemp.obj.setPath(options)):(options={path:[e.lnglat,e.lnglat],strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:2,strokeStyle:\"solid\",strokeDasharray:[10,5],zIndex:10,extData:{},bubble:!0},polylineOpts=assign(options,polylineOpts),this.polylineTemp={path:[]},this.polylineTemp.path.push(e.lnglat),this.polylineTemp.obj=new AMap.Polyline(polylineOpts),this._map.add(this.polylineTemp.obj),this._map.on(\"mousemove\",this._drawLine,this)),this.overlays.polyline.push(this.polylineTemp.obj)},MouseTool.prototype._drawLine=function(pathArr){var newPoint;this.polylineTemp&&this.polylineTemp.obj&&(newPoint=[pathArr.lnglat.lng,pathArr.lnglat.lat],(pathArr=this.polylineTemp.obj.getPath()).pop(),pathArr.push(newPoint),this.polylineTemp.obj.setPath(pathArr))},MouseTool.prototype._endPolylineLine=function(type){var pathArr=this.polylineTemp.obj.getPath();type&&\"db\"===type&&pathArr.pop(),this.polylineTemp.obj.setPath(pathArr),this.emit(\"draw\",{obj:this.polylineTemp.obj}),this.polylineTemp=null,this._map.setStatus({doubleClickZoom:this.mapDoubleClickZoom}),this._map.off(\"mousemove\",this._drawLine,this)},MouseTool.prototype._delPolylineLinePoint=function(){var pathArr=this.polylineTemp.obj.getPath();pathArr.pop(),this.polylineTemp.obj.setPath(pathArr),this._endPolylineLine()},MouseTool.prototype._renderMarker=function(marker,e){marker=assign({position:e.lnglat},marker),marker=new AMap.Marker(marker);this.overlays.marker.push(marker),this._map.add(marker),this.emit(\"draw\",{obj:marker})},MouseTool.prototype._createCircle=function(newCircle,e){if(this.overlayData)return null;this._map.on(\"mousemove\",this._updateCircle,this);var options={center:e.lnglat,strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#1791fc\",fillOpacity:.35,strokeStyle:\"solid\",strokeDasharray:[10,5],zIndex:10,bubble:!0,radius:0},newCircle=assign(options,newCircle);this.mapDragEnable=this._map.getStatus().dragEnable,this._map.setStatus({dragEnable:!1});newCircle=new AMap.Circle(newCircle);this._map.add(newCircle),this.overlayData={obj:newCircle,center:e}},MouseTool.prototype._doneCircle=function(){this.overlays.circle.push(this.overlayData.obj),this.emit(\"draw\",{obj:this.overlayData.obj}),this.overlayData=null,this._map.off(\"mousemove\",this._updateCircle,this),this._map.setStatus({dragEnable:this.mapDragEnable})},MouseTool.prototype._updateCircle=function(optRadius){this.overlayData&&(optRadius=AMap.GeometryUtil.distance(this.overlayData.center.lnglat,optRadius.lnglat).toFixed(3),this.overlayData.obj.setRadius(optRadius),this.emit(\"drawing\",{obj:this.overlayData.obj}))},MouseTool.prototype._createRectangle=function(newRectangle,e){if(this.overlayData)return null;this._map.on(\"mousemove\",this._updateRectangle,this);var options={bounds:new AMap.Bounds(e.lnglat,e.lnglat),strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:2,fillColor:\"#1791fc\",fillOpacity:.35,strokeStyle:\"solid\",strokeDasharray:[10,5],zIndex:10,bubble:!0},newRectangle=assign(options,newRectangle),newRectangle=new AMap.Rectangle(newRectangle);this.mapDragEnable=this._map.getStatus().dragEnable,this._map.setStatus({dragEnable:!1}),this._map.add(newRectangle),this.overlayData={obj:newRectangle,center:e}},MouseTool.prototype._doneRectangle=function(){this.overlays.rectangle.push(this.overlayData.obj),this._map.setStatus({dragEnable:this.mapDragEnable}),this.emit(\"draw\",{obj:this.overlayData.obj}),this.overlayData=null,this._map.off(\"mousemove\",this._updateRectangle,this)},MouseTool.prototype._updateRectangle=function(optBounds){this.overlayData&&(optBounds=new AMap.Bounds(this.overlayData.center.lnglat,optBounds.lnglat),this.overlayData.obj.setBounds(optBounds),this.emit(\"drawing\",{obj:this.overlayData.obj}))},MouseTool.prototype._doneZoomIn=function(){this._map.setFitView([this.overlayData.obj]),this._map.remove(this.overlayData.obj),this.overlayData=null,this._map.off(\"mousemove\",this._updateCircle,this)},MouseTool.prototype._doneZoomOut=function(){var center=this.overlayData.obj.getCenter(),zoom=this._map.getZoom();this._map.setZoomAndCenter(zoom-1,[center.lng,center.lat]),this._map.remove(this.overlayData.obj),this.overlayData=null,this._map.off(\"mousemove\",this._updateCircle,this)},MouseTool.prototype._onStart=function(){this._map.setStatus({allBubble:!0}),this.ruler&&this.ruler.turnOff(),this._unbind()},MouseTool.prototype._onEnd=function(ifClear){this._unbind(),this.polylineTemp=null,this.polygonTemp=null,this.MeasureAreaTemp&&(ifClear&&this.MeasureAreaTemp.obj&&this._map.remove(this.MeasureAreaTemp.obj),this._map.off(\"mousemove\",this._drawMeasureArea,this),this.MeasureAreaTemp=null),this.ruler&&this.ruler.turnOff(ifClear),this._map.setStatus({allBubble:!1})},MouseTool}(AMap.Event);AMap.MouseTool=MouseTool}();\n");
_jsload_('AMap.MoveAnimation.js',"!function(){\"use strict\";var commonjsGlobal=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,\"default\")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var eventemitter=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _uid=-1;var EventEmitter=function(){function EventEmitter(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}(this,EventEmitter),this.__events__={},this.__id__=++_uid}return _createClass(EventEmitter,[{key:\"on\",value:function(type,listener,context){var events=this.__events__,listeners=events[type]=events[type]||[];context===this&&(context=void 0);for(var i=-1,len=listeners;++i<len;){var ctx=listeners[i],fn=ctx.fn,ctx=ctx.ctx;if(fn===listener&&ctx===context)return this}return listeners.push({fn:listener,ctx:context}),this}},{key:\"once\",value:function(type,listener,context){function onceCallback(ev){this.off(type,onceCallback),listener.call(this,ev)}return onceCallback.listener=listener,this.on(type,onceCallback,context)}},{key:\"off\",value:function(type,listener,context){var events=this.__events__;if(!type)return this.__events__={},this;if(!listener)return delete events[type],this;var listeners=events[type];if(listeners)for(var i=listeners.length;0<=--i;){var _listeners$i2=listeners[i],fn=_listeners$i2.fn;_listeners$i2.ctx===context&&(fn!==listener&&fn!==fn.listener||(listeners.splice(i,1),fn=function(){}))}return this}},{key:\"emit\",value:function(type,data){var listeners=this.__events__[type];if(listeners)for(var event=function(dest){for(var j=-1,len=arguments.length<=1?0:arguments.length-1;++j<len;){var i,src=arguments.length<=j+1?void 0:arguments[j+1];for(i in src)src.hasOwnProperty(i)&&(dest[i]=src[i])}return dest}({},data,{target:this,type:type}),i=-1,len=listeners.length;++i<len;){var ctx=listeners[i],fn=ctx.fn,ctx=ctx.ctx;fn.call(ctx||this,event)}return this}},{key:\"events\",get:function(){return this.__events__}},{key:\"id\",get:function(){return this.__id__}}]),EventEmitter}();exports.default=EventEmitter});unwrapExports(eventemitter);var util=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};exports.default={remove:function(array,predicate){var result=[];if(!array||!array.length)return result;if(\"function\"==typeof predicate){for(var index=-1,indexes=[],length=array.length;++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}!function(array,indexes){for(var length=array?indexes.length:0;0<length--;){var index=indexes[length];array.splice(index,1)}}(array,indexes)}return result},normalize:function normalize(arr){var _options$max=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(arr))return arr;for(var rMax=_options$max.type,type=void 0===rMax?\"\":rMax,_options$min=_options$max.range,rMax=void 0===_options$min?[0,1]:_options$min,_options$min=_options$max.min,min=void 0===_options$min?Math.min.apply(Math,arr):_options$min,_options$max=_options$max.max,max=void 0===_options$max?Math.max.apply(Math,arr):_options$max,type=type.toLowerCase(),normalizationArr=[],diff=max-min,i=-1,len=arr.length;++i<len;){var v=arr[i];(v=max<v?max:v)<min&&(v=min);var v2=void 0,v2=\"log\"!==type?(v-min)/diff:Math.log10(v);normalizationArr.push(v2)}\"log\"===type&&(normalizationArr=normalize(normalizationArr));var rMax=_slicedToArray(rMax,2),rMin=rMax[0],rMax=rMax[1];if(0!==rMin||1!==rMax){for(var _i=-1,_len=normalizationArr.length,_diff=rMax-rMin,norArr=[];++_i<_len;){var _v=normalizationArr[_i];norArr.push(_diff*_v+rMin)}normalizationArr=norArr}return normalizationArr},forInMap:function(obj,callback){for(var key in obj)obj.hasOwnProperty(key)&&callback(obj[key],key,obj)}}});unwrapExports(util);var animationframe=createCommonjsModule(function(module,exports){var offset;Object.defineProperty(exports,\"__esModule\",{value:!0}),\"performance\"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},\"now\"in window.performance==!1&&(offset=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now(),window.performance.now=function(){return Date.now()-offset});var requestAnimationFrame=\"undefined\"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(callback){setTimeout(callback,16)},cancelAnimationFrame=\"undefined\"!=typeof window&&(window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame)||function(timer){clearTimeout(timer)};exports.requestAnimationFrame=requestAnimationFrame,exports.cancelAnimationFrame=cancelAnimationFrame});unwrapExports(animationframe);animationframe.requestAnimationFrame,animationframe.cancelAnimationFrame;var define=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});exports.Ev={UPDATE:\"update\",START:\"start\",REPEAT:\"repeat\",REPEAT_COMPLETE:\"repeatComplete\",AFTER_UPDATE:\"afterUpdate\",COMPLETE:\"complete\",PAUSE:\"pause\",STOP:\"stop\",RESET:\"reset\"},exports.Attr={DURATION:\"duration\",REPEAT:\"repeat\",DELAY:\"delay\",EASING:\"easing\",INTERVAL:\"interval\",YOYO:\"yoyo\",START:\"startAt\"},exports.Easing={LINEAR:\"Linear\",QUADRATIC_IN:\"QuadraticIn\",QUADRATIC_OUT:\"QuadraticOut\",QUADRATIC_IN_OUT:\"QuadraticInOut\",CUBIC_IN:\"CubicIn\",CUBIC_OUT:\"CubicOut\",CUBIC_IN_OUT:\"CubicInOut\",QUARTIC_IN:\"QuarticIn\",QUARTIC_OUT:\"QuarticOut\",QUARTIC_IN_OUT:\"QuarticInOut\",QUINTIC_IN:\"QuinticIn\",QUINTIC_OUT:\"QuinticOut\",QUINTIC_IN_OUT:\"QuinticInOut\",SINUSOIDAL_IN:\"SinusoidalIn\",SINUSOIDAL_OUT:\"SinusoidalOut\",SINUSOIDAL_IN_OUT:\"SinusoidalInOut\",EXPONENTIAL_IN:\"ExponentialIn\",EXPONENTIAL_OUT:\"ExponentialOut\",EXPONENTIAL_IN_OUT:\"ExponentialInOut\",CIRCULAR_IN:\"CircularIn\",CIRCULAR_OUT:\"CircularOut\",CIRCULAR_IN_OUT:\"CircularInOut\",ELASTIC_IN:\"ElasticIn\",ELASTIC_OUT:\"ElasticOut\",ELASTIC_IN_OUT:\"ElasticInOut\",BACK_IN:\"BackIn\",BACK_OUT:\"BackOut\",BACK_IN_OUT:\"BackInOut\",BOUNCE_IN:\"BounceIn\",BOUNCE_OUT:\"BounceOut\",BOUNCE_IN_OUT:\"BounceInOut\"}});unwrapExports(define);define.Ev,define.Attr,define.Easing;var animation=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _eventemitter2=_interopRequireDefault(eventemitter),Animation=_interopRequireDefault(util);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var remove=Animation.default.remove,forInMap=Animation.default.forInMap,Animation=function(){function Animation(options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}(this,Animation);var _this=function(self,call){if(!self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!call||\"object\"!=typeof call&&\"function\"!=typeof call?self:call}(this,(Animation.__proto__||Object.getPrototypeOf(Animation)).call(this));return _this._options={},_this._savedClipMap={},_this._clips=[],_this._clipMap={},_this._options=options||{},_this}return function(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Animation,_eventemitter2[\"default\"]),_createClass(Animation,[{key:\"_startAni\",value:function(){function update(timestamp){_this2._timer=(0,animationframe.requestAnimationFrame)(update),_this2._update(timestamp)}var _this2=this;this._timer=(0,animationframe.requestAnimationFrame)(update)}},{key:\"_stopAni\",value:function(){var timer=this._timer;return!!timer&&((0,animationframe.cancelAnimationFrame)(timer),!(this._timer=null))}},{key:\"_update\",value:function(timestamp){var clips=this._clips;this.emit(define.Ev.UPDATE,{timestamp:timestamp});for(var i=0;i<clips.length;){var clip=clips[i];clip.update(timestamp)?i++:this._rmClip(clip)}this._clips=clips,this.emit(define.Ev.AFTER_UPDATE),0===clips.length&&(this._stopAni(),this.emit(define.Ev.COMPLETE))}},{key:\"start\",value:function(){var clips=this._clips,len=clips.length;if(this._timer||0===len)return this;this.emit(define.Ev.START);for(var i=-1;++i<len;)clips[i].start();return this._startAni(),this}},{key:\"stop\",value:function(){return this._stop(!1),this}},{key:\"pause\",value:function(){return this._stop(!0),this}},{key:\"reset\",value:function(){this._stop(!1,!0,!1);var savedMap=this._savedClipMap,list=[];return forInMap(savedMap,function(value){value.stop(!0),list.push(value)}),this._clips=list,this.emit(define.Ev.RESET),this}},{key:\"_stop\",value:function(pause,reset){var emit=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this._stopAni();var clips=this._clips,len=clips.length;if(len){for(var i=-1;++i<len;){var clip=clips[i];pause?clip.pause():clip.stop(reset)}emit&&this.emit(pause?define.Ev.PAUSE:define.Ev.STOP)}}},{key:\"addClip\",value:function(clips){for(var startClip=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=-1,len=(clips=!Array.isArray(clips)?[clips]:clips).length;++i<len;){var clip=clips[i];this._hasSavedClip(clip)||(this._addClip(clip),this._addSavedClip(clip),this._timer&&startClip&&clip.start())}return this}},{key:\"_addClip\",value:function(clip){var _c=this._clips;-1===_c.indexOf(clip)&&(_c.push(clip),clip._animation=this)}},{key:\"_addSavedClip\",value:function(clip){var clipMap=this._savedClipMap,id=clip.id;clipMap[id]!==clip&&((clipMap[id]=clip)._animation=this)}},{key:\"removeClip\",value:function(clip){var savedMap=this._savedClipMap;return clip?(this._rmClip(clip),this._rmSavedClip(clip),clip._animation=null):(forInMap(savedMap,function(value){value._animation=null}),this._clips=[],this._savedClipMap={}),this}},{key:\"_rmClip\",value:function(clip){remove(this._clips,function(c){return c===clip})}},{key:\"_rmSavedClip\",value:function(clip){this._hasSavedClip(clip)&&delete this._savedClipMap[clip.id]}},{key:\"getClips\",value:function(){return this._clips}},{key:\"_hasSavedClip\",value:function(clip){var savedClip=clip.id,savedClip=this._savedClipMap[savedClip];return savedClip&&savedClip===clip}},{key:\"_hasClip\",value:function(clip){return-1!==this._clips.indexOf(clip)}},{key:\"destroy\",value:function(){this.off(),this._stopAni(),this.removeClip()}}]),Animation}();Animation.Event=define.Ev,exports.default=Animation});unwrapExports(animation);var easing=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var Easing={Linear:function(k){return k},QuadraticIn:function(k){return k*k},QuadraticOut:function(k){return k*(2-k)},QuadraticInOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)},CubicIn:function(k){return k*k*k},CubicOut:function(k){return--k*k*k+1},CubicInOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)},QuarticIn:function(k){return k*k*k*k},QuarticOut:function(k){return 1- --k*k*k*k},QuarticInOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)},QuinticIn:function(k){return k*k*k*k*k},QuinticOut:function(k){return--k*k*k*k*k+1},QuinticInOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)},SinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},SinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},SinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k))},ExponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1)},ExponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k)},ExponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(2-Math.pow(2,-10*(k-1)))},CircularIn:function(k){return 1-Math.sqrt(1-k*k)},CircularOut:function(k){return Math.sqrt(1- --k*k)},CircularInOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)},ElasticIn:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)))},ElasticOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/.4)+1)},ElasticInOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*-.5:a*Math.pow(2,-10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*.5+1)},BackIn:function(k){var s=1.70158;return k*k*((1+s)*k-s)},BackOut:function(k){var s=1.70158;return--k*k*((1+s)*k+s)+1},BackInOut:function(k){var s=2.5949095;return(k*=2)<1?k*k*((1+s)*k-s)*.5:.5*((k-=2)*k*((1+s)*k+s)+2)},BounceIn:function(k){return 1-Easing.BounceOut(1-k)},BounceOut:function(k){return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},BounceInOut:function(k){return k<.5?.5*Easing.BounceIn(2*k):.5*Easing.BounceOut(2*k-1)+.5}};exports.default=Easing});unwrapExports(easing);var Interpolation_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var a,Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.Linear;return k<0?fn(v[0],v[1],f):1<k?fn(v[m],v[m-1],m-f):fn(v[i],v[m<i+1?m:i+1],f-i)},Bezier:function(v,k){for(var b=0,n=v.length-1,pw=Math.pow,bn=Interpolation.Utils.Bernstein,i=0;i<=n;i++)b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);return b},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.CatmullRom;return v[0]===v[m]?fn(v[((i=k<0?Math.floor(f=m*(1+k)):i)-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i):k<0?v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]):1<k?v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]):fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i)},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:(a=[1],function(n){var s=1;if(a[n])return a[n];for(var i=n;1<i;i--)s*=i;return a[n]=s}),CatmullRom:function(v1,p1,p2,t2,t){var v0=.5*(p2-v1),v1=.5*(t2-p1),t2=t*t;return(2*p1-2*p2+v0+v1)*(t*t2)+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}};exports.default=Interpolation});unwrapExports(Interpolation_1);var clip=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _eventemitter2=_interopRequireDefault(eventemitter),_easing2=_interopRequireDefault(easing),_Interpolation2=_interopRequireDefault(Interpolation_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Clip=function(){function Clip(options,attr){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}(this,Clip);var _this=function(self,call){if(!self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!call||\"object\"!=typeof call&&\"function\"!=typeof call?self:call}(this,(Clip.__proto__||Object.getPrototypeOf(Clip)).call(this));return _this._options={},_this._attr={},_this._startAt=0,_this._stopped=!0,_this._paused=!1,_this._startTime=0,_this._pauseStart=0,_this._pauseTime=0,_this._reversed=!1,_this._chainClips=[],_this._tracks=[],_this._interpolation=_Interpolation2.default.Linear,_this._options=options||{},_this._attr=attr,_this._initOption(options),_this._tracks=_this._transform(attr),_this}return function(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Clip,_eventemitter2[\"default\"]),_createClass(Clip,null,[{key:\"registerPlugin\",value:function(plugin){var type=plugin.type,plugins=this._plugins;plugins&&plugins[type]||(this._plugins=plugins||{},this._plugins[type]=plugin)}}]),_createClass(Clip,[{key:\"_initOption\",value:function(options){var dur=options[define.Attr.EASING]||define.Easing.LINEAR;this._easing=_easing2.default[dur]||dur,this._delay=options[define.Attr.DELAY]||0;dur=options[define.Attr.DURATION];this._duration=void 0===dur?1e3:dur,this._repeat_0=this._repeat=options[define.Attr.REPEAT]||1,this._interval=options[define.Attr.INTERVAL]||0,this._yoyo=options[define.Attr.YOYO]||!1,this._startAt=options[define.Attr.START]||0}},{key:\"_transform\",value:function(attr){var key,_plugins=this.constructor._plugins,_attrList=[];for(key in attr)if(attr.hasOwnProperty(key)){var type,value=attr[key];for(type in _plugins){var plugin=_plugins[type];if(plugin.test(value,key)){(value=plugin.parse(value,key)).__type__=plugin.type;break}}_attrList.push({key:key,value:value})}return _attrList}},{key:\"start\",value:function(force){var repeat=window.performance.now(),onceRepeat=!1;if(this._paused)this._pauseTime+=repeat-this._pauseStart,this._paused=!1;else{if(!force&&!this._stopped)return this;this._stopped=!(onceRepeat=!0),this._startTime=repeat+this._delay}this.emit(define.Ev.START);repeat=this._repeat;return 1<repeat&&repeat===this._repeat_0&&onceRepeat&&this.emit(define.Ev.REPEAT,{remain:0}),this}},{key:\"stop\",value:function(reset){return this._stopped||(this._stopped=!0,this._paused=!1,this._pauseTime=0,this._pauseStart=0,this.emit(define.Ev.STOP),this.stopChain()),reset&&(this._repeat=this._repeat_0),this}},{key:\"pause\",value:function(){return this._stopped||this._paused||(this._paused=!0,this._pauseStart=window.performance.now(),this.emit(define.Ev.PAUSE)),this}},{key:\"update\",value:function(elapsed){if(this._stopped)return!0;if(this._paused||elapsed&&elapsed<this._startTime)return!0;var t=elapsed-this._pauseTime,keyframe=this._getProgress(t),progress=keyframe.progress,elapsed=keyframe.elapsed,keyframe=this._updateAttr(progress,elapsed);return this.emit(define.Ev.UPDATE,{progress:progress,keyframe:keyframe,elapsed:elapsed}),this._afterUpdate(t,elapsed)}},{key:\"_getProgress\",value:function(elapsed){elapsed=(elapsed-this._startTime)/this._duration;elapsed+=this._startAt;elapsed=Math.min(elapsed,1);return{progress:this._easing(this._reversed?1-elapsed:elapsed),elapsed:elapsed}}},{key:\"_updateAttr\",value:function(progress,elapsed){for(var tracks=this._tracks,keyframe={},i=0,len=tracks.length;i<len;){var type=tracks[i++],key=type.key,value=type.value,type=value.__type__;value=type?this.constructor._plugins[type].valueOf(value,progress,elapsed,key):this._interpolation(value,progress),keyframe[key]=value}return keyframe}},{key:\"_afterUpdate\",value:function(time,repeat_0){if(1!==repeat_0)return!0;var repeat=this._repeat,repeat_0=this._repeat_0;if(1<repeat)return isFinite(repeat)&&repeat--,this._startTime=time+this._interval,this._startAt=0,this._yoyo&&(this._reversed=!this._reversed),this._repeat=repeat,this.emit(define.Ev.REPEAT_COMPLETE,{repeat:repeat}),this.emit(define.Ev.REPEAT,{remain:repeat_0-repeat}),!0;this._stopped=!0,this._pauseTime=0,this._pauseStart=0,1<(this._repeat=repeat_0)&&this.emit(define.Ev.REPEAT_COMPLETE,{repeat:0}),this.emit(define.Ev.COMPLETE);for(var i=-1,chains=this._chainClips,len=chains.length,ani=this._animation;++i<len;){var clip=chains[i];ani&&ani._addClip(clip),clip.start()}return!1}},{key:\"chain\",value:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this._chainClips=args,this}},{key:\"stopChain\",value:function(){for(var i=-1,clips=this._chainClips,len=clips.length;++i<len;)clips[i].stop();return this}},{key:\"destroy\",value:function(){this.off(),this._stopped=!0,this._paused=!1,this._startTime=0,this._pauseTime=0,this._pauseStart=0,this._chainClips=[];var ani=this._animation;ani&&ani.removeClip(this),this._animation=null}}]),Clip}();Clip.Event=define.Ev,Clip.Attr=define.Attr,Clip.Easing=define.Easing,exports.default=Clip});unwrapExports(clip);var core=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Clip=exports.Animation=void 0;var _animation2=_interopRequireDefault(animation),_clip2=_interopRequireDefault(clip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={Animation:_animation2.default,Clip:_clip2.default},exports.Animation=_animation2.default,exports.Clip=_clip2.default});unwrapExports(core);core.Clip,core.Animation;var csscolorparser=createCommonjsModule(function(module,exports){var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(i){return(i=Math.round(i))<0?0:255<i?255:i}function clamp_css_float(f){return f<0?0:1<f?1:f}function parse_css_int(str){return\"%\"===str[str.length-1]?clamp_css_byte(parseFloat(str)/100*255):clamp_css_byte(parseInt(str))}function parse_css_float(str){return\"%\"===str[str.length-1]?clamp_css_float(parseFloat(str)/100):clamp_css_float(parseFloat(str))}function css_hue_to_rgb(m1,m2,h){return h<0?h+=1:1<h&&--h,6*h<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1}try{exports.parseCSSColor=function(ep){var str=ep.replace(/ /g,\"\").toLowerCase();if(str in kCSSColorTable)return kCSSColorTable[str].slice();if(\"#\"===str[0])return 4===str.length?0<=(fname=parseInt(str.substr(1),16))&&fname<=4095?[(3840&fname)>>4|(3840&fname)>>8,240&fname|(240&fname)>>4,15&fname|(15&fname)<<4,1]:null:7===str.length&&0<=(fname=parseInt(str.substr(1),16))&&fname<=16777215?[(16711680&fname)>>16,(65280&fname)>>8,255&fname,1]:null;var op=str.indexOf(\"(\"),ep=str.indexOf(\")\");if(-1!==op&&ep+1===str.length){var fname=str.substr(0,op),params=str.substr(op+1,ep-(op+1)).split(\",\"),alpha=1;switch(fname){case\"rgba\":if(4!==params.length)return null;alpha=parse_css_float(params.pop());case\"rgb\":return 3!==params.length?null:[parse_css_int(params[0]),parse_css_int(params[1]),parse_css_int(params[2]),alpha];case\"hsla\":if(4!==params.length)return null;alpha=parse_css_float(params.pop());case\"hsl\":if(3!==params.length)return null;var h=(parseFloat(params[0])%360+360)%360/360,m2=parse_css_float(params[1]),m1=parse_css_float(params[2]),m2=m1<=.5?m1*(m2+1):m1+m2-m1*m2,m1=2*m1-m2;return[clamp_css_byte(255*css_hue_to_rgb(m1,m2,h+1/3)),clamp_css_byte(255*css_hue_to_rgb(m1,m2,h)),clamp_css_byte(255*css_hue_to_rgb(m1,m2,h-1/3)),alpha];default:return null}}return null}}catch(e){}}),colorhelper=(csscolorparser.parseCSSColor,createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var obj,_slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},_csscolorparser2=(obj=csscolorparser)&&obj.__esModule?obj:{default:obj};var parseCSSColor=_csscolorparser2.default.parseCSSColor;function _clamp_css_byte(i){return(i=Math.round(i))<0?0:255<i?255:i}function _clamp_css_float(f){return f<0?0:1<f?1:f}var ColorHelper={isColor:function(color){if(\"string\"==typeof color)return!!(0,_csscolorparser2.default)(color);if(Array.isArray(color)){for(var i=0,len=color.length;i<len;){var c=color[i++];if(\"string\"!=typeof c)return!1;if(!parseCSSColor(c))return!1}return!0}return!1},toColorIncrease:function(inc){return[inc[0]||0,inc[1]||0,inc[2]||0,inc[3]||0]},toNormal:function(color){if(Array.isArray(color)){for(var colorArr=[],i=0,len=color.length;i<len;){var cssColor=color[i++];if(\"string\"!=typeof cssColor)return null;cssColor=parseCSSColor(cssColor);if(!cssColor)return null;colorArr.push(cssColor)}return colorArr}return\"string\"==typeof color?parseCSSColor(color):null},toNormalArray:function(color){if(Array.isArray(color)){for(var colorArr=[],i=0,len=color.length;i<len;){var cssColor=color[i++];if(\"string\"!=typeof cssColor)return null;cssColor=parseCSSColor(cssColor);if(!cssColor)return null;colorArr.push(cssColor)}return colorArr}return\"string\"==typeof color?[parseCSSColor(color)]:null},linearGradient:function(steps){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,interpolation=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ColorHelper.Utils.Linear,m=steps.length-1,f=m*i,i=f>>0,fn=interpolation;return function(r1,b1,t){var g1=_slicedToArray(r1,4),r0=g1[0],g0=g1[1],b0=g1[2],a0=g1[3],a1=_slicedToArray(b1,4),r1=a1[0],g1=a1[1],b1=a1[2],a1=a1[3];return[fn(r0,r1,t)>>0,fn(g0,g1,t)>>0,fn(b0,b1,t)>>0,fn(a0,a1,t)]}(steps[i],steps[m<1+i?m:1+i],f-i)},mixColors:function(color,_ref){var c=this.toNormal(color);if(Array.isArray(_ref)&&c){_ref=[_clamp_css_byte(c[0]+_ref[0]||0),_clamp_css_byte(c[1]+_ref[1]||0),_clamp_css_byte(c[2]+_ref[2]||0),_clamp_css_float(c[3]+_ref[3]||0)];return\"rgba(\"+[_ref[0],_ref[1],_ref[2],_ref[3]].join(\",\")+\")\"}return color},toRGBA:function(color){if(color&&3<=color.length){var alpha=void 0===color[3]?1:color[3];return\"rgba(\"+_clamp_css_byte(color[0])+\",\"+_clamp_css_byte(color[1])+\",\"+_clamp_css_byte(color[2])+\",\"+_clamp_css_float(alpha)+\")\"}return\"transparent\"},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0}}};exports.default=ColorHelper}));unwrapExports(colorhelper),unwrapExports(createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _clip2=_interopRequireDefault(clip),_colorhelper2=_interopRequireDefault(colorhelper);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plugin={type:\"color\",test:function(value,key){return _colorhelper2.default.isColor(value)},parse:function(value,key){return _colorhelper2.default.toNormalArray(value)},valueOf:function(parsedValue,val,elapsed,key){val=_colorhelper2.default.linearGradient(parsedValue,val);return val=_colorhelper2.default.toRGBA(val)}};_clip2.default.registerPlugin(plugin),exports.default=plugin}));var vector_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var ArrayCons=\"undefined\"==typeof Float32Array?Array:Float32Array,vector={create:function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,out=new ArrayCons(2);return out[0]=x,out[1]=y,out},copy:function(out,v){return out[0]=v[0],out[1]=v[1],out},clone:function(v){var out=new ArrayCons(2);return out[0]=v[0],out[1]=v[1],out},set:function(out,x,y){return out[0]=x,out[1]=y,out},add:function(out,v1,v2){return out[0]=v1[0]+v2[0],out[1]=v1[1]+v2[1],out},scaleAndAdd:function(out,v1,v2,scale){return out[0]=v1[0]+v2[0]*scale,out[1]=v1[1]+v2[1]*scale,out},sub:function(out,v1,v2){return out[0]=v1[0]-v2[0],out[1]=v1[1]-v2[1],out},length:function(v){return Math.sqrt(this.lengthSquare(v))},lengthSquare:function(v){return v[0]*v[0]+v[1]*v[1]},multiply:function(out,v1,v2){return out[0]=v1[0]*v2[0],out[1]=v1[1]*v2[1],out},divide:function(out,v1,v2){return out[0]=v1[0]/v2[0],out[1]=v1[1]/v2[1],out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){return out[0]=v[0]*s,out[1]=v[1]*s,out},normalize:function(out,v){var d=this.len(v);return 0===d?(out[0]=0,out[1]=0):(out[0]=v[0]/d,out[1]=v[1]/d),out},distance:function(v1,v2){return Math.sqrt(this.distanceSquare(v1,v2))},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])},negate:function(out,v){return out[0]=-v[0],out[1]=-v[1],out},lerp:function(out,v1,v2,t){return out[0]=v1[0]+t*(v2[0]-v1[0]),out[1]=v1[1]+t*(v2[1]-v1[1]),out},applyTransform:function(out,y,m){var x=y[0],y=y[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out},min:function(out,v1,v2){return out[0]=Math.min(v1[0],v2[0]),out[1]=Math.min(v1[1],v2[1]),out},max:function(out,v1,v2){return out[0]=Math.max(v1[0],v2[0]),out[1]=Math.max(v1[1],v2[1]),out},getAngle:function(v1,v2){var angle=0;return angle=0!=v1[0]-v2[0]?Math.atan2(v1[1]-v2[1],v1[0]-v2[0]):angle}};vector.len=vector.length,vector.lenSquare=vector.lengthSquare,vector.dist=vector.distance,vector.distSquare=vector.distanceSquare,exports.default=vector});unwrapExports(vector_1),unwrapExports(createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},_clip2=_interopRequireDefault(clip),_vector2=_interopRequireDefault(vector_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plugin={type:\"coordinate-2d\",test:function(value,key){var res=!1;if(Array.isArray(value))for(var i=-1,len=value.length;++i<len;){var _ref,x,y=value[i];Array.isArray(y)&&(y=(_ref=[+(x=(_ref=_slicedToArray(y,2))[0]),+(y=_ref[1])])[1],res=\"number\"==typeof(x=_ref[0])&&\"number\"==typeof y&&isFinite(x)&&isFinite(y))}return res},parse:function(value,key){for(var path=[],i=-1,len=value.length;++i<len;){var _ref2=value[i],_ref2=_slicedToArray(_ref2,2),_ref2=[+_ref2[0],+_ref2[1]];path.push([_ref2[0],_ref2[1]])}return function(path){for(var angle,i=0,len=path.length,length=0,_path=[],steps=[];i<len-1;){var p0=path[i],p1=path[i+1],segmentLength=_vector2.default.distance(p0,p1);length+=segmentLength,angle=_vector2.default.getAngle(p1,p0),_path.push(p0),steps.push({length:length,segmentLength:segmentLength,segment:[p0.slice(),p1.slice()],path:_path.slice(),angle:angle}),i++}return steps.sum=length,steps}(path)},valueOf:function(steps,out,elapsed,key){for(var current=steps.sum*out,i=-1,len=steps.length,step=steps[0];++i<len;){var s=steps[i];if(current<=s.length){step=s;break}}var position=_slicedToArray(step.segment,2),p0=position[0],p1=position[1],scale=(0==i?current:current-steps[i-1].length)/step.segmentLength,out=_vector2.default.create(),position=_vector2.default.create();return _vector2.default.sub(out,p1,p0),_vector2.default.scaleAndAdd(position,p0,out,scale),position.step=step,position}};_clip2.default.registerPlugin(plugin),exports.default=plugin}));var d1,d2,r,Set=createCommonjsModule(function(module){var Animation=core.Animation,Clip=core.Clip;module.exports.default={Animation:Animation,Clip:Clip},module.exports.Animation=Animation,module.exports.Clip=Clip}),chito_1=Set.Animation,chito_2=Set.Clip,projections={},DataView=function(){function Projection(id,project,unproject,getResolution){this.project=project,this.unproject=unproject,this.getResolution=getResolution,projections[id]=this}return Projection.prototype.moveWithPixel=function(pos,offsetPixel,offsetX){var offsetY=this.getResolution(offsetX),offsetX=offsetPixel[0]*offsetY,offsetY=offsetPixel[1]*offsetY,pos=this.project(pos[0],pos[1]);return this.unproject(pos[0]+offsetX,pos[1]+offsetY)},Projection.prototype.moveWithPos=function(originPos,newPos){originPos=this.project(originPos[0],originPos[1]),newPos=[originPos[0]+newPos[0],originPos[1]+newPos[1]];return this.unproject(newPos[0],newPos[1])},Projection}(),ProjectionManager={getProjection:function(id){return projections[id]}};new DataView(\"EPSG:4326\",function(lng,lat){return[lng,lat]},function(x,y){return[x,y]},function(zoom){return.703125/Math.pow(2,zoom)}),d1=Math.PI/180,d2=180/Math.PI,r=6378137,new DataView(\"EPSG:3857\",function(x,y){y=Math.max(Math.min(85.0511287798,y),-85.0511287798);x*=d1,y*=d1,y=Math.log(Math.tan(Math.PI/4+y/2));return[x*r,y*r]},function(x,y){return[x/r*d2,(2*Math.atan(Math.exp(y/r))-Math.PI/2)*d2]},function(zoom){return 156543.03392804097/Math.pow(2,zoom)});var Promise=\"object\"==typeof global&&global&&global.Object===Object&&global,WeakMap=\"object\"==typeof self&&self&&self.Object===Object&&self,GeometryUtilInstance=Promise||WeakMap||Function(\"return this\")(),animationPlugin=GeometryUtilInstance.Symbol,getTag=Object.prototype,hasOwnProperty=getTag.hasOwnProperty,nativeObjectToString=getTag.toString,symToStringTag=animationPlugin?animationPlugin.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=animationPlugin?animationPlugin.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var Set=GeometryUtilInstance[\"__core-js_shared__\"],maskSrcKey=(DataView=/[^.]+$/.exec(Set&&Set.keys&&Set.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+DataView:\"\";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,WeakMap=Function.prototype,getTag=Object.prototype,Set=WeakMap.toString,DataView=getTag.hasOwnProperty,reIsNative=RegExp(\"^\"+Set.call(DataView).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,value){value=function(object,key){return null==object?void 0:object[key]}(object,value);return baseIsNative(value)?value:void 0}WeakMap=getNative(GeometryUtilInstance,\"WeakMap\");var nativeNow=Date.now;var func,count,lastCalled,defineProperty=function(){try{var func=getNative(Object,\"defineProperty\");return func({},\"\",{}),func}catch(e){}}(),setToString=(func=defineProperty?function(func,string){return defineProperty(func,\"toString\",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity,lastCalled=count=0,function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return(length=null==length?MAX_SAFE_INTEGER:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function baseAssignValue(object,key,value){\"__proto__\"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function eq(value,other){return value===other||value!=value&&other!=other}var hasOwnProperty$2=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$2.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var nativeMax=Math.max;function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$4)}function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var getTag=Object.prototype,hasOwnProperty$3=getTag.hasOwnProperty,propertyIsEnumerable=getTag.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var Set=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,DataView=Set&&\"object\"==typeof module&&module&&!module.nodeType&&module,getTag=DataView&&DataView.exports===Set?GeometryUtilInstance.Buffer:void 0,isBuffer=(getTag?getTag.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var DataView=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=DataView&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===DataView&&Promise.process,Set=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),getTag=Set&&Set.isTypedArray,isTypedArray=getTag?function(func){return function(value){return func(value)}}(getTag):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$4=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$4.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$5=Object.prototype.hasOwnProperty;function keys(object){return(isArrayLike(object)?arrayLikeKeys:function(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty$5.call(object,key)&&\"constructor\"!=key&&result.push(key);return result})(object)}var hasOwnProperty$6=Object.prototype.hasOwnProperty,assign=function(assigner){return setToString(overRest(func=function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0,customizer=3<assigner.length&&\"function\"==typeof customizer?(length--,customizer):void 0;for(guard&&function(value,index,object){if(isObject(object)){var type=typeof index;return(\"number\"==type?isArrayLike(object)&&isIndex(index,object.length):\"string\"==type&&index in object)&&eq(object[index],value)}}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object},start,identity),func+\"\");var func,start}(function(object,source){if(isPrototype(source)||isArrayLike(source))!function(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;(isNew?baseAssignValue:assignValue)(object,key,newValue=void 0===newValue?source[key]:newValue)}}(source,keys(source),object);else for(var key in source)hasOwnProperty$6.call(source,key)&&assignValue(object,key,source[key])}),nativeCreate=getNative(Object,\"create\");var hasOwnProperty$7=Object.prototype.hasOwnProperty;var hasOwnProperty$8=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return\"__lodash_hash_undefined__\"===result?void 0:result}return hasOwnProperty$7.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$8.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?\"__lodash_hash_undefined__\":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(GeometryUtilInstance,\"Map\");function getMapData(type,key){var value,data=type.__data__;return(\"string\"==(type=typeof(value=key))||\"number\"==type||\"symbol\"==type||\"boolean\"==type?\"__proto__\"!==value:null===value)?data[\"string\"==typeof key?\"string\":\"hash\"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:function(){return[]};function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(GeometryUtilInstance,\"DataView\"),Promise=getNative(GeometryUtilInstance,\"Promise\"),Set=getNative(GeometryUtilInstance,\"Set\"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag,getTag$1=getTag=DataView&&\"[object DataView]\"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&\"[object Map]\"!=getTag(new Map)||Promise&&\"[object Promise]\"!=getTag(Promise.resolve())||Set&&\"[object Set]\"!=getTag(new Set)||WeakMap&&\"[object WeakMap]\"!=getTag(new WeakMap)?function(ctorString){var result=baseGetTag(ctorString),ctorString=\"[object Object]\"==result?ctorString.constructor:void 0,ctorString=ctorString?toSource(ctorString):\"\";if(ctorString)switch(ctorString){case dataViewCtorString:return\"[object DataView]\";case mapCtorString:return\"[object Map]\";case promiseCtorString:return\"[object Promise]\";case setCtorString:return\"[object Set]\";case weakMapCtorString:return\"[object WeakMap]\"}return result}:getTag,Uint8Array$1=GeometryUtilInstance.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,\"__lodash_hash_undefined__\"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var GeometryUtilInstance=animationPlugin?animationPlugin.prototype:void 0,symbolValueOf=GeometryUtilInstance?GeometryUtilInstance.valueOf:void 0;var hasOwnProperty$9=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$3=1,argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\",hasOwnProperty$a=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsWrapped=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),isSameTag=othIsWrapped?arrayTag$1:getTag$1(other),objIsWrapped=(objTag=objTag==argsTag$2?objectTag$2:objTag)==objectTag$2,othIsWrapped=(isSameTag=isSameTag==argsTag$2?objectTag$2:isSameTag)==objectTag$2,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsWrapped=!(objIsArr=!0)}if(isSameTag&&!objIsWrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case\"[object DataView]\":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case\"[object ArrayBuffer]\":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array$1(object),new Uint8Array$1(other))?!0:!1;case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return eq(+object,+other);case\"[object Error]\":return object.name==other.name&&object.message==other.message;case\"[object RegExp]\":case\"[object String]\":return object==other+\"\";case\"[object Map]\":var result=mapToArray;case\"[object Set]\":result=result||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case\"[object Symbol]\":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){objIsWrapped=objIsWrapped&&hasOwnProperty$a.call(object,\"__wrapped__\"),othIsWrapped=othIsWrapped&&hasOwnProperty$a.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return!!isSameTag&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$9.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||\"constructor\"==key}return!result||skipCtor||(objCtor=object.constructor)!=(othCtor=other.constructor)&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function isEqual(value,other){return baseIsEqual(value,other)}var Coordinate_closestOnSegment=function(x2,y2){var x,x0=x2[0],along=x2[1],dx=y2[0],y=y2[1],x1=dx[0],y1=dx[1],x2=y[0],y2=y[1],dx=x2-x1,y=y2-y1,along=0==dx&&0==y?0:(dx*(x0-x1)+y*(along-y1))/(dx*dx+y*y||0),y=along<=0?(x=x1,y1):1<=along?(x=x2,y2):(x=x1+along*dx,y1+along*y);return[x,y]},Coordinate_containsCoordinate=function(coordinate,vertices,containBounds){for(var x=coordinate[0],y=coordinate[1],inside=!1,numVertices=vertices.length,i=0,j=numVertices-1;i<numVertices;j=i,i+=1){var intersect=!1,xx=vertices[i][0],yi=vertices[i][1],xj=vertices[j][0],yj=vertices[j][1];if(xx===x&&yi===y||xj===x&&yj===y)return!!containBounds;if(yi<y==y<=yj){xx=(xj-xx)*(y-yi)/(yj-yi)+xx;if(x===xx)return!!containBounds;intersect=x<xx}intersect&&(inside=!inside)}return inside},Pixel=function(){function Pixel(x,y,isRound){if(void 0===isRound&&(isRound=!1),this.className=\"AMap.Pixel\",isNaN(x)||isNaN(y))throw new Error(\"Invalid Object: Pixel(\"+x+\", \"+y+\")\");this.x=isRound?Math.round(x):Number(x),this.y=isRound?Math.round(y):Number(y)}return Pixel.prototype.getX=function(){return this.x},Pixel.prototype.round=function(){return new Pixel(Math.round(this.x),Math.round(this.y))},Pixel.prototype.getY=function(){return this.y},Pixel.prototype.toString=function(){return this.x+\",\"+this.y},Pixel.prototype.equals=function(point){return point instanceof Pixel&&Math.max(Math.abs(this.x-point.x),Math.abs(this.y-point.y))<=1e-9},Pixel.prototype.toArray=function(){return[this.x,this.y]},Pixel.prototype.subtract=function(other,isRound){return new Pixel(this.x-other.x,this.y-other.y,isRound)},Pixel.prototype.multiplyBy=function(num,noWrap){return new Pixel(this.x*num,this.y*num,noWrap)},Pixel.prototype.direction=function(){var x=this.x,y=this.y;if(0===x&&0===y)return null;if(0===x)return 0<y?90:270;var angle=180*Math.atan(y/x)/Math.PI;return x<0&&0<y||x<0&&y<0?180+angle:0<x&&y<0?360+angle:angle},Pixel.prototype.toJSON=function(){return[this.x,this.y]},Pixel}(),martinez=unwrapExports(createCommonjsModule(function(module,exports){!function(exports){function DEFAULT_COMPARE(a,b){return a>b?1:a<b?-1:0}var SplayTree=function SplayTree(compare,noDuplicates){if(compare===void 0)compare=DEFAULT_COMPARE;if(noDuplicates===void 0)noDuplicates=false;this._compare=compare;this._root=null;this._size=0;this._noDuplicates=!!noDuplicates},prototypeAccessors={size:{configurable:true}};function loadRecursive(parent,keys,values,start,end){var size=end-start;if(size>0){var middle=start+Math.floor(size/2);var key=keys[middle];var data=values[middle];var node={key:key,data:data,parent:parent};node.left=loadRecursive(node,keys,values,start,middle);node.right=loadRecursive(node,keys,values,middle+1,end);return node}return null}function sort(keys,values,left,right,compare){if(left>=right)return;var pivot=keys[left+right>>1];var i=left-1;var j=right+1;while(true){do{i++}while(compare(keys[i],pivot)<0);do{j--}while(compare(keys[j],pivot)>0);if(i>=j)break;var tmp=keys[i];keys[i]=keys[j];keys[j]=tmp;tmp=values[i];values[i]=values[j];values[j]=tmp}sort(keys,values,left,j,compare);sort(keys,values,j+1,right,compare)}SplayTree.prototype.rotateLeft=function rotateLeft(x){var y=x.right;if(y){x.right=y.left;if(y.left)y.left.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.left=x;x.parent=y},SplayTree.prototype.rotateRight=function rotateRight(x){var y=x.left;if(y){x.left=y.right;if(y.right)y.right.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.right=x;x.parent=y},SplayTree.prototype._splay=function _splay(x){while(x.parent){var p=x.parent;if(!p.parent)if(p.left===x)this.rotateRight(p);else this.rotateLeft(p);else if(p.left===x&&p.parent.left===p){this.rotateRight(p.parent);this.rotateRight(p)}else if(p.right===x&&p.parent.right===p){this.rotateLeft(p.parent);this.rotateLeft(p)}else if(p.left===x&&p.parent.right===p){this.rotateRight(p);this.rotateLeft(p)}else{this.rotateLeft(p);this.rotateRight(p)}}},SplayTree.prototype.splay=function splay(x){var p,gp,ggp,l,r;while(x.parent){p=x.parent;gp=p.parent;if(gp&&gp.parent){ggp=gp.parent;if(ggp.left===gp)ggp.left=x;else ggp.right=x;x.parent=ggp}else{x.parent=null;this._root=x}l=x.left;r=x.right;if(x===p.left){if(gp)if(gp.left===p){if(p.right){gp.left=p.right;gp.left.parent=gp}else gp.left=null;p.right=gp;gp.parent=p}else{if(l){gp.right=l;l.parent=gp}else gp.right=null;x.left=gp;gp.parent=x}if(r){p.left=r;r.parent=p}else p.left=null;x.right=p;p.parent=x}else{if(gp)if(gp.right===p){if(p.left){gp.right=p.left;gp.right.parent=gp}else gp.right=null;p.left=gp;gp.parent=p}else{if(r){gp.left=r;r.parent=gp}else gp.left=null;x.right=gp;gp.parent=x}if(l){p.right=l;l.parent=p}else p.right=null;x.left=p;p.parent=x}}},SplayTree.prototype.replace=function replace(u,v){if(!u.parent)this._root=v;else if(u===u.parent.left)u.parent.left=v;else u.parent.right=v;if(v)v.parent=u.parent},SplayTree.prototype.minNode=function minNode(u){if(u===void 0)u=this._root;if(u)while(u.left)u=u.left;return u},SplayTree.prototype.maxNode=function maxNode(u){if(u===void 0)u=this._root;if(u)while(u.right)u=u.right;return u},SplayTree.prototype.insert=function insert(key,data){var z=this._root;var p=null;var comp=this._compare;var cmp;if(this._noDuplicates)while(z){p=z;cmp=comp(z.key,key);if(cmp===0)return;else if(comp(z.key,key)<0)z=z.right;else z=z.left}else while(z){p=z;if(comp(z.key,key)<0)z=z.right;else z=z.left}z={key:key,data:data,left:null,right:null,parent:p};if(!p)this._root=z;else if(comp(p.key,z.key)<0)p.right=z;else p.left=z;this.splay(z);this._size++;return z},SplayTree.prototype.find=function find(key){var z=this._root;var comp=this._compare;while(z){var cmp=comp(z.key,key);if(cmp<0)z=z.right;else if(cmp>0)z=z.left;else return z}return null},SplayTree.prototype.contains=function contains(key){var node=this._root;var comparator=this._compare;while(node){var cmp=comparator(key,node.key);if(cmp===0)return true;else if(cmp<0)node=node.left;else node=node.right}return false},SplayTree.prototype.remove=function remove(key){var z=this.find(key);if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.removeNode=function removeNode(z){if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.erase=function erase(key){var z=this.find(key);if(!z)return;this.splay(z);var s=z.left;var t=z.right;var sMax=null;if(s){s.parent=null;sMax=this.maxNode(s);this.splay(sMax);this._root=sMax}if(t){if(s)sMax.right=t;else this._root=t;t.parent=sMax}this._size--},SplayTree.prototype.pop=function pop(){var node=this._root,returnValue=null;if(node){while(node.left)node=node.left;returnValue={key:node.key,data:node.data};this.remove(node.key)}return returnValue},SplayTree.prototype.next=function next(node){var successor=node;if(successor)if(successor.right){successor=successor.right;while(successor&&successor.left)successor=successor.left}else{successor=node.parent;while(successor&&successor.right===node){node=successor;successor=successor.parent}}return successor},SplayTree.prototype.prev=function prev(node){var predecessor=node;if(predecessor)if(predecessor.left){predecessor=predecessor.left;while(predecessor&&predecessor.right)predecessor=predecessor.right}else{predecessor=node.parent;while(predecessor&&predecessor.left===node){node=predecessor;predecessor=predecessor.parent}}return predecessor},SplayTree.prototype.forEach=function forEach(callback){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();callback(current,i++);current=current.right}else done=true;return this},SplayTree.prototype.range=function range(low,high,fn,ctx){var Q=[];var compare=this._compare;var node=this._root,cmp;while(Q.length!==0||node)if(node){Q.push(node);node=node.left}else{node=Q.pop();cmp=compare(node.key,high);if(cmp>0)break;else if(compare(node.key,low)>=0)if(fn.call(ctx,node))return this;node=node.right}return this},SplayTree.prototype.keys=function keys(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.key);current=current.right}else done=true;return r},SplayTree.prototype.values=function values(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.data);current=current.right}else done=true;return r},SplayTree.prototype.at=function at(index){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();if(i===index)return current;i++;current=current.right}else done=true;return null},SplayTree.prototype.load=function load(keys,values,presort){if(keys===void 0)keys=[];if(values===void 0)values=[];if(presort===void 0)presort=false;if(this._size!==0)throw new Error(\"bulk-load: tree is not empty\");var size=keys.length;if(presort)sort(keys,values,0,size-1,this._compare);this._root=loadRecursive(null,keys,values,0,size);this._size=size;return this},SplayTree.prototype.min=function min(){var node=this.minNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.max=function max(){var node=this.maxNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.isEmpty=function isEmpty(){return this._root===null},prototypeAccessors.size.get=function(){return this._size},SplayTree.createTree=function createTree(keys,values,comparator,presort,noDuplicates){return new SplayTree(comparator,noDuplicates).load(keys,values,presort)},Object.defineProperties(SplayTree.prototype,prototypeAccessors);var NORMAL=0,NON_CONTRIBUTING=1,SAME_TRANSITION=2,DIFFERENT_TRANSITION=3,INTERSECTION=0,UNION=1,DIFFERENCE=2,XOR=3;function computeFields(event,prev,operation){if(prev===null){event.inOut=false;event.otherInOut=true}else{if(event.isSubject===prev.isSubject){event.inOut=!prev.inOut;event.otherInOut=prev.otherInOut}else{event.inOut=!prev.otherInOut;event.otherInOut=prev.isVertical()?!prev.inOut:prev.inOut}if(prev)event.prevInResult=!inResult(prev,operation)||prev.isVertical()?prev.prevInResult:prev}var isInResult=inResult(event,operation);if(isInResult)event.resultTransition=determineResultTransition(event,operation);else event.resultTransition=0}function inResult(event,operation){switch(event.type){case NORMAL:switch(operation){case INTERSECTION:return!event.otherInOut;case UNION:return event.otherInOut;case DIFFERENCE:return event.isSubject&&event.otherInOut||!event.isSubject&&!event.otherInOut;case XOR:return true}break;case SAME_TRANSITION:return operation===INTERSECTION||operation===UNION;case DIFFERENT_TRANSITION:return operation===DIFFERENCE;case NON_CONTRIBUTING:return false}return false}function determineResultTransition(event,operation){var thisIn=!event.inOut;var thatIn=!event.otherInOut;var isIn;switch(operation){case INTERSECTION:isIn=thisIn&&thatIn;break;case UNION:isIn=thisIn||thatIn;break;case XOR:isIn=thisIn^thatIn;break;case DIFFERENCE:if(event.isSubject)isIn=thisIn&&!thatIn;else isIn=thatIn&&!thisIn;break}return isIn?+1:-1}var SweepEvent=function SweepEvent(point,left,otherEvent,isSubject,edgeType){this.left=left;this.point=point;this.otherEvent=otherEvent;this.isSubject=isSubject;this.type=edgeType||NORMAL;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.resultTransition=0;this.otherPos=-1;this.outputContourId=-1;this.isExteriorRing=true},prototypeAccessors$1={inResult:{configurable:true}};function equals(p1,p2){if(p1[0]===p2[0])if(p1[1]===p2[1])return true;else return false;return false}SweepEvent.prototype.isBelow=function isBelow(p){var p0=this.point,p1=this.otherEvent.point;return this.left?(p0[0]-p[0])*(p1[1]-p[1])-(p1[0]-p[0])*(p0[1]-p[1])>0:(p1[0]-p[0])*(p0[1]-p[1])-(p0[0]-p[0])*(p1[1]-p[1])>0},SweepEvent.prototype.isAbove=function isAbove(p){return!this.isBelow(p)},SweepEvent.prototype.isVertical=function isVertical(){return this.point[0]===this.otherEvent.point[0]},prototypeAccessors$1.inResult.get=function(){return this.resultTransition!==0},SweepEvent.prototype.clone=function clone(){var copy=new SweepEvent(this.point,this.left,this.otherEvent,this.isSubject,this.type);copy.contourId=this.contourId;copy.resultTransition=this.resultTransition;copy.prevInResult=this.prevInResult;copy.isExteriorRing=this.isExteriorRing;copy.inOut=this.inOut;copy.otherInOut=this.otherInOut;return copy},Object.defineProperties(SweepEvent.prototype,prototypeAccessors$1);var epsilon=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon)*epsilon;function sum(elen,e,flen,f,h){var Q,Qnew,hh,bvirt;var enow=e[0];var fnow=f[0];var eindex=0;var findex=0;if(fnow>enow===fnow>-enow){Q=enow;enow=e[++eindex]}else{Q=fnow;fnow=f[++findex]}var hindex=0;if(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=enow+Q;hh=Q-(Qnew-enow);enow=e[++eindex]}else{Qnew=fnow+Q;hh=Q-(Qnew-fnow);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh;while(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex]}else{Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh}}while(eindex<elen){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex];Q=Qnew;if(hh!==0)h[hindex++]=hh}while(findex<flen){Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex];Q=Qnew;if(hh!==0)h[hindex++]=hh}if(Q!==0||hindex===0)h[hindex++]=Q;return hindex}function estimate(elen,e){var Q=e[0];for(var i=1;i<elen;i++)Q+=e[i];return Q}function vec(n){return commonjsGlobal.Float64Array?new Float64Array(n):new Array(n)}var ccwerrboundA=(3+16*epsilon)*epsilon,ccwerrboundB=(2+12*epsilon)*epsilon,ccwerrboundC=(9+64*epsilon)*epsilon*epsilon,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(ax,ay,bx,by,cx,cy,detsum){var acxtail,acytail,bcxtail,bcytail;var bvirt,c,ahi,alo,bhi,blo,_i,_j,_0,s1,s0,t1,t0,u3;var acx=ax-cx;var bcx=bx-cx;var acy=ay-cy;var bcy=by-cy;s1=acx*bcy;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcx;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;B[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;B[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;B[2]=_j-(u3-bvirt)+(_i-bvirt);B[3]=u3;var det=estimate(4,B);var errbound=ccwerrboundB*detsum;if(det>=errbound||-det>=errbound)return det;bvirt=ax-acx;acxtail=ax-(acx+bvirt)+(bvirt-cx);bvirt=bx-bcx;bcxtail=bx-(bcx+bvirt)+(bvirt-cx);bvirt=ay-acy;acytail=ay-(acy+bvirt)+(bvirt-cy);bvirt=by-bcy;bcytail=by-(bcy+bvirt)+(bvirt-cy);if(acxtail===0&&acytail===0&&bcxtail===0&&bcytail===0)return det;errbound=ccwerrboundC*detsum+resulterrbound*Math.abs(det);det+=acx*bcytail+bcy*acxtail-(acy*bcxtail+bcx*acytail);if(det>=errbound||-det>=errbound)return det;s1=acxtail*bcy;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcx;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C1len=sum(4,B,4,u,C1);s1=acx*bcytail;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcxtail;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C2len=sum(C1len,C1,4,u,C2);s1=acxtail*bcytail;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcxtail;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var Dlen=sum(C2len,C2,4,u,D);return D[Dlen-1]}function orient2d(ax,ay,bx,by,cx,cy){var detleft=(ay-cy)*(bx-cx);var detright=(ax-cx)*(by-cy);var det=detleft-detright;if(detleft===0||detright===0||detleft>0!==detright>0)return det;var detsum=Math.abs(detleft+detright);if(Math.abs(det)>=ccwerrboundA*detsum)return det;return-orient2dadapt(ax,ay,bx,by,cx,cy,detsum)}function signedArea(p0,p1,p2){var res=orient2d(p0[0],p0[1],p1[0],p1[1],p2[0],p2[1]);if(res>0)return-1;if(res<0)return 1;return 0}function compareEvents(e1,e2){var p1=e1.point;var p2=e2.point;if(p1[0]>p2[0])return 1;if(p1[0]<p2[0])return-1;if(p1[1]!==p2[1])return p1[1]>p2[1]?1:-1;return specialCases(e1,e2,p1)}function specialCases(e1,e2,p1,p2){if(e1.left!==e2.left)return e1.left?1:-1;if(signedArea(p1,e1.otherEvent.point,e2.otherEvent.point)!==0)return!e1.isBelow(e2.otherEvent.point)?1:-1;return!e1.isSubject&&e2.isSubject?1:-1}function divideSegment(se,p,queue){var r=new SweepEvent(p,false,se,se.isSubject);var l=new SweepEvent(p,true,se.otherEvent,se.isSubject);if(equals(se.point,se.otherEvent.point))console.warn(\"what is that, a collapsed segment?\",se);r.contourId=l.contourId=se.contourId;if(compareEvents(l,se.otherEvent)>0){se.otherEvent.left=true;l.left=false}se.otherEvent.otherEvent=l;se.otherEvent=r;queue.push(l);queue.push(r);return queue}function crossProduct(a,b){return a[0]*b[1]-a[1]*b[0]}function dotProduct(a,b){return a[0]*b[0]+a[1]*b[1]}function intersection(a1,a2,b1,b2,noEndpointTouch){var va=[a2[0]-a1[0],a2[1]-a1[1]];var vb=[b2[0]-b1[0],b2[1]-b1[1]];function toPoint(p,s,d){return[p[0]+s*d[0],p[1]+s*d[1]]}var e=[b1[0]-a1[0],b1[1]-a1[1]];var kross=crossProduct(va,vb);var sqrKross=kross*kross;var sqrLenA=dotProduct(va,va);if(sqrKross>0){var s=crossProduct(e,vb)/kross;if(s<0||s>1)return null;var t=crossProduct(e,va)/kross;if(t<0||t>1)return null;if(s===0||s===1)return noEndpointTouch?null:[toPoint(a1,s,va)];if(t===0||t===1)return noEndpointTouch?null:[toPoint(b1,t,vb)];return[toPoint(a1,s,va)]}kross=crossProduct(e,va);sqrKross=kross*kross;if(sqrKross>0)return null;var sa=dotProduct(va,e)/sqrLenA;var sb=sa+dotProduct(va,vb)/sqrLenA;var smin=Math.min(sa,sb);var smax=Math.max(sa,sb);if(smin<=1&&smax>=0){if(smin===1)return noEndpointTouch?null:[toPoint(a1,smin>0?smin:0,va)];if(smax===0)return noEndpointTouch?null:[toPoint(a1,smax<1?smax:1,va)];if(noEndpointTouch&&smin===0&&smax===1)return null;return[toPoint(a1,smin>0?smin:0,va),toPoint(a1,smax<1?smax:1,va)]}return null}function possibleIntersection(se1,se2,queue){var inter=intersection(se1.point,se1.otherEvent.point,se2.point,se2.otherEvent.point);var nintersections=inter?inter.length:0;if(nintersections===0)return 0;if(nintersections===1&&(equals(se1.point,se2.point)||equals(se1.otherEvent.point,se2.otherEvent.point)))return 0;if(nintersections===2&&se1.isSubject===se2.isSubject)return 0;if(nintersections===1){if(!equals(se1.point,inter[0])&&!equals(se1.otherEvent.point,inter[0]))divideSegment(se1,inter[0],queue);if(!equals(se2.point,inter[0])&&!equals(se2.otherEvent.point,inter[0]))divideSegment(se2,inter[0],queue);return 1}var events=[];var leftCoincide=false;var rightCoincide=false;if(equals(se1.point,se2.point))leftCoincide=true;else if(compareEvents(se1,se2)===1)events.push(se2,se1);else events.push(se1,se2);if(equals(se1.otherEvent.point,se2.otherEvent.point))rightCoincide=true;else if(compareEvents(se1.otherEvent,se2.otherEvent)===1)events.push(se2.otherEvent,se1.otherEvent);else events.push(se1.otherEvent,se2.otherEvent);if(leftCoincide&&rightCoincide||leftCoincide){se2.type=NON_CONTRIBUTING;se1.type=se2.inOut===se1.inOut?SAME_TRANSITION:DIFFERENT_TRANSITION;if(leftCoincide&&!rightCoincide)divideSegment(events[1].otherEvent,events[0].point,queue);return 2}if(rightCoincide){divideSegment(events[0],events[1].point,queue);return 3}if(events[0]!==events[3].otherEvent){divideSegment(events[0],events[1].point,queue);divideSegment(events[1],events[2].point,queue);return 3}divideSegment(events[0],events[1].point,queue);divideSegment(events[3].otherEvent,events[2].point,queue);return 3}function compareSegments(le1,le2){if(le1===le2)return 0;if(signedArea(le1.point,le1.otherEvent.point,le2.point)!==0||signedArea(le1.point,le1.otherEvent.point,le2.otherEvent.point)!==0){if(equals(le1.point,le2.point))return le1.isBelow(le2.otherEvent.point)?-1:1;if(le1.point[0]===le2.point[0])return le1.point[1]<le2.point[1]?-1:1;if(compareEvents(le1,le2)===1)return le2.isAbove(le1.point)?-1:1;return le1.isBelow(le2.point)?-1:1}if(le1.isSubject===le2.isSubject){var p1=le1.point,p2=le2.point;if(p1[0]===p2[0]&&p1[1]===p2[1]){p1=le1.otherEvent.point;p2=le2.otherEvent.point;if(p1[0]===p2[0]&&p1[1]===p2[1])return 0;else return le1.contourId>le2.contourId?1:-1}}else return le1.isSubject?-1:1;return compareEvents(le1,le2)===1?1:-1}function subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation){var sweepLine=new SplayTree(compareSegments);var sortedEvents=[];var rightbound=Math.min(sbbox[2],cbbox[2]);var prev,next,begin;while(eventQueue.length!==0){var event=eventQueue.pop();sortedEvents.push(event);if(operation===INTERSECTION&&event.point[0]>rightbound||operation===DIFFERENCE&&event.point[0]>sbbox[2])break;if(event.left){next=prev=sweepLine.insert(event);begin=sweepLine.minNode();if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);var prevEvent=prev?prev.key:null;var prevprevEvent=void 0;computeFields(event,prevEvent,operation);if(next)if(possibleIntersection(event,next.key,eventQueue)===2){computeFields(event,prevEvent,operation);computeFields(event,next.key,operation)}if(prev)if(possibleIntersection(prev.key,event,eventQueue)===2){var prevprev=prev;if(prevprev!==begin)prevprev=sweepLine.prev(prevprev);else prevprev=null;prevprevEvent=prevprev?prevprev.key:null;computeFields(prevEvent,prevprevEvent,operation);computeFields(event,prevEvent,operation)}}else{event=event.otherEvent;next=prev=sweepLine.find(event);if(prev&&next){if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);sweepLine.remove(event);if(next&&prev)possibleIntersection(prev.key,next.key,eventQueue)}}}return sortedEvents}var Contour=function Contour(){this.points=[];this.holeIds=[];this.holeOf=null;this.depth=null};function orderEvents(sortedEvents){var event,i,len,tmp;var resultEvents=[];for(i=0,len=sortedEvents.length;i<len;i++){event=sortedEvents[i];if(event.left&&event.inResult||!event.left&&event.otherEvent.inResult)resultEvents.push(event)}var sorted=false;while(!sorted){sorted=true;for(i=0,len=resultEvents.length;i<len;i++)if(i+1<len&&compareEvents(resultEvents[i],resultEvents[i+1])===1){tmp=resultEvents[i];resultEvents[i]=resultEvents[i+1];resultEvents[i+1]=tmp;sorted=false}}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];event.otherPos=i}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];if(!event.left){tmp=event.otherPos;event.otherPos=event.otherEvent.otherPos;event.otherEvent.otherPos=tmp}}return resultEvents}function nextPos(pos,resultEvents,processed,origPos){var newPos=pos+1,p=resultEvents[pos].point,p1;var length=resultEvents.length;if(newPos<length)p1=resultEvents[newPos].point;while(newPos<length&&p1[0]===p[0]&&p1[1]===p[1]){if(!processed[newPos])return newPos;else newPos++;p1=resultEvents[newPos].point}newPos=pos-1;while(processed[newPos]&&newPos>origPos)newPos--;return newPos}function initializeContourFromContext(event,contours,contourId){var contour=new Contour;if(event.prevInResult!=null){var prevInResult=event.prevInResult;var lowerContourId=prevInResult.outputContourId;var lowerResultTransition=prevInResult.resultTransition;if(lowerResultTransition>0){var lowerContour=contours[lowerContourId];if(lowerContour.holeOf!=null){var parentContourId=lowerContour.holeOf;contours[parentContourId].holeIds.push(contourId);contour.holeOf=parentContourId;contour.depth=contours[lowerContourId].depth}else{contours[lowerContourId].holeIds.push(contourId);contour.holeOf=lowerContourId;contour.depth=contours[lowerContourId].depth+1}}else{contour.holeOf=null;contour.depth=contours[lowerContourId].depth}}else{contour.holeOf=null;contour.depth=0}return contour}function connectEdges(sortedEvents){var i,len;var resultEvents=orderEvents(sortedEvents);var processed={};var contours=[];var loop=function(){if(processed[i])return;var contourId=contours.length;var contour=initializeContourFromContext(resultEvents[i],contours,contourId);var markAsProcessed=function(pos){processed[pos]=true;resultEvents[pos].outputContourId=contourId};var pos=i;var origPos=i;var initial=resultEvents[i].point;contour.points.push(initial);while(true){markAsProcessed(pos);pos=resultEvents[pos].otherPos;markAsProcessed(pos);contour.points.push(resultEvents[pos].point);pos=nextPos(pos,resultEvents,processed,origPos);if(pos==origPos)break}contours.push(contour)};for(i=0,len=resultEvents.length;i<len;i++)loop();return contours}Contour.prototype.isExterior=function isExterior(){return this.holeOf==null};var tinyqueue=TinyQueue,default_1=TinyQueue;function TinyQueue(data,compare){if(!(this instanceof TinyQueue))return new TinyQueue(data,compare);this.data=data||[];this.length=this.data.length;this.compare=compare||defaultCompare;if(this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function defaultCompare(a,b){return a<b?-1:a>b?1:0}TinyQueue.prototype={push:function(item){this.data.push(item);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var top=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return top},peek:function(){return this.data[0]},_up:function(pos){var data=this.data;var compare=this.compare;var item=data[pos];while(pos>0){var parent=pos-1>>1;var current=data[parent];if(compare(item,current)>=0)break;data[pos]=current;pos=parent}data[pos]=item},_down:function(pos){var data=this.data;var compare=this.compare;var halfLength=this.length>>1;var item=data[pos];while(pos<halfLength){var left=(pos<<1)+1;var right=left+1;var best=data[left];if(right<this.length&&compare(data[right],best)<0){left=right;best=data[right]}if(compare(best,item)>=0)break;data[pos]=best;pos=left}data[pos]=item}},tinyqueue.default=default_1;var max=Math.max,min=Math.min,contourId=0;function processPolygon(contourOrHole,isSubject,depth,Q,bbox,isExteriorRing){var i,len,s1,s2,e1,e2;for(i=0,len=contourOrHole.length-1;i<len;i++){s1=contourOrHole[i];s2=contourOrHole[i+1];e1=new SweepEvent(s1,false,undefined,isSubject);e2=new SweepEvent(s2,false,e1,isSubject);e1.otherEvent=e2;if(s1[0]===s2[0]&&s1[1]===s2[1])continue;e1.contourId=e2.contourId=depth;if(!isExteriorRing){e1.isExteriorRing=false;e2.isExteriorRing=false}if(compareEvents(e1,e2)>0)e2.left=true;else e1.left=true;var x=s1[0],y=s1[1];bbox[0]=min(bbox[0],x);bbox[1]=min(bbox[1],y);bbox[2]=max(bbox[2],x);bbox[3]=max(bbox[3],y);Q.push(e1);Q.push(e2)}}function fillQueue(subject,clipping,sbbox,cbbox,operation){var eventQueue=new tinyqueue(null,compareEvents);var polygonSet,isExteriorRing,i,ii,j,jj;for(i=0,ii=subject.length;i<ii;i++){polygonSet=subject[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],true,contourId,eventQueue,sbbox,isExteriorRing)}}for(i=0,ii=clipping.length;i<ii;i++){polygonSet=clipping[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(operation===DIFFERENCE)isExteriorRing=false;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],false,contourId,eventQueue,cbbox,isExteriorRing)}}return eventQueue}var EMPTY=[];function trivialOperation(subject,clipping,operation){var result=null;if(subject.length*clipping.length===0)if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.length===0?clipping:subject;return result}function compareBBoxes(subject,clipping,sbbox,cbbox,operation){var result=null;if(sbbox[0]>cbbox[2]||cbbox[0]>sbbox[2]||sbbox[1]>cbbox[3]||cbbox[1]>sbbox[3])if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.concat(clipping);return result}function boolean(subject,clipping,operation){if(typeof subject[0][0][0]===\"number\")subject=[subject];if(typeof clipping[0][0][0]===\"number\")clipping=[clipping];var trivial=trivialOperation(subject,clipping,operation);if(trivial)return trivial===EMPTY?null:trivial;var sbbox=[Infinity,Infinity,-Infinity,-Infinity];var cbbox=[Infinity,Infinity,-Infinity,-Infinity];var eventQueue=fillQueue(subject,clipping,sbbox,cbbox,operation);trivial=compareBBoxes(subject,clipping,sbbox,cbbox,operation);if(trivial)return trivial===EMPTY?null:trivial;var sortedEvents=subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation);var contours=connectEdges(sortedEvents);var polygons=[];for(var i=0;i<contours.length;i++){var contour=contours[i];if(contour.isExterior()){var rings=[contour.points];for(var j=0;j<contour.holeIds.length;j++){var holeId=contour.holeIds[j];rings.push(contours[holeId].points)}polygons.push(rings)}}return polygons}function union(subject,clipping){return boolean(subject,clipping,UNION)}function diff(subject,clipping){return boolean(subject,clipping,DIFFERENCE)}function xor(subject,clipping){return boolean(subject,clipping,XOR)}function intersection$1(subject,clipping){return boolean(subject,clipping,INTERSECTION)}var operations={UNION:UNION,DIFFERENCE:DIFFERENCE,INTERSECTION:INTERSECTION,XOR:XOR};exports.diff=diff,exports.intersection=intersection$1,exports.operations=operations,exports.union=union,exports.xor=xor,Object.defineProperty(exports,\"__esModule\",{value:true})}(exports)})),zoomRange=[2,26],Const={deg2rad:Math.PI/180,rad2deg:180/Math.PI,earthRadius:6378137};function isClockwise(poly){for(var sum=0,len=poly.length,i=0;i<len-1;i++){var next,cur=poly[i];sum+=((next=poly[i+1])[0]-cur[0])*(next[1]+cur[1])}return poly[len-1][0]===poly[0][0]&&poly[len-1][1]===poly[0][1]||(cur=poly[len-1],sum+=((next=poly[0])[0]-cur[0])*(next[1]+cur[1])),0<sum}animationPlugin=function(){function GeometryUtilCls(opts){this.CLASS_NAME=\"AMap.GeometryUtil\",this._opts=assign({onSegmentTolerance:5,crs:\"EPSG3857\",maxZoom:zoomRange[1]},opts),this.setCrs(this._opts.crs)}return GeometryUtilCls.prototype.clone=function(opts){return new GeometryUtilCls(assign({},this._opts,opts))},GeometryUtilCls.prototype.isPoint=function(a){return a&&(a instanceof LngLat$1||Util.isArray(a)&&!isNaN(a[0]))},GeometryUtilCls.prototype.normalizePoint=function(a){return a},GeometryUtilCls.prototype.normalizeLine=function(p){for(var items=[],i=0,len=p.length;i<len;i++)items.push(this.normalizePoint(p[i]));return items},GeometryUtilCls.prototype.normalizeMultiLines=function(p){for(var items=[],i=0,len=(p=Util.isArray(p)&&this.isPoint(p[0])?[p]:p).length;i<len;i++)items.push(this.normalizeLine(p[i]));return items},GeometryUtilCls.prototype.setCrs=function(crs){crs=crs&&crs.project&&crs.unproject?crs:\"plane\"===crs?{normalizePoint:function(a){return a&&a.x&&a.y?[a.x,a.y]:a},distance:function(a,dY){var dX=a[0]-dY[0],dY=a[1]-dY[1];return Math.sqrt(dX*dX+dY*dY)},project:function(a){return a},unproject:function(a){return a},ringArea:function(a){for(var e0=[0,0],e1=[0,0],area=0,first=a[0],l=a.length,i=2;i<l;i++){var p=a[i-1],c=a[i];e0[0]=first[0]-c[0],e0[1]=first[1]-c[1],e1[0]=first[0]-p[0],e1[1]=first[1]-p[1],area+=e0[0]*e1[1]-e0[1]*e1[0]}return area/2}}:function(pro){var crs=function(pro){switch(pro){case\"EPSG3857\":return ProjectionManager.getProjection(\"EPSG:3857\");case\"EPSG4326\":return ProjectionManager.getProjection(\"EPSG:4326\")}return ProjectionManager.getProjection(\"EPSG3857\")}(pro);return{project:function(a){return Util.isArray(a)&&(a=new LngLat$1(a[0],a[1])),crs.project(a.lng,a.lat)},unproject:function(a){return Util.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.unproject(a.x,a.y)},normalizePoint:function(a){return Util.parseLngLatData(a)},distance:function(a,lon2){if(lon2=this.normalizePoint(lon2),Util.isArray(lon2))return this.distanceToLine(a,lon2);a=this.normalizePoint(a);var diam=Const.deg2rad,cos=Math.cos,lat1=a.lat*diam,dLon=a.lng*diam,a=lon2.lat*diam,lon2=lon2.lng*diam,diam=2*Const.earthRadius,dLon=lon2-dLon,a=(1-cos(a-lat1)+(1-cos(dLon))*cos(lat1)*cos(a))/2;return diam*Math.asin(Math.sqrt(a))},ringArea:function(yn){yn=this.normalizeLine(yn);var metrePerDegree=Const.earthRadius*Const.deg2rad,sum=0,arr=yn,len=arr.length;if(len<3)return 0;for(var i=0;i<len-1;i+=1){var x2=arr[i],n=arr[i+1],x1=x2.lng*metrePerDegree*Math.cos(x2.lat*Const.deg2rad),y1=x2.lat*metrePerDegree,x2=n.lng*metrePerDegree*Math.cos(n.lat*Const.deg2rad);sum+=x1*(n.lat*metrePerDegree)-x2*y1}var xf=arr[i],p=arr[0],xn=xf.lng*metrePerDegree*Math.cos(xf.lat*Const.deg2rad),yn=xf.lat*metrePerDegree,xf=p.lng*metrePerDegree*Math.cos(p.lat*Const.deg2rad);return sum+=xn*(p.lat*metrePerDegree)-xf*yn,.5*Math.abs(sum)},sphericalCalotteArea:function(h){var r=Const.earthRadius,h=r-r*Math.cos(h/r);return 2*Math.PI*r*h}}}(crs,this._opts.maxZoom);assign(this,crs)},GeometryUtilCls.prototype.distance=function(p1,p2){throw new Error(\"distance Not implemented!\")},GeometryUtilCls.prototype._lineToRawCoords=function(line,makeClockwise){line=this.normalizeLine(line);for(var items=[],i=0,len=(line=!this.isPoint(line[0])?line[0]:line).length;i<len;i++)items.push(this.project(line[i]));return!0===makeClockwise?items=this.makesureClockwise(items):!1===makeClockwise&&(items=this.makesureClockwise(items)).reverse(),items},GeometryUtilCls.prototype._rawCoordsToLine=function(items){for(var results=[],i=0,len=items.length;i<len;i++)results.push(this.unproject(items[i]));return results},GeometryUtilCls.prototype.closestOnSegment=function(a,p1,res){res=Coordinate_closestOnSegment(this.project(a),this._lineToRawCoords([p1,res]));return this.unproject(res)},GeometryUtilCls.prototype.closestOnLine=function(a,line){for(var p,minDist=1/0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++){var closest=this.closestOnSegment(a,line[i],line[i+1]),dist=this.distance(a,closest);dist<minDist&&(minDist=dist,p=closest)}return p},GeometryUtilCls.prototype.distanceToSegment=function(a,p1,p2){return this.distanceToLine(a,[p1,p2])},GeometryUtilCls.prototype.distanceToLine=function(a,line){line=this.normalizeLine(line);for(var dist2=1/0,i=0,len=(line=!this.isPoint(line[0])?line[0]:line).length;i<len-1;i++)var closest=this.closestOnSegment(a,line[i],line[i+1]),dist2=Math.min(dist2,this.distance(a,closest));return dist2},GeometryUtilCls.prototype.distanceToPolygon=function(a,polygon){return this.isPointInRing(a,polygon)?0:this.distanceToLine(a,polygon)},GeometryUtilCls.prototype.isPointOnSegment=function(p,p1,p2,tolerance){return(!tolerance&&0!==tolerance||tolerance<0)&&(tolerance=this._opts.onSegmentTolerance),this.distanceToSegment(p,p1,p2)<=tolerance},GeometryUtilCls.prototype.isPointOnLine=function(a,line,tolerance){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.isPointOnSegment(a,line[i],line[i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnRing=function(a,ring,tolerance){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.isPointOnSegment(a,ring[i],ring[i===len-1?0:i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnPolygon=function(a,rings,tolerance){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.isPointOnRing(a,rings[i],tolerance))return!0;return!1},GeometryUtilCls.prototype.makesureClockwise=function(coords){return isClockwise(coords)||(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.makesureAntiClockwise=function(coords){return isClockwise(coords)&&(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.pointInRing=function(pt,polys,ignoreBoundary){for(var insidePoly=!1,i=0;i<polys.length&&!insidePoly;i++)if(inRing(pt,polys[i][0],ignoreBoundary)){for(var inHole=!1,k=1;k<polys[i].length&&!inHole;)inRing(pt,polys[i][k],!ignoreBoundary)&&(inHole=!0),k++;inHole||(insidePoly=!0)}function inRing(pt,ring,ignoreBoundary){for(var isInside=!1,i=0,j=(ring=ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]?ring.slice(0,ring.length-1):ring).length-1;i<ring.length;j=i++){var xi=ring[i][0],yi=ring[i][1],xj=ring[j][0],yj=ring[j][1];if(pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)==0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0)return!ignoreBoundary;yi>pt[1]!=yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi&&(isInside=!isInside)}return isInside}return insidePoly},GeometryUtilCls.prototype.isPointInBbox=function(pt,bbox){for(var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<bbox.length;i++)var b=bbox[i],minX=Math.min(minX,b[0]),maxX=Math.max(maxX,b[0]),minY=Math.min(minY,b[1]),maxY=Math.max(maxY,b[1]);return pt[0]>minX&&pt[0]<maxX&&pt[1]>minY&&pt[1]<maxY},GeometryUtilCls.prototype.isPointInRing=function(a,coords){coords=this.normalizeLine(coords);coords=this._lineToRawCoords(coords,!0);return Coordinate_containsCoordinate(this.project(a),coords,!1)},GeometryUtilCls.prototype.isRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByOutsea=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;for(i=0,len=r2.length;i<len;i++)if(this.isPointInRing(r2[i],r1))return!0;return!1},GeometryUtilCls.prototype.isRingInRingByMapbox=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByMapboxB=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;return!1},GeometryUtilCls.prototype.isPixelRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(Coordinate_containsCoordinate(r1[i],r2,!1))return!0;return!1},GeometryUtilCls.prototype.isPointInPolygon=function(a,rings){for(var containsCoordinate,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);return Boolean(containsCoordinate)},GeometryUtilCls.prototype.isPointInPolygons=function(a,polys){for(var c=0;c<polys.length;c++){for(var rings=polys[c],containsCoordinate=void 0,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);if(containsCoordinate)return!0}return!1},GeometryUtilCls.prototype.doesSegmentsIntersect=function(ua,a2,b1,b2){var ub=this._lineToRawCoords([ua,a2,b1,b2]);ua=ub[0],a2=ub[1],b1=ub[2];var result=!1,ua_t=((b2=ub[3])[0]-b1[0])*(ua[1]-b1[1])-(b2[1]-b1[1])*(ua[0]-b1[0]),ub=(a2[0]-ua[0])*(ua[1]-b1[1])-(a2[1]-ua[1])*(ua[0]-b1[0]),ua=(b2[1]-b1[1])*(a2[0]-ua[0])-(b2[0]-b1[0])*(a2[1]-ua[1]);return 0!=ua&&(ub=ub/ua,0<=(ua=ua_t/ua)&&ua<=1&&0<=ub&&ub<=1&&(result=!0)),result},GeometryUtilCls.prototype.doesSegmentLineIntersect=function(p1,p2,line){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.doesSegmentsIntersect(p1,p2,line[i],line[i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentRingIntersect=function(p1,p2,ring){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.doesSegmentsIntersect(p1,p2,ring[i],ring[i===len-1?0:i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentPolygonIntersect=function(p1,p2,rings){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.doesSegmentRingIntersect(p1,p2,rings[i]))return!0;return!1},GeometryUtilCls.prototype.doesLineLineIntersect=function(l1,l2){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentLineIntersect(l1[i],l1[i+1],l2))return!0;return!1},GeometryUtilCls.prototype.doesLineRingIntersect=function(l1,ring){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentRingIntersect(l1[i],l1[i+1],ring))return!0;return!1},GeometryUtilCls.prototype.doesPolygonPolygonIntersect=function(polygon1,polygon2){return!!(this.doesRingRingIntersect(polygon2,polygon1)||this.isRingInRing(polygon1,polygon2)||this.isRingInRing(polygon2,polygon1))},GeometryUtilCls.prototype.doesRingRingIntersect=function(r1,r2){for(var i=0,len=(r1=this.normalizeLine(r1)).length;i<len;i++)if(this.doesSegmentRingIntersect(r1[i],r1[i===len-1?0:i+1],r2))return!0;return!1},GeometryUtilCls.prototype.along=function(path,distance){for(var dis=0,i=0;i<path.length-1;i+=1){var ppdis=this.distance(path[i],path[i+1]);if(!(ppdis+dis<distance)){var s=(distance-dis)/ppdis;return[path[i][0]+s*(path[i+1][0]-path[i][0]),path[i][1]+s*(path[i+1][1]-path[i][1]),i]}dis+=ppdis}return null},GeometryUtilCls.prototype._clip=function(subjectPolygon,clipPolygon){for(var e,inside=function(p){return(cp2[0]-cp1[0])*(p[1]-cp1[1])>(cp2[1]-cp1[1])*(p[0]-cp1[0])},intersection=function(){var dc=[cp1[0]-cp2[0],cp1[1]-cp2[1]],dp=[s[0]-e[0],s[1]-e[1]],n1=cp1[0]*cp2[1]-cp1[1]*cp2[0],n2=s[0]*e[1]-s[1]*e[0],n3=1/(dc[0]*dp[1]-dc[1]*dp[0]);return[(n1*dp[0]-n2*dc[0])*n3,(n1*dp[1]-n2*dc[1])*n3]},outputList=subjectPolygon=this.makesureAntiClockwise(subjectPolygon),cp1=(clipPolygon=this.makesureClockwise(clipPolygon))[clipPolygon.length-1],j=0,jlen=clipPolygon.length;j<jlen;j++){for(var cp2=clipPolygon[j],inputList=outputList,outputList=[],s=inputList[inputList.length-1],i=0,len=inputList.length;i<len;i++)inside(e=inputList[i])?(inside(s)||outputList.push(intersection()),outputList.push(e)):inside(s)&&outputList.push(intersection()),s=e;cp1=cp2}return outputList},GeometryUtilCls.prototype.ringRingClip=function(r1,clip){r1=this._lineToRawCoords(r1),clip=this._lineToRawCoords(clip),isEqual(r1[0],r1[r1.length-1])||r1.push(r1[0].slice()),isEqual(clip[0],clip[clip.length-1])||clip.push(clip[0].slice());clip=martinez.intersection([r1],[clip]);return clip&&clip[0]&&clip[0][0]?this._rawCoordsToLine(clip[0][0]):[]},GeometryUtilCls.prototype.ringArea=function(r){throw new Error(\"distance Not implemented!\")},GeometryUtilCls.prototype.distanceOfLine=function(line){for(var distance=0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)distance+=this.distance(line[i],line[i+1]);return distance},GeometryUtilCls.prototype.isClockwise=function(line){return isClockwise(line=this._lineToRawCoords(line))},GeometryUtilCls.prototype.typePolygon=function(polygon){return isArray(polygon)&&isArray(polygon[0])?2===polygon[0][0].length||polygon[0][0]instanceof LngLat$1?\"Polygon\":2<polygon[0][0].length&&(2===polygon[0][0][0].length||polygon[0][0][0]instanceof LngLat$1)?\"MultiPolygon\":\"never\":\"never\"},GeometryUtilCls}(),GeometryUtilInstance=new animationPlugin({}),animationPlugin=new animationPlugin({});animationPlugin.setCrs(\"plane\");function extend(dest){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&(\"function\"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target);return dest}var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isPointInBbox:GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointInPolygons:GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)},LngLat$1=(animationPlugin.distance.bind(animationPlugin),animationPlugin.ringArea.bind(animationPlugin),animationPlugin.isClockwise.bind(animationPlugin),animationPlugin.typePolygon.bind(animationPlugin),animationPlugin.makesureClockwise.bind(animationPlugin),animationPlugin.makesureAntiClockwise.bind(animationPlugin),animationPlugin.distanceOfLine.bind(animationPlugin),animationPlugin.ringRingClip.bind(animationPlugin),animationPlugin.doesSegmentsIntersect.bind(animationPlugin),animationPlugin.doesSegmentLineIntersect.bind(animationPlugin),animationPlugin.doesSegmentRingIntersect.bind(animationPlugin),animationPlugin.doesSegmentPolygonIntersect.bind(animationPlugin),animationPlugin.doesLineLineIntersect.bind(animationPlugin),animationPlugin.doesLineRingIntersect.bind(animationPlugin),animationPlugin.doesRingRingIntersect.bind(animationPlugin),animationPlugin.pointInRing.bind(animationPlugin),animationPlugin.isPointInRing.bind(animationPlugin),animationPlugin.isPointInBbox.bind(animationPlugin),animationPlugin.isRingInRing.bind(animationPlugin),animationPlugin.isPointInPolygon.bind(animationPlugin),animationPlugin.isPointInPolygons.bind(animationPlugin),animationPlugin.isPointOnSegment.bind(animationPlugin),animationPlugin.isPointOnLine.bind(animationPlugin),animationPlugin.isPointOnRing.bind(animationPlugin),animationPlugin.isPointOnPolygon.bind(animationPlugin),animationPlugin.closestOnSegment.bind(animationPlugin),animationPlugin.closestOnLine.bind(animationPlugin),animationPlugin.distanceToSegment.bind(animationPlugin),animationPlugin.distanceToLine.bind(animationPlugin),function(){function LngLat(lng,lat,noWrap){var obj;if(void 0===noWrap&&(noWrap=!1),this.className=\"AMap.LngLat\",obj=lng,Array.isArray(obj)&&function(tmp){tmp=+tmp;return\"number\"==typeof+tmp&&!isNaN(tmp)}(obj[0])?(lng=parseFloat(lng[0]),lat=parseFloat(lng[1])):(lat=parseFloat(lat),lng=parseFloat(lng)),isNaN(lng)||isNaN(lat))throw Error(\"Invalid Object: LngLat(\"+lng+\", \"+lat+\")\");!0!==noWrap&&(lat=Math.max(Math.min(lat,90),-90),lng=(lng+180)%360+(lng<-180||180===lng?180:-180)),this._highLat=lat,this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this.lat=Math.round(1e6*lat)/1e6,this.pos=ProjectionManager.getProjection(\"EPSG:3857\").project(lng,lat)}return LngLat.from=function(point){return isLngLat(point)?new LngLat(point._highLng,point._highLat):new LngLat(point[0],point[1])},LngLat.prototype.setLng=function(lng){return this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this},LngLat.prototype.setLat=function(lat){return this._highLat=lat,this.lat=Math.round(1e6*lat)/1e6,this},LngLat.prototype.getLng=function(){return this.lng},LngLat.prototype.getLat=function(){return this.lat},LngLat.prototype.equals=function(another){return(another=function parseLngLatData(data){if(Array.isArray(data)){if(!Array.isArray(data[0])){var type=typeof data[0];return\"string\"==type||\"number\"==type?new LngLat$1(data[0],data[1]):data}for(var i=0;i<data.length;i+=1)data[i]=parseLngLatData(data[i])}return data}(another))instanceof LngLat&&Math.max(Math.abs(this._highLat-another._highLat),Math.abs(this._highLng-another._highLng))<=1e-9},LngLat.prototype.add=function(another,noWrap){return new LngLat(this._highLng+another._highLng,this._highLat+another._highLat,noWrap)},LngLat.prototype.subtract=function(another,noWrap){return new LngLat(this._highLng-another._highLng,this._highLat-another._highLat,noWrap)},LngLat.prototype.divideBy=function(num,noWrap){return new LngLat(this._highLng/num,this._highLat/num,noWrap)},LngLat.prototype.multiplyBy=function(num,noWrap){return new LngLat(this._highLng*num,this._highLat*num,noWrap)},LngLat.prototype.offset=function(lng,aLat){if(isNaN(lng)||isNaN(aLat))throw Error(\"valid offset args, require number\");lng=2*Math.asin(Math.sin(Math.round(lng)/12756274)/Math.cos(this._highLat*Math.PI/180)),lng=this._highLng+180*lng/Math.PI,aLat=2*Math.asin(Math.round(aLat)/12756274);return new LngLat(lng,this._highLat+180*aLat/Math.PI)},LngLat.prototype.toString=function(){return this.lng+\",\"+this.lat},LngLat.prototype.toArray=function(){return[this.lng,this.lat]},LngLat.prototype.toJSON=function(){return[this.lng,this.lat]},LngLat.prototype.distanceTo=function(another){return GeometryUtil.distance(this,another)},LngLat.prototype.distance=function(another){return GeometryUtil.distance(this,another)},LngLat}()),Size=function(){function Size(width,height,isRound){if(void 0===isRound&&(isRound=!1),this.className=\"AMap.Size\",isNaN(width)||isNaN(height))throw new Error(\"Invalid Object: Pixel(\"+width+\", \"+height+\")\");this.width=isRound?Math.round(width):Number(width),this.height=isRound?Math.round(height):Number(height)}return Size.prototype.getWidth=function(){return this.width},Size.prototype.getHeight=function(){return this.height},Size.prototype.toString=function(){return this.width+\",\"+this.height},Size.prototype.toArray=function(){return[this.width,this.height]},Size}();var Browser=function(localStore){var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if(\"object\"==typeof WebAssembly&&\"function\"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=(any3d=function(key){return-1!==ua.indexOf(key)})(\"macintosh\"),iPad=any3d(\"ipad;\")||any3d(\"ipad \"),viewportScale=any3d(\"ipod touch;\"),iPhone=any3d(\"iphone;\")||any3d(\"iphone \"),ios=iPhone||iPad||viewportScale,safari=(mac||ios)&&any3d(\"safari\")&&any3d(\"version/\"),ie3d=any3d(\"macwechat\"),isSvg=any3d(\"windowswechat\"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:ie3d,windowsWechat:isSvg,amapRunTime:amapRunTime};if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var win_1=window,baseRender=document,vdataVersion=baseRender.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),ie=\"ActiveXObject\"in win_1,retina=0!=window.detectRetina&&(\"devicePixelRatio\"in win_1&&1<win_1.devicePixelRatio||ie&&\"matchMedia\"in win_1&&win_1.matchMedia(\"(min-resolution:144dpi)\")&&win_1.matchMedia(\"(min-resolution:144dpi)\").matches),windows=any3d(\"windows nt\"),movingDraw=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),any3d(\"windows nt 10\"),any3d(\"windows phone\")),mb2345Browser=any3d(\"Mb2345Browser\"),ios10=(ios&&ua.search(/ os [456]_/),ios&&ua.search(/ os [4-8]_/),ios&&ua.search(/ os [78]_/),ios&&any3d(\"os 8_\"),ios&&any3d(\"os 10_\")),android_1=any3d(\"android\"),enableVector=0;android_1&&(enableVector=parseInt(ua.split(\"android\")[1])||0);var android23=android_1&&enableVector<4,plat_1=(android_1&&5<=enableVector||ua.search(/android 4.4/),android_1?\"android\":ios?\"ios\":windows?\"windows\":mac?\"mac\":\"other\"),ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!baseRender.querySelector,ielt9=ie&&!baseRender.addEventListener,ie9=ie&&any3d(\"msie 9\"),ie10=ie&&any3d(\"msie 10\"),ie11=ie&&any3d(\"rv:11\"),ielt10=ielt9||ie9,edge=any3d(\"edge\"),uc=(any3d(\"qtweb\"),any3d(\"ucbrowser\")),gaodeCoords=any3d(\"alipay\")||android_1&&uc,wechat=(any3d(\"miuibrowser\"),any3d(\"micromessenger\")),opera3d=any3d(\"dingtalk\"),qq=any3d(\"mqqbrowser\"),baidu=any3d(\"baidubrowser\"),byWebgl=any3d(\"crios/\"),chrome=any3d(\"chrome/\"),webkit_1=!((chrome||byWebgl)&&any3d(\"chromium\"))&&(chrome&&30<parseInt(ua.split(\"chrome/\")[1])||byWebgl&&30<parseInt(ua.split(\"crios/\")[1])),firefox=any3d(\"firefox\"),webkit3d=firefox&&27<parseInt(ua.split(\"firefox/\")[1]),gecko3d=safari&&7<parseInt(ua.split(\"version/\")[1]),mobile_1=(ios&&any3d(\"aliapp\"),android_1||ios||movingDraw||any3d(\"mobile\")),checkWebgl=\"ontouchstart\"in baseRender,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!checkWebgl&&(pointer||msPointer),touch_1=checkWebgl||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName(\"meta\")}catch(e){return 1}for(var i=metas.length-1;0<=i;--i)if(\"viewport\"===metas[i].name){var content=metas[i].content,initial_scale=void 0,minimum_scale=void 0,maximum_scale=void 0;return-1!==content.indexOf(\"initial-scale\")&&(initial_scale=parseFloat(content.split(\"initial-scale=\")[1])),minimum_scale=-1!==content.indexOf(\"minimum-scale\")?parseFloat(content.split(\"minimum-scale=\")[1]):0,maximum_scale=-1!==content.indexOf(\"maximum-scale\")?parseFloat(content.split(\"maximum-scale=\")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log(\"viewport参数不合法\"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log(\"viewport参数不合法\"),null)}}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&\"transition\"in vdataVersion.style,isSvg=!!baseRender.createElementNS&&!!baseRender.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\").createSVGRect,canvas_1=baseRender.createElement(\"canvas\"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),enableVector=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!webkit_1)&&window.Worker&&enableVector&&enableVector.createObjectURL&&window.Blob,webglContextName_1=\"\",graphicCard_1=\"\",maxRenderSize_1=0,byWebgl=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:byWebgl,depth:!0,stencil:!0}),checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var contextName=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var graphicCardShort=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!graphicCardShort)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,graphicCardShort[0],graphicCardShort[1]),safari&&\"mac\"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));graphicCardShort=Math.max(screen.width,screen.height);if(needFitRetina_1&&(graphicCardShort*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<graphicCardShort)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCardShort=function(graphicVersion){if(!graphicVersion)return null;var forShort=null,radeonIndex=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/);if(0<=(graphicVersion=(graphicVersion=radeonIndex?(graphicVersion=radeonIndex[1]).replace(/\\s*direct3d.*$/,\"\"):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\")).indexOf(\"intel\")){forShort=[\"Intel\"];return 0<=graphicVersion.indexOf(\"mobile\")&&forShort.push(\"Mobile\"),(0<=graphicVersion.indexOf(\"gma\")||0<=graphicVersion.indexOf(\"graphics media accelerator\"))&&forShort.push(\"GMA\"),0<=graphicVersion.indexOf(\"haswell\")?forShort.push(\"Haswell\"):0<=graphicVersion.indexOf(\"ivy\")?forShort.push(\"HD 4000\"):0<=graphicVersion.indexOf(\"sandy\")?forShort.push(\"HD 3000\"):0<=graphicVersion.indexOf(\"ironlake\")?forShort.push(\"HD\"):(0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase())),forShort=forShort.join(\" \")}if(0<=graphicVersion.indexOf(\"nvidia\")||0<=graphicVersion.indexOf(\"quadro\")||0<=graphicVersion.indexOf(\"geforce\")||0<=graphicVersion.indexOf(\"nvs\"))return forShort=[\"nVidia\"],0<=graphicVersion.indexOf(\"geforce\")&&forShort.push(\"geForce\"),0<=graphicVersion.indexOf(\"quadro\")&&forShort.push(\"Quadro\"),0<=graphicVersion.indexOf(\"nvs\")&&forShort.push(\"NVS\"),graphicVersion.match(/\\bion\\b/)&&forShort.push(\"ION\"),graphicVersion.match(/gtx\\b/)?forShort.push(\"GTX\"):graphicVersion.match(/gts\\b/)?forShort.push(\"GTS\"):graphicVersion.match(/gt\\b/)?forShort.push(\"GT\"):graphicVersion.match(/gs\\b/)?forShort.push(\"GS\"):graphicVersion.match(/ge\\b/)?forShort.push(\"GE\"):graphicVersion.match(/fx\\b/)&&forShort.push(\"FX\"),(number=graphicVersion.match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"GS\",\"\")),0<=graphicVersion.indexOf(\"titan\")?forShort.push(\"TITAN\"):0<=graphicVersion.indexOf(\"ti\")&&forShort.push(\"Ti\"),forShort=forShort.join(\" \");if(0<=graphicVersion.indexOf(\"amd\")||0<=graphicVersion.indexOf(\"ati\")||0<=graphicVersion.indexOf(\"radeon\")||0<=graphicVersion.indexOf(\"firegl\")||0<=graphicVersion.indexOf(\"firepro\")){forShort=[\"AMD\"],0<=graphicVersion.indexOf(\"mobil\")&&forShort.push(\"Mobility\");var number,radeonIndex=graphicVersion.indexOf(\"radeon\");return 0<=radeonIndex&&forShort.push(\"Radeon\"),0<=graphicVersion.indexOf(\"firepro\")?forShort.push(\"FirePro\"):0<=graphicVersion.indexOf(\"firegl\")&&forShort.push(\"FireGL\"),0<=graphicVersion.indexOf(\"hd\")&&forShort.push(\"HD\"),(number=(graphicVersion=0<=radeonIndex?graphicVersion.substring(radeonIndex):graphicVersion).match(numberRegex_1))&&forShort.push(number[1].toUpperCase().replace(\"HD\",\"\")),forShort=forShort.join(\" \")}return graphicVersion.substring(0,100)}(graphicCard_1=gl.getExtension(\"WEBGL_debug_renderer_info\")?gl.getParameter(37446):null);if(graphicCardShort){if(-1<graphicCardShort.indexOf(\"google swiftshader\"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(graphicCardShort))return!1}return webglContextName_1=contextName[i],!0}}return!1},baseRender=checkWebgl(),enableVector=void 0===localStore[8]||localStore[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&baseRender&&(window.forceWebGL||(webkit_1||webkit3d||gecko3d||edge||wechat||opera3d)&&\"other\"!=plat_1),baseRender=window.forceWebGLBaseRender||byWebgl?\"w\":\"d\",webkit_1=any3d(\"webkit\"),webkit3d=\"WebKitCSSMatrix\"in win_1&&\"m11\"in new window.WebKitCSSMatrix,gecko3d=\"MozPerspective\"in vdataVersion.style,opera3d=\"OTransition\"in vdataVersion.style,any3d=ie3d||webkit3d||gecko3d||opera3d,vdataVersion=void 0!==localStore[12]?localStore[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(chromeversion=(new Date).getTime()+\"\",win_1.localStorage.setItem(\"_test\",chromeversion),win_1.localStorage.getItem(\"_test\")!==chromeversion&&(localStore=!1),win_1.localStorage.removeItem(\"_test\"))}catch(e){localStore=!1}var chromeversion=parseInt(ua.split(\"chrome/\")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:ios,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=chromeversion,chrome64:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:byWebgl,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?baseRender:\"d\",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:checkWebgl};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}(\"undefined\"==typeof config?[]:config);\"undefined\"!=typeof createImageBitmap&&\"undefined\"!=typeof ImageBitmap&&(Browser.imageBitmap=!0);var records,NEWTON_ITERATIONS,SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS,float32ArraySupported,animationPlugin=Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+3*aA1)*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+3*aA1}function LinearEasing(x){return x}function getQuadBezierValue(t,p1,p2,p3){if(1<=t)return p3;var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3}function cubic(t,y,bY,p2,aY){if(1<=t)return aY;var x=3*(bY.pos[0]-y.pos[0]),bX=3*(p2.pos[0]-bY.pos[0])-x,aX=aY.pos[0]-y.pos[0]-x-bX,cY=3*(bY.pos[1]-y.pos[1]),bY=3*(p2.pos[1]-bY.pos[1])-cY,aY=aY.pos[1]-y.pos[1]-cY-bY,x=aX*Math.pow(t,3)+bX*Math.pow(t,2)+x*t+y.pos[0],y=aY*Math.pow(t,3)+bY*Math.pow(t,2)+cY*t+y.pos[1];return ProjectionManager.getProjection(\"EPSG:3857\").unproject(x,y)}function quad(t,p0,p1,p2){return ProjectionManager.getProjection(\"EPSG:3857\").unproject(getQuadBezierValue(t,p0.pos[0],p1.pos[0],p2.pos[0]),getQuadBezierValue(t,p0.pos[1],p1.pos[1],p2.pos[1]))}function getCoordsWithControlPoints(coordsArr,next,cpList,scaleFactor){var result=null;return coordsArr&&cpList&&cpList.length&&((coordsArr=[coordsArr]).push.apply(coordsArr,cpList),coordsArr.push(next),coordsArr.length,result=function(num,pList){var func=null;switch(pList.length){case 3:func=quad;break;case 4:func=cubic;break;default:return null}for(var coords=[],params=[0].concat(pList),i=1;i<num-2;i++)params[0]=i/num,coords.push(func.apply(null,params));return coords.push(pList[pList.length-1]),coords}(function(pList,scaleFactor){for(var tolerance=4,interpolateLimit=[3,300],tolerance=Math.max(2,tolerance),xLen=0,yLen=0,i=0,len=pList.length;i<len-1;i++){var p1=pList[i],p2=pList[i+1];xLen+=Math.abs(p2.pos[0]-p1.pos[0]),yLen+=Math.abs(p2.pos[1]-p1.pos[1])}return Math.min(interpolateLimit[1],Math.max(interpolateLimit[0],Math.round(Math.max(xLen,yLen)/scaleFactor/tolerance)))}(coordsArr,scaleFactor),coordsArr)),result||[next]}Browser.canceledWorkerFetch=animationPlugin,Browser.amapRunTime={workerTime:{}};var NebulaTagType,BezierUtil={quad:quad,cubic:cubic,easing:(records={},NEWTON_ITERATIONS=4,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,float32ArraySupported=\"function\"==typeof Float32Array,function(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1))throw new Error(\"bezier x values must be in [0, 1] range\");var easingKey=arguments.toString();if(records[easingKey])return records[easingKey];if(mX1===mY1&&mX2===mY2)return LinearEasing;for(var sampleValues=new(float32ArraySupported?Float32Array:Array)(11),i=0;i<11;++i)sampleValues[i]=calcBezier(.1*i,mX1,mX2);function getTForX(aX){for(var intervalStart=0,currentSample=1;10!==currentSample&&sampleValues[currentSample]<=aX;++currentSample)intervalStart+=.1;var guessForT=intervalStart+.1*((aX-sampleValues[--currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample])),initialSlope=getSlope(guessForT,mX1,mX2);return.001<=initialSlope?function(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}(aX,guessForT,mX1,mX2):0===initialSlope?guessForT:function(aX,aA,aB,mX1,mX2){for(var currentX,currentT,i=0;0<(currentX=calcBezier(currentT=aA+(aB-aA)/2,mX1,mX2)-aX)?aB=currentT:aA=currentT,Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS;);return currentT}(aX,intervalStart,intervalStart+.1,mX1,mX2)}function easingFunction(x){return 0===x?0:1===x?1:calcBezier(getTForX(x),mY1,mY2)}return records[easingKey]=easingFunction}),getInterpolateCoords:function(lngLats,scaleFactor){for(var coords=[],i=0,len=lngLats.length;i<len;i+=1)coords.push.apply(coords,getCoordsWithControlPoints(lngLats[i-1],lngLats[i],lngLats[i].controlPoints,scaleFactor));return coords},getInterpolateLngLats:function(lngLats,crs,scaleFactor,opts){for(var coords=this.getInterpolateCoords(lngLats,crs,scaleFactor,opts),results=[],i=0,len=coords.length;i<len;i++)results.push(function(crs,a){return Array.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.containerTolnglat(a,20)}(crs,coords[i]));return results}},lcs=new(function(){function LCS(){this._wordCoord=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this._widthNum=128,this._heightNum=128,this._widthSize=(this._wordCoord[2]-this._wordCoord[0])/this._widthNum,this._heightSize=(this._wordCoord[3]-this._wordCoord[1])/this._heightNum}return LCS.prototype.setMap=function(map){this.map=map},LCS.prototype.getSize=function(){return[this._widthSize,this._heightSize]},LCS.prototype.getNum=function(){return[this._widthNum,this._heightNum]},LCS.prototype.getLocalByLnglat=function(coord){var _a,coord=(_a=ProjectionManager.getProjection(\"EPSG:3857\")).project.apply(_a,coord);return this.getLocalByCoord(coord)},LCS.prototype.getLocalByCoord=function(coord){var x=Math.floor(coord[0]/this._widthSize),y=Math.floor(coord[1]/this._heightSize),local=this.getLocalCenterByXY(x,y);return{deltaCenter:[coord[0]-local.center[0],coord[1]-local.center[1]],x:x,y:y,center:local.center,bbox:local.bbox}},LCS.prototype.getLocalCenterByXY=function(x,y){var center={x:x,y:y,center:[0,0],bbox:[0,0,0,0]};return center.center=[(x+.5)*this._widthSize,(y+.5)*this._heightSize],center.bbox=[x*this._widthSize,y*this._heightSize,(x+1)*this._widthSize,(y+1)*this._heightSize],center},LCS.prototype.getDeltaCoord=function(coord){var centerObj=this.getLocalByCoord(coord);return[coord[0]-centerObj.center[0],coord[1]-centerObj.center[1]]},LCS}()),globalInstance=self;!function(NebulaTagType){NebulaTagType.LITE=\"lite\",NebulaTagType.LEFT=\"left\",NebulaTagType.ALL=\"all\",NebulaTagType.NONE=\"\"}(NebulaTagType=NebulaTagType||{});var TagMap={2:\"all\",3:\"all\",4:\"all\",5:\"all\",6:\"lite\",7:\"all\",8:\"lite\",9:\"all\",10:\"lite\",11:\"lite\",12:\"all\",13:\"all\",14:\"all\",15:\"lite\",16:\"lite\",17:\"all\",18:\"all\",19:\"all\",20:\"all\"},colorNameDist={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",grey:\"#808080\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"},Util=function(){var supportNativeBind,CHARS,isWorker,lastId,originUtil={CLASS_NAME:\"AMap.Util\",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(isWorker=!0===Browser.isWorkerEnv,lastId=1e5,function(obj){return obj._amap_id=isWorker?++lastId:--lastId,obj._amap_id}),singlton:function(singltonClass){return Util.Single[singltonClass]||new singltonClass},getOptimalZoom:function(z){return z<Math.floor(z)+.8?Math.floor(z):Math.ceil(z)},join:function(object,sp){if(object.join)return object.join(sp);var i,r=[];for(i in object)object.hasOwnProperty(i)&&r.push(i+\"=\"+(object[i]||\"\"));return r.join(sp)},getGuid:function(pre,median){return void 0===median&&(median=10),(pre||\"\")+Math.round(Math.random()*Math.pow(10,median))+\"_\"+(new Date).getTime()},uuid:(CHARS=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\"),function(len,radix){var i,chars=CHARS,uuid=[];if(radix=(radix=void 0===radix?62:radix)||chars.length,len=void 0===len?0:len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else{var r;for(uuid[8]=uuid[13]=uuid[18]=uuid[23]=\"-\",uuid[14]=\"4\",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r])}return uuid.join(\"\")}),endsWith:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)===shortStr},suspendedServices:[],globalPan:268435456,p20Center:[215440491,106744817],fps:{start:function(instance){instance.startTime=new Date,instance.times=[];function animate(){var now_=(new Date).getTime();instance.times.push(now_-lastTime),lastTime=now_,instance.id=Util.requestAnimFrame(animate)}var lastTime=(new Date).getTime();instance.id=Util.requestAnimFrame(animate)},cancel:function(instance){instance.id&&Util.cancelAnimFrame(instance.id)},stop:function(instance){instance.costTime=Date.now()-instance.startTime,this.cancel(instance),instance.fps=Math.round(1e3/(instance.costTime/(instance.times.length+1)))}},getTransitionalVal:function(deltaValue,nextValue,percent,easeFunction,isRound){if(void 0===isRound&&(isRound=!1),deltaValue===nextValue)return nextValue;switch(easeFunction=void 0===easeFunction?\"linear\":easeFunction){case\"ease\":percent=BezierUtil.easing(.25,.1,.25,1)(percent);break;case\"ease-in\":percent=BezierUtil.easing(.42,0,1,1)(percent);break;case\"ease-out\":percent=BezierUtil.easing(0,0,.58,1)(percent);break;case\"ease-in-out\":percent=BezierUtil.easing(.42,0,.58,1)(percent)}deltaValue+=(nextValue-deltaValue)*percent;return isRound&&(deltaValue>>=0),deltaValue},createObjectURL:function(code,contentType){void 0===contentType&&(contentType=\"text/javascript; charset=utf-8\");var url=null;try{url=(globalInstance.URL||globalInstance.webkitURL).createObjectURL(new Blob([code],{type:contentType}))}catch(e){url=null}return url},revokeObjectURL:function(url){try{(globalInstance.URL||globalInstance.webkitURL).revokeObjectURL(url)}catch(e){}},arrayToVIObj:function(array){for(var obj={},i=0,l=array.length;i<l;i++)obj[array[i]]=i;return obj},lnglatToCoords:function(lnglat,dlat){var tileNum=Math.pow(2,dlat),dlat=180/tileNum;return[Math.floor(lnglat[0]/(360/tileNum))+tileNum/2,tileNum/2-Math.ceil(lnglat[1]/dlat)]},computeTileRange:function(minCoords,z,isPure){void 0===isPure&&(isPure=!1);var maxCoords=[minCoords[0],minCoords[3]],minX=[minCoords[2],minCoords[1]],minCoords=this.lnglatToCoords(maxCoords,z),maxCoords=this.lnglatToCoords(minX,z),minX=minCoords[0],minY=minCoords[1],maxX=maxCoords[0],maxY=maxCoords[1];if(isPure)return{minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};this._optimalTileRange={minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};for(var tileRange=[],i=minX;i<=maxX;i+=1)for(var j=minY;j<=maxY;j+=1)tileRange.push([z,i,j]);return tileRange},getMappingKey:function(conf){var obj={};if(Util.is(conf,\"object\"))for(var key in conf)conf.hasOwnProperty(key)&&(obj[conf[key]]=key);return obj},merge:function(array1,array2){if(array2.length<5e4)array1.push.apply(array1,array2);else for(var ii=0,iilen=array2.length;ii<iilen;ii+=1)array1.push(array2[ii])},clone:function(a){if(\"object\"!=typeof a||null===a)return a;if(a.noDeepClone||this.is(a,\"Float32Array\")||this.is(a,\"Uint16Array\"))return a;var i,b=this.isArray(a)?[]:{};for(i in a)a.hasOwnProperty(i)&&(b[i]=Util.clone(a[i]));return b},isInteger:function(num){return(0|num)===num},isNumber:function(num){return!isNaN(num)},setPrototypeOf:\"function\"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(obj,_prototype){for(var key in _prototype)obj[key]=_prototype[key]},isFunction:function(value){return\"function\"==typeof value},argbToArray:function(argb,format){if(void 0===format&&(format=\"webgl\"),!argb)return argb;for(var array=[],i=0,l=argb.length;i<l;i+=2){var val=parseInt(argb.substr(i,2),16);(\"webgl\"===format||\"rgba\"===format&&0===i)&&(val=this.format(val/255,3)),array.push(val)}return array.push(array.shift()),array},noop:function(){},keys:\"function\"==typeof Object.keys?Object.keys:function(obj){var key,keys=[];for(key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys},map:function(collection,fun,context){void 0===context&&(context=null);var newCollection=[];return collection&&collection.length?(Util.each(collection,function(){for(var args=[],_a=0;_a<arguments.length;_a++)args[_a]=arguments[_a];var index=args[1];newCollection[index]=fun.apply(context||collection,args)}),newCollection):collection},forEach:function(collection,fun){if(collection&&collection.length){var l=collection.length;if(0<l&&(fun(collection[0],0),1<l)){fun(collection[1],1);for(var i=2;i<l;i++)fun(collection[i],i)}}},each:function(collection,fun,context){if(void 0===context&&(context=null),collection&&collection.length)for(var i=0,l=collection.length;i<l&&!1!==fun.call(context,collection[i],i,collection);i++);},find:function(collection,fn,context){void 0===context&&(context=null);for(var i=0,l=collection.length;i<l;i++)if(\"function\"==typeof fn){if(fn.call(context,collection[i],i,collection))return collection[i]}else if(collection[i]===fn)return collection[i];return null},isDOM:function(obj){return\"object\"==typeof HTMLElement?obj instanceof HTMLElement:obj&&\"object\"==typeof obj&&1===obj.nodeType&&\"string\"==typeof obj.nodeName},uncodeCoords:function(ori,version){for(var charactersLength,d,characters=\"ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM\",offset=\"v5\"<(version=version||\"v5\")?(charactersLength=characters.length,512):(characters=characters.substr(0,charactersLength=27),333),res=[],temp=NaN,_i=0,_len=ori.length;_i<_len;_i++)d=ori[_i],d=characters.indexOf(d),temp=isNaN(temp)?d*charactersLength:(res.push(temp+d-offset),NaN);return res},separateDoForLoop:function(func,array){for(var unit=1,unit=512<array.length?Math.round(Math.pow(array.length,.5)):array.length,groups=Math.ceil(array.length/unit),i=0;i<groups;i+=1){var s=unit*i,e=s+unit;e>array.length&&(e=array.length);for(var j=s;j<e;j+=1)func(array[j])}},colorToArray:function(rgbaColor){if(/^rgba\\(/.test(rgbaColor))return this.rgbaStrToArray(rgbaColor);var hex=this.colorNameToHex(rgbaColor),rgbaColor=hex;return\"#\"===hex[0]&&(3===(hex=hex.substring(1)).length&&(hex=hex.replace(/./g,function(str){return str+str})),rgbaColor=this.argbHex2Rgba(8===hex.length?hex:\"ff\"+hex)),this.rgbaStrToArray(rgbaColor)},colorNameToHex:function(colorName){return\"string\"==typeof(colorName=(colorName=void 0===colorName?\"\":colorName).toLowerCase())&&colorNameDist[colorName]||colorName},enCodeTileCoord:function(x,y,z){var m1=Math.floor(z/2),m2=z-m1,m1=(1<<m1)-1<<m2,m2=(1<<m2)-1;return[z,x&m1|y&m2,y&m1|x&m2]},encodeURICom:function(keyword){return keyword?encodeURIComponent(keyword):\"\"},getStyle:function(styleList,index,styleid,level){var styleMap=styleList[index].i[styleid];if(void 0===styleMap)return null;if(styleList=styleList[index].s,\"number\"==typeof styleMap)return styleList[styleMap];for(;void 0===styleMap[level.toString()]&&!(--level<3););return\"number\"==typeof(index=styleMap[level.toString()])?styleList[index]:null},rgbaStrToArray:function(splits){splits=splits.split(\",\");return splits[0]=parseFloat(splits[0].split(\"rgba(\")[1])/255,splits[1]=parseFloat(splits[1])/255,splits[2]=parseFloat(splits[2])/255,splits[3]=parseFloat(splits[3]),splits},rgbStrToArray:function(splits){splits=splits.split(\",\");return splits[0]=parseFloat(splits[0].split(\"rgb(\")[1])/255,splits[1]=parseFloat(splits[1])/255,splits[2]=parseFloat(splits[2])/255,splits},rgbaArray2rgba:function(array){return\"rgba(\"+255*array[0]+\",\"+255*array[1]+\",\"+255*array[2]+\",\"+array[3]+\")\"},color2Rgba:function(color){return this.rgbaArray2rgba(this.color2RgbaArray(color))},color2RgbaArray:function(color){if(color instanceof Array)return 3==color.length&&color.push(1),color;var rgba=this.colorNameToHex(color);if(0==rgba.indexOf(\"rgb(\")){var a=this.rgbStrToArray(rgba);return a.push(1),a}if(0==rgba.indexOf(\"rgba(\"))return this.rgbaStrToArray(rgba);if(0!=rgba.indexOf(\"#\")){if(0===rgba.indexOf(\"hsla\")){var oc=color.substr(5).split(\",\"),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,hex=parseInt(oc[2],10)/100,a=parseFloat(oc[3]);return this.HSLA2RGBA(h,s,hex,a)}if(0===rgba.indexOf(\"hsl\")){oc=color.substr(4).split(\",\"),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,hex=parseInt(oc[2],10)/100;return this.HSLA2RGBA(h,s,hex,1)}if(3!==rgba.length)return 6==rgba.length?this.rgbHex2RgbaArray(rgba):8==rgba.length?this.argbHex2RgbaArray(rgba):void 0;hex=rgba.replace(/./g,function(str){return str+str});return this.rgbHex2RgbaArray(hex)}if(4===rgba.length){var hex=rgba.substr(1).replace(/./g,function(str){return str+str});return this.rgbHex2RgbaArray(hex)}if(7==rgba.length)return this.rgbHex2RgbaArray(rgba.substr(1));if(9==rgba.length){rgba=rgba.substr(1);return this.argbHex2RgbaArray(rgba)}},HSLA2RGBA:function(h,p,q,a){var r,g,b;return 0===p?r=g=b=q:(r=this.hue2rgb(p=2*q-(q=q<.5?q*(1+p):q+p-q*p),q,h+1/3),g=this.hue2rgb(p,q,h),b=this.hue2rgb(p,q,h-1/3)),[r,g,b,a]},hue2rgb:function(p,q,t){return t<0&&(t+=1),1<t&&--t,t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},rgbHex2Rgba:function(hex){return hex.startsWith(\"#\")&&(hex=hex.slice(1)),Util.argbHex2Rgba(\"ff\"+hex)},argbHex2Rgba:function(hex){for(var parts=[],i=0,len=(hex=hex.startsWith(\"#\")?hex.slice(1):hex).length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push((parts.shift()/255).toFixed(2)),\"rgba(\"+parts.join(\",\")+\")\"},Opacity2Rgba:function(opacity,color){var newColor=color;return color&&color[3]&&opacity&&(color[3]=Math.floor(255*opacity)),newColor},Hex2Rgba:function(hex){if(\"string\"!=typeof hex)return!1;for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push(parseInt(parts.shift())),parts},rgbHex2RgbaArray:function(hex){return this.rgbaHex2RgbaArray(hex+\"ff\")},argbHex2RgbaArray:function(hex){for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16)/255);return parts.push(parts.shift()),parts},rgbaHex2RgbaArray:function(color){color=parseInt(color,16);return[(color>>24&255)/255,(color>>16&255)/255,(color>>8&255)/255,(255&color)/255]},isEmpty:function(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0},delArrayItem:function(array,n){return 0<=n&&array.splice(n,1),array},startsWith:function(_long,_short){return _long.startsWith?_long.startsWith(_short):_long.substr(0,_short.length)===_short},deleteItemFromArray:function(array,index){index=Util.indexOf(array,index);return Util.delArrayItem(array,index)},deleteItemFromArrayByIndex:function(array,index){return Util.delArrayItem(array,index)},filter:function(array,fun,context){var ret=[];return Util.each(array,function(item,i){fun.call(context,item,i)&&ret.push(item)}),ret},indexOf:function(array,item){if(!array||!array.length)return-1;if(array.indexOf)return array.indexOf(item);for(var i=0;i<array.length;i+=1)if(array[i]===item)return i;return-1},endsWith_:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)==shortStr},bind:(supportNativeBind=!1,Boolean(Function.prototype.bind)&&(supportNativeBind=!0),function(fn,context){var args=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return supportNativeBind?args?(args.unshift(context),fn.bind.apply(fn,args)):fn.bind(context):function(){return fn.apply(context,args||arguments)}}),setOptions:function(obj,opts){return obj.opts=assign({},obj.opts,opts=opts||{}),obj.opts},cloneDeep:function(value,customizer,thisArg){return\"function\"==typeof customizer?this.baseClone(value,!0,this.bindCallback(customizer,thisArg,1)):this.baseClone(value,!0)},baseClone:function(value,isDeep,customizer,isFunc,object,stackA,stackB){var result;if(void 0!==(result=customizer?object?customizer(value,isFunc,object):customizer(value):result))return result;if(!this.isObject(value))return value;var isArr=this.isArray(value);if(isArr){if(result=this.initCloneArray(value),!isDeep)return this.arrayCopy(value,result)}else{var tag=Object.prototype.toString.call(value),isFunc=\"[object Function]\"==tag;if(\"[object Object]\"!=tag&&\"[object Arguments]\"!=tag&&(!isFunc||object))return object?value:{};if(result=this.initCloneObject(isFunc?{}:value),!isDeep)return this.baseAssign(result,value)}stackB=stackB||[];for(var length=(stackA=stackA||[]).length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?this.arrayEach:this.baseForOwn)(value,function(subValue,key){result[key]=Util.baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result},baseAssign:function(object,source){return null==source?object:this.baseCopy(source,Object.keys(source),object)},isObject:function(value){var type=typeof value;return!!value&&(\"object\"==type||\"function\"==type)},isObjectLike:function(value){return!!value&&\"object\"==typeof value},isLength:function(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991},initCloneArray:function(array){var length=array.length,result=new Array(length);return length&&\"string\"==typeof array[0]&&Object.hasOwnProperty.call(array,\"index\")&&(result.index=array.index,result.input=array.input),result},arrayCopy:function(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array},initCloneObject:function(Ctor){Ctor=Ctor.constructor;return new(Ctor=!(\"function\"==typeof Ctor&&Ctor instanceof Ctor)?Object:Ctor)},bindCallback:function(func,thisArg,argCount){if(\"function\"!=typeof func)return this.identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}},arrayEach:function(array,iteratee){for(var index=-1,length=array.length;++index<length&&!1!==iteratee(array[index],index,array););return array},identity:function(value){return value},createBaseFor:function(fromRight){return function(object,iteratee,keysFunc){for(var iterable=Util.toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(!1===iteratee(iterable[key],key,iterable))break}return object}},baseForOwn:function(object,iteratee){return Util.createBaseFor()(object,iteratee,Object.keys)},toObject:function(value){return Util.isObject(value)?value:Object(value)},baseCopy:function(source,props,object){object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object},falseFn:function(){return!1},emptyImageUrl:\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\",getTimestamp:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},limitExecByInterval:function(fn,time,context,ignoreWhenLock){var lastRunTime_1,curTime_1,fnGetTime_1,wrapperFn,lock_1,args_1,later_1;return wrapperFn=ignoreWhenLock?(lastRunTime_1=0,fnGetTime_1=this.getTimestamp,function(){if((curTime_1=fnGetTime_1())-lastRunTime_1<time)return!1;lastRunTime_1=curTime_1,fn.apply(context,arguments)}):(later_1=function(){lock_1=!1,args_1&&(wrapperFn.apply(context,args_1),args_1=!1)},function(){lock_1?args_1=arguments:(lock_1=!0,fn.apply(context,arguments),setTimeout(later_1,time))})},format:function(num,digits){return num===num<<0?num:+parseFloat(num+\"\").toFixed(digits||0)},isArray:Array.isArray||function(array){return this.is(array,\"array\")},is:function(obj,type){return Object.prototype.toString.call(obj).split(\" \")[1].slice(0,-1).toLowerCase()===type.toLowerCase()},includes:\"function\"==typeof Array.prototype.includes?function(arr,val){return arr.includes(val)}:function(arr,val){return-1!==this.indexOf(arr,val)},strHashCode:function(str){var hash=0;if(0===str.length)return hash;for(var i=0,len=str.length;i<len;i+=1)hash=(hash<<5)-hash+str.charCodeAt(i),hash&=hash;return hash},decode_:function(str,key){key=key?Math.ceil(parseInt(key.substr(6))/24):1;for(var result=\"\",i=0,strlen=str.length;i<strlen;i++)result+=String.fromCharCode((str.charCodeAt(i)-256-key+65535)%65535);return result},decodeLngLat:function(lng,lat){var lngKey=(lng+\"\").slice(-2),latKey=(lat+\"\").slice(-2);lng=lng.slice(0,-2),lat=lat.slice(0,-2);var latDir=parseInt((latKey+lngKey).slice(1)),lngDir=Math.ceil(latDir/250)%2?1:-1,latDir=1<latDir/500?1:-1;return lng-=parseInt(\"1\"+lngKey)/3e3*lngDir,lat-=parseInt(\"1\"+latKey)/3e3*latDir,new LngLat$1(parseFloat(lng).toFixed(5),parseFloat(lat).toFixed(5))},objHashCode:function(obj){return\"undefined\"!=typeof JSON&&JSON.stringify?Util.strHashCode(JSON.stringify(obj)):null},stampHashCode:function(obj,hash){var key=\"_amap_hash\";return!hash&&obj.hasOwnProperty(key)||(hash=Util.objHashCode(obj))&&(obj[key]=hash),obj[key]},parseLngLatData:function(data){if(Util.isArray(data)){if(!Util.isArray(data[0])){var type=typeof data[0];return\"string\"==type||\"number\"==type?new LngLat$1(data[0],data[1]):data}for(var i=0;i<data.length;i+=1)data[i]=Util.parseLngLatData(data[i])}return data},xy2arr:function(xys){for(var r=[],i=0,len=xys.length;i<len;i+=1)r[i]=[xys[i].x,xys[i].y];return r},parseSize:function(data){return Util.isArray(data)?new Size(data[0],data[1]):data},getDeltaCenter:function(localCenter,deltaY){var size,localDeltaCenter=[0,0],deltaX=Util.getOptimalZoom(deltaY.viewState.zoom);return localCenter&&13<=deltaX?(size=lcs.getSize(),deltaX=deltaY.viewState.centerCoord,deltaY=lcs.getLocalByCoord([deltaX[0],deltaX[1]]),deltaX=localCenter.x-deltaY.x,deltaY=localCenter.y-deltaY.y,0!=deltaX&&(deltaX*=size[0],localDeltaCenter[0]=deltaX),0!=deltaY&&(deltaY*=size[1],localDeltaCenter[1]=deltaY)):localCenter&&(localDeltaCenter[0]+=localCenter.center[0],localDeltaCenter[1]+=localCenter.center[1]),localDeltaCenter},checkInZooms:function(zoom,zooms){return zoom>=zooms[0]&&zoom<=zooms[1]},getTileTagByZoom:function(z,optimalZoom,forceAll){void 0===forceAll&&(forceAll=!1);z=(z=void 0===z?\"\":z).split(\",\")[0]||\"\";return!forceAll&&z&&optimalZoom&&TagMap[optimalZoom]||\"all\"},getTileTagByZ:function(z,optimalZoom,forceAll){return!(forceAll=void 0!==forceAll&&forceAll)&&z&&optimalZoom&&TagMap[optimalZoom]||\"all\"},containTag:function(tag1Number,tag2){if(!tag1Number||!tag2)return!1;tag1Number=this.getNumberByTag(tag1Number);return this.getNumberByTag(tag2)<=tag1Number},getNumberTag:function(tag){var numberTag;switch(tag=void 0===tag?\"all\":tag){case\"lite\":numberTag=0;break;case\"left\":numberTag=1;break;default:numberTag=2}return numberTag},getStringTag:function(tag){var numberTag;switch(tag=void 0===tag?2:tag){case 0:numberTag=NebulaTagType.LITE;break;case 1:numberTag=NebulaTagType.LEFT;break;default:numberTag=NebulaTagType.ALL}return numberTag},getNumberByTag:function(tag){var tagNumber=0;switch(tag){case\"lite\":tagNumber=0;break;case\"left\":tagNumber=1;break;case\"all\":tagNumber=2}return tagNumber}};!function(){var lastTime=0;function timeoutDefer(fn){var time=+new Date,timeToCall=Math.max(0,(Browser.android?50:20)-(time-lastTime));return lastTime=time+timeToCall,globalInstance.setTimeout(fn,50)}function timeoutClear(id){globalInstance.clearTimeout(id)}if(Browser.isWorkerEnv){var requestFn_1=timeoutDefer,cancelFn_1=timeoutClear;return originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn_1(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn_1.call(globalInstance,id)}}function getPrefixed(name){for(var fn,prefixes=[\"webkit\",\"moz\",\"o\",\"ms\"],i=0;i<prefixes.length&&!fn;i+=1)fn=globalInstance[prefixes[i]+name];return fn}var requestFn=globalInstance.requestAnimationFrame||getPrefixed(\"RequestAnimationFrame\")||timeoutDefer,cancelFn=globalInstance.cancelAnimationFrame||getPrefixed(\"CancelAnimationFrame\")||getPrefixed(\"CancelRequestAnimationFrame\")||timeoutClear;originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn.call(globalInstance,id)}}(),Browser.isWorkerEnv||(originUtil.requestIdleCallback=globalInstance.requestIdleCallback?function(callback,options){return globalInstance.requestIdleCallback(callback,options)}:function(cb,options){void 0===options&&(options={});var start=Util.getTimestamp();return setTimeout(function(){cb({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(Util.getTimestamp()-start))}})},options.timeout||0)},originUtil.cancelIdleCallback=globalInstance.cancelIdleCallback?function(handler){return globalInstance.cancelIdleCallback(handler)}:function(id){clearTimeout(id)});var Util=originUtil;return Util}();function isLngLat(obj){return obj&&\"AMap.LngLat\"===obj.className}var CONSTS_Events={MOVE_START:\"movestart\",MOVING:\"moving\",MOVE_END:\"moveend\",MOVE_ALONG:\"movealong\"},animationPlugin={clip:null,clips:[],markerAnimation:null,moveTo:function(targetDuration,easing){var _this=this;if(this._map||(this._map=this._parent&&this._parent.map),this._map&&targetDuration){this._initAnimation();this._map;var lastStep,currentStep,markerAnimation=this.markerAnimation,speed=this.getPosition(),positionArr=isLngLat(speed)?speed.toJSON():speed,targetPositionArr=isLngLat(targetDuration)?targetDuration.toJSON():targetDuration,_b=easing||{},duration=_b.duration,speed=_b.speed,easing=_b.easing,_b=_b.autoRotation,autoRotation=void 0===_b||_b,targetDuration=duration||(speed?this._getDuration(speed,positionArr,targetDuration):0),clip=this._getClip({duration:targetDuration,easing:easing||\"Linear\"},{x:[positionArr[0],targetPositionArr[0]],y:[positionArr[1],targetPositionArr[1]]}),path=[new AMap.LngLat(positionArr[0],positionArr[1]),new AMap.LngLat(targetPositionArr[0],targetPositionArr[1])],eventType=CONSTS_Events.MOVING;return clip.on(\"start\",function(event){var type=CONSTS_Events.MOVE_START,event=_this._getMoveStartEvent(type,event,path);_this.emit(type,event)}),clip.on(\"update\",function(absoluteAngle){var event=_this._getMovingEvent(eventType,absoluteAngle,path,0),absoluteAngle=event.index;autoRotation&&!clip._hasSetRotation&&\"AMap.Marker\"===_this.CLASS_NAME&&(clip._hasSetRotation=!0,currentStep=path[absoluteAngle+1],(lastStep=path[absoluteAngle])&&currentStep&&(!1===(absoluteAngle=_this._getOrientationByLngLats(lastStep,currentStep))?absoluteAngle=_this.lastAngle||0:_this.lastAngle=absoluteAngle,_this.setOrientation(absoluteAngle))),_this.emit(eventType,event)}),clip.on(\"complete\",function(event){var type=CONSTS_Events.MOVE_END,event=_this._getMoveEndEvent(type,event,path);_this.emit(type,event)}),markerAnimation.addClip(clip),markerAnimation.start(),this}},startMove:function(){this.markerAnimation&&(this._destroyClip(),this.markerAnimation.reset(),this.markerAnimation.start())},stopMove:function(){this.markerAnimation&&this.markerAnimation.stop()},pauseMove:function(){this.markerAnimation&&this.markerAnimation.pause()},resumeMove:function(){this.markerAnimation&&this.markerAnimation.start()},moveAlong:function(path,totalDuration){var _this=this;if(this._map||(this._map=this._parent&&this._parent.map),this._map&&path){this._initAnimation();this._map;var beforeClip,lastStep,currentStep,markerAnimation=this.markerAnimation,_d=totalDuration||{},speed=_d.speed,easing=_d.easing,circlable=_d.circlable,totalDuration=_d.delay,delay=void 0===totalDuration?0:totalDuration,totalDuration=_d.aniInterval,aniInterval=void 0===totalDuration?0:totalDuration,duration=_d.duration,totalDuration=_d.totalDuration,_d=_d.autoRotation,autoRotation=void 0===_d||_d,clips=[],pathLen=path.length,isDurationAFunction=\"function\"==typeof duration,duration2=duration||(totalDuration?totalDuration/(pathLen-1):0),isSpeedAFunction=\"function\"==typeof speed,isDelayAFunction=\"function\"==typeof delay,originPath=this._getOriginPath(path),firstPosition=originPath[0];this.setPosition(firstPosition);for(var this_1=this,i=0;i<pathLen-1;i++)!function(i){var curPath=path[i],targetPath=path[i+1],position=void 0,targetPosition=void 0,curSpeed=void 0,curDelay=void 0,curDuration=void 0;if(isLngLat(curPath)&&isLngLat(targetPath)?(position=curPath.toJSON(),targetPosition=targetPath.toJSON()):curPath.position&&targetPath.position?(position=curPath.position,targetPosition=targetPath.position,isLngLat(position)&&(position=position.toJSON()),isLngLat(targetPosition)&&(targetPosition=targetPosition.toJSON()),curSpeed=targetPath.speed,curDuration=targetPath.duration,curDelay=targetPath.delay,!curDuration&&curSpeed&&(curDuration=this_1._getDuration(curSpeed,position,targetPosition))):(position=curPath,targetPosition=targetPath),!position||!targetPosition)return;i||(lastStep=position),curSpeed=curSpeed||(isSpeedAFunction?speed(i,position):speed),curDelay=curDelay||(isDelayAFunction?delay(i,position):delay),!(curDuration=curDuration||(isDurationAFunction?duration(i,position):duration2))&&curSpeed&&(curDuration=this_1._getDuration(curSpeed,position,targetPosition));var index,clip=this_1._getClip({delay:curDelay||0,duration:curDuration,easing:easing||\"Linear\"},{x:[position[0],targetPosition[0]],y:[position[1],targetPosition[1]]});i||clip.on(\"start\",function(event){var type=CONSTS_Events.MOVE_START,event=_this._getMoveStartEvent(type,event,originPath);_this.emit(type,event)}),clip.on(\"update\",function(absoluteAngle){var type=CONSTS_Events.MOVING,event=_this._getMovingEvent(type,absoluteAngle,originPath,i),absoluteAngle=event.index;autoRotation&&!clip._hasSetRotation&&\"AMap.Marker\"===_this.CLASS_NAME&&(clip._hasSetRotation=!0,lastStep=originPath[absoluteAngle],currentStep=originPath[absoluteAngle+1],lastStep&&currentStep&&(!1===(absoluteAngle=_this._getOrientationByLngLats(lastStep,currentStep))?absoluteAngle=_this.lastAngle||0:_this.lastAngle=absoluteAngle,_this.setOrientation(absoluteAngle))),_this.emit(type,event)}),i===pathLen-2?clip.on(\"complete\",(index=i+2,function(moveAlongEvent){var moveEndEvent=_this._getMoveEndEvent(CONSTS_Events.MOVE_END,moveAlongEvent,originPath.slice(0,index));_this.emit(CONSTS_Events.MOVE_END,moveEndEvent);moveAlongEvent=_this._getMoveEndEvent(CONSTS_Events.MOVE_ALONG,moveAlongEvent,originPath.slice(0,index));_this.emit(CONSTS_Events.MOVE_ALONG,moveAlongEvent)})):clip.on(\"complete\",function(){var index=i+2;return function(moveEndEvent){moveEndEvent=_this._getMoveEndEvent(CONSTS_Events.MOVE_END,moveEndEvent,originPath.slice(0,index));_this.emit(CONSTS_Events.MOVE_END,moveEndEvent)}}()),beforeClip&&beforeClip.chain(clip),beforeClip=clip,clips.push(clip)}(i);this.clips=clips,circlable&&markerAnimation.on(\"complete\",function(){_this.setPosition(firstPosition),markerAnimation.reset();for(var _i=0,clips_1=clips;_i<clips_1.length;_i++)clips_1[_i]._hasSetRotation=!1;setTimeout(function(){markerAnimation.start()},aniInterval)}),markerAnimation&&(markerAnimation.addClip(clips[0]),this.clip=clips[0],markerAnimation.start())}},_getDuration:function(speed,pos1,pos2){return(AMap.GeometryUtil.distance(pos1,pos2)||0)/(speed=speed||1)*60*60},_getClip:function(options,clip){var _this=this,clip=this.clip=new chito_2(options,clip);return clip.on(\"update\",function(x){var y=x.keyframe,x=y.x,y=y.y;_this.setPosition([x,y])}),clip},_destroyClip:function(){var clip=this.clip,clips=this.clips;if(this.markerAnimation&&(this.markerAnimation.removeClip(clip),clip.chain()),clips)for(var _i=0,clips_2=clips;_i<clips_2.length;_i++)clips_2[_i].destroy(),0;clip.destroy(),this.clip=null,this.clips=[]},_initAnimation:function(){this.markerAnimation?this.markerAnimation&&(this._destroyClip(),this.markerAnimation.reset()):this.markerAnimation=new chito_1},_getMoveStartEvent:function(type,e,path){return{index:0,type:type,progress:0,pos:path[0],target:this,passedPos:path[0],passedPath:path.slice(0,1)}},_getMoveEndEvent:function(type,e,path){var lastIndex=path.length-1;return{index:lastIndex,type:type,progress:1,pos:path[lastIndex],target:this,passedPos:path[lastIndex],passedPath:path}},_getMovingEvent:function(type,e,path,i){var curPosition=new AMap.LngLat(e.keyframe.x,e.keyframe.y),passedPath=path.slice(0,i+1).concat(curPosition);return{index:i,type:type,progress:e.progress,pos:curPosition,target:this,passedPos:path[i],passedPath:passedPath}},_getOrientationByLngLats:function(lnglat1,lnglat2){return isLngLat(lnglat1)||(lnglat1=new AMap.LngLat(lnglat1[0],lnglat1[1])),isLngLat(lnglat2)||(lnglat2=new AMap.LngLat(lnglat2[0],lnglat2[1])),this._getRotationByLngLats(lnglat1,lnglat2)},_getOriginPath:function(path){for(var originPath=[],_i=0,path_1=path;_i<path_1.length;_i++){var curPosition=path_1[_i];isLngLat(curPosition)||Array.isArray(curPosition)?originPath.push(curPosition):curPosition.position&&originPath.push(curPosition.position)}return originPath}};AMap.extend(AMap.Marker,animationPlugin),AMap.extend(AMap.Text,animationPlugin),AMap.extend(AMap.LabelMarker,animationPlugin)}();\n");
_jsload_('AMap.PlaceSearch.js',"!function(AMap){\"use strict\";function _typeof(obj){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}function _possibleConstructorReturn(self,call){return!call||\"object\"!=typeof call&&\"function\"!=typeof call?_assertThisInitialized(self):call}var PlaceSearchRenderUtil={getElementsByClassName:function(className,tag,parent){var testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\");tag=tag||\"*\";for(var current,elements=(parent=parent||document).getElementsByTagName(tag),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},escapeHtml:function(text){var map={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#039;\"};return text.replace(/[&<>\"']/g,function(m){return map[m]})},trimStr:function(str){return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")},simpleChildPoiName:function(name,parentPoi){var parentName=this.trimStr(parentPoi.name),match=name.match(/^(.*?)\\((.*?)\\)$/);return match?match[1]===parentName?match[2]:match[1].replace(parentName,\"\"):name.replace(parentName,\"\")}},PlaceSearchRenderListener=function(){function PlaceSearchRenderListener(placeSearchRender){_classCallCheck(this,PlaceSearchRenderListener),this._lastEventObject=null,this._parent=placeSearchRender}return _createClass(PlaceSearchRenderListener,[{key:\"getTargetPOIBox\",value:function(elems,id){var targetElem=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=elems[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var element=_step.value;if(id==element.getAttribute(\"data-idx\")){targetElem=element;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return targetElem}},{key:\"markerClick\",value:function(argument_0){var params=0<arguments.length&&void 0!==argument_0?argument_0:{},panel=params.panel,data=params.data,position=params.position,marker=params.marker,placeSearchInstance=params.placeSearchInstance,_params$noMarkerClick=params.noMarkerClickEvent,noMarkerClickEvent=void 0!==_params$noMarkerClick&&_params$noMarkerClick,e=params.e,parent=this._parent,oldContent=parent.infoWindow.getContent();if(oldContent){var _detail=parent.util.getElementsByClassName(\"poi-more\",\"a\",oldContent)[0];_detail&&(_detail._data=null,_detail.clickHandler,_detail.clickHandler=null)}var newContent=parent.view.createInfowindowContent(data),close=newContent.querySelector(\".amap-combo-close\");close&&(close.addEventListener(\"touchend\",function(e){parent.infoWindow.close()},this),close.addEventListener(\"click\",function(e){parent.infoWindow.close()},this));var detail=parent.util.getElementsByClassName(\"poi-more\",\"a\",newContent)[0];detail&&(detail._data=data,detail.clickHandler=detail.addEventListener(\"click\",function(e){parent.onDetailClick.call(parent,detail)})),parent.infoWindow&&(parent.infoWindow.setContent(newContent),parent.infoWindow.setOffset(data._isChildPoi?new AMap.Pixel(0,-3):new AMap.Pixel(0,-25)),parent.infoWindow.open(parent.options.map,position)),parent.options.map.setCenter(position);var lastIndex,elements,element,dataIndex=data._idx;this.last&&(this.last.className=\"poibox\",lastIndex=parseInt(this.last.getAttribute(\"data-idx\"),10)),panel&&(elements=panel.querySelectorAll(\".poibox\"),element=this.getTargetPOIBox(elements,dataIndex),this._currentDiv=element),this._currentIndex=parseInt(dataIndex,10);var div=this._currentDiv;if(div&&(div.className=\"poibox active\"),this.last=div,!noMarkerClickEvent&&placeSearchInstance){var _data=marker._data,listElementClickEvent={type:\"markerClick\",id:_data.id,marker:marker,listElement:div,data:_data,event:e,index:this._currentIndex};if(placeSearchInstance.emit(\"markerClick\",listElementClickEvent),element&&void 0===lastIndex||lastIndex!==this._currentIndex){var selectChangedEvent={id:_data.id,marker:marker,listElement:div,data:_data,event:e,index:this._currentIndex};this._lastEventObject&&delete this._lastEventObject.type,placeSearchInstance.emit(\"selectChanged\",{type:\"selectChanged\",selected:selectChangedEvent,lastSelected:this._lastEventObject})}this._lastEventObject=listElementClickEvent}}},{key:\"unfocusTitleClick\",value:function(e,params){var lastIndex,dataIndex=params.dataIndex,marker=params.marker,placeSearchInstance=params.placeSearchInstance,element=params.element,parent=this._parent;this.last&&(this.last.className=\"poibox\",lastIndex=parseInt(this.last.getAttribute(\"data-idx\"),10)),this._currentDiv=element,this._currentIndex=parseInt(dataIndex,10);var div=this._currentDiv;if(div&&(div.className=\"poibox active\"),this.last=div,parent.options.map){for(var strIdx,target=e.target||e.srcElement;target&&target!==div&&!(strIdx=target.getAttribute(\"data-idx\"));)target=target.parentNode;parent.setCenter(strIdx?parseInt(strIdx,10):this._currentIndex)}if(placeSearchInstance){var type=\"listElementClick\",data=marker._data,listElementClickEvent={type:type,id:data.id,marker:marker,listElement:div,data:data,event:e,index:this._currentIndex};if(placeSearchInstance.emit(type,listElementClickEvent),void 0===lastIndex||lastIndex!==this._currentIndex){var selectChangedEvent={id:data.id,marker:marker,listElement:div,data:data,event:e,index:this._currentIndex};this._lastEventObject&&delete this._lastEventObject.type,placeSearchInstance.emit(\"selectChanged\",{type:\"selectChanged\",selected:selectChangedEvent,lastSelected:this._lastEventObject})}this._lastEventObject=listElementClickEvent}}}]),PlaceSearchRenderListener}(),PlaceSearchRenderView={createInfowindowContent:function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];c.push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+(data._isChildPoi?\"\":data.index+1+\".\")+data.name+\"</div>\"),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\",div.appendChild(sharp);var close=document.createElement(\"div\");return close.className=\"amap-combo-close\",div.appendChild(close),close.href=\"javascript: void(0)\",content.appendChild(div),content.appendChild(close),content.appendChild(sharp),content},getChildrenHtml:function(children,parentPoi){var parts=[];parts.push('<div class=\"poi-children-box\">'),parts.push('<ul class=\"poi-children-list\">');for(var i=0,len=children.length;i<len;i++){var childPoi=children[i],name=PlaceSearchRenderUtil.trimStr(childPoi.name),htmlName=PlaceSearchRenderUtil.escapeHtml(PlaceSearchRenderUtil.simpleChildPoiName(name,parentPoi));parts.push('<li class=\"poi-child-item\" data-idx=\"'+childPoi._idx+'\" title=\"'+htmlName+'\">'),parts.push(htmlName),parts.push(\"</li>\")}return parts.push(\"</ul>\"),parts.push(\"</div>\"),parts.join(\"\")},createPanel:function(result){if(!(result.poiList&&0<result.poiList.pois.length&&\"NO_DATA\"!==result.info))return\"<div class='amap_lib_placeSearch'>抱歉，未搜索到有效的结果。</div>\";var pois=result.poiList.pois,c=[];c.push('<div class=\"amap_lib_placeSearch\">'),c.push('    <div class=\"amap_lib_placeSearch_list\">'),c.push(\"        <ul>\");for(var poi,i=0;i<pois.length;i++){var pic=(poi=pois[i]).photos&&poi.photos[0].url,picHtml='<img src=\"'+(pic||\"http://47.93.246.7/api/static/jsapi_demos/static/images/search-img-default.png\")+'\">';c.push('            <li class=\"poibox\" data-idx=\"'+poi._idx+'\">'),c.push('                <div class=\"amap_lib_placeSearch_pic\">'+picHtml+\"</div>\"),c.push('                <h3 class=\"poi-title\">'),c.push('                \\t<span class=\"poi-name amap-ellipsis\">'+poi.name+\"</span>\"),c.push(\"                </h3>\"),c.push('                <div class=\"poi-info\">'),c.push('                \\t<p class=\"poi-addr amap-ellipsis\">地址：'+poi.address+\"</p>\"),poi.tel&&c.push('                <p class=\"poi-tel amap-ellipsis\">电话：'+poi.tel+\"</p>\"),c.push(\"                </div>\"),poi.children&&c.push(this.getChildrenHtml(poi.children,poi)),c.push(\"            </li>\")}c.push(\"        </ul>\"),c.push(\"    </div>\"),c.push('    <div class=\"amap_lib_placeSearch_page\">'),c.push(\"        <div>\"),c.push(\"            <p>\");var poiList=result.poiList,count=poiList.count,pageIndex=poiList.pageIndex,pageSize=poiList.pageSize,pageCount=Math.ceil(count/pageSize);return 3<pageIndex&&c.push(this.createPageButton(1,\"首页\")),1<pageIndex&&c.push(this.createPageButton(pageIndex-1,\"上一页\")),1<=pageIndex-2&&c.push(this.createPageButton(pageIndex-2,pageIndex-2)),1<=pageIndex-1&&c.push(this.createPageButton(pageIndex-1,pageIndex-1)),c.push('                <span class=\"current\">'+pageIndex+\"</span>\"),pageIndex+1<=pageCount&&c.push(this.createPageButton(pageIndex+1,pageIndex+1)),pageIndex+2<=pageCount&&c.push(this.createPageButton(pageIndex+2,pageIndex+2)),pageIndex<pageCount&&c.push(this.createPageButton(pageIndex+1,\"下一页\")),c.push(\"            </p>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),c.join(\"\")},createPageButton:function(pageNum,text){return\"<span><a pageNo=\"+pageNum+' class=\"pageLink\" >'+text+\"</a></span>\"}},PlaceSearchRender=function(){function PlaceSearchRender(showCover){var _this;return _classCallCheck(this,PlaceSearchRender),(_this=_possibleConstructorReturn(this,_getPrototypeOf(PlaceSearchRender).call(this))).CLASS_NAME=\"AMap.PlaceSearchRender\",_this.options={},_this.circleOptions={id:\"place-search-circle\",radius:3e3,strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.boundOptions={id:\"place-search-bound\",strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.searchCircle=null,_this.searchBound=null,_this.util=PlaceSearchRenderUtil,_this.listener=new PlaceSearchRenderListener(_assertThisInitialized(_this)),_this.view=PlaceSearchRenderView,_this.ifShowCover=showCover,_this}return _inherits(PlaceSearchRender,AMap.Event),_createClass(PlaceSearchRender,[{key:\"autoRender\",value:function(options){this.clear(),options&&options.methodName&&options.methodArgumments&&(options.panel||options.map)&&(this.options=options,this.callback(\"complete\",options.data))}},{key:\"addIdxField\",value:function(pois){for(var stack=[].concat(pois),idx=0;;){var poi=stack.shift();if(!poi)break;if(poi._idx=idx++,poi.index=poi._idx,poi.id=this.util.trimStr(poi.id),poi.children)for(var i=0,len=poi.children.length;i<len;i++)poi.children[i]._isChildPoi=!0,poi.children[i]._parentIdx=poi._idx,poi.children[i].citycode=poi.citycode,stack.push(poi.children[i])}}},{key:\"callback\",value:function(status,result){var _this2=this;this.clear();var options=this.options;if(options.callback&&options.callback(status,result),\"complete\"===status){if((this.result=result).poiList&&this.addIdxField(result.poiList.pois),options.map){if(this.infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:[0,-25]}),this._overlays=[],this._highlightOverlay=null,(result.cityList||result.keywordList||result.poiList)&&this.drawOverlays(result),\"searchNearBy\"===options.methodName&&this.ifShowCover){var a=this.options.methodArgumments;this.drawCircle(a[1],a[2])}if(\"searchInBounds\"===options.methodName&&this.ifShowCover){var _a=this.options.methodArgumments;this.drawBound(_a[1])}}if(options.panel&&(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),options.panel.innerHTML=this.view.createPanel(result),this.enableListeners(),options.placeSearchInstance))for(var details=this.util.getElementsByClassName(\"poi-more\",\"a\",options.panel),_loop=function(i){var a=details[i];a.dIndex=i,a.clickHandler=a.addEventListener(\"click\",function(e){_this2.onDetailClick.call(_this2,a)})},i=0;i<details.length;i+=1)_loop(i)}}},{key:\"enableListeners\",value:function(){for(var unfocusTitle,_this3=this,listener=this.listener,unfocusTitles=this.util.getElementsByClassName(\"poibox\",\"*\",this.options.panel),_loop2=function(i,_unfocusTitle){(_unfocusTitle=unfocusTitles[i]).addEventListener(\"click\",function(e){var index=_unfocusTitle.getAttribute(\"data-idx\"),placeSearchInstance=_this3.options.placeSearchInstance,marker=_this3._overlays[index];if(marker){var params={element:_unfocusTitle,dataIndex:index,marker:marker,placeSearchInstance:placeSearchInstance};listener.unfocusTitleClick.call(listener,e,params)}}),unfocusTitle=_unfocusTitle},i=0;i<unfocusTitles.length;i++)_loop2(i,unfocusTitle);for(var pageLink,pageLinks=this.util.getElementsByClassName(\"pageLink\",\"*\",this.options.panel),_loop3=function(_pageLink,_i){(_pageLink=pageLinks[_i]).addEventListener(\"click\",function(){var pageNo=_pageLink.getAttribute(\"pageNo\");_this3.toPage(pageNo)}),pageLink=_pageLink},_i=0;_i<pageLinks.length;_i++)_loop3(pageLink,_i)}},{key:\"onDetailClick\",value:function(detail){this.options.placeSearchInstance.detailOnAMAP(detail._data||this.options.data.poiList.pois[detail.dIndex])}},{key:\"clear\",value:function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearBound()}},{key:\"drawOverlays\",value:function(result){this.clearOverlays();var pois=result.poiList.pois;this._overlays=this.addOverlays(pois),this.options.autoFitView&&this.options.map.setFitView(this._overlays,!0)}},{key:\"addChildrenOverlays\",value:function(children,overlays){for(var _this4=this,_loop4=function(i){var childPoi=children[i],extraClass=\"\";switch(childPoi.subtype){case\"门\":extraClass=\"gate\";break;case\"停车场\":extraClass=\"parking\"}var point=new AMap.Marker({map:_this4.options.map,zIndex:100,offset:new AMap.Pixel(-6,-6),size:new AMap.Size(12,12),topWhenClick:!0,position:childPoi.location,content:'<div class=\"amap_lib_placeSearch_child_poi '+extraClass+'\">'+childPoi._idx+\"</div>\"});point.isOfficial=!0,point._data=childPoi,point.on(\"click\",function(e){var params={data:point._data,position:point.getPosition(),marker:point,placeSearchInstance:_this4.options.placeSearchInstance,panel:_this4.options.panel,e:e};_this4.listener.markerClick(params)}),overlays[childPoi._idx]=point},i=0,len=children.length;i<len;i++)_loop4(i)}},{key:\"addOverlays\",value:function(points){for(var point,_this5=this,map=this.options.map,_overlays=[],children=[],_loop5=function(i,_point){(_point=new AMap.Marker({map:map,zIndex:101,offset:new AMap.Pixel(-9,-31),size:new AMap.Size(19,33),topWhenClick:!0,position:points[i].location,content:'<div class=\"amap_lib_placeSearch_poi\"></div>'})).isOfficial=!0,_point._data=points[i],_point.on(\"click\",function(e){var params={data:_point._data,position:_point.getPosition(),marker:_point,placeSearchInstance:_this5.options.placeSearchInstance,panel:_this5.options.panel,e:e};_this5.listener.markerClick(params)}),_overlays[points[i]._idx]=_point,points[i].children&&children.push.apply(children,points[i].children),point=_point},i=0;i<points.length;i++)_loop5(i,point);return this.addChildrenOverlays(children,_overlays),_overlays}},{key:\"toggleChildrenOverlays\",value:function(idx,show){if(!isNaN(idx)){var point=this._overlays[idx];if(point){var poi=point._data,map=this.options.map;if(poi.children){for(var overlays=[point],i=0,len=poi.children.length;i<len;i++){var childOverlay=this._overlays[poi.children[i]._idx];childOverlay&&(childOverlay.setMap(show?map:null),overlays.push(childOverlay))}this.options.autoFitView&&this.options.map.setFitView(overlays,!0)}}else console.warn(\"Missing marker: \",idx)}}},{key:\"clearPanel\",value:function(){if(this.options&&this.options.panel instanceof HTMLDivElement){for(var details=this.util.getElementsByClassName(\"poi-more\",\"a\",this.options.panel),i=0;i<details.length;i+=1){var a=details[i];a.clickHandler,a.clickHandler=null}this.options.panel.innerHTML=\"\"}}},{key:\"clearOverlays\",value:function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}if(this.infoWindow){var oldContent=this.infoWindow.getContent();if(oldContent){var detail=this.util.getElementsByClassName(\"poi-more\",\"a\",oldContent)[0];detail&&(detail._data=null,detail.clickHandler&&(detail.clickHandler=null))}this.infoWindow.close()}}},{key:\"setCenter\",value:function(index){var point=this._overlays[index];if(point){var poi=point._data;this.options.map.setCenter(poi.location),point.setTop(!0);var params={data:point._data,position:point.getPosition(),marker:point,placeSearchInstance:this.options.placeSearchInstance,panel:this.options.panel,noMarkerClickEvent:!0};this.listener.markerClick(params)}else console.warn(\"Missing marker: \",index)}},{key:\"toPage\",value:function(pageNo){pageNo.length&&(pageNo=parseInt(pageNo,10)),this.options.placeSearchInstance.setPageIndex(pageNo),this.options.placeSearchInstance[this.options.methodName].apply(this.options.placeSearchInstance,this.options.methodArgumments)}},{key:\"drawCircle\",value:function(center,radius){this.clearCircle(),this.circleOptions.map=this.options.map,this.circleOptions.center=center,this.circleOptions.radius=radius,this.searchCircle=new AMap.Circle(this.circleOptions),this.options.map.add(this.searchCircle),this.searchCircle.isOfficial=!0}},{key:\"clearCircle\",value:function(){this.searchCircle&&(this.searchCircle.setMap(null),this.searchCircle=null)}},{key:\"drawBound\",value:function(bound){this.clearBound();var path=[];bound.getNorthWest?path.push(bound.getNorthWest(),bound.getNorthEast(),bound.getSouthEast(),bound.getSouthWest()):path=bound.getPath(),this.boundOptions.path=path,this.boundOptions.map=this.options.map;var polygon=new AMap.Polygon(this.boundOptions);polygon.isOfficial=!0,this.searchBound=polygon}},{key:\"clearBound\",value:function(){this.searchBound&&(this.searchBound.setMap(null),this.searchBound=null)}}]),PlaceSearchRender}(),PlaceSearch=function(){function PlaceSearch(opt){var _this;_classCallCheck(this,PlaceSearch),(_this=_possibleConstructorReturn(this,_getPrototypeOf(PlaceSearch).call(this))).CLASS_NAME=\"AMap.PlaceSearch\",_this.opt={},_this.closed=!1,_this.opt=AMap.extend({},{showCover:!0,autoFitView:!0},opt||{});var config=_this.config=AMap.getConfig();return _this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize=\"number\"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=config.server+\"query/\",_this.renderEngine=PlaceSearchRender,(_this.opt.map||_this.opt.panel)&&(_this.render=new _this.renderEngine(_this.opt.showCover),_this.opt.extensions=\"all\"),_this.opt.children&&(_this.opt.extensions=\"all\"),_this}return _inherits(PlaceSearch,AMap.Event),_createClass(PlaceSearch,[{key:\"clear\",value:function(){this.render&&this.render.clear()}},{key:\"setLang\",value:function(lang){this.opt.lang=lang||\"zh_cn\"}},{key:\"getLang\",value:function(){return this.opt.lang||\"zh_cn\"}},{key:\"search\",value:function(keyword,cbk){var opts=this.opt,mapData={city:opts.city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),s:\"rsv3\",children:this.opt.children?\"1\":\"\",key:\"d656a05a71ec4814047c331fcf15d6f9\"};this._filterData(mapData),this._query(this.url+\"placetext\",mapData,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"searchInBounds\",value:function(keyword,bounds,cbk){if(!bounds)return this.emit(\"error\",{info:\"NO_PARAMS\"}),void(cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\"));var opts=this.opt,mapData={city:opts.city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),polygon:bounds,s:\"rsv3\",children:this.opt.children?\"1\":\"\",key:this.config.key};this._filterData(mapData),this._query(this.url+\"placepolygon\",mapData,cbk,{keywords:keyword||\"\"},\"POLYGON\",arguments)}},{key:\"searchNearBy\",value:function(keyword,center,radius,cbk){if(!center)return this.emit(\"error\",{info:\"NO_PARAMS\"}),void(cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\"));var curCenter=AMap.Util.parseLngLatData(center),opts=this.opt,mapData={city:opts.city,sortrule:opts.rankBy,types:opts.type,page:opts.pageIndex,offset:opts.pageSize,extensions:opts.extensions,citylimit:opts.citylimit,language:this.getLang(),location:curCenter.toString(),radius:radius,s:\"rsv3\",children:this.opt.children?\"1\":\"\",key:this.config.key};this._filterData(mapData),this._query(this.url+\"placearound\",mapData,cbk,{keywords:keyword||\"\"},\"NEARBY\",arguments)}},{key:\"getDetails\",value:function(PGUID,cbk){if(!PGUID)return this.emit(\"error\",{info:\"NO_PARAMS\"}),void(cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\"));this.opt;var mapData={id:PGUID,s:\"rsv3\",key:this.config.key};this._query(this.url+\"placedetail\",mapData,cbk,{},\"ID\")}},{key:\"setType\",value:function(type){this.opt.type=type}},{key:\"setPageIndex\",value:function(pageIndex){this.opt.pageIndex=pageIndex||1}},{key:\"setPageSize\",value:function(pageSize){this.opt.pageSize=\"number\"!=typeof pageSize||pageSize<0?10:50<pageSize?50:pageSize}},{key:\"setCity\",value:function(city){this.opt.city=city}},{key:\"setCityLimit\",value:function(citylimit){this.opt.citylimit=citylimit}},{key:\"poiOnAMAP\",value:function(p){var pp={},location=AMap.Util.parseLngLatData(p.location);pp.id=p.id,location&&!Array.isArray(location)&&(pp.y=location.lat,pp.x=location.lng),pp.name=p.name,pp.address=p.address,AMap.plugin(\"AMap.CallAMap\",function(){var callapp=new AMap.CallAMap,url=callapp.getPoiUrl(pp);callapp.open(url)})}},{key:\"detailOnAMAP\",value:function(p){var pp={},location=AMap.Util.parseLngLatData(p.location);pp.id=p.id,location&&!Array.isArray(location)&&(pp.y=location.lat,pp.x=location.lng),pp.name=p.name,AMap.plugin(\"AMap.CallAMap\",function(){var callapp=new AMap.CallAMap,url=callapp.getPoiDetailUrl(pp);callapp.open(url)})}},{key:\"close\",value:function(){this.closed=!0}},{key:\"open\",value:function(){this.closed=!1}},{key:\"_mergeParams\",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&params.push(map[i]+\"=\"+data[i]);params.push(\"language=\"+this.getLang())}},{key:\"_query\",value:function(url,params,cbk,encodeURICom,type,argument_5){var _this2=this,args=5<arguments.length&&void 0!==argument_5?argument_5:{},targetParams=AMap.extend(params,{type_:type,antiCrab:!0},encodeURICom);AMap.WebService.get(url,targetParams,function(status,data){var result=data;return\"complete\"===status?_this2._onComplete(result,cbk,type,args):\"error\"===status&&_this2._onError(result,cbk),{}})}},{key:\"_parseString\",value:function(v){return v instanceof Array&&0===v.length||void 0===v?\"\":v}},{key:\"_formatFields\",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),\"object\"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:\"_str2LngLat\",value:function(str){if(str){var arr=str.split(\",\");return 2===arr.length?new AMap.LngLat(arr[0],arr[1]):str}return str}},{key:\"_parsePOI\",value:function(poi){function getLngLat(location){if(location){var lngLat=location.split(\",\");return new AMap.LngLat(lngLat[0],lngLat[1])}return null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo=\"\",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:\"0\"!==poi.groupbuy_num,discount:\"0\"!==poi.discount_num};\"1\"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1;var poiDeepInfo={groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"};if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num,10),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:\"\"};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num,10),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:\"\"};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case\"cinema\":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type=\"CINEMA\";break;case\"dining\":var dining={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:\"\",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=dining,poiDeepInfo.deep_type=\"DINING\";break;case\"scenic\":var scenic={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=scenic,poiDeepInfo.deep_type=\"SCENIC\";break;case\"hotel\":var hotel={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:\"\",photos:poiDeep.photos};poiDeepInfo.hotel=hotel,poiDeepInfo.deep_type=\"HOTEL\"}}var rePoi={};for(var baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&\"base\"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:\"_onComplete\",value:function(data,cbk,type,args){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info=\"TIP_KEYWORDS\"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city)city.hasOwnProperty(pro)&&\"num\"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count,10),citiesnew.push(city)}result.info=\"TIP_CITIES\",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(this.emit(\"complete\",result),(this.opt.map||this.opt.panel)&&this._autoRender(result,type,args),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)):(result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info,this.emit(\"complete\",result),(this.opt.map||this.opt.panel)&&this._autoRender(result,type,args),cbk&&\"function\"==typeof cbk&&(result.cityList||result.keywordList?cbk(\"complete\",result):cbk(\"no_data\",{})))}else result={info:data.info},this.emit(\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_autoRender\",value:function(result,type,args){this.render||(this.render=new this.renderEngine(this.opt.showCover));this.render.autoRender({data:result,eventTrigger:function(type,params){this.emit(type,params)},methodName:{KEYWORD:\"search\",NEARBY:\"searchNearBy\",POLYGON:\"searchInBounds\",ROUTE:\"searchNearRoute\"}[type],placeSearchInstance:this,methodArgumments:args,renderStyle:this.opt.renderStyle||\"newpc\",panel:this.opt.panel,map:this.opt.map,autoFitView:this.opt.autoFitView}),this._searchCircle=this.render.searchCircle}},{key:\"_onError\",value:function(e,cbk){this.emit(\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_filterData\",value:function(data){for(var key in data)data.hasOwnProperty(key)&&void 0===data[key]&&delete data[key]}}]),PlaceSearch}();AMap.PlaceSearch=PlaceSearch}(window.AMap);\n");
_jsload_('AMap.PlaceSearchRender.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var PlaceSearchRenderUtil={getElementsByClassName:function(className,tag,parent){var testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\");tag=tag||\"*\";for(var elements=(parent=parent||document).getElementsByTagName(tag),returnElements=[],i=0,current=void 0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},escapeHtml:function(text){var map={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#039;\"};return text.replace(/[&<>\"']/g,function(m){return map[m]})},trimStr:function(str){return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")},simpleChildPoiName:function(name,parentPoi){var parentName=this.trimStr(parentPoi.name),match=name.match(/^(.*?)\\((.*?)\\)$/);return match?match[1]===parentName?match[2]:match[1].replace(parentName,\"\"):name.replace(parentName,\"\")}},PlaceSearchRenderListener=function(){function PlaceSearchRenderListener(placeSearchRender){this._parent=placeSearchRender}return PlaceSearchRenderListener.prototype.markerClick=function(data,position){var parent=this._parent,oldContent=parent.infoWindow.getContent();if(oldContent){var detail_1=parent.util.getElementsByClassName(\"poi-more\",\"a\",oldContent)[0];detail_1&&(detail_1._data=null,detail_1.clickHandler&&AMap.Event.removeListener(detail_1.clickHandler),detail_1.clickHandler=null)}var newContent=parent.view.createInfowindowContent(data),close=newContent.querySelector(\".amap-combo-close\");close&&(close.addEventListener(\"touchend\",function(e){parent.infoWindow.close()},this),close.addEventListener(\"click\",function(e){parent.infoWindow.close()},this));var detail=parent.util.getElementsByClassName(\"poi-more\",\"a\",newContent)[0];detail&&(detail._data=data,detail.clickHandler=detail.addEventListener(\"click\",function(e){parent.onDetailClick.call(parent,detail)})),parent.infoWindow.setContent(newContent),parent.infoWindow.setOffset(data._isChildPoi?new AMap.Pixel(0,-5):new AMap.Pixel(0,-30)),parent.infoWindow.open(parent.options.map,position),parent.options.map.setCenter(position)},PlaceSearchRenderListener.prototype.unfocusTitleClick=function(e,dataIndex){var parent=this._parent;this.last&&(this.last.className=\"poibox\"),(this._currentDiv=this)._currentIndex=parseInt(dataIndex,10);var div=this._currentDiv;if(div.className=\"poibox active\",this.last=div,parent.options.map){for(var target=e.target||e.srcElement,strIdx=void 0;target&&target!==div&&!(strIdx=target.getAttribute(\"data-idx\"));)target=target.parentNode;parent.setCenter(strIdx?parseInt(strIdx,10):this._currentIndex)}},PlaceSearchRenderListener}(),PlaceSearchRenderView={createInfowindowContent:function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];c.push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+(data._isChildPoi?\"\":data.index+1+\".\")+data.name+(data._isChildPoi?\"\":'&nbsp;<a class=\"poi-more\" href=\"javascript:void(0)\">详情»</a>')+\"</div>\"),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\",div.appendChild(sharp);var close=document.createElement(\"div\");return close.className=\"amap-combo-close\",div.appendChild(close),close.href=\"javascript: void(0)\",content.appendChild(div),content.appendChild(close),content.appendChild(sharp),content},getChildrenHtml:function(children,parentPoi){var parts=[];parts.push('<div class=\"poi-children-box\">'),parts.push('<ul class=\"poi-children-list\">');for(var i=0,len=children.length;i<len;i++){var childPoi=children[i],name=PlaceSearchRenderUtil.trimStr(childPoi.name),htmlName=PlaceSearchRenderUtil.escapeHtml(PlaceSearchRenderUtil.simpleChildPoiName(name,parentPoi));parts.push('<li class=\"poi-child-item\" data-idx=\"'+childPoi._idx+'\" title=\"'+htmlName+'\">'),parts.push(htmlName),parts.push(\"</li>\")}return parts.push(\"</ul>\"),parts.push(\"</div>\"),parts.join(\"\")},createPanel:function(result){if(!(result.poiList&&0<result.poiList.pois.length&&\"NO_DATA\"!==result.info))return\"<div class='amap_lib_placeSearch'>抱歉，未搜索到有效的结果。</div>\";var pois=result.poiList.pois,c=[];c.push('<div class=\"amap_lib_placeSearch\">'),c.push('    <div class=\"amap_lib_placeSearch_list\">'),c.push(\"        <ul>\");for(var i=0,poi=void 0;i<pois.length;i++)poi=pois[i],c.push('            <li class=\"poibox\" data-idx=\"'+poi._idx+'\">'),c.push('                <div class=\"amap_lib_placeSearch_poi poibox-icon\">'+(i+1)+\"</div>\"),c.push('                <h3 class=\"poi-title\">'),c.push('                \\t<span class=\"poi-name\">'+poi.name+\"</span>\"),c.push(\"                \\t<a href='javascript:void(0)' class=\\\"poi-more\\\">详情&gt;</a>\"),c.push(\"                </h3>\"),c.push('                <div class=\"poi-info\">'),c.push('                \\t<p class=\"poi-addr\">地址：'+poi.address+\"</p>\"),poi.tel&&c.push('                <p class=\"poi-tel\">电话：'+poi.tel+\"</p>\"),c.push(\"                </div>\"),poi.children&&c.push(this.getChildrenHtml(poi.children,poi)),c.push(\"            </li>\");c.push(\"        </ul>\"),c.push(\"    </div>\"),c.push('    <div class=\"amap_lib_placeSearch_page\">'),c.push(\"        <div>\"),c.push(\"            <p>\");var poiList=result.poiList,count=poiList.count,pageIndex=poiList.pageIndex,pageSize=poiList.pageSize,pageCount=Math.ceil(count/pageSize);return 3<pageIndex&&c.push(this.createPageButton(1,\"首页\")),1<pageIndex&&c.push(this.createPageButton(pageIndex-1,\"上一页\")),1<=pageIndex-2&&c.push(this.createPageButton(pageIndex-2,pageIndex-2)),1<=pageIndex-1&&c.push(this.createPageButton(pageIndex-1,pageIndex-1)),c.push(\"                <span>\"+pageIndex+\"</span>\"),pageIndex+1<=pageCount&&c.push(this.createPageButton(pageIndex+1,pageIndex+1)),pageIndex+2<=pageCount&&c.push(this.createPageButton(pageIndex+2,pageIndex+2)),pageIndex<pageCount&&c.push(this.createPageButton(pageIndex+1,\"下一页\")),c.push(\"            </p>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),c.join(\"\")},createPageButton:function(pageNum,text){return\"<span><a pageNo=\"+pageNum+' class=\"pageLink\" >'+text+\"</a></span>\"}},PlaceSearchRender=function(_super){function PlaceSearchRender(showCover){var _this=_super.call(this)||this;return _this.CLASS_NAME=\"AMap.PlaceSearchRender\",_this.options={},_this.circleOptions={id:\"place-search-circle\",radius:3e3,strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.boundOptions={id:\"place-search-bound\",strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.searchCircle=null,_this.searchBound=null,_this.util=PlaceSearchRenderUtil,_this.listener=new PlaceSearchRenderListener(_this),_this.view=PlaceSearchRenderView,_this.ifShowCover=showCover,_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(PlaceSearchRender,_super),PlaceSearchRender.prototype.autoRender=function(options){this.clear(),options&&options.methodName&&options.methodArgumments&&(options.panel||options.map)&&(this.options=options,this.callback(\"complete\",options.data))},PlaceSearchRender.prototype.addIdxField=function(pois){for(var stack=[].concat(pois),idx=0;;){var poi=stack.shift();if(!poi)break;if(poi._idx=idx++,poi.index=poi._idx,poi.id=this.util.trimStr(poi.id),poi.children)for(var i=0,len=poi.children.length;i<len;i++)poi.children[i]._isChildPoi=!0,poi.children[i]._parentIdx=poi._idx,poi.children[i].citycode=poi.citycode,stack.push(poi.children[i])}},PlaceSearchRender.prototype.callback=function(status,result){var _this=this;this.clear();var options=this.options;if(options.callback&&options.callback(status,result),\"complete\"===status){if((this.result=result).poiList&&this.addIdxField(result.poiList.pois),options.map){if(this.infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)}),this._overlays=[],this._highlightOverlay=null,(result.cityList||result.keywordList||result.poiList)&&this.drawOverlays(result),\"searchNearBy\"===options.methodName&&this.ifShowCover){var a=this.options.methodArgumments;this.drawCircle(a[1],a[2])}if(\"searchInBounds\"===options.methodName&&this.ifShowCover){a=this.options.methodArgumments;this.drawBound(a[1])}}if(options.panel&&(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),options.panel.innerHTML=this.view.createPanel(result),this.enableListeners(),options.placeSearchInstance))for(var details=this.util.getElementsByClassName(\"poi-more\",\"a\",options.panel),_loop_1=function(i){var a=details[i];a.dIndex=i,a.clickHandler=a.addEventListener(\"click\",function(e){_this.onDetailClick.call(_this,a)})},i=0;i<details.length;i+=1)_loop_1(i)}},PlaceSearchRender.prototype.enableListeners=function(){for(var out_unfocusTitle_1,_this=this,listener=this.listener,unfocusTitles=this.util.getElementsByClassName(\"poibox\",\"*\",this.options.panel),_loop_2=function(i,unfocusTitle){(unfocusTitle=unfocusTitles[i]).addEventListener(\"click\",function(e){var index=unfocusTitle.getAttribute(\"data-idx\");listener.unfocusTitleClick.call(listener,e,index)}),out_unfocusTitle_1=unfocusTitle},i=0,unfocusTitle=void 0;i<unfocusTitles.length;i++)_loop_2(i,unfocusTitle),unfocusTitle=out_unfocusTitle_1;for(var out_pageLink_1,pageLinks=this.util.getElementsByClassName(\"pageLink\",\"*\",this.options.panel),_loop_3=function(i,pageLink){(pageLink=pageLinks[i]).addEventListener(\"click\",function(){var pageNo=pageLink.getAttribute(\"pageNo\");_this.toPage(pageNo)}),out_pageLink_1=pageLink},pageLink=(i=0,void 0);i<pageLinks.length;i++)_loop_3(i,pageLink),pageLink=out_pageLink_1},PlaceSearchRender.prototype.onDetailClick=function(detail){this.options.placeSearchInstance.detailOnAMAP(detail._data||this.options.data.poiList.pois[detail.dIndex])},PlaceSearchRender.prototype.clear=function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearBound()},PlaceSearchRender.prototype.drawOverlays=function(result){this.clearOverlays();var pois=result.poiList.pois;this._overlays=this.addOverlays(pois),this.options.autoFitView&&this.options.map.setFitView(this._overlays,!0)},PlaceSearchRender.prototype.addChildrenOverlays=function(children,overlays){for(var _this=this,_loop_4=function(i,len){var childPoi=children[i],extraClass=\"\";switch(childPoi.subtype){case\"门\":extraClass=\"gate\";break;case\"停车场\":extraClass=\"parking\"}var point=new AMap.Marker({map:this_1.options.map,zIndex:100,offset:new AMap.Pixel(-6,-6),size:new AMap.Size(12,12),topWhenClick:!0,position:childPoi.location,content:'<div class=\"amap_lib_placeSearch_child_poi '+extraClass+'\">'+childPoi._idx+\"</div>\"});point.isOfficial=!0,point._data=childPoi,point.add(\"click\",function(e){_this.listener.markerClick(point._data,point.getPosition())}),overlays[childPoi._idx]=point},this_1=this,i=0,len=children.length;i<len;i++)_loop_4(i)},PlaceSearchRender.prototype.addOverlays=function(points){for(var out_point_1,_this=this,map=this.options.map,_overlays=[],children=[],_loop_5=function(i,point){(point=new AMap.Marker({map:map,zIndex:101,offset:new AMap.Pixel(-9,-31),size:new AMap.Size(19,33),topWhenClick:!0,position:points[i].location,content:'<div class=\"amap_lib_placeSearch_poi\">'+(i+1)+\"</div>\"})).isOfficial=!0,point._data=points[i],point.on(\"click\",function(e){_this.listener.markerClick(point._data,point.getPosition())}),_overlays[points[i]._idx]=point,points[i].children&&children.push.apply(children,points[i].children),out_point_1=point},i=0,point=void 0;i<points.length;i++)_loop_5(i,point),point=out_point_1;return this.addChildrenOverlays(children,_overlays),_overlays},PlaceSearchRender.prototype.toggleChildrenOverlays=function(idx,show){if(!isNaN(idx)){var point=this._overlays[idx];if(point){var poi=point._data,map=this.options.map;if(poi.children){for(var overlays=[point],i=0,len=poi.children.length;i<len;i++){var childOverlay=this._overlays[poi.children[i]._idx];childOverlay&&(childOverlay.setMap(show?map:null),overlays.push(childOverlay))}this.options.autoFitView&&this.options.map.setFitView(overlays,!0)}}else console.warn(\"Missing marker: \",idx)}},PlaceSearchRender.prototype.clearPanel=function(){if(this.options&&this.options.panel instanceof HTMLDivElement){for(var details=this.util.getElementsByClassName(\"poi-more\",\"a\",this.options.panel),i=0;i<details.length;i+=1){var a=details[i];a.clickHandler&&AMap.Event.removeListener(a.clickHandler),a.clickHandler=null}this.options.panel.innerHTML=\"\"}},PlaceSearchRender.prototype.clearOverlays=function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}if(this.infoWindow){var oldContent=this.infoWindow.getContent();if(oldContent){var detail=this.util.getElementsByClassName(\"poi-more\",\"a\",oldContent)[0];detail&&(detail._data=null,detail.clickHandler&&(AMap.Event.removeListener(detail.clickHandler),detail.clickHandler=null))}this.infoWindow.close()}},PlaceSearchRender.prototype.setCenter=function(index){var point=this._overlays[index];if(point){var poi=point._data;this.options.map.setCenter(poi.location),point.setTop(!0),this.listener.markerClick(poi,poi.location)}else console.warn(\"Missing marker: \",index)},PlaceSearchRender.prototype.toPage=function(pageNo){pageNo.length&&(pageNo=parseInt(pageNo,10)),this.options.placeSearchInstance.setPageIndex(pageNo),this.options.placeSearchInstance[this.options.methodName].apply(this.options.placeSearchInstance,this.options.methodArgumments)},PlaceSearchRender.prototype.drawCircle=function(center,radius){this.clearCircle(),this.circleOptions.map=this.options.map,this.circleOptions.center=center,this.circleOptions.radius=radius,this.searchCircle=new AMap.Circle(this.circleOptions),this.searchCircle.isOfficial=!0},PlaceSearchRender.prototype.clearCircle=function(){this.searchCircle&&(this.searchCircle.setMap(null),this.searchCircle=null)},PlaceSearchRender.prototype.drawBound=function(bound){this.clearBound();var path=[];bound.getNorthWest?path.push(bound.getNorthWest(),bound.getNorthEast(),bound.getSouthEast(),bound.getSouthWest()):path=bound.getPath(),this.boundOptions.path=path,this.boundOptions.map=this.options.map;var polygon=new AMap.Polygon(this.boundOptions);polygon.isOfficial=!0,this.searchBound=polygon},PlaceSearchRender.prototype.clearBound=function(){this.searchBound&&(this.searchBound.setMap(null),this.searchBound=null)},PlaceSearchRender}(AMap.Event);AMap.PlaceSearchRender=PlaceSearchRender}();\n");
_jsload_('AMap.PlaceSearchRenderMarkerList.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var renderThemeUtils={selectInfoWin:function(data,idx){return{size:new AMap.Size(0,0),isCustom:!0,offset:data._isChildPoi?new AMap.Pixel(0,-5):new AMap.Pixel(0,-30),content:'<div class=\"amap-content-body\"><div class=\"amap-lib-infowindow\"><div class=\"amap-lib-infowindow-title\"><% this.name %><a class=\"poi-more\" href=\"javascript:void(0)\">详情»</a></div><div class=\"amap-lib-infowindow-content\"><div class=\"amap-lib-infowindow-content-wrap\"><% if(this.address) { %><div>地址：<% this.address%></div><% } %><% if(this.tel) { %><div>电话：<% this.tel %></div><% } %></div></div></div></div><div class=\"amap-combo-close\"></div><div class=\"amap-combo-sharp\"></div>'}},newPcSelectInfoWin:function(data,idx){return{size:new AMap.Size(0,0),isCustom:!0,offset:data._isChildPoi?new AMap.Pixel(0,-5):new AMap.Pixel(0,-30),content:'<div class=\"amap-content-body amap-pl-pc\"><div class=\"amap-lib-infowindow\"><div class=\"amap-lib-infowindow-title\"><span class=\"poi-name\"><% this.name %></span><a class=\"poi-more\" title=\"详情\"></a></div><div class=\"amap-lib-infowindow-content\"><div class=\"amap-lib-infowindow-content-wrap\"><% if(this.address) { %><div>地址：<% this.address%></div><% } %><% if(this.tel) { %><div>电话：<% this.tel %></div><% } %></div></div></div></div><div class=\"amap-combo-close\"></div><div class=\"amap-combo-sharp\"></div>'}}},renderThemes={default:{getInfoWindowOnSelectedMarker:renderThemeUtils.selectInfoWin,getMarker:function(data,index){return{zIndex:101,isOfficial:!0,offset:new AMap.Pixel(-9,-31),size:new AMap.Pixel(19,33),topWhenClick:!0,content:'<div class=\"amap_lib_placeSearch_poi\"><% context.index+1 %></div>'}},getListElement:function(data,index){return'<li class=\"poibox\"><div class=\"amap_lib_placeSearch_poi poibox-icon\"><% context.index+1 %></div><h3 class=\"poi-title\"><span class=\"poi-name\"><% this.name %></span> <a class=\"poi-more\">详情&gt;</a></h3><div class=\"poi-info\"><% if(this.address) { %><p class=\"poi-addr\">地址：<% this.address %></p><% } %><% if(this.tel) { %><p class=\"poi-tel\">电话：<% this.tel %></p><% } %></div><% if(this.children) { %><div class=\"poi-children-box\"><ul class=\"poi-children-list\"></ul></div><% } %></li>'},subListOptions:{getInfoWindowOnSelectedMarker:renderThemeUtils.selectInfoWin,getMarker:{zIndex:100,isOfficial:!0,offset:new AMap.Pixel(-6,-6),size:new AMap.Pixel(12,12),topWhenClick:!0,content:'<div class=\"amap_lib_placeSearch_child_poi gate\"><% context.index+1 %></div>'},getListElement:'<li class=\"poi-child-item\" title=\"<% this.name %>\"><% this.sname %></li>'}},newpc:{containerClass:\"pc\",getInfoWindowOnSelectedMarker:renderThemeUtils.newPcSelectInfoWin,getMarker:function(data,context){return{zIndex:101,isOfficial:!0,offset:new AMap.Pixel(-9,-31),size:new AMap.Pixel(19,33),topWhenClick:!0,content:'<div class=\"amap_lib_placeSearch_poi\"><% context.index+1 %></div><div class=\"amap-pls-marker-tip\" title=\"<% this.name %>\"><span class=\"title\"><% this.name %></span></div>'}},getListElement:function(data,context){return'<li class=\"poibox\"><div class=\"amap_lib_placeSearch_poi poibox-icon\"><% context.index+1 %></div><% if(this.photos && this.photos[0]) { %>    <div    class=\"poi-img\"    style=\"background-image:       url(<% this.photos[0].url.replace(\"http://\",\"//\") %>?operate=merge&w=90&h=56&position=5)\">    </div><% } %><h3 class=\"poi-title\"><span class=\"poi-name\"><% this.name %></span><a class=\"poi-more\" title=\"详情\">&gt;</a></h3><div class=\"poi-info\"><% if(this.address) { %><p class=\"poi-addr\">地址：<% this.address %></p><% } %><% if(this.tel) { %><p class=\"poi-tel\">电话：<% this.tel %></p><% } %></div><% if(this.children) { %><div class=\"poi-children-box\"><ul class=\"poi-children-list\"></ul></div><% } %><div class=\"clear\"></div></li>'},subListOptions:{getInfoWindowOnSelectedMarker:renderThemeUtils.newPcSelectInfoWin,getMarker:{zIndex:100,isOfficial:!0,offset:new AMap.Pixel(-6,-6),size:new AMap.Pixel(12,12),topWhenClick:!0,content:'<div class=\"amap_lib_placeSearch_child_con\"><div class=\"amap_lib_placeSearch_child_poi gate\"><% context.index+1 %></div><div class=\"amap-pls-marker-tip\" title=\"<% this.name %>\"><span class=\"title\"><% this.name %></span></div></div>'},getListElement:'<li class=\"poi-child-item\" title=\"<% this.name %>\"><% this.sname %></li>'}}},domUtils={addClass:function(el,name){el&&name&&(domUtils.hasClassName(el,name)||(el.className+=(el.className?\" \":\"\")+name))},removeClass:function(el,name){el&&name&&(el.className=el.className.replace(/(\\S+)\\s*/g,function(w,match){return match===name?\"\":w}).replace(/(^\\s+|\\s+$)/,\"\"))},hasClassName:function(ele,className){return new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\").test(ele.className)},getElementsByClassName:function(className,tag,parent){var elements,returnElements;if(tag=tag||\"*\",(parent=parent||document).getElementsByClassName)return parent.getElementsByClassName(className);elements=parent.getElementsByTagName(tag),returnElements=[];for(var i=0,current=void 0;i<elements.length;i++)current=elements[i],domUtils.hasClassName(current,className)&&returnElements.push(current);return returnElements},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},PlaceSearchRenderMarkerList=function(_super){function PlaceSearchRenderMarkerList(ifShowCover){var _this=_super.call(this)||this;_this.CLASS_NAME=\"AMap.PlaceSearchRenderMarkerList\",_this.circleOptions={id:\"place-search-circle\",radius:3e3,strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.boundOptions={id:\"place-search-bound\",strokeColor:\"#72ccff\",strokeOpacity:.8,strokeWeight:1,fillColor:\"#d0e7f8\",fillOpacity:.2,bubble:!0},_this.ifShowCover=ifShowCover;var ie=\"ActiveXObject\"in window;return _this.ielt9=ie&&!document.addEventListener,_this.isMobile=AMap.UA.mobile,_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(PlaceSearchRenderMarkerList,_super),PlaceSearchRenderMarkerList.prototype.updateMakerListTheme=function(themeName){var ielt9=this.ielt9,currentTheme=this.currentTheme;ielt9&&(themeName=\"default\");var theme=\"string\"==typeof(themeName=themeName||(ielt9?\"default\":\"newpc\"))?renderThemes[themeName]:themeName;theme&&currentTheme!==theme&&(this.options.panel&&currentTheme&&currentTheme.containerClass&&domUtils.removeClass(this.options.panel,\"amap-pl-\"+currentTheme.containerClass),currentTheme=theme,this.markerList.setOptions(currentTheme),this.options.panel&&currentTheme.containerClass&&domUtils.addClass(this.options.panel,\"amap-pl-\"+currentTheme.containerClass))},PlaceSearchRenderMarkerList.prototype.switchTheme=function(theme){this.updateMakerListTheme(theme),this.markerList.render()},PlaceSearchRenderMarkerList.prototype.getMarkerList=function(options){var _this=this,markerList=new AMap.MarkerList({autoSetFitView:!1,selectedClassName:\"selected\",markerEvents:[\"click\",\"mouseover\",\"mouseout\"],clickToSelect:function(res){res.lastSelected&&res.lastSelected.data._subMarkerList&&res.lastSelected.data._subMarkerList.clearSelected(),res.selected&&res.selected.data._subMarkerList&&res.selected.data._subMarkerList.clearSelected()},getDataPosition:function(item){return item.location},getDataId:function(item){return item.id||AMap.Util.stamp(item)}});function handleInfoWinClick(res){var e=res.event,target=e.target||e.srcElement;domUtils.stopPropagation(e),domUtils.hasClassName(target,\"poi-more\")?this.onDetailClick(res.data):domUtils.hasClassName(target,\"amap-combo-close\")&&res.infoWindow.close()}function createSubMarkerList(pkg){var data=pkg.data,currentTheme=this.currentTheme,listEle=pkg.listElement,subList=listEle?domUtils.getElementsByClassName(\"poi-children-list\",\"ul\",listEle)[0]:null,subMarkerList=new AMap.MarkerList({autoSetFitView:!1,markerEvents:[\"click\",\"mouseover\",\"mouseout\"],clickToSelect:function(res){this.markerList&&this.markerList.clearSelected()},map:markerList.getOption(\"map\"),selectedClassName:\"selected\",listContainer:subList,getDataPosition:function(item){return item.location},getDataId:function(item){return item.id}});return subMarkerList.setOptions(currentTheme.subListOptions),subMarkerList.on(\"listElementClick\",function(res){var e=res.event;domUtils.stopPropagation(e)}),subMarkerList.on(\"markerClick\",function(res){}),subMarkerList.on(\"markerMouseover\",function(res){var ele=res.marker.get(\"contentDom\");ele&&(res.marker.setTop(!0),domUtils.addClass(ele,\"hover\"))}),subMarkerList.on(\"markerMouseout\",function(res){var ele=res.marker.get(\"contentDom\");ele&&domUtils.removeClass(ele,\"hover\")}),subMarkerList.on(\"infoWindowClick\",handleInfoWinClick),subMarkerList.data(data.children).render(),this.options.eventTrigger&&this.proxyEvents(subMarkerList,this.options.eventTrigger,[\"selectChanged\",\"listElementClick\",\"infoWindowClick\",\"markerClick\"]),data._subMarkerList=subMarkerList}return markerList.on(\"willClear\",function(res){var data=res.data;data._subMarkerList&&(data._subMarkerList.destroy(),data._subMarkerList=null)}),markerList.on(\"renderComplete\",function(res){for(var results=res.results,i=0,len=results.length;i<len;i++)results[i].data.children&&createSubMarkerList(results[i])}),markerList.on(\"listElementClick\",function(res){var e=res.event,target=e.target||e.srcElement;domUtils.hasClassName(target,\"poi-more\")&&_this.onDetailClick(res.data)}),markerList.on(\"markerClick\",function(res){}),markerList.on(\"markerMouseover\",function(res){var ele=res.marker.get(\"contentDom\");ele&&domUtils.addClass(ele,\"hover\")}),markerList.on(\"markerMouseout\",function(res){var ele=res.marker.get(\"contentDom\");ele&&domUtils.removeClass(ele,\"hover\")}),markerList.on(\"infoWindowClick\",handleInfoWinClick),markerList},PlaceSearchRenderMarkerList.prototype.proxyEvents=function(ml,trigger,events){for(var popEvents=events||[\"renderComplete\",\"selectChanged\",\"listElementClick\",\"infoWindowClick\",\"markerClick\",\"willClear\",\"markerDestoryed\",\"listElementDetroyed\"],i=0,len=popEvents.length;i<len;i++)ml.on(popEvents[i],function(res){res.type&&trigger(res.type,res)})},PlaceSearchRenderMarkerList.prototype.autoRender=function(options){var _this=this;this.clear(),options&&options.methodName&&options.methodArgumments&&(options.panel||options.map)&&(this.options=options,AMap.plugin([\"AMap.MarkerList\"],function(){_this.markerList||(_this.markerList=_this.getMarkerList(_this.options),options.eventTrigger&&_this.proxyEvents(_this.markerList,options.eventTrigger)),_this.callback(\"complete\",_this.options.data)}))},PlaceSearchRenderMarkerList.prototype.filterPoiData=function(pois){for(var stack=[].concat(pois);;){var poi=stack.shift();if(!poi)break;if(poi.id=this.trimStr(poi.id),poi.children)for(var i=0,len=poi.children.length;i<len;i++){var child=poi.children[i];child._isChildPoi=!0,child._parentId=poi.id,child.citycode=poi.citycode,stack.push(child)}}},PlaceSearchRenderMarkerList.prototype.callback=function(status,result){this.clear();var options=this.options;if(options.callback&&options.callback(status,result),\"complete\"===status){if((this.result=result).poiList&&this.filterPoiData(result.poiList.pois),options.panel&&(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),this.setupPanel(options.panel,result),this.markerList.setOption(\"listContainer\",domUtils.getElementsByClassName(\"amap_lib_placeSearch_ul\",\"ul\",options.panel)[0])),options.map){if(this.markerList.setOption(\"map\",options.map),this._infoWindow||(this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)})),\"searchNearBy\"===options.methodName&&this.ifShowCover){var a=this.options.methodArgumments;this.drawCircle(a[1],a[2])}if(\"searchInBounds\"===options.methodName&&this.ifShowCover){a=this.options.methodArgumments;this.drawBound(a[1])}options.map._listenEvents||(options.map._listenEvents=!0,this.initMapContainer(options.map))}result.poiList&&(this.updateMakerListTheme(options.renderStyle),this.markerList.data(result.poiList.pois).render(),options.map&&options.autoFitView&&this.options.map.setFitView(this.markerList.getMarkers(),!0))}},PlaceSearchRenderMarkerList.prototype.initMapContainer=function(map){var _this=this,container=map.getContainer();container&&container.addEventListener(\"click\",function(e){var target=e.target||e.srcElement;if(domUtils.hasClassName(target,\"poi-more\")){var id=target.getAttribute(\"data-id\"),pid=target.getAttribute(\"data-pid\"),targetMarkerList=null;if(!id)return;if(pid){var parentRecord=_this.markerList.getRecordById(pid);parentRecord&&parentRecord.data&&(targetMarkerList=parentRecord.data._subMarkerList)}else targetMarkerList=_this.markerList;if(targetMarkerList){var record=targetMarkerList.getRecordById(id);record&&_this.onDetailClick(record.data)}}else;})},PlaceSearchRenderMarkerList.prototype.onDetailClick=function(data){this.options.placeSearchInstance.detailOnAMAP(data)},PlaceSearchRenderMarkerList.prototype.clear=function(){this.clearPanel(),this.clearOverlays(),this.clearCircle(),this.clearBound()},PlaceSearchRenderMarkerList.prototype.clearPanel=function(){this.options&&this.options.panel&&\"object\"==typeof this.options.panel&&this.options.panel instanceof HTMLDivElement&&(this.markerList.clear(),this.markerList.teardownListContainer(),this.options.panel.innerHTML=\"\")},PlaceSearchRenderMarkerList.prototype.clearOverlays=function(){this._infoWindow&&this._infoWindow.close()},PlaceSearchRenderMarkerList.prototype.toPage=function(pageNo){pageNo.length&&(pageNo=parseInt(pageNo,10)),this.options.placeSearchInstance.setPageIndex(pageNo),this.options.placeSearchInstance[this.options.methodName].apply(this.options.placeSearchInstance,this.options.methodArgumments)},PlaceSearchRenderMarkerList.prototype.setupPanel=function(panel,result){var _this=this;if(result.poiList&&0<result.poiList.pois.length&&\"NO_DATA\"!==result.info){var poiList=result.poiList,count=poiList.count,pageIndex=poiList.pageIndex,pageSize=poiList.pageSize,pageCount=Math.ceil(count/pageSize),pageStart=Math.max(1,pageIndex-2),pageEnd=Math.min(pageCount,pageIndex+2),pagePre=1<pageIndex&&pageIndex-1,pageNext=pageIndex<pageCount&&pageIndex+1,pageFirst=1<pageStart&&1;panel.innerHTML=this.markerList.compileTpl('<div class=\"amap_lib_placeSearch'+(this.isMobile?\" mobile\":\"\")+'\"><div class=\"amap_lib_placeSearch_list\"><ul class=\"amap_lib_placeSearch_ul\"></ul></div><div class=\"amap_lib_placeSearch_page\"><% if(this.pageFirst) { %><span><a pageNo=\"1\" class=\"pageLink\" >首页</a></span><% } %><% if(this.pagePre) { %><span><a pageNo=\"<% this.pagePre %>\" class=\"pageLink\" >上一页</a></span><% } %><% if(this.pageStart && this.pageEnd) { %><% for(var pageIdx=this.pageStart;pageIdx<=this.pageEnd;pageIdx++){ %><span><a    pageNo=\"<% pageIdx %>\"    class=\"pageLink <%if(pageIdx==this.pageCurrent){%>current<%}%>\" ><% pageIdx %></a></span><% } %><% } %><% if(this.pageNext) { %><span><a pageNo=\"<% this.pageNext %>\" class=\"pageLink\" >下一页</a></span><% } %><% if(this.pageLast) { %><span><a pageNo=\"<% this.pageLast %>\" class=\"pageLink\" >末页</a></span><% } %></div></div>',this.isMobile?{pageFirst:1<pageIndex&&1,pagePre:pagePre,pageNext:pageNext,pageCurrent:pageIndex}:{pagePre:pagePre,pageNext:pageNext,pageCurrent:pageIndex,pageStart:pageStart,pageEnd:pageEnd,pageFirst:pageFirst}),panel._listenEvents||(panel._listenEvents=!0,panel.addEventListener(\"click\",function(e){var target=e.target||e.srcElement;if(domUtils.hasClassName(target,\"pageLink\")){var pageNo=target.getAttribute(\"pageNo\");_this.toPage(pageNo)}}))}else panel.innerHTML=\"<p class='amap_lib_placeSearch'>抱歉，未搜索到有效的结果。</p>\"},PlaceSearchRenderMarkerList.prototype.drawCircle=function(center,radius){this.clearCircle();var circleOptions=this.circleOptions;circleOptions.map=this.options.map,circleOptions.center=center,circleOptions.radius=radius,this.searchCircle=new AMap.Circle(circleOptions),this.searchCircle.isOfficial=!0},PlaceSearchRenderMarkerList.prototype.clearCircle=function(){this.searchCircle&&(this.searchCircle.setMap(null),this.searchCircle=null)},PlaceSearchRenderMarkerList.prototype.drawBound=function(bound){this.clearBound();var boundOptions=this.boundOptions,path=[];bound.getNorthWest?path.push(bound.getNorthWest(),bound.getNorthEast(),bound.getSouthEast(),bound.getSouthWest()):path=bound.getPath(),boundOptions.path=path,boundOptions.map=this.options.map;var polygon=new AMap.Polygon(boundOptions);polygon.isOfficial=!0,this.searchBound=polygon},PlaceSearchRenderMarkerList.prototype.clearBound=function(){this.searchBound&&(this.searchBound.setMap(null),this.searchBound=null)},PlaceSearchRenderMarkerList.prototype.trimStr=function(str){return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")},PlaceSearchRenderMarkerList}(AMap.Event);AMap.PlaceSearchRenderMarkerList=PlaceSearchRenderMarkerList}();\n");
_jsload_('AMap.PolyEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)===\"[object Arguments]\")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]()}finally{if(_d)throw _e}}return _arr}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}function getNearestPoint(pt,pts){var nearest=null;pts.forEach(function(p,i){var lngDiff=p[0]-pt[0];var latDiff=p[1]-pt[1];var l=Math.sqrt(Math.pow(lngDiff,2)+Math.pow(latDiff,2));var cur={distance:l,point:p,index:i};if(nearest){if(nearest.distance>l){nearest=cur}}else{nearest=cur}});return nearest}function getPixelDistance(_map,_ref){var _ref2=_slicedToArray(_ref,2),p1=_ref2[0],p2=_ref2[1];var toPixel=function toPixel(p){var lnglat=new AMap.LngLat(p[0],p[1]);return _map.lngLatToContainer(lnglat)};var pixel1=toPixel(p1);var pixel2=toPixel(p2);var xDiff=pixel1.x-pixel2.x;var yDiff=pixel1.y-pixel2.y;var l=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));return l}function e2ll(e){if(e&&e.lnglat){return e.lnglat}return null}function getPolygonOptions(opt){return{path:opt[\"path\"],map:opt[\"map\"],strokeColor:opt[\"strokeColor\"]||\"#1791fc\",strokeOpacity:opt[\"strokeOpacity\"]||.8,strokeWeight:opt[\"strokeWeight\"]||2,fillColor:opt[\"fillColor\"]||\"#1791fc\",fillOpacity:opt[\"fillOpacity\"]||.35,strokeStyle:opt[\"strokeStyle\"]||\"solid\",strokeDasharray:opt[\"strokeDasharray\"]||[10,5],zIndex:opt[\"zIndex\"]||10,extData:opt[\"extData\"]||{},bubble:!!opt[\"bubble\"]}}function createPolygon(path,opt){var _opt=AMap.extend({},getPolygonOptions(opt),{path:path});var p=new AMap.Polygon(_opt);if(_opt[\"map\"]){_opt[\"map\"].add(p)}return p}var commonjsGlobal=typeof globalThis!==\"undefined\"?globalThis:typeof window!==\"undefined\"?window:typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,\"default\")?x[\"default\"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var helpers=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});exports.earthRadius=6371008.8;exports.factors={centimeters:exports.earthRadius*100,centimetres:exports.earthRadius*100,degrees:exports.earthRadius/111325,feet:exports.earthRadius*3.28084,inches:exports.earthRadius*39.37,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:exports.earthRadius*1e3,millimetres:exports.earthRadius*1e3,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius/1.0936};exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1/1.0936};exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature(geom,properties,options){if(options===void 0){options={}}var feat={type:\"Feature\"};if(options.id===0||options.id){feat.id=options.id}if(options.bbox){feat.bbox=options.bbox}feat.properties=properties||{};feat.geometry=geom;return feat}exports.feature=feature;function geometry(type,coordinates,options){switch(type){case\"Point\":return point(coordinates).geometry;case\"LineString\":return lineString(coordinates).geometry;case\"Polygon\":return polygon(coordinates).geometry;case\"MultiPoint\":return multiPoint(coordinates).geometry;case\"MultiLineString\":return multiLineString(coordinates).geometry;case\"MultiPolygon\":return multiPolygon(coordinates).geometry;default:throw new Error(type+\" is invalid\")}}exports.geometry=geometry;function point(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"Point\",coordinates:coordinates};return feature(geom,properties,options)}exports.point=point;function points(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return point(coords,properties)}),options)}exports.points=points;function polygon(coordinates,properties,options){if(options===void 0){options={}}for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4){throw new Error(\"Each LinearRing of a Polygon must have 4 or more Positions.\")}for(var j=0;j<ring[ring.length-1].length;j++){if(ring[ring.length-1][j]!==ring[0][j]){throw new Error(\"First and last Position are not equivalent.\")}}}var geom={type:\"Polygon\",coordinates:coordinates};return feature(geom,properties,options)}exports.polygon=polygon;function polygons(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return polygon(coords,properties)}),options)}exports.polygons=polygons;function lineString(coordinates,properties,options){if(options===void 0){options={}}if(coordinates.length<2){throw new Error(\"coordinates must be an array of two or more positions\")}var geom={type:\"LineString\",coordinates:coordinates};return feature(geom,properties,options)}exports.lineString=lineString;function lineStrings(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return lineString(coords,properties)}),options)}exports.lineStrings=lineStrings;function featureCollection(features,options){if(options===void 0){options={}}var fc={type:\"FeatureCollection\"};if(options.id){fc.id=options.id}if(options.bbox){fc.bbox=options.bbox}fc.features=features;return fc}exports.featureCollection=featureCollection;function multiLineString(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiLineString\",coordinates:coordinates};return feature(geom,properties,options)}exports.multiLineString=multiLineString;function multiPoint(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiPoint\",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPoint=multiPoint;function multiPolygon(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiPolygon\",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPolygon=multiPolygon;function geometryCollection(geometries,properties,options){if(options===void 0){options={}}var geom={type:\"GeometryCollection\",geometries:geometries};return feature(geom,properties,options)}exports.geometryCollection=geometryCollection;function round(num,precision){if(precision===void 0){precision=0}if(precision&&!(precision>=0)){throw new Error(\"precision must be a positive number\")}var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}exports.round=round;function radiansToLength(radians,units){if(units===void 0){units=\"kilometers\"}var factor=exports.factors[units];if(!factor){throw new Error(units+\" units is invalid\")}return radians*factor}exports.radiansToLength=radiansToLength;function lengthToRadians(distance,units){if(units===void 0){units=\"kilometers\"}var factor=exports.factors[units];if(!factor){throw new Error(units+\" units is invalid\")}return distance/factor}exports.lengthToRadians=lengthToRadians;function lengthToDegrees(distance,units){return radiansToDegrees(lengthToRadians(distance,units))}exports.lengthToDegrees=lengthToDegrees;function bearingToAzimuth(bearing){var angle=bearing%360;if(angle<0){angle+=360}return angle}exports.bearingToAzimuth=bearingToAzimuth;function radiansToDegrees(radians){var degrees=radians%(2*Math.PI);return degrees*180/Math.PI}exports.radiansToDegrees=radiansToDegrees;function degreesToRadians(degrees){var radians=degrees%360;return radians*Math.PI/180}exports.degreesToRadians=degreesToRadians;function convertLength(length,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit=\"kilometers\"}if(finalUnit===void 0){finalUnit=\"kilometers\"}if(!(length>=0)){throw new Error(\"length must be a positive number\")}return radiansToLength(lengthToRadians(length,originalUnit),finalUnit)}exports.convertLength=convertLength;function convertArea(area,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit=\"meters\"}if(finalUnit===void 0){finalUnit=\"kilometers\"}if(!(area>=0)){throw new Error(\"area must be a positive number\")}var startFactor=exports.areaFactors[originalUnit];if(!startFactor){throw new Error(\"invalid original units\")}var finalFactor=exports.areaFactors[finalUnit];if(!finalFactor){throw new Error(\"invalid final units\")}return area/startFactor*finalFactor}exports.convertArea=convertArea;function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)&&!/^\\s*$/.test(num)}exports.isNumber=isNumber;function isObject(input){return!!input&&input.constructor===Object}exports.isObject=isObject;function validateBBox(bbox){if(!bbox){throw new Error(\"bbox is required\")}if(!Array.isArray(bbox)){throw new Error(\"bbox must be an Array\")}if(bbox.length!==4&&bbox.length!==6){throw new Error(\"bbox must be an Array of 4 or 6 numbers\")}bbox.forEach(function(num){if(!isNumber(num)){throw new Error(\"bbox must only contain numbers\")}})}exports.validateBBox=validateBBox;function validateId(id){if(!id){throw new Error(\"id is required\")}if([\"string\",\"number\"].indexOf(_typeof(id))===-1){throw new Error(\"id must be a number or a string\")}}exports.validateId=validateId;function radians2degrees(){throw new Error(\"method has been renamed to `radiansToDegrees`\")}exports.radians2degrees=radians2degrees;function degrees2radians(){throw new Error(\"method has been renamed to `degreesToRadians`\")}exports.degrees2radians=degrees2radians;function distanceToDegrees(){throw new Error(\"method has been renamed to `lengthToDegrees`\")}exports.distanceToDegrees=distanceToDegrees;function distanceToRadians(){throw new Error(\"method has been renamed to `lengthToRadians`\")}exports.distanceToRadians=distanceToRadians;function radiansToDistance(){throw new Error(\"method has been renamed to `radiansToLength`\")}exports.radiansToDistance=radiansToDistance;function bearingToAngle(){throw new Error(\"method has been renamed to `bearingToAzimuth`\")}exports.bearingToAngle=bearingToAngle;function convertDistance(){throw new Error(\"method has been renamed to `convertLength`\")}exports.convertDistance=convertDistance});unwrapExports(helpers);var helpers_1=helpers.earthRadius;var helpers_2=helpers.factors;var helpers_3=helpers.unitsFactors;var helpers_4=helpers.areaFactors;var helpers_5=helpers.feature;var helpers_6=helpers.geometry;var helpers_7=helpers.point;var helpers_8=helpers.points;var helpers_9=helpers.polygon;var helpers_10=helpers.polygons;var helpers_11=helpers.lineString;var helpers_12=helpers.lineStrings;var helpers_13=helpers.featureCollection;var helpers_14=helpers.multiLineString;var helpers_15=helpers.multiPoint;var helpers_16=helpers.multiPolygon;var helpers_17=helpers.geometryCollection;var helpers_18=helpers.round;var helpers_19=helpers.radiansToLength;var helpers_20=helpers.lengthToRadians;var helpers_21=helpers.lengthToDegrees;var helpers_22=helpers.bearingToAzimuth;var helpers_23=helpers.radiansToDegrees;var helpers_24=helpers.degreesToRadians;var helpers_25=helpers.convertLength;var helpers_26=helpers.convertArea;var helpers_27=helpers.isNumber;var helpers_28=helpers.isObject;var helpers_29=helpers.validateBBox;var helpers_30=helpers.validateId;var helpers_31=helpers.radians2degrees;var helpers_32=helpers.degrees2radians;var helpers_33=helpers.distanceToDegrees;var helpers_34=helpers.distanceToRadians;var helpers_35=helpers.radiansToDistance;var helpers_36=helpers.bearingToAngle;var helpers_37=helpers.convertDistance;var invariant=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function getCoord(coord){if(!coord){throw new Error(\"coord is required\")}if(!Array.isArray(coord)){if(coord.type===\"Feature\"&&coord.geometry!==null&&coord.geometry.type===\"Point\"){return coord.geometry.coordinates}if(coord.type===\"Point\"){return coord.coordinates}}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1])){return coord}throw new Error(\"coord must be GeoJSON Point or an Array of numbers\")}exports.getCoord=getCoord;function getCoords(coords){if(Array.isArray(coords)){return coords}if(coords.type===\"Feature\"){if(coords.geometry!==null){return coords.geometry.coordinates}}else{if(coords.coordinates){return coords.coordinates}}throw new Error(\"coords must be GeoJSON Feature, Geometry Object or an Array\")}exports.getCoords=getCoords;function containsNumber(coordinates){if(coordinates.length>1&&helpers.isNumber(coordinates[0])&&helpers.isNumber(coordinates[1])){return true}if(Array.isArray(coordinates[0])&&coordinates[0].length){return containsNumber(coordinates[0])}throw new Error(\"coordinates must only contain numbers\")}exports.containsNumber=containsNumber;function geojsonType(value,type,name){if(!type||!name){throw new Error(\"type and name required\")}if(!value||value.type!==type){throw new Error(\"Invalid input to \"+name+\": must be a \"+type+\", given \"+value.type)}}exports.geojsonType=geojsonType;function featureOf(feature,type,name){if(!feature){throw new Error(\"No feature passed\")}if(!name){throw new Error(\".featureOf() requires a name\")}if(!feature||feature.type!==\"Feature\"||!feature.geometry){throw new Error(\"Invalid input to \"+name+\", Feature with geometry required\")}if(!feature.geometry||feature.geometry.type!==type){throw new Error(\"Invalid input to \"+name+\": must be a \"+type+\", given \"+feature.geometry.type)}}exports.featureOf=featureOf;function collectionOf(featureCollection,type,name){if(!featureCollection){throw new Error(\"No featureCollection passed\")}if(!name){throw new Error(\".collectionOf() requires a name\")}if(!featureCollection||featureCollection.type!==\"FeatureCollection\"){throw new Error(\"Invalid input to \"+name+\", FeatureCollection required\")}for(var _i=0,_a=featureCollection.features;_i<_a.length;_i++){var feature=_a[_i];if(!feature||feature.type!==\"Feature\"||!feature.geometry){throw new Error(\"Invalid input to \"+name+\", Feature with geometry required\")}if(!feature.geometry||feature.geometry.type!==type){throw new Error(\"Invalid input to \"+name+\": must be a \"+type+\", given \"+feature.geometry.type)}}}exports.collectionOf=collectionOf;function getGeom(geojson){if(geojson.type===\"Feature\"){return geojson.geometry}return geojson}exports.getGeom=getGeom;function getType(geojson,name){if(geojson.type===\"FeatureCollection\"){return\"FeatureCollection\"}if(geojson.type===\"GeometryCollection\"){return\"GeometryCollection\"}if(geojson.type===\"Feature\"&&geojson.geometry!==null){return geojson.geometry.type}return geojson.type}exports.getType=getType});unwrapExports(invariant);var invariant_1=invariant.getCoord;var invariant_2=invariant.getCoords;var invariant_3=invariant.containsNumber;var invariant_4=invariant.geojsonType;var invariant_5=invariant.featureOf;var invariant_6=invariant.collectionOf;var invariant_7=invariant.getGeom;var invariant_8=invariant.getType;var bearing_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function bearing(start,end,options){if(options===void 0){options={}}if(options.final===true){return calculateFinalBearing(start,end)}var coordinates1=invariant.getCoord(start);var coordinates2=invariant.getCoord(end);var lon1=helpers.degreesToRadians(coordinates1[0]);var lon2=helpers.degreesToRadians(coordinates2[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.sin(lon2-lon1)*Math.cos(lat2);var b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return helpers.radiansToDegrees(Math.atan2(a,b))}function calculateFinalBearing(start,end){var bear=bearing(end,start);bear=(bear+180)%360;return bear}exports.default=bearing});unwrapExports(bearing_1);var distance_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function distance(from,to,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(from);var coordinates2=invariant.getCoord(to);var dLat=helpers.degreesToRadians(coordinates2[1]-coordinates1[1]);var dLon=helpers.degreesToRadians(coordinates2[0]-coordinates1[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return helpers.radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}exports.default=distance});unwrapExports(distance_1);var destination_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function destination(origin,distance,bearing,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(origin);var longitude1=helpers.degreesToRadians(coordinates1[0]);var latitude1=helpers.degreesToRadians(coordinates1[1]);var bearingRad=helpers.degreesToRadians(bearing);var radians=helpers.lengthToRadians(distance,options.units);var latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad));var longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2));var lng=helpers.radiansToDegrees(longitude2);var lat=helpers.radiansToDegrees(latitude2);return helpers.point([lng,lat],options.properties)}exports.default=destination});unwrapExports(destination_1);var meta=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function coordEach(geojson,callback,excludeWrapCoord){if(geojson===null)return;var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection,type=geojson.type,isFeatureCollection=type===\"FeatureCollection\",isFeature=type===\"Feature\",stop=isFeatureCollection?geojson.features.length:1;for(var featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type===\"GeometryCollection\":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0;var geometryIndex=0;geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection;if(geometry===null)continue;coords=geometry.coordinates;var geomType=geometry.type;wrapShrink=excludeWrapCoord&&(geomType===\"Polygon\"||geomType===\"MultiPolygon\")?1:0;switch(geomType){case null:break;case\"Point\":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;multiFeatureIndex++;break;case\"LineString\":case\"MultiPoint\":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;if(geomType===\"MultiPoint\")multiFeatureIndex++}if(geomType===\"LineString\")multiFeatureIndex++;break;case\"Polygon\":case\"MultiLineString\":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}if(geomType===\"MultiLineString\")multiFeatureIndex++;if(geomType===\"Polygon\")geometryIndex++}if(geomType===\"Polygon\")multiFeatureIndex++;break;case\"MultiPolygon\":for(j=0;j<coords.length;j++){geometryIndex=0;for(k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case\"GeometryCollection\":for(j=0;j<geometry.geometries.length;j++){if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===false)return false}break;default:throw new Error(\"Unknown Geometry Type\")}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;coordEach(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){if(coordIndex===0&&initialValue===undefined)previousValue=currentCoord;else previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord);return previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case\"FeatureCollection\":for(i=0;i<geojson.features.length;i++){if(callback(geojson.features[i].properties,i)===false)break}break;case\"Feature\":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;propEach(geojson,function(currentProperties,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentProperties;else previousValue=callback(previousValue,currentProperties,featureIndex)});return previousValue}function featureEach(geojson,callback){if(geojson.type===\"Feature\"){callback(geojson,0)}else if(geojson.type===\"FeatureCollection\"){for(var i=0;i<geojson.features.length;i++){if(callback(geojson.features[i],i)===false)break}}}function featureReduce(geojson,callback,initialValue){var previousValue=initialValue;featureEach(geojson,function(currentFeature,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex)});return previousValue}function coordAll(geojson){var coords=[];coordEach(geojson,function(coord){coords.push(coord)});return coords}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type===\"FeatureCollection\",isFeature=geojson.type===\"Feature\",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson;featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{};featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:undefined;featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:undefined;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type===\"GeometryCollection\":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(g=0;g<stopG;g++){geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection;if(geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===false)return false;continue}switch(geometry.type){case\"Point\":case\"LineString\":case\"MultiPoint\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===false)return false;break}case\"GeometryCollection\":{for(j=0;j<geometry.geometries.length;j++){if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===false)return false}break}default:throw new Error(\"Unknown Geometry Type\")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;geomEach(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){if(featureIndex===0&&initialValue===undefined)previousValue=currentGeometry;else previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)});return previousValue}function flattenEach(geojson,callback){geomEach(geojson,function(geometry,featureIndex,properties,bbox,id){var type=geometry===null?null:geometry.type;switch(type){case null:case\"Point\":case\"LineString\":case\"Polygon\":if(callback(helpers.feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)===false)return false;return}var geomType;switch(type){case\"MultiPoint\":geomType=\"Point\";break;case\"MultiLineString\":geomType=\"LineString\";break;case\"MultiPolygon\":geomType=\"Polygon\";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate=geometry.coordinates[multiFeatureIndex];var geom={type:geomType,coordinates:coordinate};if(callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex)===false)return false}})}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;flattenEach(geojson,function(currentFeature,featureIndex,multiFeatureIndex){if(featureIndex===0&&multiFeatureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)});return previousValue}function segmentEach(geojson,callback){flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(!feature.geometry)return;var type=feature.geometry.type;if(type===\"Point\"||type===\"MultiPoint\")return;var previousCoords;var previousFeatureIndex=0;var previousMultiIndex=0;var prevGeomIndex=0;if(coordEach(feature,function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===undefined||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord;previousFeatureIndex=featureIndex;previousMultiIndex=multiPartIndexCoord;prevGeomIndex=geometryIndex;segmentIndex=0;return}var currentSegment=helpers.lineString([previousCoords,currentCoord],feature.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===false)return false;segmentIndex++;previousCoords=currentCoord})===false)return false})}function segmentReduce(geojson,callback,initialValue){var previousValue=initialValue;var started=false;segmentEach(geojson,function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){if(started===false&&initialValue===undefined)previousValue=currentSegment;else previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex);started=true});return previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error(\"geojson is required\");flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){if(feature.geometry===null)return;var type=feature.geometry.type;var coords=feature.geometry.coordinates;switch(type){case\"LineString\":if(callback(feature,featureIndex,multiFeatureIndex,0,0)===false)return false;break;case\"Polygon\":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++){if(callback(helpers.lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex)===false)return false}break}})}function lineReduce(geojson,callback,initialValue){var previousValue=initialValue;lineEach(geojson,function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentLine;else previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)});return previousValue}function findSegment(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error(\"options is invalid\");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var segmentIndex=options.segmentIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case\"FeatureCollection\":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case\"Feature\":properties=properties||geojson.properties;geometry=geojson.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":geometry=geojson;break;default:throw new Error(\"geojson is invalid\")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case\"Point\":case\"MultiPoint\":return null;case\"LineString\":if(segmentIndex<0)segmentIndex=coords.length+segmentIndex-1;return helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case\"Polygon\":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[geometryIndex].length+segmentIndex-1;return helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case\"MultiLineString\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case\"MultiPolygon\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error(\"geojson is invalid\")}function findPoint(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error(\"options is invalid\");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var coordIndex=options.coordIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case\"FeatureCollection\":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case\"Feature\":properties=properties||geojson.properties;geometry=geojson.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":geometry=geojson;break;default:throw new Error(\"geojson is invalid\")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case\"Point\":return helpers.point(coords,properties,options);case\"MultiPoint\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;return helpers.point(coords[multiFeatureIndex],properties,options);case\"LineString\":if(coordIndex<0)coordIndex=coords.length+coordIndex;return helpers.point(coords[coordIndex],properties,options);case\"Polygon\":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(coordIndex<0)coordIndex=coords[geometryIndex].length+coordIndex;return helpers.point(coords[geometryIndex][coordIndex],properties,options);case\"MultiLineString\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex].length+coordIndex;return helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case\"MultiPolygon\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex;return helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error(\"geojson is invalid\")}exports.coordEach=coordEach;exports.coordReduce=coordReduce;exports.propEach=propEach;exports.propReduce=propReduce;exports.featureEach=featureEach;exports.featureReduce=featureReduce;exports.coordAll=coordAll;exports.geomEach=geomEach;exports.geomReduce=geomReduce;exports.flattenEach=flattenEach;exports.flattenReduce=flattenReduce;exports.segmentEach=segmentEach;exports.segmentReduce=segmentReduce;exports.lineEach=lineEach;exports.lineReduce=lineReduce;exports.findSegment=findSegment;exports.findPoint=findPoint});unwrapExports(meta);var meta_1=meta.coordEach;var meta_2=meta.coordReduce;var meta_3=meta.propEach;var meta_4=meta.propReduce;var meta_5=meta.featureEach;var meta_6=meta.featureReduce;var meta_7=meta.coordAll;var meta_8=meta.geomEach;var meta_9=meta.geomReduce;var meta_10=meta.flattenEach;var meta_11=meta.flattenReduce;var meta_12=meta.segmentEach;var meta_13=meta.segmentReduce;var meta_14=meta.lineEach;var meta_15=meta.lineReduce;var meta_16=meta.findSegment;var meta_17=meta.findPoint;var lineSegment_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function lineSegment(geojson){if(!geojson){throw new Error(\"geojson is required\")}var results=[];meta.flattenEach(geojson,function(feature){lineSegmentFeature(feature,results)});return helpers.featureCollection(results)}function lineSegmentFeature(geojson,results){var coords=[];var geometry=geojson.geometry;if(geometry!==null){switch(geometry.type){case\"Polygon\":coords=invariant.getCoords(geometry);break;case\"LineString\":coords=[invariant.getCoords(geometry)]}coords.forEach(function(coord){var segments=createSegments(coord,geojson.properties);segments.forEach(function(segment){segment.id=results.length;results.push(segment)})})}}function createSegments(coords,properties){var segments=[];coords.reduce(function(previousCoords,currentCoords){var segment=helpers.lineString([previousCoords,currentCoords],properties);segment.bbox=bbox(previousCoords,currentCoords);segments.push(segment);return currentCoords});return segments}function bbox(coords1,coords2){var x1=coords1[0];var y1=coords1[1];var x2=coords2[0];var y2=coords2[1];var west=x1<x2?x1:x2;var south=y1<y2?y1:y2;var east=x1>x2?x1:x2;var north=y1>y2?y1:y2;return[west,south,east,north]}exports.default=lineSegment});unwrapExports(lineSegment_1);var quickselect=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){function quickselect(arr,k,left,right,compare){quickselectStep(arr,k,left||0,right||arr.length-1,compare||defaultCompare)}function quickselectStep(arr,k,left,right,compare){while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=.5*Math.exp(2*z/3);var sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare)}var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0){i++}while(compare(arr[j],t)>0){j--}}if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right)}if(j<=k)left=j+1;if(k<=j)right=j-1}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}return quickselect})});var _rbush_2_0_2_rbush=rbush;var default_1=rbush;function rbush(maxEntries,format){if(!(this instanceof rbush))return new rbush(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(format){this._initFormat(format)}this.clear()}rbush.prototype={all:function all(){return this._all(this.data,[])},search:function search(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child)}}node=nodesToSearch.pop()}return result},collides:function collides(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return false;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return false},load:function load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}return this},insert:function insert(item){if(item)this._insert(item,this.data.height-1);return this},clear:function clear(){this.data=createNode([]);return this},remove:function remove(item,equalsFn){if(!item)return this;var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else if(parent){i++;node=parent.children[i];goingUp=false}else node=null}return this},toBBox:function toBBox(item){return item},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(data){this.data=data;return this},_all:function _all(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,node.children);else nodesToSearch.push.apply(nodesToSearch,node.children);node=nodesToSearch.pop()}return result},_build:function _build(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function _chooseSubtree(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level)break;minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child);enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}node=targetNode||node.children[0]}return node},_insert:function _insert(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else break}this._adjustParentBBoxes(bbox,insertPath,level)},_split:function _split(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode)},_splitRoot:function _splitRoot(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index},_chooseSplitAxis:function _chooseSplitAxis(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX)},_allDistMargin:function _allDistMargin(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function _adjustParentBBoxes(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox)}},_condense:function _condense(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else this.clear()}else calcBBox(path[i],this.toBBox)}},_initFormat:function _initFormat(format){var compareArr=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",compareArr.join(format[0]));this.compareMinY=new Function(\"a\",\"b\",compareArr.join(format[1]));this.toBBox=new Function(\"a\",\"return {minX: a\"+format[0]+\", minY: a\"+format[1]+\", maxX: a\"+format[2]+\", maxY: a\"+format[3]+\"};\")}};function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i}return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k,child;i<p;i++){child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right)}}_rbush_2_0_2_rbush.default=default_1;var bbox_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function bbox(geojson){var result=[Infinity,Infinity,-Infinity,-Infinity];meta.coordEach(geojson,function(coord){if(result[0]>coord[0]){result[0]=coord[0]}if(result[1]>coord[1]){result[1]=coord[1]}if(result[2]<coord[0]){result[2]=coord[0]}if(result[3]<coord[1]){result[3]=coord[1]}});return result}exports.default=bbox});unwrapExports(bbox_1);var turfBBox=bbox_1.default;var featureEach=meta.featureEach;var coordEach=meta.coordEach;var polygon=helpers.polygon;var featureCollection=helpers.featureCollection;function geojsonRbush(maxEntries){var tree=_rbush_2_0_2_rbush(maxEntries);tree.insert=function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid feature\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.insert.call(this,feature)};tree.load=function(features){var load=[];if(Array.isArray(features)){features.forEach(function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid features\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}else{featureEach(features,function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid features\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}return _rbush_2_0_2_rbush.prototype.load.call(this,load)};tree.remove=function(feature,equals){if(feature.type!==\"Feature\")throw new Error(\"invalid feature\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.remove.call(this,feature,equals)};tree.clear=function(){return _rbush_2_0_2_rbush.prototype.clear.call(this)};tree.search=function(geojson){var features=_rbush_2_0_2_rbush.prototype.search.call(this,this.toBBox(geojson));return featureCollection(features)};tree.collides=function(geojson){return _rbush_2_0_2_rbush.prototype.collides.call(this,this.toBBox(geojson))};tree.all=function(){var features=_rbush_2_0_2_rbush.prototype.all.call(this);return featureCollection(features)};tree.toJSON=function(){return _rbush_2_0_2_rbush.prototype.toJSON.call(this)};tree.fromJSON=function(json){return _rbush_2_0_2_rbush.prototype.fromJSON.call(this,json)};tree.toBBox=function(geojson){var bbox;if(geojson.bbox)bbox=geojson.bbox;else if(Array.isArray(geojson)&&geojson.length===4)bbox=geojson;else if(Array.isArray(geojson)&&geojson.length===6)bbox=[geojson[0],geojson[1],geojson[3],geojson[4]];else if(geojson.type===\"Feature\")bbox=turfBBox(geojson);else if(geojson.type===\"FeatureCollection\")bbox=turfBBox(geojson);else throw new Error(\"invalid geojson\");return{minX:bbox[0],minY:bbox[1],maxX:bbox[2],maxY:bbox[3]}};return tree}var _geojsonRbush_3_1_2_geojsonRbush=geojsonRbush;var default_1$1=geojsonRbush;_geojsonRbush_3_1_2_geojsonRbush.default=default_1$1;var lineIntersect_1=createCommonjsModule(function(module,exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,\"__esModule\",{value:true});var line_segment_1=__importDefault(lineSegment_1);var geojson_rbush_1=__importDefault(_geojsonRbush_3_1_2_geojsonRbush);function lineIntersect(line1,line2){var unique={};var results=[];if(line1.type===\"LineString\"){line1=helpers.feature(line1)}if(line2.type===\"LineString\"){line2=helpers.feature(line2)}if(line1.type===\"Feature\"&&line2.type===\"Feature\"&&line1.geometry!==null&&line2.geometry!==null&&line1.geometry.type===\"LineString\"&&line2.geometry.type===\"LineString\"&&line1.geometry.coordinates.length===2&&line2.geometry.coordinates.length===2){var intersect=intersects(line1,line2);if(intersect){results.push(intersect)}return helpers.featureCollection(results)}var tree=geojson_rbush_1.default();tree.load(line_segment_1.default(line2));meta.featureEach(line_segment_1.default(line1),function(segment){meta.featureEach(tree.search(segment),function(match){var intersect=intersects(segment,match);if(intersect){var key=invariant.getCoords(intersect).join(\",\");if(!unique[key]){unique[key]=true;results.push(intersect)}}})});return helpers.featureCollection(results)}function intersects(line1,line2){var coords1=invariant.getCoords(line1);var coords2=invariant.getCoords(line2);if(coords1.length!==2){throw new Error(\"<intersects> line1 must only contain 2 coordinates\")}if(coords2.length!==2){throw new Error(\"<intersects> line2 must only contain 2 coordinates\")}var x1=coords1[0][0];var y1=coords1[0][1];var x2=coords1[1][0];var y2=coords1[1][1];var x3=coords2[0][0];var y3=coords2[0][1];var x4=coords2[1][0];var y4=coords2[1][1];var denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);var numeA=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3);var numeB=(x2-x1)*(y1-y3)-(y2-y1)*(x1-x3);if(denom===0){if(numeA===0&&numeB===0){return null}return null}var uA=numeA/denom;var uB=numeB/denom;if(uA>=0&&uA<=1&&uB>=0&&uB<=1){var x=x1+uA*(x2-x1);var y=y1+uA*(y2-y1);return helpers.point([x,y])}return null}exports.default=lineIntersect});unwrapExports(lineIntersect_1);var nearestPointOnLine_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,\"__esModule\",{value:true});function nearestPointOnLine(lines,pt,options){if(options===void 0){options={}}var closestPt=helpers.point([Infinity,Infinity],{dist:Infinity});var length=0;meta.flattenEach(lines,function(line){var coords=invariant.getCoords(line);for(var i=0;i<coords.length-1;i++){var start=helpers.point(coords[i]);start.properties.dist=distance_1.default(pt,start,options);var stop_1=helpers.point(coords[i+1]);stop_1.properties.dist=distance_1.default(pt,stop_1,options);var sectionLength=distance_1.default(start,stop_1,options);var heightDistance=Math.max(start.properties.dist,stop_1.properties.dist);var direction=bearing_1.default(start,stop_1);var perpendicularPt1=destination_1.default(pt,heightDistance,direction+90,options);var perpendicularPt2=destination_1.default(pt,heightDistance,direction-90,options);var intersect=lineIntersect_1.default(helpers.lineString([perpendicularPt1.geometry.coordinates,perpendicularPt2.geometry.coordinates]),helpers.lineString([start.geometry.coordinates,stop_1.geometry.coordinates]));var intersectPt=null;if(intersect.features.length>0){intersectPt=intersect.features[0];intersectPt.properties.dist=distance_1.default(pt,intersectPt,options);intersectPt.properties.location=length+distance_1.default(start,intersectPt,options)}if(start.properties.dist<closestPt.properties.dist){closestPt=start;closestPt.properties.index=i;closestPt.properties.location=length}if(stop_1.properties.dist<closestPt.properties.dist){closestPt=stop_1;closestPt.properties.index=i+1;closestPt.properties.location=length+sectionLength}if(intersectPt&&intersectPt.properties.dist<closestPt.properties.dist){closestPt=intersectPt;closestPt.properties.index=i}length+=sectionLength}});return closestPt}exports.default=nearestPointOnLine});var nearestPointOnLine=unwrapExports(nearestPointOnLine_1);var freeGlobal=(typeof global===\"undefined\"?\"undefined\":_typeof(global))==\"object\"&&global&&global.Object===Object&&global;var freeSelf=(typeof self===\"undefined\"?\"undefined\":_typeof(self))==\"object\"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function(\"return this\")();var _Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\";var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&_typeof(value)==\"object\"}var symbolTag=\"[object Symbol]\";function isSymbol(value){return _typeof(value)==\"symbol\"||isObjectLike(value)&&baseGetTag(value)==symbolTag}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value==\"string\"){return value}if(isArray(value)){return arrayMap(value,baseToString)+\"\"}if(isSymbol(value)){return symbolToString?symbolToString.call(value):\"\"}var result=value+\"\";return result==\"0\"&&1/value==-INFINITY?\"-0\":result}function isObject(value){var type=_typeof(value);return value!=null&&(type==\"object\"||type==\"function\")}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root[\"__core-js_shared__\"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||\"\");return uid?\"Symbol(src)_1.\"+uid:\"\"}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp(\"^\"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var WeakMap=getNative(root,\"WeakMap\");function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=_typeof(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type==\"number\"||type!=\"symbol\"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function eq(value,other){return value===other||value!==value&&other!==other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value==\"number\"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var objectProto$3=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor==\"function\"&&Ctor.prototype||objectProto$3;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag=\"[object Arguments]\";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$4=Object.prototype;var hasOwnProperty$2=objectProto$4.hasOwnProperty;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};function stubFalse(){return false}var freeExports=(typeof exports===\"undefined\"?\"undefined\":_typeof(exports))==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module===\"undefined\"?\"undefined\":_typeof(module))==\"object\"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1=\"[object Arguments]\",arrayTag=\"[object Array]\",boolTag=\"[object Boolean]\",dateTag=\"[object Date]\",errorTag=\"[object Error]\",funcTag$1=\"[object Function]\",mapTag=\"[object Map]\",numberTag=\"[object Number]\",objectTag=\"[object Object]\",regexpTag=\"[object RegExp]\",setTag=\"[object Set]\",stringTag=\"[object String]\",weakMapTag=\"[object WeakMap]\";var arrayBufferTag=\"[object ArrayBuffer]\",dataViewTag=\"[object DataView]\",float32Tag=\"[object Float32Array]\",float64Tag=\"[object Float64Array]\",int8Tag=\"[object Int8Array]\",int16Tag=\"[object Int16Array]\",int32Tag=\"[object Int32Array]\",uint8Tag=\"[object Uint8Array]\",uint8ClampedTag=\"[object Uint8ClampedArray]\",uint16Tag=\"[object Uint16Array]\",uint32Tag=\"[object Uint32Array]\";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=(typeof exports===\"undefined\"?\"undefined\":_typeof(exports))==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&(typeof module===\"undefined\"?\"undefined\":_typeof(module))==\"object\"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$3.call(value,key))&&!(skipIndexes&&(key==\"length\"||isBuff&&(key==\"offset\"||key==\"parent\")||isType&&(key==\"buffer\"||key==\"byteLength\"||key==\"byteOffset\")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$4.call(object,key)&&key!=\"constructor\"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=_typeof(value);if(type==\"number\"||type==\"symbol\"||type==\"boolean\"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var nativeCreate=getNative(Object,\"create\");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED=\"__lodash_hash_undefined__\";var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$5.call(data,key)?data[key]:undefined}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$6.call(data,key)}var HASH_UNDEFINED$1=\"__lodash_hash_undefined__\";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype[\"delete\"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype[\"delete\"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,\"Map\");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=_typeof(value);return type==\"string\"||type==\"number\"||type==\"symbol\"||type==\"boolean\"?value!==\"__proto__\":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key==\"string\"?\"string\":\"hash\"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)[\"delete\"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype[\"delete\"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT=\"Expected a function\";function memoize(func,resolver){if(typeof func!=\"function\"||resolver!=null&&typeof resolver!=\"function\"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push(\"\")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,\"$1\"):number||match)});return result});function toString(value){return value==null?\"\":baseToString(value)}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var INFINITY$1=1/0;function toKey(value){if(typeof value==\"string\"||isSymbol(value)){return value}var result=value+\"\";return result==\"0\"&&1/value==-INFINITY$1?\"-0\":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data[\"delete\"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype[\"delete\"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$9=Object.prototype;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)})};function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,\"DataView\");var Promise=getNative(root,\"Promise\");var Set=getNative(root,\"Set\");var mapTag$1=\"[object Map]\",objectTag$1=\"[object Object]\",promiseTag=\"[object Promise]\",setTag$1=\"[object Set]\",weakMapTag$1=\"[object WeakMap]\";var dataViewTag$1=\"[object DataView]\";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag$1?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):\"\";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var Uint8Array=root.Uint8Array;var HASH_UNDEFINED$2=\"__lodash_hash_undefined__\";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack[\"delete\"](array);stack[\"delete\"](other);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1=\"[object Boolean]\",dateTag$1=\"[object Date]\",errorTag$1=\"[object Error]\",mapTag$2=\"[object Map]\",numberTag$1=\"[object Number]\",regexpTag$1=\"[object RegExp]\",setTag$2=\"[object Set]\",stringTag$1=\"[object String]\",symbolTag$1=\"[object Symbol]\";var arrayBufferTag$1=\"[object ArrayBuffer]\",dataViewTag$2=\"[object DataView]\";var symbolProto$1=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$2:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$1:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+object,+other);case errorTag$1:return object.name==other.name&&object.message==other.message;case regexpTag$1:case stringTag$1:return object==other+\"\";case mapTag$2:var convert=mapToArray;case setTag$2:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$1;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$1;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack[\"delete\"](object);return result;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$a=Object.prototype;var hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key==\"constructor\")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&\"constructor\"in object&&\"constructor\"in other&&!(typeof objCtor==\"function\"&&objCtor instanceof objCtor&&typeof othCtor==\"function\"&&othCtor instanceof othCtor)){result=false}}stack[\"delete\"](object);stack[\"delete\"](other);return result}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\";var objectProto$b=Object.prototype;var hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othTag=othIsArr?arrayTag$1:getTag$1(other);objTag=objTag==argsTag$2?objectTag$2:objTag;othTag=othTag==argsTag$2?objectTag$2:othTag;var objIsObj=objTag==objectTag$2,othIsObj=othTag==objectTag$2,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){var objIsWrapped=objIsObj&&hasOwnProperty$8.call(object,\"__wrapped__\"),othIsWrapped=othIsObj&&hasOwnProperty$8.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value==\"function\"){return value}if(value==null){return identity}if(_typeof(value)==\"object\"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);function castFunction(value){return typeof value==\"function\"?value:identity}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee))}function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}function getMiddleLatLng(marker1,marker2){var p1=marker1.getCenter();var p2=marker2.getCenter();return p1.divideBy(2,false).add(p2.divideBy(2,false),false)}var callbacks=[];document.addEventListener(\"keydown\",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function onKeyDown(cb){if(callbacks.indexOf(cb)<0){callbacks.push(cb)}}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var isMobile=AMap.Browser.mobile;var amplify=1;var createOptions={zIndex:50,strokeColor:\"#FF33FF\",strokeOpacity:.2,strokeWeight:6,strokeStyle:\"solid\",bubble:false,fillColor:\"#1791fc\",fillOpacity:.4};var defaultOpt={createOptions:createOptions,adsorbPolygons:[],adsorb:true,editable:false,drawable:false,overlap:false,adsorbDistance:{line:10,point:15},editOptions:{fillOpacity:.3,cursor:\"pointer\",strokeWeight:4,strokeStyle:\"solid\",strokeColor:\"#1791fc\",strokeOpacity:.8}};var PolygonEditor=function(_AMap$Event){_inherits(PolygonEditor,_AMap$Event);function PolygonEditor(map,target){var _this;var opt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolygonEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolygonEditor).call(this));_this.movePoint={};_this._editing=false;_this.className=\"PolygonEditor\";_this.GRAPH_NAME=\"Polygon\";_this.onAddPick=_this.onAddPick.bind(_assertThisInitialized(_this));_this.onAddingMouseMove=_this.onAddingMouseMove.bind(_assertThisInitialized(_this));_this.onBreakPointClick=_this.onBreakPointClick.bind(_assertThisInitialized(_this));_this.onEditMouseMove=_this.onEditMouseMove.bind(_assertThisInitialized(_this));_this.open=_this.open.bind(_assertThisInitialized(_this));_this.close=_this.close.bind(_assertThisInitialized(_this));_this.OPEN_STATUS=false;_this._opt=AMap.extend(defaultOpt,opt,{bubble:false});var _this$_opt=_this._opt,originPaths=_this$_opt.paths,adsorbPolygons=_this$_opt.adsorbPolygons,adsorb=_this$_opt.adsorb,editable=_this$_opt.editable,drawable=_this$_opt.drawable,adsorbDistance=_this$_opt.adsorbDistance,overlap=_this$_opt.overlap;if(!map)return _possibleConstructorReturn(_this);_this.map=map;_this.drawable=drawable;_this.editable=editable;_this.adsorb=adsorb;_this.adsorbDistance=adsorbDistance;_this.overlap=overlap;_this.adsorbPolygons=adsorbPolygons||[];_this.originPaths=originPaths;_this.editingVertexMarkerList=[];_this.editingMidTipMarkerList=[];_this.addingPoly=null;_this.showTipMarker=true;_this.editingPolyObj=target&&{poly:target}||null;_this.defaultMarkerOpt={zIndex:999998,bubble:false,cursor:\"pointer\",clickable:true,draggable:true,radius:isMobile?6:6,strokeColor:\"#1791fc\",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.2:1,fillColor:\"white\",fillOpacity:1,innerOverlay:true};_this.midControlPoint=AMap.extend({zIndex:999999,bubble:false,cursor:\"pointer\",clickable:true,radius:6,strokeColor:\"white\",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1},opt.midControlPoint||{});_this.controlPoint=AMap.extend({draggable:true,cursor:\"pointer\",bubble:false,zIndex:999999},opt.controlPoint||{});_this.movePoint=AMap.extend({bubble:true},opt.controlPoint||{});_this.defaultCursor=map.getDefaultCursor();onKeyDown(_this.onHandleKeydown.bind(_assertThisInitialized(_this)));return _this}_createClass(PolygonEditor,[{key:\"onMapDblclick\",value:function onMapDblclick(e){if(this.drawable){this.finishAddingPolygon(false,e)}}},{key:\"onMapRightclick\",value:function onMapRightclick(e){if(this.drawable){this.finishAddingPolygon(true,e)}}},{key:\"innerOpen\",value:function innerOpen(){var _this2=this;if(!this.OPEN_STATUS){this.OPEN_STATUS=true;var markerNames=[\"mvPickMarker\"];if(this.showTipMarker){markerNames.forEach(function(name){_this2.mvPickMarker=_this2.createMarker(AMap.extend({center:new AMap.LngLat(0,0),bubble:true},_this2.movePoint));_this2[\"mvPickMarker\"].hide();_this2.map.add(_this2[name])})}var opt=AMap.extend({},this.midControlPoint,{zIndex:999990,center:new AMap.LngLat(0,0),bubble:false});this.lineBreakMarker=this.createMarker(opt);this.lineBreakMarker.hide();this.map.add(this.lineBreakMarker);this._mapStatusDb=this.map[\"getStatus\"]()[\"doubleClickZoom\"]}}},{key:\"onBreakPointClick\",value:function onBreakPointClick(e){var _this$editingPolyObj=this.editingPolyObj,breakPoint=_this$editingPolyObj.breakPoint,poly=_this$editingPolyObj.poly,breakIndex=_this$editingPolyObj.breakIndex;var path=poly.getPath();var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);this.emit(\"addnode\",{target:this.getTarget(),pixel:e.pixel,lnglat:e.lnglat});this.highLightEditPoly()}},{key:\"editPoly\",value:function editPoly(){this.mvPickMarker.hide();this.lineBreakMarker.show();this.chosedPoint=null;var poly=this.editingPolyObj.poly;if(poly){var path=poly.getPath();this.editingPolyObj.origin_path=path;var opt=poly.getOptions();delete opt.path;delete opt.map;this.editingPolyObj.origin_options=opt;this.highLightEditPoly()}}},{key:\"setLayerOptions\",value:function setLayerOptions(layer,changeOpt){var opt=layer.getOptions();var _opt=AMap.extend({},opt,changeOpt);layer.setOptions(_opt)}},{key:\"deleteChosedItem\",value:function deleteChosedItem(e){if(this.editingPolyObj){if(this.chosedPoint){var _this$chosedPoint=this.chosedPoint,marker=_this$chosedPoint.marker,pointIndex=_this$chosedPoint.pointIndex,_point=_this$chosedPoint.point,path=_this$chosedPoint.path,poly=_this$chosedPoint.poly,lnglat=_this$chosedPoint.lnglat,pixel=_this$chosedPoint.pixel;if(path.length>3){path.splice(pointIndex,1);poly.setPath(path);this.map.remove(marker);this.emit(\"removenode\",{target:this.getTarget(),lnglat:_point,pixel:pixel});this.highLightEditPoly();this.onEditMouseMove(e)}else{var _poly=this.editingPolyObj&&this.editingPolyObj.poly;if(_poly){_poly.setPath([]);_poly.remove()}this.setTarget(null)}}}}},{key:\"highLightEditPoly\",value:function highLightEditPoly(){var _this3=this;var poly=this.editingPolyObj.poly;var style=this._opt.editOptions||{fillColor:\"#f00\",fillOpacity:1};var opt=AMap.extend({},this._opt,style);poly.setOptions(opt);var path=poly.getPath();var pointOnClick=function pointOnClick(chosedObj){var marker=chosedObj.marker;var _markerOpt=_this3.getMergeMkrOptions(_this3.controlPoint);var chosedOpt=_this3.getMergeMkrOptions({radius:3});if(_this3.chosedPoint){var cm=_this3.chosedPoint.marker;cm.setOptions(_markerOpt)}marker.setOptions(chosedOpt);_this3.chosedPoint=chosedObj};this.editingVertexMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingVertexMarkerList=[];this.editingVertexMarkerList=map(path,function(pt,pointIndex){var opt=AMap.extend({},_this3.controlPoint,{center:pt});var m=_this3.createMarker(opt);_this3.map.add(m);m.on(\"click\",function(e){pointOnClick({lnglat:e.lnglat,pixel:e.pixel,marker:m,pointIndex:pointIndex,point:pt,path:path,poly:poly});_this3.deleteChosedItem(e)});m.on(\"dragging\",function(e){_this3.lineBreakMarker.hide();_this3.clearTipMarkers();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));path[pointIndex]=ll;poly.setPath(path)});m.on(\"dragend\",function(e){_this3.highLightEditPoly();_this3.emit(\"adjust\",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});return m});this.editingMidTipMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingMidTipMarkerList=[];var _loop=function _loop(i){var cur=path[i];var next=i===path.length-1?path[0]:path[i+1];var lng=(cur.lng+next.lng)/2;var lat=(cur.lat+next.lat)/2;var midll=new AMap.LngLat(lng,lat);var opt=AMap.extend({},_this3.midControlPoint,{zIndex:999997,center:midll,bubble:false,draggable:true});var m=_this3.createMarker(opt);_this3.map.add(m);m.on(\"dragstart\",function(e){var poly=_this3.editingPolyObj.poly;var breakPoint=midll;var breakIndex=i;var path=AMap.Util.parseLngLatData(poly.getPath());var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);var option=_this3.getMergeMkrOptions(_this3.controlPoint);m.setOptions(option)});m.on(\"dragging\",function(e){var path=poly.getPath();_this3.lineBreakMarker.hide();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));var pointIndex=i+1;path[pointIndex]=ll;poly.setPath(path)});m.on(\"dragend\",function(e){_this3.emit(\"addnode\",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat});_this3.highLightEditPoly()});_this3.editingMidTipMarkerList.push(m)};for(var i=0;i<path.length;i++){_loop(i)}}},{key:\"getIcon\",value:function getIcon(){var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[10,10];var icon=new AMap.Icon({size:new AMap.Size(size[0],size[1]),image:\"http://47.93.246.7/api/static/images/dd-via.png\",imageSize:new AMap.Size(size[0],size[1])});return icon}},{key:\"getMergeMkrOptions\",value:function getMergeMkrOptions(opt){var _opt=AMap.extend({},this.defaultMarkerOpt,opt);_opt.radius*=amplify;return _opt}},{key:\"createMarker\",value:function createMarker(opt){var _opt=this.getMergeMkrOptions(opt);return new AMap.CircleMarker(_opt)}},{key:\"onAddPick\",value:function onAddPick(e){if(!this.drawable)return;var adsorbPt=isMobile?e.lnglat:this.mvPickMarker.getCenter();var insertIndex=0;if(!this.addingPoly){var _path=[[adsorbPt.lng,adsorbPt.lat],[adsorbPt.lng,adsorbPt.lat]];if(isMobile){_path.pop()}var opt=AMap.extend({},this._opt,{bubble:true});this.addingPoly=createPolygon(_path,opt.editOptions);this.map.add(this.addingPoly);this._mapStatusDb=this.map.getStatus().doubleClickZoom;this.map[\"setStatus\"]({doubleClickZoom:false})}else{var arr=this.addingPoly[\"getPath\"]();if(!isMobile){arr.pop();arr.push(adsorbPt)}arr.push(adsorbPt);insertIndex=arr.length-2;this.addingPoly[\"setPath\"](arr)}this.emit(\"addnode\",{target:this.addingPoly,pixel:e.pixel,lnglat:e.lnglat})}},{key:\"getPointOnLine\",value:function getPointOnLine(_paths,ll){if(this.GRAPH_NAME===\"Polygon\"){_paths.forEach(function(path){if(path.length>2&&path[0]!==path[path.length-1]){path.push(path[0])}})}var mvPt=[ll.lng,ll.lat];var lines=helpers_14(_paths);var pt=helpers_7(mvPt);var _nearestPointOnLine=nearestPointOnLine(lines,pt,{units:\"kilometers\"}),linePt=_nearestPointOnLine.geometry.coordinates,properties=_nearestPointOnLine.properties;return{point:linePt,properties:properties}}},{key:\"onAddingMouseMove\",value:function onAddingMouseMove(e){if(!this.drawable)return;var ll=e2ll(e);var _paths=this.getPath();var ajustPt=this.getAdjustedPoint(_paths,ll);if(this.mvPickMarker){this.mvPickMarker.setCenter(ajustPt);if(ajustPt==ll){this.mvPickMarker.hide()}else{this.mvPickMarker.show()}}if(this.addingPoly){var arr=this.addingPoly[\"getPath\"]();arr.pop();arr.push(ajustPt);this.addingPoly[\"setPath\"](arr)}}},{key:\"getPolyArrPath\",value:function getPolyArrPath(poly){var path=poly.getPath();var _path=map(path,function(loc){return[loc.lng,loc.lat]});return _path}},{key:\"onEditMouseMove\",value:function onEditMouseMove(e){}},{key:\"getAdjustedPoint\",value:function getAdjustedPoint(_paths,ll){var ajustPt=ll;if(this.adsorb&&_paths&&_paths.length>0){var mvPt=[ll.lng,ll.lat];var allPoints=_paths.reduce(function(pre,n){return pre.concat(n)});var _this$getPointOnLine=this.getPointOnLine(_paths,ll),linePt=_this$getPointOnLine.point;var _this$adsorbDistance=this.adsorbDistance,lAbPx=_this$adsorbDistance.line,vAbPx=_this$adsorbDistance.point;var nearVPt=getNearestPoint(mvPt,allPoints);if(!nearVPt){return ajustPt}var vDist=getPixelDistance(this.map,[nearVPt.point,mvPt]);var linePtDist=getPixelDistance(this.map,[linePt,mvPt]);if(this.showTipMarker){var mvp=new AMap.LngLat(mvPt[0],mvPt[1]);this.mvPickMarker.setCenter(mvp)}if(vDist<vAbPx){var refLoc=new AMap.LngLat(nearVPt.point[0],nearVPt.point[1]);ajustPt=refLoc}else{if(linePtDist<lAbPx){var _refLoc=new AMap.LngLat(linePt[0],linePt[1]);ajustPt=_refLoc}}}return ajustPt}},{key:\"finishAddingPolygon\",value:function finishAddingPolygon(){var stripLast=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;if(this.addingPoly){var arr=this.addingPoly[\"getPath\"]();if(stripLast){if(!isMobile){arr.pop()}}else{arr.pop();if(!isMobile){arr.pop()}}if(arr.length>2){this.addingPoly[\"setPath\"](arr);var success=this.tailorPolygonOverlaps();if(success){this.emit(\"add\",{target:this.addingPoly,obj:this.addingPoly,lnglat:e.lnglat,pixel:e.pixel});this.editingPolyObj={poly:this.addingPoly};this.addingPoly=undefined;this.openEdit();this.editingPolyObj.origin_options=this._opt.createOptions}else{alert(\"您正在编辑的多边形不合规（边不能交叉），请重新添加\")}}else{this.cancel()}}if(this.addingPoly){this.drawable=false}else{this.emit(\"cancel\",{lnglat:e.lnglat,pixel:e.pixel})}}},{key:\"getClosePath\",value:function getClosePath(path){var last=path[path.length-1];if(last&&last!==path[0]){return path.concat([path[0]])}else{return path}}},{key:\"tailorPolygonOverlaps\",value:function tailorPolygonOverlaps(){return true}},{key:\"getPolygons\",value:function getPolygons(){return this.adsorbPolygons}},{key:\"getPath\",value:function getPath(){var _this4=this;var result=[];forEach(this.adsorbPolygons,function(p){if(!_this4.editingPolyObj){return}if(p===_this4.editingPolyObj.poly){return}result.push(p.getPath().map(function(loc){return[loc.lng,loc.lat]}))});return result}},{key:\"addAddListener\",value:function addAddListener(){this.map.on(\"click\",this.onAddPick);this.map.on(\"mousemove\",this.onAddingMouseMove);this.map.on(\"dblclick\",this.onMapDblclick);this.map.on(\"rightclick\",this.onMapRightclick)}},{key:\"removeAddListener\",value:function removeAddListener(){this.map.off(\"click\",this.onAddPick);this.map.off(\"mousemove\",this.onAddingMouseMove);this.map.off(\"dblclick\",this.onMapDblclick);this.map.off(\"rightclick\",this.onMapRightclick)}},{key:\"addEditListener\",value:function addEditListener(){this.map.on(\"mousemove\",this.onEditMouseMove)}},{key:\"removeEditListener\",value:function removeEditListener(){this.map.off(\"mousemove\",this.onEditMouseMove)}},{key:\"open\",value:function open(){if(this.editingPolyObj&&this.editingPolyObj.poly){this.openEdit()}else{this.openAdd()}}},{key:\"setTarget\",value:function setTarget(tar){this.close();this._opt.target=tar;this.editingPolyObj={poly:tar}}},{key:\"getTarget\",value:function getTarget(){return this.editingPolyObj&&this.editingPolyObj.poly}},{key:\"openAdd\",value:function openAdd(){this.innerOpen();this.closeEdit();this.drawable=true;this.map.setDefaultCursor(\"crosshair\");this.addAddListener();this.setAllBubble()}},{key:\"setAllBubble\",value:function setAllBubble(){this._oldBubble=this.map.getStatus().allBubble;this.map.setStatus({allBubble:true})}},{key:\"restoreBubble\",value:function restoreBubble(){this.map.setStatus({allBubble:this._oldBubble})}},{key:\"closeAdd\",value:function closeAdd(){this.drawable=false;this.clearAddingPolygon();this.removeAddListener()}},{key:\"openEdit\",value:function openEdit(){if(this.editable){return}this.innerOpen();this.closeAdd();this.clearAddingPolygon();this.editable=true;this.map.setDefaultCursor(this.defaultCursor);this.addEditListener();this.editPoly();this.setAllBubble()}},{key:\"closeEdit\",value:function closeEdit(){this.editable=false;this.clearEditingPolyStatus();this.removeEditListener();this.map.setDefaultCursor(this.defaultCursor)}},{key:\"clearAddingPolygon\",value:function clearAddingPolygon(){if(this.addingPoly){this.map.remove(this.addingPoly)}this.addingPoly=null}},{key:\"clearEditingPolyStatus\",value:function clearEditingPolyStatus(){var _this5=this;this.lineBreakMarker&&this.lineBreakMarker.hide();if(this.editingPolyObj&&this.editingPolyObj.poly){var _this$editingPolyObj2=this.editingPolyObj,poly=_this$editingPolyObj2.poly,origin_options=_this$editingPolyObj2.origin_options;if(poly){origin_options&&poly.setOptions(origin_options);delete poly.origin_options}}this.editingVertexMarkerList&&this.editingVertexMarkerList.forEach(function(mk){_this5.map.remove(mk)});this.editingVertexMarkerList=[];this.clearTipMarkers()}},{key:\"clearTipMarkers\",value:function clearTipMarkers(){var _this6=this;this.editingMidTipMarkerList&&this.editingMidTipMarkerList.forEach(function(mk){_this6.map.remove(mk)});this.editingMidTipMarkerList=[]}},{key:\"setAdsorbPolygons\",value:function setAdsorbPolygons(list){this.clearAdsorbPolygons();this.addAdsorbPolygons(list)}},{key:\"clearAdsorbPolygons\",value:function clearAdsorbPolygons(){this.adsorbPolygons=[]}},{key:\"addAdsorbPolygons\",value:function addAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}Array.prototype.push.apply(this.adsorbPolygons,list)}},{key:\"removeAdsorbPolygons\",value:function removeAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}for(var i=0,len=list.length;i<len;i++){var item=list[i];var index=this.adsorbPolygons.indexOf(item);if(index>=0){this.adsorbPolygons.splice(index,1)}}}},{key:\"close\",value:function close(){this.map.setDefaultCursor(this.defaultCursor);this.clearAddingPolygon();this.closeAdd();this.closeEdit();this.clearEditingPolyStatus();this.editingPolyObj={poly:this.editingPolyObj&&this.editingPolyObj.poly};this.lineBreakMarker&&this.map.remove(this.lineBreakMarker);this.lineBreakMarker=null;this.mvPickMarker&&this.map.remove(this.mvPickMarker);this.mvPickMarker=null;this.OPEN_STATUS=false;this.restoreBubble();this.emit(\"end\",{target:this.getTarget()})}},{key:\"onHandleKeydown\",value:function onHandleKeydown(e){if(e.key===\"Escape\"){this.cancel()}}},{key:\"cancel\",value:function cancel(){if(this.addingPoly){this.map.remove(this.addingPoly);this.addingPoly=undefined;this.emit(\"cancel\",{})}}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return PolygonEditor}(AMap.Event);__decorate([autobind],PolygonEditor.prototype,\"onMapDblclick\",null);__decorate([autobind],PolygonEditor.prototype,\"onMapRightclick\",null);var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);function PointList(){var _this;_classCallCheck(this,PointList);_this=_possibleConstructorReturn(this,_getPrototypeOf(PointList).apply(this,arguments));_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this))}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_possibleConstructorReturn(this,_getPrototypeOf(AbstractPointListNode).apply(this,arguments));_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_possibleConstructorReturn(this,_getPrototypeOf(Point).call(this));_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_possibleConstructorReturn(this,_getPrototypeOf(PointWithMarker).call(this));_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);var PolylinePoint=function(_AbstractPointListNod){_inherits(PolylinePoint,_AbstractPointListNod);function PolylinePoint(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylinePoint);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylinePoint).call(this));_this.map=map;_this.pos=pos;_this.editing=false;_this._opts=opts;_this.point=new Point(map,pos,opts);_this.middleFlag=false;_this.bindEvents();return _this}_createClass(PolylinePoint,[{key:\"bindEvents\",value:function bindEvents(){this.point.marker.on(\"dragstart\",this.handleHandleDragStart.bind(this));this.point.marker.on(\"dragend\",this.handleHandleDragEnd.bind(this));this.point.marker.on(\"dragging\",this.handleHandleDragging.bind(this));this.point.marker.on(\"click\",this.handleHandleClick.bind(this))}},{key:\"unbindEvents\",value:function unbindEvents(){this.point.marker.off(\"dragstart\",this.handleHandleDragStart.bind(this));this.point.marker.off(\"dragend\",this.handleHandleDragEnd.bind(this));this.point.marker.off(\"dragging\",this.handleHandleDragging.bind(this));this.point.marker.off(\"click\",this.handleHandleClick.bind(this))}},{key:\"handleHandleDragStart\",value:function handleHandleDragStart(){this.editing=true}},{key:\"handleHandleClick\",value:function handleHandleClick(e){if(!this.middleFlag){this.destroy();this.emit(ListEvent.removeNode,e)}}},{key:\"handleHandleDragging\",value:function handleHandleDragging(){if(!this.middleFlag){if(this.prev&&this.prev.prev){var newPos=getMiddleLatLng(this.point.marker,this.prev.prev.point.marker);this.prev.point.marker.setCenter(newPos)}if(this.next&&this.next.next){var _newPos=getMiddleLatLng(this.point.marker,this.next.next.point.marker);this.next.point.marker.setCenter(_newPos)}}this.emit(ListEvent.change)}},{key:\"handleHandleDragEnd\",value:function handleHandleDragEnd(e){this.editing=false;if(this.middleFlag&&this.list){this.setMiddle(false);var prevPos=getMiddleLatLng(this.point.marker,this.prev.point.marker);var nextPos=getMiddleLatLng(this.point.marker,this.next.point.marker);var prev=new PolylinePoint(this.map,prevPos,this._opts);var next=new PolylinePoint(this.map,nextPos,this._opts);this.list.insertBefore(prev,this);this.list.insertAfter(next,this);prev.show();next.show();prev.setMiddle(true);next.setMiddle(true);this.emit(ListEvent.addNode,e)}else{this.emit(ListEvent.adjust,e)}}},{key:\"destroy\",value:function destroy(){var _a,_b;this.unbindEvents();if(this.middleFlag){if(this.list){this.list.remove(this)}this.point.remove()}else{(_a=this.prev)===null||_a===void 0?void 0:_a.destroy();(_b=this.next)===null||_b===void 0?void 0:_b.destroy();if(this.list){var prev=this.prev;var next=this.next;this.list.remove(this);if(prev&&next){var newPos=getMiddleLatLng(prev.point.marker,next.point.marker);var newMiddleMarker=new PolylinePoint(this.map,newPos,this._opts);newMiddleMarker.setMiddle(true);newMiddleMarker.show();this.list.insertAfter(newMiddleMarker,prev)}}this.point.remove()}}},{key:\"show\",value:function show(){this.point.show()}},{key:\"hide\",value:function hide(){this.point.hide()}},{key:\"setMiddle\",value:function setMiddle(middle){this.middleFlag=middle;this.point.setMiddle(middle)}}]);return PolylinePoint}(AbstractPointListNode);var PolylineCreator=function(_AMap$Event){_inherits(PolylineCreator,_AMap$Event);function PolylineCreator(_map){var _this;_classCallCheck(this,PolylineCreator);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylineCreator).call(this));_this._map=_map;_this._onMapClick=_this._onMapClick.bind(_assertThisInitialized(_this));_this._onMapMouseMove=_this._onMapMouseMove.bind(_assertThisInitialized(_this));_this._onMapDbClick=_this._onMapDbClick.bind(_assertThisInitialized(_this));_this._onMapRightClick=_this._onMapRightClick.bind(_assertThisInitialized(_this));return _this}_createClass(PolylineCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat;var resolution=this._map.getResolution();var pos1=center.offset(resolution*-30,0).toJSON();var pos2=center.offset(resolution*30,0).toJSON();var path=[pos1,pos2];this.emit(\"create\",{path:path});this.close()}},{key:\"_onMapMouseMove\",value:function _onMapMouseMove(){}},{key:\"_onMapDbClick\",value:function _onMapDbClick(){}},{key:\"_onMapRightClick\",value:function _onMapRightClick(){}}]);return PolylineCreator}(AMap.Event);var PolylineEditor=function(_AMap$Event){_inherits(PolylineEditor,_AMap$Event);function PolylineEditor(_map,_poly){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylineEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolylineEditor).call(this));_this._map=_map;_this._defaultStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeColor:\"#3366FF\",strokeOpacity:1,strokeWeight:6,strokeStyle:\"solid\",lineJoin:\"round\",lineCap:\"round\"};_this._selectStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeWeight:4,strokeStyle:\"solid\",strokeDasharray:[10,10],strokeColor:\"#1791fc\",strokeOpacity:.8,lineJoin:\"round\",lineCap:\"round\"};_this._markerOptions={};_this._middleMarkerOptions={};_this.className=\"AMap.PolylineEditor\";_this._editing=false;_this.handleAddNode=_this.handleAddNode.bind(_assertThisInitialized(_this));_this.handleRemoveNode=_this.handleRemoveNode.bind(_assertThisInitialized(_this));_this.handleAdjust=_this.handleAdjust.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this._creator=new PolylineCreator(_map);_this._poly=_poly;if(opts){_this._defaultStyle=opts.createOptions?AMap.extend(_this._defaultStyle,opts.createOptions):_this._defaultStyle;_this._selectStyle=opts.editOptions?AMap.extend(_this._selectStyle,opts.editOptions):_this._selectStyle;_this._markerOptions=opts.controlPoint?AMap.extend(_this._markerOptions,opts.controlPoint):_this._markerOptions;_this._middleMarkerOptions=opts.midControlPoint?AMap.extend(_this._middleMarkerOptions,opts.midControlPoint):_this._middleMarkerOptions}_this._creator.on(\"create\",function(data){_this._creator.close();var path=data.path;var poly=new AMap.Polyline(AMap.extend({map:_map,path:path},_this._defaultStyle));_this.setTarget(poly);_this.open();_this.emit(ListEvent.add,{target:_this.getTarget(),obj:poly})});return _this}_createClass(PolylineEditor,[{key:\"initList\",value:function initList(){if(!this._poly){console.error(\"no poly target\");return}if(!this.list){this.list=new PointList;var path=this._poly.getPath();var prev;for(var i=0,len=path.length;i<len;i++){var pos=path[i];var current=new PolylinePoint(this._map,pos,{controlPoint:this._markerOptions,midControlPoint:this._middleMarkerOptions});if(i>0){var middlePos=getMiddleLatLng(prev.point.marker,current.point.marker);var middle=new PolylinePoint(this._map,middlePos,{controlPoint:this._markerOptions,midControlPoint:this._middleMarkerOptions});this.list.add(middle);this.list.add(current);middle.setMiddle(true)}else{this.list.add(current)}prev=current}this.bindListEvent()}this.list.forEach(function(node){node.point.marker.show()});this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds;this._poly.setOptions(this._selectStyle?this._selectStyle:{})}},{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}this._poly=overlay}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.removeNode,this.handleRemoveNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.removeNode,this.handleRemoveNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange)}}},{key:\"handleChange\",value:function handleChange(){this._updatePath()}},{key:\"handleAddNode\",value:function handleAddNode(e){this._updatePath();this.emit(ListEvent.addNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){if(!this.list){return}if(this.list.length<=2){this.emit(ListEvent.removeNode);this._map.remove(this._poly);this.close();this.destroy();delete this._poly;return}this._updatePath();this.emit(ListEvent.removeNode,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"handleAdjust\",value:function handleAdjust(e){this._updatePath();this.emit(ListEvent.adjust,{target:this.getTarget(),lnglat:e.lnglat,pixel:e.pixel})}},{key:\"open\",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList()}else{this._creator.open()}}},{key:\"close\",value:function close(){this._creator.close();this._editing=false;if(!this._poly){return}if(!this.list){return}this.list.forEach(function(node){node.point.marker.hide()});this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){delete this._poly;if(this.list){this.unbindListEvent();this.list.forEach(function(node){node.point.marker.hide()});this.list.destroy();delete this.list}delete this._poly}},{key:\"_updatePath\",value:function _updatePath(){if(!this._poly){return}if(!this.list){return}var path=[];this.list.forEach(function(node){if(!node.middleFlag||node.editing){path.push(node.point.marker.getCenter())}});this._poly.setPath(path)}},{key:\"_openAdd\",value:function _openAdd(){this._addAddListener()}},{key:\"closeAdd\",value:function closeAdd(){this._removeAddListener()}},{key:\"_addAddListener\",value:function _addAddListener(){}},{key:\"_removeAddListener\",value:function _removeAddListener(){}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return PolylineEditor}(AMap.Event);var PolyEditor=function PolyEditor(map,poly,opts){_classCallCheck(this,PolyEditor);this.CLASS_NAME=\"AMap.PolyEditor\";if(poly instanceof AMap.Polygon){this.__proto__=PolygonEditor.prototype;this.__proto__.constructor.call(this,map,poly,opts)}else if(poly instanceof AMap.Polyline){this.__proto__=PolylineEditor.prototype;this.__proto__.constructor.call(this,map,poly,opts)}else{throw Error(\"require AMap.Polyline or AMap.Polygon \")}};AMap[\"PolyEditor\"]=PolyEditor}(window.AMap);\n");
_jsload_('AMap.PolygonEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";return _typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,\"prototype\",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,\"prototype\",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}else if(call!==void 0){throw new TypeError(\"Derived constructors may only return object or undefined\")}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArray(iter){if(typeof Symbol!==\"undefined\"&&iter[Symbol.iterator]!=null||iter[\"@@iterator\"]!=null)return Array.from(iter)}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!==\"undefined\"&&arr[Symbol.iterator]||arr[\"@@iterator\"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]()}finally{if(_d)throw _e}}return _arr}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var normalCompletion=true,didErr=false,err;return{s:function(){it=it.call(o)},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=true;err=e},f:function(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function getNearestPoint(pt,pts){var nearest=null;pts.forEach(function(p,i){var lngDiff=p[0]-pt[0];var latDiff=p[1]-pt[1];var l=Math.sqrt(Math.pow(lngDiff,2)+Math.pow(latDiff,2));var cur={distance:l,point:p,index:i};if(nearest){if(nearest.distance>l){nearest=cur}}else{nearest=cur}});return nearest}function getPixelDistance(_map,_ref){var _ref2=_slicedToArray(_ref,2),p1=_ref2[0],p2=_ref2[1];var toPixel=function toPixel(p){var lnglat=new AMap.LngLat(p[0],p[1]);return _map.lngLatToContainer(lnglat)};var pixel1=toPixel(p1);var pixel2=toPixel(p2);var xDiff=pixel1.x-pixel2.x;var yDiff=pixel1.y-pixel2.y;var l=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));return l}function e2ll(e){if(e&&e.lnglat){return e.lnglat}return null}function getPolygonOptions(opt){return{path:opt[\"path\"],map:opt[\"map\"],strokeColor:opt[\"strokeColor\"]||\"#1791fc\",strokeOpacity:opt[\"strokeOpacity\"]||.8,strokeWeight:opt[\"strokeWeight\"]||2,fillColor:opt[\"fillColor\"]||\"#1791fc\",fillOpacity:opt[\"fillOpacity\"]||.35,strokeStyle:opt[\"strokeStyle\"]||\"solid\",strokeDasharray:opt[\"strokeDasharray\"]||[10,5],zIndex:opt[\"zIndex\"]||10,extData:opt[\"extData\"]||{},bubble:!!opt[\"bubble\"]}}function createPolygon(path,opt){var _opt=AMap.extend({},getPolygonOptions(opt),{path:path});var p=new AMap.Polygon(_opt);if(_opt[\"map\"]){_opt[\"map\"].add(p)}return p}var earthRadius=6371008.8;var factors={centimeters:earthRadius*100,centimetres:earthRadius*100,degrees:earthRadius/111325,feet:earthRadius*3.28084,inches:earthRadius*39.37,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,nauticalmiles:earthRadius/1852,radians:1,yards:earthRadius*1.0936};var unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/earthRadius,yards:1.0936133};var areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature(geom,properties,options){if(options===void 0){options={}}var feat={type:\"Feature\"};if(options.id===0||options.id){feat.id=options.id}if(options.bbox){feat.bbox=options.bbox}feat.properties=properties||{};feat.geometry=geom;return feat}function geometry(type,coordinates,_options){switch(type){case\"Point\":return point(coordinates).geometry;case\"LineString\":return lineString(coordinates).geometry;case\"Polygon\":return polygon(coordinates).geometry;case\"MultiPoint\":return multiPoint(coordinates).geometry;case\"MultiLineString\":return multiLineString(coordinates).geometry;case\"MultiPolygon\":return multiPolygon(coordinates).geometry;default:throw new Error(type+\" is invalid\")}}function point(coordinates,properties,options){if(options===void 0){options={}}if(!coordinates){throw new Error(\"coordinates is required\")}if(!Array.isArray(coordinates)){throw new Error(\"coordinates must be an Array\")}if(coordinates.length<2){throw new Error(\"coordinates must be at least 2 numbers long\")}if(!isNumber(coordinates[0])||!isNumber(coordinates[1])){throw new Error(\"coordinates must contain numbers\")}var geom={type:\"Point\",coordinates:coordinates};return feature(geom,properties,options)}function points(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return point(coords,properties)}),options)}function polygon(coordinates,properties,options){if(options===void 0){options={}}for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4){throw new Error(\"Each LinearRing of a Polygon must have 4 or more Positions.\")}for(var j=0;j<ring[ring.length-1].length;j++){if(ring[ring.length-1][j]!==ring[0][j]){throw new Error(\"First and last Position are not equivalent.\")}}}var geom={type:\"Polygon\",coordinates:coordinates};return feature(geom,properties,options)}function polygons(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return polygon(coords,properties)}),options)}function lineString(coordinates,properties,options){if(options===void 0){options={}}if(coordinates.length<2){throw new Error(\"coordinates must be an array of two or more positions\")}var geom={type:\"LineString\",coordinates:coordinates};return feature(geom,properties,options)}function lineStrings(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return lineString(coords,properties)}),options)}function featureCollection(features,options){if(options===void 0){options={}}var fc={type:\"FeatureCollection\"};if(options.id){fc.id=options.id}if(options.bbox){fc.bbox=options.bbox}fc.features=features;return fc}function multiLineString(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiLineString\",coordinates:coordinates};return feature(geom,properties,options)}function multiPoint(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiPoint\",coordinates:coordinates};return feature(geom,properties,options)}function multiPolygon(coordinates,properties,options){if(options===void 0){options={}}var geom={type:\"MultiPolygon\",coordinates:coordinates};return feature(geom,properties,options)}function geometryCollection(geometries,properties,options){if(options===void 0){options={}}var geom={type:\"GeometryCollection\",geometries:geometries};return feature(geom,properties,options)}function round(num,precision){if(precision===void 0){precision=0}if(precision&&!(precision>=0)){throw new Error(\"precision must be a positive number\")}var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}function radiansToLength(radians,units){if(units===void 0){units=\"kilometers\"}var factor=factors[units];if(!factor){throw new Error(units+\" units is invalid\")}return radians*factor}function lengthToRadians(distance,units){if(units===void 0){units=\"kilometers\"}var factor=factors[units];if(!factor){throw new Error(units+\" units is invalid\")}return distance/factor}function lengthToDegrees(distance,units){return radiansToDegrees(lengthToRadians(distance,units))}function bearingToAzimuth(bearing){var angle=bearing%360;if(angle<0){angle+=360}return angle}function radiansToDegrees(radians){var degrees=radians%(2*Math.PI);return degrees*180/Math.PI}function degreesToRadians(degrees){var radians=degrees%360;return radians*Math.PI/180}function convertLength(length,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit=\"kilometers\"}if(finalUnit===void 0){finalUnit=\"kilometers\"}if(!(length>=0)){throw new Error(\"length must be a positive number\")}return radiansToLength(lengthToRadians(length,originalUnit),finalUnit)}function convertArea(area,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit=\"meters\"}if(finalUnit===void 0){finalUnit=\"kilometers\"}if(!(area>=0)){throw new Error(\"area must be a positive number\")}var startFactor=areaFactors[originalUnit];if(!startFactor){throw new Error(\"invalid original units\")}var finalFactor=areaFactors[finalUnit];if(!finalFactor){throw new Error(\"invalid final units\")}return area/startFactor*finalFactor}function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)}function isObject(input){return!!input&&input.constructor===Object}function validateBBox(bbox){if(!bbox){throw new Error(\"bbox is required\")}if(!Array.isArray(bbox)){throw new Error(\"bbox must be an Array\")}if(bbox.length!==4&&bbox.length!==6){throw new Error(\"bbox must be an Array of 4 or 6 numbers\")}bbox.forEach(function(num){if(!isNumber(num)){throw new Error(\"bbox must only contain numbers\")}})}function validateId(id){if(!id){throw new Error(\"id is required\")}if([\"string\",\"number\"].indexOf(_typeof(id))===-1){throw new Error(\"id must be a number or a string\")}}var es=Object.freeze({__proto__:null,earthRadius:earthRadius,factors:factors,unitsFactors:unitsFactors,areaFactors:areaFactors,feature:feature,geometry:geometry,point:point,points:points,polygon:polygon,polygons:polygons,lineString:lineString,lineStrings:lineStrings,featureCollection:featureCollection,multiLineString:multiLineString,multiPoint:multiPoint,multiPolygon:multiPolygon,geometryCollection:geometryCollection,round:round,radiansToLength:radiansToLength,lengthToRadians:lengthToRadians,lengthToDegrees:lengthToDegrees,bearingToAzimuth:bearingToAzimuth,radiansToDegrees:radiansToDegrees,degreesToRadians:degreesToRadians,convertLength:convertLength,convertArea:convertArea,isNumber:isNumber,isObject:isObject,validateBBox:validateBBox,validateId:validateId});function getCoord(coord){if(!coord){throw new Error(\"coord is required\")}if(!Array.isArray(coord)){if(coord.type===\"Feature\"&&coord.geometry!==null&&coord.geometry.type===\"Point\"){return coord.geometry.coordinates}if(coord.type===\"Point\"){return coord.coordinates}}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1])){return coord}throw new Error(\"coord must be GeoJSON Point or an Array of numbers\")}function getCoords(coords){if(Array.isArray(coords)){return coords}if(coords.type===\"Feature\"){if(coords.geometry!==null){return coords.geometry.coordinates}}else{if(coords.coordinates){return coords.coordinates}}throw new Error(\"coords must be GeoJSON Feature, Geometry Object or an Array\")}function bearing(start,end,options){if(options===void 0){options={}}if(options.final===true){return calculateFinalBearing(start,end)}var coordinates1=getCoord(start);var coordinates2=getCoord(end);var lon1=degreesToRadians(coordinates1[0]);var lon2=degreesToRadians(coordinates2[0]);var lat1=degreesToRadians(coordinates1[1]);var lat2=degreesToRadians(coordinates2[1]);var a=Math.sin(lon2-lon1)*Math.cos(lat2);var b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return radiansToDegrees(Math.atan2(a,b))}function calculateFinalBearing(start,end){var bear=bearing(end,start);bear=(bear+180)%360;return bear}function distance(from,to,options){if(options===void 0){options={}}var coordinates1=getCoord(from);var coordinates2=getCoord(to);var dLat=degreesToRadians(coordinates2[1]-coordinates1[1]);var dLon=degreesToRadians(coordinates2[0]-coordinates1[0]);var lat1=degreesToRadians(coordinates1[1]);var lat2=degreesToRadians(coordinates2[1]);var a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}function destination(origin,distance,bearing,options){if(options===void 0){options={}}var coordinates1=getCoord(origin);var longitude1=degreesToRadians(coordinates1[0]);var latitude1=degreesToRadians(coordinates1[1]);var bearingRad=degreesToRadians(bearing);var radians=lengthToRadians(distance,options.units);var latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad));var longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2));var lng=radiansToDegrees(longitude2);var lat=radiansToDegrees(latitude2);return point([lng,lat],options.properties)}function coordEach(geojson,callback,excludeWrapCoord){if(geojson===null)return;var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection,type=geojson.type,isFeatureCollection=type===\"FeatureCollection\",isFeature=type===\"Feature\",stop=isFeatureCollection?geojson.features.length:1;for(var featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type===\"GeometryCollection\":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0;var geometryIndex=0;geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection;if(geometry===null)continue;coords=geometry.coordinates;var geomType=geometry.type;wrapShrink=excludeWrapCoord&&(geomType===\"Polygon\"||geomType===\"MultiPolygon\")?1:0;switch(geomType){case null:break;case\"Point\":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;multiFeatureIndex++;break;case\"LineString\":case\"MultiPoint\":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;if(geomType===\"MultiPoint\")multiFeatureIndex++}if(geomType===\"LineString\")multiFeatureIndex++;break;case\"Polygon\":case\"MultiLineString\":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}if(geomType===\"MultiLineString\")multiFeatureIndex++;if(geomType===\"Polygon\")geometryIndex++}if(geomType===\"Polygon\")multiFeatureIndex++;break;case\"MultiPolygon\":for(j=0;j<coords.length;j++){geometryIndex=0;for(k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case\"GeometryCollection\":for(j=0;j<geometry.geometries.length;j++){if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===false)return false}break;default:throw new Error(\"Unknown Geometry Type\")}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;coordEach(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){if(coordIndex===0&&initialValue===undefined)previousValue=currentCoord;else previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord);return previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case\"FeatureCollection\":for(i=0;i<geojson.features.length;i++){if(callback(geojson.features[i].properties,i)===false)break}break;case\"Feature\":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;propEach(geojson,function(currentProperties,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentProperties;else previousValue=callback(previousValue,currentProperties,featureIndex)});return previousValue}function featureEach(geojson,callback){if(geojson.type===\"Feature\"){callback(geojson,0)}else if(geojson.type===\"FeatureCollection\"){for(var i=0;i<geojson.features.length;i++){if(callback(geojson.features[i],i)===false)break}}}function featureReduce(geojson,callback,initialValue){var previousValue=initialValue;featureEach(geojson,function(currentFeature,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex)});return previousValue}function coordAll(geojson){var coords=[];coordEach(geojson,function(coord){coords.push(coord)});return coords}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type===\"FeatureCollection\",isFeature=geojson.type===\"Feature\",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson;featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{};featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:undefined;featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:undefined;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type===\"GeometryCollection\":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(g=0;g<stopG;g++){geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection;if(geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===false)return false;continue}switch(geometry.type){case\"Point\":case\"LineString\":case\"MultiPoint\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===false)return false;break}case\"GeometryCollection\":{for(j=0;j<geometry.geometries.length;j++){if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===false)return false}break}default:throw new Error(\"Unknown Geometry Type\")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;geomEach(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){if(featureIndex===0&&initialValue===undefined)previousValue=currentGeometry;else previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)});return previousValue}function flattenEach(geojson,callback){geomEach(geojson,function(geometry,featureIndex,properties,bbox,id){var type=geometry===null?null:geometry.type;switch(type){case null:case\"Point\":case\"LineString\":case\"Polygon\":if(callback(feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)===false)return false;return}var geomType;switch(type){case\"MultiPoint\":geomType=\"Point\";break;case\"MultiLineString\":geomType=\"LineString\";break;case\"MultiPolygon\":geomType=\"Polygon\";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate=geometry.coordinates[multiFeatureIndex];var geom={type:geomType,coordinates:coordinate};if(callback(feature(geom,properties),featureIndex,multiFeatureIndex)===false)return false}})}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;flattenEach(geojson,function(currentFeature,featureIndex,multiFeatureIndex){if(featureIndex===0&&multiFeatureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)});return previousValue}function segmentEach(geojson,callback){flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(!feature.geometry)return;var type=feature.geometry.type;if(type===\"Point\"||type===\"MultiPoint\")return;var previousCoords;var previousFeatureIndex=0;var previousMultiIndex=0;var prevGeomIndex=0;if(coordEach(feature,function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===undefined||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord;previousFeatureIndex=featureIndex;previousMultiIndex=multiPartIndexCoord;prevGeomIndex=geometryIndex;segmentIndex=0;return}var currentSegment=lineString([previousCoords,currentCoord],feature.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===false)return false;segmentIndex++;previousCoords=currentCoord})===false)return false})}function segmentReduce(geojson,callback,initialValue){var previousValue=initialValue;var started=false;segmentEach(geojson,function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){if(started===false&&initialValue===undefined)previousValue=currentSegment;else previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex);started=true});return previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error(\"geojson is required\");flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){if(feature.geometry===null)return;var type=feature.geometry.type;var coords=feature.geometry.coordinates;switch(type){case\"LineString\":if(callback(feature,featureIndex,multiFeatureIndex,0,0)===false)return false;break;case\"Polygon\":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++){if(callback(lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex)===false)return false}break}})}function lineReduce(geojson,callback,initialValue){var previousValue=initialValue;lineEach(geojson,function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentLine;else previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)});return previousValue}function findSegment(geojson,options){options=options||{};if(!isObject(options))throw new Error(\"options is invalid\");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var segmentIndex=options.segmentIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case\"FeatureCollection\":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case\"Feature\":properties=properties||geojson.properties;geometry=geojson.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":geometry=geojson;break;default:throw new Error(\"geojson is invalid\")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case\"Point\":case\"MultiPoint\":return null;case\"LineString\":if(segmentIndex<0)segmentIndex=coords.length+segmentIndex-1;return lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case\"Polygon\":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[geometryIndex].length+segmentIndex-1;return lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case\"MultiLineString\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1;return lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case\"MultiPolygon\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1;return lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error(\"geojson is invalid\")}function findPoint(geojson,options){options=options||{};if(!isObject(options))throw new Error(\"options is invalid\");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var coordIndex=options.coordIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case\"FeatureCollection\":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case\"Feature\":properties=properties||geojson.properties;geometry=geojson.geometry;break;case\"Point\":case\"MultiPoint\":return null;case\"LineString\":case\"Polygon\":case\"MultiLineString\":case\"MultiPolygon\":geometry=geojson;break;default:throw new Error(\"geojson is invalid\")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case\"Point\":return point(coords,properties,options);case\"MultiPoint\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;return point(coords[multiFeatureIndex],properties,options);case\"LineString\":if(coordIndex<0)coordIndex=coords.length+coordIndex;return point(coords[coordIndex],properties,options);case\"Polygon\":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(coordIndex<0)coordIndex=coords[geometryIndex].length+coordIndex;return point(coords[geometryIndex][coordIndex],properties,options);case\"MultiLineString\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex].length+coordIndex;return point(coords[multiFeatureIndex][coordIndex],properties,options);case\"MultiPolygon\":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex;return point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error(\"geojson is invalid\")}var es$1=Object.freeze({__proto__:null,coordAll:coordAll,coordEach:coordEach,coordReduce:coordReduce,featureEach:featureEach,featureReduce:featureReduce,findPoint:findPoint,findSegment:findSegment,flattenEach:flattenEach,flattenReduce:flattenReduce,geomEach:geomEach,geomReduce:geomReduce,lineEach:lineEach,lineReduce:lineReduce,propEach:propEach,propReduce:propReduce,segmentEach:segmentEach,segmentReduce:segmentReduce});function lineSegment(geojson){if(!geojson){throw new Error(\"geojson is required\")}var results=[];flattenEach(geojson,function(feature){lineSegmentFeature(feature,results)});return featureCollection(results)}function lineSegmentFeature(geojson,results){var coords=[];var geometry=geojson.geometry;if(geometry!==null){switch(geometry.type){case\"Polygon\":coords=getCoords(geometry);break;case\"LineString\":coords=[getCoords(geometry)]}coords.forEach(function(coord){var segments=createSegments(coord,geojson.properties);segments.forEach(function(segment){segment.id=results.length;results.push(segment)})})}}function createSegments(coords,properties){var segments=[];coords.reduce(function(previousCoords,currentCoords){var segment=lineString([previousCoords,currentCoords],properties);segment.bbox=bbox(previousCoords,currentCoords);segments.push(segment);return currentCoords});return segments}function bbox(coords1,coords2){var x1=coords1[0];var y1=coords1[1];var x2=coords2[0];var y2=coords2[1];var west=x1<x2?x1:x2;var south=y1<y2?y1:y2;var east=x1>x2?x1:x2;var north=y1>y2?y1:y2;return[west,south,east,north]}function quickselect(arr,k,left,right,compare){quickselectStep(arr,k,left||0,right||arr.length-1,compare||defaultCompare)}function quickselectStep(arr,k,left,right,compare){while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=.5*Math.exp(2*z/3);var sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare)}var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0){i++}while(compare(arr[j],t)>0){j--}}if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right)}if(j<=k)left=j+1;if(k<=j)right=j-1}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}var RBush=function(){function RBush(){var maxEntries=arguments.length>0&&arguments[0]!==undefined?arguments[0]:9;_classCallCheck(this,RBush);this._maxEntries=Math.max(4,maxEntries);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));this.clear()}_createClass(RBush,[{key:\"all\",value:function all(){return this._all(this.data,[])}},{key:\"search\",value:function search(bbox){var node=this.data;var result=[];if(!intersects(bbox,node))return result;var toBBox=this.toBBox;var nodesToSearch=[];while(node){for(var i=0;i<node.children.length;i++){var child=node.children[i];var childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child)}}node=nodesToSearch.pop()}return result}},{key:\"collides\",value:function collides(bbox){var node=this.data;if(!intersects(bbox,node))return false;var nodesToSearch=[];while(node){for(var i=0;i<node.children.length;i++){var child=node.children[i];var childBBox=node.leaf?this.toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return false}},{key:\"load\",value:function load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0;i<data.length;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}return this}},{key:\"insert\",value:function insert(item){if(item)this._insert(item,this.data.height-1);return this}},{key:\"clear\",value:function clear(){this.data=createNode([]);return this}},{key:\"remove\",value:function remove(item,equalsFn){if(!item)return this;var node=this.data;var bbox=this.toBBox(item);var path=[];var indexes=[];var i,parent,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){var index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else if(parent){i++;node=parent.children[i];goingUp=false}else node=null}return this}},{key:\"toBBox\",value:function toBBox(item){return item}},{key:\"compareMinX\",value:function compareMinX(a,b){return a.minX-b.minX}},{key:\"compareMinY\",value:function compareMinY(a,b){return a.minY-b.minY}},{key:\"toJSON\",value:function toJSON(){return this.data}},{key:\"fromJSON\",value:function fromJSON(data){this.data=data;return this}},{key:\"_all\",value:function _all(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,_toConsumableArray(node.children));else nodesToSearch.push.apply(nodesToSearch,_toConsumableArray(node.children));node=nodesToSearch.pop()}return result}},{key:\"_build\",value:function _build(items,left,right,height){var N=right-left+1;var M=this._maxEntries;var node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M);var N1=N2*Math.ceil(Math.sqrt(M));multiSelect(items,left,right,N1,this.compareMinX);for(var i=left;i<=right;i+=N1){var right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(var j=i;j<=right2;j+=N2){var right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node}},{key:\"_chooseSubtree\",value:function _chooseSubtree(bbox,node,level,path){while(true){path.push(node);if(node.leaf||path.length-1===level)break;var minArea=Infinity;var minEnlargement=Infinity;var targetNode=void 0;for(var i=0;i<node.children.length;i++){var child=node.children[i];var area=bboxArea(child);var enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}node=targetNode||node.children[0]}return node}},{key:\"_insert\",value:function _insert(item,level,isNode){var bbox=isNode?item:this.toBBox(item);var insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else break}this._adjustParentBBoxes(bbox,insertPath,level)}},{key:\"_split\",value:function _split(insertPath,level){var node=insertPath[level];var M=node.children.length;var m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode)}},{key:\"_splitRoot\",value:function _splitRoot(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)}},{key:\"_chooseSplitIndex\",value:function _chooseSplitIndex(node,m,M){var index;var minOverlap=Infinity;var minArea=Infinity;for(var i=m;i<=M-m;i++){var bbox1=distBBox(node,0,i,this.toBBox);var bbox2=distBBox(node,i,M,this.toBBox);var overlap=intersectionArea(bbox1,bbox2);var area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index||M-m}},{key:\"_chooseSplitAxis\",value:function _chooseSplitAxis(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX;var compareMinY=node.leaf?this.compareMinY:compareNodeMinY;var xMargin=this._allDistMargin(node,m,M,compareMinX);var yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX)}},{key:\"_allDistMargin\",value:function _allDistMargin(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox;var leftBBox=distBBox(node,0,m,toBBox);var rightBBox=distBBox(node,M-m,M,toBBox);var margin=bboxMargin(leftBBox)+bboxMargin(rightBBox);for(var i=m;i<M-m;i++){var child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox)}for(var _i=M-m-1;_i>=m;_i--){var _child=node.children[_i];extend(rightBBox,node.leaf?toBBox(_child):_child);margin+=bboxMargin(rightBBox)}return margin}},{key:\"_adjustParentBBoxes\",value:function _adjustParentBBoxes(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox)}}},{key:\"_condense\",value:function _condense(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else this.clear()}else calcBBox(path[i],this.toBBox)}}}]);return RBush}();function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i}return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k;i<p;i++){var child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX);var minY=Math.max(a.minY,b.minY);var maxX=Math.min(a.maxX,b.maxX);var maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(arr,left,right,n,compare){var stack=[left,right];while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;var mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right)}}function bbox$1(geojson){var result=[Infinity,Infinity,-Infinity,-Infinity];coordEach(geojson,function(coord){if(result[0]>coord[0]){result[0]=coord[0]}if(result[1]>coord[1]){result[1]=coord[1]}if(result[2]<coord[0]){result[2]=coord[0]}if(result[3]<coord[1]){result[3]=coord[1]}});return result}bbox$1[\"default\"]=bbox$1;var turfBBox=bbox$1.default;var featureEach$1=es$1.featureEach;var coordEach$1=es$1.coordEach;var polygon$1=es.polygon;var featureCollection$1=es.featureCollection;function geojsonRbush(maxEntries){var tree=new RBush(maxEntries);tree.insert=function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid feature\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return RBush.prototype.insert.call(this,feature)};tree.load=function(features){var load=[];if(Array.isArray(features)){features.forEach(function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid features\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}else{featureEach$1(features,function(feature){if(feature.type!==\"Feature\")throw new Error(\"invalid features\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}return RBush.prototype.load.call(this,load)};tree.remove=function(feature,equals){if(feature.type!==\"Feature\")throw new Error(\"invalid feature\");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return RBush.prototype.remove.call(this,feature,equals)};tree.clear=function(){return RBush.prototype.clear.call(this)};tree.search=function(geojson){var features=RBush.prototype.search.call(this,this.toBBox(geojson));return featureCollection$1(features)};tree.collides=function(geojson){return RBush.prototype.collides.call(this,this.toBBox(geojson))};tree.all=function(){var features=RBush.prototype.all.call(this);return featureCollection$1(features)};tree.toJSON=function(){return RBush.prototype.toJSON.call(this)};tree.fromJSON=function(json){return RBush.prototype.fromJSON.call(this,json)};tree.toBBox=function(geojson){var bbox;if(geojson.bbox)bbox=geojson.bbox;else if(Array.isArray(geojson)&&geojson.length===4)bbox=geojson;else if(Array.isArray(geojson)&&geojson.length===6)bbox=[geojson[0],geojson[1],geojson[3],geojson[4]];else if(geojson.type===\"Feature\")bbox=turfBBox(geojson);else if(geojson.type===\"FeatureCollection\")bbox=turfBBox(geojson);else throw new Error(\"invalid geojson\");return{minX:bbox[0],minY:bbox[1],maxX:bbox[2],maxY:bbox[3]}};return tree}var _geojsonRbush_3_2_0_geojsonRbush=geojsonRbush;var default_1=geojsonRbush;_geojsonRbush_3_2_0_geojsonRbush.default=default_1;function lineIntersect(line1,line2){var unique={};var results=[];if(line1.type===\"LineString\"){line1=feature(line1)}if(line2.type===\"LineString\"){line2=feature(line2)}if(line1.type===\"Feature\"&&line2.type===\"Feature\"&&line1.geometry!==null&&line2.geometry!==null&&line1.geometry.type===\"LineString\"&&line2.geometry.type===\"LineString\"&&line1.geometry.coordinates.length===2&&line2.geometry.coordinates.length===2){var intersect=intersects$1(line1,line2);if(intersect){results.push(intersect)}return featureCollection(results)}var tree=_geojsonRbush_3_2_0_geojsonRbush();tree.load(lineSegment(line2));featureEach(lineSegment(line1),function(segment){featureEach(tree.search(segment),function(match){var intersect=intersects$1(segment,match);if(intersect){var key=getCoords(intersect).join(\",\");if(!unique[key]){unique[key]=true;results.push(intersect)}}})});return featureCollection(results)}function intersects$1(line1,line2){var coords1=getCoords(line1);var coords2=getCoords(line2);if(coords1.length!==2){throw new Error(\"<intersects> line1 must only contain 2 coordinates\")}if(coords2.length!==2){throw new Error(\"<intersects> line2 must only contain 2 coordinates\")}var x1=coords1[0][0];var y1=coords1[0][1];var x2=coords1[1][0];var y2=coords1[1][1];var x3=coords2[0][0];var y3=coords2[0][1];var x4=coords2[1][0];var y4=coords2[1][1];var denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);var numeA=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3);var numeB=(x2-x1)*(y1-y3)-(y2-y1)*(x1-x3);if(denom===0){if(numeA===0&&numeB===0){return null}return null}var uA=numeA/denom;var uB=numeB/denom;if(uA>=0&&uA<=1&&uB>=0&&uB<=1){var x=x1+uA*(x2-x1);var y=y1+uA*(y2-y1);return point([x,y])}return null}function nearestPointOnLine(lines,pt,options){if(options===void 0){options={}}var closestPt=point([Infinity,Infinity],{dist:Infinity});var length=0;flattenEach(lines,function(line){var coords=getCoords(line);for(var i=0;i<coords.length-1;i++){var start=point(coords[i]);start.properties.dist=distance(pt,start,options);var stop_1=point(coords[i+1]);stop_1.properties.dist=distance(pt,stop_1,options);var sectionLength=distance(start,stop_1,options);var heightDistance=Math.max(start.properties.dist,stop_1.properties.dist);var direction=bearing(start,stop_1);var perpendicularPt1=destination(pt,heightDistance,direction+90,options);var perpendicularPt2=destination(pt,heightDistance,direction-90,options);var intersect=lineIntersect(lineString([perpendicularPt1.geometry.coordinates,perpendicularPt2.geometry.coordinates]),lineString([start.geometry.coordinates,stop_1.geometry.coordinates]));var intersectPt=null;if(intersect.features.length>0){intersectPt=intersect.features[0];intersectPt.properties.dist=distance(pt,intersectPt,options);intersectPt.properties.location=length+distance(start,intersectPt,options)}if(start.properties.dist<closestPt.properties.dist){closestPt=start;closestPt.properties.index=i;closestPt.properties.location=length}if(stop_1.properties.dist<closestPt.properties.dist){closestPt=stop_1;closestPt.properties.index=i+1;closestPt.properties.location=length+sectionLength}if(intersectPt&&intersectPt.properties.dist<closestPt.properties.dist){closestPt=intersectPt;closestPt.properties.index=i}length+=sectionLength}});return closestPt}var freeGlobal=(typeof global===\"undefined\"?\"undefined\":_typeof(global))==\"object\"&&global&&global.Object===Object&&global;var freeSelf=(typeof self===\"undefined\"?\"undefined\":_typeof(self))==\"object\"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function(\"return this\")();var _Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\";var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&_typeof(value)==\"object\"}var symbolTag=\"[object Symbol]\";function isSymbol(value){return _typeof(value)==\"symbol\"||isObjectLike(value)&&baseGetTag(value)==symbolTag}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value==\"string\"){return value}if(isArray(value)){return arrayMap(value,baseToString)+\"\"}if(isSymbol(value)){return symbolToString?symbolToString.call(value):\"\"}var result=value+\"\";return result==\"0\"&&1/value==-INFINITY?\"-0\":result}function isObject$1(value){var type=_typeof(value);return value!=null&&(type==\"object\"||type==\"function\")}function identity(value){return value}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(value){if(!isObject$1(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root[\"__core-js_shared__\"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||\"\");return uid?\"Symbol(src)_1.\"+uid:\"\"}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp(\"^\"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){if(!isObject$1(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var WeakMap=getNative(root,\"WeakMap\");function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=_typeof(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type==\"number\"||type!=\"symbol\"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function eq(value,other){return value===other||value!==value&&other!==other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value==\"number\"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var objectProto$3=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor==\"function\"&&Ctor.prototype||objectProto$3;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag=\"[object Arguments]\";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$4=Object.prototype;var hasOwnProperty$2=objectProto$4.hasOwnProperty;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};function stubFalse(){return false}var freeExports=(typeof exports===\"undefined\"?\"undefined\":_typeof(exports))==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module===\"undefined\"?\"undefined\":_typeof(module))==\"object\"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1=\"[object Arguments]\",arrayTag=\"[object Array]\",boolTag=\"[object Boolean]\",dateTag=\"[object Date]\",errorTag=\"[object Error]\",funcTag$1=\"[object Function]\",mapTag=\"[object Map]\",numberTag=\"[object Number]\",objectTag=\"[object Object]\",regexpTag=\"[object RegExp]\",setTag=\"[object Set]\",stringTag=\"[object String]\",weakMapTag=\"[object WeakMap]\";var arrayBufferTag=\"[object ArrayBuffer]\",dataViewTag=\"[object DataView]\",float32Tag=\"[object Float32Array]\",float64Tag=\"[object Float64Array]\",int8Tag=\"[object Int8Array]\",int16Tag=\"[object Int16Array]\",int32Tag=\"[object Int32Array]\",uint8Tag=\"[object Uint8Array]\",uint8ClampedTag=\"[object Uint8ClampedArray]\",uint16Tag=\"[object Uint16Array]\",uint32Tag=\"[object Uint32Array]\";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=(typeof exports===\"undefined\"?\"undefined\":_typeof(exports))==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&(typeof module===\"undefined\"?\"undefined\":_typeof(module))==\"object\"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$3.call(value,key))&&!(skipIndexes&&(key==\"length\"||isBuff&&(key==\"offset\"||key==\"parent\")||isType&&(key==\"buffer\"||key==\"byteLength\"||key==\"byteOffset\")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$4.call(object,key)&&key!=\"constructor\"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=_typeof(value);if(type==\"number\"||type==\"symbol\"||type==\"boolean\"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var nativeCreate=getNative(Object,\"create\");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED=\"__lodash_hash_undefined__\";var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$5.call(data,key)?data[key]:undefined}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$6.call(data,key)}var HASH_UNDEFINED$1=\"__lodash_hash_undefined__\";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype[\"delete\"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype[\"delete\"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,\"Map\");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=_typeof(value);return type==\"string\"||type==\"number\"||type==\"symbol\"||type==\"boolean\"?value!==\"__proto__\":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key==\"string\"?\"string\":\"hash\"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)[\"delete\"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype[\"delete\"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT=\"Expected a function\";function memoize(func,resolver){if(typeof func!=\"function\"||resolver!=null&&typeof resolver!=\"function\"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push(\"\")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,\"$1\"):number||match)});return result});function toString(value){return value==null?\"\":baseToString(value)}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var INFINITY$1=1/0;function toKey(value){if(typeof value==\"string\"||isSymbol(value)){return value}var result=value+\"\";return result==\"0\"&&1/value==-INFINITY$1?\"-0\":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data[\"delete\"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype[\"delete\"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$9=Object.prototype;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)})};function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,\"DataView\");var Promise=getNative(root,\"Promise\");var Set=getNative(root,\"Set\");var mapTag$1=\"[object Map]\",objectTag$1=\"[object Object]\",promiseTag=\"[object Promise]\",setTag$1=\"[object Set]\",weakMapTag$1=\"[object WeakMap]\";var dataViewTag$1=\"[object DataView]\";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag$1?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):\"\";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var Uint8Array=root.Uint8Array;var HASH_UNDEFINED$2=\"__lodash_hash_undefined__\";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var arrStacked=stack.get(array);var othStacked=stack.get(other);if(arrStacked&&othStacked){return arrStacked==other&&othStacked==array}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack[\"delete\"](array);stack[\"delete\"](other);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1=\"[object Boolean]\",dateTag$1=\"[object Date]\",errorTag$1=\"[object Error]\",mapTag$2=\"[object Map]\",numberTag$1=\"[object Number]\",regexpTag$1=\"[object RegExp]\",setTag$2=\"[object Set]\",stringTag$1=\"[object String]\",symbolTag$1=\"[object Symbol]\";var arrayBufferTag$1=\"[object ArrayBuffer]\",dataViewTag$2=\"[object DataView]\";var symbolProto$1=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$2:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$1:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+object,+other);case errorTag$1:return object.name==other.name&&object.message==other.message;case regexpTag$1:case stringTag$1:return object==other+\"\";case mapTag$2:var convert=mapToArray;case setTag$2:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$1;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$1;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack[\"delete\"](object);return result;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$a=Object.prototype;var hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key))){return false}}var objStacked=stack.get(object);var othStacked=stack.get(other);if(objStacked&&othStacked){return objStacked==other&&othStacked==object}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key==\"constructor\")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&\"constructor\"in object&&\"constructor\"in other&&!(typeof objCtor==\"function\"&&objCtor instanceof objCtor&&typeof othCtor==\"function\"&&othCtor instanceof othCtor)){result=false}}stack[\"delete\"](object);stack[\"delete\"](other);return result}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\";var objectProto$b=Object.prototype;var hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othTag=othIsArr?arrayTag$1:getTag$1(other);objTag=objTag==argsTag$2?objectTag$2:objTag;othTag=othTag==argsTag$2?objectTag$2:othTag;var objIsObj=objTag==objectTag$2,othIsObj=othTag==objectTag$2,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){var objIsWrapped=objIsObj&&hasOwnProperty$8.call(object,\"__wrapped__\"),othIsWrapped=othIsObj&&hasOwnProperty$8.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject$1(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value==\"function\"){return value}if(value==null){return identity}if(_typeof(value)==\"object\"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);function castFunction(value){return typeof value==\"function\"?value:identity}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee))}function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}function getMiddleLatLngByLngLat(map,p1,p2){var pos1=p1.pos;var pos2=p2.pos;if(map){return map.coordsToLngLat([(pos1[0]+pos2[0])/2,(pos1[1]+pos2[1])/2])}}var callbacks=[];document.addEventListener(\"keydown\",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function onKeyDown(cb){if(callbacks.indexOf(cb)<0){callbacks.push(cb)}}function isLngLat(obj){return obj.className===\"AMap.LngLat\"}function jsonLngLatData(originData){if(isLngLat(originData)){return[originData.getLng(),originData.getLat()]}else if(Array.isArray(originData)){var data=originData.slice(0);for(var i=0;i<data.length;i+=1){data[i]=jsonLngLatData(data[i])}return data}else{return originData}}function isNumber$1(obj){var tmp=+obj;return typeof+tmp===\"number\"&&!isNaN(tmp)}function isNumberArray(obj){return Array.isArray(obj)&&isNumber$1(obj[0])}function isNumberArrayArray(obj){return Array.isArray(obj)&&isNumberArray(obj[0])}function isNumberArrayArrayArray(obj){return Array.isArray(obj)&&isNumberArrayArray(obj[0])}function isNumberArrayArrayArrayArray(obj){return Array.isArray(obj)&&isNumberArrayArrayArray(obj[0])}function multiPolygonJson(originPath){var jsonPath=jsonLngLatData(originPath);if(isNumberArrayArray(jsonPath)){jsonPath=[[jsonPath]]}else if(isNumberArrayArrayArray(jsonPath)){jsonPath=[jsonPath]}else if(isNumberArrayArrayArrayArray(jsonPath)){jsonPath=jsonPath}else{return undefined}return jsonPath}var EnumSingleRingEvent;(function(EnumSingleRingEvent){EnumSingleRingEvent[\"adjust\"]=\"adjust\";EnumSingleRingEvent[\"add\"]=\"add\";EnumSingleRingEvent[\"removenode\"]=\"removenode\";EnumSingleRingEvent[\"addnode\"]=\"addnode\";EnumSingleRingEvent[\"end\"]=\"end\";EnumSingleRingEvent[\"change\"]=\"change\";EnumSingleRingEvent[\"pointmouseover\"]=\"pointmouseover\";EnumSingleRingEvent[\"pointmouseout\"]=\"pointmouseout\"})(EnumSingleRingEvent||(EnumSingleRingEvent={}));var SingleRingList=function(_AMap$Event){_inherits(SingleRingList,_AMap$Event);var _super=_createSuper(SingleRingList);function SingleRingList(path,_opt,parent){var _this;_classCallCheck(this,SingleRingList);_this=_super.call(this);_this.path=path;_this._opt=_opt;_this.parent=parent;_this.editingVertexMarkerList=[];_this.editingMidTipMarkerList=[];_this.movePoint={};_this.destroyed=false;_this.handleVertexMouseOver=_this.handleVertexMouseOver.bind(_assertThisInitialized(_this));_this.handleVertexMouseOut=_this.handleVertexMouseOut.bind(_assertThisInitialized(_this));_this.handleMidVertexMouseOver=_this.handleMidVertexMouseOver.bind(_assertThisInitialized(_this));_this.handleMidVertexMouseOut=_this.handleMidVertexMouseOut.bind(_assertThisInitialized(_this));return _this}_createClass(SingleRingList,[{key:\"defaultMarkerOpt\",get:function get(){return this.parent.defaultMarkerOpt}},{key:\"controlPoint\",get:function get(){return this.parent.controlPoint}},{key:\"editingPolyObj\",get:function get(){return this.parent.editingPolyObj}},{key:\"map\",get:function get(){return this.parent.map}},{key:\"adsorb\",get:function get(){return this.parent.adsorb}},{key:\"adsorbPolygons\",get:function get(){return this.parent.adsorbPolygons}},{key:\"adsorbDistance\",get:function get(){return this.parent.adsorbDistance}},{key:\"midControlPoint\",get:function get(){return this.parent.midControlPoint}},{key:\"createMarker\",value:function createMarker(opt){var _opt=this.getMergeMkrOptions(opt);return new AMap.CircleMarker(_opt)}},{key:\"deleteChosedItem\",value:function deleteChosedItem(e){if(this.editingPolyObj){if(this.chosedPoint){var _this$chosedPoint=this.chosedPoint,marker=_this$chosedPoint.marker,pointIndex=_this$chosedPoint.pointIndex,_point=_this$chosedPoint.point,path=_this$chosedPoint.path,poly=_this$chosedPoint.poly,lnglat=_this$chosedPoint.lnglat,pixel=_this$chosedPoint.pixel,isFirstEqualLast=_this$chosedPoint.isFirstEqualLast;var minPointLimit=isFirstEqualLast?4:3;if(path.length>minPointLimit){path.splice(pointIndex,1);if(isFirstEqualLast){path[path.length-1]=AMap.LngLat.from(path[0])}this.path=path;this.map.remove(marker);this.highLightEditPoly();this.emit(EnumSingleRingEvent.removenode,{target:this.getTarget(),lnglat:_point,pixel:pixel})}else{this.path=[];this.highLightEditPoly();this.emit(EnumSingleRingEvent.removenode,{target:this.getTarget(),lnglat:_point,pixel:pixel})}}}}},{key:\"highLightEditPoly\",value:function highLightEditPoly(){var _this2=this;if(this.destroyed){return}var poly=this.editingPolyObj.poly;var path=this.path;var pointOnClick=function pointOnClick(chosedObj){var marker=chosedObj.marker;var _markerOpt=_this2.getMergeMkrOptions(_this2.controlPoint);var chosedOpt=_this2.getMergeMkrOptions({radius:3});if(_this2.chosedPoint){var cm=_this2.chosedPoint.marker;cm.setOptions(_markerOpt)}marker.setOptions(chosedOpt);_this2.chosedPoint=chosedObj};this.clearVertexMarkers();var isFirstEqualLast=path.length===0?false:path[0].equals(path[path.length-1]);this.editingVertexMarkerList=map(path,function(pt,pointIndex){var opt=AMap.extend({},_this2.controlPoint,{center:pt});var m=_this2.createMarker(opt);if(pointIndex===path.length-1&&isFirstEqualLast){return m}_this2.map.add(m);m.on(\"click\",function(e){pointOnClick({lnglat:e.lnglat,pixel:e.pixel,marker:m,pointIndex:pointIndex,point:pt,path:path,poly:poly,isFirstEqualLast:isFirstEqualLast});_this2.deleteChosedItem(e)});m.on(\"dragging\",function(e){_this2.clearTipMarkers();var _paths=_this2.getPath();var ll=_this2.getAdjustedPoint(_paths,e2ll(e));path[pointIndex]=ll;if(pointIndex===0&&isFirstEqualLast){path[path.length-1]=ll}_this2.path=path;_this2.emit(EnumSingleRingEvent.change,{target:_this2.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});m.on(\"dragend\",function(e){_this2.initTipMarkers();var _paths=_this2.getPath();var ll=_this2.getAdjustedPoint(_paths,e2ll(e));m.setCenter(ll);path[pointIndex]=ll;if(pointIndex===0&&isFirstEqualLast){path[path.length-1]=ll}_this2.path=path;_this2.emit(EnumSingleRingEvent.adjust,{target:_this2.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});m.on(\"mouseover\",_this2.handleVertexMouseOver);m.on(\"mouseout\",_this2.handleVertexMouseOut);return m});this.initTipMarkers()}},{key:\"getTarget\",value:function getTarget(){return this.editingPolyObj&&this.editingPolyObj.poly}},{key:\"getMergeMkrOptions\",value:function getMergeMkrOptions(opt){var _opt=AMap.extend({},this.defaultMarkerOpt,opt);_opt.radius*=1;return _opt}},{key:\"close\",value:function close(){this.clearVertexMarkers();this.clearTipMarkers();this.emit(\"end\",{target:this.getTarget()})}},{key:\"clearVertexMarkers\",value:function clearVertexMarkers(){var _this3=this;this.editingVertexMarkerList&&this.editingVertexMarkerList.forEach(function(mk){mk.clearEvents();_this3.map.remove(mk)});this.editingVertexMarkerList=[]}},{key:\"initTipMarkers\",value:function initTipMarkers(){var _this4=this;var path=this.path;var isFirstEqualLast=path.length===0?false:path[0].equals(path[path.length-1]);this.clearTipMarkers();var _loop=function _loop(i){if(i===path.length-1&&isFirstEqualLast){return\"continue\"}var cur=path[i];var next=i===path.length-1?path[0]:path[i+1];var midll=getMiddleLatLngByLngLat(_this4.map,cur,next);var opt=AMap.extend({},_this4.midControlPoint,{zIndex:999997,center:midll,bubble:false,draggable:true});var m=_this4.createMarker(opt);_this4.map.add(m);m.on(\"dragstart\",function(e){if(_this4.destroyed){return}var breakPoint=midll;var breakIndex=i;var lnglat=breakPoint;var path=_this4.path;var index=breakIndex+1;path.splice(index,0,lnglat);_this4.path=path;var option=_this4.getMergeMkrOptions(_this4.controlPoint);m.setOptions(option)});m.on(\"dragging\",function(e){if(_this4.destroyed){return}_this4.path;var _paths=_this4.getPath();var ll=_this4.getAdjustedPoint(_paths,e2ll(e));var pointIndex=i+1;path[pointIndex]=ll;_this4.path=path;_this4.emit(EnumSingleRingEvent.change,{target:_this4.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});m.on(\"dragend\",function(e){if(_this4.destroyed){return}_this4.handleMidVertexMouseOut({target:_this4.getTarget(),pixel:e.pixel,lnglat:e.lnglat});_this4.highLightEditPoly();_this4.emit(\"addnode\",{target:_this4.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});m.on(\"mouseover\",_this4.handleMidVertexMouseOver);m.on(\"mouseout\",_this4.handleMidVertexMouseOut);_this4.editingMidTipMarkerList.push(m)};for(var i=0;i<path.length;i++){var _ret=_loop(i);if(_ret===\"continue\")continue}}},{key:\"clearTipMarkers\",value:function clearTipMarkers(){var _this5=this;this.editingMidTipMarkerList&&this.editingMidTipMarkerList.forEach(function(mk){mk.clearEvents();_this5.map.remove(mk)});this.editingMidTipMarkerList=[]}},{key:\"getPointOnLine\",value:function getPointOnLine(_paths,ll){_paths.forEach(function(path){if(path.length>2&&path[0]!==path[path.length-1]){path.push(path[0])}});var mvPt=[ll.lng,ll.lat];var lines=multiLineString(_paths);var pt=point(mvPt);var _nearestPointOnLine=nearestPointOnLine(lines,pt,{units:\"kilometers\"}),linePt=_nearestPointOnLine.geometry.coordinates,properties=_nearestPointOnLine.properties;return{point:linePt,properties:properties}}},{key:\"getAdjustedPoint\",value:function getAdjustedPoint(_paths,ll){var ajustPt=ll;if(this.adsorb&&_paths&&_paths.length>0){var mvPt=[ll.lng,ll.lat];var allPoints=_paths.reduce(function(pre,n){return pre.concat(n)});var _this$getPointOnLine=this.getPointOnLine(_paths,ll),linePt=_this$getPointOnLine.point;var _this$adsorbDistance=this.adsorbDistance,lAbPx=_this$adsorbDistance.line,vAbPx=_this$adsorbDistance.point;var nearVPt=getNearestPoint(mvPt,allPoints);if(!nearVPt){return ajustPt}var vDist=getPixelDistance(this.map,[nearVPt.point,mvPt]);var linePtDist=getPixelDistance(this.map,[linePt,mvPt]);if(vDist<vAbPx){var refLoc=new AMap.LngLat(nearVPt.point[0],nearVPt.point[1]);ajustPt=refLoc}else{if(linePtDist<lAbPx){var _refLoc=new AMap.LngLat(linePt[0],linePt[1]);ajustPt=_refLoc}}}return ajustPt}},{key:\"getPath\",value:function getPath(){var _this6=this;var result=[];forEach(this.adsorbPolygons,function(p){if(!_this6.editingPolyObj){return}if(p===_this6.editingPolyObj.poly){return}var path=p.getPath();var jsonPath=multiPolygonJson(jsonLngLatData(path));if(!jsonPath){return}var _iterator=_createForOfIteratorHelper(jsonPath),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var poly=_step.value;var _iterator2=_createForOfIteratorHelper(poly),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var ring=_step2.value;result.push(ring)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}});return result}},{key:\"destroy\",value:function destroy(){this.clearVertexMarkers();this.clearTipMarkers();this.destroyed=true}},{key:\"handleVertexMouseOver\",value:function handleVertexMouseOver(e){if(this.destroyed){return}this.emit(EnumSingleRingEvent.pointmouseover,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"vertex\"})}},{key:\"handleVertexMouseOut\",value:function handleVertexMouseOut(e){if(this.destroyed){return}this.emit(EnumSingleRingEvent.pointmouseout,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"vertex\"})}},{key:\"handleMidVertexMouseOver\",value:function handleMidVertexMouseOver(e){if(this.destroyed){return}this.emit(EnumSingleRingEvent.pointmouseover,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"middle\"})}},{key:\"handleMidVertexMouseOut\",value:function handleMidVertexMouseOut(e){if(this.destroyed){return}this.emit(EnumSingleRingEvent.pointmouseout,{lnglat:e.lnglat,pixel:e.pixel,target:e.target,markerType:\"middle\"})}},{key:\"syncPath\",value:function syncPath(){var path=[];var _iterator3=_createForOfIteratorHelper(this.editingVertexMarkerList),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var marker=_step3.value;if(!marker.getMap()){var first=this.editingVertexMarkerList[0];if(first){path.push(first.getCenter())}continue}var coord=marker.getCenter();path.push(coord)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}this.path=path;this.initTipMarkers()}}]);return SingleRingList}(AMap.Event);var SingleRingListHandle=function(){function SingleRingListHandle(parent){_classCallCheck(this,SingleRingListHandle);this.parent=parent;this.list=[]}_createClass(SingleRingListHandle,[{key:\"updatePath\",value:function updatePath(path,_opt){if(isNumberArrayArray(path)){this.type=\"Ring\";this.list=new SingleRingList(AMap.Util.parseLngLatData(path),_opt,this.parent)}else if(isNumberArrayArrayArray(path)){this.type=\"Polygon\";var _iterator=_createForOfIteratorHelper(path),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var ring=_step.value;this.list.push(new SingleRingList(AMap.Util.parseLngLatData(ring),_opt,this.parent))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else if(isNumberArrayArrayArrayArray(path)){this.type=\"Multipolygon\";var _iterator2=_createForOfIteratorHelper(path),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var poly=_step2.value;var polyArray=[];var _iterator3=_createForOfIteratorHelper(poly),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _ring=_step3.value;polyArray.push(new SingleRingList(AMap.Util.parseLngLatData(_ring),_opt,this.parent))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}this.list.push(polyArray)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}else{this.type=\"Error\";console.log(\"WARING: Polygon has no path\")}}},{key:\"forEach\",value:function forEach(cb){switch(this.type){case\"Ring\":cb(this.list);break;case\"Polygon\":var _iterator4=_createForOfIteratorHelper(this.list),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var singleRing=_step4.value;cb(singleRing)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}break;case\"Multipolygon\":{var _iterator5=_createForOfIteratorHelper(this.list),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var poly=_step5.value;var _iterator6=_createForOfIteratorHelper(poly),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var ring=_step6.value;cb(ring)}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}break}}}},{key:\"getPath\",value:function getPath(){switch(this.type){case\"Ring\":return this.list.path;case\"Polygon\":var polyPath=[];var _iterator7=_createForOfIteratorHelper(this.list),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var singleRing=_step7.value;var ringPath=singleRing.path;if(ringPath&&ringPath.length>0){polyPath.push(ringPath)}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return polyPath;case\"Multipolygon\":var multipolyPath=[];var _iterator8=_createForOfIteratorHelper(this.list),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var poly=_step8.value;var _polyPath=[];var _iterator9=_createForOfIteratorHelper(poly),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var ring=_step9.value;var _ringPath=ring.path;if(_ringPath&&_ringPath.length>0){_polyPath.push(_ringPath)}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}multipolyPath.push(_polyPath)}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return multipolyPath}}},{key:\"clear\",value:function clear(){this.type=\"Error\";this.list=[]}}]);return SingleRingListHandle}();var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var isMobile=AMap.Browser.mobile;var amplify=1;var createOptions={zIndex:50,strokeColor:\"#FF33FF\",strokeOpacity:.2,strokeWeight:6,strokeStyle:\"solid\",bubble:false,fillColor:\"#1791fc\",fillOpacity:.4};var defaultOpt={createOptions:createOptions,adsorbPolygons:[],adsorb:true,editable:false,drawable:false,overlap:false,adsorbDistance:{line:10,point:15},allBubble:true,editOptions:{fillOpacity:.3,cursor:\"pointer\",strokeWeight:4,strokeStyle:\"solid\",strokeColor:\"#1791fc\",strokeOpacity:.8}};var PolygonEditor=function(_AMap$Event){_inherits(PolygonEditor,_AMap$Event);var _super=_createSuper(PolygonEditor);function PolygonEditor(map,target){var _this;var opt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolygonEditor);_this=_super.call(this);_this.isOpenStatus=false;_this.singleRingList=[];_this.singleRingListHandle=new SingleRingListHandle(_assertThisInitialized(_this));_this.movePoint={};_this._editing=false;_this.className=\"PolygonEditor\";_this.GRAPH_NAME=\"Polygon\";_this.onAddPick=_this.onAddPick.bind(_assertThisInitialized(_this));_this.onAddingMouseMove=_this.onAddingMouseMove.bind(_assertThisInitialized(_this));_this.open=_this.open.bind(_assertThisInitialized(_this));_this.close=_this.close.bind(_assertThisInitialized(_this));_this.OPEN_STATUS=false;_this._opt=AMap.extend(defaultOpt,opt,{bubble:false});var _this$_opt=_this._opt,originPaths=_this$_opt.paths,adsorbPolygons=_this$_opt.adsorbPolygons,adsorb=_this$_opt.adsorb,editable=_this$_opt.editable,drawable=_this$_opt.drawable,adsorbDistance=_this$_opt.adsorbDistance,overlap=_this$_opt.overlap;if(!map){console.log(\"ERROR: no map\");return _possibleConstructorReturn(_this)}_this.map=map;_this.drawable=drawable;_this.editable=editable;_this.adsorb=adsorb;_this.adsorbDistance=adsorbDistance;_this.overlap=overlap;_this.adsorbPolygons=adsorbPolygons||[];_this.originPaths=originPaths;_this.editingVertexMarkerList=[];_this.editingMidTipMarkerList=[];_this.addingPoly=null;_this.showTipMarker=true;_this.editingPolyObj=target&&{poly:target}||null;_this.defaultMarkerOpt={zIndex:999998,bubble:false,cursor:\"pointer\",clickable:true,draggable:true,radius:isMobile?6:6,strokeColor:\"#1791fc\",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.2:1,fillColor:\"white\",fillOpacity:1,innerOverlay:true};_this.midControlPoint=AMap.extend({zIndex:999999,bubble:false,cursor:\"pointer\",clickable:true,radius:6,strokeColor:\"white\",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,innerOverlay:true},opt.midControlPoint||{});_this.controlPoint=AMap.extend({draggable:true,cursor:\"pointer\",bubble:false,zIndex:999999,innerOverlay:true},opt.controlPoint||{});_this.movePoint=AMap.extend({bubble:true,innerOverlay:true},opt.controlPoint||{});_this.defaultCursor=map.getDefaultCursor();onKeyDown(_this.onHandleKeydown.bind(_assertThisInitialized(_this)));_this.mvPickMarker=_this.createMarker(AMap.extend({center:new AMap.LngLat(0,0),bubble:true,innerOverlay:true},_this.movePoint));_this[\"mvPickMarker\"].hide();_this.map.add(_this.mvPickMarker);_this._handleRingChange=_this._handleRingChange.bind(_assertThisInitialized(_this));_this._handleRingAdjust=_this._handleRingAdjust.bind(_assertThisInitialized(_this));_this._handleRingAddnode=_this._handleRingAddnode.bind(_assertThisInitialized(_this));_this._handleRingRemovenode=_this._handleRingRemovenode.bind(_assertThisInitialized(_this));_this.draggListener();return _this}_createClass(PolygonEditor,[{key:\"CLASS_NAME\",get:function get(){return this.className}},{key:\"draggListener\",value:function draggListener(){if(this.editingPolyObj){if(this.isOpenStatus&&this.editingPolyObj.poly){this.editingPolyObj.poly.on(\"dragstart\",this.close);this.editingPolyObj.poly.on(\"dragend\",this.open)}}}},{key:\"onMapDblclick\",value:function onMapDblclick(e){if(this.drawable){this.finishAddingPolygon(false,e)}}},{key:\"onMapRightclick\",value:function onMapRightclick(e){if(this.drawable){this.finishAddingPolygon(true,e)}}},{key:\"editPoly\",value:function editPoly(){var _this2=this;this.mvPickMarker.hide();this.chosedPoint=null;var poly=this.editingPolyObj.poly;if(poly){var path=poly.getPath();this.editingPolyObj.origin_path=path;var opt=poly.getOptions();delete opt.path;delete opt.map;this.editingPolyObj.origin_options=opt;var jsonPath=jsonLngLatData(path);this.singleRingListHandle.updatePath(jsonPath,opt);this.singleRingListHandle.forEach(function(list){list.highLightEditPoly();_this2.bindListen(list)});var style=this._opt.editOptions||{fillColor:\"#f00\",fillOpacity:1};var editOpt=AMap.extend({},this._opt,style);poly.setOptions(editOpt)}}},{key:\"getPathFromSingleRings\",value:function getPathFromSingleRings(){return this.singleRingListHandle.getPath()}},{key:\"setLayerOptions\",value:function setLayerOptions(layer,changeOpt){var opt=layer.getOptions();var _opt=AMap.extend({},opt,changeOpt);layer.setOptions(_opt)}},{key:\"getIcon\",value:function getIcon(){var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[10,10];var icon=new AMap.Icon({size:new AMap.Size(size[0],size[1]),image:\"http://47.93.246.7/api/static/images/dd-via.png\",imageSize:new AMap.Size(size[0],size[1])});return icon}},{key:\"getMergeMkrOptions\",value:function getMergeMkrOptions(opt){var _opt=AMap.extend({},this.defaultMarkerOpt,opt);_opt.radius*=amplify;return _opt}},{key:\"createMarker\",value:function createMarker(opt){var _opt=this.getMergeMkrOptions(opt);return new AMap.CircleMarker(_opt)}},{key:\"onAddPick\",value:function onAddPick(e){if(!this.drawable)return;if(!this.map){console.log(\"ERROR: no map\");return}var adsorbPt=isMobile?e.lnglat:this.mvPickMarker.getCenter();var insertIndex=0;if(!this.addingPoly){var _path=[[adsorbPt.lng,adsorbPt.lat],[adsorbPt.lng,adsorbPt.lat]];if(isMobile){_path.pop()}var opt=AMap.extend({},this._opt,{bubble:true});this.addingPoly=createPolygon(_path,opt.editOptions);this.map.add(this.addingPoly);this._mapStatusDb=this.map.getStatus().doubleClickZoom;this.map[\"setStatus\"]({doubleClickZoom:false})}else{var arr=this.addingPoly[\"getPath\"]();if(!isMobile){arr.pop();arr.push(adsorbPt)}arr.push(adsorbPt);insertIndex=arr.length-2;this.addingPoly[\"setPath\"](arr)}this.emit(\"addnode\",{target:this.addingPoly,pixel:e.pixel,lnglat:e.lnglat})}},{key:\"getPointOnLine\",value:function getPointOnLine(_paths,ll){if(this.GRAPH_NAME===\"Polygon\"){_paths.forEach(function(path){if(path.length>2&&path[0]!==path[path.length-1]){path.push(path[0])}})}var mvPt=[ll.lng,ll.lat];var lines=multiLineString(_paths);var pt=point(mvPt);var _nearestPointOnLine=nearestPointOnLine(lines,pt,{units:\"kilometers\"}),linePt=_nearestPointOnLine.geometry.coordinates,properties=_nearestPointOnLine.properties;return{point:linePt,properties:properties}}},{key:\"onAddingMouseMove\",value:function onAddingMouseMove(e){if(!this.drawable)return;var ll=e2ll(e);var _paths=this.getPath();var ajustPt=this.getAdjustedPoint(_paths,ll);if(this.mvPickMarker){this.mvPickMarker.setCenter(ajustPt);if(ajustPt==ll){this.mvPickMarker.hide()}else{this.mvPickMarker.show()}}if(this.addingPoly){var arr=this.addingPoly[\"getPath\"]();arr.pop();arr.push(ajustPt);this.addingPoly[\"setPath\"](arr)}}},{key:\"getPolyArrPath\",value:function getPolyArrPath(poly){var path=poly.getPath();var _path=map(path,function(loc){return[loc.lng,loc.lat]});return _path}},{key:\"getAdjustedPoint\",value:function getAdjustedPoint(_paths,ll){var ajustPt=ll;if(this.adsorb&&_paths&&_paths.length>0){var mvPt=[ll.lng,ll.lat];var allPoints=_paths.reduce(function(pre,n){return pre.concat(n)});var _this$getPointOnLine=this.getPointOnLine(_paths,ll),linePt=_this$getPointOnLine.point;var _this$adsorbDistance=this.adsorbDistance,lAbPx=_this$adsorbDistance.line,vAbPx=_this$adsorbDistance.point;var nearVPt=getNearestPoint(mvPt,allPoints);if(!nearVPt){return ajustPt}var vDist=getPixelDistance(this.map,[nearVPt.point,mvPt]);var linePtDist=getPixelDistance(this.map,[linePt,mvPt]);if(this.showTipMarker){var mvp=new AMap.LngLat(mvPt[0],mvPt[1]);this.mvPickMarker.setCenter(mvp)}if(vDist<vAbPx){var refLoc=new AMap.LngLat(nearVPt.point[0],nearVPt.point[1]);ajustPt=refLoc}else{if(linePtDist<lAbPx){var _refLoc=new AMap.LngLat(linePt[0],linePt[1]);ajustPt=_refLoc}}}return ajustPt}},{key:\"finishAddingPolygon\",value:function finishAddingPolygon(){var stripLast=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;if(this.addingPoly){var arr=this.addingPoly[\"getPath\"]();if(stripLast){if(!isMobile){arr.pop()}}else{arr.pop();if(!isMobile){arr.pop()}}if(arr.length>2){this.addingPoly[\"setPath\"](arr);var success=this.tailorPolygonOverlaps();if(success){this.emit(\"add\",{target:this.addingPoly,obj:this.addingPoly,lnglat:e.lnglat,pixel:e.pixel});this.editingPolyObj={poly:this.addingPoly};this.addingPoly=undefined;this.openEdit();this.editingPolyObj.origin_options=this._opt.createOptions}else{alert(\"您正在编辑的多边形不合规（边不能交叉），请重新添加\")}}else{this.cancel()}}if(this.addingPoly){this.drawable=false}else{this.emit(\"cancel\",{lnglat:e.lnglat,pixel:e.pixel})}}},{key:\"getClosePath\",value:function getClosePath(path){var last=path[path.length-1];if(last&&last!==path[0]){return path.concat([path[0]])}else{return path}}},{key:\"tailorPolygonOverlaps\",value:function tailorPolygonOverlaps(){return true}},{key:\"getPolygons\",value:function getPolygons(){return this.adsorbPolygons}},{key:\"getPath\",value:function getPath(){var _this3=this;var result=[];forEach(this.adsorbPolygons,function(p){if(!_this3.editingPolyObj){return}if(p===_this3.editingPolyObj.poly){return}var path=p.getPath();var jsonPath=multiPolygonJson(jsonLngLatData(path));if(!jsonPath){return}var _iterator=_createForOfIteratorHelper(jsonPath),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var poly=_step.value;var _iterator2=_createForOfIteratorHelper(poly),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var ring=_step2.value;result.push(ring)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}});return result}},{key:\"addAddListener\",value:function addAddListener(){this.map.on(\"click\",this.onAddPick);this.map.on(\"mousemove\",this.onAddingMouseMove);this.map.on(\"dblclick\",this.onMapDblclick);this.map.on(\"rightclick\",this.onMapRightclick)}},{key:\"removeAddListener\",value:function removeAddListener(){this.map.off(\"click\",this.onAddPick);this.map.off(\"mousemove\",this.onAddingMouseMove);this.map.off(\"dblclick\",this.onMapDblclick);this.map.off(\"rightclick\",this.onMapRightclick)}},{key:\"open\",value:function open(){if(this.editingPolyObj&&this.editingPolyObj.poly){this.openEdit();if(this.editingPolyObj.poly._opts.draggable){this.isOpenStatus=true}this.draggListener()}else{this.openAdd()}}},{key:\"setTarget\",value:function setTarget(tar){this.close();this._opt.target=tar;this.editingPolyObj={poly:tar}}},{key:\"getTarget\",value:function getTarget(){return this.editingPolyObj&&this.editingPolyObj.poly}},{key:\"openAdd\",value:function openAdd(){this.closeEdit();this.drawable=true;this.map.setDefaultCursor(\"crosshair\");this.addAddListener();this.setAllBubble()}},{key:\"setAllBubble\",value:function setAllBubble(){if(!this._opt[\"allBubble\"]){return}this._oldBubble=this.map.getStatus().allBubble;this.map.setStatus({allBubble:true})}},{key:\"restoreBubble\",value:function restoreBubble(){this.map.setStatus({allBubble:this._oldBubble})}},{key:\"closeAdd\",value:function closeAdd(){this.drawable=false;this.clearAddingPolygon();this.removeAddListener()}},{key:\"openEdit\",value:function openEdit(){if(this.editable){return}this.closeAdd();this.clearAddingPolygon();this.editable=true;this.map.setDefaultCursor(this.defaultCursor);this.editPoly();this.setAllBubble()}},{key:\"closeEdit\",value:function closeEdit(){this.editable=false;this.clearEditingPolyStatus();this.map.setDefaultCursor(this.defaultCursor)}},{key:\"clearAddingPolygon\",value:function clearAddingPolygon(){if(this.addingPoly){this.map.remove(this.addingPoly)}this.addingPoly=null}},{key:\"clearEditingPolyStatus\",value:function clearEditingPolyStatus(){var _this4=this;if(this.editingPolyObj&&this.editingPolyObj.poly){var _this$editingPolyObj=this.editingPolyObj,poly=_this$editingPolyObj.poly,origin_options=_this$editingPolyObj.origin_options;if(poly){origin_options&&poly.setOptions(origin_options);delete poly.origin_options}}this.singleRingListHandle.forEach(function(list){list.destroy();_this4.unbindListen(list)});this.singleRingListHandle.clear()}},{key:\"setAdsorbPolygons\",value:function setAdsorbPolygons(list){this.clearAdsorbPolygons();this.addAdsorbPolygons(list)}},{key:\"clearAdsorbPolygons\",value:function clearAdsorbPolygons(){this.adsorbPolygons=[]}},{key:\"addAdsorbPolygons\",value:function addAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}Array.prototype.push.apply(this.adsorbPolygons,list)}},{key:\"removeAdsorbPolygons\",value:function removeAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}for(var i=0,len=list.length;i<len;i++){var item=list[i];var index=this.adsorbPolygons.indexOf(item);if(index>=0){this.adsorbPolygons.splice(index,1)}}}},{key:\"close\",value:function close(){this.map.setDefaultCursor(this.defaultCursor);if(!this.isOpenStatus&&this.editingPolyObj&&this.editingPolyObj.poly){this.editingPolyObj.poly.off(\"dragstart\",this.close);this.editingPolyObj.poly.off(\"dragend\",this.open)}this.isOpenStatus=false;this.clearAddingPolygon();this.closeAdd();this.closeEdit();this.editingPolyObj={poly:this.editingPolyObj&&this.editingPolyObj.poly};this.mvPickMarker.hide();this.OPEN_STATUS=false;this.restoreBubble();if(!this.editingPolyObj.poly){return}this.emit(\"end\",{target:this.getTarget()})}},{key:\"onHandleKeydown\",value:function onHandleKeydown(e){if(e.key===\"Escape\"){this.cancel()}}},{key:\"cancel\",value:function cancel(){if(this.addingPoly){this.map.remove(this.addingPoly);this.addingPoly=undefined;this.emit(\"cancel\",{})}}},{key:\"bindListen\",value:function bindListen(ring){ring.on(EnumSingleRingEvent.change,this._handleRingChange);ring.on(EnumSingleRingEvent.adjust,this._handleRingAdjust);ring.on(EnumSingleRingEvent.addnode,this._handleRingAddnode);ring.on(EnumSingleRingEvent.removenode,this._handleRingRemovenode);ring.on(EnumSingleRingEvent.pointmouseout,this._handlePointMouseOut);ring.on(EnumSingleRingEvent.pointmouseover,this._handlePointMouseOver)}},{key:\"syncPath\",value:function syncPath(){this.singleRingListHandle.forEach(function(list){list.syncPath()});this.editingPolyObj.poly.setPath(this.getPathFromSingleRings())}},{key:\"_handleRingChange\",value:function _handleRingChange(e){this.editingPolyObj.poly.setPath(this.getPathFromSingleRings())}},{key:\"_handleRingAdjust\",value:function _handleRingAdjust(e){this.editingPolyObj.poly.setPath(this.getPathFromSingleRings());this.emit(EnumSingleRingEvent.adjust,e)}},{key:\"_handleRingAddnode\",value:function _handleRingAddnode(e){this.editingPolyObj.poly.setPath(this.getPathFromSingleRings());this.emit(EnumSingleRingEvent.addnode,e)}},{key:\"_handleRingRemovenode\",value:function _handleRingRemovenode(e){var path=this.getPathFromSingleRings();this.editingPolyObj.poly.setPath(path);this.emit(EnumSingleRingEvent.removenode,e);if(!path||path.length===0){this.close();this.destroy()}}},{key:\"_handlePointMouseOver\",value:function _handlePointMouseOver(e){this.emit(EnumSingleRingEvent.pointmouseover,e)}},{key:\"_handlePointMouseOut\",value:function _handlePointMouseOut(e){this.emit(EnumSingleRingEvent.pointmouseout,e)}},{key:\"unbindListen\",value:function unbindListen(ring){ring.off(EnumSingleRingEvent.change,this._handleRingChange);ring.off(EnumSingleRingEvent.adjust,this._handleRingAdjust);ring.off(EnumSingleRingEvent.addnode,this._handleRingAddnode);ring.off(EnumSingleRingEvent.removenode,this._handleRingRemovenode);ring.off(EnumSingleRingEvent.pointmouseout,this._handlePointMouseOut);ring.off(EnumSingleRingEvent.pointmouseover,this._handlePointMouseOver)}},{key:\"destroy\",value:function destroy(){this.singleRingListHandle.forEach(function(ring){return ring.destroy()});this.singleRingListHandle.clear();this.map.remove(this.editingPolyObj.poly);delete this.editingPolyObj.poly}}]);return PolygonEditor}(AMap.Event);__decorate([autobind],PolygonEditor.prototype,\"onMapDblclick\",null);__decorate([autobind],PolygonEditor.prototype,\"onMapRightclick\",null);__decorate([autobind],PolygonEditor.prototype,\"_handlePointMouseOver\",null);__decorate([autobind],PolygonEditor.prototype,\"_handlePointMouseOut\",null);AMap[\"PolygonEditor\"]=PolygonEditor}(window.AMap);\n");
_jsload_('AMap.PolylineEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol===\"undefined\"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var normalCompletion=true,didErr=false,err;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=true;err=e},f:function(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\";ListEvent[\"pointMouseOver\"]=\"pointmouseover\";ListEvent[\"pointMouseOut\"]=\"pointmouseout\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);var _super=_createSuper(PointList);function PointList(){var _this;_classCallCheck(this,PointList);_this=_super.apply(this,arguments);_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this));node.on(ListEvent.pointMouseOver,this.handlePointMouseOver);node.on(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this));node.off(ListEvent.pointMouseOver,this.handlePointMouseOver);node.off(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handlePointMouseOver\",value:function handlePointMouseOver(e){this.emit(ListEvent.pointMouseOver,e)}},{key:\"handlePointMouseOut\",value:function handlePointMouseOut(e){this.emit(ListEvent.pointMouseOut,e)}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);__decorate([autobind],PointList.prototype,\"handlePointMouseOver\",null);__decorate([autobind],PointList.prototype,\"handlePointMouseOut\",null);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);var _super2=_createSuper(AbstractPointListNode);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_super2.apply(this,arguments);_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);function getMiddleLatLng(marker1,marker2){var p1=marker1.getCenter();var p2=marker2.getCenter();var pos1=p1.pos;var pos2=p2.pos;var map=marker1.getMap();if(map){return map.coordsToLngLat([(pos1[0]+pos2[0])/2,(pos1[1]+pos2[1])/2])}else{return p1.divideBy(2,false).add(p2.divideBy(2,false),false)}}var callbacks=[];document.addEventListener(\"keydown\",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function isLngLat(obj){return obj.className===\"AMap.LngLat\"}function jsonLngLatData(originData){if(isLngLat(originData)){return[originData.getLng(),originData.getLat()]}else if(Array.isArray(originData)){var data=originData.slice(0);for(var i=0;i<data.length;i+=1){data[i]=jsonLngLatData(data[i])}return data}else{return originData}}function isNumber(obj){var tmp=+obj;return typeof+tmp===\"number\"&&!isNaN(tmp)}function isNumberArray(obj){return Array.isArray(obj)&&isNumber(obj[0])}function isNumberArrayArray(obj){return Array.isArray(obj)&&isNumberArray(obj[0])}function isNumberArrayArrayArray(obj){return Array.isArray(obj)&&isNumberArrayArray(obj[0])}var PolylineCreator=function(_AMap$Event){_inherits(PolylineCreator,_AMap$Event);var _super=_createSuper(PolylineCreator);function PolylineCreator(_map){var _this;_classCallCheck(this,PolylineCreator);_this=_super.call(this);_this._map=_map;_this._onMapClick=_this._onMapClick.bind(_assertThisInitialized(_this));_this._onMapMouseMove=_this._onMapMouseMove.bind(_assertThisInitialized(_this));_this._onMapDbClick=_this._onMapDbClick.bind(_assertThisInitialized(_this));_this._onMapRightClick=_this._onMapRightClick.bind(_assertThisInitialized(_this));return _this}_createClass(PolylineCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat;var resolution=this._map.getResolution();var pos1=center.offset(resolution*-30,0).toJSON();var pos2=center.offset(resolution*30,0).toJSON();var path=[pos1,pos2];this.emit(\"create\",{path:path});this.close()}},{key:\"_onMapMouseMove\",value:function _onMapMouseMove(){}},{key:\"_onMapDbClick\",value:function _onMapDbClick(){}},{key:\"_onMapRightClick\",value:function _onMapRightClick(){}}]);return PolylineCreator}(AMap.Event);var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);var _super=_createSuper(Point);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_super.call(this);_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);var _super2=_createSuper(PointWithMarker);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_super2.call(this);_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var PolylinePoint=function(_AbstractPointListNod){_inherits(PolylinePoint,_AbstractPointListNod);var _super=_createSuper(PolylinePoint);function PolylinePoint(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylinePoint);_this=_super.call(this);_this.map=map;_this.pos=pos;_this.editing=false;_this.prevIsMiddle=false;_this._opts=opts;_this.point=new Point(map,pos,opts);_this.middleFlag=false;_this.bindEvents();return _this}_createClass(PolylinePoint,[{key:\"bindEvents\",value:function bindEvents(){this.point.marker.on(\"dragstart\",this.handleHandleDragStart);this.point.marker.on(\"dragend\",this.handleHandleDragEnd);this.point.marker.on(\"dragging\",this.handleHandleDragging);this.point.marker.on(\"click\",this.handleHandleClick);this.point.marker.on(\"mouseover\",this.handleHandleMouseOver);this.point.marker.on(\"mouseout\",this.handleHandleMouseOut)}},{key:\"unbindEvents\",value:function unbindEvents(){this.point.marker.off(\"dragstart\",this.handleHandleDragStart);this.point.marker.off(\"dragend\",this.handleHandleDragEnd);this.point.marker.off(\"dragging\",this.handleHandleDragging);this.point.marker.off(\"click\",this.handleHandleClick);this.point.marker.off(\"mouseover\",this.handleHandleMouseOver);this.point.marker.off(\"mouseout\",this.handleHandleMouseOut)}},{key:\"handleHandleDragStart\",value:function handleHandleDragStart(e){if(!this.list){return}this.editing=true;if(!this.middleFlag){return}this.prevIsMiddle=true;this.handleHandleMouseOut(e);this.setMiddle(false);var prevPos=getMiddleLatLng(this.point.marker,this.prev.point.marker);var nextPos=getMiddleLatLng(this.point.marker,this.next.point.marker);var prev=new PolylinePoint(this.map,prevPos,this._opts);var next=new PolylinePoint(this.map,nextPos,this._opts);this.list.insertBefore(prev,this);this.list.insertAfter(next,this);prev.show();next.show();prev.setMiddle(true);next.setMiddle(true);this.handleHandleMouseOver(e)}},{key:\"handleHandleClick\",value:function handleHandleClick(e){if(!this.middleFlag){this.destroy();this.emit(ListEvent.removeNode,e)}}},{key:\"handleHandleDragging\",value:function handleHandleDragging(){if(!this.middleFlag){if(this.prev&&this.prev.prev){var newPos=getMiddleLatLng(this.point.marker,this.prev.prev.point.marker);this.prev.point.marker.setCenter(newPos)}if(this.next&&this.next.next){var _newPos=getMiddleLatLng(this.point.marker,this.next.next.point.marker);this.next.point.marker.setCenter(_newPos)}}this.emit(ListEvent.change)}},{key:\"handleHandleDragEnd\",value:function handleHandleDragEnd(e){this.editing=false;if(this.prevIsMiddle&&this.list){this.prevIsMiddle=false;this.emit(ListEvent.addNode,e)}else{this.emit(ListEvent.adjust,e)}}},{key:\"handleHandleMouseOver\",value:function handleHandleMouseOver(e){if(!this.middleFlag){this.emit(ListEvent.pointMouseOver,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"vertex\"})}else{this.emit(ListEvent.pointMouseOver,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"middle\"})}}},{key:\"handleHandleMouseOut\",value:function handleHandleMouseOut(e){if(!this.middleFlag){this.emit(ListEvent.pointMouseOut,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"vertex\"})}else{this.emit(ListEvent.pointMouseOut,{target:e.target,lnglat:e.lnglat,pixel:e.pixel,markerType:\"middle\"})}}},{key:\"destroy\",value:function destroy(){var _a,_b;this.unbindEvents();if(this.middleFlag){if(this.list){this.list.remove(this)}this.point.remove()}else{(_a=this.prev)===null||_a===void 0?void 0:_a.destroy();(_b=this.next)===null||_b===void 0?void 0:_b.destroy();if(this.list){var prev=this.prev;var next=this.next;this.list.remove(this);if(prev&&next){var newPos=getMiddleLatLng(prev.point.marker,next.point.marker);var newMiddleMarker=new PolylinePoint(this.map,newPos,this._opts);newMiddleMarker.setMiddle(true);newMiddleMarker.show();this.list.insertAfter(newMiddleMarker,prev)}}this.point.remove()}}},{key:\"show\",value:function show(){this.point.show()}},{key:\"hide\",value:function hide(){this.point.hide()}},{key:\"setMiddle\",value:function setMiddle(middle){this.middleFlag=middle;this.point.setMiddle(middle)}}]);return PolylinePoint}(AbstractPointListNode);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleDragStart\",null);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleClick\",null);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleDragging\",null);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleDragEnd\",null);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleMouseOver\",null);__decorate$1([autobind],PolylinePoint.prototype,\"handleHandleMouseOut\",null);var __decorate$2=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var SingleLine=function(_AMap$Event){_inherits(SingleLine,_AMap$Event);var _super=_createSuper(SingleLine);function SingleLine(path,parent){var _this;_classCallCheck(this,SingleLine);_this=_super.call(this);_this.path=path;_this.parent=parent;_this.handleAddNode=_this.handleAddNode.bind(_assertThisInitialized(_this));_this.handleRemoveNode=_this.handleRemoveNode.bind(_assertThisInitialized(_this));_this.handleAdjust=_this.handleAdjust.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this}_createClass(SingleLine,[{key:\"initList\",value:function initList(){if(!this.parent._poly){console.error(\"no poly target\");return}if(!this.list){this.list=new PointList;var path=this.path;var prev;for(var i=0,len=path.length;i<len;i++){var pos=path[i];var current=new PolylinePoint(this.parent._map,pos,{controlPoint:this.parent._markerOptions,midControlPoint:this.parent._middleMarkerOptions});if(i>0){var middlePos=getMiddleLatLng(prev.point.marker,current.point.marker);var middle=new PolylinePoint(this.parent._map,middlePos,{controlPoint:this.parent._markerOptions,midControlPoint:this.parent._middleMarkerOptions});this.list.add(middle);this.list.add(current);middle.setMiddle(true)}else{this.list.add(current)}prev=current}this.bindListEvent()}this.list.forEach(function(node){node.point.marker.show()});this.parent._customStyle=AMap.extend({},this.parent._poly.getOptions());delete this.parent._customStyle.map;delete this.parent._customStyle.center;delete this.parent._customStyle.radius;delete this.parent._customStyle.path;delete this.parent._customStyle.bounds;this.parent._poly.setOptions(this.parent._selectStyle?this.parent._selectStyle:{})}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.removeNode,this.handleRemoveNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange);this.list.on(ListEvent.pointMouseOver,this.handlePointMouseOver);this.list.on(ListEvent.pointMouseOut,this.handlePointMouseOut)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.removeNode,this.handleRemoveNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange);this.list.off(ListEvent.pointMouseOver,this.handlePointMouseOver);this.list.off(ListEvent.pointMouseOut,this.handlePointMouseOut)}}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,{target:this.parent.getTarget(),pixel:e.pixel,lnglat:e.lnglat})}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){if(!this.list){return}if(this.list.length<=1){this.list.destroy();delete this.list}this.emit(ListEvent.removeNode,{target:this.parent.getTarget(),pixel:e.pixel,lnglat:e.lnglat})}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,{target:this.parent.getTarget(),pixel:e.pixel,lnglat:e.lnglat})}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,{target:this.parent.getTarget(),pixel:e.pixel,lnglat:e.lnglat})}},{key:\"handlePointMouseOver\",value:function handlePointMouseOver(e){this.emit(ListEvent.pointMouseOver,e)}},{key:\"handlePointMouseOut\",value:function handlePointMouseOut(e){this.emit(ListEvent.pointMouseOut,e)}},{key:\"syncPath\",value:function syncPath(){if(this.list){this.list.forEach(function(point){point.handleHandleDragging()})}}},{key:\"getPath\",value:function getPath(){if(!this.list){return}var path=[];this.list.forEach(function(node){if(!node.middleFlag||node.editing){path.push(node.point.marker.getCenter())}});return path}},{key:\"destroy\",value:function destroy(){var _a,_b;this.unbindListEvent();(_a=this.list)===null||_a===void 0?void 0:_a.forEach(function(node){node.point.marker.hide()});(_b=this.list)===null||_b===void 0?void 0:_b.destroy()}}]);return SingleLine}(AMap.Event);__decorate$2([autobind],SingleLine.prototype,\"handlePointMouseOver\",null);__decorate$2([autobind],SingleLine.prototype,\"handlePointMouseOut\",null);var __decorate$3=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var PolylineEditor=function(_AMap$Event){_inherits(PolylineEditor,_AMap$Event);var _super=_createSuper(PolylineEditor);function PolylineEditor(_map,_poly){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolylineEditor);_this=_super.call(this);_this._map=_map;_this.singleLineList=[];_this.singleLineListHandler=new SingleLineHandler(_assertThisInitialized(_this));_this._defaultStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeColor:\"#3366FF\",strokeOpacity:1,strokeWeight:6,strokeStyle:\"solid\",lineJoin:\"round\",lineCap:\"round\"};_this._selectStyle={isOutline:true,outlineColor:\"white\",borderWeight:2,strokeWeight:4,strokeStyle:\"solid\",strokeDasharray:[10,10],strokeColor:\"#1791fc\",strokeOpacity:.8,lineJoin:\"round\",lineCap:\"round\"};_this._markerOptions={};_this._middleMarkerOptions={};_this.className=\"AMap.PolylineEditor\";_this._editing=false;_this.handleAddNode=_this.handleAddNode.bind(_assertThisInitialized(_this));_this.handleRemoveNode=_this.handleRemoveNode.bind(_assertThisInitialized(_this));_this.handleAdjust=_this.handleAdjust.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));if(!_this._map){console.log(\"ERROR: no map\")}_this._creator=new PolylineCreator(_map);_this._poly=_poly;if(opts){_this._defaultStyle=opts.createOptions?AMap.extend(_this._defaultStyle,opts.createOptions):_this._defaultStyle;_this._selectStyle=opts.editOptions?AMap.extend(_this._selectStyle,opts.editOptions):_this._selectStyle;_this._markerOptions=opts.controlPoint?AMap.extend(_this._markerOptions,opts.controlPoint):_this._markerOptions;_this._middleMarkerOptions=opts.midControlPoint?AMap.extend(_this._middleMarkerOptions,opts.midControlPoint):_this._middleMarkerOptions}_this._creator.on(\"create\",function(data){_this._creator.close();var path=data.path;var poly=new AMap.Polyline(AMap.extend({map:_map,path:path},_this._defaultStyle));_this.setTarget(poly);_this.open();_this.emit(ListEvent.add,{target:_this.getTarget(),obj:poly})});return _this}_createClass(PolylineEditor,[{key:\"createSingleLine\",value:function createSingleLine(){var _this2=this;if(!this._poly){console.error(\"no poly target\");return}var path=this._poly.getPath();var jsonPath=jsonLngLatData(path);this.singleLineListHandler.updatePath(jsonPath);this.singleLineListHandler.forEach(function(line){line.initList();_this2._bindSingleLine(line)})}},{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}this._poly=overlay}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"bindListEvent\",value:function bindListEvent(){}},{key:\"unbindListEvent\",value:function unbindListEvent(){}},{key:\"handleChange\",value:function handleChange(){this._updatePath()}},{key:\"handleAddNode\",value:function handleAddNode(e){this._updatePath();this.emit(ListEvent.addNode,e)}},{key:\"handlePointMouseOver\",value:function handlePointMouseOver(e){this.emit(ListEvent.pointMouseOver,e)}},{key:\"handlePointMouseOut\",value:function handlePointMouseOut(e){this.emit(ListEvent.pointMouseOut,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){var endflag=this._updatePath();this.emit(ListEvent.removeNode,e);if(endflag){this.close();this.destroy()}}},{key:\"handleAdjust\",value:function handleAdjust(e){this._updatePath();this.emit(ListEvent.adjust,e)}},{key:\"open\",value:function open(){if(!this._poly&&!this._editing){this._creator.open()}else if(!this._editing){this._editing=true;this.createSingleLine()}}},{key:\"close\",value:function close(){var _this3=this;this._creator.close();this._editing=false;if(!this._poly){return}this.singleLineListHandler.forEach(function(line){_this3._unbindSingleLine(line);line.destroy()});this.singleLineListHandler.clear();this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){this.singleLineListHandler.forEach(function(line){return line.destroy()});this.singleLineListHandler.clear();delete this._poly}},{key:\"_updatePath\",value:function _updatePath(){if(!this._poly){return}var path=this.singleLineListHandler.getPath();if(!path||path.length===0){this._map.remove(this._poly);return true}else{this._poly.setPath(path)}}},{key:\"_bindSingleLine\",value:function _bindSingleLine(line){line.on(ListEvent.change,this.handleChange);line.on(ListEvent.adjust,this.handleAdjust);line.on(ListEvent.removeNode,this.handleRemoveNode);line.on(ListEvent.addNode,this.handleAddNode);line.on(ListEvent.change,this.handleChange);line.on(ListEvent.pointMouseOver,this.handlePointMouseOver);line.on(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"_unbindSingleLine\",value:function _unbindSingleLine(line){line.off(ListEvent.change,this.handleChange);line.off(ListEvent.adjust,this.handleAdjust);line.off(ListEvent.removeNode,this.handleRemoveNode);line.off(ListEvent.addNode,this.handleAddNode);line.off(ListEvent.change,this.handleChange);line.off(ListEvent.pointMouseOver,this.handlePointMouseOver);line.off(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"syncPath\",value:function syncPath(){this.singleLineListHandler.forEach(function(line){line.syncPath()});this._updatePath()}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return PolylineEditor}(AMap.Event);__decorate$3([autobind],PolylineEditor.prototype,\"handlePointMouseOver\",null);__decorate$3([autobind],PolylineEditor.prototype,\"handlePointMouseOut\",null);var SingleLineHandler=function(){function SingleLineHandler(parent){_classCallCheck(this,SingleLineHandler);this.parent=parent}_createClass(SingleLineHandler,[{key:\"updatePath\",value:function updatePath(path){if(isNumberArrayArray(path)){this.type=\"Line\";this.list=new SingleLine(AMap.Util.parseLngLatData(path),this.parent)}else if(isNumberArrayArrayArray(path)){this.type=\"MultiLine\";this.list=[];var _iterator=_createForOfIteratorHelper(path),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var ring=_step.value;this.list.push(new SingleLine(AMap.Util.parseLngLatData(ring),this.parent))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}else{this.type=\"Error\";console.log(\"WARING: PolyLine has no path\")}}},{key:\"forEach\",value:function forEach(cb){switch(this.type){case\"Line\":cb(this.list);break;case\"MultiLine\":var _iterator2=_createForOfIteratorHelper(this.list),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var line=_step2.value;cb(line)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}break}}},{key:\"getPath\",value:function getPath(){switch(this.type){case\"Line\":return this.list.getPath();case\"MultiLine\":var polyPath=[];var _iterator3=_createForOfIteratorHelper(this.list),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var singleRing=_step3.value;var ringPath=singleRing.getPath();if(ringPath&&ringPath.length>0){polyPath.push(ringPath)}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return polyPath}}},{key:\"clear\",value:function clear(){this.type=\"Error\";this.list=[]}}]);return SingleLineHandler}();AMap.PolylineEditor=PolylineEditor}(window.AMap);\n");
_jsload_('AMap.RangingTool.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var RangingTool=function(_super){function __(){this.constructor=d}var d,b;function RangingTool(labelOffset,opts){var _this=_super.call(this)||this;if(_this.CLASS_NAME=\"AMap.RangingTool\",_this.STATUS={OFF:0,READY:1,WORKING:2},!labelOffset)throw new Error(\"创建AMap.RangingTool实例必须传入地图对象作为第一个参数: new AMap.RangingTool(mapObj);\");_this._map=labelOffset,_this._container=_this._map.getMapsContainer(),opts=opts||{};var imgHost=AMap.getConfig().protocol+\"://webapi.amap.com\",nodeImg=(imgHost=labelOffset&&labelOffset.offlineServer&&labelOffset.offlineServer[0]?labelOffset.offlineServer[0]+\"/static\":imgHost)+\"/images/pldot.png\",nodeSize=new AMap.Size(12,12),nodeOptionsArray=[];_this._keydownEvent=_this._onKeyDown.bind(_this);for(var labelOffset=new AMap.Pixel(-6,6),i=0;i<3;i+=1)nodeOptionsArray.push({icon:new AMap.Icon({size:nodeSize,imageOffset:new AMap.Pixel(-12*i,0),image:nodeImg}),anchor:\"top-left\",offset:[-6,-6],cursor:\"pointer\",bubble:!0,draggable:!1,zIndex:120,innerOverlay:!0});return _this.startMarkerOptions=nodeOptionsArray[0],_this.midMarkerOptions=nodeOptionsArray[2],_this.endMarkerOptions=nodeOptionsArray[1],_this.lineOptions=_this.tmpLineOptions={strokeColor:\"#1791fc\",strokeOpacity:.8,strokeWeight:2,bubble:!0,draggable:!1,innerOverlay:!0},_this.startLabelText=\"起点</div>\",_this.midLabelText=\"{d}公里</div>\",_this.endLabelText=\"共{d}公里</div>\",_this.startLabelOffset=_this.midLabelOffset=_this.endLabelOffset=labelOffset,_this.keyboardEve=!1,_this.d=1e3,1===opts.d&&(_this.d=1,_this.midLabelText=\"{d}米</div>\",_this.endLabelText=\"共{d}米</div>\"),_this.dn=\"<img class='deleteNode' src='\"+imgHost+\"/images/remove.png' />\",_this.dl=\"<img class='delimg' src='\"+imgHost+\"/images/destroy.png' />\",_this.merge(_this,opts),_this._lastRecord=null,_this._status=_this.STATUS.OFF,_this}return extendStatics(d=RangingTool,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),RangingTool.prototype.turnOn=function(){this._status===this.STATUS.OFF&&(this._off2Ready(),this._cacheDoubleClickZoom=this._map.getStatus().doubleClickZoom,this._map.setStatus({doubleClickZoom:!1}))},RangingTool.prototype.turnOff=function(removeOverlays){this._status===this.STATUS.READY?(this._ready2Off(),this._map.setStatus({doubleClickZoom:this._cacheDoubleClickZoom})):this._status===this.STATUS.WORKING&&(this._onEnd(),this._working2Off(),this._map.setStatus({doubleClickZoom:this._cacheDoubleClickZoom})),removeOverlays&&this._removeAllRecords()},RangingTool.prototype.setOptions=function(opts){this.merge(this,opts)},RangingTool.prototype.merge=function(obj1,obj2){for(var i in obj2)obj2.hasOwnProperty(i)&&(obj1[i]=obj2[i],\"tmpLineOptions\"!==i&&\"lineOptions\"!==i||(obj1[i].bubble=!0))},RangingTool.prototype.updateOptions=function(marker,options){var key,value,setting={position:[void 0,\"setPosition\"],draggable:[!1,\"setDraggable\"],content:[void 0,\"setContent\"],icon:[void 0,\"setIcon\"],offset:[void 0,\"setOffset\"],zIndex:[100,\"setzIndex\"]};for(key in setting)!setting.hasOwnProperty(key)||void 0!==(value=options[key]||setting[key][0])&&marker[setting[key][1]](value)},RangingTool.prototype._off2Ready=function(){this._map.on(\"click\",this._onStart,this,!0),this._status=this.STATUS.READY},RangingTool.prototype._ready2Off=function(){this._map.off(\"click\",this._onStart,this),this._status=this.STATUS.OFF},RangingTool.prototype._ready2Working=function(){this._map.on(\"click\",this._onAddNode,this),this._map.on(\"mousemove\",this._onMouseMove,this),this._map.on(\"rightclick\",this._onEnd,this,!0),this._map.on(\"dblclick\",this._onEnd,this,!0),this._container.addEventListener(\"keydown\",this._keydownEvent),this._status=this.STATUS.WORKING},RangingTool.prototype._working2Off=function(){this._map.off(\"click\",this._onStart,this),this._map.off(\"click\",this._onAddNode,this),this._map.off(\"mousemove\",this._onMouseMove,this),this._map.off(\"rightclick\",this._onEnd,this),this._map.off(\"dblclick\",this._onEnd,this,!0),this._container.removeEventListener(\"keydown\",this._keydownEvent),this._status=this.STATUS.OFF},RangingTool.prototype._working2Ready=function(){this._working2Off(),this._off2Ready(),this._status=this.STATUS.READY},RangingTool.prototype._onStart=function(e){this._map.setStatus({allBubble:!0});var record={prev:this._lastRecord},addnodeEvent={_position:e.lnglat,_marker:null};record._lastNode=addnodeEvent,this._lastRecord&&(this._lastRecord.next=record),this.originDraggable=this._map.getStatus().dragEnable,this._map.setStatus({dragEnable:!1}),this._lastRecord=record,this._renderMarker(addnodeEvent,this.startMarkerOptions),this._renderLabel(addnodeEvent,this.startLabelText,this.startLabelOffset,this._getRemoveNodeFunction(addnodeEvent,record)),this._ready2Working();addnodeEvent={position:e.lnglat,marker:addnodeEvent._marker};this.emit(\"addnode\",addnodeEvent)},RangingTool.prototype._onAddNode=function(e){var record=this._lastRecord,prevNode=record._lastNode,addnodeEvent={_position:e.lnglat,prev:prevNode,_marker:null};prevNode&&prevNode._position.equals(e.lnglat)?this._onEnd():(prevNode.next=addnodeEvent,record._lastNode=addnodeEvent,this._renderMarker(addnodeEvent,this.midMarkerOptions),this._renderLabel(addnodeEvent,this.midLabelText,this.midLabelOffset,this._getRemoveNodeFunction(addnodeEvent,record)),this._renderLine(record),this._tmpLine&&this._tmpLine.setPath([e.lnglat,e.lnglat]),addnodeEvent={position:e.lnglat,marker:addnodeEvent._marker},this.emit(\"addnode\",addnodeEvent))},RangingTool.prototype._onMouseMove=function(e){var record=this._lastRecord,moveEvent=record._lastNode._position;this._tmpLine||(this._tmpLine=new AMap.Polyline(this.tmpLineOptions),this._tmpLine.name=\"tmpLine\",this._map.add(this._tmpLine)),this._tmpLine.isOfficial=!0,this._tmpLine.setPath([moveEvent,e.lnglat]);moveEvent=this._tmpLine.getLength();record._line&&(moveEvent+=record._line.getLength());moveEvent={position:e.lnglat,distance:moveEvent,target:this};this.emit(\"move\",moveEvent)},RangingTool.prototype._onKeyDown=function(e){27===e.keyCode&&this._onEnd()},RangingTool.prototype._onEnd=function(){var endEvent=this._lastRecord,node=endEvent&&endEvent._lastNode;this._map.setStatus({allBubble:!1,dragEnable:this.originDraggable}),this.endMarkerOptions.bubble=!1,node&&node.prev?(this._renderMarker(node,this.endMarkerOptions),this._renderLabel(node,this.endLabelText,this.endLabelOffset,this._getRemoveNodeFunction(node,endEvent),this._getRemoveRecordFunction(endEvent))):endEvent&&this._removeRecord(endEvent),this._working2Ready(),this._tmpLine&&(this._map.remove(this._tmpLine),this._tmpLine=null),endEvent&&endEvent._line?(endEvent._line.setOptions({bubble:!1}),endEvent={polyline:endEvent._line,points:endEvent._line.getPath(),distance:endEvent._line.getLength()},this.emit(\"end\",endEvent)):this.emit(\"cancel\",{obj:!1})},RangingTool.prototype._renderLine=function(record){for(var path=[],cur=record._lastNode;cur;)path.unshift(cur._position),cur=cur.prev;path.length<2?this._removeRecord(record):record._line?record._line.setPath(path):(record._line=new AMap.Polyline(this.lineOptions),record._line.isOfficial=!0,record._line.name=\"recrdLine\",record._line.setPath(path),this._map.add(record._line))},RangingTool.prototype._renderMarker=function(node,options){var isNew=!node._marker;this._map;this.merge(options,{position:node._position,bubble:!0,innerOverlay:!0}),isNew?(node._marker=new AMap.Marker(options),node._marker.name=\"marker\",this._map.add(node._marker),node._marker.isOfficial=!0):this.updateOptions(node._marker,options)},RangingTool.prototype._renderLabel=function(node,text,offset,dnCallback,dlCallback){var content=document.createElement(\"div\"),d=0;if(node._label&&(this._map.remove(node._label),delete node._label),text.match(\"{d}\")){for(var cur=node.prev;cur;)d+=AMap.GeometryUtil.distance(cur._position,cur.next._position),cur=cur.prev;d=(d/this.d).toFixed(1===this.d?1:2),text=text.replace(\"{d}\",d)}content.className=\"amap-ranging-label\";var span=document.createElement(\"span\");span.innerHTML=text,content.appendChild(span),dnCallback&&content.appendChild(this._getSmallButton(this.dn,dnCallback)),dlCallback&&content.appendChild(this._getSmallButton(this.dl,dlCallback)),node._label=new AMap.Marker({content:content,position:node._position,offset:offset,cursor:\"pointer\",zIndex:110,bubble:!1}),node._label.isOfficial=!0,node._marker.name=\"label\",this._map.add(node._label)},RangingTool.prototype._updateLabels=function(record){var cur=record._lastNode;if(cur){for(this._renderLabel(cur,this.endLabelText,this.endLabelOffset,this._getRemoveNodeFunction(cur,record),this._getRemoveRecordFunction(record));cur.prev;)cur=cur.prev,this._renderLabel(cur,this.midLabelText,this.midLabelOffset,this._getRemoveNodeFunction(cur,record));this._renderLabel(cur,this.startLabelText,this.startLabelOffset,this._getRemoveNodeFunction(cur,record))}},RangingTool.prototype._getSmallButton=function(html,callback){var button=document.createElement(\"span\");return button.innerHTML=html,button.addEventListener(\"click\",function(e){callback()}),button.addEventListener(\"mousedown\",function(e){e.stopPropagation()}),button},RangingTool.prototype._getRemoveNodeFunction=function(node,record){var _this=this;return function(){_this._status!==_this.STATUS.WORKING&&_this._removeNode(node,record)}},RangingTool.prototype._getRemoveRecordFunction=function(record){var self=this;return function(e){self._status!==self.STATUS.WORKING&&(self.emit(\"delete\",{target:self}),self._removeRecord(record))}},RangingTool.prototype._removeNode=function(node,removenodeEvent){node.prev?node.prev.next=node.next:node.next&&this._renderMarker(node.next,this.startMarkerOptions),node.next?node.next.prev=node.prev:node.prev&&(this._renderMarker(node.prev,this.endMarkerOptions),removenodeEvent._lastNode=node.prev),node.prev=node.next=null,node._marker&&(this._map.remove(node._marker),node._marker=null),node._label&&(this._map.remove(node._label),node._label=null),this._renderLine(removenodeEvent),this._updateLabels(removenodeEvent);removenodeEvent={polyline:removenodeEvent._line,points:removenodeEvent._line?removenodeEvent._line.getPath():[],distance:removenodeEvent._line?removenodeEvent._line.getLength():null,target:this};this.emit(\"removenode\",removenodeEvent)},RangingTool.prototype._removeRecord=function(record){var node=record._lastNode;for(record._line&&(this._map.remove(record._line),record._line=null);node;)node._marker&&(this._map.remove(node._marker),node._marker=null),node._label&&(this._map.remove(node._label),node._label=null),node=node.prev;record.prev&&(record.prev.next=record.next),record.next?record.next.prev=record.prev:this._lastRecord=record.prev,record._lastNode=record.prev=record.next=null},RangingTool.prototype._removeAllRecords=function(){for(;this._lastRecord;)this._removeRecord(this._lastRecord)},RangingTool}(AMap.Event);AMap.RangingTool=RangingTool}();\n");
_jsload_('AMap.RectangleEditor.js',"!function(AMap){\"use strict\";function _typeof(obj){\"@babel/helpers - typeof\";if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call===\"object\"||typeof call===\"function\")){return call}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}var Point=function(_AMap$Event){_inherits(Point,_AMap$Event);var _super=_createSuper(Point);function Point(map,pos){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Point);_this=_super.call(this);_this.map=map;_this.pos=pos;_this._markerOptions={draggable:true,radius:AMap.Browser.mobile?6:6,strokeColor:\"#1791fc\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.4:1,fillColor:\"white\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999,innerOverlay:true};_this._middleMarkerOptions={draggable:true,radius:6,strokeColor:\"white\",strokeWeight:AMap.Browser.mobile?6:2,strokeOpacity:AMap.Browser.mobile?.6:1,fillColor:\"#1791fc\",fillOpacity:1,cursor:\"pointer\",visible:false,zIndex:99999};if(opts.controlPoint){_this._markerOptions=AMap.extend(_this._markerOptions,opts.controlPoint)}if(opts.controlPoint){_this._middleMarkerOptions=AMap.extend(_this._middleMarkerOptions,opts.midControlPoint)}_this.init();_this.hide();return _this}_createClass(Point,[{key:\"init\",value:function init(){this.marker=new AMap.CircleMarker(AMap.extend({map:this.map,center:this.pos},this._markerOptions))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}},{key:\"setMiddle\",value:function setMiddle(middle){this.marker.setOptions(middle?this._middleMarkerOptions:this._markerOptions)}}]);return Point}(AMap.Event);var PointWithMarker=function(_AMap$Event2){_inherits(PointWithMarker,_AMap$Event2);var _super2=_createSuper(PointWithMarker);function PointWithMarker(map,pos){var _this2;var controlPoint=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{draggable:true,icon:new AMap.Icon({size:new AMap.Size(11,11),imageOffset:new AMap.Pixel(0,0),image:AMap.getConfig().client+\"/images/dd-via.png\"}),offset:new AMap.Pixel(-6,-6),cursor:\"pointer\",zIndex:1e3};_classCallCheck(this,PointWithMarker);_this2=_super2.call(this);_this2.map=map;_this2.pos=pos;_this2.controlPoint=controlPoint;_this2.init();_this2.hide();return _this2}_createClass(PointWithMarker,[{key:\"init\",value:function init(){this.marker=new AMap.Marker(AMap.extend({map:this.map,position:this.pos,draggable:true,cursor:\"pointer\",zIndex:1e3,innerOverlay:true},this.controlPoint))}},{key:\"show\",value:function show(){this.marker.show()}},{key:\"hide\",value:function hide(){this.marker.hide()}},{key:\"remove\",value:function remove(){this.marker.remove()}}]);return PointWithMarker}(AMap.Event);function _typeof$1(obj){if(typeof Symbol===\"function\"&&_typeof(Symbol.iterator)===\"symbol\"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!==\"function\"){throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!==\"function\"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!==\"undefined\"&&typeof Reflect.ownKeys===\"function\"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols===\"function\"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key===\"constructor\"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value===\"function\"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var ListEvent;(function(ListEvent){ListEvent[\"removeNode\"]=\"removenode\";ListEvent[\"addNode\"]=\"addnode\";ListEvent[\"adjust\"]=\"adjust\";ListEvent[\"end\"]=\"end\";ListEvent[\"change\"]=\"change\";ListEvent[\"move\"]=\"move\";ListEvent[\"add\"]=\"add\";ListEvent[\"pointMouseOver\"]=\"pointmouseover\";ListEvent[\"pointMouseOut\"]=\"pointmouseout\"})(ListEvent||(ListEvent={}));var PointList=function(_AMap$Event){_inherits(PointList,_AMap$Event);var _super=_createSuper(PointList);function PointList(){var _this;_classCallCheck(this,PointList);_this=_super.apply(this,arguments);_this.length=0;return _this}_createClass(PointList,[{key:\"add\",value:function add(node){if(!this.head){this.head=node}else{var lastNode=this.head;while(lastNode.next){lastNode=lastNode.next}lastNode.setNext(node);node.setPrev(lastNode)}node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertBefore\",value:function insertBefore(node,origin){origin.prev.setNext(node);node.setPrev(origin.prev);node.setNext(origin);origin.setPrev(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"insertAfter\",value:function insertAfter(node,origin){origin.next.setPrev(node);node.setNext(origin.next);node.setPrev(origin);origin.setNext(node);node.setList(this);this.bindNodeEvent(node);this.length+=1}},{key:\"bindNodeEvent\",value:function bindNodeEvent(node){node.on(ListEvent.change,this.handleChange.bind(this));node.on(ListEvent.addNode,this.handleAddNode.bind(this));node.on(ListEvent.adjust,this.handleAdjust.bind(this));node.on(ListEvent.removeNode,this.handleRemoveNode.bind(this));node.on(ListEvent.pointMouseOver,this.handlePointMouseOver);node.on(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"unbindNodeEvent\",value:function unbindNodeEvent(node){node.off(ListEvent.change,this.handleChange.bind(this));node.off(ListEvent.addNode,this.handleAddNode.bind(this));node.off(ListEvent.adjust,this.handleAdjust.bind(this));node.off(ListEvent.removeNode,this.handleRemoveNode.bind(this));node.off(ListEvent.pointMouseOver,this.handlePointMouseOver);node.off(ListEvent.pointMouseOut,this.handlePointMouseOut)}},{key:\"remove\",value:function remove(node){this.unbindNodeEvent(node);if(node.prev){node.prev.setNext(node.next);if(node.next){node.next.setPrev(node.prev)}node.setPrev();node.setNext()}else{this.head=node.next;node.setPrev();if(node.next){node.next.setPrev()}}this.length-=1}},{key:\"handlePointMouseOver\",value:function handlePointMouseOver(e){this.emit(ListEvent.pointMouseOver,e)}},{key:\"handlePointMouseOut\",value:function handlePointMouseOut(e){this.emit(ListEvent.pointMouseOut,e)}},{key:\"handleChange\",value:function handleChange(e){this.emit(ListEvent.change,e)}},{key:\"handleAddNode\",value:function handleAddNode(e){this.emit(ListEvent.addNode,e)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(e){this.emit(ListEvent.removeNode,e)}},{key:\"handleAdjust\",value:function handleAdjust(e){this.emit(ListEvent.adjust,e)}},{key:\"forEach\",value:function forEach(cb){var p=this.head;while(p){cb(p);p=p.next}}},{key:\"destroy\",value:function destroy(){var p=this.head;while(p){this.remove(p);p.destroy();p=p.next}}}]);return PointList}(AMap.Event);__decorate([autobind],PointList.prototype,\"handlePointMouseOver\",null);__decorate([autobind],PointList.prototype,\"handlePointMouseOut\",null);var AbstractPointListNode=function(_AMap$Event2){_inherits(AbstractPointListNode,_AMap$Event2);var _super2=_createSuper(AbstractPointListNode);function AbstractPointListNode(){var _this2;_classCallCheck(this,AbstractPointListNode);_this2=_super2.apply(this,arguments);_this2.editing=false;return _this2}_createClass(AbstractPointListNode,[{key:\"setNext\",value:function setNext(next){this.next=next}},{key:\"setPrev\",value:function setPrev(prev){this.prev=prev}},{key:\"setList\",value:function setList(list){this.list=list}}]);return AbstractPointListNode}(AMap.Event);var RectangelPoint=function(_AMap$Event){_inherits(RectangelPoint,_AMap$Event);var _super=_createSuper(RectangelPoint);function RectangelPoint(map,rect){var _this;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,RectangelPoint);_this=_super.call(this);_this.map=map;_this.rect=rect;var bounds=rect.getBounds();var isMobile=AMap.Browser.mobile;_this.southWest=new PointWithMarker(map,bounds.getSouthWest(),opts.southWestPoint||{content:'<div class=\"'+(isMobile?\"amap-rect-mobile \":\"\")+\"amap-rect-node amap-rect-\"+\"leftBottomNode\"+'\"></div>',offset:new AMap.Pixel(-10,-10)});_this.northEast=new PointWithMarker(map,bounds.getNorthEast(),opts.northEastPoint||{content:'<div class=\"'+(isMobile?\"amap-rect-mobile \":\"\")+\"amap-rect-node amap-rect-\"+\"rightTopNode\"+'\"></div>',offset:new AMap.Pixel(-10,-10)});_this.bindEvent();return _this}_createClass(RectangelPoint,[{key:\"bindEvent\",value:function bindEvent(){this.southWest.marker.on(\"dragging\",this._handleSouthWestDragging.bind(this));this.northEast.marker.on(\"dragging\",this._handleNorthEastDragging.bind(this));this.southWest.marker.on(\"dragend\",this._handleDragend.bind(this));this.northEast.marker.on(\"dragend\",this._handleDragend.bind(this));this.rect.on(\"dragging\",this._handleRectDragging.bind(this));this.rect.on(\"dragend\",this._handleRectDragend.bind(this))}},{key:\"unbindEvent\",value:function unbindEvent(){this.southWest.marker.off(\"dragging\",this._handleSouthWestDragging.bind(this));this.northEast.marker.off(\"dragging\",this._handleNorthEastDragging.bind(this));this.southWest.marker.off(\"dragend\",this._handleDragend.bind(this));this.northEast.marker.off(\"dragend\",this._handleDragend.bind(this));this.rect.off(\"dragging\",this._handleRectDragging.bind(this));this.rect.on(\"dragend\",this._handleRectDragend.bind(this))}},{key:\"show\",value:function show(){this.southWest.show();this.northEast.show();this._updateText(this.southWest.marker);this._updateText(this.northEast.marker)}},{key:\"hide\",value:function hide(){this.southWest.hide();this.northEast.hide()}},{key:\"destroy\",value:function destroy(){this.unbindEvent();this.southWest.remove();this.northEast.remove()}},{key:\"getBounds\",value:function getBounds(){return new AMap.Bounds(this.southWest.marker.getPosition(),this.northEast.marker.getPosition())}},{key:\"_updateText\",value:function _updateText(marker){var pos=marker.getPosition();if(!pos){return}var direction=marker===this.southWest.marker?\"bottom\":\"top\";marker.setLabel({content:\"\".concat(pos.lng.toFixed(6),\",\").concat(pos.lat.toFixed(6)),direction:direction})}},{key:\"_handleSouthWestDragging\",value:function _handleSouthWestDragging(){var pos=this.southWest.marker.getPosition();var antherPos=this.northEast.marker.getPosition();if(!pos||!antherPos){return}var singleStep=1e-4;var updateMarkerPosLng=false;var updateMarkerPosLat=false;if(pos.lng+singleStep>antherPos.lng){updateMarkerPosLng=true}if(pos.lat+singleStep>antherPos.lat){updateMarkerPosLat=true}if(updateMarkerPosLng||updateMarkerPosLat){var newPos=[updateMarkerPosLng?antherPos.lng-singleStep:pos.lng,updateMarkerPosLat?antherPos.lat-singleStep:pos.lat];this.southWest.marker.setPosition(newPos)}this.rect.setBounds(this.getBounds());this._updateText(this.southWest.marker);this.emit(ListEvent.change)}},{key:\"_handleNorthEastDragging\",value:function _handleNorthEastDragging(){var pos=this.northEast.marker.getPosition();var antherPos=this.southWest.marker.getPosition();if(!pos||!antherPos){return}var singleStep=1e-4;var updateMarkerPosLng=false;var updateMarkerPosLat=false;if(pos.lng-singleStep<antherPos.lng){updateMarkerPosLng=true}if(pos.lat-singleStep<antherPos.lat){updateMarkerPosLat=true}if(updateMarkerPosLng||updateMarkerPosLat){var newPos=[updateMarkerPosLng?antherPos.lng+singleStep:pos.lng,updateMarkerPosLat?antherPos.lat+singleStep:pos.lat];this.northEast.marker.setPosition(newPos)}this.rect.setBounds(this.getBounds());this._updateText(this.northEast.marker);this.emit(ListEvent.change)}},{key:\"_handleRectDragend\",value:function _handleRectDragend(e){var bounds=this.rect.getBounds();this.emit(ListEvent.move,{bounds:bounds,lnglat:e.lnglat,pixel:e.pixel})}},{key:\"_handleRectDragging\",value:function _handleRectDragging(){var bounds=this.rect.getBounds();if(!bounds){return}this.southWest.marker.setPosition(bounds.getSouthWest().toJSON());this.northEast.marker.setPosition(bounds.getNorthEast().toJSON());this._updateText(this.southWest.marker);this._updateText(this.northEast.marker)}},{key:\"_handleDragend\",value:function _handleDragend(e){var bounds=this.rect.getBounds();this.emit(ListEvent.adjust,{bounds:bounds,lnglat:e.lnglat,pixel:e.pixel})}}]);return RectangelPoint}(AMap.Event);var __decorate$1=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var BaseEditor=function(_AMap$Event){_inherits(BaseEditor,_AMap$Event);var _super=_createSuper(BaseEditor);function BaseEditor(_map,_poly){var _this;_classCallCheck(this,BaseEditor);_this=_super.call(this);_this._map=_map;_this.className=\"AMap.BaseEditor\";_this._editing=false;_this._poly=_poly;return _this}_createClass(BaseEditor,[{key:\"setTarget\",value:function setTarget(overlay){this.close();if(this._poly&&this._poly!==overlay){this.destroy()}if(overlay){this._poly=overlay}}},{key:\"getTarget\",value:function getTarget(){return this._poly}},{key:\"bindListEvent\",value:function bindListEvent(){if(this.list){this.list.on(ListEvent.addNode,this.handleAddNode);this.list.on(ListEvent.adjust,this.handleAdjust);this.list.on(ListEvent.change,this.handleChange);this.list.on(ListEvent.move,this.handleMove)}}},{key:\"unbindListEvent\",value:function unbindListEvent(){if(this.list){this.list.off(ListEvent.addNode,this.handleAddNode);this.list.off(ListEvent.adjust,this.handleAdjust);this.list.off(ListEvent.change,this.handleChange);this.list.off(ListEvent.move,this.handleMove)}}},{key:\"handleChange\",value:function handleChange(){}},{key:\"handleMove\",value:function handleMove(event){this.emit(ListEvent.move,{target:this.getTarget(),lnglat:event.lnglat,pixel:event.pixel})}},{key:\"handleAddNode\",value:function handleAddNode(event){this.emit(ListEvent.addNode,event)}},{key:\"handleRemoveNode\",value:function handleRemoveNode(){}},{key:\"handleAdjust\",value:function handleAdjust(event){this.emit(ListEvent.adjust,AMap.extend({},event,{target:this.getTarget()}))}},{key:\"open\",value:function open(){if(this._poly&&!this._editing){this._editing=true;this.initList();this._openEdit()}else{this._creator.open()}if(!this._poly||!this.list){return}}},{key:\"_openEdit\",value:function _openEdit(){if(!this.list||!this._poly){return}this.list.show();this._saveCustomStyle();this._poly.setOptions(this._editStyle?this._editStyle:{})}},{key:\"_saveCustomStyle\",value:function _saveCustomStyle(){if(!this._poly){return}this._customStyle=AMap.extend({},this._poly.getOptions());delete this._customStyle.map;delete this._customStyle.center;delete this._customStyle.radius;delete this._customStyle.path;delete this._customStyle.bounds}},{key:\"close\",value:function close(){this._editing=false;if(!this._poly){return}if(!this.list){return}this.list.hide();this._poly.setOptions(this._customStyle);this.emit(ListEvent.end,{target:this.getTarget()})}},{key:\"destroy\",value:function destroy(){if(this.list){this.unbindListEvent();this.list.destroy();delete this.list}delete this._poly}},{key:\"CLASS_NAME\",get:function get(){return this.className}}]);return BaseEditor}(AMap.Event);__decorate$1([autobind],BaseEditor.prototype,\"handleChange\",null);__decorate$1([autobind],BaseEditor.prototype,\"handleMove\",null);__decorate$1([autobind],BaseEditor.prototype,\"handleAddNode\",null);__decorate$1([autobind],BaseEditor.prototype,\"handleRemoveNode\",null);__decorate$1([autobind],BaseEditor.prototype,\"handleAdjust\",null);var __decorate$2=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect===\"undefined\"?\"undefined\":_typeof(Reflect))===\"object\"&&typeof Reflect.decorate===\"function\")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var RectangleCreator=function(_AMap$Event){_inherits(RectangleCreator,_AMap$Event);var _super=_createSuper(RectangleCreator);function RectangleCreator(_map){var _this;_classCallCheck(this,RectangleCreator);_this=_super.call(this);_this._map=_map;return _this}_createClass(RectangleCreator,[{key:\"open\",value:function open(){this._map.on(\"click\",this._onMapClick)}},{key:\"close\",value:function close(){this._map.off(\"click\",this._onMapClick)}},{key:\"_onMapClick\",value:function _onMapClick(e){var center=e.lnglat;var resolution=this._map.getResolution();var southWestLnglat=center.offset(resolution*-30,resolution*-30);var northEastLnglat=center.offset(resolution*30,resolution*30);var bounds=new AMap.Bounds(southWestLnglat,northEastLnglat);this.emit(\"create\",{bounds:bounds});this.close()}}]);return RectangleCreator}(AMap.Event);__decorate$2([autobind],RectangleCreator.prototype,\"_onMapClick\",null);var RectangleEditor=function(_BaseEditor){_inherits(RectangleEditor,_BaseEditor);var _super2=_createSuper(RectangleEditor);function RectangleEditor(map,_poly){var _this2;var opts=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,RectangleEditor);_this2=_super2.call(this,map,_poly);_this2._normalRectangleStyle={strokeColor:\"red\",strokeWeight:6,strokeOpacity:.5,strokeDasharray:[30,10],strokeStyle:\"dashed\",fillColor:\"blue\",fillOpacity:.5,cursor:\"pointer\",zIndex:50,draggable:true};_this2._editStyle={borderWeight:3,strokeColor:\"#1791fc\",strokeWeight:4,strokeOpacity:.8,fillOpacity:.4,strokeStyle:\"solid\",strokeDasharray:[10,10],fillColor:\"#1791fc\",draggable:true};_this2.className=\"AMap.RectangleEditor\";_this2._opts=opts;_this2._normalRectangleStyle=AMap.extend(_this2._normalRectangleStyle,opts.createOptions);_this2._editStyle=AMap.extend(_this2._editStyle,opts.editOptions);_this2._creator=new RectangleCreator(map);_this2._creator.on(\"create\",function(data){_this2._creator.close();var poly=new AMap.Rectangle(AMap.extend({map:_this2._map,bounds:data.bounds},_this2._normalRectangleStyle));_this2.setTarget(poly);_this2.open();_this2.emit(ListEvent.add,{target:_this2.getTarget(),obj:poly})});return _this2}_createClass(RectangleEditor,[{key:\"initList\",value:function initList(){if(!this._poly){return}if(!this.list){this.list=new RectangelPoint(this._map,this._poly,this._opts)}this.bindListEvent()}},{key:\"handleMove\",value:function handleMove(event){this.emit(ListEvent.move,AMap.extend({},event,{target:this.getTarget()}))}}]);return RectangleEditor}(BaseEditor);__decorate$2([autobind],RectangleEditor.prototype,\"handleMove\",null);AMap.RectangleEditor=RectangleEditor}(window.AMap);\n");
_jsload_('AMap.Riding.js',"!function(AMap){\"use strict\";function _typeof(obj){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _possibleConstructorReturn(self,call){return!call||\"object\"!=typeof call&&\"function\"!=typeof call?function(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}(self):call}var markerOffset=[-12,-30],RidingRender=function(opts){this.CLASS_NAME=\"AMap.RidingRender\",AMap.BuryPoint.add(this.CLASS_NAME);var me=this;me._currentRouteTitle=null,me._currentRouteOptenitem=null,me.showDir=!(opts&&!opts.showDir),me.autoRender=function(options){me.clear(),options&&options.data&&(options.panel||options.map)&&(options.data.start=options.data.start||{location:options.data.origin,name:\"起点\"},options.data.end=options.data.end||{location:options.data.destination,name:\"终点\"},options.data.start.type=\"start\",options.data.end.type=\"end\",this.options=options,this.hideMarkers=options.hideMarkers||!1,options.map&&(this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)}),this._overlays=[],this._route=[],this._highlightOverlay=null,options.panel||this.drawRouteOverlays(0)),options.panel&&(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),options.panel.innerHTML=this.view.createPanel(options.data),this.enableListeners()))},me.clear=function(){this.clearPanel(),this.clearOverlays()},me.drawRoute=function(index){var data=this.options.data,route=data.routes[index],rides=(route.distance,route.rides),walkPaths=[],busPaths=[];walkPaths.push([data.start.location,rides[0].path[0]]);var lastStepPath=rides[rides.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<rides.length;i++)step=rides[i],busPaths=busPaths.concat(step.path);0<busPaths.length&&(busPaths=[busPaths]),this.clearRoute(),this._route=this.addOverlays([],walkPaths,busPaths,[],{strokeOpacity:.4})},me.clearRoute=function(){if(this._route){for(var i=0;i<this._route.length;i++)this._route[i].setMap(null);this._route=[]}},me.drawRouteOverlays=function(index){var data=this.options.data,route=data.routes[index],rides=(route.distance,route.rides),walkPaths=[],busPaths=[],points=[];points.push(data.start),points.push(data.end),walkPaths.push([data.start.location,rides[0].path[0]]);var lastStepPath=rides[rides.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<rides.length;i++)step=rides[i],busPaths=busPaths.concat(step.path);0<busPaths.length&&(busPaths=[busPaths]),this.clearOverlays(),this._overlays=this.addOverlays(points,walkPaths,busPaths,[]),me.options.autoFitView&&me.options.map.setFitView(this._overlays)},me.addOverlays=function(points,walkPaths,busPaths,railwayPaths,styleOptions){var map=this.options.map;styleOptions=styleOptions||{strokeOpacity:1};var _overlays=[];if(!this.hideMarkers){if(points[0]){var start=new AMap.Marker({map:map,offset:markerOffset,position:points[0].location,content:'<div class=\"amap-lib-marker-from\"></div>',innerOverlay:!0});start.isOfficial=!0,start._data=points[0],AMap.Event.addListener(start,\"click\",this.listener.markerClick),_overlays.push(start)}if(1<points.length){var end=new AMap.Marker({map:map,offset:markerOffset,position:points[points.length-1].location,content:'<div class=\"amap-lib-marker-to\"></div>',innerOverlay:!0});end.isOfficial=!0,end._data=points[points.length-1],AMap.Event.addListener(end,\"click\",this.listener.markerClick),_overlays.push(end)}}busPaths=me.util.mergePaths(busPaths);for(var busPath,i=0;i<busPaths.length;i++)(busPath=new AMap.Polyline({map:map,path:busPaths[i],lineJoin:\"round\",isOutline:this.options.isOutline,outlineColor:this.options.outlineColor,borderWeight:2,showDir:me.showDir,strokeColor:\"#33b166\",strokeOpacity:styleOptions.strokeOpacity,strokeWeight:6,innerOverlay:!0})).isOfficial=!0,_overlays.push(busPath);var walkPath;for(i=0;i<walkPaths.length;i++)(walkPath=new AMap.Polyline({map:map,path:walkPaths[i],strokeColor:\"grey\",strokeStyle:\"dashed\",strokeOpacity:styleOptions.strokeOpacity,strokeWeight:6,innerOverlay:!0})).isOfficial=!0,_overlays.push(walkPath);return _overlays},me.clearPanel=function(){this.options&&this.options.panel&&(this.options.panel.innerHTML=\"\")},me.clearOverlays=function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close(),this._highlightOverlay&&(this._highlightOverlay.setMap(null),this._highlightOverlay=null),this.clearRoute()},me.getTitle=function(route){var policy=route.policy?\" | <span class='blue'>\"+route.policy+\"</span>\":\"\";return me.util.getTime(route.time)+\"(\"+me.util.getDistance(route.distance)+\")\"+policy},me.util={},me.util.mergePaths=function(paths){for(var newPaths=[],lastSeg=null,lastPoint=null,i=0,len=paths.length;i<len;i++){var curSeg=paths[i],startPoint=curSeg[0],endPoint=curSeg[curSeg.length-1];lastPoint&&lastPoint.equals&&lastPoint.equals(startPoint)?(lastSeg=newPaths[newPaths.length-1]).push.apply(lastSeg,curSeg):newPaths.push(curSeg),lastPoint=endPoint}return newPaths},me.util.getDistance=function(len){return len<=1e3?len+\"米\":Math.round(len/10)/100+\"公里\"},me.util.getTime=function(second){var minute=(second/60).toFixed(0);return minute<60?minute+\"分钟\":Math.floor(minute/60)+\"小时\"+minute%60+\"分钟\"},me.util.domstr2dom=function(arg){var objE=document.createElement(\"div\");return objE.innerHTML=arg,objE},me.util.getElementsByClassName=function(className,tag,parent){for(var current,testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\"),elements=(tag=tag||\"*\",(parent=parent||document).getElementsByTagName(tag)),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},me.enableListeners=function(){for(var unfocusTitle,unfocusTitles=me.util.getElementsByClassName(\"planTitle\",\"div\",me.options.panel),i=0;i<unfocusTitles.length;i++)unfocusTitle=unfocusTitles[i],AMap.Event.addDomListener(unfocusTitle,\"click\",this.listener.unfocusTitleClick),AMap.Event.addDomListener(unfocusTitle,\"mouseenter\",this.listener.unfocusTitleMouseenter),AMap.Event.addDomListener(unfocusTitle,\"mouseleave\",this.listener.unfocusTitleMouseleave);var c_div,c_divs=this.util.getElementsByClassName(\"*\",\"dt\",me.options.panel);for(i=0;i<c_divs.length;i++)c_div=c_divs[i],AMap.Event.addDomListener(c_div,\"click\",this.listener.routeStepItem);0<unfocusTitles.length&&me.listener.unfocusTitleClick.call(unfocusTitles[0])},me.listener={},me.listener.markerClick=function(){var data=this._data;\"start\"===data.type||\"end\"===data.type?me._infoWindow.setOffset(new AMap.Pixel(0,-30)):me._infoWindow.setOffset(new AMap.Pixel(0,0)),\"起点\"===data.name||\"终点\"===data.name||(me._infoWindow.setContent(me.view.createInfowindowContent(data)),me._infoWindow.open(me.options.map,this.getPosition())),me.options.map.setCenter(this.getPosition())},me.listener.routeStepItem=function(){me._highlightOverlay&&me._highlightOverlay.setMap(null),this.style.backgroundColor=\"rgb(240, 240, 240)\",me.listener.routeStepItem.last&&(me.listener.routeStepItem.last.style.backgroundColor=\"\");for(var stepIndex,children=(me.listener.routeStepItem.last=this).parentNode.children,i=0;i<children.length;i++)if(children[i]===this){stepIndex=i;break}if(0!==stepIndex)if(stepIndex!==children.length-1){me._infoWindow.close(),--stepIndex;var highlight,step=me.options.data.routes[me._currentRouteIndex].rides[stepIndex];if(me._highlightOverlay)me._highlightOverlay.setPath(step.path),me._highlightOverlay.setMap(me.options.map);else(highlight=new AMap.Polyline({map:me.options.map,path:step.path,strokeColor:\"red\",strokeOpacity:.8,strokeWeight:8,innerOverlay:!0})).isOfficial=!0,me._highlightOverlay=highlight;me.options.map.setBounds(me._highlightOverlay.getBounds())}else me.listener.markerClick.call({_data:me.options.data.end,getPosition:function(){return me.options.data.end.location}});else me.listener.markerClick.call({_data:me.options.data.start,getPosition:function(){return me.options.data.start.location}})},me.listener.driveTitleClick=function(){me._currentRouteTitle.style.display=\"block\",me._currentRouteOptenitem.style.display=\"none\",me.clearOverlays()},me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);target&&\"A\"===target.tagName||(\"open\"===me._currentRouteTitleStatus&&me._currentRouteTitle===this?(me.view.closeCurrentPlanDiv(),me.clearOverlays()):(\"open\"===me._currentRouteTitleStatus&&me.view.closeCurrentPlanDiv(),me.view.openPlanDiv(this)))},me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute(\"index\");me.drawRoute(index),me.listener.unfocusTitleMouseenter.last=this},me.listener.unfocusTitleMouseleave=function(e){me.clearRoute()},me.view={},me.view.openPlanDiv=function(planDiv){me._currentRouteTitle=planDiv,me._currentRouteOptenitem=planDiv.nextSibling,me.util.getElementsByClassName(\"icon-arrow-up\",\"div\",me._currentRouteTitle)[0].className=\"icon-arrow-up expand\",me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0]&&(me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0].style.display=\"inline-block\"),me._currentRouteOptenitem.style.display=\"block\",me._currentRouteTitleStatus=\"open\";var index=me._currentRouteTitle.getAttribute(\"index\");me._currentRouteIndex=index,me.options.map&&me.drawRouteOverlays(me._currentRouteIndex)},me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName(\"icon-arrow-up expand\",\"div\",me._currentRouteTitle)[0],fix=me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0];title&&(title.className=\"icon-arrow-up\"),fix&&(fix.style.display=\"none\"),me._currentRouteOptenitem.style.display=\"none\",me._currentRouteTitleStatus=\"close\"},me.view.createInfowindowContent=function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];c.push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+data.name+'&nbsp;<a href=\"http://detail.amap.com/detail/'+data.id+\"?spm=0.0.0.0.sWhSmy&citycode=\"+data.citycode+'\" target=\"_blank\">详情»</a></div>'),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\",div.appendChild(sharp);var close=document.createElement(\"div\");return close.className=\"amap-combo-close\",div.appendChild(close),close.href=\"javascript: void(0)\",AMap.Event.addDomListener(close,\"touchend\",function(e){me._infoWindow.close()}),AMap.Event.addDomListener(close,\"click\",function(e){me._infoWindow.close()}),content.appendChild(div),content.appendChild(close),content.appendChild(sharp),content},me.view.createPanel=function(data){if(!data.routes)return\"<div class='amap_lib_driving'>抱歉，没有合适的路线。</div>\";var result=[];result.push(\"<div class='amap-lib-driving'>\");for(var route,i=0;i<data.routes.length;i++){route=data.routes[i];var title=me.getTitle(route);result=(result=result.concat(me.view.createTitleDiv(i,title,route,!0))).concat(me.view.createOpenitemDiv(i,title,data,!1))}return result.push(\"</div>\"),result.join(\"\")},me.view.createTitleDiv=function(index,title,route,isDisplay){for(var roadNames,road,rides=route.rides,roadNameArray=[],roadNames2=\"\",temp=\"\",i=0;i<rides.length;i++)(road=rides[i].road)&&road!==temp&&(roadNameArray.push(road),temp=road);roadNames=roadNameArray.join(\"&gt;\"),roadNames2=4<roadNameArray.length?(roadNameArray.splice(2,roadNameArray.length-4,\"......\"),roadNameArray.join(\"&gt;\")):roadNames;var r=[];r.push('<div class=\"planTitle\" index=\"'+index+'\">'),r.push('    <h3 title=\"'+roadNames+'\">'),r.push(\"         <b>\"+roadNames2+\"</b>\"),r.push(\"    </h3>\"),r.push(\"    <p>\"+title+\"</p>\");me.options.data;return r.push('    <div class=\"sidebar\">'),r.push('        <div class=\"icon-arrow-up\" href=\"javascript:void(0)\"></div>'),r.push(\"    </div>                \"),r.push(\"</div>\"),r},me.view.createOpenitemDiv=function(index,title,data,isDisplay){var rides=data.routes[index].rides,r=[];r.push('<dl class=\"plan plan-nobus\">'),r.push(\"    <dt class=\\\"start\\\"><div class='beforedt'></div><div class='afterdt'></div><b>\"+data.start.name+\"</b></dt>\");for(var step,i=0;i<rides.length;i++)step=rides[i],r.push(' <dt class=\"route turn-'+me.getSigns(step.action)+'\"  index=\"'+index+'\">                '),r.push(\"  <div class='beforedt'></div><div class='afterdt'></div>       \"+step.instruction),r.push(\" </dt>\");return r.push(\"    <dt class=\\\"end\\\"><div class='beforedt'></div><b>\"+data.end.name+\"</b></dt>\"),r.push(\"</dl>\"),r},me.getSigns=function(action){return{\"左转\":\"left\",\"右转\":\"right\",\"靠左\":\"keepleft\",\"靠右\":\"keepright\",\"向左前方行驶\":\"leftup\",\"向左后方行驶\":\"leftdown\",\"向右前方行驶\":\"rightup\",\"向右后方行驶\":\"rightdown\",\"左转调头\":\"leftback\",\"右转调头\":\"rightback\",\"进入环岛\":\"enterRing\",\"离开环岛\":\"leaveRing\",\"减速行驶\":\"slow\",\"向左前方行走\":\"leftup\",\"向左后方行走\":\"leftdown\",\"向右前方行走\":\"rightup\",\"向右后方行走\":\"rightdown\",\"通过人行横道\":\"crosswalk\",\"通过过街天桥\":\"overpass\",\"通过地下通道\":\"underpass\",\"通过广场\":\"squarepass\"}[action]||\"advance\"}},GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL),this.city=city||\"\",this.CLASS_NAME=\"AMap.GetLL\"}return _createClass(GetLL,[{key:\"getCity\",value:function(cbk){var url=AMap.getConfig().protocol+\"://webapi.amap.com/maps/ipCity\";AMap.WebService.get(url,{},function(status,data){cbk(\"complete\"===status?data:{})})}},{key:\"get\",value:function(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:\"all\"}),result=[];!function getOne(){if(keywordsList.length){var keyAndcity=keywordsList.shift(),keyword=keyAndcity.keyword,city=keyAndcity.city||defaultCity;city=city||\"\",psearch.setCity(city),psearch.search(keyword,function(status,data){\"error\"===status?cbk(\"error\",data):\"complete\"===status?data.poiList&&data.poiList.pois.length?(result.push(data.poiList.pois[0]),keywordsList.length?getOne():cbk(\"complete\",result)):cbk(city?\"no_poi\":\"no_city\",keyAndcity):\"no_data\"===status&&cbk(city?\"no_poi\":\"no_city\",keyAndcity)})}}()}}]),GetLL}(),PlaceSearch=function(){function PlaceSearch(opt){var _this;return _classCallCheck(this,PlaceSearch),(_this=_possibleConstructorReturn(this,_getPrototypeOf(PlaceSearch).call(this))).closed=!1,_this.opt=AMap.extend({showCover:!0,autoFitView:!0},opt||{}),_this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize=\"number\"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=AMap.getConfig().server+\"/v3/place\",_this}return _inherits(PlaceSearch,AMap.Event),_createClass(PlaceSearch,[{key:\"search\",value:function(keyword,cbk){var params={s:\"rsv3\",children:+(this.opt.children?\"1\":\"\")};this._mergeParams(this.opt,{city:\"city\",rankBy:\"sortrule\",type:\"types\",pageIndex:\"page\",pageSize:\"offset\",extensions:\"extensions\",citylimit:\"citylimit\"},params),this._query(this.url+\"/text\",params,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"setCity\",value:function(city){AMap.BuryPoint.add(this,\"setCity\"),this.opt.city=city}},{key:\"_mergeParams\",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&(params[map[i]]=data[i]);return params}},{key:\"_query\",value:function(url,params,cbk,encodeURICom,type,args){var _this2=this;url+=0<params.length?\"?\"+params.join(\"&\"):\"\",AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:!0},params,encodeURICom),function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,type,args):_this2._onError(data,cbk)})}},{key:\"_onComplete\",value:function(data,cbk){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info=\"TIP_KEYWORDS\"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city)city.hasOwnProperty(pro)&&\"num\"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count),citiesnew.push(city)}result.info=\"TIP_CITIES\",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)):(result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info,AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&(result.cityList||result.keywordList?cbk(\"complete\",result):cbk(\"no_data\",{})))}else result={info:data.info},AMap.Event.trigger(this,\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_parsePOI\",value:function(poi){function getLngLat(location){if(location){var lngLat=location.split(\",\");return new AMap.LngLat(lngLat[0],lngLat[1])}return null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo=\"\",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:\"0\"!==poi.groupbuy_num,discount:\"0\"!==poi.discount_num};\"1\"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1;var poiDeepInfo={groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"};if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:\"\"};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:\"\"};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case\"cinema\":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type=\"CINEMA\";break;case\"dining\":var dining={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:\"\",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=dining,poiDeepInfo.deep_type=\"DINING\";break;case\"scenic\":var scenic={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=scenic,poiDeepInfo.deep_type=\"SCENIC\";break;case\"hotel\":var hotel={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:\"\",photos:poiDeep.photos};poiDeepInfo.hotel=hotel,poiDeepInfo.deep_type=\"HOTEL\"}}var rePoi={};for(var baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&\"base\"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:\"_parseString\",value:function(v){return v instanceof Array&&0===v.length||void 0===v?\"\":v}},{key:\"_formatFields\",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),\"object\"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}}]),PlaceSearch}(),Riding=function(){function Riding(opt){var _this;return _classCallCheck(this,Riding),(_this=_possibleConstructorReturn(this,_getPrototypeOf(Riding).call(this))).CLASS_NAME=\"AMap.Riding\",_this.opt=AMap.extend({outlineColor:\"white\",showDir:!0,isOutline:!0,autoFitView:!0},opt),_this.url=AMap.getConfig().server+\"/v4/direction/bicycling\",_this}return _inherits(Riding,AMap.Event),_createClass(Riding,[{key:\"clear\",value:function(){AMap.BuryPoint.add(this,\"clear\"),this.render&&this.render.clear()}},{key:\"setPolicy\",value:function(policy){AMap.BuryPoint.add(this,\"setPolicy\"),this.opt.policy=policy}},{key:\"search\",value:function(){AMap.BuryPoint.add(this,\"search\");var args=arguments;if(0<args.length)if(args[0]=AMap.Util.parseLngLatData(args[0]),args[1]=AMap.Util.parseLngLatData(args[1]),args[0].lng&&args[0].lat)this.search_.apply(this,args);else if(args[0]instanceof Array){var this_=this,cbk=args[1];this_.getLL||(this_.getLL=new GetLL),this_.getLL.getCity(function(data){var city=data.citycode||\"\";this_.getLL.get(args[0],city,function(status,result){\"error\"===status?cbk&&\"function\"==typeof cbk&&cbk(\"error\",result):\"complete\"===status?this_.search_(result[0].exit_location||result[0].location,result[1].entr_location||result[1].location,args[1]||void 0,result):\"no_poi\"===status?args[1]&&args[1](\"error\",{info:\"在城市\"+result.city+\"无法找到\"+result.keyword}):\"no_city\"===status&&args[1]&&args[1](\"error\",{info:\"请设置\"+result.keyword+\"的城市信息\"})})})}}},{key:\"search_\",value:function(origin,destination,cbk,result){var _this2=this;if(origin instanceof AMap.LngLat&&destination instanceof AMap.LngLat){var params={origin:origin.toString(),destination:destination.toString(),s:\"rsv3\"},url=this.url;AMap.WebService.get(url,params,function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,result):_this2._onError(data,cbk)})}else cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\")}},{key:\"_parseInt\",value:function(v){var n=parseInt(v,10);return isNaN(n)?0:n}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_parseRoute\",value:function(data){var r=[];if(data.length)for(var i=0;i<data.length;i+=1){for(var route=data[i],t={distance:parseInt(route.distance,10),time:parseInt(route.duration,10),rides:[]},j=0;j<route.steps.length;j+=1){var step=route.steps[j];t.rides[j]=this._parseStep(step)}r[i]=t}return r}},{key:\"_parseStep\",value:function(data){var path=this._parsePath(data.polyline);return{start_location:path[0],end_location:path[path.length-1],instruction:data.instruction,road:this._parseString(data.road),orientation:this._parseString(data.orientation),distance:this._parseInt(data.distance),time:this._parseInt(data.duration),path:path,action:this._parseString(data.action)}}},{key:\"_parsePath\",value:function(path){for(var f=[],arr=path.split(\";\"),i=0;i<arr.length;i+=1){var loc=arr[i].split(\",\");f[i]=new AMap.LngLat(loc[0],loc[1])}return f}},{key:\"_parseString\",value:function(v){return\"object\"===_typeof(v)||void 0===v?\"\":v}},{key:\"_str2LngLat\",value:function(str){var arr=str.split(\",\");return new AMap.LngLat(arr[0],arr[1])}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"_onComplete\",value:function(data,cbk,poiresult){if(!this.closed){var result;parseInt(data.errcode,10)?(AMap.Event.trigger(this,\"error\",{info:data.info}),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)):(data.data?(result={info:data.errmsg,origin:this._str2LngLat(data.data.origin),destination:this._str2LngLat(data.data.destination),count:data.data.paths.length,routes:this._parseRoute(data.data.paths)},poiresult&&(result.start=poiresult[0],result.end=poiresult[1],result.originName=result.start.name,result.destinationName=result.end.name)):result={info:\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info},cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result),(this.opt.map||this.opt.panel)&&(this.render||(this.render=new RidingRender({showDir:this.opt.showDir})),this.render.autoRender({data:result,panel:this.opt.panel,map:this.opt.map,hideMarkers:this.opt.hideMarkers||!1,isOutline:this.opt.isOutline,outlineColor:this.opt.outlineColor,autoFitView:this.opt.autoFitView})),AMap.Event.trigger(this,\"complete\",result))}}}]),Riding}();AMap.Riding=Riding,AMap.RidingPolicy={DEFAULT:0,RECOMMENDED:1,FASTEST:2}}(window.AMap);\n");
_jsload_('AMap.Scale.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var defultOpts={position:\"LB\",offset:[15,25]},Scale=function(_super){function __(){this.constructor=d}var d,b;function Scale(opts){var _this=_super.call(this,opts=void 0===opts?defultOpts:opts)||this;return _this._className=\"scalecontrol\",_this._scaleLevel=[[1e7,\"10000\"],[5e6,\"5000\"],[2e6,\"2000\"],[1e6,\"1000\"],[5e5,\"500\"],[2e5,\"200\"],[1e5,\"100\"],[5e4,\"50\"],[3e4,\"30\"],[2e4,\"20\"],[1e4,\"10\"],[5e3,\"5\"],[2e3,\"2\"],[1e3,\"1\"],[500,\"500\"],[200,\"200\"],[100,\"100\"],[50,\"50\"],[25,\"25\"],[10,\"10\"],[5,\"5\"],[2,\"2\"],[1,\"1\"],[.5,\"50\"],[.2,\"20\"],[.1,\"10\"],[.05,\"5\"],[.02,\"2\"],[.01,\"1\"],[.01,\"1\"],[.01,\"1\"]],_this._handleViewChange=_this._handleViewChange.bind(_this),_this._config=AMap.extend(defultOpts,opts),_this.initContainer(),_this}return extendStatics(d=Scale,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),Scale.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),this._initUI(),map.on(\"viewchange\",this._handleViewChange)},Scale.prototype.remove=function(){this.map&&this.map.off(\"viewchange\",this._handleViewChange),this._destroyUI(),_super.prototype.remove.call(this)},Scale.prototype.removeFrom=function(map){map&&map.off(\"viewchange\",this._handleViewChange),this._destroyUI(),_super.prototype.removeFrom.call(this,map)},Scale.prototype._handleViewChange=function(){this._updateUI()},Scale.prototype._initUI=function(){this._text=AMap.DomUtil.create(\"div\",this._container,\"amap-scale-text\"),this._line=AMap.DomUtil.create(\"div\",this._container,\"amap-scale-line\"),this._lineLeft=AMap.DomUtil.create(\"div\",this._container,\"amap-scale-edgeleft\"),this._lineRight=AMap.DomUtil.create(\"div\",this._container,\"amap-scale-edgeright\"),this._lineMid=AMap.DomUtil.create(\"div\",this._container,\"amap-scale-middle\"),this._line.appendChild(this._lineLeft),this._line.appendChild(this._lineMid),this._line.appendChild(this._lineRight),this._updateUI()},Scale.prototype._destroyUI=function(){for(;this._container.firstChild;)this._container.removeChild(this._container.firstChild)},Scale.prototype._updateUI=function(){for(var resolution=this.map.getView().getStatus(),optimalZoom=resolution.optimalZoom,scale=resolution.center,resolution=resolution.resolution,level=(this.map.getSize().toArray(),optimalZoom-1),coordX=resolution*Math.cos(scale[1]/180*Math.PI),len=this._scaleLevel[level][0]/coordX,i=level;i<this._scaleLevel.length&&!((len=this._scaleLevel[level][0]/coordX)<120);i++)level++,level=Math.min(level,this._scaleLevel.length-1);scale=this._scaleLevel[level][1];this._text.innerText=scale+=level<=13?\" 公里\":level<23?\" 米\":\" 厘米\",this._text.style.width=len+8+\"px\",this._lineMid.style.width=len+\"px\",this._lineRight.style.left=len+1+\"px\"},Scale}(AMap.Control);AMap.Scale=Scale}();\n");
_jsload_('AMap.StationSearch.js',"!function(a){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}var e=function(){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(t=u(this,i(n).call(this))).CLASS_NAME=\"AMap.StationSearch\",t.opt=e||{},t.config=a.getConfig(),t.url=t.config.server+\"/v3/bus/\",t._initialize(e),t}var e,t,o;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,a.Event),e=n,(t=[{key:\"_initialize\",value:function(e){e&&e.pageSize?(e.offset=e.pageSize,delete e.pageSize):e&&e.pageIndex?(e.page=e.pageIndex,delete e.pageSize):e=e||{},this.opts=this._extend(e,{extensions:\"base\",output:\"json\"})}},{key:\"setPageIndex\",value:function(e){this.opts.page=e}},{key:\"setPageSize\",value:function(e){this.opts.offset=e}},{key:\"setCity\",value:function(e){this.opts.city=e}},{key:\"searchById\",value:function(e,n){var o=this;if(e){var t={s:\"rsv3\"},r=this.opts;for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);t.id=e;var s=this.url+\"stopid\";a.WebService.get(s,t,function(e,t){\"complete\"===e&&o._onComplete(t,n),\"error\"===e&&o._onError(t,n)})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"search\",value:function(e,n){var o=this;if(e){var t={s:\"rsv3\"},r=this.opts;for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);t.keywords=this._parseString(e);var s=this.url+\"stopname\";a.WebService.get(s,t,function(e,t){\"complete\"===e&&o._onComplete(t,n),\"error\"===e&&o._onError(t,n)})}else n&&\"function\"==typeof n&&n(\"error\",\"NO_PARAMS\")}},{key:\"_parseResult\",value:function(e){var t,n,o={};for(o.info=e.info,o.stationInfo=[],t=0;t<e.busstops.length;t+=1){o.stationInfo[t]={};var r=e.busstops[t];for(n in r)r.hasOwnProperty(n)&&this._parseStationInfo(n,r,o.stationInfo[t])}if(e.suggestion&&e.suggestion.keywords.length&&(o.keywordList=e.suggestion.keywords),e.suggestion&&e.suggestion.cities.length){var i=e.suggestion.cities,s=[];for(t=0;t<i.length;t+=1){var a=i[t];for(n in a)a.hasOwnProperty(n)&&\"num\"===n&&(a.count=parseInt(a[n],10),delete a[n]);s.push(a)}o.cityList=s}return o}},{key:\"_parseStationInfo\",value:function(e,t,n){switch(e){case\"timestamp\":return;case\"location\":var o=t[e].split(\",\");return void(n[e]=new a.LngLat(o[0],o[1]));case\"buslines\":return void(n[e]=this._parseBuslines(t[e]));default:n[e]=this._parseString(t[e])}}},{key:\"_parseBuslines\",value:function(e){var t,n,o=[];for(t=0;t<e.length;t+=1){var r=e[t];for(n in o[t]={},r)r.hasOwnProperty(n)&&this._parseBusline(n,r,o[t])}return o}},{key:\"_parseBusline\",value:function(e,t,n){switch(e){case\"location\":var o=t[e].split(\",\");return void(n[e]=new a.LngLat(o[0],o[1]));default:n[e]=this._parseString(t[e])}}},{key:\"_onComplete\",value:function(e,t){var n,o=\"1\"===e.status&&this._isArray(e.busstops)&&0<e.busstops.length,r=e.suggestion&&this._isArray(e.suggestion.keywords)&&0<e.suggestion.keywords.length,i=e.suggestion&&this._isArray(e.suggestion.cities)&&0<e.suggestion.cities.length,s=\"ok\"===e.info.toLowerCase()&&this._isArray(e.busstops)&&0===e.busstops.length;o?(n=this._parseResult(e),t&&\"function\"==typeof t&&t(\"complete\",n)):r?((n=this._parseResult(e)).info=\"TIP_KEYWORDS\",t&&\"function\"==typeof t&&t(\"complete\",n)):i?((n=this._parseResult(e)).info=\"TIP_CITIES\",t&&\"function\"==typeof t&&t(\"complete\",n)):s?t&&\"function\"==typeof t&&t(\"no_data\",{}):t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"_onError\",value:function(e,t){t&&\"function\"==typeof t&&t(\"error\",e.info)}},{key:\"_isArray\",value:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},{key:\"_parseString\",value:function(e){return\"string\"==typeof e?e:\"\"}},{key:\"_extend\",value:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}])&&r(e.prototype,t),o&&r(e,o),n}();a.StationSearch=e}(window.AMap);\n");
_jsload_('AMap.StyleParser.js',"!function(){\"use strict\";var Operation,__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};!function(Operation){Operation.EQUAL=\"==\",Operation.NOT_EQUAL=\"!=\",Operation.GREATER=\">\",Operation.GREATER_EQUAL=\">=\",Operation.LESS=\"<\",Operation.LESS_EQUAL=\"<=\",Operation.INCLUDE=\"include\",Operation.EXCLUDE=\"exclude\"}(Operation=Operation||{});function noop(val){return val}function isNil(val){return null==val}function tellString(val){return\"string\"==typeof val?\"`\"+val+\"`\":Array.isArray(val)?\"[\"+val.map(tellString)+\"]\":val}var StyleParser=function(){function StyleParser(map,opt){var _this=this;this.CLASS_NAME=\"AMap.StyleParser\",this._layers={},this._map=map,this._opt=AMap.extend({zIndex:120,labelLayerOpts:{depthTest:!0,collision:!0,allowCollision:!1}},opt),map&&map.on(\"styleLoaded\",function(style){_this.setStyle(style)})}return StyleParser.prototype.getLayers=function(){return this._layers},StyleParser.prototype.setStyle=function(style){var _this=this,layerStyle=style.third_layer||{};Object.keys(this._layers).forEach(function(layerId){layerStyle[layerId]||_this._layers[layerId].hide()}),Object.keys(layerStyle).forEach(function(layerId){_this.updateStyle(layerId,layerStyle[layerId])})},StyleParser.prototype.updateStyle=function(layerId,style){var layer=this._parseStyle(style);this._layers[layerId]?(this._layers[layerId].setStyle(layer),this._layers[layerId].show()):(layer=__assign(__assign({},this._opt),{id:\"MapboxVTLayer_\"+layerId,url:style.url,styles:layer}),layer=new AMap.MapboxVectorTileLayer(layer),this._map.add(layer),this._layers[layerId]=layer)},StyleParser.prototype._parseStyle=function(style){var point=style.point,line=style.line,polygon=style.polygon,polyhedron=style.polyhedron;return{point:this._parseFeatureStyle(point),line:this._parseFeatureStyle(line),polygon:this._parseFeatureStyle(polygon),polyhedron:this._parseFeatureStyle(polyhedron),label:this._parseLabelStyle(style)}},StyleParser.prototype._parseFeatureStyle=function(style){var _this=this,featureStyle={sourceLayer:\"default\"};return style?Object.keys(style).forEach(function(key){var parsedStyle;switch(key){case\"visible\":case\"radius\":case\"lineWidth\":case\"borderWidth\":parsedStyle=_this._formatStyle(style[key]);break;case\"texture\":parsedStyle=_this._formatStyle(style[key],_this._addProtocol);break;case\"color\":case\"borderColor\":case\"topColor\":case\"sideColor\":parsedStyle=_this._formatStyle(style[key],_this._hexToRGB);break;case\"dash\":parsedStyle=_this._formatStyle(style[key],_this._strToArray)}isNil(parsedStyle)||(featureStyle[key]=parsedStyle)}):featureStyle.visible=!1,featureStyle},StyleParser.prototype._parseLabelStyle=function(style){return{sourceLayer:\"label\",direction:\"center\",visible:this._genLabelStyleFun(\"showLabel\",style),text:{content:this._genLabelStyleFun(\"content\",style),style:{fontSize:this._genLabelStyleFun(\"fontSize\",style),fillColor:this._genLabelStyleFun(\"textFillColor\",style),strokeColor:this._genLabelStyleFun(\"textStrokeColor\",style)}}}},StyleParser.prototype._genLabelStyleFun=function(key,polyhedron){var point=polyhedron.point,line=polyhedron.line,polygon=polyhedron.polygon,polyhedron=polyhedron.polyhedron,polyhedron=void 0===polyhedron?{}:polyhedron;return new Function(\"props\",\" const type = props['_geometry_type'];\\n              const isPolyhedron = props['_AS_CUBE'] === 'Y' && props['_HEIGHT_PROP'];\\n            let style;\\n            if (type === 'ST_Point' || type === 'ST_MultiPoint') {\\n              style = \"+tellString(this._formatStyle(point[key]))+\";\\n            }\\n            if (type === 'ST_LineString' || type === 'ST_MultiLineString') {\\n              style = \"+tellString(this._formatStyle(line[key]))+\";\\n            }\\n            if (type === 'ST_Polygon' || type === 'ST_MultiPolygon') {\\n              style = isPolyhedron ? \"+tellString(this._formatStyle(polyhedron[key]))+\" : \"+tellString(this._formatStyle(polygon[key]))+\";\\n            }\\n            if (typeof style === 'function') {return style(props)}\\n            return \"+(\"content\"===key?\"typeof style === 'string' ? String(props[style]) : style\":\"style\")+\"\\n          \")},StyleParser.prototype._formatStyle=function(defaultValue,formatter){var conditions=null===defaultValue||void 0===defaultValue?void 0:defaultValue.nodes,defaultValue=(formatter=void 0===formatter?noop:formatter)(isNil(null===defaultValue||void 0===defaultValue?void 0:defaultValue.value)?defaultValue:defaultValue.value);if(null==conditions||!conditions.length)return defaultValue;for(var fun=[],_i=0,conditions_1=conditions;_i<conditions_1.length;_i++){var n=conditions_1[_i],style=formatter(n.style),key=n.key,value=n.value;try{value=JSON.parse(value)}catch(_){}switch(n.operation){case Operation.EQUAL:case Operation.NOT_EQUAL:case Operation.GREATER:case Operation.GREATER_EQUAL:case Operation.LESS:case Operation.LESS_EQUAL:fun.push(\"if (props && props['\"+key+\"'] \"+n.operation+\" \"+tellString(value)+\")\\n                        return \"+tellString(style));break;case Operation.INCLUDE:fun.push(\"if (props && String(props['\"+key+\"']).includes(\"+tellString(value)+\"))\\n                        return \"+tellString(style));break;case Operation.EXCLUDE:fun.push(\"if (props && !String(props['\"+key+\"']).includes(\"+tellString(value)+\"))\\n                        return \"+tellString(style))}}return new Function(\"props\",\"try {\"+fun.join(\";\")+\"} catch (_) {} return \"+tellString(defaultValue)+\";\")},StyleParser.prototype._hexToRGB=function(hex){if(\"string\"!=typeof hex||!hex)return null;for(var parts=[],i=0,len=(hex=hex.startsWith(\"#\")?hex.slice(1):hex).length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push((parts.shift()/255).toFixed(2)),\"rgba(\"+parts.join(\",\")+\")\"},StyleParser.prototype._strToArray=function(str){return\"string\"==typeof str&&str?str.split(\",\").map(Number):[]},StyleParser.prototype._addProtocol=function(url){return url&&\"https://\"+url},StyleParser}();AMap.StyleParser=StyleParser}();\n");
_jsload_('AMap.ToolBar.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var zoomRange=[2,26],defultOpts={position:{bottom:\"20px\",right:\"20px\"},offset:[15,15]},ToolBar=function(_super){function __(){this.constructor=d}var d,b;function ToolBar(opts){var _this=_super.call(this,opts=void 0===opts?defultOpts:opts)||this;return _this._className=\"toolbar\",_this._handleZoomEnd=_this._handleZoomEnd.bind(_this),_this._config=AMap.extend(defultOpts,opts),_this.initContainer(),_this._initUI(),_this}return extendStatics(d=ToolBar,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),ToolBar.prototype.addTo=function(map){_super.prototype.addTo.call(this,map),this._handleZoomEnd(),map.on(\"zoomend\",this._handleZoomEnd)},ToolBar.prototype.remove=function(){this.map&&this.map.off(\"zoomend\",this._handleZoomEnd),_super.prototype.remove.call(this)},ToolBar.prototype.removeFrom=function(map){map&&map.off(\"zoomend\",this._handleZoomEnd),_super.prototype.removeFrom.call(this,map)},ToolBar.prototype._handleZoomEnd=function(){var map=this.map,zooms=map.getZooms();map.getZoom()<=zooms[0]?this._zoomOut.style.color=\"#ddd\":this._zoomOut.style.color=\"#000\",map.getZoom()>=zooms[1]?this._zoomIn.style.color=\"#ddd\":this._zoomIn.style.color=\"#000\"},ToolBar.prototype._initUI=function(){var _this=this;this._zoomIn=AMap.DomUtil.create(\"span\",this._container,\"amap-ctrl-zoomin\"),this._zoomOut=AMap.DomUtil.create(\"span\",this._container,\"amap-ctrl-zoomout\"),this._zoomIn.innerHTML=\"+\",this._zoomOut.innerHTML=\"-\",this._zoomIn.setAttribute(\"data-type\",\"add\"),this._zoomOut.setAttribute(\"data-type\",\"sub\"),this._container.addEventListener(\"click\",function(z){var type;z.target instanceof HTMLElement&&(type=z.target.getAttribute(\"data-type\"),z=_this.map.getZoom(),\"add\"===type?_this.map.setZoom(Math.min(z+1,zoomRange[1])):\"sub\"===type&&_this.map.setZoom(Math.max(z-1,2)))})},ToolBar}(AMap.Control);AMap.ToolBar=ToolBar}();\n");
_jsload_('AMap.Transfer.js',"!function(AMap){\"use strict\";function _typeof(obj){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _possibleConstructorReturn(self,call){return!call||\"object\"!=typeof call&&\"function\"!=typeof call?function(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}(self):call}var markerOffset=[-12,-30],TransferRender=function(opts){this.CLASS_NAME=\"AMap.TransferRender\",AMap.BuryPoint.add(this.CLASS_NAME);var me=this;me._currentPlanTitle=null,me._currentPlanOptenitem=null,me.showDir=!(opts&&!opts.showDir),me.autoRender=function(options,transferObject){if(me.clear(),options&&options.data&&(options.panel||options.map)&&(options.data.start=options.data.start||{location:options.data.origin,name:\"起点\"},options.data.end=options.data.end||{location:options.data.destination,name:\"终点\"},options.data.start.type=\"start\",options.data.end.type=\"end\",this.options=options,this.hideMarkers=options.hideMarkers||!1,options.map&&(this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)}),this._overlays=[],this._planRoute=[],this._highlightOverlay=null,options.panel||this.drawPlanOverlays(0)),options.panel)){if(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),transferObject){me.listener.gotoAMap=function(){transferObject.searchOnAMAP(options.data)};var a=document.createElement(\"div\");a.className=\"amap-call\",a.innerHTML=\"前往高德地图查看\",AMap.Event.addDomListener(a,\"click\",me.listener.gotoAMap),options.panel.appendChild(a)}options.panel.appendChild(this.view.createPanel(options.data)),this.enableListeners()}},me.clear=function(){this.clearPanel(),this.clearOverlays()},me.drawPlanRoute=function(index){var data=this.options.data;if(data.plans||!data.plans.length){for(var segment,plan=data.plans[index],segments=(plan.distance,plan.segments),walkPaths=[],busPaths=[],railwayPaths=[],i=0;i<segments.length;i++)\"WALK\"===(segment=segments[i]).transit_mode?walkPaths.push(segment.transit.path):\"BUS\"===segment.transit_mode||\"SUBWAY\"===segment.transit_mode?busPaths.push(segment.transit.path):\"RAILWAY\"===segment.transit_mode?railwayPaths.push([segment.transit.departure_stop.location,segment.transit.arrival_stop.location]):\"TAXI\"===segment.transit_mode&&railwayPaths.push([segment.transit.origin,segment.transit.destination]);this.clearPlanRoute(),this._planRoute=this.addOverlays([],walkPaths,busPaths,railwayPaths,{strokeOpacity:.5})}},me.clearPlanRoute=function(){if(this._planRoute){for(var i=0;i<this._planRoute.length;i++)this._planRoute[i].setMap(null);this._planRoute=[]}},me.drawPlanOverlays=function(index){var data=this.options.data,plan=data.plans[index],segments=(plan.distance,plan.segments),walkPaths=[],busPaths=[],points=[],railwayPaths=[];points.push(data.start);for(var segment,i=0;i<segments.length;i++)\"METRO_RAIL\"===(segment=segments[i]).transit_mode&&(segment.transit_mode=\"SUBWAY\"),\"WALK\"===segment.transit_mode?walkPaths.push(segment.transit.path):\"BUS\"===segment.transit_mode||\"SUBWAY\"===segment.transit_mode?(busPaths.push(segment.transit.path),(segment.transit.on_station.segment=segment).transit.off_station.segment=segment,points.push(segment.transit.on_station),points.push(segment.transit.off_station)):\"RAILWAY\"===segment.transit_mode?(railwayPaths.push([segment.transit.departure_stop.location,segment.transit.arrival_stop.location]),(segment.transit.departure_stop.segment=segment).transit.arrival_stop.segment=segment,points.push(segment.transit.departure_stop),points.push(segment.transit.arrival_stop)):\"TAXI\"===segment.transit_mode&&railwayPaths.push([segment.transit.origin,segment.transit.destination]);points.push(data.end),this.clearOverlays(),this._overlays=this.addOverlays(points,walkPaths,busPaths,railwayPaths),me.options.autoFitView&&me.options.map.setFitView(this._overlays)},me.addOverlays=function(points,walkPaths,busPaths,railwayPaths,styleOptions){var map=this.options.map;styleOptions=styleOptions||{strokeOpacity:1};var _overlays=[];if(!this.hideMarkers){if(points[0]){var start=new AMap.Marker({map:map,offset:markerOffset,position:points[0].location,content:'<div class=\"amap-lib-marker-from\"></div>',innerOverlay:!0});start.isOfficial=!0,start._data=points[0],AMap.Event.addListener(start,\"click\",this.listener.markerClick),_overlays.push(start)}if(1<points.length){var end=new AMap.Marker({map:map,offset:markerOffset,position:points[points.length-1].location,content:'<div class=\"amap-lib-marker-to\"></div>',innerOverlay:!0});end.isOfficial=!0,end._data=points[points.length-1],AMap.Event.addListener(end,\"click\",this.listener.markerClick),_overlays.push(end)}for(var point,i=1;i<points.length-1;i++){var transit_mode=points[i].segment.transit_mode.toLowerCase();(point=new AMap.Marker({map:map,position:points[i].location,content:'<div class=\"amap-lib-marker-stop amap-lib-marker-bus-'+transit_mode+'Stop\"></div>',offset:[-12,-12],innerOverlay:!0})).isOfficial=!0,point._data=points[i],AMap.Event.addListener(point,\"click\",this.listener.markerClick),_overlays.push(point)}}var busPath;for(i=0;i<busPaths.length;i++)(busPath=new AMap.Polyline({map:map,path:busPaths[i],isOutline:this.options.isOutline,outlineColor:this.options.outlineColor,borderWeight:2,lineJoin:\"round\",strokeColor:\"#0091ff\",strokeOpacity:styleOptions.strokeOpacity,strokeWeight:6,showDir:me.showDir,innerOverlay:!0})).isOfficial=!0,_overlays.push(busPath);var railwayPath;for(i=0;i<railwayPaths.length;i++)(railwayPath=new AMap.Polyline({map:map,path:railwayPaths[i],isOutline:this.options.isOutline,outlineColor:this.options.outlineColor,borderWeight:2,lineJoin:\"round\",strokeColor:\"grey\",strokeOpacity:styleOptions.strokeOpacity,strokeWeight:6,showDir:me.showDir,innerOverlay:!0})).isOfficial=!0,_overlays.push(railwayPath);var walkPath;for(i=0;i<walkPaths.length;i++)(walkPath=new AMap.Polyline({map:map,path:walkPaths[i],isOutline:this.options.isOutline,outlineColor:this.options.outlineColor,borderWeight:2,strokeColor:\"grey\",lineJoin:\"round\",strokeStyle:\"dashed\",strokeOpacity:styleOptions.strokeOpacity,strokeDasharray:[10,10],strokeWeight:6,innerOverlay:!0})).isOfficial=!0,_overlays.push(walkPath);return _overlays},me.clearPanel=function(){if(this.options&&this.options.panel){var a=me.util.getElementsByClassName(\"amap-call\",\"div\",this.options.panel)[0];a&&a.removeEventListener(\"click\",me.listener.gotoAMap),this.options.panel.innerHTML=\"\"}},me.clearOverlays=function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close(),this._highlightOverlay&&(this._highlightOverlay.setMap(null),this._highlightOverlay=null),this.clearPlanRoute()},me.getTitle=function(segments){for(var lineName,lineNameArr=[],j=0;j<segments.length;j++){var segment=segments[j],mode=segment.transit_mode;if(\"WALK\"!==mode)if(\"BUS\"===mode||\"SUBWAY\"===mode){lineName=(lineName=segment.transit.lines[0].name).replace(/\\(.+\\)/g,\"\");var lineNum=\"\";\"SUBWAY\"===mode&&(lineNum=me.getLineNum(lineName)),lineNameArr.push('<span class=\"line '+mode.toLowerCase()+\"line \"+lineNum+\"\\\"><span class='beforespan'></span><span class='afterspan'></span>\"+lineName+\"</span>\")}else\"RAILWAY\"===mode&&(lineName=segment.transit.name,lineNameArr.push('<span class=\"line '+mode.toLowerCase()+\"line \\\"><span class='beforespan'></span><span class='afterspan'></span>\"+lineName+\"</span>\"))}return lineNameArr.join(\"\")},me.getLineNum=function(lineName){var numArray=lineName.match(/[\\d]+/);if(numArray&&0!==numArray.length)return\"subwayline\"+numArray[0];var subwayNameObj={bt:\"八通线\",fs:\"房山线\",yz:\"亦庄线\",cp:\"昌平线\",jc:\"机场线\",xj:\"西郊线\"};for(var i in subwayNameObj)if(-1!==lineName.indexOf(subwayNameObj[i]))return\"subwayline\"+i;return\"\"},me.util={},me.util.getDistance=function(len){return len<=1e3?len+\"米\":Math.round(len/10)/100+\"公里\"},me.util.getTime=function(second){var minute=(second/60).toFixed(0);return minute<60?minute+\"分钟\":Math.floor(minute/60)+\"小时\"+minute%60+\"分钟\"},me.util.formatTime=function(time){return(time=\"\"+time).replace(/(.{2})$/,\":$1\")},me.util.domstr2dom=function(arg){var objE=document.createElement(\"div\");return objE.innerHTML=arg,objE},me.util.getElementsByClassName=function(className,tag,parent){for(var current,testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\"),elements=(tag=tag||\"*\",(parent=parent||document).getElementsByTagName(tag)),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},me.enableListeners=function(){for(var unfocusTitle,unfocusTitles=this.util.getElementsByClassName(\"planTitle\",\"div\",me.options.panel),i=0;i<unfocusTitles.length;i++)unfocusTitle=unfocusTitles[i],AMap.Event.addDomListener(unfocusTitle,\"click\",this.listener.unfocusTitleClick),AMap.Event.addDomListener(unfocusTitle,\"mouseenter\",this.listener.unfocusTitleMouseenter),AMap.Event.addDomListener(unfocusTitle,\"mouseleave\",this.listener.unfocusTitleMouseleave);var c_div,c_divs=this.util.getElementsByClassName(\"*\",\"dt\",me.options.panel);for(i=0;i<c_divs.length;i++)c_div=c_divs[i],AMap.Event.addDomListener(c_div,\"click\",this.listener.busRouteStep);0<unfocusTitles.length&&me.listener.unfocusTitleClick.call(unfocusTitles[0]);var viaDiv,viaDivs=this.util.getElementsByClassName(\"icon-arrow\",\"a\",me.options.panel);for(i=0;i<viaDivs.length;i++)viaDiv=viaDivs[i],AMap.Event.addDomListener(viaDiv,\"click\",this.listener.viaDivClick)},me.listener={},me.listener.viaDivClick=function(){var parentNode=this.parentNode,ul=me.util.getElementsByClassName(\"*\",\"ul\",parentNode)[0];\"none\"===ul.style.display||\"\"===ul.style.display?(ul.style.display=\"block\",this.className=\"icon-arrow expand\"):(ul.style.display=\"none\",this.className=\"icon-arrow\")},me.listener.markerClick=function(){var data=this._data;\"start\"===data.type||\"end\"===data.type?me._infoWindow.setOffset(new AMap.Pixel(0,-30)):me._infoWindow.setOffset(new AMap.Pixel(0,-11)),\"起点\"===data.name||\"终点\"===data.name||(\"start\"===data.type||\"end\"===data.type?me._infoWindow.setOffset(new AMap.Pixel(0,-30)):me._infoWindow.setOffset(new AMap.Pixel(0,-11)),me._infoWindow.setContent(me.view.createInfowindowContent(data)),me._infoWindow.open(me.options.map,this.getPosition())),me.options.map.setCenter(this.getPosition())},me.listener.busRouteStep=function(){me._highlightOverlay&&me._highlightOverlay.setMap(null);var segmentIndex=this.getAttribute(\"index\");if(\"start\"!==segmentIndex)if(\"end\"!==segmentIndex){me._infoWindow.close();var highlight,segment=me.options.data.plans[me._currentPlanIndex].segments[segmentIndex];\"SUBWAY\"===segment.transit_mode||\"BUS\"===segment.transit_mode?highlight=new AMap.Polyline({map:me.options.map,path:segment.transit.path,strokeColor:\"red\",strokeOpacity:.8,strokeWeight:6,innerOverlay:!0}):\"RAILWAY\"===segment.transit_mode?highlight=new AMap.Polyline({map:me.options.map,path:[segment.transit.departure_stop.location,segment.transit.arrival_stop.location],strokeColor:\"red\",strokeStyle:\"dashed\",strokeOpacity:.8,strokeWeight:4,innerOverlay:!0}):\"TAXI\"===segment.transit_mode?highlight=new AMap.Polyline({map:me.options.map,path:[segment.transit.origin,segment.transit.destination],strokeColor:\"red\",strokeStyle:\"dashed\",strokeOpacity:.8,strokeWeight:4,innerOverlay:!0}):\"WALK\"===segment.transit_mode&&(highlight=new AMap.Polyline({map:me.options.map,path:segment.transit.path,strokeColor:\"red\",strokeStyle:\"dashed\",strokeOpacity:.8,strokeDasharray:[10,10],strokeWeight:6,innerOverlay:!0})),highlight&&(highlight.isOfficial=!0),me._highlightOverlay=highlight,me.options.map.setBounds(highlight.getBounds())}else me.listener.markerClick.call({_data:me.options.data.end,getPosition:function(){return me.options.data.end.location}});else me.listener.markerClick.call({_data:me.options.data.start,getPosition:function(){return me.options.data.start.location}})},me.listener.busTitleClick=function(){me._currentPlanTitle.style.display=\"block\",me._currentPlanOptenitem.style.display=\"none\",me.clearOverlays()},me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);target&&\"A\"===target.tagName||(\"open\"===me._currentPlanTitleStatus&&me._currentPlanTitle===this?(me.view.closeCurrentPlanDiv(),me.clearOverlays()):(\"open\"===me._currentPlanTitleStatus&&me.view.closeCurrentPlanDiv(),me.view.openPlanDiv(this)))},me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute(\"index\");me.drawPlanRoute(index),me.listener.unfocusTitleMouseenter.last=this},me.listener.unfocusTitleMouseleave=function(e){me.clearPlanRoute()},me.view={},me.view.openPlanDiv=function(planDiv){me._currentPlanTitle=planDiv,me._currentPlanOptenitem=planDiv.nextSibling,me.util.getElementsByClassName(\"icon-arrow-up\",\"div\",me._currentPlanTitle)[0].className=\"icon-arrow-up expand\",me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentPlanTitle)[0]&&(me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentPlanTitle)[0].style.display=\"inline-block\"),me._currentPlanOptenitem.style.display=\"block\",me._currentPlanTitleStatus=\"open\";var index=me._currentPlanTitle.getAttribute(\"index\");me._currentPlanIndex=index,me.options.map&&me.drawPlanOverlays(me._currentPlanIndex)},me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName(\"icon-arrow-up expand\",\"div\",me._currentRouteTitle)[0],fix=me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0];title&&(title.className=\"icon-arrow-up\"),fix&&(fix.style.display=\"none\"),me._currentPlanOptenitem.style.display=\"none\",me._currentPlanTitleStatus=\"close\"},me.view.createInfowindowContent=function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];if(!data.segment||\"SUBWAY\"!==data.segment.transit_mode&&\"BUS\"!==data.segment.transit_mode)if(data.segment&&\"RAILWAY\"===data.segment.transit_mode){onStation=data.segment.transit.departure_stop.name,offStation=data.segment.transit.arrival_stop.name;var desc=me.util.getDistance(data.segment.transit_distance)+\",\"+me.util.getTime(data.segment.time);type=data.segment.transit_mode.toLowerCase();data.name===onStation&&(name=data.name+\" -- 上车<br>\"),data.name===offStation&&(name=data.name+\" -- 下车<br>\"),c.push('<div class=\"amap-lib-iw-content amap-lib-iw-bus\">'),c.push('    <div class=\"amap-lib-curr-place\">'+name+\"</div>\"),c.push('    <div class=\"amap-lib-drive-route-description-box\">'),c.push('        <div class=\"amap-lib-bus-route-item\">'),c.push('            <div style=\"cursor:default\" class=\"amap-lib-marker-stop amap-lib-marker-bus-'+type+'Stop\"></div>'),c.push('            <div class=\"amap-lib-transport-step\">'),c.push('                <div class=\"amap-lib-name_direc\">'),c.push('                    <div title=\"'+data.segment.transit.name+'\">'+data.segment.transit.name+\"</div>\"),c.push(\"                </div>\"),c.push('                <div class=\"amap-lib-step-detail\">'),c.push('                    <div class=\"amap-lib-step-from\">出发点：<span>'+onStation+\"</span></div>\"),c.push('                    <div class=\"amap-lib-step-to\">到达点：<span>'+offStation+\"</span>(\"+desc+\")</div>\"),c.push(\"                </div>\"),c.push(\"            </div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\")}else{(c=[]).push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+data.name+'&nbsp;<a href=\"http://detail.amap.com/detail/'+data.id+\"?spm=0.0.0.0.sWhSmy&citycode=\"+data.citycode+'\" target=\"_blank\">详情»</a></div>'),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\")}else{var name,onStation=data.segment.transit.on_station.name,offStation=data.segment.transit.off_station.name,stationNum=data.segment.transit.via_num,type=data.segment.transit_mode.toLowerCase();data.name===onStation&&(name=data.name+\" -- 上车<br>\"),data.name===offStation&&(name=data.name+\" -- 下车<br>\"),c.push('<div class=\"amap-lib-iw-content amap-lib-iw-bus\">'),c.push('    <div class=\"amap-lib-curr-place\">'+name+\"</div>\"),c.push('    <div class=\"amap-lib-drive-route-description-box\">'),c.push('        <div class=\"amap-lib-bus-route-item\">'),c.push('            <div style=\"cursor:default\" class=\"amap-lib-marker-stop amap-lib-marker-bus-'+type+'Stop\"></div>'),c.push('            <div class=\"amap-lib-transport-step\">'),c.push('                <div class=\"amap-lib-name_direc\">'),c.push('                    <div title=\"'+data.segment.transit.lines[0].name+'\">'+data.segment.transit.lines[0].name+\"</div>\"),c.push(\"                </div>\"),c.push('                <div class=\"amap-lib-step-detail\">'),c.push('                    <div class=\"amap-lib-step-from\">出发点：<span>'+onStation+\"</span></div>\"),c.push('                    <div class=\"amap-lib-step-to\">到达点：<span>'+offStation+\"</span>(\"+(stationNum+1)+\"站)</div>\"),c.push(\"                </div>\"),c.push(\"            </div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\")}div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\",div.appendChild(sharp);var close=document.createElement(\"div\");return close.className=\"amap-combo-close\",div.appendChild(close),close.href=\"javascript: void(0)\",AMap.Event.addDomListener(close,\"touchend\",function(e){me._infoWindow.close()}),AMap.Event.addDomListener(close,\"click\",function(e){me._infoWindow.close()}),content.appendChild(div),content.appendChild(close),content.appendChild(sharp),content},me.view.createPanel=function(data){var div=document.createElement(\"div\");if(div.className=\"amap-lib-transfer\",!data.plans)return div.innerHTML=\"抱歉，没有合适的路线。\",div;for(var plan,result=[],i=0;i<data.plans.length;i++){(plan=data.plans[i]).distance;var segments=plan.segments,title=me.getTitle(segments);result=(result=result.concat(me.view.createTitleDiv(i,title,plan,!0))).concat(me.view.createOpenitemDiv(i,title,data,!1))}return div.innerHTML=result.join(\"\"),div},me.view.createTitleDiv=function(index,title,plan,isDisplay){var r=[];r.push('<div class=\"planTitle\" index=\"'+index+'\">'),r.push(\"    <h3>\"),r.push(\"       \"+title),r.push(\"    </h3>\"),r.push(\"    <p>\"+me.util.getTime(plan.time)+\"(\"+me.util.getDistance(plan.distance)+\") | 步行\"+me.util.getDistance(plan.walking_distance)+' | <span class=\"red\">'+plan.cost+\"元</span></p>\");var d=me.options.data;if(\"起点\"!==d.start.name&&\"终点\"!==d.end.name){var p=[];p.push(d.start.location.lat),p.push(d.start.location.lng),p.push(d.start.name),p.push(d.end.location.lat),p.push(d.end.location.lng),p.push(d.end.name),p.push(\"5\"),p.push(\"1\"),p.push(\"0\"),r.push('\\t<ul class=\"clearfix\">'),r.push('<li><a target=\\'_blank\\' class=\"blue\" href=\"http://www.amap.com/?r='+p.join(\",\")+\"\\\"><span class='aftera'></span>在高德地图中查看</a></li>\"),r.push(\"\\t</ul>\")}return r.push('    <div class=\"sidebar\">'),r.push('        <div class=\"icon-arrow-up\" href=\"javascript:void(0)\"><span class=\\'aftera\\'></span></div>'),r.push(\"    </div>\"),r.push(\"</div>\"),r},me.view.createOpenitemDiv=function(index,title,data,isDisplay){var segments=data.plans[index].segments,r=[];r.push('<dl class=\"plan\">'),r.push(\"    <dt class=\\\"busstop start\\\" index=\\\"start\\\"><div class='beforedt'></div><div class='afterdt'></div>\"+data.start.name+\"</dt>\");for(var segment,i=0;i<segments.length;i++)if(\"METRO_RAIL\"===(segment=segments[i]).transit_mode&&(segment.transit_mode=\"SUBWAY\"),\"WALK\"===segment.transit_mode){var instruction=segment.instruction;r.push('                 <dt class=\"bus-route walk\" index=\"'+i+\"\\\"><div class='beforedt'></div><div class='afterdt'></div>\"+instruction+\"</dt>\")}else if(\"BUS\"===segment.transit_mode||\"SUBWAY\"===segment.transit_mode){var lineNum=\"\",lineName=segment.transit.lines[0].name;\"SUBWAY\"===segment.transit_mode&&(lineNum=me.getLineNum(lineName)),r.push('                    <dt class=\"bus-route '+segment.transit_mode.toLowerCase()+\" \"+lineNum+'\" index=\"'+i+\"\\\"><div class='beforedt'></div><div class='afterdt'></div>\"),\"SUBWAY\"===segment.transit_mode?r.push(\"                            <span class=\\\"line\\\"><div class='beforespan'></div>\"+lineName+\"</span>\"):r.push(\"                            \"+lineName),r.push(\"                    </dt>                                \"),r.push('                    <dd class=\"'+segment.transit_mode.toLowerCase()+\" \"+lineNum+\"\\\"><div class='afterdd'></div>\"),r.push(\"                        <h4>\"),r.push('                            <a href=\"javascript:void(0)\" class=\"busstop\" id=\"\">'),r.push(\"                                \"+segment.transit.on_station.name),r.push(\"                            </a>\"),r.push(\"                            <span>上车</span>\"),r.push(\"                        </h4>\"),r.push(\"                        <ul>\");for(var stops=segment.transit.via_stops,j=0;j<stops.length;j++)r.push(\"                                <li>\"+stops[j].name+\"</li>\");r.push(\"                        </ul>\"),r.push(\"                        <h4>\"),r.push('                            <a href=\"javascript:void(0)\" class=\"busstop\" id=\"\">'),r.push(\"                                \"+segment.transit.off_station.name),r.push(\"                            </a>\"),r.push(\"                            <span>下车</span></h4>\"),r.push(\"                        <p>首: \"+me.util.formatTime(segment.transit.lines[0].stime)+\"    末: \"+me.util.formatTime(segment.transit.lines[0].etime)+\"</p>                            \"),0!==stops.length&&r.push(\"                            <a href=\\\"javascript:void(0)\\\" style='cursor: pointer' class=\\\"icon-arrow\\\"><span class='aftera'></span>\"+(stops.length+1)+\"站</a>\"),r.push(\"                    </dd>\")}else if(\"RAILWAY\"===segment.transit_mode){var desc=me.util.getDistance(segment.distance)+\",\"+me.util.getTime(segment.time);lineNum=\"\",lineName=segment.transit.name;r.push('                    <dt class=\"bus-route '+segment.transit_mode.toLowerCase()+'\" index=\"'+i+\"\\\"><div class='beforedt'></div><div class='afterdt'></div>\"),r.push(\"                            \"+lineName),r.push(\"                    </dt>                                \"),r.push('                    <dd class=\"'+segment.transit_mode.toLowerCase()+\" \"+lineNum+\"\\\"><div class='afterdd'></div>\"),r.push(\"                        <h4>\"),r.push('                            <a href=\"javascript:void(0)\" class=\"busstop\" id=\"\">'),r.push(\"                                \"+segment.transit.departure_stop.name+\"[\"+me.util.formatTime(segment.transit.departure_stop.time)+\"]\"),r.push(\"                            </a>\"),r.push(\"                            <span>上车</span>\"),r.push(\"                        </h4>\"),r.push(\"                        <ul>\"),r.push(\"                        </ul>\"),r.push(\"                        <h4>\"),r.push('                            <a href=\"javascript:void(0)\" class=\"busstop\" id=\"\">'),r.push(\"                                \"+segment.transit.arrival_stop.name+\"[\"+me.util.formatTime(segment.transit.arrival_stop.time)+\"]\"),r.push(\"                            </a>\"),r.push(\"                            <span>下车</span></h4>\"),r.push(\"                        <p>\"+desc+\"</p>                            \"),r.push(\"                    </dd>\")}else if(\"TAXI\"===segment.transit_mode){desc=me.util.getDistance(segment.distance)+\",\"+me.util.getTime(segment.time),lineNum=\"\";r.push('                 <dt class=\"bus-route walk\" index=\"'+i+\"\\\"><div class='beforedt'></div><div class='afterdt'></div>\"),r.push(\"                            \"+segment.instruction),r.push(\"                    </dt>                                \"),r.push('                    <dd class=\"'+segment.transit_mode.toLowerCase()+\" \"+lineNum+\"\\\"><div class='afterdd'></div>\"),r.push(\"                        <h4>\"),r.push(\"                        </h4>\"),r.push(\"                        <ul>\"),r.push(\"                        </ul>\"),r.push(\"                        <h4>\"),r.push(\"                        </h4>\"),r.push(\"                        <p>\"+desc+\"</p>                            \"),r.push(\"                    </dd>\")}return r.push(\"    <dt class=\\\"busstop end\\\" index=\\\"end\\\"><div class='beforedt'></div><div class='afterdt'></div>\"+data.end.name+\"</dt>\"),r.push(\"</dl>\"),r}},GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL),this.city=city||\"\",this.CLASS_NAME=\"AMap.GetLL\"}return _createClass(GetLL,[{key:\"getCity\",value:function(cbk){var url=AMap.getConfig().protocol+\"://webapi.amap.com/maps/ipCity\";AMap.WebService.get(url,{},function(status,data){cbk(\"complete\"===status?data:{})})}},{key:\"get\",value:function(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:\"all\"}),result=[];!function getOne(){if(keywordsList.length){var keyAndcity=keywordsList.shift(),keyword=keyAndcity.keyword,city=keyAndcity.city||defaultCity;city=city||\"\",psearch.setCity(city),psearch.search(keyword,function(status,data){\"error\"===status?cbk(\"error\",data):\"complete\"===status?data.poiList&&data.poiList.pois.length?(result.push(data.poiList.pois[0]),keywordsList.length?getOne():cbk(\"complete\",result)):cbk(city?\"no_poi\":\"no_city\",keyAndcity):\"no_data\"===status&&cbk(city?\"no_poi\":\"no_city\",keyAndcity)})}}()}}]),GetLL}(),PlaceSearch=function(){function PlaceSearch(opt){var _this;return _classCallCheck(this,PlaceSearch),(_this=_possibleConstructorReturn(this,_getPrototypeOf(PlaceSearch).call(this))).closed=!1,_this.opt=AMap.extend({showCover:!0,autoFitView:!0},opt||{}),_this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize=\"number\"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=AMap.getConfig().server+\"/v3/place\",_this}return _inherits(PlaceSearch,AMap.Event),_createClass(PlaceSearch,[{key:\"search\",value:function(keyword,cbk){var params={s:\"rsv3\",children:+(this.opt.children?\"1\":\"\")};this._mergeParams(this.opt,{city:\"city\",rankBy:\"sortrule\",type:\"types\",pageIndex:\"page\",pageSize:\"offset\",extensions:\"extensions\",citylimit:\"citylimit\"},params),this._query(this.url+\"/text\",params,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"setCity\",value:function(city){AMap.BuryPoint.add(this,\"setCity\"),this.opt.city=city}},{key:\"_mergeParams\",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&(params[map[i]]=data[i]);return params}},{key:\"_query\",value:function(url,params,cbk,encodeURICom,type,args){var _this2=this;url+=0<params.length?\"?\"+params.join(\"&\"):\"\",AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:!0},params,encodeURICom),function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,type,args):_this2._onError(data,cbk)})}},{key:\"_onComplete\",value:function(data,cbk){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info=\"TIP_KEYWORDS\"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city)city.hasOwnProperty(pro)&&\"num\"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count),citiesnew.push(city)}result.info=\"TIP_CITIES\",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)):(result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info,AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&(result.cityList||result.keywordList?cbk(\"complete\",result):cbk(\"no_data\",{})))}else result={info:data.info},AMap.Event.trigger(this,\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_parsePOI\",value:function(poi){function getLngLat(location){if(location){var lngLat=location.split(\",\");return new AMap.LngLat(lngLat[0],lngLat[1])}return null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo=\"\",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:\"0\"!==poi.groupbuy_num,discount:\"0\"!==poi.discount_num};\"1\"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1;var poiDeepInfo={groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"};if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:\"\"};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:\"\"};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case\"cinema\":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type=\"CINEMA\";break;case\"dining\":var dining={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:\"\",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=dining,poiDeepInfo.deep_type=\"DINING\";break;case\"scenic\":var scenic={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=scenic,poiDeepInfo.deep_type=\"SCENIC\";break;case\"hotel\":var hotel={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:\"\",photos:poiDeep.photos};poiDeepInfo.hotel=hotel,poiDeepInfo.deep_type=\"HOTEL\"}}var rePoi={};for(var baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&\"base\"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:\"_parseString\",value:function(v){return v instanceof Array&&0===v.length||void 0===v?\"\":v}},{key:\"_formatFields\",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),\"object\"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}}]),PlaceSearch}(),Transfer=function(){function Transfer(opt){var _this2;return _classCallCheck(this,Transfer),(_this2=_possibleConstructorReturn(this,_getPrototypeOf(Transfer).call(this))).CLASS_NAME=\"AMap.Transfer\",_this2.opt=AMap.extend({outlineColor:\"white\",showDir:!0,isOutline:!0,autoFitView:!0},opt),_this2.url=AMap.getConfig().server+\"/v3/direction/transit/integrated\",_this2}return _inherits(Transfer,AMap.Event),_createClass(Transfer,[{key:\"search\",value:function(){AMap.BuryPoint.add(this,\"search\");var args=arguments;if(0<args.length){var cbk=args[1];if(args[0]=AMap.Util.parseLngLatData(args[0]),args[1]=AMap.Util.parseLngLatData(args[1]),args[0].lng&&args[0].lat)this.search_.apply(this,args);else if(args[0]instanceof Array){var this_=this;args[0].length<2&&cbk&&\"function\"==typeof cbk&&cbk(\"error\",{info:\"short_of_params\"}),this_.getLL||(this_.getLL=new GetLL);var city=this_._parseString(this_.opt.city),cityd=this_._parseString(this_.opt.cityd),sc=city||args[0][0].city,ec=cityd||city||args[0][1].city;args[0][0].city=sc,args[0][1].city=ec,this_.getLL.get(args[0],city,function(status,result){\"error\"===status?cbk&&\"function\"==typeof cbk&&cbk(\"error\",result):\"complete\"===status?this_.search_(result[0].exit_location||result[0].location,result[1].entr_location||result[1].location,args[1]||void 0,result,[sc,ec]):\"no_poi\"===status?args[1]&&args[1](\"error\",{info:\"在城市\"+result.city+\"无法找到\"+result.keyword}):\"no_city\"===status&&args[1]&&args[1](\"error\",{info:\"请设置\"+result.keyword+\"的城市信息\"})})}}}},{key:\"leaveAt\",value:function(time,date){AMap.BuryPoint.add(this,\"leaveAt\"),this.leaveDate=date||\"\",this.leaveTime=time||\"\"}},{key:\"clear\",value:function(){AMap.BuryPoint.add(this,\"clear\"),this.render&&this.render.clear()}},{key:\"search_\",value:function(origin,destination,cbk,result,kcs){var sc,ec,_this3=this;if(origin instanceof AMap.LngLat&&destination instanceof AMap.LngLat)if(kcs&&(sc=kcs[0],ec=kcs[1]),this._parseString(this.opt.city)||sc||!cbk||\"function\"!=typeof cbk){var params={origin:origin.toString(),destination:destination.toString(),city:this._parseString(this.opt.city)||sc,strategy:this._parseString(this.opt.policy),nightflag:this._parseString(this.opt.nightflag?\"1\":\"0\"),extensions:this._parseString(this.opt.extensions),s:\"rsv3\"};this.leaveDate&&(params.date=this._parseString(this.leaveDate)),this.leaveTime&&(params.time=this._parseString(this.leaveTime));var cityd=this._parseString(this.opt.cityd)||ec;cityd&&(params.cityd=+cityd),AMap.WebService.get(this.url,params,function(status,data){\"complete\"===status?_this3._onComplete(data,cbk,result):_this3._onError(data,cbk)})}else cbk(\"error\",\"NO_CITY\");else cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\")}},{key:\"setPolicy\",value:function(policy){AMap.BuryPoint.add(this,\"setPolicy\"),this.opt.policy=policy}},{key:\"setCity\",value:function(city){AMap.BuryPoint.add(this,\"setCity\"),this.opt.city=city}},{key:\"setCityd\",value:function(cityd){AMap.BuryPoint.add(this,\"setCityd\"),this.opt.cityd=cityd}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_parsePlans\",value:function(data){for(var result=[],i=0;i<data.length;i+=1){var route=data[i];this._transitDistance=0,this._railwayDistance=0,this._walkingDiastance=0,this._taxiDistance=0,this._path=[];var r={cost:parseInt(route.cost,10)||0,time:this._parseInt(route.duration),nightLine:\"1\"===route.nightflag,segments:this._parseSegments(route.segments)};r.transit_distance=this._transitDistance,r.railway_distance=this._railwayDistance,r.walking_distance=this._walkingDiastance,r.taxi_distance=this._taxiDistance,r.distance=this._transitDistance+this._railwayDistance+this._walkingDiastance+this._taxiDistance,r.path=this._path,result[i]=r}return result}},{key:\"_parseWalk\",value:function(data){var dest=data.destination.split(\",\"),orig=data.origin.split(\",\"),steps=this._parseWalkSteps(data.steps),distance=parseInt(this._parseString(data.distance),10);this._walkingDiastance+=distance;for(var path=[],i=0;i<steps.length;i+=1)path=path.concat(steps[i].path);return this._path=this._path.concat(path),{time:this._parseInt(data.duration),instruction:\"步行\"+distance+\"米\"+steps[steps.length-1].assist_action,transit_mode:\"WALK\",distance:distance,transit:{origin:new AMap.LngLat(orig[0],orig[1]),destination:new AMap.LngLat(dest[0],dest[1]),path:path,steps:steps}}}},{key:\"_parseWalkSteps\",value:function(data){var result=[];data.step&&(data=[data.step]);for(var i=0;i<data.length;i+=1){var t=data[i],path=this._multi2Lnglat(t.polyline);result[i]={instruction:this._parseString(t.instruction),road:this._parseString(t.road),distance:this._parseInt(t.distance),time:this._parseInt(t.duration),path:path,action:this._parseString(t.action),assist_action:this._parseString(t.assistant_action)}}return result}},{key:\"_str2LngLat\",value:function(str,space){var arr=str.split(space||\",\");return new AMap.LngLat(arr[0],arr[1])}},{key:\"_multi2Lnglat\",value:function(str){for(var result=[],arr=str.split(\";\"),i=0;i<arr.length;i+=1)result[i]=this._str2LngLat(arr[i]);return result}},{key:\"_parseTransit\",value:function(data){var buslines=data.buslines;if(0!==buslines.length){var first=buslines[0],start=first.departure_stop;start.location=this._str2LngLat(start.location);var end=first.arrival_stop;end.location=this._str2LngLat(end.location);var lines=this._parseTransitLine(buslines),line=lines[0];this._transitDistance+=line.distance,this._path=this._path.concat(line.path);for(var lines__=[],i=0;i<lines.length;i+=1)lines__.push({name:lines[i].name,id:lines[i].id,type:lines[i].type,stime:lines[i].stime,etime:lines[i].etime});var transitDetails={on_station:start,off_station:end,path:line.path,via_num:line.via_num,via_stops:line.via_stops,lines:lines__};return{instruction:\"乘坐\"+line.name+\"途径\"+transitDetails.via_num+\"站到达\"+transitDetails.off_station.name,transit_mode:\"地铁线路\"===line.type?\"SUBWAY\":\"轻轨线路\"===line.type?\"METRO_RAIL\":\"BUS\",time:line.time,transit:transitDetails,distance:line.distance}}}},{key:\"_parseTransitLine\",value:function(data){for(var r=[],i=0;i<data.length;i+=1){var t=data[i],to={name:t.name,id:t.id,type:t.type,distance:this._parseInt(t.distance),time:this._parseInt(t.duration),path:this._multi2Lnglat(t.polyline),stime:t.start_time,etime:t.end_time,via_num:this._parseInt(t.via_num),via_stops:this._parseStops(t.via_stops)};r[i]=to}return r}},{key:\"_parseStops\",value:function(data){for(var r=[],i=0;i<data.length;i+=1)r[i]={name:data[i].name,id:data[i].id,location:this._str2LngLat(data[i].location)};return r}},{key:\"_parseTexi\",value:function(taxi){var result={},transit={};return result.transit_mode=\"TAXI\",result.instruction=\"\",transit.time=result.time=this._parseInt(taxi.duration),transit.distance=result.distance=this._parseInt(taxi.distance)||0,transit.origin=this._str2LngLat(taxi.origin),transit.destination=this._str2LngLat(taxi.destination),transit.sname=this._parseString(taxi.sname),transit.sname&&(result.instruction+=\"从\"+transit.sname),this._taxiDistance+=result.distance,transit.tname=this._parseString(taxi.tname),result.transit=transit,result.instruction+=\"乘坐出租车到达\",transit.tname&&(result.instruction+=transit.tname),result}},{key:\"_parseSegments\",value:function(segments){segments.segment&&(segments=[segments.segment]);for(var result=[],i=0;i<segments.length;i+=1){var seg=segments[i];if(seg.walking.origin){var walk=this._parseWalk(seg.walking);result.push(walk)}if(seg.taxi&&seg.taxi.destination){var taxi=this._parseTexi(seg.taxi);result.push(taxi)}if(seg.bus&&seg.bus.buslines.length){var segment=this._parseTransit(seg.bus);if(seg.entrance.name&&segment){var thisEntLoc=seg.entrance.location.split(\",\");segment.transit.entrance={name:seg.entrance.name,location:new AMap.LngLat(thisEntLoc[0],thisEntLoc[1])}}if(seg.exit.name&&segment){var thisExiLoc=seg.exit.location.split(\",\");segment.transit.exit={name:seg.exit.name,location:new AMap.LngLat(thisExiLoc[0],thisExiLoc[1])}}segment&&result.push(segment)}if(seg.railway&&seg.railway.name){var railway=this._parseRailway(seg.railway);result.push(railway)}}return result}},{key:\"_parseRailStop\",value:function(stop,space){return delete stop.start,delete stop.end,stop.location=this._str2LngLat(stop.location,space||\" \"),stop.time=this._parseInt(stop.time),stop}},{key:\"_parseViaStops\",value:function(stops){if(!stops)return[];for(var i=0;i<stops.length;i+=1)stops[i]=this._parseRailStop(stops[i],\",\"),stops[i].wait=this._parseInt(stops[i].wait);return stops}},{key:\"_parseSpaces\",value:function(spaces){for(var i=0;i<spaces.length;i+=1)spaces[i].type=spaces[i].code,delete spaces[i].code,spaces[i].cost=this._parseInt(spaces[i].cost);return spaces}},{key:\"_parseRailway\",value:function(rail){var result={},transit={};return result.id=rail.id,result.name=rail.name,result.trip=rail.trip,transit.instruction=\"乘坐\"+result.trip,result.type=rail.type,result.distance=this._parseInt(rail.distance),this._railwayDistance+=result.distance,result.time=this._parseInt(rail.time),result.departure_stop=this._parseRailStop(rail.departure_stop),result.arrival_stop=this._parseRailStop(rail.arrival_stop),rail.via_stops&&(result.via_stops=this._parseViaStops(rail.via_stops),result.via_num=result.via_stops.length,transit.instruction+=\",途径\"+result.via_num+\"站\",result.alters=rail.alters||[]),result.spaces=this._parseSpaces(rail.spaces),transit.transit_mode=\"RAILWAY\",transit.time=result.time,transit.distance=result.distance,transit.transit=result,transit.instruction+=\"到\"+result.arrival_stop.name,transit}},{key:\"_parseString\",value:function(v){return\"object\"===_typeof(v)||void 0===v?\"\":v}},{key:\"_parseInt\",value:function(v){var n=parseInt(v,10);return isNaN(n)?0:n}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"searchOnAMAP\",value:function(p){AMap.BuryPoint.add(this,\"searchOnAMAP\");var pp={t:1};pp.m=this.opt.policy;var o=AMap.Util.parseLngLatData(p.origin),d=AMap.Util.parseLngLatData(p.destination);pp.sy=o.lat,pp.sx=o.lng,pp.sname=p.originName||\"\",pp.dy=d.lat,pp.dx=d.lng,pp.dname=p.destinationName||\"\"}},{key:\"_onComplete\",value:function(data,cbk,poiresult){if(!this.closed){var result={};if(parseInt(data.status,10)){if(data.count&&0===parseInt(data.count,10))result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info;else if(data.route){var origin=data.route.origin.split(\",\"),dest=data.route.destination.split(\",\"),plans=this._parsePlans(data.route.transits);result={info:data.info,origin:new AMap.LngLat(origin[0],origin[1]),destination:new AMap.LngLat(dest[0],dest[1]),taxi_cost:parseInt(data.route.taxi_cost,10),plans:plans},poiresult&&(result.start=poiresult[0],result.end=poiresult[1],result.originName=result.start.name,result.destinationName=result.end.name)}cbk&&\"function\"==typeof cbk&&(result.plans&&0===result.plans.length?cbk(\"no_data\",{}):cbk(\"complete\",result)),(this.opt.map||this.opt.panel)&&(this.render||(this.render=new TransferRender({showDir:this.opt.showDir})),this.render.autoRender({data:result,panel:this.opt.panel,map:this.opt.map,hideMarkers:this.opt.hideMarkers||!1,isOutline:this.opt.isOutline,outlineColor:this.opt.outlineColor,autoFitView:this.opt.autoFitView},this)),AMap.Event.trigger(this,\"complete\",result)}else AMap.Event.trigger(this,\"error\",{info:data.info}),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}}}]),Transfer}();AMap.Transfer=Transfer,AMap.TransferPolicy={LEAST_TIME:0,LEAST_FEE:1,LEAST_TRANSFER:2,LEAST_WALK:3,MOST_COMFORT:4,NO_SUBWAY:5},AMap.VehicleType={BUS:\"普通公交线路\",SUBWAY:\"地铁线路\",METRO_RAIL:\"轻轨线路\",TRAM:\"有轨电车\",TROLLEYBUS:\"无轨电车\",TRAVEL_LINE:\"旅游专线\",AIRPORT_BUS:\"机场大巴\",COMMUNITY_CAR:\"社区专车\",MAGLEV_TRAIN:\"磁悬浮列车线路\",FERRY:\"轮渡\",FUNICULAR:\"索道交通\",OTHER:\"其他公交线路\"}}(window.AMap);\n");
_jsload_('AMap.TruckDriving.js',"!function(AMap){\"use strict\";function _typeof(obj){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,\"prototype\",{writable:!1})}function _inherits(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,\"prototype\",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var NewTarget,Super=_getPrototypeOf(Derived),Super=(NewTarget=hasNativeReflectConstruct?(NewTarget=_getPrototypeOf(this).constructor,Reflect.construct(Super,arguments,NewTarget)):Super.apply(this,arguments),this);if(NewTarget&&(\"object\"==typeof NewTarget||\"function\"==typeof NewTarget))return NewTarget;if(void 0!==NewTarget)throw new TypeError(\"Derived constructors may only return object or undefined\");return _assertThisInitialized(Super)}}var markerOffset=[-12,-30];function forOf(arr,cb){for(var i=0,len=arr.length;i<len;i++)cb(arr[i])}function TruckDrivingRender(initOpts){this.CLASS_NAME=\"AMap.TruckDrivingRender\",AMap.BuryPoint.add(this.CLASS_NAME);var me=this;initOpts=initOpts||{},me._styleOpts={},me._styleOpts.zIndex=\"number\"==typeof initOpts.zIndex?initOpts.zIndex:50,me._showTraffic=initOpts.showTraffic,me.showDir=!(initOpts&&!initOpts.showDir),me._currentRouteTitle=null,me._currentRouteOptenitem=null,me.autoRender=function(options,TruckDrivingObject){me.clear(),options&&options.data&&(options.panel||options.map)&&(this.options=options,this.hideMarkers=options.hideMarkers||!1,options.map&&(this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)}),this._overlays=[],this._route=[],this._highlightOverlay=null,options.panel||this.drawRouteOverlays(0)),options.panel&&(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),options.panel.appendChild(this.view.createPanel(options.data)),this.enableListeners()))},me.clear=function(){this.clearPanel(),this.clearOverlays()},me.drawRoute=function(index){var data=this.options.data,index=data.routes[index],steps=(index.distance,index.steps),index=[],TruckDrivingPaths=[],lastStepPath=(index.push([data.start.location,steps[0].path[0]]),steps[steps.length-1].path);index.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<steps.length;i++)step=steps[i],TruckDrivingPaths=TruckDrivingPaths.concat(step.path);(TruckDrivingPaths=0<TruckDrivingPaths.length?[TruckDrivingPaths]:TruckDrivingPaths).steps=steps,this.clearRoute(),this._route=this.addOverlays([],index,TruckDrivingPaths,{strokeOpacity:.4})},me.clearRoute=function(){if(this._route){for(var i=0;i<this._route.length;i++)this._route[i].setMap(null);this._route=[]}},me.drawRouteOverlays=function(index){var data=this.options.data,index=data.routes[index],steps=(index.distance,index.steps),index=[],TruckDrivingPaths=[],points=[];if(points.push(data.start),data.waypoints)for(var waypoints=data.waypoints,i=0,len=waypoints.length;i<len;i++)points.push(waypoints[i]);points.push(data.end),index.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;index.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<steps.length;i++)step=steps[i],TruckDrivingPaths=TruckDrivingPaths.concat(step.path);(TruckDrivingPaths=0<TruckDrivingPaths.length?[TruckDrivingPaths]:TruckDrivingPaths).steps=steps,this.clearOverlays(),this._overlays=this.addOverlays(points,index,TruckDrivingPaths),me.options.autoFitView&&me.options.map.setFitView(this._overlays)},me.addOverlays=function(points,walkPaths,TruckDrivingPaths,styleOptions){var start,_this=this,map=this.options.map,_overlays=(styleOptions=styleOptions||{strokeOpacity:1},[]);if(!this.hideMarkers){points[0]&&((start=new AMap.Marker({map:map,offset:markerOffset,position:points[0].location,content:'<div class=\"amap-lib-marker-from\"></div>',innerOverlay:!0})).isOfficial=!0,start._data=points[0],AMap.Event.addListener(start,\"click\",this.listener.markerClick),_overlays.push(start)),1<points.length&&((start=new AMap.Marker({map:map,offset:markerOffset,position:points[points.length-1].location,content:'<div class=\"amap-lib-marker-to\"></div>',innerOverlay:!0})).isOfficial=!0,start._data=points[points.length-1],AMap.Event.addListener(start,\"click\",this.listener.markerClick),_overlays.push(start));for(var point,i=1;i<points.length-1;i++)points[i].isWaypoint&&((point=new AMap.Marker({offset:markerOffset,map:map,position:points[i].location,content:'<div class=\"amap-lib-marker-mid\"></div>',innerOverlay:!0}))._data=points[i],AMap.Event.addListener(point,\"click\",this.listener.markerClick)),point.isOfficial=!0,_overlays.push(point)}styleOptions=me.util.extend({},me._styleOpts,styleOptions);for(var drivingPath,_i=0;_i<TruckDrivingPaths.length;_i++){var trafficGradient=void 0;me._showTraffic&&TruckDrivingPaths.steps&&!function(){var trafficGradientValues=[],steps=TruckDrivingPaths.steps,totalDistance=0,currentDistance=(forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){totalDistance+=tmcsPath.distance})}),0);forOf(steps,function(step){step.tmcsPaths&&forOf(step.tmcsPaths,function(tmcsPath){currentDistance+=tmcsPath.distance,trafficGradientValues.push([currentDistance/totalDistance,_this.getColorByTmcsStatus(tmcsPath.status)])})}),trafficGradient={values:trafficGradientValues}}(),(drivingPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:TruckDrivingPaths[_i],lineJoin:\"bevel\",strokeColor:\"#0091ff\",isOutline:me.options.isOutline,outlineColor:me.options.outlineColor,borderWeight:2,lineGradient:trafficGradient,strokeOpacity:1,showDir:me.showDir,strokeWeight:6,innerOverlay:!0}))).isOfficial=!0,_overlays.push(drivingPath),me._drivingPolyline=drivingPath}for(var walkPath,i=0;i<walkPaths.length;i++)(walkPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:walkPaths[i],strokeColor:\"grey\",strokeStyle:\"dashed\",strokeWeight:6,innerOverlay:!0}))).isOfficial=!0,_overlays.push(walkPath);return _overlays},me.getColorByTmcsStatus=function(status){var color;switch(status){case\"畅通\":color=\"#1BAC2E\";break;case\"缓行\":color=\"#FFA700\";break;case\"拥堵\":color=\"#E94B37\";break;case\"严重拥堵\":color=\"#A81212\";break;default:color=\"#adadad\"}return color},me.clearPanel=function(){var a;this.options&&this.options.panel&&((a=me.util.getElementsByClassName(\"amap-call\",\"div\",this.options.panel)[0])&&AMap.Event.clearListeners(a,\"click\"),this.options.panel.innerHTML=\"\")},me.clearOverlays=function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close(),this._highlightOverlay&&(this._highlightOverlay.setMap(null),this._highlightOverlay=null),this.clearRoute()},me.getTitle=function(route){var policy=route.policy?\" | <span class='blue'>\"+route.policy+\"</span>\":\"\";return me.util.getTime(route.time)+\"(\"+me.util.getDistance(route.distance)+\")\"+policy},me.util={},me.util.extend=function(dest){for(var i,src,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(i in src=sources[j]||{})Object.prototype.hasOwnProperty.call(src,i)&&(\"function\"==typeof src[i]&&\"function\"==typeof dest[i]&&(src[i].__super=dest[i]),dest[i]=src[i]);return dest},me.util.getDistance=function(len){return len<=1e3?len+\"米\":Math.round(len/10)/100+\"公里\"},me.util.getTime=function(second){second=(second/60).toFixed(0);return second<60?second+\"分钟\":Math.floor(second/60)+\"小时\"+second%60+\"分钟\"},me.util.domstr2dom=function(arg){var objE=document.createElement(\"div\");return objE.innerHTML=arg,objE},me.util.getElementsByClassName=function(className,tag,parent){for(var current,testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\"),tag=tag||\"*\",elements=(parent=parent||document).getElementsByTagName(tag),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},me.enableListeners=function(){for(var unfocusTitle,unfocusTitles=me.util.getElementsByClassName(\"planTitle\",\"div\",me.options.panel),i=0;i<unfocusTitles.length;i++)unfocusTitle=unfocusTitles[i],AMap.Event.addDomListener(unfocusTitle,\"click\",this.listener.unfocusTitleClick),AMap.Event.addDomListener(unfocusTitle,\"mouseenter\",this.listener.unfocusTitleMouseenter),AMap.Event.addDomListener(unfocusTitle,\"mouseleave\",this.listener.unfocusTitleMouseleave);for(var c_div,c_divs=this.util.getElementsByClassName(\"*\",\"dt\",me.options.panel),i=0;i<c_divs.length;i++)c_div=c_divs[i],AMap.Event.addDomListener(c_div,\"click\",this.listener.routeStepItem);0<unfocusTitles.length&&me.listener.unfocusTitleClick.call(unfocusTitles[0])},me.listener={},me.listener.markerClick=function(){var data=this._data;\"start\"===data.type||\"end\"===data.type?me._infoWindow.setOffset(new AMap.Pixel(0,-30)):me._infoWindow.setOffset(new AMap.Pixel(0,0)),\"起点\"!==data.name&&\"终点\"!==data.name&&\"途经点\"!==data.name&&(me._infoWindow.setContent(me.view.createInfowindowContent(data)),me._infoWindow.open(me.options.map,this.getPosition())),me.options.map.setCenter(this.getPosition())},me.listener.routeStepItem=function(){if(me.options.map){me._highlightOverlay&&me._highlightOverlay.setMap(null),this.style.backgroundColor=\"rgb(240, 240, 240)\",me.listener.routeStepItem.last&&(me.listener.routeStepItem.last.style.backgroundColor=\"\");for(var stepIndex,step,children=(me.listener.routeStepItem.last=this).parentNode.children,i=0;i<children.length;i++)if(children[i]===this){stepIndex=i;break}0===stepIndex?me.listener.markerClick.call({_data:me.options.data.start,getPosition:function(){return me.options.data.start.location}}):stepIndex===children.length-1?me.listener.markerClick.call({_data:me.options.data.end,getPosition:function(){return me.options.data.end.location}}):(me._infoWindow.close(),step=me.options.data.routes[me._currentRouteIndex].steps[stepIndex-=1],(step=new AMap.Polyline({map:me.options.map,path:step.path,strokeColor:\"red\",strokeOpacity:.8,strokeWeight:8,innerOverlay:!0})).isOfficial=!0,me._highlightOverlay=step,me.options.map.setBounds(step.getBounds()))}},me.listener.driveTitleClick=function(){me._currentRouteTitle.style.display=\"block\",me._currentRouteOptenitem.style.display=\"none\",me.clearOverlays()},me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);target&&\"A\"===target.tagName||(\"open\"===me._currentRouteTitleStatus&&me._currentRouteTitle===this?(me.view.closeCurrentPlanDiv(),me.clearOverlays()):(\"open\"===me._currentRouteTitleStatus&&me.view.closeCurrentPlanDiv(),me.view.openPlanDiv(this)))},me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute(\"index\");me.drawRoute(index),me.listener.unfocusTitleMouseenter.last=this},me.listener.unfocusTitleMouseleave=function(e){me.clearRoute()},me.view={},me.view.openPlanDiv=function(planDiv){me._currentRouteTitle=planDiv,me._currentRouteOptenitem=planDiv.nextSibling,me.util.getElementsByClassName(\"icon-arrow-up\",\"div\",me._currentRouteTitle)[0].className=\"icon-arrow-up expand\",me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0]&&(me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0].style.display=\"inline-block\"),me._currentRouteOptenitem.style.display=\"block\",me._currentRouteTitleStatus=\"open\";planDiv=me._currentRouteTitle.getAttribute(\"index\");me._currentRouteIndex=planDiv,me.options.map&&me.drawRouteOverlays(me._currentRouteIndex)},me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName(\"icon-arrow-up expand\",\"div\",me._currentRouteTitle)[0],fix=me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0];title&&(title.className=\"icon-arrow-up\"),fix&&(fix.style.display=\"none\"),me._currentRouteOptenitem.style.display=\"none\",me._currentRouteTitleStatus=\"close\"},me.view.createInfowindowContent=function(data){return[data.name].join(\"\")},me.view.createInfowindowContent=function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\"),c=(div.className=\"amap-content-body\",[]),data=(c.push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+data.name+'&nbsp;<a href=\"http://detail.amap.com/detail/'+data.id+\"?spm=0.0.0.0.sWhSmy&citycode=\"+data.citycode+'\" target=\"_blank\">详情»</a></div>'),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),div.innerHTML=c.join(\"\"),document.createElement(\"div\")),c=(data.className=\"amap-combo-sharp\",div.appendChild(data),document.createElement(\"div\"));return c.className=\"amap-combo-close\",div.appendChild(c),c.href=\"javascript: void(0)\",AMap.Event.addDomListener(c,\"touchend\",function(e){me._infoWindow.close()}),AMap.Event.addDomListener(c,\"click\",function(e){me._infoWindow.close()}),content.appendChild(div),content.appendChild(c),content.appendChild(data),content},me.view.createPanel=function(data){var div=document.createElement(\"div\");if(div.className=\"amap-lib-driving\",!data.routes)return div.innerHTML=\"抱歉，没有合适的路线。\",div;for(var result=[],i=0;i<data.routes.length;i++){var route=data.routes[i],title=me.getTitle(route);result=(result=result.concat(me.view.createTitleDiv(i,title,route,!0))).concat(me.view.createOpenitemDiv(i,title,data,!1))}return div.innerHTML=result.join(\"\"),div},me.view.createTitleDiv=function(index,title,route,isDisplay){for(var road,steps=route.steps,roadNameArray=[],route=\"\",temp=\"\",i=0;i<steps.length;i++)(road=steps[i].road)&&road!==temp&&(roadNameArray.push(road),temp=road);var roadNames=roadNameArray.join(\">\"),route=4<roadNameArray.length?(roadNameArray.splice(2,roadNameArray.length-4,\"......\"),roadNameArray.join(\">\")):roadNames,r=[];r.push('<div class=\"planTitle\" index=\"'+index+'\">'),r.push(\"    <h3  class='planTitle_route' title=\\\"\"+roadNames+'\">'),r.push(\"         <b>\"+route+\"</b>\"),r.push(\"    </h3>\"),r.push(\"    <p>\"+title+\"</p>\"),me.options.data;return r.push('    <div class=\"sidebar\">'),r.push('        <div class=\"icon-arrow-up\" href=\"javascript:void(0)\"></div>'),r.push(\"    </div>                \"),r.push(\"</div>\"),r},me.view.createOpenitemDiv=function(index,title,data,isDisplay){var steps=data.routes[index].steps,r=[];r.push('<dl class=\"plan plan-nobus\">'),r.push(\"    <dt class=\\\"start\\\"><div class='beforedt'></div><div class='afterdt'></div><b>\"+data.start.name+\"</b></dt>\");for(var step,i=0;i<steps.length;i++)step=steps[i],r.push(' <dt class=\"route turn-'+me.getSigns(step.action)+'\"  index=\"'+index+'\">                '),r.push(\"  <div class='beforedt'></div><div class='afterdt'></div>       \"+step.instruction),r.push(\" </dt>\");return r.push(\"    <dt class=\\\"end\\\"><div class='beforedt'></div><b>\"+data.end.name+\"</b></dt>\"),r.push(\"</dl>\"),r},me.getSigns=function(action){return{\"左转\":\"left\",\"右转\":\"right\",\"靠左\":\"keepleft\",\"靠右\":\"keepright\",\"向左前方行驶\":\"leftup\",\"向左后方行驶\":\"leftdown\",\"向右前方行驶\":\"rightup\",\"向右后方行驶\":\"rightdown\",\"左转调头\":\"leftback\",\"右转调头\":\"rightback\",\"进入环岛\":\"enterRing\",\"离开环岛\":\"leaveRing\",\"减速行驶\":\"slow\",\"向左前方行走\":\"leftup\",\"向左后方行走\":\"leftdown\",\"向右前方行走\":\"rightup\",\"向右后方行走\":\"rightdown\",\"通过人行横道\":\"crosswalk\",\"通过过街天桥\":\"overpass\",\"通过地下通道\":\"underpass\",\"通过广场\":\"squarepass\"}[action]||\"advance\"}}var GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL),this.city=city||\"\",this.CLASS_NAME=\"AMap.GetLL\"}return _createClass(GetLL,[{key:\"getCity\",value:function(cbk){var url=AMap.getConfig().protocol+\"://webapi.amap.com/maps/ipCity\";AMap.WebService.get(url,{},function(status,data){cbk(\"complete\"===status?data:{})})}},{key:\"get\",value:function(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:\"all\"}),result=[];(function getOne(){var keyAndcity,keyword,city;keywordsList.length&&(keyword=(keyAndcity=keywordsList.shift()).keyword,city=keyAndcity.city||defaultCity||\"\",psearch.setCity(city),psearch.search(keyword,function(status,data){\"error\"===status?cbk(\"error\",data):\"complete\"===status?data.poiList&&data.poiList.pois.length?(result.push(data.poiList.pois[0]),keywordsList.length?getOne():cbk(\"complete\",result)):cbk(city?\"no_poi\":\"no_city\",keyAndcity):\"no_data\"===status&&cbk(city?\"no_poi\":\"no_city\",keyAndcity)}))})()}}]),GetLL}(),PlaceSearch=function(){_inherits(PlaceSearch,AMap.Event);var _super=_createSuper(PlaceSearch);function PlaceSearch(opt){var _this;return _classCallCheck(this,PlaceSearch),(_this=_super.call(this)).closed=!1,_this.opt=AMap.extend({showCover:!0,autoFitView:!0},opt||{}),_this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize=\"number\"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=AMap.getConfig().server+\"/v3/place\",_this}return _createClass(PlaceSearch,[{key:\"search\",value:function(keyword,cbk){var params={s:\"rsv3\",children:+(this.opt.children?\"1\":\"\")};this._mergeParams(this.opt,{city:\"city\",rankBy:\"sortrule\",type:\"types\",pageIndex:\"page\",pageSize:\"offset\",extensions:\"extensions\",citylimit:\"citylimit\"},params),this._query(this.url+\"/text\",params,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"setCity\",value:function(city){AMap.BuryPoint.add(this,\"setCity\"),this.opt.city=city}},{key:\"_mergeParams\",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&(params[map[i]]=data[i]);return params}},{key:\"_query\",value:function(url,params,cbk,encodeURICom,type,args){var _this2=this;url+=0<params.length?\"?\"+params.join(\"&\"):\"\",AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:!0},params,encodeURICom),function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,type,args):_this2._onError(data,cbk)})}},{key:\"_onComplete\",value:function(data,cbk,type,args){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info=\"TIP_KEYWORDS\"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var pro,city=cities[j];for(pro in city)city.hasOwnProperty(pro)&&\"num\"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count),citiesnew.push(city)}result.info=\"TIP_CITIES\",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)):(result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info,AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&(result.cityList||result.keywordList?cbk(\"complete\",result):cbk(\"no_data\",{})))}else result={info:data.info},AMap.Event.trigger(this,\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_parsePOI\",value:function(poi){function getLngLat(location){return location?(location=location.split(\",\"),new AMap.LngLat(+location[0],+location[1])):null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo=\"\",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:\"0\"!==poi.groupbuy_num,discount:\"0\"!==poi.discount_num},poiDeepInfo=(\"1\"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1,{groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"});if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:\"\"};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:\"\"};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case\"cinema\":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type=\"CINEMA\";break;case\"dining\":cinema={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:\"\",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=cinema,poiDeepInfo.deep_type=\"DINING\";break;case\"scenic\":cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=cinema,poiDeepInfo.deep_type=\"SCENIC\";break;case\"hotel\":cinema={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:\"\",photos:poiDeep.photos};poiDeepInfo.hotel=cinema,poiDeepInfo.deep_type=\"HOTEL\"}}var baseK,rePoi={};for(baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&\"base\"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:\"_parseString\",value:function(v){return v instanceof Array&&0===v.length||void 0===v?\"\":v}},{key:\"_formatFields\",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),\"object\"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}}]),PlaceSearch}(),TruckDriving=function(){_inherits(TruckDriving,AMap.Event);var _super=_createSuper(TruckDriving);function TruckDriving(opt){var _this2;return _classCallCheck(this,TruckDriving),(_this2=_super.call(this)).closed=!1,_this2.CLASS_NAME=\"AMap.TruckDriving\",_this2.stampId=AMap.Util.stamp(_assertThisInitialized(_this2)),_this2.opt=AMap.extend({showTraffic:!0,showDir:!0,policy:0,outlineColor:\"#ffe\",isOutline:!0,autoFitView:!0,apiVersion:\"v4\"},opt),_this2.url=AMap.getConfig().server+(_this2.isV5Version()?\"/v5/direction/truck\":\"/v4/direction/truck\"),_this2._dodgeAreas=[],_this2}return _createClass(TruckDriving,[{key:\"_guid\",value:function(){return Math.round(1e5*Math.random())}},{key:\"clear\",value:function(){AMap.BuryPoint.add(this,\"clear\"),this.render&&this.render.clear()}},{key:\"isV5Version\",value:function(){return\"v5\"===this.opt.apiVersion}},{key:\"search\",value:function(locations,callback){var this_;AMap.BuryPoint.add(this,\"search\"),locations&&0<locations.length&&(locations[0].lnglat?this.search_.apply(this,arguments):((this_=this).getLL||(this_.getLL=new GetLL),this_.getLL.get(locations,\"\",function(status,result){if(\"error\"===status)callback&&\"function\"==typeof callback&&callback(\"error\",result);else if(\"complete\"===status){for(var lcs=[],i=0;i<result.length;i+=1){var lc=0==i?result[i].exit_location||result[i].location:result[i].entr_location||result[i].location;lcs.push({lnglat:lc,pid:result[i].id,type:result[i].type})}this_.search_(lcs,callback,result)}else\"no_poi\"===status?callback&&callback(\"error\",{info:\"在城市\"+result.city+\"无法找到\"+result.keyword}):\"no_city\"===status&&callback&&callback(\"error\",{info:\"请设置\"+result.keyword+\"的城市信息\"})})))}},{key:\"setOption\",value:function(opt){this.opt=AMap.extend(this.opt,opt)}},{key:\"getOption\",value:function(){return this.opt}},{key:\"setProvinceAndNumber\",value:function(province,number){province&&number&&(this.opt.province=province,this.opt.number=number)}},{key:\"search_\",value:function(locations,callback,poiresult){var _this3=this;if(this.opt.size){for(var i=0;i<locations.length;i+=1)locations[i].lnglat=AMap.Util.parseLngLatData(locations[i].lnglat);var params={origin:locations[0].lnglat,originid:locations[0].pid||\"\",originidtype:locations[0].type||\"\",destination:locations[locations.length-1].lnglat,destinationid:locations[locations.length-1].pid||\"\",destinationtype:locations[locations.length-1].type||\"\"};if(this.opt.customParams)for(var k in this.opt.customParams)void 0!==params[k]||this.opt[k]instanceof Object||(params[k]=this.opt.customParams[k]);if(this.opt.province&&this.opt.number&&(params.province=this.opt.province,params.number=this.opt.number.toUpperCase()),params.strategy=this._parseString(this.opt.policy),2<locations.length){for(var waypoints=[],i=1;i<locations.length-1;i+=1)waypoints.push(locations[i].lnglat);params.waypoints=waypoints.join(\";\")}if(params.size=this.opt.size,params.width=this.opt.width||2.5,params.height=this.opt.height||1.6,params.load=this.opt.load||.9,params.weight=this.opt.weight||10,params.axis=this.opt.axlesNum||2,params.cartype=this.opt.cartype||0,params.showpolyline=void 0===_typeof(this.opt.showpolyline)?this.opt.showpolyline:1,params.nosteps=this.opt.nosteps||0,this.opt.showFields&&(params.show_fields=this.opt.showFields),this._dodgeAreas.length){for(var avoid=[],_i=0;_i<this._dodgeAreas.length;_i+=1)avoid.push(this._dodgeAreas[_i].join(\";\"));params.avoidpolygons=avoid.join(\"|\")}AMap.WebService.get(this.url,params,function(status,data){_this3.isV5Version()&&(data={data:data,errcode:0,errmsg:\"\",info:data.info||\"unknown-v5\"}),\"complete\"===status?_this3._onComplete(data,callback,poiresult,locations):_this3._onError(data,callback)})}else callback&&\"function\"==typeof callback&&callback(\"error\",{info:\"NO_PARAMS\",message:\"No param: size.\"})}},{key:\"setPolicy\",value:function(policy){AMap.BuryPoint.add(this,\"setPolicy\"),this.opt.policy=policy}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_str2LngLat\",value:function(str){str=str.split(\",\");return new AMap.LngLat(+str[0],+str[1])}},{key:\"_multi2Lnglat\",value:function(str){for(var result=[],arr=str.split(\";\"),i=0;i<arr.length;i+=1)result[i]=this._str2LngLat(arr[i]);return result}},{key:\"_parseString\",value:function(v){return\"object\"===_typeof(v)||void 0===v?\"\":v}},{key:\"_parseInt\",value:function(v){v=parseInt(v,10);return isNaN(v)?0:v}},{key:\"_parseRoutes\",value:function(data){var r=[];data=data.path?[data.path]:data;for(var i=0;i<data.length;i+=1){var t=data[i];r[i]={steps:this._parseStep(t.steps),restriction:this._parseInt(t.restriction),distance:this._parseInt(t.distance),time:this._parseInt(t.duration),policy:t.strategy,tolls:this._parseInt(t.tolls),tolls_distance:this._parseInt(t.toll_distance)}}return r}},{key:\"_parseStep\",value:function(data){for(var _this4=this,r=[],that=this,i=0;i<data.length;i+=1){var driveStep=data[i],path=this._multi2Lnglat(driveStep.polyline);r[i]={start_location:path[0],end_location:path[path.length-1],instruction:this._parseString(driveStep.instruction),orientation:this._parseString(driveStep.orientation),road:this._parseString(driveStep.road),distance:this._parseInt(driveStep.distance),tolls:this._parseInt(driveStep.tolls),toll_distance:this._parseInt(driveStep.toll_distance),toll_road:this._parseString(driveStep.toll_road),time:this._parseInt(driveStep.duration),path:path,action:this._parseString(driveStep.action),assistant_action:this._parseString(driveStep.assistant_action)},this._isArray(driveStep.cities)&&(r[i].cities=this._parseArray(driveStep.cities,function(data,pro){pro=\"districts\"===pro?that._parseArray(data):data;return pro})),this._isArray(driveStep.tmcs)&&(r[i].tmcs=this._parseArray(driveStep.tmcs,function(data,pro,arrItem){var result;switch(pro){case\"distance\":result=+data;break;case\"polyline\":arrItem.path=_this4._multi2Lnglat(data),result=data;break;default:result=data}return result}),r[i].tmcsPaths=this._mergeTmcs(r[i].tmcs))}return r}},{key:\"_mergeTmcs\",value:function(tmcs){for(var paths=[],lastTail=null,tmcsPathDistance=0,i=0,len=tmcs.length;i<len;i++){var path=tmcs[i].path,status=tmcs[i].status,tmcsStepDistance=tmcs[i].distance;if(!path||!path.length)return;var lastTailEndPos=lastTail&&lastTail.path[lastTail.path.length-1];lastTail&&status===lastTail.status&&path[0].equals(lastTailEndPos)?(lastTail.path.push.apply(lastTail.path,path),tmcsPathDistance+=tmcsStepDistance,lastTail.distance=tmcsPathDistance):(paths.push({path:[].concat(path),status:status,distance:0}),(lastTail=paths[paths.length-1]).distance=tmcsPathDistance=tmcsStepDistance)}return paths}},{key:\"_parseArray\",value:function(data,filter){for(var results=[],i=0;i<data.length;i+=1){var pro,result={};for(pro in data[i])data[i].hasOwnProperty(pro)&&(result[pro]=\"function\"==typeof filter?filter.call(this,data[i][pro],pro,result):data[i][pro]);results.push(result)}return results.length?results:null}},{key:\"_isArray\",value:function(array){return\"[object Array]\"===Object.prototype.toString.call(array)}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"_onComplete\",value:function(data,cbk,poiresult,extraOpts){if(!this.closed){var result;if(0!==parseInt(data.errcode,10))result={info:data.info},AMap.Event.trigger(this,\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info);else if(data.data&&data.data.count){if(result={info:data.errmsg,origin:this._str2LngLat(data.data.route.origin),destination:this._str2LngLat(data.data.route.destination),routes:this._parseRoutes(data.data.route.paths)},this.isV5Version()&&(result.incident=data.data.route.incident,result.facilities=data.data.route.facilities),poiresult){result.start=poiresult[0],result.end=poiresult[poiresult.length-1],result.originName=result.start.name,result.destinationName=result.end.name,result.waypoints=poiresult.slice(1,poiresult.length-1);for(var i=0,len=result.waypoints.length;i<len;i++)result.waypoints[i].isWaypoint=!0}else if(extraOpts&&(result.start={location:result.origin,name:\"起点\"},result.end={location:result.destination,name:\"终点\"},result.start.type=\"start\",result.end.type=\"end\",result.waypoints=[],extraOpts&&2<extraOpts.length))for(var waypoints=extraOpts.slice(1,extraOpts.length-1),i=0,len=waypoints.length;i<len;i++)result.waypoints.push({isWaypoint:!0,location:waypoints[i].lnglat,name:\"途经点\",type:\"waypoint\"});(this.opt.map||this.opt.panel)&&(this.render||(this.render=new TruckDrivingRender({showTraffic:this.opt.showTraffic,showDir:this.opt.showDir,zIndex:this.opt.zIndex})),this.render.autoRender({data:result,panel:this.opt.panel,map:this.opt.map,hideMarkers:this.opt.hideMarkers||!1,isOutline:this.opt.isOutline,outlineColor:this.opt.outlineColor,autoFitView:this.opt.autoFitView},this)),AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)}else result={info:\"ok\"===data.errmsg.toLowerCase()?\"NO_DATA\":data.info},AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"no_data\",{})}}},{key:\"setAvoidPolygons\",value:function(areas){areas=AMap.Util.parseLngLatData(areas),this._dodgeAreas=areas}},{key:\"clearAvoidPolygons\",value:function(){this._dodgeAreas=[]}},{key:\"getAvoidPolygons\",value:function(){return this._dodgeAreas}}]),TruckDriving}();AMap.TruckDriving=TruckDriving}(window.AMap);\n");
_jsload_('AMap.UTFGrid.js',"!function(k){\"use strict\";function a(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}var C=20037508.342789244,t=function(){function r(t,e,o){var a;if(!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),(a=s(this,i(r).call(this)))._resolution=156543.03392804097/Math.pow(2,20),\"string\"!=typeof t)throw\"第一个参数必须传入数据源url\";return a._url=t,o=o||{},a._tileSize=o.tileSize||256,a._resolution=o.resolution||4,a._pointerCursor=o.pointerCursor||!0,a._subdomains=o.subdomains||\"abcd\",\"string\"==typeof a._subdomains&&(a._subdomains=a._subdomains.split(\"\")),a._data={},a._isOnData=!1,e&&a.setMap(e),a}var t,e,o;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(r,k.Event),t=r,(e=[{key:\"setMap\",value:function(t){this._map&&(this._map.off(\"click\",this._onClick),this._map.off(\"mousemove\",this._onMouseMove),this._map.off(\"moveend\",this._updateData),this._map.off(\"zoomend\",this._updateData),this._map.setDefaultCursor(this._originCursor)),(this._map=t)&&(t.on(\"click\",this._onClick,this),t.on(\"mousemove\",this._onMouseMove.bind(this)),t.on(\"moveend\",this._updateData.bind(this)),t.on(\"zoomend\",this._updateData.bind(this)),this._originCursor=t.getDefaultCursor(),this._updateData())}},{key:\"_onClick\",value:function(t){var e=t.lnglat,o=this._searchData(e);o&&this.emit(\"click\",{lnglat:e,data:o})}},{key:\"_onMouseMove\",value:function(t){var e=t.lnglat,o=this._searchData(e);o&&this._currentData!==o&&(this._pointerCursor&&this._map.setDefaultCursor(\"pointer\"),this._currentData&&this.emit(\"mouseout\",{lnglat:e,data:this._currentData}),this.emit(\"mouseover\",{lnglat:e,data:o})),!o&&this._currentData&&(this._pointerCursor&&this._map.setDefaultCursor(this._originCursor),this.emit(\"mouseout\",{lnglat:e,data:this._currentData})),this._currentData=o}},{key:\"_updateData\",value:function(){var t=this._map,e=Math.floor(t.getZoom()),o=t.getBounds(),a=this._resolution,r=o.getNorthWest().pos,i=o.getSouthEast().pos,n=this._tileSize,s=r[0]+C,u=C-i[1],l=i[0]+C,h=s/a,_=(C-r[1])/a,c=l/a,f=u/a,p=Math.floor(h/n),d=Math.floor(_/n),m=Math.floor(c/n),v=Math.floor(f/n),g=Math.pow(2,e);m<p&&(m+=g);for(var y=p;y<=m;y+=1)for(var b=d;b<=v;b+=1){var M=(y+g)%g,D=[e,M,b].join(\"_\");if(!this._data.hasOwnProperty(D)){var w=this._getUrl(M,b,e);k.WebService.get(w,{},this._complete.bind(this,D))}}}},{key:\"_complete\",value:function(t,e,o){if(\"complete\"===e){for(var a in o.data)if(o.data.hasOwnProperty(a)){var r=o.data[a];if(r._ll){var i=r._ll.split(\",\");o.data[a]={_name:r._name,_location:new k.LngLat(i[0],i[1]),_id:r._id}}}this._data[t]=o}return{}}},{key:\"_getUrl\",value:function(t,e,o){var a=Math.floor(3*Math.random()),r=this._subdomains[a];return this._url.replace(\"[s]\",r).replace(\"[x]\",t).replace(\"[y]\",e).replace(\"[z]\",o)}},{key:\"_searchData\",value:function(t){var e=this._map,o=e.getProjection().project(t.lng,t.lat),a=this._tileSize,r=this._resolution,i=this._resolution,n=(o[0]+C)/r,s=(C-o[1])/r,u=Math.floor(n/a),l=Math.floor(s/a),h=Math.floor((n-u*a)/i),_=Math.floor((s-l*a)/i),c=this._data[Math.floor(e.getZoom())+\"_\"+u+\"_\"+l];if(!c||!c.grid)return null;var f=this._utfDecode(c.grid[_].charCodeAt(h)),p=c.keys[f],d=c.data[p];return c.data.hasOwnProperty(p)||(d=null),d}},{key:\"_utfDecode\",value:function(t){return 93<=t&&--t,35<=t&&--t,t-32}}])&&a(t.prototype,e),o&&a(t,o),r}();window.AMap.UTFGrid=t}(window.AMap);\n");
_jsload_('AMap.VTLayer.js',"!function(){\"use strict\";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var defaultOption={id:\"vtLayer\",tileUrl:AMap.getConfig().protocol+\"://fmap0{1,2,3,4}.amap.com/v3/vectormap?key=\"+AMap.getConfig().key+\"&s=rsv3&x=[x]&y=[y]&zoom=[z]\",zooms:[2,20],opacity:1,visible:!0,zIndex:2},VTLayer=function(_super){function __(){this.constructor=d}var d,b;function VTLayer(opts){void 0===opts&&(opts=defaultOption);var _this=this;return opts.id=defaultOption.id,opts.tileUrl=defaultOption.tileUrl,opts.zooms=defaultOption.zooms,opts.opacity=(void 0===opts.opacity?defaultOption:opts).opacity,opts.visible=(void 0===opts.visible?defaultOption:opts).visible,opts.zIndex=(void 0===opts.zIndex?defaultOption:opts).zIndex,(_this=_super.call(this,opts)||this).type=\"AMap.VTLayer\",_this}return extendStatics(d=VTLayer,b=_super),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __),VTLayer.prototype.getSourceConfig=function(){return{id:this._id||\"tile\",tileUrl:this._tileUrl||\"\",type:\"vectorTile\",tileSize:this._tileSize||256,zooms:this._zooms,dataZooms:this._dataZooms||[2,18],projection:this._projection||\"EPS3857\"}},VTLayer}(AMap.TileLayer);AMap.VTLayer=VTLayer}();\n");
_jsload_('AMap.Visual.js',"!function(){\"use strict\";var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return\"function\"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError(\"Generator is already executing.\");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var Promise$1=\"object\"==typeof global&&global&&global.Object===Object&&global,WeakMap=\"object\"==typeof self&&self&&self.Object===Object&&self,root=Promise$1||WeakMap||Function(\"return this\")(),Visual=root.Symbol,getTag=Object.prototype,hasOwnProperty=getTag.hasOwnProperty,nativeObjectToString=getTag.toString,symToStringTag=Visual?Visual.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=Visual?Visual.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var Set=root[\"__core-js_shared__\"],maskSrcKey=(DataView=/[^.]+$/.exec(Set&&Set.keys&&Set.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+DataView:\"\";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,WeakMap=Function.prototype,getTag=Object.prototype,Set=WeakMap.toString,DataView=getTag.hasOwnProperty,reIsNative=RegExp(\"^\"+Set.call(DataView).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,value){value=function(object,key){return null==object?void 0:object[key]}(object,value);return baseIsNative(value)?value:void 0}var WeakMap=getNative(root,\"WeakMap\"),reIsUint=/^(?:0|[1-9]\\d*)$/;function eq(value,other){return value===other||value!=value&&other!=other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}var objectProto$3=Object.prototype;function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var getTag=Object.prototype,hasOwnProperty$2=getTag.hasOwnProperty,propertyIsEnumerable=getTag.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var Set=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,DataView=Set&&\"object\"==typeof module&&module&&!module.nodeType&&module,getTag=DataView&&DataView.exports===Set?root.Buffer:void 0,isBuffer=(getTag?getTag.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var func,DataView=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=DataView&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===DataView&&Promise$1.process,Set=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),getTag=Set&&Set.isTypedArray,isTypedArray=getTag?(func=getTag,function(value){return func(value)}):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$3=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$3.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||function(value,length){var type=typeof value;return(length=null==length?9007199254740991:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$4=Object.prototype.hasOwnProperty;function baseKeys(object){if(Ctor=(value=object)&&value.constructor,value!==(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$3))return nativeKeys(object);var value,Ctor,key,result=[];for(key in Object(object))hasOwnProperty$4.call(object,key)&&\"constructor\"!=key&&result.push(key);return result}function keys(object){return(null!=(value=object)&&isLength(value.length)&&!isFunction(value)?arrayLikeKeys:baseKeys)(object);var value}var nativeCreate=getNative(Object,\"create\");var hasOwnProperty$5=Object.prototype.hasOwnProperty;var hasOwnProperty$6=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return\"__lodash_hash_undefined__\"===result?void 0:result}return hasOwnProperty$5.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$6.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?\"__lodash_hash_undefined__\":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(root,\"Map\");function getMapData(type,key){var value,data=type.__data__;return(\"string\"==(type=typeof(value=key))||\"number\"==type||\"symbol\"==type||\"boolean\"==type?\"__proto__\"!==value:null===value)?data[\"string\"==typeof key?\"string\":\"hash\"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:function(){return[]};function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,\"DataView\"),Promise$1=getNative(root,\"Promise\"),Set=getNative(root,\"Set\"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag,getTag$1=getTag=DataView&&\"[object DataView]\"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&\"[object Map]\"!=getTag(new Map)||Promise$1&&\"[object Promise]\"!=getTag(Promise$1.resolve())||Set&&\"[object Set]\"!=getTag(new Set)||WeakMap&&\"[object WeakMap]\"!=getTag(new WeakMap)?function(ctorString){var result=baseGetTag(ctorString),ctorString=\"[object Object]\"==result?ctorString.constructor:void 0,ctorString=ctorString?toSource(ctorString):\"\";if(ctorString)switch(ctorString){case dataViewCtorString:return\"[object DataView]\";case mapCtorString:return\"[object Map]\";case promiseCtorString:return\"[object Promise]\";case setCtorString:return\"[object Set]\";case weakMapCtorString:return\"[object WeakMap]\"}return result}:getTag,Uint8Array=root.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,\"__lodash_hash_undefined__\"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var Visual=Visual?Visual.prototype:void 0,symbolValueOf=Visual?Visual.valueOf:void 0;var hasOwnProperty$7=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$3=1,argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\",hasOwnProperty$8=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsWrapped=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),isSameTag=othIsWrapped?arrayTag$1:getTag$1(other),objIsWrapped=(objTag=objTag==argsTag$2?objectTag$2:objTag)==objectTag$2,othIsWrapped=(isSameTag=isSameTag==argsTag$2?objectTag$2:isSameTag)==objectTag$2,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsWrapped=!(objIsArr=!0)}if(isSameTag&&!objIsWrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case\"[object DataView]\":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case\"[object ArrayBuffer]\":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return eq(+object,+other);case\"[object Error]\":return object.name==other.name&&object.message==other.message;case\"[object RegExp]\":case\"[object String]\":return object==other+\"\";case\"[object Map]\":var result=mapToArray;case\"[object Set]\":result=result||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case\"[object Symbol]\":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){objIsWrapped=objIsWrapped&&hasOwnProperty$8.call(object,\"__wrapped__\"),othIsWrapped=othIsWrapped&&hasOwnProperty$8.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return!!isSameTag&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||\"constructor\"==key}return!result||skipCtor||(objCtor=object.constructor)!=(othCtor=other.constructor)&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function isEqual(value,other){return baseIsEqual(value,other)}var Loca,state={ready:!1,loaded:!1,defer:function(){var defer={};return defer.promise=new Promise(function(resolve,reject){defer.resolve=resolve,defer.reject=reject}),defer}()};function loadLoca(cfg){if(!state.loaded){if(state.loaded=!0,window.Loca)return state.defer.resolve(window.Loca),state.defer.promise;var tag_1=document.createElement(\"script\"),url=function(query){var key,arr=[];for(key in query)void 0!==query[key]&&null!==query[key]&&arr.push(key+\"=\"+encodeURIComponent(query[key]));return arr.join(\"&\")}({v:cfg.version,key:cfg.key}),url=cfg.protocol+\"://\"+cfg.host+\"/loca?\"+url;tag_1.src=url,tag_1.onload=function(){state.ready||(state.ready=!0,state.defer.resolve(window.Loca),document.body.removeChild(tag_1))},document.body.appendChild(tag_1)}return state.defer.promise}var ANIMATE_LAYERS=[\"ScatterLayer\",\"PulseLineLayer\",\"PulseLinkLayer\"],Visual=function(){function Visual(urlOrStyle,key,opts){var _this=this;void 0===opts&&(opts={}),this.CLASS_NAME=\"AMap.Visual\",this._layers={},this._layerListeningRecords={},this._layerInfoMarkers={},this._layerAnimates={},this._lights={},this._map=key;var domain=AMap.getConfig(),key=domain.key,domain=domain.domain;opts.locaNS?Loca=opts.locaNS:this._waitLoca=loadLoca({key:opts.locaKey||key,version:opts.locaVersion||\"2.0\",protocol:opts.locaProtocol||\"https\",host:opts.locaHost||domain}).then(function(LocaNS){Loca=LocaNS}),opts.locaContainer&&(this._locaContainer=opts.locaContainer),this._waitParser=new Promise(function(resolve){AMap.plugin(\"AMap.VisualStyleParser\",function(){resolve(void 0),_this._styleParser=new AMap.VisualStyleParser,_this.setVisualConfig(urlOrStyle)})})}return Visual.prototype.getLoca=function(){return this._locaContainer},Visual.prototype.getLayers=function(){return this._locaContainer.layers},Visual.prototype.getLights=function(){return this._locaContainer.lights},Visual.prototype.getVisualConfig=function(){return this._visualStyle},Visual.prototype.setVisualConfig=function(urlOrStyle){return __awaiter(this,void 0,void 0,function(){var changed,style;return __generator(this,function(_b){switch(_b.label){case 0:return[4,this._waitParser];case 1:return _b.sent(),[4,this._styleParser.loadStyle(urlOrStyle)];case 2:return(style=_b.sent(),changed=style.changed,style=style.style,changed)?(this._visualStyle=style,!this._waitLoca||Loca?[3,4]:[4,this._waitLoca]):[3,5];case 3:_b.sent(),_b.label=4;case 4:return this._buildVisualStyle(style),[3,6];case 5:console.log(\"检测到 visual style 没有新的内容，已跳过更新。\"),_b.label=6;case 6:return[2]}})})},Visual.prototype.destroy=function(){this._locaContainer.clear(),this._locaContainer.destroy()},Visual.prototype._setupMap=function(mapConfig){var mapStyle=mapConfig.style,rest=(mapConfig.viewMode,function(s,e){var t={};for(p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&\"function\"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}(mapConfig,[\"style\",\"viewMode\"]));mapStyle&&this._map.setMapStyle(mapStyle);for(var _i=0,_a=Object.keys(rest);_i<_a.length;_i++){var key=_a[_i];this._map.set(key,rest[key])}},Visual.prototype._buildLayer=function(layerConfig){var type=layerConfig.type,options=layerConfig.options,source=layerConfig.source,styles=layerConfig.styles,interaction=layerConfig.animates,animates=void 0===interaction?[]:interaction,interaction=layerConfig.interaction;if(type in Loca){var layer=new Loca[type](__assign(__assign({},options),{visible:options.visible&&!animates.length})),source=new(/(?<=(.json|.geojson))($|[^\\w])/.test(source.url)?Loca.GeoJSONSource:Loca.GeoBufferSource)({url:source.url});if(layer.setSource(source),layer.setStyle(styles),options.visible&&animates.length){layer.show(1);for(var _i=0,animates_1=animates;_i<animates_1.length;_i++){var ani=animates_1[_i];layer.addAnimate(ani)}}return this._layerAnimates[layerConfig.key]=animates,this._setupMapInteraction(layerConfig.key,layer,interaction),layer}console.warn(\"尚未支持该类型的图层: \"+type)},Visual.prototype._updateLayer=function(layer,layerConfig){var styles=layerConfig.styles,options=layerConfig.options,interaction=layerConfig.animates,animates=void 0===interaction?[]:interaction,interaction=layerConfig.interaction;if(void 0!==options.opacity&&layer.setOpacity(options.opacity),void 0!==options.zIndex&&layer.setzIndex(options.zIndex),void 0!==options.zooms&&layer.setZooms(options.zooms),options.visible?layer.visible||layer.show():layer.hide(),isEqual(layer.styleOptions,styles)||layer.setStyle(styles),options.visible&&animates.length)if(isEqual(animates,this._layerAnimates[layerConfig.key]))console.log(\"[Visual] skip layer animate\");else{layer.clearAnimate();for(var _i=0,animates_2=animates;_i<animates_2.length;_i++){var ani=animates_2[_i];layer.addAnimate(ani)}console.log(\"[Visual] fresh layer animate\")}else layer.clearAnimate(),console.log(\"[Visual] clear layer animate\");this._layerAnimates[layerConfig.key]=animates,this._setupMapInteraction(layerConfig.key,layer,interaction)},Visual.prototype._setupMapInteraction=function(key,layer,interaction){var _this=this,listening=this._layerListeningRecords[key],content=interaction||{},handler=content.trigger,style=content.style,content=content.content,content=void 0===content?\"\":content;!listening||listening.trigger===handler&&listening.style===style&&listening.content.toString()===content.toString()||(this._layerInfoMarkers[key]&&this._layerInfoMarkers[key].remove(),delete this._layerInfoMarkers[key],this._map.off(listening.trigger,listening.handler),delete this._layerListeningRecords[key]),handler&&!this._layerListeningRecords[key]&&(this._map.on(handler,handler=function(e){return _this._handleInfoBox(e,key,layer,interaction)}),this._layerListeningRecords[key]=__assign({handler:handler},interaction))},Visual.prototype._handleInfoBox=function(e,contentDiv,textContent,style){var infoMarker=e.pixel.toArray(),textContent=textContent.queryFeature(infoMarker);this._layerInfoMarkers[contentDiv]||(this._layerInfoMarkers[contentDiv]=new AMap.Marker({map:this._map,zIndex:1e3,anchor:\"bottom-center\",offset:new AMap.Pixel(0,-10)}));infoMarker=this._layerInfoMarkers[contentDiv];textContent?(contentDiv=style.content,style=void 0===(style=style.style)?\"\":style,textContent=\"function\"==typeof contentDiv?contentDiv(textContent):contentDiv,(contentDiv=document.createElement(\"div\")).setAttribute(\"style\",style+\";word-break: keep-all\"),contentDiv.innerText=textContent,infoMarker.setContent(contentDiv),infoMarker.setPosition(e.lnglat),infoMarker.setMap(this._map)):infoMarker.setMap(null)},Visual.prototype._buildLight=function(options){var type=options.type,options=options.options;if(type in Loca)return new Loca[type](options);console.warn(\"尚未支持该类型的光源: \"+type)},Visual.prototype._buildVisualStyle=function(lights){var _this=this,mapConfig=lights.map,layers=lights.layers,layers=void 0===layers?[]:layers,lights=lights.lights,lights=void 0===lights?[]:lights;this._setupMap(mapConfig);var loca=(loca=this._locaContainer)||(this._locaContainer=new Loca.Container({map:this._map}));layers.some(function(layer){return ANIMATE_LAYERS.includes(layer.type)})?(console.log(\"[Visual] auto start loca animate.\"),loca.animate.start()):(console.log(\"[Visual] auto stop loca animate.\"),loca.animate.stop()),this._addOrRemove(layers,this._layers,{onAdd:function(layer){layer=_this._buildLayer(layer);return loca.add(layer),console.log(\"[Visual] add layer: \",layer),layer},onUpdate:function(layer,config){_this._updateLayer(layer,config),console.log(\"[Visual] update layer: \",layer)},onRemove:function(layer,config){layer.destroy(),_this._layerInfoMarkers[config.key]&&_this._layerInfoMarkers[config.key].remove(),delete _this._layerInfoMarkers[config.key],delete _this._layerListeningRecords[config.key],delete _this._layerAnimates[config.key],console.log(\"[Visual] remove layer: \",layer)}}),this._addOrRemove(lights,this._lights,{onAdd:function(light){light=_this._buildLight(light);return loca.addLight(light),light},onUpdate:function(light,config){Object.assign(light,config.options)},onRemove:function(light,config){loca.removeLight(light),delete _this._lights[config.key]}})},Visual.prototype._addOrRemove=function(newValues,oldValues,cbs){for(var _i=0,_a=Object.keys(oldValues);_i<_a.length;_i++)!function(oldKey){var config=newValues.find(function(x){return x.key===oldKey});config?cbs.onUpdate(oldValues[oldKey],config):(cbs.onRemove(oldValues[oldKey],{key:oldKey}),delete oldValues[oldKey])}(_a[_i]);for(var _b=0,newValues_1=newValues;_b<newValues_1.length;_b++){var item=newValues_1[_b];oldValues[item.key]||(oldValues[item.key]=cbs.onAdd(item))}},Visual}();AMap.Visual=Visual}();\n");
_jsload_('AMap.VisualStyleParser.js',"!function(){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var Operation,__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return\"function\"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError(\"Generator is already executing.\");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}!function(Operation){Operation.EQUAL=\"==\",Operation.NOT_EQUAL=\"!=\",Operation.GREATER=\">\",Operation.GREATER_EQUAL=\">=\",Operation.LESS=\"<\",Operation.LESS_EQUAL=\"<=\",Operation.INCLUDE=\"include\",Operation.EXCLUDE=\"exclude\"}(Operation=Operation||{});function noop(val){return val}function tellString(val){return\"string\"==typeof val?\"`\"+val+\"`\":Array.isArray(val)?\"[\"+val.map(tellString)+\"]\":val}var aggregateMethods={count:function(propsArr){return propsArr.length},max:function(propsArr,byField){return propsArr.reduce(function(prev,next){return Math.max(prev,next[byField])},-1/0)},min:function(propsArr,byField){return propsArr.reduce(function(prev,next){return Math.min(prev,next[byField])},1/0)},sum:function(propsArr,byField){return propsArr.reduce(function(prev,next){return prev+next[byField]},0)},mean:function(propsArr,byField){return propsArr.reduce(function(prev,next){return prev+next[byField]},0)/propsArr.length}},Promise$1=\"object\"==typeof global&&global&&global.Object===Object&&global,WeakMap=\"object\"==typeof self&&self&&self.Object===Object&&self,root=Promise$1||WeakMap||Function(\"return this\")(),VisualStyleParser=root.Symbol,getTag=Object.prototype,hasOwnProperty=getTag.hasOwnProperty,nativeObjectToString=getTag.toString,symToStringTag=VisualStyleParser?VisualStyleParser.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\",symToStringTag$1=VisualStyleParser?VisualStyleParser.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&\"object\"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&(\"object\"==type||\"function\"==type)}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(tag){if(isObject(tag)){tag=baseGetTag(tag);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}}var Set=root[\"__core-js_shared__\"],maskSrcKey=(DataView=/[^.]+$/.exec(Set&&Set.keys&&Set.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+DataView:\"\";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+\"\"}catch(e){}}return\"\"}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,WeakMap=Function.prototype,getTag=Object.prototype,Set=WeakMap.toString,DataView=getTag.hasOwnProperty,reIsNative=RegExp(\"^\"+Set.call(DataView).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,value){value=function(object,key){return null==object?void 0:object[key]}(object,value);return baseIsNative(value)?value:void 0}var WeakMap=getNative(root,\"WeakMap\"),reIsUint=/^(?:0|[1-9]\\d*)$/;function eq(value,other){return value===other||value!=value&&other!=other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return\"number\"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}var objectProto$3=Object.prototype;function baseIsArguments(value){return isObjectLike(value)&&\"[object Arguments]\"==baseGetTag(value)}var getTag=Object.prototype,hasOwnProperty$2=getTag.hasOwnProperty,propertyIsEnumerable=getTag.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,\"callee\")&&!propertyIsEnumerable.call(value,\"callee\")};var Set=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,DataView=Set&&\"object\"==typeof module&&module&&!module.nodeType&&module,getTag=DataView&&DataView.exports===Set?root.Buffer:void 0,isBuffer=(getTag?getTag.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags[\"[object Float32Array]\"]=typedArrayTags[\"[object Float64Array]\"]=typedArrayTags[\"[object Int8Array]\"]=typedArrayTags[\"[object Int16Array]\"]=typedArrayTags[\"[object Int32Array]\"]=typedArrayTags[\"[object Uint8Array]\"]=typedArrayTags[\"[object Uint8ClampedArray]\"]=typedArrayTags[\"[object Uint16Array]\"]=typedArrayTags[\"[object Uint32Array]\"]=!0,typedArrayTags[\"[object Arguments]\"]=typedArrayTags[\"[object Array]\"]=typedArrayTags[\"[object ArrayBuffer]\"]=typedArrayTags[\"[object Boolean]\"]=typedArrayTags[\"[object DataView]\"]=typedArrayTags[\"[object Date]\"]=typedArrayTags[\"[object Error]\"]=typedArrayTags[\"[object Function]\"]=typedArrayTags[\"[object Map]\"]=typedArrayTags[\"[object Number]\"]=typedArrayTags[\"[object Object]\"]=typedArrayTags[\"[object RegExp]\"]=typedArrayTags[\"[object Set]\"]=typedArrayTags[\"[object String]\"]=typedArrayTags[\"[object WeakMap]\"]=!1;var func,DataView=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=DataView&&\"object\"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===DataView&&Promise$1.process,Set=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require(\"util\").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding(\"util\")}catch(e){}}(),getTag=Set&&Set.isTypedArray,isTypedArray=getTag?(func=getTag,function(value){return func(value)}):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$3=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$3.call(value,key)||skipIndexes&&(\"length\"==key||isBuff&&(\"offset\"==key||\"parent\"==key)||isType&&(\"buffer\"==key||\"byteLength\"==key||\"byteOffset\"==key)||function(value,length){var type=typeof value;return(length=null==length?9007199254740991:length)&&(\"number\"==type||\"symbol\"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$4=Object.prototype.hasOwnProperty;function baseKeys(object){if(Ctor=(value=object)&&value.constructor,value!==(\"function\"==typeof Ctor&&Ctor.prototype||objectProto$3))return nativeKeys(object);var value,Ctor,key,result=[];for(key in Object(object))hasOwnProperty$4.call(object,key)&&\"constructor\"!=key&&result.push(key);return result}function keys(object){return(null!=(value=object)&&isLength(value.length)&&!isFunction(value)?arrayLikeKeys:baseKeys)(object);var value}var nativeCreate=getNative(Object,\"create\");var hasOwnProperty$5=Object.prototype.hasOwnProperty;var hasOwnProperty$6=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return\"__lodash_hash_undefined__\"===result?void 0:result}return hasOwnProperty$5.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$6.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?\"__lodash_hash_undefined__\":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(root,\"Map\");function getMapData(type,key){var value,data=type.__data__;return(\"string\"==(type=typeof(value=key))||\"number\"==type||\"symbol\"==type||\"boolean\"==type?\"__proto__\"!==value:null===value)?data[\"string\"==typeof key?\"string\":\"hash\"]:data.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)}))}:function(){return[]};function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,\"DataView\"),Promise$1=getNative(root,\"Promise\"),Set=getNative(root,\"Set\"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag,getTag$1=getTag=DataView&&\"[object DataView]\"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&\"[object Map]\"!=getTag(new Map)||Promise$1&&\"[object Promise]\"!=getTag(Promise$1.resolve())||Set&&\"[object Set]\"!=getTag(new Set)||WeakMap&&\"[object WeakMap]\"!=getTag(new WeakMap)?function(ctorString){var result=baseGetTag(ctorString),ctorString=\"[object Object]\"==result?ctorString.constructor:void 0,ctorString=ctorString?toSource(ctorString):\"\";if(ctorString)switch(ctorString){case dataViewCtorString:return\"[object DataView]\";case mapCtorString:return\"[object Map]\";case promiseCtorString:return\"[object Promise]\";case setCtorString:return\"[object Set]\";case weakMapCtorString:return\"[object WeakMap]\"}return result}:getTag,Uint8Array=root.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,\"__lodash_hash_undefined__\"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othStacked=other.length;if(arrLength!=othStacked&&!(isPartial&&arrLength<othStacked))return!1;var arrStacked=stack.get(array),othStacked=stack.get(other);if(arrStacked&&othStacked)return arrStacked==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var VisualStyleParser=VisualStyleParser?VisualStyleParser.prototype:void 0,symbolValueOf=VisualStyleParser?VisualStyleParser.valueOf:void 0;var hasOwnProperty$7=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$3=1,argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\",hasOwnProperty$8=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsWrapped=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),isSameTag=othIsWrapped?arrayTag$1:getTag$1(other),objIsWrapped=(objTag=objTag==argsTag$2?objectTag$2:objTag)==objectTag$2,othIsWrapped=(isSameTag=isSameTag==argsTag$2?objectTag$2:isSameTag)==objectTag$2,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsWrapped=!(objIsArr=!0)}if(isSameTag&&!objIsWrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case\"[object DataView]\":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case\"[object ArrayBuffer]\":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return eq(+object,+other);case\"[object Error]\":return object.name==other.name&&object.message==other.message;case\"[object RegExp]\":case\"[object String]\":return object==other+\"\";case\"[object Map]\":var result=mapToArray;case\"[object Set]\":result=result||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case\"[object Symbol]\":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){objIsWrapped=objIsWrapped&&hasOwnProperty$8.call(object,\"__wrapped__\"),othIsWrapped=othIsWrapped&&hasOwnProperty$8.call(other,\"__wrapped__\");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,bitmask,customizer,stack=stack||new Stack)}return!!isSameTag&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key)))return!1}var objCtor=stack.get(object),othCtor=stack.get(other);if(objCtor&&othCtor)return objCtor==other&&othCtor==object;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||\"constructor\"==key}return!result||skipCtor||(objCtor=object.constructor)!=(othCtor=other.constructor)&&\"constructor\"in object&&\"constructor\"in other&&!(\"function\"==typeof objCtor&&objCtor instanceof objCtor&&\"function\"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}VisualStyleParser=function(){function VisualStyleParser(){this.CLASS_NAME=\"AMap.VisualStyleParser\"}return VisualStyleParser.prototype.loadStyle=function(urlOrStyle){return __awaiter(this,void 0,void 0,function(){var previous,visualId,_a;return __generator(this,function(_b){switch(_b.label){case 0:return(previous=this.rawStyle,\"string\"!=typeof urlOrStyle)?[3,2]:(visualId=this._formatAMapUrl(urlOrStyle,function(subtype,id){if(\"visual\"!==subtype)throw new Error(\"VisualStyle的资源路径必须符合: amap://visual/<visualId>\");return id}),[4,(_a=this)._getRemoteStyle(this._formatRestUrl(\"/rest/lbs/geohub/vis/publish\",[\"styleid=\"+visualId]))]);case 1:return _a.rawStyle=_b.sent(),[3,3];case 2:this.rawStyle=urlOrStyle,_b.label=3;case 3:return[2,{changed:(value=previous,other=this.rawStyle,!baseIsEqual(value,other)),style:this._parseFromRawStyle(this.rawStyle)}]}var value,other})})},VisualStyleParser.prototype._parseFromRawStyle=function(_a){var _this=this;return __assign(__assign({},_a),{layers:null===(_a=_a.layers)||void 0===_a?void 0:_a.map(function(rest){var source=rest.source,styles=rest.styles,interaction=rest.interaction,type=rest.type,rest=function(s,e){var t={};for(p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&\"function\"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}(rest,[\"source\",\"styles\",\"interaction\",\"type\"]);return __assign(__assign({},rest),{type:type,source:_this._parseFromLayerSource(source),styles:_this._parseFromLayerStyles(styles,type),interaction:_this._parseFromLayerInteraction(interaction)})})})},VisualStyleParser.prototype._parseFromLayerSource=function(source){var _this=this;return __assign(__assign({},source),{url:this._formatAMapUrl(source.url,function(subtype,id){if(\"geobuf\"!==subtype)throw new Error(\"Source的资源路径必须符合: amap://geobuf/<serviceId>\");return _this._formatRestUrl(\"/rest/lbs/geohub/geobuf\",[\"id=\"+id])})})},VisualStyleParser.prototype._parseFromLayerStyles=function(styles,layerType){var _this=this,parsedStyles=Object.keys(styles).reduce(function(prev,next){return prev[next]=\"label\"===next?_this._transformLabelStyle(styles[next]):_this._formatStyle(styles[next]),prev},{});return\"PulseLinkLayer\"===layerType&&parsedStyles.degreeOfCurve&&0<parsedStyles.degreeOfCurve&&(parsedStyles.height=function(index,item){var curve=parsedStyles.degreeOfCurve;return item.distance*curve}),[\"HeatMapLayer\",\"HexagonLayer\",\"GridLayer\"].includes(layerType)?this._formatAggregateStyle(parsedStyles,layerType):parsedStyles},VisualStyleParser.prototype._parseFromLayerInteraction=function(interaction){return interaction&&__assign(__assign({},interaction),{content:this._transformInteractionContent(interaction.content||\"\")})},VisualStyleParser.prototype._transformLabelStyle=function(label){function transform(item){return\"[object Object]\"===Object.prototype.toString.call(item)?Object.keys(item).reduce(function(prev,next){return prev[next]=transform(item[next]),prev},{}):Array.isArray(item)?item.map(transform):_this._formatStyle(item)}var _a,_this=this,outputLabel=transform(label);return null!==(_a=outputLabel.text)&&void 0!==_a&&_a.content&&(outputLabel.text.content=new Function(\"index\",\"feat\",\"\\nvar style = \"+tellString(this._formatStyle(label.text.content))+\";\\nif (typeof style === 'function') return style(index, feat);\\nvar props = feat.link ? feat.link.properties : feat.properties;\\nif (!props) return style;\\nreturn String(props[style]);\")),outputLabel},VisualStyleParser.prototype._transformInteractionContent=function(content){return content.match(/\\[{2}([^\\[]+?)\\]{2}/g)?new Function(\"feat\",\"\\nvar props = feat.link ? feat.link.properties : feat.properties;\\nif (!props) return \"+tellString(content)+\";\\nreturn \"+tellString(content)+\".replace(/\\\\[{2}([^\\\\[]+?)\\\\]{2}/g, (all, group) => {\\n    return props[group]; // 即使为空，也展示原值\\n})\\n        \"):content},VisualStyleParser.prototype._formatAggregateStyle=function(styles,aggregateMethod){var gradientObj_1,value=styles.value,aggregate=styles.aggregate,heightFactor=styles.heightFactor,heightFactor=void 0===heightFactor?1:heightFactor,gradient=styles.gradient;if(\"HeatMapLayer\"===aggregateMethod&&(value&&(styles.value=new Function(\"index\",\"feat\",\"\\nif (feat) {\\nvar props = feat.link ? feat.link.properties : feat.properties;\\nreturn props['\"+value+\"'];\\n}\")),Array.isArray(gradient)&&(gradientObj_1={},[.2,.3,,.5,.6,.7,.8,.9,1].forEach(function(n,i){n&&gradient[i]&&(gradientObj_1[n]=gradient[i])}),styles.gradient=gradientObj_1)),\"HexagonLayer\"===aggregateMethod||\"GridLayer\"===aggregateMethod){if(aggregate){aggregateMethod=aggregateMethods[aggregate];if(!aggregateMethod)throw new Error(\"暂不支持该聚合方法: \"+aggregate);styles.value=new Function(\"index\",\"feat\",\"\\nif (feat) {\\n  var method = \"+aggregateMethod.toString()+\";\\n  var propsArr = feat.coordinates.map(item => item.properties);\\n  return method(propsArr, '\"+value+\"');\\n}\")}Array.isArray(gradient)&&(styles.topColor=styles.sideTopColor=styles.sideBottomColor=new Function(\"index\",\"feat\",\"\\nvar gradient = \"+tellString(gradient)+\";\\nif (feat && gradient) {\\n  var r = (feat.value - feat.min) / (feat.max - feat.min);\\n  var index = Math.round(r * (gradient.length - 1));\\n  return gradient[index] || 'rgba(0,0,0,0)';\\n}\")),styles[\"3D\"]?styles.height=new Function(\"index\",\"feat\",\"\\nif (feat) {\\n  var heightFactor = \"+heightFactor+\" || 0;\\n  return feat.value * heightFactor;\\n}\"):styles.height=0}return styles},VisualStyleParser.prototype._formatStyle=function(itemStyle,formatter){var conditions=null===itemStyle||void 0===itemStyle?void 0:itemStyle.nodes,defaultValue=(formatter=void 0===formatter?noop:formatter)(null==(null===itemStyle||void 0===itemStyle?void 0:itemStyle.value)?itemStyle:itemStyle.value);if(null==conditions||!conditions.length)return defaultValue;for(var fun=[],_i=0,conditions_1=conditions;_i<conditions_1.length;_i++){var n=conditions_1[_i],style=formatter(n.style),value=n.value;try{value=JSON.parse(value)}catch(_){}switch(n.operation){case Operation.EQUAL:case Operation.NOT_EQUAL:case Operation.GREATER:case Operation.GREATER_EQUAL:case Operation.LESS:case Operation.LESS_EQUAL:fun.push(this._genCommonConditionCode(n,value,style,itemStyle.aggregate));break;case Operation.INCLUDE:fun.push(this._genIncludeConditionCode(n,value,style));break;case Operation.EXCLUDE:fun.push(this._genExcludeConditionCode(n,value,style))}}return new Function(\"index\",\"feat\",\"try {\"+fun.join(\";\")+\"} catch (_) {} return \"+tellString(defaultValue)+\";\")},VisualStyleParser.prototype._genCommonConditionCode=function(n,compareValue,retValue,aggregate){if(aggregate){var aggregateMethod=aggregateMethods[aggregate];if(!aggregateMethod)throw new Error(\"暂不支持该聚合方法: \"+aggregate);return\"\\nvar method = \"+aggregateMethod.toString()+\";\\nif (feat) {\\n    var propsArr = feat.coordinates.map(item => item.properties);\\n    if (method(propsArr, '\"+n.key+\"') \"+n.operation+\" \"+tellString(compareValue)+\") return \"+tellString(retValue)+\";\\n}\\n            \"}return\"\\nif (feat) {\\n    var props = feat.link ? feat.link.properties : feat.properties;\\n    if (props['\"+n.key+\"'] \"+n.operation+\" \"+tellString(compareValue)+\" ||\\n      (typeof \"+tellString(compareValue)+\" == 'boolean' && props['\"+n.key+\"'] \"+n.operation+\" '\"+compareValue+\"')\\n    ) return \"+tellString(retValue)+\";\\n}\"},VisualStyleParser.prototype._genIncludeConditionCode=function(n,compareValue,retValue){return\"\\nif (feat) {\\n    var props = feat.link ? feat.link.properties : feat.properties;\\n    if (String(props['\"+n.key+\"']).includes(\"+tellString(compareValue)+\")) return \"+tellString(retValue)+\";\\n}\"},VisualStyleParser.prototype._genExcludeConditionCode=function(n,compareValue,retValue){return\"\\nif (feat) {\\n    var props = feat.link ? feat.link.properties : feat.properties;\\n    if (!String(props['\"+n.key+\"']).includes(\"+tellString(compareValue)+\")) return \"+tellString(retValue)+\";\\n}\"},VisualStyleParser.prototype._formatAMapUrl=function(url,replacer){var matches=null==url?void 0:url.match(/amap:\\/\\/(.+?)\\/(.+?)$/);return!matches||matches.length<3?url:replacer(matches[1],matches[2])},VisualStyleParser.prototype._formatRestUrl=function(path,params){var server=AMap.getConfig(),gaodeserver=server.gaodeserver,jscode=server.jscode,appname=server.appname,domain=server.domain,key=AMap.getConfig(),server=key.server,key=key.key;return appname.includes(\"studio.amap.test\")?(server=\"http://11.159.67.111\",key=\"78743c07e0d6aabdbd46234023a86e39\"):\"pre-lbs-jsapi-service.amap.com\"===domain&&(server=\"https://restapi-pre-test.amap.com\"),params.push(\"key=\"+key,\"s=rsv3\"),jscode&&params.push(\"jscode=\"+jscode),\"\"+(gaodeserver||server)+path+\"?\"+params.join(\"&\")},VisualStyleParser.prototype._getRemoteStyle=function(url){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.onload=function(){if(200<=xhr.status&&xhr.status<=299){var data=xhr.response.data;if(!data||!data.content)throw new Error(\"Empty Vidual Style\");resolve(JSON.parse(data.content))}else reject(xhr.response)},xhr.onerror=reject,xhr.open(\"GET\",url,!0),xhr.responseType=\"json\",xhr.send()})},VisualStyleParser}();AMap.VisualStyleParser=VisualStyleParser,exports.VisualStyleParser=VisualStyleParser}();\n");
_jsload_('AMap.Walking.js',"!function(AMap){\"use strict\";function _typeof(obj){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&\"function\"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError(\"Cannot call a class as a function\")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,\"value\"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if(\"function\"!=typeof superClass&&null!==superClass)throw new TypeError(\"Super expression must either be null or a function\");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _possibleConstructorReturn(self,call){return!call||\"object\"!=typeof call&&\"function\"!=typeof call?function(self){if(void 0===self)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return self}(self):call}var GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL),this.city=city||\"\",this.CLASS_NAME=\"AMap.GetLL\"}return _createClass(GetLL,[{key:\"getCity\",value:function(cbk){var url=AMap.getConfig().protocol+\"://webapi.amap.com/maps/ipCity\";AMap.WebService.get(url,{},function(status,data){cbk(\"complete\"===status?data:{})})}},{key:\"get\",value:function(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:\"all\"}),result=[];!function getOne(){if(keywordsList.length){var keyAndcity=keywordsList.shift(),keyword=keyAndcity.keyword,city=keyAndcity.city||defaultCity;city=city||\"\",psearch.setCity(city),psearch.search(keyword,function(status,data){\"error\"===status?cbk(\"error\",data):\"complete\"===status?data.poiList&&data.poiList.pois.length?(result.push(data.poiList.pois[0]),keywordsList.length?getOne():cbk(\"complete\",result)):cbk(city?\"no_poi\":\"no_city\",keyAndcity):\"no_data\"===status&&cbk(city?\"no_poi\":\"no_city\",keyAndcity)})}}()}}]),GetLL}(),PlaceSearch=function(){function PlaceSearch(opt){var _this;return _classCallCheck(this,PlaceSearch),(_this=_possibleConstructorReturn(this,_getPrototypeOf(PlaceSearch).call(this))).closed=!1,_this.opt=AMap.extend({showCover:!0,autoFitView:!0},opt||{}),_this.opt.pageIndex=_this.opt.pageIndex||1,_this.opt.pageSize=\"number\"!=typeof _this.opt.pageSize||_this.opt.pageSize<0?10:50<_this.opt.pageSize?50:_this.opt.pageSize,_this.url=AMap.getConfig().server+\"/v3/place\",_this}return _inherits(PlaceSearch,AMap.Event),_createClass(PlaceSearch,[{key:\"search\",value:function(keyword,cbk){var params={s:\"rsv3\",children:+(this.opt.children?\"1\":\"\")};this._mergeParams(this.opt,{city:\"city\",rankBy:\"sortrule\",type:\"types\",pageIndex:\"page\",pageSize:\"offset\",extensions:\"extensions\",citylimit:\"citylimit\"},params),this._query(this.url+\"/text\",params,cbk,{keywords:keyword||\"\"},\"KEYWORD\",arguments)}},{key:\"setCity\",value:function(city){AMap.BuryPoint.add(this,\"setCity\"),this.opt.city=city}},{key:\"_mergeParams\",value:function(data,map,params){for(var i in data)void 0!==data[i]&&void 0!==map[i]&&(params[map[i]]=data[i]);return params}},{key:\"_query\",value:function(url,params,cbk,encodeURICom,type,args){var _this2=this;url+=0<params.length?\"?\"+params.join(\"&\"):\"\",AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:!0},params,encodeURICom),function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,type,args):_this2._onError(data,cbk)})}},{key:\"_onComplete\",value:function(data,cbk){var result;if(!this.closed)if(parseInt(data.status,10)){if((result={info:data.info,poiList:{}}).poiList={pois:[],count:parseInt(data.count,10),pageIndex:this.opt.pageIndex,pageSize:this.opt.pageSize},data.pois)for(var i=0;i<data.pois.length;i+=1){var tmp=data.pois[i];result.poiList.pois[i]=this._parsePOI(tmp)}if(data.suggestion&&data.suggestion.keywords.length&&(result.keywordList=data.suggestion.keywords,result.info=\"TIP_KEYWORDS\"),data.suggestion&&data.suggestion.cities.length){for(var cities=data.suggestion.cities,citiesnew=[],j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city)city.hasOwnProperty(pro)&&\"num\"===pro&&(city.count=city[pro],delete city[pro]);city.count=parseInt(city.count),citiesnew.push(city)}result.info=\"TIP_CITIES\",result.cityList=citiesnew}data.count&&0!==parseInt(data.count,10)||result.cityList||result.keywordList?(AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result)):(result.info=\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info,AMap.Event.trigger(this,\"complete\",result),cbk&&\"function\"==typeof cbk&&(result.cityList||result.keywordList?cbk(\"complete\",result):cbk(\"no_data\",{})))}else result={info:data.info},AMap.Event.trigger(this,\"error\",result),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info)}},{key:\"_parsePOI\",value:function(poi){function getLngLat(location){if(location){var lngLat=location.split(\",\");return new AMap.LngLat(lngLat[0],lngLat[1])}return null}this._formatFields(poi);var poiBaseInfo={id:poi.id,name:poi.name,type:poi.type,location:getLngLat(poi.location),address:poi.address,tel:poi.tel,distance:parseFloat(poi.distance),shopinfo:poi.shopinfo};if(poi.shopinfo&&poi.shopinfo.length?poiBaseInfo.shopinfo=poi.shopinfo:poiBaseInfo.shopinfo=\"\",poi.children){for(var children=poi.children,i=0,len=children.length;i<len;i++)children[i].location=getLngLat(children[i].location);poiBaseInfo.children=children}var poiDetailInfo={website:poi.website,pcode:poi.pcode,citycode:poi.citycode,adcode:poi.adcode,postcode:poi.postcode,pname:poi.pname,cityname:poi.cityname,adname:poi.adname,email:poi.email,photos:poi.photos,entr_location:getLngLat(poi.entr_location),exit_location:getLngLat(poi.exit_location),groupbuy:\"0\"!==poi.groupbuy_num,discount:\"0\"!==poi.discount_num};\"1\"===poi.indoor_map?(poiDetailInfo.indoor_map=!0,poiDetailInfo.indoor_data={cpid:this._parseString(poi.indoor_data.cpid),floor:this._parseString(poi.indoor_data.floor),truefloor:this._parseString(poi.indoor_data.truefloor)}):poiDetailInfo.indoor_map=!1;var poiDeepInfo={groupbuys:\"\",discounts:\"\",deep_type:\"\",dining:\"\",hotel:\"\",cinema:\"\",scenic:\"\"};if(poi.rich_content){if(poiDetailInfo.groupbuy){var groupBuyTemp=poi.rich_content.groupbuys,groupBuyNum=groupBuyTemp.length;0<groupBuyNum&&(poiDeepInfo.groupbuys=[]);for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n].title,type_code:groupBuyTemp[n].typecode,type:groupBuyTemp[n].type,detail:groupBuyTemp[n].detail,stime:groupBuyTemp[n].start_time,etime:groupBuyTemp[n].end_time,count:groupBuyTemp[n].num,sold_num:parseInt(groupBuyTemp[n].sold_num),original_price:parseFloat(groupBuyTemp[n].original_price),groupbuy_price:parseFloat(groupBuyTemp[n].groupbuy_price),discount:parseFloat(groupBuyTemp[n].discount),ticket_address:groupBuyTemp[n].ticket_address,ticket_tel:groupBuyTemp[n].ticket_tel,photos:groupBuyTemp[n].photos,url:groupBuyTemp[n].url,provider:\"\"};poiDeepInfo.groupbuys.push(groupBuy)}}if(poiDetailInfo.discount){var discountTemp=poi.rich_content.discounts,disNum=discountTemp.length;0<disNum&&(poiDeepInfo.discounts=[]);for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis].title,detail:discountTemp[dis].detail,start_time:discountTemp[dis].start_time,end_time:discountTemp[dis].end_time,sold_num:parseInt(discountTemp[dis].sold_num),photos:discountTemp[dis].photos,url:discountTemp[dis].url,provider:\"\"};poiDeepInfo.discounts.push(discount)}}}if(poi.deep_info){poiDeepInfo.deep_type=poi.deep_info.type;var poiDeep=poi.deep_info;switch(poiDeepInfo.deep_type){case\"cinema\":var cinema={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",parking:poiDeep.parking,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.cinema=cinema,poiDeepInfo.deep_type=\"CINEMA\";break;case\"dining\":var dining={cuisines:poiDeep.cuisines,tag:poiDeep.tag,intro:poiDeep.intro,rating:poiDeep.rating,cp_rating:poiDeep.cp_rating,deep_src:\"\",taste_rating:poiDeep.taste_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,cost:poiDeep.cost,recommend:poiDeep.recommend,atmosphere:poiDeep.atmosphere,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,ordering_app_url:poiDeep.ordering_app_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,addition:poiDeep.addition,photos:poiDeep.photos};poiDeepInfo.dining=dining,poiDeepInfo.deep_type=\"DINING\";break;case\"scenic\":var scenic={intro:poiDeep.intro,rating:poiDeep.rating,deep_src:\"\",level:poiDeep.level,price:poiDeep.price,season:poiDeep.season,recommend:poiDeep.recommend,theme:poiDeep.theme,ordering_wap_url:poiDeep.ordering_wap_url,ordering_web_url:poiDeep.ordering_web_url,opentime_GDF:poiDeep.opentime_GDF,opentime:poiDeep.opentime,photos:poiDeep.photos};poiDeepInfo.scenic=scenic,poiDeepInfo.deep_type=\"SCENIC\";break;case\"hotel\":var hotel={rating:poiDeep.rating,star:poiDeep.star,intro:poiDeep.intro,lowest_price:poiDeep.lowest_price,faci_rating:poiDeep.faci_rating,health_rating:poiDeep.health_rating,environment_rating:poiDeep.environment_rating,service_rating:poiDeep.service_rating,traffic:poiDeep.traffic,addition:poiDeep.addition,deep_src:\"\",photos:poiDeep.photos};poiDeepInfo.hotel=hotel,poiDeepInfo.deep_type=\"HOTEL\"}}var rePoi={};for(var baseK in poiBaseInfo)poiBaseInfo.hasOwnProperty(baseK)&&(rePoi[baseK]=poiBaseInfo[baseK]);if(this.opt.extensions&&\"base\"!==this.opt.extensions){for(var deepK in poiDeepInfo)poiDeepInfo.hasOwnProperty(deepK)&&poiDeepInfo[deepK]&&(rePoi[deepK]=poiDeepInfo[deepK]);for(var detailK in poiDetailInfo)poiDetailInfo.hasOwnProperty(detailK)&&(rePoi[detailK]=poiDetailInfo[detailK]);if(poi.biz_ext)for(var key in poi.biz_ext)poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&void 0===rePoi[key]&&(rePoi[key]=poi.biz_ext[key])}return rePoi}},{key:\"_parseString\",value:function(v){return v instanceof Array&&0===v.length||void 0===v?\"\":v}},{key:\"_formatFields\",value:function(obj){for(var j in obj)obj.hasOwnProperty(j)&&(obj[j]=this._parseString(obj[j]),\"object\"===_typeof(obj[j])&&this._formatFields(obj[j]))}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}}]),PlaceSearch}(),markerOffset=[-12,-30],WalkingRender=function(opts){this.CLASS_NAME=\"AMap.WalkingRender\",AMap.BuryPoint.add(this.CLASS_NAME);var me=this;me._currentRouteTitle=null,me._currentRouteOptenitem=null,me.showDir=!(opts&&!opts.showDir),me.autoRender=function(options,walkingObject){if(me.clear(),options&&options.data&&(options.panel||options.map)&&(options.data.start=options.data.start||{location:options.data.origin,name:\"起点\"},options.data.end=options.data.end||{location:options.data.destination,name:\"终点\"},options.data.start.type=\"start\",options.data.end.type=\"end\",this.options=options,this.hideMarkers=options.hideMarkers||!1,options.map&&(this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:!0,offset:new AMap.Pixel(0,-30)}),this._overlays=[],this._route=[],this._highlightOverlay=null,options.panel||this.drawRouteOverlays(0)),options.panel)){if(\"[object String]\"===Object.prototype.toString.call(options.panel)&&(options.panel=document.getElementById(options.panel)),walkingObject){me.listener.gotoAMap=function(){walkingObject.searchOnAMAP(options.data)};var a=document.createElement(\"div\");a.className=\"amap-call\",a.innerHTML=\"前往高德地图查看\",AMap.Event.addDomListener(a,\"click\",me.listener.gotoAMap),options.panel.appendChild(a)}options.panel.appendChild(this.view.createPanel(options.data)),this.enableListeners()}},me.clear=function(){this.clearPanel(),this.clearOverlays()},me.drawRoute=function(index){var data=this.options.data,route=data.routes[index],steps=(route.distance,route.steps),walkPaths=[],walkingPath=[];walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<steps.length;i++)step=steps[i],walkingPath=walkingPath.concat(step.path);0<walkingPath.length&&(walkingPath=[walkingPath]),this.clearRoute(),this._route=this.addOverlays([],walkPaths,walkingPath,{strokeOpacity:1})},me.clearRoute=function(){if(this._route){for(var i=0;i<this._route.length;i++)this._route[i].setMap(null);this._route=[]}},me.drawRouteOverlays=function(index){var data=this.options.data,route=data.routes[index],steps=(route.distance,route.steps),walkPaths=[],walkingPath=[],points=[];points.push(data.start),points.push(data.end),walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var step,i=0;i<steps.length;i++)step=steps[i],walkingPath=walkingPath.concat(step.path);0<walkingPath.length&&(walkingPath=[walkingPath]),this.clearOverlays(),this._overlays=this.addOverlays(points,walkPaths,walkingPath,[]),me.options.autoFitView&&me.options.map.setFitView(this._overlays)},me.addOverlays=function(points,walkPaths,walkingPaths,styleOptions){var map=this.options.map;styleOptions=styleOptions||{strokeOpacity:1};var _overlays=[];if(!this.hideMarkers){if(points[0]){var start=new AMap.Marker({map:map,offset:markerOffset,position:points[0].location,content:'<div class=\"amap-lib-marker-from\"></div>',innerOverlay:!0});start.isOfficial=!0,start._data=points[0],AMap.Event.addListener(start,\"click\",this.listener.markerClick),_overlays.push(start)}if(1<points.length){var end=new AMap.Marker({map:map,offset:markerOffset,position:points[points.length-1].location,content:'<div class=\"amap-lib-marker-to\"></div>',innerOverlay:!0});end.isOfficial=!0,end._data=points[points.length-1],AMap.Event.addListener(end,\"click\",this.listener.markerClick),_overlays.push(end)}}for(var walkingPath,i=0;i<walkingPaths.length;i++)(walkingPath=new AMap.Polyline({map:map,path:walkingPaths[i],isOutline:this.options.isOutline,outlineColor:this.options.outlineColor,borderWeight:2,lineJoin:\"round\",showDir:me.showDir,strokeColor:\"#0091ff\",strokeOpacity:styleOptions.strokeOpacity||1,strokeWeight:6,innerOverlay:!0})).isOfficial=!0,_overlays.push(walkingPath);var walkPath;for(i=0;i<walkPaths.length;i++)(walkPath=new AMap.Polyline({map:map,path:walkPaths[i],strokeColor:\"grey\",strokeStyle:\"dashed\",strokeOpacity:styleOptions.strokeOpacity||1,strokeWeight:6,innerOverlay:!0})).isOfficial=!0,_overlays.push(walkPath);return _overlays},me.clearPanel=function(){if(this.options&&this.options.panel){var a=me.util.getElementsByClassName(\"amap-call\",\"div\",this.options.panel)[0];a&&a.removeEventListener(\"click\",me.listener.gotoAMap),this.options.panel.innerHTML=\"\"}},me.clearOverlays=function(){if(this._overlays){for(var i=0;i<this._overlays.length;i++)this._overlays[i].setMap(null);this._overlays=[]}this._infoWindow&&this._infoWindow.close(),this._highlightOverlay&&(this._highlightOverlay.setMap(null),this._highlightOverlay=null),this.clearRoute()},me.getTitle=function(route){var policy=route.policy?\" | <span class='blue'>\"+route.policy+\"</span>\":\"\";return me.util.getTime(route.time)+\"(\"+me.util.getDistance(route.distance)+\")\"+policy},me.util={},me.util.getDistance=function(len){return len<=1e3?len+\"米\":Math.round(len/10)/100+\"公里\"},me.util.getTime=function(second){var minute=parseInt((second/60).toFixed(0));return minute<60?minute+\"分钟\":Math.floor(minute/60)+\"小时\"+minute%60+\"分钟\"},me.util.domstr2dom=function(arg){var objE=document.createElement(\"div\");return objE.innerHTML=arg,objE},me.util.getElementsByClassName=function(className,tag,parent){for(var current,testClass=new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\"),elements=(tag=tag||\"*\",(parent=parent||document).getElementsByTagName(tag)),returnElements=[],i=0;i<elements.length;i++)current=elements[i],testClass.test(current.className)&&returnElements.push(current);return returnElements},me.enableListeners=function(){for(var unfocusTitle,unfocusTitles=me.util.getElementsByClassName(\"planTitle\",\"div\",me.options.panel),i=0;i<unfocusTitles.length;i++)unfocusTitle=unfocusTitles[i],AMap.Event.addDomListener(unfocusTitle,\"click\",this.listener.unfocusTitleClick),AMap.Event.addDomListener(unfocusTitle,\"mouseenter\",this.listener.unfocusTitleMouseenter),AMap.Event.addDomListener(unfocusTitle,\"mouseleave\",this.listener.unfocusTitleMouseleave);var c_div,c_divs=this.util.getElementsByClassName(\"*\",\"dt\",me.options.panel);for(i=0;i<c_divs.length;i++)c_div=c_divs[i],AMap.Event.addDomListener(c_div,\"click\",this.listener.routeStepItem);0<unfocusTitles.length&&me.listener.unfocusTitleClick.call(unfocusTitles[0])},me.listener={},me.listener.markerClick=function(){var data=this._data;\"start\"===data.type||\"end\"===data.type?me._infoWindow.setOffset(new AMap.Pixel(0,-30)):me._infoWindow.setOffset(new AMap.Pixel(0,0)),\"起点\"===data.name||\"终点\"===data.name||(me._infoWindow.setContent(me.view.createInfowindowContent(data)),me._infoWindow.open(me.options.map,this.getPosition())),me.options.map.setCenter(this.getPosition())},me.listener.routeStepItem=function(){me._highlightOverlay&&me._highlightOverlay.setMap(null),this.style.backgroundColor=\"rgb(240, 240, 240)\",me.listener.routeStepItem.last&&(me.listener.routeStepItem.last.style.backgroundColor=\"\");for(var stepIndex,children=(me.listener.routeStepItem.last=this).parentNode.children,i=0;i<children.length;i++)if(children[i]===this){stepIndex=i;break}if(0!==stepIndex)if(stepIndex!==children.length-1){me._infoWindow.close(),--stepIndex;var highlight,step=me.options.data.routes[me._currentRouteIndex].steps[stepIndex];(highlight=new AMap.Polyline({map:me.options.map,path:step.path,strokeColor:\"red\",strokeOpacity:.8,strokeWeight:8,innerOverlay:!0})).isOfficial=!0,me._highlightOverlay=highlight,me.options.map.setBounds(highlight.getBounds())}else me.listener.markerClick.call({_data:me.options.data.end,getPosition:function(){return me.options.data.end.location}});else me.listener.markerClick.call({_data:me.options.data.start,getPosition:function(){return me.options.data.start.location}})},me.listener.driveTitleClick=function(){me._currentRouteTitle.style.display=\"block\",me._currentRouteOptenitem.style.display=\"none\",me.clearOverlays()},me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);target&&\"A\"===target.tagName||(\"open\"===me._currentRouteTitleStatus&&me._currentRouteTitle===this?(me.view.closeCurrentPlanDiv(),me.clearOverlays()):(\"open\"===me._currentRouteTitleStatus&&me.view.closeCurrentPlanDiv(),me.view.openPlanDiv(this)))},me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute(\"index\");me.drawRoute(index),me.listener.unfocusTitleMouseenter.last=this},me.listener.unfocusTitleMouseleave=function(e){me.clearRoute()},me.view={},me.view.openPlanDiv=function(planDiv){me._currentRouteTitle=planDiv,me._currentRouteOptenitem=planDiv.nextSibling,me.util.getElementsByClassName(\"icon-arrow-up\",\"div\",me._currentRouteTitle)[0].className=\"icon-arrow-up expand\",me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0]&&(me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0].style.display=\"inline-block\"),me._currentRouteOptenitem.style.display=\"block\",me._currentRouteTitleStatus=\"open\";var index=me._currentRouteTitle.getAttribute(\"index\");me._currentRouteIndex=index,me.options.map&&me.drawRouteOverlays(me._currentRouteIndex)},me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName(\"icon-arrow-up expand\",\"div\",me._currentRouteTitle)[0],fix=me.util.getElementsByClassName(\"clearfix\",\"ul\",me._currentRouteTitle)[0];title&&(title.className=\"icon-arrow-up\"),fix&&(fix.style.display=\"none\"),me._currentRouteOptenitem.style.display=\"none\",me._currentRouteTitleStatus=\"close\"},me.view.createInfowindowContent=function(data){var content=document.createElement(\"div\"),div=document.createElement(\"div\");div.className=\"amap-content-body\";var c=[];c.push('<div class=\"amap-lib-infowindow\">'),c.push('    <div class=\"amap-lib-infowindow-title\">'+data.name+'&nbsp;<a href=\"http://detail.amap.com/detail/'+data.id+\"?spm=0.0.0.0.sWhSmy&citycode=\"+data.citycode+'\" target=\"_blank\">详情»</a></div>'),c.push('    <div class=\"amap-lib-infowindow-content\">'),c.push('        <div class=\"amap-lib-infowindow-content-wrap\">'),c.push(\"             <div>地址：\"+data.address+\"</div>\"),data.tel&&c.push(\"             <div>电话：\"+data.tel+\"</div>\"),c.push(\"        </div>\"),c.push(\"    </div>\"),c.push(\"</div>\"),div.innerHTML=c.join(\"\");var sharp=document.createElement(\"div\");sharp.className=\"amap-combo-sharp\",div.appendChild(sharp);var close=document.createElement(\"div\");return close.className=\"amap-combo-close\",div.appendChild(close),close.href=\"javascript: void(0)\",AMap.Event.addDomListener(close,\"touchend\",function(e){me._infoWindow.close()}),AMap.Event.addDomListener(close,\"click\",function(e){me._infoWindow.close()}),content.appendChild(div),content.appendChild(close),content.appendChild(sharp),content},me.view.createPanel=function(data){var div=document.createElement(\"div\");if(div.className=\"amap-lib-walking\",!data.routes)return div.innerHTML=\"抱歉，没有合适的路线。\",div;for(var route,result=[],i=0;i<data.routes.length;i++){route=data.routes[i];var title=me.getTitle(route);result=(result=result.concat(me.view.createTitleDiv(i,title,route,!0))).concat(me.view.createOpenitemDiv(i,title,data,!1))}return div.innerHTML=result.join(\"\"),div},me.view.createTitleDiv=function(index,title,route,isDisplay){for(var roadNames,road,steps=route.steps,roadNameArray=[],roadNames2=\"\",temp=\"\",i=0;i<steps.length;i++)(road=steps[i].road)&&road!==temp&&(roadNameArray.push(road),temp=road);roadNames=roadNameArray.join(\">\"),roadNames2=4<roadNameArray.length?(roadNameArray.splice(2,roadNameArray.length-4,\"......\"),roadNameArray.join(\">\")):roadNames;var r=[];r.push('<div class=\"planTitle\" index=\"'+index+'\">'),r.push(\"    <h3 class='planTitle_route' title=\\\"\"+roadNames+'\">'),r.push(\"         <b>\"+roadNames2+\"</b>\"),r.push(\"    </h3>\"),r.push(\"    <p>\"+title+\"</p>\");me.options.data;return r.push('    <div class=\"sidebar\">'),r.push('        <div class=\"icon-arrow-up\" href=\"javascript:void(0)\"></div>'),r.push(\"    </div>                \"),r.push(\"</div>\"),r},me.view.createOpenitemDiv=function(index,title,data,isDisplay){var steps=data.routes[index].steps,r=[];r.push('<dl class=\"plan plan-nobus\">'),r.push(\"    <dt class=\\\"start\\\"><div class='beforedt'></div><div class='afterdt'></div><b>\"+data.start.name+\"</b></dt>\");for(var step,i=0;i<steps.length;i++)step=steps[i],r.push(' <dt class=\"route turn-'+me.getSigns(step.action)+'\"  index=\"'+index+'\">                '),r.push(\"  <div class='beforedt'></div><div class='afterdt'></div>       \"+step.instruction),r.push(\" </dt>\");return r.push(\"    <dt class=\\\"end\\\"><div class='beforedt'></div><b>\"+data.end.name+\"</b></dt>\"),r.push(\"</dl>\"),r},me.getSigns=function(action){return{\"左转\":\"left\",\"右转\":\"right\",\"靠左\":\"keepleft\",\"靠右\":\"keepright\",\"向左前方行驶\":\"leftup\",\"向左后方行驶\":\"leftdown\",\"向右前方行驶\":\"rightup\",\"向右后方行驶\":\"rightdown\",\"左转调头\":\"leftback\",\"右转调头\":\"rightback\",\"进入环岛\":\"enterRing\",\"离开环岛\":\"leaveRing\",\"减速行驶\":\"slow\",\"向左前方行走\":\"leftup\",\"向左后方行走\":\"leftdown\",\"向右前方行走\":\"rightup\",\"向右后方行走\":\"rightdown\",\"通过人行横道\":\"crosswalk\",\"通过过街天桥\":\"overpass\",\"通过地下通道\":\"underpass\",\"通过广场\":\"squarepass\"}[action]||\"advance\"}},Walking=function(){function Walking(opt){var _this;return _classCallCheck(this,Walking),(_this=_possibleConstructorReturn(this,_getPrototypeOf(Walking).call(this))).closed=!1,_this.CLASS_NAME=\"AMap.Walking\",_this.opt=AMap.extend({outlineColor:\"white\",showDir:!0,isOutline:!0,autoFitView:!0},opt),_this.url=AMap.getConfig().server+\"/v3/direction/walking\",_this}return _inherits(Walking,AMap.Event),_createClass(Walking,[{key:\"clear\",value:function(){AMap.BuryPoint.add(this,\"clear\"),this.render&&this.render.clear()}},{key:\"searchOnAMAP\",value:function(p){AMap.BuryPoint.add(this,\"searchOnAMAP\");var pp={t:2,m:0},o=AMap.Util.parseLngLatData(p.origin),d=AMap.Util.parseLngLatData(p.destination);pp.sy=o.lat,pp.sx=o.lng,pp.sname=p.originName||\"\",pp.dy=d.lat,pp.dx=d.lng,pp.dname=p.destinationName||\"\"}},{key:\"search\",value:function(){AMap.BuryPoint.add(this,\"search\");var args=arguments;if(0<args.length)if(args[0]=AMap.Util.parseLngLatData(args[0]),args[1]=AMap.Util.parseLngLatData(args[1]),args[0].lng&&args[0].lat)this.search_.apply(this,args);else if(args[0]instanceof Array){var this_=this,cbk=args[1];this_.getLL||(this_.getLL=new GetLL),this_.getLL.getCity(function(data){var city=data.citycode||\"\";this_.getLL.get(args[0],city,function(status,result){\"error\"===status?cbk&&\"function\"==typeof cbk&&cbk(\"error\",result):\"complete\"===status?this_.search_(result[0].exit_location||result[0].location,result[1].entr_location||result[1].location,args[1]||void 0,result):\"no_poi\"===status?args[1]&&args[1](\"error\",{info:\"在城市\"+result.city+\"无法找到\"+result.keyword}):\"no_city\"===status&&args[1]&&args[1](\"error\",{info:\"请设置\"+result.keyword+\"的城市信息\"})})})}}},{key:\"search_\",value:function(origin,destination,cbk,result){var _this2=this;if(origin instanceof AMap.LngLat&&destination instanceof AMap.LngLat){var params={origin:origin.toString(),destination:destination.toString(),multipath:this._parseInt(this.opt.multipath),s:\"rsv3\"},url=this.url;AMap.WebService.get(url,params,function(status,data){\"complete\"===status?_this2._onComplete(data,cbk,result):_this2._onError(data,cbk)})}else cbk&&\"function\"==typeof cbk&&cbk(\"error\",\"NO_PARAMS\")}},{key:\"_parseInt\",value:function(v){var n=parseInt(v,10);return isNaN(n)?0:n}},{key:\"_onError\",value:function(e,cbk){AMap.Event.trigger(this,\"error\",e),cbk&&\"function\"==typeof cbk&&cbk(\"error\",e.info)}},{key:\"_parseRoute\",value:function(data){var r=[];if(data.length)for(var i=0;i<data.length;i+=1){for(var route=data[i],t={distance:parseInt(route.distance,10),time:parseInt(route.duration,10),steps:[]},j=0;j<route.steps.length;j+=1){var step=route.steps[j];t.steps[j]=this._parseStep(step)}r[i]=t}return r}},{key:\"_parseStep\",value:function(data){var path=this._parsePath(data.polyline);return{start_location:path[0],end_location:path[path.length-1],instruction:data.instruction,road:this._parseString(data.road),orientation:this._parseString(data.orientation),distance:this._parseInt(data.distance),time:this._parseInt(data.duration),path:path,action:this._parseString(data.action),assistant_action:this._parseString(data.assistant_action)}}},{key:\"_parsePath\",value:function(path){for(var f=[],arr=path.split(\";\"),i=0;i<arr.length;i+=1){var loc=arr[i].split(\",\");f[i]=new AMap.LngLat(loc[0],loc[1])}return f}},{key:\"_parseString\",value:function(v){return\"object\"===_typeof(v)||void 0===v?\"\":v}},{key:\"_str2LngLat\",value:function(str){var arr=str.split(\",\");return new AMap.LngLat(arr[0],arr[1])}},{key:\"close\",value:function(){AMap.BuryPoint.add(this,\"close\"),this.closed=!0}},{key:\"open\",value:function(){AMap.BuryPoint.add(this,\"open\"),this.closed=!1}},{key:\"_onComplete\",value:function(data,cbk,poiresult){if(!this.closed){var result;parseInt(data.status,10)?(data.route?(result={info:data.info,origin:this._str2LngLat(data.route.origin),destination:this._str2LngLat(data.route.destination),count:parseInt(data.count,10),routes:this._parseRoute(data.route.paths)},poiresult&&(result.start=poiresult[0],result.end=poiresult[1],result.originName=result.start.name,result.destinationName=result.end.name)):result={info:\"ok\"===data.info.toLowerCase()?\"NO_DATA\":data.info},cbk&&\"function\"==typeof cbk&&cbk(\"complete\",result),(this.opt.map||this.opt.panel)&&(this.render||(this.render=new WalkingRender({showDir:this.opt.showDir})),this.render.autoRender({data:result,panel:this.opt.panel,map:this.opt.map,hideMarkers:this.opt.hideMarkers||!1,isOutline:this.opt.isOutline,outlineColor:this.opt.outlineColor,autoFitView:this.opt.autoFitView},this)),AMap.Event.trigger(this,\"complete\",result)):(AMap.Event.trigger(this,\"error\",data),cbk&&\"function\"==typeof cbk&&cbk(\"error\",data.info))}}}]),Walking}();AMap.Walking=Walking}(window.AMap);\n");
_jsload_('AMap.Weather.js',"!function(s){\"use strict\";function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,r){return(a=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function u(e,r){return!r||\"object\"!=typeof r&&\"function\"!=typeof r?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):r}var e=function(){function r(){var e;return function(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}(this,r),(e=u(this,o(r).call(this))).CLASS_NAME=\"AMap.Weather\",e.config=s.getConfig(),e.url=e.config.server+\"/v3/weather/weatherInfo\",e}var e,t,n;return function(e,r){if(\"function\"!=typeof r&&null!==r)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&a(e,r)}(r,s.Event),e=r,(t=[{key:\"getLive\",value:function(e,r){var t={city:e};this.__query(t,this.__getLiveHandler(r))}},{key:\"getForecast\",value:function(e,r){var t={city:e,extensions:\"all\"};this.__query(t,this.__getForecastHandler(r))}},{key:\"__query\",value:function(e,i){e.output=\"json\",e.s=\"rsv3\";var o=this,r=this.url;s.WebService.get(r,e,function(e,r){var t,n;\"complete\"===e&&(t=r,i.apply(o,o.__filterQueryErrorResult(null,t))),\"error\"===e&&(n=r,i.apply(o,o.__filterQueryErrorResult({info:n.info},null)))})}},{key:\"__buildParamsStr\",value:function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(t+\"=\"+e[t]);return r.join(\"&\")}},{key:\"__filterQueryErrorResult\",value:function(e,r){return r&&\"1\"!==r.status&&(e={info:r.info},r=null),[e,r]}},{key:\"__filterLiveErrorResult\",value:function(e,r){if(e||r&&r.lives&&s.Util.isArray(r.lives)||(e={info:\"INVALID_RESULTS\"},r=null),!e&&r){var t=r.lives[0],n=r.info;(r=this.__copyProps(t,[\"province\",\"city\",\"adcode\",\"weather\",\"temperature\",\"windDirection\",\"windPower\",\"humidity\",\"reportTime\"])).info=n,this.__intvalProps(r,[\"temperature\",\"windPower\"])}return this.__filterFinalErrorResult(e,r)}},{key:\"__filterForecastErrorResult\",value:function(e,r){if(e||r&&r.forecasts&&s.Util.isArray(r.forecasts)||(e={info:\"INVALID_RESULTS\"},r=null),!e&&r){var t=r.forecasts[0],n=r.info;(r=this.__copyProps(t,[\"province\",\"city\",\"adcode\",\"reportTime\"])).info=n;for(var i=[],o=t.casts,a=0,u=o.length;a<u;a+=1){var l=this.__copyProps(o[a],[\"date\",\"week\",\"dayWeather\",\"nightWeather\",\"dayTemp\",\"nightTemp\",[\"dayWindDir\",\"daywind\"],[\"nightWindDir\",\"nightwind\"],[\"dayWindPower\",\"daypower\"],[\"nightWindPower\",\"nightpower\"]]);this.__intvalProps(l,[\"dayTemp\",\"nightTemp\"]),i.push(l)}r.forecasts=i}return this.__filterFinalErrorResult(e,r)}},{key:\"__filterFinalErrorResult\",value:function(e,r){return e&&(e.type||(e.type=\"error\")),[e,r]}},{key:\"__deferHandler\",value:function(e,r){r&&this.emit(\"complete\",{result:r}),e&&this.emit(\"error\",{result:r})}},{key:\"__getLiveHandler\",value:function(n){return function(e,r){var t=this.__filterLiveErrorResult(e,r);n&&n.apply(null,t),this.__deferHandler.apply(this,t)}}},{key:\"__getForecastHandler\",value:function(n){return function(e,r){var t=this.__filterForecastErrorResult(e,r);n&&n.apply(null,t),this.__deferHandler.apply(this,t)}}},{key:\"__copyProps\",value:function(e,r){for(var t={},n=0,i=r.length;n<i;n+=1){var o,a=r[n];s.Util.isArray(a)?(o=a[0],a=a[1]):o=a;var u=e[a];void 0===u&&(u=e[a.toLowerCase()]),void 0!==u?t[o]=u:\"undefined\"!=typeof console&&console.warn&&console.warn(\"Missing: \",a)}return t}},{key:\"__intvalProps\",value:function(e,r){for(var t=0,n=r.length;t<n;t+=1){var i=parseInt(e[r[t]],10);isNaN(i)||(e[r[t]]=i)}return e}}])&&i(e.prototype,t),n&&i(e,n),r}();s.Weather=e}(window.AMap);\n");
_jsload_('AMap.convertFrom.js',"!function(l){\"use strict\";l.convertFrom=function(o,t,s){var e=l.getConfig(),n=e.server+\"/v3/assistant/coordinate/convert\",r=l.Util.parseLngLatData(o),i=[];if(r instanceof Array){for(var a=0,c=r.length;a<c;a+=1)i.push(r[a]+\"\");i=i.join(\";\")}else i=r+\"\";var f={key:e.key,s:\"rsv3\",locations:i,coordsys:t||\"gps\"};l.WebService.get(n,f,function(o,t){if(\"complete\"===o&&t.status&&\"1\"===t.status){for(var e=t.locations.split(\";\"),n=0;n<e.length;n+=1){var r=e[n].split(\",\");e[n]=new l.LngLat(r[0],r[1])}s&&\"function\"==typeof s&&s(\"complete\",{info:\"ok\",locations:e})}else s&&\"function\"==typeof s&&s(\"error\",t.info);\"error\"===o&&s(\"error\",t.info)})}}(window.AMap);\n");
_jsload_('DomRender.js',"(function(){\"use strict\";var i=function(e,r){i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)if(r.hasOwnProperty(t))e[t]=r[t]};return i(e,r)};function f(e,r){i(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var s=function(){s=Object.assign||function e(r){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f))r[f]=t[f]}return r};return s.apply(this,arguments)};function u(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var i=Array(e),n=0,r=0;r<t;r++)for(var f=arguments[r],a=0,s=f.length;a<s;a++,n++)i[n]=f[a];return i}var e=typeof global==\"object\"&&global&&global.Object===Object&&global;var r=typeof self==\"object\"&&self&&self.Object===Object&&self;var t=e||r||Function(\"return this\")();var n=t.Symbol;var a=Object.prototype;var o=a.hasOwnProperty;var l=a.toString;var v=n?n.toStringTag:undefined;function c(e){var r=o.call(e,v),t=e[v];try{e[v]=undefined;var i=true}catch(e){}var n=l.call(e);if(i){if(r){e[v]=t}else{delete e[v]}}return n}var h=Object.prototype;var d=h.toString;function y(e){return d.call(e)}var m=\"[object Null]\",b=\"[object Undefined]\";var p=n?n.toStringTag:undefined;function x(e){if(e==null){return e===undefined?b:m}return p&&p in Object(e)?c(e):y(e)}function w(e){return e!=null&&typeof e==\"object\"}var k=Array.isArray;function g(e){var r=typeof e;return e!=null&&(r==\"object\"||r==\"function\")}function I(e){return e}var S=\"[object AsyncFunction]\",$=\"[object Function]\",A=\"[object GeneratorFunction]\",_=\"[object Proxy]\";function O(e){if(!g(e)){return false}var r=x(e);return r==$||r==A||r==S||r==_}var j=t[\"__core-js_shared__\"];var F=function(){var e=/[^.]+$/.exec(j&&j.keys&&j.keys.Xb||\"\");return e?\"Symbol(src)_1.\"+e:\"\"}();function C(e){return!!F&&F in e}var T=Function.prototype;var L=T.toString;function B(e){if(e!=null){try{return L.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}var R=/[\\\\^$.*+?()[\\]{}|]/g;var E=/^\\[object .+?Constructor\\]$/;var N=Function.prototype,P=Object.prototype;var z=N.toString;var D=P.hasOwnProperty;var U=RegExp(\"^\"+z.call(D).replace(R,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function W(e){if(!g(e)||C(e)){return false}var r=O(e)?U:E;return r.test(B(e))}function G(e,r){return e==null?undefined:e[r]}function H(e,r){var t=G(e,r);return W(t)?t:undefined}var q=H(t,\"WeakMap\");function V(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var X=800,J=16;var Y=Date.now;function Z(t){var i=0,n=0;return function(){var e=Y(),r=J-(e-n);n=e;if(r>0){if(++i>=X){return arguments[0]}}else{i=0}return t.apply(undefined,arguments)}}function K(e){return function(){return e}}var Q=function(){try{var e=H(Object,\"defineProperty\");e({},\"\",{});return e}catch(e){}}();var ee=!Q?I:function(e,r){return Q(e,\"toString\",{configurable:true,enumerable:false,value:K(r),writable:true})};var re=Z(ee);function te(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e}var ie=9007199254740991;var ne=/^(?:0|[1-9]\\d*)$/;function fe(e,r){var t=typeof e;r=r==null?ie:r;return!!r&&(t==\"number\"||t!=\"symbol\"&&ne.test(e))&&(e>-1&&e%1==0&&e<r)}function ae(e,r,t){if(r==\"__proto__\"&&Q){Q(e,r,{configurable:true,enumerable:true,value:t,writable:true})}else{e[r]=t}}function se(e,r){return e===r||e!==e&&r!==r}var ue=Object.prototype;var oe=ue.hasOwnProperty;function le(e,r,t){var i=e[r];if(!(oe.call(e,r)&&se(i,t))||t===undefined&&!(r in e)){ae(e,r,t)}}function ve(e,r,t,i){var n=!t;t||(t={});var f=-1,a=r.length;while(++f<a){var s=r[f];var u=i?i(t[s],e[s],s,t,e):undefined;if(u===undefined){u=e[s]}if(n){ae(t,s,u)}else{le(t,s,u)}}return t}var ce=Math.max;function he(f,a,s){a=ce(a===undefined?f.length-1:a,0);return function(){var e=arguments,r=-1,t=ce(e.length-a,0),i=Array(t);while(++r<t){i[r]=e[a+r]}r=-1;var n=Array(a+1);while(++r<a){n[r]=e[r]}n[a]=s(i);return V(f,this,n)}}function de(e,r){return re(he(e,r,I),e+\"\")}var ye=9007199254740991;function me(e){return typeof e==\"number\"&&e>-1&&e%1==0&&e<=ye}function be(e){return e!=null&&me(e.length)&&!O(e)}function pe(e,r,t){if(!g(t)){return false}var i=typeof r;if(i==\"number\"?be(t)&&fe(r,t.length):i==\"string\"&&r in t){return se(t[r],e)}return false}function xe(s){return de(function(e,r){var t=-1,i=r.length,n=i>1?r[i-1]:undefined,f=i>2?r[2]:undefined;n=s.length>3&&typeof n==\"function\"?(i--,n):undefined;if(f&&pe(r[0],r[1],f)){n=i<3?undefined:n;i=1}e=Object(e);while(++t<i){var a=r[t];if(a){s(e,a,t,n)}}return e})}var we=Object.prototype;function ke(e){var r=e&&e.constructor,t=typeof r==\"function\"&&r.prototype||we;return e===t}function ge(e,r){var t=-1,i=Array(e);while(++t<e){i[t]=r(t)}return i}var Me=\"[object Arguments]\";function Ie(e){return w(e)&&x(e)==Me}var Se=Object.prototype;var $e=Se.hasOwnProperty;var Ae=Se.propertyIsEnumerable;var _e=Ie(function(){return arguments}())?Ie:function(e){return w(e)&&$e.call(e,\"callee\")&&!Ae.call(e,\"callee\")};function Oe(){return false}var je=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var Fe=je&&typeof module==\"object\"&&module&&!module.nodeType&&module;var Ce=Fe&&Fe.exports===je;var Te=Ce?t.Zb:undefined;var Le=Te?Te.isBuffer:undefined;var Be=Le||Oe;var Re=\"[object Arguments]\",Ee=\"[object Array]\",Ne=\"[object Boolean]\",Pe=\"[object Date]\",ze=\"[object Error]\",De=\"[object Function]\",Ue=\"[object Map]\",We=\"[object Number]\",Ge=\"[object Object]\",He=\"[object RegExp]\",qe=\"[object Set]\",Ve=\"[object String]\",Xe=\"[object WeakMap]\";var Je=\"[object ArrayBuffer]\",Ye=\"[object DataView]\",Ze=\"[object Float32Array]\",Ke=\"[object Float64Array]\",Qe=\"[object Int8Array]\",er=\"[object Int16Array]\",rr=\"[object Int32Array]\",tr=\"[object Uint8Array]\",ir=\"[object Uint8ClampedArray]\",nr=\"[object Uint16Array]\",fr=\"[object Uint32Array]\";var ar={};ar[Ze]=ar[Ke]=ar[Qe]=ar[er]=ar[rr]=ar[tr]=ar[ir]=ar[nr]=ar[fr]=true;ar[Re]=ar[Ee]=ar[Je]=ar[Ne]=ar[Ye]=ar[Pe]=ar[ze]=ar[De]=ar[Ue]=ar[We]=ar[Ge]=ar[He]=ar[qe]=ar[Ve]=ar[Xe]=false;function sr(e){return w(e)&&me(e.length)&&!!ar[x(e)]}function ur(r){return function(e){return r(e)}}var or=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var lr=or&&typeof module==\"object\"&&module&&!module.nodeType&&module;var vr=lr&&lr.exports===or;var cr=vr&&e.process;var hr=function(){try{var e=lr&&lr.Qb&&lr.Qb(\"util\").types;if(e){return e}return cr&&cr.tg&&cr.tg(\"util\")}catch(e){}}();var dr=hr&&hr.rg;var yr=dr?ur(dr):sr;var mr=Object.prototype;var br=mr.hasOwnProperty;function pr(e,r){var t=k(e),i=!t&&_e(e),n=!t&&!i&&Be(e),f=!t&&!i&&!n&&yr(e),a=t||i||n||f,s=a?ge(e.length,String):[],u=s.length;for(var o in e){if((r||br.call(e,o))&&!(a&&(o==\"length\"||n&&(o==\"offset\"||o==\"parent\")||f&&(o==\"buffer\"||o==\"byteLength\"||o==\"byteOffset\")||fe(o,u)))){s.push(o)}}return s}function xr(r,t){return function(e){return r(t(e))}}var wr=xr(Object.keys,Object);var kr=Object.prototype;var gr=kr.hasOwnProperty;function Mr(e){if(!ke(e)){return wr(e)}var r=[];for(var t in Object(e)){if(gr.call(e,t)&&t!=\"constructor\"){r.push(t)}}return r}function Ir(e){return be(e)?pr(e):Mr(e)}var Sr=Object.prototype;var $r=Sr.hasOwnProperty;var Ar=xe(function(e,r){if(ke(r)||be(r)){ve(r,Ir(r),e);return}for(var t in r){if($r.call(r,t)){le(e,t,r[t])}}});var _r=H(Object,\"create\");function Or(){this.ng=_r?_r(null):{};this.size=0}function jr(e){var r=this.has(e)&&delete this.ng[e];this.size-=r?1:0;return r}var Fr=\"__lodash_hash_undefined__\";var Cr=Object.prototype;var Tr=Cr.hasOwnProperty;function Lr(e){var r=this.ng;if(_r){var t=r[e];return t===Fr?undefined:t}return Tr.call(r,e)?r[e]:undefined}var Br=Object.prototype;var Rr=Br.hasOwnProperty;function Er(e){var r=this.ng;return _r?r[e]!==undefined:Rr.call(r,e)}var Nr=\"__lodash_hash_undefined__\";function Pr(e,r){var t=this.ng;this.size+=this.has(e)?0:1;t[e]=_r&&r===undefined?Nr:r;return this}function zr(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}zr.prototype.clear=Or;zr.prototype[\"delete\"]=jr;zr.prototype.get=Lr;zr.prototype.has=Er;zr.prototype.set=Pr;function Dr(){this.ng=[];this.size=0}function Ur(e,r){var t=e.length;while(t--){if(se(e[t][0],r)){return t}}return-1}var Wr=Array.prototype;var Gr=Wr.splice;function Hr(e){var r=this.ng,t=Ur(r,e);if(t<0){return false}var i=r.length-1;if(t==i){r.pop()}else{Gr.call(r,t,1)}--this.size;return true}function qr(e){var r=this.ng,t=Ur(r,e);return t<0?undefined:r[t][1]}function Vr(e){return Ur(this.ng,e)>-1}function Xr(e,r){var t=this.ng,i=Ur(t,e);if(i<0){++this.size;t.push([e,r])}else{t[i][1]=r}return this}function Jr(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}Jr.prototype.clear=Dr;Jr.prototype[\"delete\"]=Hr;Jr.prototype.get=qr;Jr.prototype.has=Vr;Jr.prototype.set=Xr;var Yr=H(t,\"Map\");function Zr(){this.size=0;this.ng={hash:new zr,map:new(Yr||Jr),string:new zr}}function Kr(e){var r=typeof e;return r==\"string\"||r==\"number\"||r==\"symbol\"||r==\"boolean\"?e!==\"__proto__\":e===null}function Qr(e,r){var t=e.ng;return Kr(r)?t[typeof r==\"string\"?\"string\":\"hash\"]:t.map}function et(e){var r=Qr(this,e)[\"delete\"](e);this.size-=r?1:0;return r}function rt(e){return Qr(this,e).get(e)}function tt(e){return Qr(this,e).has(e)}function it(e,r){var t=Qr(this,e),i=t.size;t.set(e,r);this.size+=t.size==i?0:1;return this}function nt(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}nt.prototype.clear=Zr;nt.prototype[\"delete\"]=et;nt.prototype.get=rt;nt.prototype.has=tt;nt.prototype.set=it;function ft(e,r){var t=-1,i=r.length,n=e.length;while(++t<i){e[n+t]=r[t]}return e}function at(){this.ng=new Jr;this.size=0}function st(e){var r=this.ng,t=r[\"delete\"](e);this.size=r.size;return t}function ut(e){return this.ng.get(e)}function ot(e){return this.ng.has(e)}var lt=200;function vt(e,r){var t=this.ng;if(t instanceof Jr){var i=t.ng;if(!Yr||i.length<lt-1){i.push([e,r]);this.size=++t.size;return this}t=this.ng=new nt(i)}t.set(e,r);this.size=t.size;return this}function ct(e){var r=this.ng=new Jr(e);this.size=r.size}ct.prototype.clear=at;ct.prototype[\"delete\"]=st;ct.prototype.get=ut;ct.prototype.has=ot;ct.prototype.set=vt;function ht(e,r){var t=-1,i=e==null?0:e.length,n=0,f=[];while(++t<i){var a=e[t];if(r(a,t,e)){f[n++]=a}}return f}function dt(){return[]}var yt=Object.prototype;var mt=yt.propertyIsEnumerable;var bt=Object.getOwnPropertySymbols;var pt=!bt?dt:function(r){if(r==null){return[]}r=Object(r);return ht(bt(r),function(e){return mt.call(r,e)})};function xt(e,r,t){var i=r(e);return k(e)?i:ft(i,t(e))}function wt(e){return xt(e,Ir,pt)}var kt=H(t,\"DataView\");var gt=H(t,\"Promise\");var Mt=H(t,\"Set\");var It=\"[object Map]\",St=\"[object Object]\",$t=\"[object Promise]\",At=\"[object Set]\",_t=\"[object WeakMap]\";var Ot=\"[object DataView]\";var jt=B(kt),Ft=B(Yr),Ct=B(gt),Tt=B(Mt),Lt=B(q);var Bt=x;if(kt&&Bt(new kt(new ArrayBuffer(1)))!=Ot||Yr&&Bt(new Yr)!=It||gt&&Bt(gt.resolve())!=$t||Mt&&Bt(new Mt)!=At||q&&Bt(new q)!=_t){Bt=function(e){var r=x(e),t=r==St?e.constructor:undefined,i=t?B(t):\"\";if(i){switch(i){case jt:return Ot;case Ft:return It;case Ct:return $t;case Tt:return At;case Lt:return _t}}return r}}var Rt=Bt;var Et=t.Uint8Array;var Nt=\"__lodash_hash_undefined__\";function Pt(e){this.ng.set(e,Nt);return this}function zt(e){return this.ng.has(e)}function Dt(e){var r=-1,t=e==null?0:e.length;this.ng=new nt;while(++r<t){this.add(e[r])}}Dt.prototype.add=Dt.prototype.push=Pt;Dt.prototype.has=zt;function Ut(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)){return true}}return false}function Wt(e,r){return e.has(r)}var Gt=1,Ht=2;function qt(e,r,t,i,n,f){var a=t&Gt,s=e.length,u=r.length;if(s!=u&&!(a&&u>s)){return false}var o=f.get(e);var l=f.get(r);if(o&&l){return o==r&&l==e}var v=-1,c=true,h=t&Ht?new Dt:undefined;f.set(e,r);f.set(r,e);while(++v<s){var d=e[v],y=r[v];if(i){var m=a?i(y,d,v,r,e,f):i(d,y,v,e,r,f)}if(m!==undefined){if(m){continue}c=false;break}if(h){if(!Ut(r,function(e,r){if(!Wt(h,r)&&(d===e||n(d,e,t,i,f))){return h.push(r)}})){c=false;break}}else if(!(d===y||n(d,y,t,i,f))){c=false;break}}f[\"delete\"](e);f[\"delete\"](r);return c}function Vt(e){var t=-1,i=Array(e.size);e.forEach(function(e,r){i[++t]=[r,e]});return i}function Xt(e){var r=-1,t=Array(e.size);e.forEach(function(e){t[++r]=e});return t}var Jt=1,Yt=2;var Zt=\"[object Boolean]\",Kt=\"[object Date]\",Qt=\"[object Error]\",ei=\"[object Map]\",ri=\"[object Number]\",ti=\"[object RegExp]\",ii=\"[object Set]\",ni=\"[object String]\",fi=\"[object Symbol]\";var ai=\"[object ArrayBuffer]\",si=\"[object DataView]\";var ui=n?n.prototype:undefined,oi=ui?ui.valueOf:undefined;function li(e,r,t,i,n,f,a){switch(t){case si:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset){return false}e=e.buffer;r=r.buffer;case ai:if(e.byteLength!=r.byteLength||!f(new Et(e),new Et(r))){return false}return true;case Zt:case Kt:case ri:return se(+e,+r);case Qt:return e.name==r.name&&e.message==r.message;case ti:case ni:return e==r+\"\";case ei:var s=Vt;case ii:var u=i&Jt;s||(s=Xt);if(e.size!=r.size&&!u){return false}var o=a.get(e);if(o){return o==r}i|=Yt;a.set(e,r);var l=qt(s(e),s(r),i,n,f,a);a[\"delete\"](e);return l;case fi:if(oi){return oi.call(e)==oi.call(r)}}return false}var vi=1;var ci=Object.prototype;var hi=ci.hasOwnProperty;function di(e,r,t,i,n,f){var a=t&vi,s=wt(e),u=s.length,o=wt(r),l=o.length;if(u!=l&&!a){return false}var v=u;while(v--){var c=s[v];if(!(a?c in r:hi.call(r,c))){return false}}var h=f.get(e);var d=f.get(r);if(h&&d){return h==r&&d==e}var y=true;f.set(e,r);f.set(r,e);var m=a;while(++v<u){c=s[v];var b=e[c],p=r[c];if(i){var x=a?i(p,b,c,r,e,f):i(b,p,c,e,r,f)}if(!(x===undefined?b===p||n(b,p,t,i,f):x)){y=false;break}m||(m=c==\"constructor\")}if(y&&!m){var w=e.constructor,k=r.constructor;if(w!=k&&(\"constructor\"in e&&\"constructor\"in r)&&!(typeof w==\"function\"&&w instanceof w&&typeof k==\"function\"&&k instanceof k)){y=false}}f[\"delete\"](e);f[\"delete\"](r);return y}var yi=1;var mi=\"[object Arguments]\",bi=\"[object Array]\",pi=\"[object Object]\";var xi=Object.prototype;var wi=xi.hasOwnProperty;function ki(e,r,t,i,n,f){var a=k(e),s=k(r),u=a?bi:Rt(e),o=s?bi:Rt(r);u=u==mi?pi:u;o=o==mi?pi:o;var l=u==pi,v=o==pi,c=u==o;if(c&&Be(e)){if(!Be(r)){return false}a=true;l=false}if(c&&!l){f||(f=new ct);return a||yr(e)?qt(e,r,t,i,n,f):li(e,r,u,t,i,n,f)}if(!(t&yi)){var h=l&&wi.call(e,\"__wrapped__\"),d=v&&wi.call(r,\"__wrapped__\");if(h||d){var y=h?e.value():e,m=d?r.value():r;f||(f=new ct);return n(y,m,t,i,f)}}if(!c){return false}f||(f=new ct);return di(e,r,t,i,n,f)}function gi(e,r,t,i,n){if(e===r){return true}if(e==null||r==null||!w(e)&&!w(r)){return e!==e&&r!==r}return ki(e,r,t,i,gi,n)}function Mi(u){return function(e,r,t){var i=-1,n=Object(e),f=t(e),a=f.length;while(a--){var s=f[u?a:++i];if(r(n[s],s,n)===false){break}}return e}}var Ii=Mi();function Si(e,r){return e&&Ii(e,r,Ir)}function $i(f,a){return function(e,r){if(e==null){return e}if(!be(e)){return f(e,r)}var t=e.length,i=a?t:-1,n=Object(e);while(a?i--:++i<t){if(r(n[i],i,n)===false){break}}return e}}var Ai=$i(Si);function _i(e){return typeof e==\"function\"?e:I}function Oi(e,r){var t=k(e)?te:Ai;return t(e,_i(r))}function ji(e,r){return gi(e,r)}function Fi(e){return e===undefined}var Ci=13;var Ti=[2,26];var Li={ID:\"__id__\",Rp:Ti[1],Mp:Ti[0],jp:.8,Pp:.2,YM:5,KM:{dom:\"div\",id:\"_amap_custom_labellayer_div_\",className:\"amap-layer\",style:{cssText:\"position:absolute;top:0;left:0;\",zIndex:\"\",width:\"\",height:\"\",visible:\"\"}},Dp:{Op:180,Ad:70,Td:360,t1:300,e1:30,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:\"top\",QM:\"right\",tj:\"bottom\",LEFT:\"left\",nj:\"middle\",ij:\"center\",ej:\"alphabetic\"},oj:{CLICK:\"click\",MOUSEOVER:\"mouseover\",MOUSEOUT:\"mouseout\",MOUSEMOVE:\"mousemove\",MOUSEDOWN:\"mousedown\",MOUSEUP:\"mouseup\",aj:\"touchstart\",uj:\"touchend\"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:Ti,icon:{type:\"image\",image:\"://visuallocal.amap.com/public/poi-marker.png\",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:\"bottom-center\",angel:0,m2:true,zooms:Ti},text:{type:\"billboard\",direction:\"top\",offset:[0,0],zooms:Ti,style:{fj:6,fontFamily:\"sans-serif\",fontSize:12,fontWeight:\"normal\",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:\"transparent\",padding:[3,3,3,3],backgroundColor:\"\"}}},hj:{cj:{opacity:.2},vj:\"fadeIn\",lj:\"fadeOut\",dj:{bj:\"start\",RUNNING:\"running\",pj:\"complete\"},yj:{mj:\"opacity\",gj:\"size\"}},_d:3,wj:\"_AMap_sdf_com_words\",Mj:128,pc:[\"://sdf.amap.com\",\"://sdf01.amap.com\",\"://sdf02.amap.com\",\"://sdf03.amap.com\",\"://sdf04.amap.com\"],sp:4,Cd:200/256,Ld:205/256,Aj:{kj:\"纹理加载失败，请重试\",Oj:\"资源加载失败，请重试\"},xj:\"bufferChanged\",Ij:\"frameBufferChanged\",Tj:\"combineFrameBufferChanged\",ic:1,ud:13,Cj:12,Ej:\"__icon_combination\",Nj:\"__text_combination\",Lj:{file:{0:\"://vdata.amap.com/style_icon/2.0/icon-normal-big.png\",1:\"://vdata.amap.com/style_icon/2.0/icon-biz-big.png\"},size:[40,40],Rj:10},Kp:{buffer:3,family:\"ios9\",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:\"sdf\",RB:\"sdfJson\",FN:\"version\"};var Bi;(function(e){e[\"nebula\"]=\"nebula\";e[\"nebulaLabel\"]=\"nebulaLabel\"})(Bi||(Bi={}));var Ri;(function(e){e[e[\"dynamic\"]=0]=\"dynamic\";e[e[\"icon\"]=1]=\"icon\"})(Ri||(Ri={}));var Ei;(function(e){e[\"BLOB\"]=\"blob\";e[\"TOLOAD\"]=\"toload\";e[\"LOADING\"]=\"loading\";e[\"LOADED\"]=\"loaded\";e[\"UNLOADED\"]=\"unloaded\";e[\"ERROR\"]=\"error\";e[\"RELOADING\"]=\"reloading\";e[\"UNCOMBINED\"]=\"uncombined\";e[\"COMBINING\"]=\"combining\";e[\"COMBINED\"]=\"combined\"})(Ei||(Ei={}));var Ni=function(){function e(e,r){this.Ci=e;this.mask=r}e.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771};e.tH=[true,true,true,true];e.iH=[false,false,false,false];e.disabled=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.iH);e.Mi=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.tH);e.Ri=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.zi=new e([e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.Si=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.b2=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ZERO],e.tH);return e}();var Pi=function(){function e(e,r,t){this.stencilFunc=e;this.stencilOp=r;this.stencilMask=t}e.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683};e.disable=new e({test:e.wi.ALWAYS,Li:0,mask:0},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.Ai=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.Ti=new e({test:e.wi.LESS,Li:240,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nH=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.$H=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.DH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.FH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.DECR],255);e.PH=new e({test:e.wi.ALWAYS,Li:255,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.HH=new e({test:e.wi.NOTEQUAL,Li:1,mask:1},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.js=new e({test:e.wi.NOTEQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.AY=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.SY=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.TE=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.FE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.ZERO],255);e.test=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.ZERO,e.wi.ZERO,e.wi.INCR],255);e.HE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.w2=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.g2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.M2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.I2=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);return e}();var zi=typeof self===undefined?window:self;var Di=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}if(!Boolean(e)){console.log.apply(console,r)}};var Ui=typeof window!==\"undefined\"?window.URL||window.webkitURL||{createObjectURL:function(){console.error(\"URL not exist, please use more popular browser\")}}:URL||webkitURL||{createObjectURL:function(){console.error(\"URL not exist, please use more popular browser\")}};var Wi=function(){function e(e){this.Oi=$n;this.gl=e.gl;this.default=this.Fi();this.current=this.Fi();this.Pi=false}e.prototype.set=function(e){this.current=e};e.prototype.get=function(){return this.current};e.prototype.setDirty=function(){this.Pi=true};e.prototype.reset=function(){this.set(this.default)};e.prototype.ji=function(e){return this.Pi||!this.Oi(e,this.current)};return e}();var Gi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.BLEND)}else{r.disable(r.BLEND)}this.current=e;this.Pi=false};return r}(Wi);var Hi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};r.prototype.set=function(e){var r=this.current;if(e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&!this.Pi){return}this.gl.viewport(e[0],e[1],e[2],e[3]);this.current=e;this.Pi=false};return r}(Wi);var qi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.DEPTH_TEST);r.depthFunc(r.LEQUAL)}else{r.disable(r.DEPTH_TEST)}this.current=e;this.Pi=false};return r}(Wi);var Vi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.DEPTH_TEST,S2:this.gl.LESS}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthFunc(e.S2);this.current=e;this.Pi=false};return r}(Wi);var Xi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.STENCIL_TEST)}else{r.disable(r.STENCIL_TEST)}this.current=e;this.Pi=false};return r}(Wi);var Ji=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilFunc(e.test,e.Li,e.mask);this.current=e;this.Pi=false};return r}(Wi);var Yi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).stencilOp.apply(r,e);this.current=e;this.Pi=false};return r}(Wi);var Zi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.CULL_FACE)}else{r.disable(r.CULL_FACE)}this.current=e;this.Pi=false};return r}(Wi);var Ki=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendFunc(e[0],e[1]);this.current=e;this.Pi=false};return r}(Wi);var Qi=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl.ONE;var r=this.gl.ZERO;return[e,r,e,r]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendFuncSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(Wi);var en=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.FUNC_ADD};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendEquation(e);this.current=e;this.Pi=false};return r}(Wi);var rn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendEquationSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(Wi);var tn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return e.BACK};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.cullFace(e);this.current=e;this.Pi=false};return r}(Wi);var nn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.CCW};r.prototype.set=function(e){if(!this.ji(e)&&!this.Pi){return}this.gl.frontFace(e);this.current=e;this.Pi=false};return r}(Wi);var fn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 1};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearDepth(e);this.current=e;this.Pi=false};return r}(Wi);var an=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[0,0,0,0]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).clearColor.apply(r,e);this.current=e;this.Pi=false};return r}(Wi);var sn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearStencil(e);this.current=e;this.Pi=false};return r}(Wi);var un=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[true,true,true,true]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).colorMask.apply(r,e);this.current=e;this.Pi=false};return r}(Wi);var on=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return true};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthMask(e);this.current=e;this.Pi=false};return r}(Wi);var ln=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 65535};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilMask(e);this.current=e;this.Pi=false};return r}(Wi);var vn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e);this.current=e;this.Pi=false};return r}(Wi);var cn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}if(this.current&&this.current!==e){this.current.Ni()}if(e){this.gl.useProgram(e.$i)}else{this.gl.useProgram(null)}this.current=e;this.Pi=false};return r}(Wi);var hn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.TEXTURE0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.activeTexture(this.gl.TEXTURE0+e);this.current=e;this.Pi=false};return r}(Wi);var dn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindTexture(r.TEXTURE_2D,e);this.current=e;this.Pi=false};return r}(Wi);var yn=function(i){f(e,i);function e(e,r){var t=i.call(this,e)||this;t.context=e;t.parent=r;return t}return e}(Wi);var mn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;var t=this.context.bindFramebuffer.current;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);this.context.bindFramebuffer.set(t);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteTexture(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(yn);var bn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteRenderbuffer(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(yn);var pn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(e&&e.xe){Di(true,\"WebGLBuffer deleted\")}if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(Wi);var xn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(Wi);var wn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,e);this.current=e;this.Pi=false};return r}(Wi);var kn=M[\"Support\"];function gn(e,r){if(e===r){return false}if(e.length!==r.length){return true}for(var t=0,i=e.length;t<i;t++){if(e[t]!==r[t]){return true}}return false}function Mn(e,r){if(typeof e!==typeof r){return true}if(typeof e===\"object\"){return Array.isArray(e)!==Array.isArray(r)}return false}function In(e,r){return e!==r}function Sn(e,r){if(Mn(e,r)){return true}switch(typeof e){case\"boolean\":case\"number\":case\"string\":return In(e,r);case\"object\":return Array.isArray(e)?gn(e,r):In(e,r);default:return true}}function $n(e,r){return!Sn(e,r)}var An=function(){function e(e,r,t){this.enable=e;this.mode=r;this.frontFace=t}e.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032};e.we=new e(false,e.wi.FRONT_AND_BACK,e.wi.CW);e._e=new e(true,e.wi.FRONT,e.wi.CW);e.back=new e(true,e.wi.BACK,e.wi.CW);return e}();var _n=AMap[\"Util\"];var On=function(){function e(){this.hS=_n.stamp(this)}e.prototype.destroy=function(){};e.prototype.fH=function(e){var r=e.Ro;var t=e.localCoord.center;var i=[r[0]-t[0],r[1]-t[1]];var n=[r[0]-t[0],r[3]-t[1]];var f=[r[2]-t[0],r[1]-t[1]];var a=[r[2]-t[0],r[3]-t[1]];return u(i,f,n,f,a,n)};e.prototype.OH=function(e,r){if(e===void 0){e=false}if(!r){return Pi.nH}if(r&&!e){return Pi.DH}if(r&&e){return Pi.HH}};e.prototype.BH=function(e,r){if(e===void 0){e=false}if(!r){return Pi.$H}if(r&&!e){return Pi.FH}if(r&&e){return Pi.PH}};return e}();var jn=M[\"Support\"];var Fn=jn.scale;var Cn=function(){function e(){this.Lz={De:[],sizes:[]};this._f=null;this.CG=0}e.prototype.Mz=function(e){var r=e.map,t=e.R_,i=e.z_,n=e.$i;this._map=r;this.Mf=t;this.ac=i;this._f=n};e.prototype.Ce=function(e,r,t,i){if(t===void 0){t={}}var n=Li.ud,f=Li.sp;var a=this._f;var s=e.viewState,u=e.size;if(!s){return i.iterator}var o=s.mvpMatrix,l=s.zoom,v=s.viewMode;var c=u[0],h=u[1];var d=i.Sa,y=i.from,m=y===void 0?\"inner\":y,b=i.opacity,p=b===void 0?1:b,x=i.offset,w=x===void 0?[0,0]:x,k=i.Sz,g=i.LF,M=g===void 0?{}:g;var I=i.iterator;var S=1;if(v===\"3D\"){S=e.map.getView().EF()}var $=t.Rz,A=t.buffer,_=t.od,O=t.zz;r.bindFramebuffer.set(null);r.be.set([0,0,c*Fn,h*Fn]);var j=$.pp;var F=A;var C=this.fd(i.A2),T=C.De,L=T===void 0?[]:T,B=C.sizes,R=B===void 0?[]:B;var E=n*f;var N=j.length;if(!F||!_){return I}if(N){r.ge.set(a);a.Ae({a_vertex:{type:\"vec2\",buffer:F,Re:E,offset:0},a_texcoord:{type:\"vec2\",buffer:F,Re:E,offset:2*f},a_origin:{type:\"vec2\",buffer:F,Re:E,offset:4*f},a_texIndex:{type:\"float\",buffer:F,Re:E,offset:6*f},a_type:{type:\"float\",buffer:F,Re:E,offset:7*f},a_zooms:{type:\"vec2\",buffer:F,Re:E,offset:8*f},a_height:{type:\"float\",buffer:F,Re:E,offset:10*f},a_highflag:{type:\"float\",buffer:F,Re:E,offset:12*f},a_visible:{type:\"float\",buffer:_,Re:0,offset:O[I]&&O[I].start}});var P=this.l_===\"inner\"?Ni.Ri:Ni.Si;for(var z=0;z<N;z++){var D=j[z];var U=D.start,W=U===void 0?0:U,G=D.end,H=G===void 0?0:G,q=D.dp;I++;if(!(H-W)){continue}var V=void 0;if(m===\"labelsLayer\"&&D.pd){var X=this.ac.getImage(D.pd);if(X.img){var J=this.dd(r,X),Y=J.texture,Z=J.size;if(Y&&Y.context){L[Ri.icon]=Y;V=R.slice(0);V[Ri.icon*2]=Z[0];V[Ri.icon*2+1]=Z[1]}}}var K=D.vd;var Q=K.GV(\"fillColor\");var ee=K.GV(\"strokeColor\");var re=K.GV(\"backgroundColor\");var te=K.GV(\"borderColor\");a.Le({u_matrix:o,u_texture:{De:L,count:4},u_gl_size:[c,h],u_texsize:V?V:R,u_color:Q,u_strokeColor:ee,u_borderColor:te,u_gamma:K.GV(\"u_gamma\"),u_borderBuffer:K.GV(\"u_borderBuffer\"),u_buffer:K.GV(\"u_buffer\"),u_backgroundColor:re,u_opacity:D.opacity*p,u_zoom:l,u_event:0,u_delta_center:d,u_offset:w,u_transform:[0,0,1,0],u_skyHeight:S,u_fontSizeFactor:K.GV(\"u_fontSizeFactor\"),u_highlightFillColor:K.GV(\"u_highlightFillColor\"),u_highlightStrokeColor:K.GV(\"u_highlightStrokeColor\")});a.Pe((H-W)/n,W/n,undefined,undefined,M.depthTest,P)}}return I};e.prototype.Cz=function(e,r,t,i,n){var f=this._f;var a=Li.sp,s=Li.ud;var u=e.viewState,o=e.size;var l=u.zoom||Ti[1];var v=u.mvpMatrix||null;var c=o[0],h=o[1];var d=n.Az,y=n.Iz,m=n.centerCoord;var b=1;if(u.viewMode===\"3D\"){b=e.map.getView().EF()}if(!v){return}var p=i.$z||{};var x=p.pp,w=p.zs,k=p.od;var g=w&&w.buffer;var M=Math.pow(2,l-y);r.be.set([0,0,c*Fn,h*Fn]);var I=this.fd(n.A2),S=I.De,$=S===void 0?[]:S,A=I.sizes,_=A===void 0?[]:A;var O=x.length;var j=s*a;var F;var C;var T;var L;var B;var R;var E;var N=y>=l?M:1;var P=[0,0,N,0];if(!g||!k){return}if(O){r.ge.set(this._f);f.Ae({a_vertex:{type:\"vec2\",buffer:g,Re:j,offset:0},a_texcoord:{type:\"vec2\",buffer:g,Re:j,offset:2*a},a_origin:{type:\"vec2\",buffer:g,Re:j,offset:4*a},a_texIndex:{type:\"float\",buffer:g,Re:j,offset:6*a},a_type:{type:\"float\",buffer:g,Re:j,offset:7*a},a_zooms:{type:\"vec2\",buffer:g,Re:j,offset:8*a},a_height:{type:\"float\",buffer:g,Re:j,offset:10*a},_2:{type:\"float\",buffer:g,Re:j,offset:11*a},a_highflag:{type:\"float\",buffer:g,Re:j,offset:12*a},a_visible:{type:\"float\",buffer:k,Re:0,offset:0}})}var z;for(var D=0;D<O;D++){var U=x[D];F=U[0];C=U[1];T=U[11];L=U[12];B=U[13];E=U[14];if(!(L-T)){continue}for(var W=0,G=d;W<G.length;W++){var H=G[W];z=t[H];if(z&&H===B){R=z.Sa}}if(!R||M<.6){continue}if(!z){continue}R=[0,0];f.Le({u_matrix:v,u_delta_center:R,u_transform:P,u_texture:{De:$,count:$.length},u_gl_size:o,u_texsize:_,u_color:U[3],u_strokeColor:U[4],u_gamma:U[5],u_borderBuffer:U[7],u_buffer:U[8],u_backgroundColor:U[9],u_opacity:1,u_zoom:l,u_event:0,u_skyHeight:b,u_fontSizeFactor:1});f.Pe((L-T)/s,T/s,undefined,undefined,undefined,Ni.Si)}};e.prototype.gp=function(e,r){var t=e.context;var i=e.Jn();var n=r;var f=t.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);if(!n){return}i.Ce({u_texture:n},{a_pos:{type:\"vec2\",buffer:f,Re:8,offset:0},a_coord:{type:\"vec2\",buffer:f,Re:8,offset:4}},4,undefined,\"TRIANGLE_FAN\",undefined,Ni.Mi)};e.prototype.reset=function(){this.Df()};e.prototype.destroy=function(){if(this.Lz){for(var e=0,r=this.Lz.De;e<r.length;e++){var t=r[e];t.destroy()}delete this.Lz}};e.prototype.Dz=function(e,r,t){var i=t.start,n=i===void 0?0:i,f=t.dp,a=t.style;var s=6;var u=n;var o=0;var l;var v;for(var c=0,h=f;c<h.length;c++){var d=h[c];l=d.id;v=d.kd;var y=r[l];if(e.uf<n+o+v){e.ff(e.uf*2)}var m=e.value;if(y){var b=a[l]||{},p=b.showText,x=p===void 0?1:p,w=b.showIcon,k=w===void 0?true:w;var g=0;var M=Infinity;var I=-Infinity;var S=Infinity;var $=-Infinity;if(k){g=S=0;$=d.icon*s;while(g<$){m[u+o+g]=1;g++}}if(x){g=M=d.icon*s;I=(d.icon+d.Rd+d.bg)*s;while(g<I){m[u+o+g]=1;g++}}}o+=v}u+=o;return u};e.prototype.Df=function(){};e.prototype.fd=function(e){var r=[];var t=[];if(e){r[0]=e;t[0]=e.size[0];t[1]=e.size[1]}var i=this._map.so.texture;if(i){r.push(i);var n=i.size;t.push(n[0],n[1])}return{De:r,sizes:t}};e.prototype.dd=function(e,r){var t=e.gl;var i=r.img,n=r.width,f=r.height;var a=i;if(i&&!i.context){a=e.createTexture(i);a.bind(t.CLAMP_TO_EDGE,t.LINEAR,t.LINEAR);r.img=a}return{texture:a,size:[n,f]}};return e}();var Tn=M[\"transform\"];var Ln=M[\"Support\"];var Bn=M[\"LabelsRenderUtil\"];var Rn=function(){function e(){this._size=[0,0];this.Wz=1;var e=this.canvas=document.createElement(\"canvas\");this.Nz=e.getContext(\"2d\")}e.prototype.Ce=function(e,r,t,i,n){if(!e){return}this.wf=e;var f=e.size;this._size=f;var a=n.centerCoord,s=n.Uf,u=s===void 0?{}:s,o=n.$f,l=n.Sa,v=l===void 0?[0,0]:l;this.Tz();this.Pz();var c=e.viewState;var h=c.zoom;var d=c.viewMode;if(!this.Oz(h,r.zooms)){return}if(!this._map&&i){var y=c.projectionId;this._map=i;this.If=Tn[y];this._view=i.getView();this.ac=i.z_}if(!t[\"other\"]){return}var m=t&&t.other,b=m.coords,p=m.style,x=m.Nf,w=m.Fz,k=w===void 0?[]:w;var g={viewState:c,size:this.wf.size,transform:this.If,view:this._view,viewMode:d,centerCoord:a};this.Bz(r);for(var M=0,I=k;M<I.length;M++){var S=I[M];for(var $=0;$<S.length;$++){var A=S[$];if(!u[A]){continue}var _=x[A]||{};var O=b[A]||{};var j=p[A]||{};var F=_.data.extData||{};var C=F.Sa||v||[0,0];var T=_.data||{};var L=T[\"txt\"];var B=_.opts||{};var R=(j.icon||[])[0]||{};var E=R.image;var N=Fi(j.opacity)?1:B.opacity;var P=j.text;if(E&&R&&this.Oz(h,j.icon&&j.icon.zooms)){var z=this.ac[\"getImage\"](E),D=z.img,U=z.width,W=z.height;var G={size:[U,W],opacity:N};var H=O.icon.origin;var q=O.icon.anchorOffset;var V=Bn.wu(H[0]+C[0],H[1]+C[1],h,g);var X=[V[0]+q[0],V[1]+q[1]];this.drawImage(D,R,X,G)}if(L&&P&&this.Oz(h,j.text&&j.text.zooms)){var J={opacity:N,padding:O.padding};var H=O.text.origin;var q=O.text.offset;var Y=Bn.wu(H[0]+C[0],H[1]+C[1],h,g);var Z=P.style;var K=Z.fontSize||12;var Q=[Y[0]+q[0],Y[1]+q[1]+K];this.Ez(j.text,Y,J);var ee=L.length;var re=Z.fold===false?100:6;var te=Math.ceil(ee/re);var ie=Math.floor(ee/te);var ne=3;for(var fe=0;fe<te;fe++){var ae=fe===te-1?ee-fe*ie:ie;var se=L.substr(fe*ie,ae);this.gp(se,P,Q,J);var ue=K*5/4+ne;Q[1]=Q[1]+ue}}}}};e.prototype.Ez=function(e,r,t){var i=this.Nz;var n=Ln.scale,f=n===void 0?1:n;var a=e.style.backgroundColor;var s=t.padding;var u=s.offsetX,o=s.offsetY,l=s.w,v=s.h;var c=r[0]+u;var h=r[1]+o;if(i&&a){i.fillStyle=a;i.fillRect(c*f,h*f,l*f,v*f)}};e.prototype.drawImage=function(e,r,t,i){var n=Ln.scale;var f=this.Nz;if(!f||!r){return}var a=r[\"image\"];var s=r[\"size\"];var u=r[\"clipOrigin\"];var o=r[\"angel\"];var l=r[\"clipSize\"];var v=i.opacity,c=v===void 0?1:v;var h=s[0];var d=s[1];var y=e.width||h;var m=e.height||d;var b=l[0];var p=l[1];var x=u[0];var w=u[1];if(Fi(b)){b=h}if(Fi(p)){p=d}if(b>y){b=y}if(p>m){p=m}f.globalAlpha=c*this.Wz;f.drawImage(e,x,w,b,p,t[0]*n,t[1]*n,h*n,d*n)};e.prototype.gp=function(e,r,t,i){var n=Ln.scale,f=n===void 0?1:n;var a=this.Nz;if(!a){return}var s=r.style,u=s===void 0?{}:s;var o=i.opacity,l=o===void 0?1:o;var v=u.fontWeight,c=u.fontSize,h=u.fontFamily,d=h===void 0?\"sans-serif\":h,y=u.fillColor,m=u.strokeColor,b=u.strokeWidth,p=b===void 0?1:b,x=u.textAlign,w=x===void 0?\"center\":x,k=u.Gz,g=k===void 0?\"Alphabetic\":k;a.globalAlpha=l;a.globalAlpha=1;a.font=v+\" \"+c*f+\"px \"+d;a.textAlign=w;a.textBaseline=g;var M=t[0];var I=t[1];a.lineJoin=\"round\";if(m&&p){a.strokeStyle=m;a.lineWidth=p;a.strokeText(e,M*f,I*f)}a.fillStyle=y;a.fillText(e,M*f,I*f)};e.prototype.Pz=function(){var e=this.canvas;var r=Ln.scale;var t=this._size||[0,0],i=t[0],n=t[1]};e.prototype.Tz=function(){this.canvas.width=this.canvas.width};e.prototype.reset=function(){this.Pz()};e.prototype.destroy=function(){this.Pz()};e.prototype.Oz=function(e,r){if(r===void 0){r=[]}var t=r[0]||Ti[0];var i=r[1]||Ti[1];if(e>=t&&e<=i){return true}return false};e.prototype.Bz=function(e){var r=this._container;if(!r){r=this._container=this.O2(this._map)}var t=Ln.scale;var i=e.zIndex,n=i===void 0?100:i,f=e.opacity,a=e.visible,s=e.zooms,u=s===void 0?Ti:s;var o=this.wf.viewState.zoom;var l=this.Oz(o,u);if(!a||!l||f===0){r.style.display=\"none\"}else{r.style.display=\"block\"}this.Wz=f;var v=this._size;r.setAttribute(\"width\",v[0]*t+\"px\");r.setAttribute(\"height\",v[1]*t+\"px\");r.style.width=v[0]+\"px\";r.style.height=v[1]+\"px\";r.style.zIndex=n+\"\"};e.prototype.O2=function(e){var r=e.getContainer();var t=r.querySelector(\".amap-layers\");if(t){t.appendChild(this.canvas)}AMap.DomUtil.addClass(this.canvas,\"amap-labellayers\");return this.canvas};return e}();var En=M[\"SmartTypedArray\"];var Nn=function(r){f(e,r);function e(){var e=r.call(this)||this;e.type=\"labelsLayer\";e.wf=null;e.Ps={};e._viewMode=\"2D\";e.Wf={};e.Bf={};e.TG={};e.uu=[0,0];return e}e.prototype.Hz=function(e,r,t,i,n,f){if(!this.ac){this._map=n;this._view=n.getView();this.ac=n.z_;this.Mf=n.R_;this._viewMode=r.viewState.viewMode;this.fz=n.fS();if(!this._map.isDOMMode()){if(!this.Zz){this.Zz=new Cn}}else{if(!this.Vz){this.Vz=new Rn}}if(this.Zz){this.Zz.Mz({map:n,z_:n.z_,R_:n.R_,$i:e.Zn()})}}};e.prototype.Jz=function(){return{centerCoord:this.uu}};e.prototype.vi=function(e){if(this.fz){var r=this.fz.vi(e,\"\");return r}return null};e.prototype.destroy=function(){if(this.Zz){this.Zz.destroy();delete this.Zz}if(this.Vz){this.Vz.destroy();delete this.Vz}this.AG()};e.prototype.reset=function(){if(this.Zz){this.Zz.reset()}if(this.Vz){this.Vz.reset()}};e.prototype.Yz=function(e,r,t,i,n){this.Vz.Ce(e,r,t,i,n)};e.prototype.SG=function(){var e=typeof Int8Array!==\"undefined\";var r;if(e){r=new En(\"uint8\",5e5);r.value.fill(0)}return r};e.prototype.zG=function(e){if(!this.TG[e]){this.TG[e]={iterator:0}}var r=this.TG[e];if(!r.LG){r.LG=this.SG()}if(!r.zz){r.zz=[]}return this.TG[e]};e.prototype.AG=function(){var e=this.TG||{};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];delete t.zz;if(t.od){t.od.destroy();delete t.od}t.iterator=0;if(t.LG){t.LG.value.fill(0)}}}};return e}(On);var Pn=AMap[\"Util\"];var zn=M[\"transform\"];var Dn=M[\"geo\"][\"lcs\"];var Un=M[\"SmartArrayBuffer\"];var Wn=function(y){f(e,y);function e(){var e=y.call(this)||this;e.type=\"labelsLayer\";e.l_=\"labelsLayer\";return e}e.prototype.Hz=function(e,r,t,i,n,f){if(!i||!r){return}y.prototype.Hz.call(this,e,r,t,i,n,f);this.wf=r;var a=r.viewState;var s=a.projectionId;this.If=zn[s];var u=a.zoom;if(r&&f.visible&&f.opacity&&Pn.dS(u,f.zooms)){if(!i.Nf){return}if(!this._map.isDOMMode()){var o=e.context;i.upload(o)}if(!i){return}var l=i.rp,v=i.buffer,c=i.zo;var h=a.centerCoord;this.uu=Dn.getLocalByCoord([h[0],h[1]]).center||[0,0];var d=this.Ps=i;this.Ps.lp=l.up;return d}return null};e.prototype.renderFrame=function(e,r,t,i,n){var f=this.fz;if(f){this.Wf=f.Uf;this.Bf=f.$f}if(!this._map){return}if(!this._map.isDOMMode()){this.Jh(e,t,r,i,n)}else{var a=this.Ps.zo;var s=Pn.hp(a,this.wf);this.Yz(t,i,r,this._map,{Sa:s,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}};e.prototype.Jz=function(){var e=this.Ps.zo;var r=Pn.hp(e,this.wf);var t={Sa:r,from:\"labelsLayer\",opacity:1,offset:[0,0],centerCoord:this.uu};return t};e.prototype.Jh=function(e,r,t,i,n){var f=this.Zz;var a=e.context;if(!t){return}if(!t[\"other\"]){return}var s=t[\"other\"],u=s.rp,o=s.buffer,l=s.zo;var v=Pn.hp(l,r);if(!u||!u.up){return}this.AG();var c=this.zG(this.l_);var h=c.LG,d=c.od;var y=Li.sp;var m=u&&u.pp;var b=m.length;var p=0;var x=0;var w=[];var k=this.Ps.style||{};for(var g=0;g<b;g++){var M=m[g];var I=M.dp||[];p=x;x=f.Dz(h,this.Wf,{start:p,dp:I,style:k});w.push({start:p,end:x})}if(d){d.update(h.value)}else{c.od=new Un(a,h.value,y)}c.zz=w;if(i.ce){e.context.clear({depth:true})}f.Ce(r,a,{Rz:u,buffer:o,od:c.od.buffer,zz:c.zz},{from:this.type,Sz:true,Sa:v,oo:e,LF:i,yZ:true,A2:n.j2})};return e}(Nn);var Gn=typeof Float32Array!==\"undefined\";if(!Gn){window[\"Float32Array\"]=undefined;Vn(Array)}var Hn=1e-6;var qn=typeof Float32Array!==\"undefined\"?Float32Array:Array;function Vn(e){qn=e}if(!Math.hypot)Math.hypot=function(){var e=0,r=arguments.length;while(r--){e+=arguments[r]*arguments[r]}return Math.sqrt(e)};function Xn(e,r){var t=e[0],i=e[1],n=e[2],f=e[3];var a=e[4],s=e[5],u=e[6],o=e[7];var l=e[8],v=e[9],c=e[10],h=e[11];var d=e[12],y=e[13],m=e[14],b=e[15];var p=r[0],x=r[1],w=r[2],k=r[3];var g=r[4],M=r[5],I=r[6],S=r[7];var $=r[8],A=r[9],_=r[10],O=r[11];var j=r[12],F=r[13],C=r[14],T=r[15];return Math.abs(t-p)<=Hn*Math.max(1,Math.abs(t),Math.abs(p))&&Math.abs(i-x)<=Hn*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(n-w)<=Hn*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(f-k)<=Hn*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(a-g)<=Hn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-M)<=Hn*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-I)<=Hn*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(o-S)<=Hn*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(l-$)<=Hn*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(v-A)<=Hn*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(c-_)<=Hn*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-O)<=Hn*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-j)<=Hn*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(y-F)<=Hn*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(m-C)<=Hn*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(b-T)<=Hn*Math.max(1,Math.abs(b),Math.abs(T))}function Jn(){var e=new qn(3);if(qn!=Float32Array){e[0]=0;e[1]=0;e[2]=0}return e}function Yn(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];return e}function Zn(e,r,t,i){e[0]=r;e[1]=t;e[2]=i;return e}function Kn(e,r,t){e[0]=r[0]-t[0];e[1]=r[1]-t[1];e[2]=r[2]-t[2];return e}var Qn=function(){var u=Jn();return function(e,r,t,i,n,f){var a,s;if(!r){r=3}if(!t){t=0}if(i){s=Math.min(i*r+t,e.length)}else{s=e.length}for(a=t;a<s;a+=r){u[0]=e[a];u[1]=e[a+1];u[2]=e[a+2];n(u,u,f);e[a]=u[0];e[a+1]=u[1];e[a+2]=u[2]}return e}}();var ef=typeof Float64Array!==\"undefined\";var rf=typeof Float32Array!==\"undefined\";if(ef){Vn(Float64Array)}else if(rf){Vn(Float32Array)}else{window[\"Float32Array\"]=undefined;Vn(Array)}var tf=AMap[\"DomUtil\"];var nf=function(r){f(e,r);function e(){var e=r.call(this)||this;e.type=\"customLayer\";e.OF=Jn();e.VM=Jn();return e}e.prototype.renderFrame=function(e,r,t,i){if(!i.alwaysRender&&this.OF&&this.EI&&this.BF&&this.NF&&(Xn(this.NF,t.viewState.mvpMatrix)||t.map.TL())){var n=Math.pow(2,t.viewState.zoom-this.EI);Kn(this.VM,t.viewState.centerCoord,this.OF);Zn(this.VM,-(this.VM[0]/this.BF)*n,this.VM[1]/this.BF*n,0);if(n!==1){i.kv.style[tf.kL]=\"scale3d(\"+n+\",\"+n+\",1)\"}i.kv.style.top=this.VM[1]+\"px\";i.kv.style.left=this.VM[0]+\"px\"}else{var f=i.layer;Yn(this.OF,t.viewState.centerCoord);this.EI=t.viewState.zoom;this.NF=t.viewState.mvpMatrix;this.BF=t.viewState.resolution;if(f[\"render\"]){var a=f.getLayerConfig().zooms;if(t.viewState.zoom>=a[0]&&t.viewState.zoom<=a[1]){f.canvas.style.visibility=\"visible\";f[\"render\"]()}else{if(f&&f.canvas&&f.canvas){f.canvas.style.visibility=\"hidden\"}}}i.kv.style[tf.kL]=\"\";i.kv.style.top=\"\";i.kv.style.left=\"\";i.kv.style.height=\"\";i.kv.style.visibility=\"\"}};return e}(On);var ff={PoiStyle:[{$:{mainkey:\"10001\",subkey:\"1\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"2\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"3\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"4\"},StyleItem:[{$:{level:\"18\",desc:\"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0\"}},{$:{level:\"19,20\",desc:\"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"5\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"6\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"7\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"8\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,9,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"9\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,10,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"10\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"11\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"12\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"13\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"14\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"15\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"16\"},StyleItem:[{$:{level:\"20\",desc:\"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"17\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"18\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"19\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"20\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,39,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"21\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"22\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"23\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"24\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"25\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"26\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"27\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"28\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"29\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"30\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"31\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"32\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"33\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"34\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"35\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"36\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"37\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"38\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"39\"},StyleItem:[{$:{level:\"17\",desc:\"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"40\"},StyleItem:[{$:{level:\"17\",desc:\"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"41\"},StyleItem:[{$:{level:\"20\",desc:\"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"42\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"43\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,31,1,1,12,0xff000000,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"44\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"45\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"46\"},StyleItem:[{$:{level:\"18\",desc:\"50,34,2,1,0,0xff935676,0xffffffff,0x0,0\"}},{$:{level:\"19,20\",desc:\"50,34,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"47\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"48\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"49\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"50\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"51\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"52\"},StyleItem:[{$:{level:\"20\",desc:\"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"53\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"54\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"55\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"56\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff000000,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"57\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"58\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"59\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"60\"},StyleItem:[{$:{level:\"16,17\",desc:\"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"62\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"63\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"64\"},StyleItem:[{$:{level:\"17\",desc:\"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"65\"},StyleItem:[{$:{level:\"17\",desc:\"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"66\"},StyleItem:[{$:{level:\"17\",desc:\"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"67\"},StyleItem:[{$:{level:\"17\",desc:\"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"68\"},StyleItem:[{$:{level:\"17\",desc:\"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"69\"},StyleItem:[{$:{level:\"17\",desc:\"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"70\"},StyleItem:[{$:{level:\"17\",desc:\"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"71\"},StyleItem:[{$:{level:\"17\",desc:\"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"72\"},StyleItem:[{$:{level:\"17\",desc:\"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"73\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"74\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"75\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"76\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"77\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"78\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"79\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"80\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"81\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"82\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"83\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"84\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"85\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"86\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"87\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"88\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"89\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"90\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"91\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"92\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"93\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"94\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"95\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"96\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"97\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"98\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"99\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1\"}}]},{$:{mainkey:\"10001\",subkey:\"105\"},StyleItem:[{$:{level:\"16,17,18\",desc:\"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"106\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"107\"},StyleItem:[{$:{level:\"16,17,18,19,20\",desc:\"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0\"}}]}],LineStyle:[{$:{mainkey:\"20001\",subkey:\"1\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00\"}}]},{$:{mainkey:\"20001\",subkey:\"2\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080\"}}]}],RegionStyle:[{$:{mainkey:\"30001\",subkey:\"1\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"90,1,0xfffcfbed\"}}]},{$:{mainkey:\"30001\",subkey:\"99\"},StyleItem:[{$:{level:\"19,20\",desc:\"90,1,0x1a151b2b\"}}]},{$:{mainkey:\"30001\",subkey:\"98\"},StyleItem:[{$:{level:\"19,20\",desc:\"90,1,0x8c151b2b\"}}]}],BuildingStyle:[{$:{mainkey:\"30001\",subkey:\"2\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255\"}}]},{$:{mainkey:\"30001\",subkey:\"3\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255\"}}]},{$:{mainkey:\"30001\",subkey:\"4\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"5\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"6\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"7\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"8\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"9\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"10\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255\"}}]},{$:{mainkey:\"30001\",subkey:\"11\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"12\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255\"}}]},{$:{mainkey:\"30001\",subkey:\"13\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"14\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"15\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255\"}}]},{$:{mainkey:\"30001\",subkey:\"16\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255\"}}]},{$:{mainkey:\"30001\",subkey:\"17\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255\"}}]}]};var af=[\"strokeColor\",\"strokeOpacity\",\"strokeWeight\",\"fillColor\",\"fillOpacity\",\"strokeStyle\",\"strokeDasharray\",\"fontSize\"];var sf={setOptions:function(e){},init:function(){this.NC={};this.UC(ff);this.WC=[];return this.NC},GC:function(e){var r=AMap.getConfig()[\"protocol\"]+\"://webapi.amap.com\"+\"/images/indoor_icon/\"+(\"36/\"+e+\"@2x\")+\".png\";return r},HC:function(e){var r=true;for(var t=13;t<=22;t++){var i=this.VC(e,t);if(i&&(i.fontSize>0||i.iconId)){r=false;break}}return r},VC:function(e,r){return this.Tn(e,r)},ZC:function(e,r){return this.Tn(e,r)},Pr:function(e,r){return this.Tn(e,r)},YC:function(e,r){var t=af;if(r){for(var i in r){if(r.hasOwnProperty(i)&&t.indexOf(i)>=0&&e[i]===void 0){e[i]=r[i]}}}return e},JC:function(e,r){if(!e){return null}var t=af;var i={};for(var n=0,f=t.length;n<f;n++){var a=t[n];if(e.hasOwnProperty(a)&&e[a]!==void 0){i[a]=e[a]}}this.YC(i,r);return i},Tn:function(e,r){var t=e[0];var i=e[1];var n=t+\"_\"+i;r=Math.round(r);var f=this.NC[n];if(!f){if(this.WC.indexOf(n)<0){this.WC.push(n)}return null}for(var a=0,s=f.length;a<s;a++){if(f[a].levels.indexOf(\"\"+r)>=0){return f[a].styleOpts}}if(r>20){var u=f[f.length-1];if(u.levels.indexOf(\"20\")>=0){u.levels.push(\"\"+r);return u.styleOpts}}return null},UC:function(e){for(var r in e){if(e.hasOwnProperty(r)){this.XC(e[r],r)}}},XC:function(e,r){for(var t=0,i=e.length;t<i;t++){this.qC(e[t],r)}},qC:function(e,r){var t=e[\"$\"];if(!t){return}var i=t[\"mainkey\"];var n=t[\"subkey\"];var f=e[\"StyleItem\"];var a=i+\"_\"+n;if(this.NC[a]);this.NC[a]=this.QC(f,r)},QC:function(e,r){var t=[];for(var i=0,n=e.length;i<n;i++){var f=this.KC(e[i],r);if(!f){continue}t.push(f)}return t},KC:function(e,r){var t=e[\"$\"];if(!t){return}var i={};i[\"levels\"]=t[\"level\"].split(\",\");i[\"desc\"]=t[\"desc\"].split(\",\");i[\"styleOpts\"]=this.$I(i,i.desc,r);i[\"styleOpts\"][\"levels\"]=i.levels;return i},BI:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(r.shift());r=r.slice(0,3);var n=\"rgb(\"+r.join(\",\")+\")\";return n},WI:function(e){if(e.trim){e=e.trim()}var r=this.BI(e.substr(2,8));return r},GI:function(){return this.HI++},$I:function(e,r,t){var i;switch(t){case\"PoiStyle\":i={iconId:parseInt(r[1],10),fontSize:Math.min(15,parseInt(r[4],10)||0),fillColor:this.WI(r[5]),strokeColor:this.WI(r[6]),VI:parseInt(r[8],10)===0};if(i.iconId===1){i.iconId=0}break;case\"LineStyle\":i={fillColor:\"rgb(252, 249, 242)\",strokeColor:this.WI(r[7]),strokeWeight:Math.max(2,Math.round(parseInt(r[2],10)/3))};break;case\"RegionStyle\":i={fillColor:this.WI(r[2])};break;case\"BuildingStyle\":i={fillColor:this.WI(r[1]),strokeColor:this.WI(r[2])};break;default:return null}i[\"_uid\"]=this.GI();return i}};var uf=M[\"assign\"];var of={high:{fillColor:\"rgb(252, 249, 242)\",strokeColor:\"rgb(230,142,0)\"},unHigh:{fillColor:\"rgb(252, 249, 242)\",strokeColor:\"rgb(171,171,171)\"}};var lf=M[\"TileState\"];var vf=function(r){f(e,r);function e(){var e=r.call(this)||this;e._config=AMap[\"getConfig\"]();e.YI=[17,22];e.l$=sf.init();e.a$=new M[\"LabelsLayer\"]({opacity:1,collision:true,allowCollision:true,zIndex:9,zooms:[17,22],visible:false});e.GL=false;e.i$=false;e.WL=\"\";e._map=null;e.f$=false;e.UL=null;e.pD=false;e.t$();e.sZ=false;return e}e.prototype[\"getContainer\"]=function(){return document.createElement(\"div\")};e.prototype.renderFrame=function(e,r,t,i,n){};e.prototype.render=function(e){var r=this;var t=e.data;if(!t||t.length<1||!this.gs){return false}this._map=this.gs.map;if(!this.sZ){this.sZ=true;this._map.on(\"click\",function(e){if(r.e$){r.e$.hide()}r.gs.oZ()})}var i=this.gs.ZI();var n=i.indoor,f=i.floorInfo;if(i&&i[\"visible\"]===false){return false}var a=this.qI(t);this.UL=t;if(!a){return false}if(!i[\"changeFloor\"]){var s={centerId:a};this.gs.setRenderData(s)}var u=Object.keys(t);for(var o=0;o<u.length;o++){var l=u[o];var v=t[l];var c=v[\"building\"];if(!c||!c[\"properties\"]){continue}var h=this.gs.getIntersect(c[\"properties\"][\"outside_outline\"]);if(!h){continue}if(!n[l]){var d=\"1\";if(f[l]){d=f[l]}this.gS(v,d)}else{var y=n[l][\"curFloor\"];var d=f[l];if(y!==d){this.gS(v,d)}}}};e.prototype.HF=function(e){this.gs=e};e.prototype.t$=function(){var e=this;if(!this.i$){AMap[\"plugin\"](\"AMap.IndoorMapFloorBar\",function(){e.i$=true})}};e.prototype.QI=function(e,r){var a=this;var t=this.gs.ZI();var i=t.floorInfo,n=t.showId,f=t.centerId,s=t.F2;var u=null;var o=null;var l=Number(i[r])||1;var v=e.properties;if(v&&v[\"floor_nonas\"]){u=v[\"floor_nonas\"];o=v[\"floor_indexs\"]}if(!u||!o){return false}if(o.length>1){if(o[0]>o[1]){u=u.reverse();o=o.reverse()}}if(!this.e$&&this.i$){if(M&&M.module){this.e$=new M[\"IndoorMapFloorBar\"]({floors:u,floorIndexs:o,currentFloor:l});this.WL=f;this.gs.setBar(this.e$);this.gs.setRenderData({barCenterId:this.WL})}if(!this.e$){return false}this._map.addControl(this.e$);this.e$.on(\"floorchange\",function(e){a.pD=true;var r=e[\"currentIndex\"];var t=a.gs.ZI();var i=r;var n=t.centerId;a.gs.n$(n,i);var f=a._map.Mv.getSource(a.gs.co());if(n){a.gs.setRenderData({changeFloor:true});f.JR(n,i)}})}else if(this.e$){this.WL=f;this.e$[\"setOption\"]({floors:u,floorIndexs:o,currentFloor:l});this.gs.setRenderData({barCenterId:this.WL})}if(s&&this.e$){this.e$.hide()}if(!this.GL&&this._map){this.GL=true;this._map.on(\"moveend\",function(){var e=a.vD();if(e){var r={centerId:e};a.gs.setRenderData(r)}a.gs.setRenderData({changeFloor:false});a.C2();a.gs.uD()})}};e.prototype.C2=function(){var e=1;var r=this.gs.ZI();var t=r.centerId;if(t===this.WL){return false}if(r[\"floorInfo\"][t]){e=r[\"floorInfo\"][t]}if(this.UL&&this.UL[t]&&this.UL[t][\"building\"]){var i=this.UL[t][\"building\"];var n=i.properties;var f=null;var a=null;if(n&&n[\"floor_nonas\"]){f=n[\"floor_nonas\"];a=n[\"floor_indexs\"]}if(!f||!a){return false}if(a.length>1){if(a[0]>a[1]){f=f.reverse();a=a.reverse()}}if(this.e$){this.e$[\"setOption\"]({floors:f,floorIndexs:a,currentFloor:Number(e)});this.WL=t;this.gs.setRenderData({barCenterId:this.WL})}}};e.prototype.qI=function(e){var r=this._map.getCenter().toJSON();var t=null;var i=\"\";var n=Object.keys(e);for(var f=0;f<n.length;f++){var a=n[f];var s=e[a];if(s[\"building\"]&&s[\"building\"][\"properties\"]&&s[\"building\"][\"properties\"][\"centerPoint\"]){var u=s[\"building\"][\"properties\"][\"centerPoint\"];var o=new AMap[\"LngLat\"](u[0],u[1]);var l=AMap[\"GeometryUtil\"][\"distance\"](r,o);if(t){if(l<t){t=l;i=a}}else{t=l;i=a}}}return i};e.prototype.vD=function(){var e=this._map.getCenter().toJSON();var r=null;var t=\"\";var i=this.gs.ZI();var n=i[\"indoor\"];var f=Object.keys(n);for(var a=0;a<f.length;a++){var s=f[a];var u=n[s];if(u[\"buildingCenter\"]){var o=u[\"buildingCenter\"];var l=new AMap[\"LngLat\"](o[0],o[1]);var v=AMap[\"GeometryUtil\"][\"distance\"](e,l);if(r){if(v<r){r=v;t=s}}else{r=v;t=s}}}return t};e.prototype.fD=function(e,r){var t=this.gs.ZI();if(!t[\"floorInfo\"]){t[\"floorInfo\"]={}}t[\"floorInfo\"][e]=r;this.gs.setRenderData(t)};e.prototype.gS=function(e,r){var t=Object.keys(e[\"data\"])[0];if(r){t=r}if(!e[\"data\"][t]){return false}var i=e[\"data\"][t][\"floor\"];var n=e[\"data\"][t][\"id\"];if(!i||!n){return false}var f=this.gs.ZI();this.fD(n,r);var a=f[\"centerId\"];if(a===n){this.QI(e[\"building\"],n)}this.o$(i,n,e[\"building\"],r);this.gs.mD(true)};e.prototype.ar=function(e){var r=this.gs.ZI();var t=r.indoor;if(t&&t[e]){if(t[e][\"polygons\"]){this.gs.$F.remove(t[e][\"polygons\"])}if(t[e]&&t[e][\"markers\"]&&t[e][\"markers\"].length>0){this.a$.remove(t[e][\"markers\"])}}};e.prototype.h$=function(e){var r=this;if(!e||!e[\"properties\"]){return null}var t=e[\"properties\"][\"poitype\"];var i=e[\"position\"];var n=t.join(\"_\");var f=this.l$[n]&&this.l$[n][0];var a=this.gs.ZI();if(f&&f[\"styleOpts\"]&&f[\"styleOpts\"][\"iconId\"]){var s=f[\"styleOpts\"][\"iconId\"];var u=sf.GC(s);var o={position:i,zooms:e[\"zooms\"],opacity:a[\"opacity\"],rank:3e5,icon:{size:[18,18],image:u,anchor:\"center\"},extData:e[\"properties\"],innerOverlay:true,bubble:true};if(e[\"text\"]){var l=f[\"styleOpts\"][\"fillColor\"]||\"rgb(132,99,142)\";var v=f[\"styleOpts\"][\"strokeColor\"]||\"#FFFFFF\";o=uf(o,{text:{content:e[\"text\"],direction:\"bottom\",style:{fillColor:l,strokeColor:v,fontSize:12}}})}var c=new AMap[\"LabelMarker\"](o);c.on(\"click\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"click\",e)}});c.on(\"mousemove\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"mousemove\",e)}});c.on(\"mouseout\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"mousemove\",e)}});return c}return null};e.prototype.bi=function(e,r){var t=\"hotspot\";var i;var n=r.target.getExtData();switch(e){case\"click\":i=t+e;break;case\"mouseover\":i=t+\"over\";break;case\"mouseout\":i=t+\"out\";break}if(i){var f=this._map.getProjection();var a=f[\"unproject\"](r[\"lnglat\"][\"lng\"],r[\"lnglat\"][\"lat\"]),s=a[0],u=a[1];var o={type:i,id:n[\"pid\"],name:n[\"name\"],lnglat:r[\"lnglat\"],originEvent:r[\"originEvent\"]};this._map.emit(i,o)}};e.prototype.o$=function(e,r,t,i){var u=this;if(!this._map||!r){return false}var n=this.gs.ZI();this.ar(r);var f=this._map[\"getZoom\"]();var a=[];var s=[];var o=e[\"shops\"];var l=e[\"floor\"];var v=e[\"cons\"];var c={building_id:r,floor:l};var h=o.length;var d=[];var y=[];var m=[];var b=[];var p=[];for(var x=0;x<h;x++){var w=o[x];var k=w.properties,g=w.geometry;var M=uf({shop:{id:k[\"cpid\"],name:k[\"name\"]}},c);var I=\"#FFFFFF\";var S=\"#FE9A2E\";if(k&&k[\"regiontype\"]){var $=k[\"regiontype\"].join(\"_\");var A=this.l$[$]&&this.l$[$][0];if(A&&A[\"styleOpts\"]){I=A[\"styleOpts\"][\"fillColor\"];S=A[\"styleOpts\"][\"strokeColor\"]}}y.push(I);m.push(S);p.push(n[\"opacity\"]);b.push({indoorPolygon:true,indoorData:M,id:r});d.push(g.coordinates);if(k[\"zoom_min\"]&&k[\"zoom_max\"]&&k[\"font_anthor_point\"]){var _=k[\"font_anthor_point\"];var O={position:[_[0],_[1]],text:k[\"name\"],properties:k,zooms:[k[\"zoom_min\"],k[\"zoom_max\"]]};var j=this.h$(O);if(j){s.push(j)}}}var F=new AMap[\"Polygon\"]({bubble:true,path:d,innerOverlay:true,cursor:n[\"cursor\"],zooms:this.YI,async:true,fillColor:function(e){return y[e]},strokeColor:function(e){return m[e]},fillOpacity:function(e){return p[e]},strokeOpacity:n[\"opacity\"],strokeWeight:1,zIndex:n[\"zIndex\"]+2});F.on(\"click\",function(e){var r=b[e.vectorIndex];var t=r.id;if(u.e$){u.e$.show()}if(t){var i={centerId:t,changeFloor:true};u.gs.setRenderData(i);u.C2();u.gs.uD()}r[\"indoorData\"][\"ext\"]={type:\"polygon\",data:e};u.gs.emit(\"click\",r[\"indoorData\"])});F.on(\"mouseover\",function(e){for(var r=0,t=b.length;r<t;r++){var i=b[r];if(i[\"originFillOpacity\"]&&i[\"originFillColor\"]){y[r]=i[\"originFillColor\"];p[r]=i[\"originFillOpacity\"]}}var n=b[e.vectorIndex];var f=e.lnglat;n[\"originFillOpacity\"]=p[e.vectorIndex];n[\"originFillColor\"]=y[e.vectorIndex];y[e.vectorIndex]=\"#B45F04\";p[e.vectorIndex]=.4;if(n[\"indoorData\"]&&n[\"indoorData\"][\"shop\"]&&n[\"indoorData\"][\"shop\"][\"name\"]){var a=n[\"indoorData\"][\"shop\"][\"name\"];var s=\"<div style=\"+'\"padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;\">'+a+\"</div>\";u.JT=new AMap[\"Marker\"]({position:f,content:s,anchor:\"bottom-left\",map:u._map,noSelect:true})}F.to()});F.on(\"mouseout\",function(e){for(var r=0,t=b.length;r<t;r++){var i=b[r];if(i[\"originFillOpacity\"]&&i[\"originFillColor\"]){y[r]=i[\"originFillColor\"];p[r]=i[\"originFillOpacity\"]}}if(u.JT){u._map.remove(u.JT)}F.to()});a.push(F);var C=null;var T=[];if(l[\"geometry\"]&&l[\"geometry\"][\"coordinates\"]){var I=of[\"unHigh\"][\"fillColor\"];var S=of[\"unHigh\"][\"strokeColor\"];if(n[\"centerId\"]===r){S=of[\"high\"][\"strokeColor\"]}var L=l[\"geometry\"][\"coordinates\"];if(l[\"geometry\"][\"type\"]&&l[\"geometry\"][\"type\"]===\"MultiPolygon\"){if(L[0]&&L[0].length>1){var B=[];for(var R=0;R<L[0].length;R++){B.push(L[0][R])}L=B}}for(var E=0;E<L.length;E++){var N=new AMap[\"Polygon\"]({bubble:true,async:true,strokeWeight:3,innerOverlay:true,zooms:this.YI,path:L[E],fillColor:I,strokeColor:S,zIndex:n[\"zIndex\"]+1,fillOpacity:n[\"opacity\"],strokeOpacity:n[\"opacity\"],extData:{indoorPolygon:true,id:r}});C=true;N.on(\"click\",function(e){var r=e.target.getExtData();var t=r.id;if(u.e$){u.e$.show()}if(t){var i={centerId:t,changeFloor:true};u.gs.setRenderData(i)}u.C2();u.gs.uD()});T.push(N);a.push(N)}}if(n[\"showId\"]){this.gs.setRenderData({centerId:n[\"showId\"]})}this.gs.uD();this.gs.$F.add(a);if(!n[\"indoor\"][r]){n[\"indoor\"][r]={}}n[\"indoor\"][r][\"curFloor\"]=i;n[\"indoor\"][r][\"polygons\"]=a;n[\"indoor\"][r][\"outline\"]=T;if(t&&t[\"properties\"]&&t[\"properties\"][\"centerPoint\"]){n[\"indoor\"][r][\"buildingCenter\"]=t[\"properties\"][\"centerPoint\"]}if(n&&n[\"showId\"]===r&&C){if(n[\"animateState\"]!==\"undefined\"){this._map.setStatus({animateEnable:n[\"animateState\"]})}}var P=v.length;for(var z=0;z<P;z++){var D=v[z];var g=D.geometry,k=D.properties;var U=k.zoom_min,W=k.zoom_max;var O={properties:k,position:[g[\"coordinates\"][0],g[\"coordinates\"][1]],zooms:[U,W]};var j=this.h$(O);if(j){s.push(j)}}if(!this.f$){this._map.add(this.a$);this.gs.setRenderData({labelsLayer:this.a$});this.f$=true}n[\"indoor\"][r][\"markers\"]=s;if(typeof n[\"zIndex\"]!==\"undefined\"){this.a$.setzIndex(n[\"zIndex\"]+9)}this.a$.add(s);var G=this._map&&this._map[\"showLabel\"];if(n[\"showLabels\"]&&G){this.a$.show()}this.gs.KI(n);var H={status:0,id:r,building:{id:r}};if(t[\"properties\"]){var q=t[\"properties\"];H[\"building\"][\"name\"]=q[\"name_cn\"];H[\"building\"][\"lnglat\"]=q[\"centerPoint\"];H[\"building\"][\"floor\"]=i||1;H[\"building\"][\"floor_details\"]={floor_indexs:q[\"floor_indexs\"],floor_nonas:q[\"floor_nonas\"],floor_names:q[\"floor_names\"]};this.gs.setRenderData(H)}if(!n[\"complete\"]){n[\"complete\"]={}}if(!n[\"complete\"][r]){n[\"complete\"][r]={}}if(!n[\"complete\"][r][i]){this.gs.emit(\"floor_complete\",H);n[\"complete\"][r][i]=true}else if(this.pD){this.gs.emit(\"floor_complete\",H);this.pD=false}this.gs.setRenderData(n[\"complete\"])};return e}(On);var cf=function(){function e(){}e.prototype.destroy=function(){if(this.wo&&this.wo.parentNode){this.wo.parentNode.removeChild(this.wo)}};return e}();var hf=M[\"transform\"];var df=function(i){f(e,i);function e(e,r){var t=i.call(this)||this;t.Co={};t.bo=0;t.GT(e,r);return t}e.prototype.renderFrame=function(e,r,t,i,n,f){var a=n.map;var s=t.viewState;var u=f.getLayerConfig();var o=u.zooms||Ti;var l=s.boundsCoord;var v=[0,0];this.wo.style.zIndex=u.zIndex+\"\";this.wo.style.opacity=u.opacity+\"\";this.wo.style.visibility=u.visible?\"visible\":\"hidden\";if(this.bo!==s.zoom){this.xo()}if(r[\"tiles\"].length<=0){return}if(s.optimalZoom<o[0]||s.optimalZoom>o[1]){return}this.mo=[l[0],l[3]];var c=r[\"tiles\"]||[];this.ko(c);for(var h=0,d=c.length;h<d;h+=1){var y=c[h];for(var m=0,b=y.length;m<b;m+=1){var p=y[m];if(p.status===\"loaded\"){var x=p.Ro;v[0]=x[0]-this.mo[0];v[1]=x[3]-this.mo[1];var w={center:s.centerCoord,rotation:s.rotation,size:t.size,viewState:s};var k=hf[s.projectionId].yo(v[0],v[1],p.zo.z,w);if(p.data){var g=Math.pow(2,s.zoom-p.zo.z);var M=Math.ceil(256*g)+\"px\";var I=p.data;if(this.So.contains){if(this.So.contains(p.data)){var S=new Image;S.src=p.data.src;I=S}}else{if(p.data.parentNode===this.So){var S=new Image;S.src=p.data.src;I=S}}if(p.data.tagName===\"CANVAS\"){I=new Image;I.src=p.data.toDataURL()}this.Co[p.zo.key]=p;I.className=\"xyz-\"+p.zo.x+\"-\"+p.zo.y+\"-\"+p.zo.z;I.style.width=I.style.height=M;I.width=I.height=Math.ceil(256*g);I.style.left=Math.ceil(k[0]*g)+\"px\";I.style.top=Math.ceil(k[1]*g)+\"px\";if(this.Co[p.zo.key]&&this.bo===s.zoom){this.Co[p.zo.key].data=p.data;var S=this.wo.querySelector(\".xyz-\"+p.zo.x+\"-\"+p.zo.y+\"-\"+p.zo.z);if(S){this.wo.removeChild(S)}}this.So.appendChild(I)}}}}this.wo.appendChild(this.So);this.bo=s.zoom;return};e.prototype[\"getContainer\"]=function(){return this.wo};e.prototype.destroy=function(){if(this.wo&&this.wo.parentNode){this.wo.parentNode.removeChild(this.wo)}};e.prototype.GT=function(e,r){this.wo=document.createElement(\"div\");this.wo.className=\"amap-layer amap-layer-tile amap-\"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+\"\";this.wo.style.opacity=r.getLayerConfig().opacity+\"\";this.wo.style.visibility=r.getLayerConfig().visible?\"visible\":\"hidden\";this.So=document.createDocumentFragment();e.do.appendChild(this.wo)};e.prototype.xo=function(){this.wo.innerHTML=\"\";this.Co={}};e.prototype.ko=function(e){var r=Object.keys(this.Co);for(var t=0,i=r.length;t<i;t++){var n=r[t];var f=false;for(var a=0,s=e.length;a<s;a++){var u=e[a];for(var o=0,l=u.length;o<l;o++){if(u[o].zo.key===n){f=true;break}}}if(!f){var v=this.Co[n].zo;var c=this.wo.querySelector(\".xyz-\"+v.x+\"-\"+v.y+\"-\"+v.z);delete this.Co[n];if(c){this.wo.removeChild(c)}}}};return e}(cf);var yf=function(){function e(e){this.map=e}e.prototype.lS=function(e,r){var t=this.map.fS();var i=t.uS();var n={};for(var f in i){if(i.hasOwnProperty(f)){var a=i[f];var s=r.uo.getData(a.co(),r.viewState,this.context||null);n[f]=s}}t.cS(e,r,n)};return e}();var mf=function(i){f(e,i);function e(e,r){var t=i.call(this)||this;t.GT(e,r);return t}e.prototype.renderFrame=function(e,r,t,i,n,f){var a=n.map;var s=r.Ro;var u=f.getLayerConfig();this.wo.style.zIndex=u.zIndex+\"\";this.wo.style.opacity=u.opacity+\"\";this.wo.style.visibility=u.visible?\"visible\":\"hidden\";var o=a.coordToContainer([s[0],s[3]]);var l=a.coordToContainer([s[2],s[1]]);r.image.style.top=o[1]+\"px\";r.image.style.left=o[0]+\"px\";r.image.style.width=l[0]-o[0]+\"px\";r.image.style.height=l[1]-o[1]+\"px\";this.wo.appendChild(r.image);return};e.prototype[\"getContainer\"]=function(){return this.wo};e.prototype.GT=function(e,r){this.wo=document.createElement(\"div\");this.wo.className=\"amap-layer amap-layer-image amap-\"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+\"\";this.wo.style.opacity=r.getLayerConfig().opacity+\"\";this.wo.style.visibility=r.getLayerConfig().visible?\"visible\":\"hidden\";e.do.appendChild(this.wo)};e.prototype.xo=function(){this.wo.innerHTML=\"\"};return e}(cf);var bf=function(){function e(){this.vI={}}e[\"addListener\"]=function(e,r,t){e.on(r,t)};e[\"trigger\"]=function(e,r,t){e.emit(r,t)};e[\"clearListeners\"]=function(e,r){e.clearEvents(r)};e[\"addDomListener\"]=function(e,r,t){e.addEventListener(r,t)};e.extend=function(e,t,i){if(typeof e===\"string\"){e=[e]}Oi(e,function(r){t.on(r,function(e){i.emit(r,e)})})};e.prototype[\"on\"]=function(e,r,t,i){if(t===void 0){t=this}if(i===void 0){i=false}var n;if(!Array.isArray(e)){n=[e]}else{n=e}for(var f=0,a=n;f<a.length;f++){var s=a[f];this._on(s,r,t,i)}return this};e.prototype[\"off\"]=function(e,r,t){if(t===void 0){t=this}var i=this.vI;if(e in i){for(var n=0;n<i[e].length;n+=1){if(i[e][n].fn===r&&i[e][n].context===t){i[e].splice(n,1);return this}}}return this};e.prototype[\"hasEvents\"]=function(e,r,t){if(t===void 0){t=this}var i=this.vI;if(e&&r&&e in i){for(var n=0;n<i[e].length;n+=1){if(i[e][n].fn===r&&i[e][n].context===t){return true}}}return false};e.prototype[\"clearEvents\"]=function(e){if(e){if(this.vI[e]){delete this.vI[e]}}else{this.vI={}}return this};e.prototype[\"emit\"]=function(e,r){if(r===void 0){r={}}if(!(e in this.vI)){return this}var t=s(s({},r),{type:e});var i=this.vI[e];for(var n=0,f=i.length;n<f;n+=1){var a=i[n];if(!a.fn){continue}a.fn.call(a.context,t);if(a.once){this.vI[e].splice(n,1);n-=1;f-=1}}if(i.length===0){delete this.vI[e]}return this};e.prototype[\"getEvents\"]=function(){return this.vI};e.prototype[\"_on\"]=function(e,r,t,i){if(t===void 0){t=this}if(i===void 0){i=false}if(this.hasEvents(e,r,t)){return this}var n=this.vI;n[e]=n[e]||[];n[e].push({fn:r,context:t||this,once:i});return this};return e}();var pf={};var xf=function(){function e(e,r,t,i){this.project=r;this.unproject=t;this.getResolution=i;pf[e]=this}e.prototype.Sq=function(e,r,t){var i=this.getResolution(t);var n=r[0]*i;var f=r[1]*i;var a=this.project(e[0],e[1]);return this.unproject(a[0]+n,a[1]+f)};e.prototype.wq=function(e,r){var t=this.project(e[0],e[1]);var i=[t[0]+r[0],t[1]+r[1]];return this.unproject(i[0],i[1])};return e}();var wf={getProjection:function(e){return pf[e]}};var kf=function(){var e=function(e,r){return[e,r]};var r=function(e,r){return[e,r]};var t=function(e){return 180/256/Math.pow(2,e)};return new xf(\"EPSG:4326\",e,r,t)}();var gf=function(){var f=Math.PI/180;var n=180/Math.PI;var a=6378137;var s=85.0511287798;var e=function(e,r){var t=s;r=Math.max(Math.min(t,r),-t);var i=e*f;var n=r*f;n=Math.log(Math.tan(Math.PI/4+n/2));return[i*a,n*a]};var r=function(e,r){var t=e/a*n;var i=(2*Math.atan(Math.exp(r/a))-Math.PI/2)*n;return[t,i]};var t=function(e){return 20037508.342789244*2/256/Math.pow(2,e)};return new xf(\"EPSG:3857\",e,r,t)}();var Mf=function(){function e(e,r,t){if(t===void 0){t=false}this.className=\"AMap.Size\";if(isNaN(e)||isNaN(r)){throw new Error(\"Invalid Object: Pixel(\"+e+\", \"+r+\")\")}this[\"width\"]=t?Math.round(e):Number(e);this[\"height\"]=t?Math.round(r):Number(r)}e.prototype[\"getWidth\"]=function(){return this.width};e.prototype[\"getHeight\"]=function(){return this.height};e.prototype[\"toString\"]=function(){return this.width+\",\"+this.height};e.prototype[\"toArray\"]=function(){return[this.width,this.height]};return e}();var If=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}var i=Array.prototype.slice.call(arguments,1);var n;var f;var a;for(n=0,f=i.length;n<f;n=n+1){a=i[n]||{};for(var s in a){if(a.hasOwnProperty(s)){var u=a[s];if(typeof u!==\"function\"||!e.prototype){e[s]=u}else{e.prototype[s]=u}}}}return e};function Sf(){return typeof window!==\"undefined\"&&typeof document!==\"undefined\"}function $f(){try{if(typeof WebAssembly===\"object\"&&typeof WebAssembly.instantiate===\"function\"&&TextDecoder&&TextEncoder){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module){return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}}catch(e){}return false}var Af=function(e){var r=new Image;r.src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMw\"+\"AgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\";r.onload=r.onerror=function(){e(r.height===2)}};function _f(){try{var e=!!document;return false}catch(e){return true}}function Of(e){var r={runSupport:(new Date).getTime()};var t=false;var i=false;var n=false;var f=false;var a=false;var s=$f();var u=navigator.userAgent.toLowerCase();var o=function(e){return u.indexOf(e)!==-1};var l=true;var v=o(\"macintosh\");var c=o(\"ipad;\")||o(\"ipad \"),h=o(\"ipod touch;\"),d=o(\"iphone;\")||o(\"iphone \"),y=d||c||h,m=(v||y)&&o(\"safari\")&&o(\"version/\"),b=o(\"macwechat\"),p=o(\"windowswechat\");var x={YV:a,WV:v,Ue:t,g:f,$e:i,scale:1,HV:n,DW:_f(),AJ:s,safari:m,AQ:b,gQ:p,amapRunTime:r};if(Sf()){var w=window,k=document,g=k.documentElement,M=/([a-z0-9]*\\d+[a-z0-9]*)/,I=function(e){if(!e){return null}e=e.toLowerCase();var r=null;var t=e.match(/angle \\((.*)\\)/);if(t){e=t[1];e=e.replace(/\\s*direct3d.*$/,\"\")}e=e.replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\");if(e.indexOf(\"intel\")>=0){r=[\"Intel\"];if(0<=e.indexOf(\"mobile\")){r.push(\"Mobile\")}if(0<=e.indexOf(\"gma\")||0<=e.indexOf(\"graphics media accelerator\")){r.push(\"GMA\")}if(0<=e.indexOf(\"haswell\")){r.push(\"Haswell\")}else if(0<=e.indexOf(\"ivy\")){r.push(\"HD 4000\")}else if(0<=e.indexOf(\"sandy\")){r.push(\"HD 3000\")}else if(0<=e.indexOf(\"ironlake\")){r.push(\"HD\")}else{if(0<=e.indexOf(\"hd\")){r.push(\"HD\")}var i=e.match(M);if(i){r.push(i[1].toUpperCase())}}r=r.join(\" \");return r}if(e.indexOf(\"nvidia\")>=0||e.indexOf(\"quadro\")>=0||e.indexOf(\"geforce\")>=0||e.indexOf(\"nvs\")>=0){r=[\"nVidia\"];if(0<=e.indexOf(\"geforce\")){r.push(\"geForce\")}if(0<=e.indexOf(\"quadro\")){r.push(\"Quadro\")}if(0<=e.indexOf(\"nvs\")){r.push(\"NVS\")}if(e.match(/\\bion\\b/)){r.push(\"ION\")}if(e.match(/gtx\\b/)){r.push(\"GTX\")}else if(e.match(/gts\\b/)){r.push(\"GTS\")}else if(e.match(/gt\\b/)){r.push(\"GT\")}else if(e.match(/gs\\b/)){r.push(\"GS\")}else if(e.match(/ge\\b/)){r.push(\"GE\")}else if(e.match(/fx\\b/)){r.push(\"FX\")}var i=e.match(M);if(i){r.push(i[1].toUpperCase().replace(\"GS\",\"\"))}if(0<=e.indexOf(\"titan\")){r.push(\"TITAN\")}else if(0<=e.indexOf(\"ti\")){r.push(\"Ti\")}r=r.join(\" \");return r}if(e.indexOf(\"amd\")>=0||e.indexOf(\"ati\")>=0||e.indexOf(\"radeon\")>=0||e.indexOf(\"firegl\")>=0||e.indexOf(\"firepro\")>=0){r=[\"AMD\"];if(0<=e.indexOf(\"mobil\")){r.push(\"Mobility\")}var n=e.indexOf(\"radeon\");if(0<=n){r.push(\"Radeon\")}if(0<=e.indexOf(\"firepro\")){r.push(\"FirePro\")}else if(0<=e.indexOf(\"firegl\")){r.push(\"FireGL\")}if(0<=e.indexOf(\"hd\")){r.push(\"HD\")}if(n>=0){e=e.substring(n)}var i=e.match(M);if(i){r.push(i[1].toUpperCase().replace(\"HD\",\"\"))}r=r.join(\" \");return r}return e.substring(0,100)},S=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),$=\"ActiveXObject\"in w,A=window[\"detectRetina\"]==false?false:\"devicePixelRatio\"in w&&w[\"devicePixelRatio\"]>1||$&&\"matchMedia\"in w&&w.matchMedia(\"(min-resolution:144dpi)\")&&w.matchMedia(\"(min-resolution:144dpi)\").matches,_=o(\"windows nt\"),O=u.search(/windows nt [1-5]\\./)!==-1,j=u.search(/windows nt 5\\.[12]/)!==-1,F=o(\"windows nt 10\"),C=o(\"windows phone\"),T=o(\"Mb2345Browser\"),L=y&&u.search(/ os [456]_/)!==-1,B=y&&u.search(/ os [4-8]_/)!==-1,R=y&&u.search(/ os [78]_/)!==-1,E=y&&o(\"os 8_\"),N=y&&o(\"os 10_\"),P=o(\"android\");var z=0;if(P){z=parseInt(u.split(\"android\")[1])||0}var D=P&&z<4,U=P&&z>=5,W=U||u.search(/android 4.4/)!==-1,G=P?\"android\":y?\"ios\":_?\"windows\":v?\"mac\":\"other\",H=$&&!w[\"XMLHttpRequest\"],q=$&&!k.querySelector,V=$&&!k.addEventListener,X=$&&o(\"msie 9\"),J=$&&o(\"msie 10\"),Y=$&&o(\"rv:11\"),Z=V||X,K=o(\"edge\"),Q=o(\"qtweb\"),ee=o(\"ucbrowser\"),re=o(\"alipay\")||P&&ee,te=o(\"miuibrowser\"),ie=o(\"micromessenger\"),ne=o(\"dingtalk\"),fe=o(\"mqqbrowser\"),ae=o(\"baidubrowser\"),se=o(\"crios/\"),ue=o(\"chrome/\"),oe=(ue||se)&&o(\"chromium\"),le=!oe&&(ue&&parseInt(u.split(\"chrome/\")[1])>30||se&&parseInt(u.split(\"crios/\")[1])>30),ve=o(\"firefox\"),ce=ve&&parseInt(u.split(\"firefox/\")[1])>27,he=m&&parseInt(u.split(\"version/\")[1])>7,de=y&&o(\"aliapp\"),ye=P||y||C||o(\"mobile\"),me=\"ontouchstart\"in k,be=w[\"navigator\"]&&w[\"navigator\"][\"msPointerEnabled\"]&&!!w[\"navigator\"][\"msMaxTouchPoints\"],pe=w[\"navigator\"]&&!!w[\"navigator\"][\"maxTouchPoints\"],xe=!me&&(pe||be),we=me||xe,ke=function(){if(!ye){return w.devicePixelRatio||1}var e=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window){try{if(window.parent.location.origin===window.location.origin){e=window.parent.document.getElementsByTagName(\"meta\")}else{return 1}}catch(e){return 1}}for(var r=e.length-1;r>=0;r-=1){if(e[r].name===\"viewport\"){var t=e[r].content;var i=void 0,n=void 0,f=void 0;if(t.indexOf(\"initial-scale\")!==-1){i=parseFloat(t.split(\"initial-scale=\")[1])}if(t.indexOf(\"minimum-scale\")!==-1){n=parseFloat(t.split(\"minimum-scale=\")[1])}else{n=0}if(t.indexOf(\"maximum-scale\")!==-1){f=parseFloat(t.split(\"maximum-scale=\")[1])}else{f=Infinity}if(i){if(f>=n){if(i>f){return f}else if(i<n){return n}else{return i}}else{console&&console.log&&console.log(\"viewport参数不合法\");return null}}else{if(f>=n){if(n>=1){return 1}else{return Math.min(f,1)}}else{console&&console.log&&console.log(\"viewport参数不合法\");return null}}}}return undefined},ge=ke(),Me=A&&(!ye||!!ge&&ge>=1),Ie=$&&\"transition\"in g.style,Se=!!k.createElementNS&&!!k.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\")[\"createSVGRect\"],$e=k.createElement(\"canvas\"),Ae=!!($e&&$e.getContext),_e=window[\"URL\"]||window[\"webkitURL\"],Oe=false;var je=window[\"disableWorker\"]!==true&&!$&&!(ee&&P&&!le)&&window[\"Worker\"]&&_e&&_e[\"createObjectURL\"]&&window[\"Blob\"],Fe=\"\",Ce=\"\",Te=0,Le=window[\"higtQualityRender\"]==false?A?false:true:true,Be=window[\"movingDraw\"],Re=window[\"forceWebGL\"]?{alpha:true,antialias:Le,depth:true,stencil:true}:{alpha:true,antialias:Le,depth:true,stencil:true},Ee=function(){if(!Ae||!je){return false}var e=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"];var r=null;for(var t=0;t<e.length;t+=1){try{var i=Re;r=$e.getContext(e[t],i)}catch(e){}if(!r){continue}else{if(r.drawingBufferWidth!==$e.width||r.drawingBufferHeight!==$e.height){return false}if(!r.getShaderPrecisionFormat||!r.getParameter||!r.getExtension){return false}Te=r.getParameter(r.MAX_RENDERBUFFER_SIZE);var n=r.getParameter(r.MAX_VIEWPORT_DIMS);if(!n){return false}Te=Math.min(Te,n[0],n[1]);if(m&&G===\"mac\"){Te=Math.min(Te,4096)}var f=Math.max(screen.width,screen.height);if(Me){f*=Math.min(2,window.devicePixelRatio||1)}if(f>Te){return false}if(23>r.getShaderPrecisionFormat(35632,36338).precision||23>r.getShaderPrecisionFormat(35633,36338).precision){return false}Ce=r.getExtension(\"WEBGL_debug_renderer_info\")?r.getParameter(37446):null;var a=I(Ce);if(a){if(a.indexOf(\"google swiftshader\")>-1){l=false;return false}if(-1!==S.indexOf(a)){return false}}Fe=e[t];return true}}return false},Ne=Ee(),Pe=e[8]!==undefined?e[8]:true,ze=window[\"Uint8Array\"]&&Pe&&!window[\"forbidenWebGL\"]&&Ne&&(window[\"forceWebGL\"]||(le||ce||he||K||ie||ne)&&G!==\"other\"),De=window[\"forceWebGLBaseRender\"]?\"w\":ze?\"w\":\"d\",Ue=o(\"webkit\"),We=\"WebKitCSSMatrix\"in w&&\"m11\"in new window[\"WebKitCSSMatrix\"],Ge=\"MozPerspective\"in g.style,He=\"vV\"in g.style,qe=Ie||We||Ge||He,Ve=false,Xe=e[12]!==undefined?e[12]:null;var Je=true;try{if(typeof w.localStorage===\"undefined\"){Je=false}else{var Ye=(new Date).getTime()+\"\";w.localStorage.setItem(\"_test\",Ye);if(w.localStorage.getItem(\"_test\")!==Ye){Je=false}w.localStorage.removeItem(\"_test\")}}catch(e){Je=false}var Ze=function(e,r){var t={};If(t,Re);If(t,r);return e.getContext(Fe,t)};var Ke=parseInt(u.split(\"chrome/\")[1]);x={qV:c,KV:d,size:d?100:P?200:500,WV:v,ZV:_,JV:y,uT:N,HV:P,QV:D,cT:re,eq:G,rq:ae,nq:fe,safari:m,iq:ie,ie:$,aq:H,oq:q,sq:X,uq:J,xv:V,fT:Z,cq:Y,fq:K,hT:$&&!Y,lT:T,RL:Je,vT:Xe,geolocation:ye||$&&!V||K,SL:ee,uc:ee&&!ue,chrome:ue,gT:true,hq:ve,T2:l,$e:ye,lq:ye&&Ue,dq:ye&&We,vq:ye&&w.opera,Ue:A,bT:ge,Mr:Me,YV:we,gq:be,pq:pe,yT:xe,pT:ue&&Ke>=57,mT:!ye&&ue&&Ke>=64,g:Ue,bq:Ie,yq:We,mq:Ge,Tq:He,Mq:qe,Aq:Se,xq:Ae,Eb:je,TT:Ve,Tm:ze,AT:Fe,xT:Re,ST:Ce,wT:Te,MT:Oe,movingDraw:Be,baseRender:Pe?De:\"d\",scale:A?2:1,getContext:Ze,mH:false,AJ:s,amapRunTime:r,sY:Ee};Af(function(e){x.mH=e})}return x}var jf=Of(typeof config===\"undefined\"?[]:config);if(typeof createImageBitmap!==\"undefined\"&&typeof ImageBitmap!==\"undefined\"){jf.imageBitmap=true}var Ff=Boolean(jf.DW?!jf.safari&&!jf.AQ&&!jf.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!jf.safari&&!jf.AQ&&!jf.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));jf.LZ=Ff;jf[\"amapRunTime\"]={workerTime:{}};var Cf=function(){function t(e,r,t){if(t===void 0){t=false}this.className=\"AMap.Pixel\";if(isNaN(e)||isNaN(r)){throw new Error(\"Invalid Object: Pixel(\"+e+\", \"+r+\")\")}this[\"x\"]=t?Math.round(e):Number(e);this[\"y\"]=t?Math.round(r):Number(r)}t.prototype[\"getX\"]=function(){return this.x};t.prototype[\"round\"]=function(){return new t(Math.round(this.x),Math.round(this.y))};t.prototype[\"getY\"]=function(){return this.y};t.prototype[\"toString\"]=function(){return this.x+\",\"+this.y};t.prototype[\"equals\"]=function(e){if(!(e instanceof t)){return false}var r=Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y));return r<=1e-9};t.prototype[\"toArray\"]=function(){return[this.x,this.y]};t.prototype[\"subtract\"]=function(e,r){return new t(this.x-e.x,this.y-e.y,r)};t.prototype[\"multiplyBy\"]=function(e,r){return new t(this.x*e,this.y*e,r)};t.prototype[\"direction\"]=function(){var e=this.x;var r=this.y;if(e===0&&r===0){return null}if(e===0){return r>0?90:270}var t=Math.atan(r/e)*180/Math.PI;if(e<0&&r>0){return t+180}else if(e<0&&r<0){return t+180}else if(e>0&&r<0){return t+360}else{return t}};t.prototype.toJSON=function(){return[this.x,this.y]};return t}();var Tf=function(){var a={};var s=4;var l=.001;var u=1e-7;var o=10;var v=11;var c=1/(v-1);var h=typeof Float32Array===\"function\";function i(e,r){return 1-3*r+3*e}function n(e,r){return 3*r-6*e}function f(e){return 3*e}function d(e,r,t){return((i(r,t)*e+n(r,t))*e+f(r))*e}function y(e,r,t){return 3*i(r,t)*e*e+2*n(r,t)*e+f(r)}function m(e,r,t,i,n){var f,a,s=0;do{a=r+(t-r)/2;f=d(a,i,n)-e;if(f>0){t=a}else{r=a}}while(Math.abs(f)>u&&++s<o);return a}function b(e,r,t,i){for(var n=0;n<s;++n){var f=y(r,t,i);if(f===0){return r}var a=d(r,t,i)-e;r-=a/f}return r}function p(e){return e}return function(s,r,u,t){if(!(0<=s&&s<=1&&0<=u&&u<=1)){throw new Error(\"bezier x values must be in [0, 1] range\")}var e=arguments.toString();if(a[e]){return a[e]}if(s===r&&u===t){return p}var o=h?new Float32Array(v):new Array(v);for(var i=0;i<v;++i){o[i]=d(i*c,s,u)}function n(e){var r=0;var t=1;var i=v-1;for(;t!==i&&o[t]<=e;++t){r+=c}--t;var n=(e-o[t])/(o[t+1]-o[t]);var f=r+n*c;var a=y(f,s,u);if(a>=l){return b(e,f,s,u)}else if(a===0){return f}else{return m(e,r,r+c,s,u)}}var f=function(e){if(e===0){return 0}if(e===1){return 1}return d(n(e),r,t)};a[e]=f;return f}}();function Lf(e,r,t,i){if(e>=1){return i}var n=1-e;return n*n*r+2*n*e*t+e*e*i}function Bf(e,r,t,i,n){if(e>=1){return n}var f=3*(t.pos[0]-r.pos[0]),a=3*(i.pos[0]-t.pos[0])-f,s=n.pos[0]-r.pos[0]-f-a;var u=3*(t.pos[1]-r.pos[1]),o=3*(i.pos[1]-t.pos[1])-u,l=n.pos[1]-r.pos[1]-u-o;var v=s*Math.pow(e,3)+a*Math.pow(e,2)+f*e+r.pos[0];var c=l*Math.pow(e,3)+o*Math.pow(e,2)+u*e+r.pos[1];return wf.getProjection(\"EPSG:3857\").unproject(v,c)}function Rf(e,r,t,i){return wf.getProjection(\"EPSG:3857\").unproject(Lf(e,r.pos[0],t.pos[0],i.pos[0]),Lf(e,r.pos[1],t.pos[1],i.pos[1]))}function Ef(e,r){if(Array.isArray(r)){r=new Cf(r[0],r[1])}return e.ai(r,20)}function Nf(e,r){var t={tolerance:4,interpolateNumLimit:[3,300]};var i=t[\"tolerance\"],n=t[\"interpolateNumLimit\"];i=Math.max(2,i);var f=0,a=0;for(var s=0,u=e.length;s<u-1;s++){var o=e[s],l=e[s+1];f+=Math.abs(l.pos[0]-o.pos[0]);a+=Math.abs(l.pos[1]-o.pos[1])}return Math.min(n[1],Math.max(n[0],Math.round(Math.max(f,a)/r/i)))}function Pf(e,r){var t=null;switch(r.length){case 3:t=Rf;break;case 4:t=Bf;break;default:return null}var i=[];var n=[0].concat(r);for(var f=1;f<e-2;f++){n[0]=f/e;i.push(t.apply(null,n))}i.push(r[r.length-1]);return i}function zf(e,r,t,i){var n=null;if(e&&t&&t.length){var f=[e];f.push.apply(f,t);f.push(r);var a=f.length;var s=Nf(f,i);n=Pf(s,f)}return n||[r]}var Df={ag:Rf,ug:Bf,sg:Tf,xb:function(e,r){var t,i,n=[];for(t=0,i=e.length;t<i;t+=1){n.push.apply(n,zf(e[t-1],e[t],e[t][\"controlPoints\"],r))}return n},fg:function(e,r,t,i){var n=this.xb(e,r,t,i);var f=[];for(var a=0,s=n.length;a<s;a++){f.push(Ef(r,n[a]))}return f}};var Uf=function(){function e(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244];this.cg=128;this.vg=128;this.lg=(this.hg[2]-this.hg[0])/this.cg;this.dg=(this.hg[3]-this.hg[1])/this.vg}e.prototype.setMap=function(e){this.map=e};e.prototype.getSize=function(){return[this.lg,this.dg]};e.prototype.getNum=function(){return[this.cg,this.vg]};e.prototype.getLocalByLnglat=function(e){var r;var t=(r=wf.getProjection(\"EPSG:3857\")).project.apply(r,e);return this.getLocalByCoord(t)};e.prototype.getLocalByCoord=function(e){var r=Math.floor(e[0]/this.lg);var t=Math.floor(e[1]/this.dg);var i=this.getLocalCenterByXY(r,t);var n=[e[0]-i.center[0],e[1]-i.center[1]];return{Sa:n,x:r,y:t,center:i.center,Ro:i.Ro}};e.prototype.getLocalCenterByXY=function(e,r){var t={x:e,y:r,center:[0,0],Ro:[0,0,0,0]};t.center=[(e+.5)*this.lg,(r+.5)*this.dg];t.Ro=[e*this.lg,r*this.dg,(e+1)*this.lg,(r+1)*this.dg];return t};e.prototype.getDeltaCoord=function(e){var r=this.getLocalByCoord(e);return[e[0]-r.center[0],e[1]-r.center[1]]};return e}();var Wf=new Uf;var Gf;(function(e){e[\"LITE\"]=\"lite\";e[\"LEFT\"]=\"left\";e[\"ALL\"]=\"all\";e[\"NONE\"]=\"\"})(Gf||(Gf={}));var Hf={2:\"all\",3:\"all\",4:\"all\",5:\"all\",6:\"lite\",7:\"all\",8:\"lite\",9:\"all\",10:\"lite\",11:\"lite\",12:\"all\",13:\"all\",14:\"all\",15:\"lite\",16:\"lite\",17:\"all\",18:\"all\",19:\"all\",20:\"all\"};var qf={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",grey:\"#808080\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"};var Vf=function(){var u={CLASS_NAME:\"AMap.Util\",WorldAxesCenter:{x:0,y:0},Single:{},stamp:function(){var r=jf.DW===true;var t=1e5;var i=\"_amap_id\";return function(e){e[i]=r?++t:--t;return e[i]}}(),singlton:function(e){var r=c.Single;var t=r[e];if(!t){t=new e}return t},getOptimalZoom:function(e){return e<Math.floor(e)+.8?Math.floor(e):Math.ceil(e)},join:function(e,r){if(e.join){return e.join(r)}else{var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(i+\"=\"+(e[i]||\"\"))}}return t.join(r)}},getGuid:function(e,r){if(r===void 0){r=10}return(e||\"\")+Math.round(Math.random()*Math.pow(10,r))+\"_\"+(new Date).getTime()},uuid:function(){var a=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\");return function(e,r){if(e===void 0){e=0}if(r===void 0){r=62}var t=a;var i=[];var n;r=r||t.length;if(e){for(n=0;n<e;n++){i[n]=t[0|Math.random()*r]}}else{var f=void 0;i[8]=i[13]=i[18]=i[23]=\"-\";i[14]=\"4\";for(n=0;n<36;n++){if(!i[n]){f=0|Math.random()*16;i[n]=t[n===19?f&3|8:f]}}}return i.join(\"\")}}(),endsWith:function(e,r){if(e[\"endsWith\"]){return e[\"endsWith\"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)===r){return true}return false},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(r){r.startTime=new Date;r.jg=[];var t=(new Date).getTime();var i=function(){var e=(new Date).getTime();r.jg.push(e-t);t=e;r.id=c.requestAnimFrame(i)};r.id=c.requestAnimFrame(i)},cancel:function(e){if(e.id){c.cancelAnimFrame(e.id)}},stop:function(e){e.Ag=Date.now()-e.startTime;this.cancel(e);e.Mg=Math.round(1e3/(e.Ag/(e.jg.length+1)))}},kg:function(e,r,t,i,n){if(i===void 0){i=\"linear\"}if(n===void 0){n=false}if(e===r){return r}else{switch(i){case\"ease\":t=Df.sg(.25,.1,.25,1)(t);break;case\"ease-in\":t=Df.sg(.42,0,1,1)(t);break;case\"ease-out\":t=Df.sg(0,0,.58,1)(t);break;case\"ease-in-out\":t=Df.sg(.42,0,.58,1)(t);break}var f=e+(r-e)*t;if(n){f=f>>0}return f}},createObjectURL:function(e,r){if(r===void 0){r=\"text/javascript; charset=utf-8\"}var t=null;try{var i=zi[\"URL\"]||zi[\"webkitURL\"];t=i[\"createObjectURL\"](new Blob([e],{type:r}))}catch(e){t=null}return t},revokeObjectURL:function(e){try{var r=zi[\"URL\"]||zi[\"webkitURL\"];r[\"revokeObjectURL\"](e)}catch(e){}},Og:function(e){var r={};for(var t=0,i=e.length;t<i;t++){r[e[t]]=t}return r},EV:function(e,r){var t=Math.pow(2,r);var i=360/t;var n=180/t;var f=Math.floor(e[0]/i)+t/2;var a=t/2-Math.ceil(e[1]/n);return[f,a]},WY:function(e,r,t){if(t===void 0){t=false}var i=[e[0],e[3]];var n=[e[2],e[1]];var f=this.EV(i,r);var a=this.EV(n,r);var s=f[0];var u=f[1];var o=a[0];var l=a[1];if(t){return{ja:s,Fa:u,Oa:o,Ea:l,z:r}}this.Pa={ja:s,Fa:u,Oa:o,Ea:l,z:r};var v=[];for(var c=s;c<=o;c+=1){for(var h=u;h<=l;h+=1){v.push([r,c,h])}}return v},xg:function(e){var r={};if(c.is(e,\"object\")){for(var t in e){if(e.hasOwnProperty(t)){r[e[t]]=t}}}return r},Ig:function(e,r){if(r.length<5e4){e.push.apply(e,r);return}for(var t=0,i=r.length;t<i;t+=1){e.push(r[t])}},clone:function(e){if(typeof e===\"object\"&&e!==null){if(e.Tg||this.is(e,\"Float32Array\")||this.is(e,\"Uint16Array\")){return e}else{var r=this.isArray(e)?[]:{};for(var t in e){if(e.hasOwnProperty(t)){r[t]=c.clone(e[t])}}return r}}else{return e}},isInteger:function(e){return(e|0)===e},vB:function(e){return!isNaN(e)},setPrototypeOf:function(){if(typeof Object[\"setPrototypeOf\"]===\"function\"){return Object[\"setPrototypeOf\"]}else{return function(e,r){for(var t in r){e[t]=r[t]}}}}(),isFunction:function(e){return typeof e===\"function\"},_g:function(e,r){if(r===void 0){r=\"webgl\"}if(!e){return e}var t=[];for(var i=0,n=e.length;i<n;i+=2){var f=parseInt(e.substr(i,2),16);if(r===\"webgl\"||r===\"rgba\"&&i===0){f=this.format(f/255,3)}t.push(f)}t.push(t.shift());return t},Sg:function(){},keys:function(){if(typeof Object.keys===\"function\"){return Object.keys}else{return function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}}return r}}}(),map:function(i,n,f){if(f===void 0){f=null}var a=[];if(i&&i.length){c.Cg(i,function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var t=e[1];a[t]=n.apply(f||i,e)})}else{return i}return a},forEach:function(e,r){if(e&&e.length){var t=e.length;if(t>0){r(e[0],0);if(t>1){r(e[1],1);for(var i=2;i<t;i++){r(e[i],i)}}}}},Cg:function(e,r,t){if(t===void 0){t=null}if(e&&e.length){for(var i=0,n=e.length;i<n;i++){if(r.call(t,e[i],i,e)===false){break}}}},find:function(e,r,t){if(t===void 0){t=null}for(var i=0,n=e.length;i<n;i++){if(typeof r===\"function\"){if(r.call(t,e[i],i,e)){return e[i]}}else{if(e[i]===r){return e[i]}}}return null},isDOM:function(e){if(typeof HTMLElement===\"object\"){return e instanceof HTMLElement}else{return e&&typeof e===\"object\"&&e.nodeType===1&&typeof e.nodeName===\"string\"}},Eg:function(e,r){var t=\"ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM\";r=r||\"v5\";var i,n;if(r>\"v5\"){i=t.length;n=512}else{i=27;t=t.substr(0,27);n=333}var f,a,s,u,o;a=[];s=NaN;for(u=0,o=e.length;u<o;u++){f=e[u];f=t.indexOf(f);if(isNaN(s)){s=f*i}else{a.push(s+f-n);s=NaN}}return a},Ng:function(e,r){var t=1;if(r.length>512){t=Math.round(Math.pow(r.length,.5))}else{t=r.length}var i=Math.ceil(r.length/t);for(var n=0;n<i;n+=1){var f=t*n;var a=f+t;if(a>r.length){a=r.length}for(var s=f;s<a;s+=1){e(r[s])}}},Lg:function(e){if(/^rgba\\(/.test(e)){return this.Dg(e)}else{var r=this.colorNameToHex(e);var t=r;if(r[0]===\"#\"){r=r.substring(1);if(r.length===3){r=r.replace(/./g,function(e){return e+e})}t=this.argbHex2Rgba(r.length===8?r:\"ff\"+r)}return this.Dg(t)}},colorNameToHex:function(e){if(e===void 0){e=\"\"}e=e.toLowerCase();if(typeof e===\"string\"){if(qf[e]){return qf[e]}else{return e}}else{return e}},Rg:function(e,r,t){var i,n,f,a,s,u;a=Math.floor(t/2);f=t-a;i=(1<<a)-1<<f;n=(1<<f)-1;u=r&i|e&n;s=e&i|r&n;return[t,s,u]},Pg:function(e){if(e){return encodeURIComponent(e)}return\"\"},getStyle:function(e,r,t,i){var n,f,a;a=e[r][\"i\"][t];if(typeof a===\"undefined\"){return null}f=e[r][\"s\"];if(typeof a===\"number\"){return f[a]}while(typeof a[i.toString()]===\"undefined\"){i-=1;if(i<3){break}}n=a[i.toString()];if(typeof n===\"number\"){return f[n]}else{return null}},Dg:function(e){var r=e.split(\",\");r[0]=parseFloat(r[0].split(\"rgba(\")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;r[3]=parseFloat(r[3]);return r},Ug:function(e){var r=e.split(\",\");r[0]=parseFloat(r[0].split(\"rgb(\")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;return r},Bg:function(e){return\"rgba(\"+e[0]*255+\",\"+e[1]*255+\",\"+e[2]*255+\",\"+e[3]+\")\"},color2Rgba:function(e){return this.Bg(this.color2RgbaArray(e))},color2RgbaArray:function(e){if(e instanceof Array){if(e.length==3){e.push(1)}return e}var r=this.colorNameToHex(e);if(r.indexOf(\"rgb(\")==0){var t=this.Ug(r);t.push(1);return t}else if(r.indexOf(\"rgba(\")==0){return this.Dg(r)}else if(r.indexOf(\"#\")==0){if(r.length===4){var i=r.substr(1);var n=i.replace(/./g,function(e){return e+e});return this.zg(n)}else if(r.length==7){return this.zg(r.substr(1))}else if(r.length==9){var f=r.substr(1);return this.qg(f)}}else if(r.indexOf(\"hsla\")===0){var a=e.substr(5).split(\",\");var s=parseInt(a[0],10)/360;var u=parseInt(a[1],10)/100;var o=parseInt(a[2],10)/100;var l=parseFloat(a[3]);return this.GQ(s,u,o,l)}else if(r.indexOf(\"hsl\")===0){var a=e.substr(4).split(\",\");var s=parseInt(a[0],10)/360;var u=parseInt(a[1],10)/100;var o=parseInt(a[2],10)/100;return this.GQ(s,u,o,1)}else{if(r.length===3){var n=r.replace(/./g,function(e){return e+e});return this.zg(n)}else if(r.length==6){return this.zg(r)}else if(r.length==8){return this.qg(r)}}},GQ:function(e,r,t,i){var n;var f;var a;if(r===0){n=f=a=t}else{var s=t<.5?t*(1+r):t+r-t*r;var u=2*t-s;n=this.uQ(u,s,e+1/3);f=this.uQ(u,s,e);a=this.uQ(u,s,e-1/3)}return[n,f,a,i]},uQ:function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e},rgbHex2Rgba:function(e){if(e.startsWith(\"#\")){e=e.slice(1)}return c.argbHex2Rgba(\"ff\"+e)},argbHex2Rgba:function(e){if(e.startsWith(\"#\")){e=e.slice(1)}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push((r.shift()/255).toFixed(2));return\"rgba(\"+r.join(\",\")+\")\"},Opacity2Rgba:function(e,r){var t=r;if(r&&r[3]&&e){r[3]=Math.floor(255*e)}return t},Hex2Rgba:function(e){if(typeof e!==\"string\"){return false}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(parseInt(r.shift()));return r},zg:function(e){return this.uE(e+\"ff\")},qg:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16)/255)}r.push(r.shift());return r},uE:function(e){var r=parseInt(e,16);var t=[(r>>24&255)/255,(r>>16&255)/255,(r>>8&255)/255,(r&255)/255];return t},isEmpty:function(e){for(var r in e){if(e.hasOwnProperty(r)){return false}}return true},Wg:function(e,r){if(r>=0){e.splice(r,1)}return e},startsWith:function(e,r){if(e[\"startsWith\"]){return e[\"startsWith\"](r)}else{return e.substr(0,r.length)===r}},deleteItemFromArray:function(e,r){var t=c.indexOf(e,r);return c.Wg(e,t)},deleteItemFromArrayByIndex:function(e,r){return c.Wg(e,r)},filter:function(e,t,i){var n=[];c.Cg(e,function(e,r){if(t.call(i,e,r)){n.push(e)}});return n},indexOf:function(e,r){if(!e||!e.length){return-1}if(e[\"indexOf\"]){return e[\"indexOf\"](r)}else{for(var t=0;t<e.length;t+=1){if(e[t]===r){return t}}return-1}},Gg:function(e,r){if(e[\"endsWith\"]){return e[\"endsWith\"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)==r){return true}return false},bind:function(){var i=false;if(Boolean(Function.prototype.bind)){i=true}return function(e,r){var t=arguments.length>2?Array.prototype.slice.call(arguments,2):null;if(i){if(t){t.unshift(r);return e.bind.apply(e,t)}else{return e.bind(r)}}else{return function(){return e.apply(r,t||arguments)}}}}(),setOptions:function(e,r){r=r||{};e.opts=Ar({},e.opts,r);return e.opts},yn:function(e,r,t){return typeof r==\"function\"?this.Hg(e,true,this.Vg(r,t,1)):this.Hg(e,true)},Hg:function(t,i,n,e,r,f,a){var s;if(n){s=r?n(t,e,r):n(t)}if(s!==undefined){return s}if(!this.$g(t)){return t}var u=this.isArray(t);if(u){s=this.Yg(t);if(!i){return this.Kg(t,s)}}else{var o=Object.prototype.toString.call(t),l=o==\"[object Function]\";if(o==\"[object Object]\"||o==\"[object Arguments]\"||l&&!r){s=this.Xg(l?{}:t);if(!i){return this.baseAssign(s,t)}}else{return r?t:{}}}f||(f=[]);a||(a=[]);var v=f.length;while(v--){if(f[v]==t){return a[v]}}f.push(t);a.push(s);(u?this.Zg:this.Qg)(t,function(e,r){s[r]=c.Hg(e,i,n,r,t,f,a)});return s},baseAssign:function(e,r){return r==null?e:this.tM(r,Object.keys(r),e)},$g:function(e){var r=typeof e;return!!e&&(r==\"object\"||r==\"function\")},rM:function(e){return!!e&&typeof e==\"object\"},nM:function(e){return typeof e==\"number\"&&e>-1&&e%1==0&&e<=9007199254740991},Yg:function(e){var r=e.length,t=new Array(r);if(r&&typeof e[0]==\"string\"&&Object.hasOwnProperty.call(e,\"index\")){t.index=e.index;t.input=e.input}return t},Kg:function(e,r){var t=-1,i=e.length;r||(r=Array(i));while(++t<i){r[t]=e[t]}return r},Xg:function(e){var r=e.constructor;if(!(typeof r==\"function\"&&r instanceof r)){r=Object}return new r},Vg:function(f,a,e){if(typeof f!=\"function\"){return this.identity}if(a===undefined){return f}switch(e){case 1:return function(e){return f.call(a,e)};case 3:return function(e,r,t){return f.call(a,e,r,t)};case 4:return function(e,r,t,i){return f.call(a,e,r,t,i)};case 5:return function(e,r,t,i,n){return f.call(a,e,r,t,i,n)}}return function(){return f.apply(a,arguments)}},Zg:function(e,r){var t=-1,i=e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e},identity:function(e){return e},iM:function(u){return function(e,r,t){var i=c.eM(e),n=t(e),f=n.length,a=u?f:-1;while(u?a--:++a<f){var s=n[a];if(r(i[s],s,i)===false){break}}return e}},Qg:function(e,r){var t=c.iM();return t(e,r,Object.keys)},eM:function(e){return c.$g(e)?e:Object(e)},tM:function(e,r,t){t||(t={});var i=-1,n=r.length;while(++i<n){var f=r[i];t[f]=e[f]}return t},oM:function(){return false},aM:\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\",uM:function(){return Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}}(),sM:function(e,r,t,i){var n;if(i){var f=0,a,s=this.uM;n=function(){a=s();if(a-f<r){return false}f=a;e.apply(t,arguments)}}else{var u,o,l;l=function(){u=false;if(o){n.apply(t,o);o=false}};n=function(){if(u){o=arguments}else{u=true;e.apply(t,arguments);setTimeout(l,r)}}}return n},format:function(e,r){if(e===e<<0){return e}return+parseFloat(e+\"\").toFixed(r||0)},isArray:function(){if(Array.isArray){return Array.isArray}else{return function(e){return this.is(e,\"array\")}}}(),is:function(e,r){return Object.prototype.toString.call(e).split(\" \")[1].slice(0,-1).toLowerCase()===r.toLowerCase()},includes:function(){if(typeof Array.prototype.includes===\"function\"){return function(e,r){return e.includes(r)}}else{return function(e,r){return this.indexOf(e,r)!==-1}}}(),fM:function(e){var r=0;if(e.length===0){return r}var t;for(var i=0,n=e.length;i<n;i+=1){t=e.charCodeAt(i);r=(r<<5)-r+t;r=r&r}return r},hM:function(e,r){r=r?Math.ceil(parseInt(r.substr(6))/24):1;var t=\"\";for(var i=0,n=e.length;i<n;i++){t+=String.fromCharCode((e.charCodeAt(i)-256-r+65535)%65535)}return t},cM:function(e,r){var t=(e+\"\").slice(-2);var i=(r+\"\").slice(-2);e=e.slice(0,-2);r=r.slice(0,-2);var n=parseInt((i+t).slice(1));var f=Math.ceil(n/250)%2?1:-1;var a=n/500>1?1:-1;var s=parseInt(\"1\"+t)/3e3;var u=parseInt(\"1\"+i)/3e3;e-=s*f;r-=u*a;return new ha(parseFloat(e).toFixed(5),parseFloat(r).toFixed(5))},vM:function(e){if(typeof JSON!==\"undefined\"&&JSON.stringify){return c.fM(JSON.stringify(e))}return null},lM:function(e,r){var t=\"_amap_hash\";if(r||!e.hasOwnProperty(t)){var i=c.vM(e);if(i){e[t]=i}}return e[t]},parseLngLatData:function(e){if(c.isArray(e)){if(c.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=c.parseLngLatData(e[r])}}else{var t=typeof e[0];if(t===\"string\"||t===\"number\"){return new ha(e[0],e[1])}else{return e}}}return e},dM:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=1){r[t]=[e[t].x,e[t].y]}return r},bM:function(e){if(c.isArray(e)){return new Mf(e[0],e[1])}return e},hp:function(e,r){var t=[0,0];var i=c.getOptimalZoom(r.viewState.zoom);if(e&&i>=Ci){var n=Wf.getSize();var f=r.viewState.centerCoord;var a=Wf.getLocalByCoord([f[0],f[1]]);var s=e.x-a.x;var u=e.y-a.y;if(s!==0){s*=n[0];t[0]=s}if(u!==0){u*=n[1];t[1]=u}}else if(e){t[0]+=e.center[0];t[1]+=e.center[1]}return t},dS:function(e,r){return e>=r[0]&&e<=r[1]},kD:function(e,r,t){if(e===void 0){e=\"\"}if(t===void 0){t=false}var i=e.split(\",\")[0]||\"\";if(t){return\"all\"}if(i&&r){return Hf[r]||\"all\"}return\"all\"},VF:function(e,r,t){if(t===void 0){t=false}if(t){return\"all\"}if(e&&r){return Hf[r]||\"all\"}return\"all\"},LD:function(e,r){var t=false;if(!e||!r){return t}var i=this.iN(e);var n=this.iN(r);return i>=n},SD:function(e){if(e===void 0){e=\"all\"}var r;switch(e){case\"lite\":{r=0;break}case\"left\":{r=1;break}case\"all\":default:{r=2}}return r},pW:function(e){if(e===void 0){e=2}var r;switch(e){case 0:{r=Gf.LITE;break}case 1:{r=Gf.LEFT;break}case 2:default:{r=Gf.ALL}}return r},iN:function(e){var r=0;switch(e){case\"lite\":{r=0;break}case\"left\":{r=1;break}case\"all\":{r=2;break}}return r}};(function(){var i=0;function e(e){var r=+new Date,t=Math.max(0,(jf.HV?50:20)-(r-i));i=r+t;return zi.setTimeout(e,50)}var r=function(e){zi.clearTimeout(e)};if(jf.DW){var n=e;var t=r;u[\"requestAnimFrame\"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return n(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};u[\"cancelAnimFrame\"]=function(e){if(e){t.call(zi,e)}};return}function f(e){var r,t,i=[\"webkit\",\"moz\",\"o\",\"ms\"];for(r=0;r<i.length&&!t;r+=1){t=zi[i[r]+e]}return t}var a=zi.requestAnimationFrame||f(\"RequestAnimationFrame\")||e;var s=zi.cancelAnimationFrame||f(\"CancelAnimationFrame\")||f(\"CancelRequestAnimationFrame\")||r;u[\"requestAnimFrame\"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return a(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};u[\"cancelAnimFrame\"]=function(e){if(e){s.call(zi,e)}}})();(function(){if(jf.DW){return}u[\"requestIdleCallback\"]=zi[\"requestIdleCallback\"]?function(e,r){return zi[\"requestIdleCallback\"](e,r)}:function(e,r){if(r===void 0){r={}}var t=c.uM();return setTimeout(function(){e({didTimeout:false,timeRemaining:function(){return Math.max(0,70-(c.uM()-t))}})},r.timeout||0)};u[\"cancelIdleCallback\"]=zi[\"cancelIdleCallback\"]?function(e){return zi[\"cancelIdleCallback\"](e)}:function(e){clearTimeout(e)}})();var c=u;return c}();function Xf(e){return e&&e.className===\"AMap.LngLat\"}function Jf(e){var r=+e;return typeof+r===\"number\"&&!isNaN(r)}function Yf(e){return Array.isArray(e)&&Jf(e[0])}function Zf(e){if(Array.isArray(e)){if(Array.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=Zf(e[r])}}else{var t=typeof e[0];if(t===\"string\"||t===\"number\"){return new ha(e[0],e[1])}else{return e}}}return e}var Kf={lr:function(e,r){var t=Infinity;for(var i=0,n=1,f=r.length;n<f;i=n,n+=1){t=Math.min(t,this.ur(e,[r[i],r[n]]))}return Math.sqrt(t)},ur:function(e,r){return this.cr(e,this.closestOnSegment(e,r))},cr:function(e,r){var t=e[0]-r[0];var i=e[1]-r[1];return t*t+i*i},pr:function(e,r,t,i){i=i||1e-6;if(t[0]===r[0]){var n=Math.min(r[1],t[1]);var f=Math.max(r[1],t[1]);return Math.abs(e[0]-t[0])<i&&e[1]>=n&&e[1]<=f}var a=Math.min(r[0],t[0]);var s=Math.max(r[0],t[0]);var u=(t[1]-r[1])/(t[0]-r[0])*(e[0]-r[0])+r[1];return Math.abs(u-e[1])<i&&e[0]>=a&&e[0]<=s},closestOnSegment:function(e,r){var t=e[0];var i=e[1];var n=r[0];var f=r[1];var a=n[0];var s=n[1];var u=f[0];var o=f[1];var l=u-a;var v=o-s;var c=l===0&&v===0?0:(l*(t-a)+v*(i-s))/(l*l+v*v||0);var h;var d;if(c<=0){h=a;d=s}else if(c>=1){h=u;d=o}else{h=a+c*l;d=s+c*v}return[h,d]},isClockwise:function(e){var r=e.length;var t=0;var i=e[r-1];var n=i[0];var f=i[1];var a;var s;var u;for(var o=0;o<r;o+=1){u=e[o];a=u[0];s=u[1];t+=(a-n)*(s+f);n=a;f=s}return t>0},ss:function(e,r,t){var i=e[0];var n=e[1];var f=false;var a;var s;var u;var o;var l=r.length;for(var v=0,c=l-1;v<l;c=v,v+=1){var h=false;a=r[v][0];s=r[v][1];u=r[c][0];o=r[c][1];if(a===i&&s===n||u===i&&o===n){return t?true:false}if(s<n===o>=n){var d=(u-a)*(n-s)/(o-s)+a;if(i===d){return t?true:false}else{h=i<d}}if(h){f=!f}}return f},dr:function(e,r){var t=function(e,r,t){return(t[0]-r[0])*(e[1]-r[1])>(t[1]-r[1])*(e[0]-r[0])};var i=function(e,r,t,i){var n=[e[0]-r[0],e[1]-r[1]],f=[t[0]-i[0],t[1]-i[1]],a=e[0]*r[1]-e[1]*r[0],s=t[0]*i[1]-t[1]*i[0],u=1/(n[0]*f[1]-n[1]*f[0]);return[(a*f[0]-s*n[0])*u,(a*f[1]-s*n[1])*u]};var n,f,a,s;var u=e;n=r[r.length-2];for(var o=0,l=r.length-1;o<l;o++){f=r[o];var v=u;u=[];a=v[v.length-1];for(var c=0,h=v.length;c<h;c++){s=v[c];if(t(s,n,f)){if(!t(a,n,f)){u.push(i(n,f,a,s))}u.push(s)}else if(t(a,n,f)){u.push(i(n,f,a,s))}a=s}n=f}if(u.length<3){return[]}u.push(u[0]);return u}};var Qf=typeof globalThis!==\"undefined\"?globalThis:typeof window!==\"undefined\"?window:typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:{};function ea(e){return e&&e.gP&&Object.prototype.hasOwnProperty.call(e,\"default\")?e[\"default\"]:e}function ra(e,r){return r={exports:{}},e(r,r.exports),r.exports}var ta=ra(function(e,t){(function(e,r){r(t)})(Qf,function(e){function i(e,r){return e>r?1:e<r?-1:0}var m=function e(r,t){if(r===void 0)r=i;if(t===void 0)t=false;this.bP=r;this.yP=null;this._size=0;this.mP=!!t};var r={size:{configurable:true}};m.prototype.TP=function e(r){var t=r.right;if(t){r.right=t.left;if(t.left){t.left.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.left=r}r.parent=t};m.prototype.wP=function e(r){var t=r.left;if(t){r.left=t.right;if(t.right){t.right.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.right=r}r.parent=t};m.prototype.AP=function e(r){while(r.parent){var t=r.parent;if(!t.parent){if(t.left===r){this.wP(t)}else{this.TP(t)}}else if(t.left===r&&t.parent.left===t){this.wP(t.parent);this.wP(t)}else if(t.right===r&&t.parent.right===t){this.TP(t.parent);this.TP(t)}else if(t.left===r&&t.parent.right===t){this.wP(t);this.TP(t)}else{this.TP(t);this.wP(t)}}};m.prototype.xP=function e(r){var t,i,n,f,a;while(r.parent){t=r.parent;i=t.parent;if(i&&i.parent){n=i.parent;if(n.left===i){n.left=r}else{n.right=r}r.parent=n}else{r.parent=null;this.yP=r}f=r.left;a=r.right;if(r===t.left){if(i){if(i.left===t){if(t.right){i.left=t.right;i.left.parent=i}else{i.left=null}t.right=i;i.parent=t}else{if(f){i.right=f;f.parent=i}else{i.right=null}r.left=i;i.parent=r}}if(a){t.left=a;a.parent=t}else{t.left=null}r.right=t;t.parent=r}else{if(i){if(i.right===t){if(t.left){i.right=t.left;i.right.parent=i}else{i.right=null}t.left=i;i.parent=t}else{if(a){i.left=a;a.parent=i}else{i.left=null}r.right=i;i.parent=r}}if(f){t.right=f;f.parent=t}else{t.right=null}r.left=t;t.parent=r}}};m.prototype.replace=function e(r,t){if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.parent=r.parent}};m.prototype.MP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.left){r=r.left}}return r};m.prototype.SP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.right){r=r.right}}return r};m.prototype.Xc=function e(r,t){var i=this.yP;var n=null;var f=this.bP;var a;if(this.mP){while(i){n=i;a=f(i.key,r);if(a===0){return}else if(f(i.key,r)<0){i=i.right}else{i=i.left}}}else{while(i){n=i;if(f(i.key,r)<0){i=i.right}else{i=i.left}}}i={key:r,data:t,left:null,right:null,parent:n};if(!n){this.yP=i}else if(f(n.key,i.key)<0){n.right=i}else{n.left=i}this.xP(i);this._size++;return i};m.prototype.find=function e(r){var t=this.yP;var i=this.bP;while(t){var n=i(t.key,r);if(n<0){t=t.right}else if(n>0){t=t.left}else{return t}}return null};m.prototype.contains=function e(r){var t=this.yP;var i=this.bP;while(t){var n=i(r,t.key);if(n===0){return true}else if(n<0){t=t.left}else{t=t.right}}return false};m.prototype.remove=function e(r){var t=this.find(r);if(!t){return false}this.xP(t);if(!t.left){this.replace(t,t.right)}else if(!t.right){this.replace(t,t.left)}else{var i=this.MP(t.right);if(i.parent!==t){this.replace(i,i.right);i.right=t.right;i.right.parent=i}this.replace(t,i);i.left=t.left;i.left.parent=i}this._size--;return true};m.prototype.removeNode=function e(r){if(!r){return false}this.xP(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var t=this.MP(r.right);if(t.parent!==r){this.replace(t,t.right);t.right=r.right;t.right.parent=t}this.replace(r,t);t.left=r.left;t.left.parent=t}this._size--;return true};m.prototype.$P=function e(r){var t=this.find(r);if(!t){return}this.xP(t);var i=t.left;var n=t.right;var f=null;if(i){i.parent=null;f=this.SP(i);this.xP(f);this.yP=f}if(n){if(i){f.right=n}else{this.yP=n}n.parent=f}this._size--};m.prototype.pop=function e(){var r=this.yP,t=null;if(r){while(r.left){r=r.left}t={key:r.key,data:r.data};this.remove(r.key)}return t};m.prototype.next=function e(r){var t=r;if(t){if(t.right){t=t.right;while(t&&t.left){t=t.left}}else{t=r.parent;while(t&&t.right===r){r=t;t=t.parent}}}return t};m.prototype.NM=function e(r){var t=r;if(t){if(t.left){t=t.left;while(t&&t.right){t=t.right}}else{t=r.parent;while(t&&t.left===r){r=t;t=t.parent}}}return t};m.prototype.forEach=function e(r){var t=this.yP;var i=[],n=false,f=0;while(!n){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();r(t,f++);t=t.right}else{n=true}}}return this};m.prototype.range=function e(r,t,i,n){var f=[];var a=this.bP;var s=this.yP,u;while(f.length!==0||s){if(s){f.push(s);s=s.left}else{s=f.pop();u=a(s.key,t);if(u>0){break}else if(a(s.key,r)>=0){if(i.call(n,s)){return this}}s=s.right}}return this};m.prototype.keys=function e(){var r=this.yP;var t=[],i=[],n=false;while(!n){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.key);r=r.right}else{n=true}}}return i};m.prototype.values=function e(){var r=this.yP;var t=[],i=[],n=false;while(!n){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.data);r=r.right}else{n=true}}}return i};m.prototype.at=function e(r){var t=this.yP;var i=[],n=false,f=0;while(!n){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();if(f===r){return t}f++;t=t.right}else{n=true}}}return null};m.prototype.load=function e(r,t,i){if(r===void 0)r=[];if(t===void 0)t=[];if(i===void 0)i=false;if(this._size!==0){throw new Error(\"bulk-load: tree is not empty\")}var n=r.length;if(i){o(r,t,0,n-1,this.bP)}this.yP=l(null,r,t,0,n);this._size=n;return this};m.prototype.min=function e(){var r=this.MP(this.yP);if(r){return r.key}else{return null}};m.prototype.max=function e(){var r=this.SP(this.yP);if(r){return r.key}else{return null}};m.prototype.isEmpty=function e(){return this.yP===null};r.size.get=function(){return this._size};m.LP=function e(r,t,i,n,f){return new m(i,f).load(r,t,n)};Object.defineProperties(m.prototype,r);function l(e,r,t,i,n){var f=n-i;if(f>0){var a=i+Math.floor(f/2);var s=r[a];var u=t[a];var o={key:s,data:u,parent:e};o.left=l(o,r,t,i,a);o.right=l(o,r,t,a+1,n);return o}return null}function o(e,r,t,i,n){if(t>=i){return}var f=e[t+i>>1];var a=t-1;var s=i+1;while(true){do{a++}while(n(e[a],f)<0);do{s--}while(n(e[s],f)>0);if(a>=s){break}var u=e[a];e[a]=e[s];e[s]=u;u=r[a];r[a]=r[s];r[s]=u}o(e,r,t,s,n);o(e,r,s+1,i,n)}var a=0;var u=1;var v=2;var c=3;var b=0;var s=1;var p=2;var h=3;function x(e,r,t){if(r===null){e.PP=false;e.OP=true}else{if(e._P===r._P){e.PP=!r.PP;e.OP=r.OP}else{e.PP=!r.OP;e.OP=r.NP()?!r.PP:r.PP}if(r){e.CP=!n(r,t)||r.NP()?r.CP:r}}var i=n(e,t);if(i){e.hN=f(e,t)}else{e.hN=0}}function n(e,r){switch(e.type){case a:switch(r){case b:return!e.OP;case s:return e.OP;case p:return e._P&&e.OP||!e._P&&!e.OP;case h:return true}break;case v:return r===b||r===s;case c:return r===p;case u:return false}return false}function f(e,r){var t=!e.PP;var i=!e.OP;var n;switch(r){case b:n=t&&i;break;case s:n=t||i;break;case h:n=t^i;break;case p:if(e._P){n=t&&!i}else{n=i&&!t}break}return n?+1:-1}var d=function e(r,t,i,n,f){this.left=t;this.kP=r;this.IP=i;this._P=n;this.type=f||a;this.PP=false;this.OP=false;this.CP=null;this.hN=0;this.lN=-1;this.dN=-1;this.DP=true};var t={EP:{configurable:true}};d.prototype.FP=function e(r){var t=this.kP,i=this.IP.kP;return this.left?(t[0]-r[0])*(i[1]-r[1])-(i[0]-r[0])*(t[1]-r[1])>0:(i[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(i[1]-r[1])>0};d.prototype.RP=function e(r){return!this.FP(r)};d.prototype.NP=function e(){return this.kP[0]===this.IP.kP[0]};t.EP.get=function(){return this.hN!==0};d.prototype.clone=function e(){var r=new d(this.kP,this.left,this.IP,this._P,this.type);r.UP=this.UP;r.hN=this.hN;r.CP=this.CP;r.DP=this.DP;r.PP=this.PP;r.OP=this.OP;return r};Object.defineProperties(d.prototype,t);function y(e,r){if(e[0]===r[0]){if(e[1]===r[1]){return true}else{return false}}return false}var w=11102230246251565e-32;var L=134217729;var B=(3+8*w)*w;function R(e,r,t,i,n){var f,a,s,u;var o=r[0];var l=i[0];var v=0;var c=0;if(l>o===l>-o){f=o;o=r[++v]}else{f=l;l=i[++c]}var h=0;if(v<e&&c<t){if(l>o===l>-o){a=o+f;s=f-(a-o);o=r[++v]}else{a=l+f;s=f-(a-l);l=i[++c]}f=a;if(s!==0){n[h++]=s}while(v<e&&c<t){if(l>o===l>-o){a=f+o;u=a-f;s=f-(a-u)+(o-u);o=r[++v]}else{a=f+l;u=a-f;s=f-(a-u)+(l-u);l=i[++c]}f=a;if(s!==0){n[h++]=s}}}while(v<e){a=f+o;u=a-f;s=f-(a-u)+(o-u);o=r[++v];f=a;if(s!==0){n[h++]=s}}while(c<t){a=f+l;u=a-f;s=f-(a-u)+(l-u);l=i[++c];f=a;if(s!==0){n[h++]=s}}if(f!==0||h===0){n[h++]=f}return h}function E(e,r){var t=r[0];for(var i=1;i<e;i++){t+=r[i]}return t}function k(e){return Qf.Float64Array?new Float64Array(e):new Array(e)}var g=(3+16*w)*w;var N=(2+12*w)*w;var P=(9+64*w)*w*w;var z=k(4);var D=k(8);var U=k(12);var W=k(16);var G=k(4);function M(e,r,t,i,n,f,a){var s,u,o,l;var v,c,h,d,y,m,b,p,x,w,k,g,M,I;var S=e-n;var $=t-n;var A=r-f;var _=i-f;w=S*_;c=L*S;h=c-(c-S);d=S-h;c=L*_;y=c-(c-_);m=_-y;k=d*m-(w-h*y-d*y-h*m);g=A*$;c=L*A;h=c-(c-A);d=A-h;c=L*$;y=c-(c-$);m=$-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;z[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;z[1]=x-(b+v)+(v-g);I=p+b;v=I-p;z[2]=p-(I-v)+(b-v);z[3]=I;var O=E(4,z);var j=N*a;if(O>=j||-O>=j){return O}v=e-S;s=e-(S+v)+(v-n);v=t-$;o=t-($+v)+(v-n);v=r-A;u=r-(A+v)+(v-f);v=i-_;l=i-(_+v)+(v-f);if(s===0&&u===0&&o===0&&l===0){return O}j=P*a+B*Math.abs(O);O+=S*l+_*s-(A*o+$*u);if(O>=j||-O>=j){return O}w=s*_;c=L*s;h=c-(c-s);d=s-h;c=L*_;y=c-(c-_);m=_-y;k=d*m-(w-h*y-d*y-h*m);g=u*$;c=L*u;h=c-(c-u);d=u-h;c=L*$;y=c-(c-$);m=$-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;G[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;G[1]=x-(b+v)+(v-g);I=p+b;v=I-p;G[2]=p-(I-v)+(b-v);G[3]=I;var F=R(4,z,4,G,D);w=S*l;c=L*S;h=c-(c-S);d=S-h;c=L*l;y=c-(c-l);m=l-y;k=d*m-(w-h*y-d*y-h*m);g=A*o;c=L*A;h=c-(c-A);d=A-h;c=L*o;y=c-(c-o);m=o-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;G[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;G[1]=x-(b+v)+(v-g);I=p+b;v=I-p;G[2]=p-(I-v)+(b-v);G[3]=I;var C=R(F,D,4,G,U);w=s*l;c=L*s;h=c-(c-s);d=s-h;c=L*l;y=c-(c-l);m=l-y;k=d*m-(w-h*y-d*y-h*m);g=u*o;c=L*u;h=c-(c-u);d=u-h;c=L*o;y=c-(c-o);m=o-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;G[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;G[1]=x-(b+v)+(v-g);I=p+b;v=I-p;G[2]=p-(I-v)+(b-v);G[3]=I;var T=R(C,U,4,G,W);return W[T-1]}function I(e,r,t,i,n,f){var a=(r-f)*(t-n);var s=(e-n)*(i-f);var u=a-s;if(a===0||s===0||a>0!==s>0){return u}var o=Math.abs(a+s);if(Math.abs(u)>=g*o){return u}return-M(e,r,t,i,n,f,o)}function S(e,r,t){var i=I(e[0],e[1],r[0],r[1],t[0],t[1]);if(i>0){return-1}if(i<0){return 1}return 0}function $(e,r){var t=e.kP;var i=r.kP;if(t[0]>i[0]){return 1}if(t[0]<i[0]){return-1}if(t[1]!==i[1]){return t[1]>i[1]?1:-1}return A(e,r,t)}function A(e,r,t,i){if(e.left!==r.left){return e.left?1:-1}if(S(t,e.IP.kP,r.IP.kP)!==0){return!e.FP(r.IP.kP)?1:-1}return!e._P&&r._P?1:-1}function _(e,r,t){var i=new d(r,false,e,e._P);var n=new d(r,true,e.IP,e._P);if(y(e.kP,e.IP.kP)){console.warn(\"what is that, a collapsed segment?\",e)}i.UP=n.UP=e.UP;if($(n,e.IP)>0){e.IP.left=true;n.left=false}e.IP.IP=n;e.IP=i;t.push(n);t.push(i);return t}function O(e,r){return e[0]*r[1]-e[1]*r[0]}function j(e,r){return e[0]*r[0]+e[1]*r[1]}function F(e,r,t,i,n){var f=[r[0]-e[0],r[1]-e[1]];var a=[i[0]-t[0],i[1]-t[1]];function s(e,r,t){return[e[0]+r*t[0],e[1]+r*t[1]]}var u=[t[0]-e[0],t[1]-e[1]];var o=O(f,a);var l=o*o;var v=j(f,f);if(l>0){var c=O(u,a)/o;if(c<0||c>1){return null}var h=O(u,f)/o;if(h<0||h>1){return null}if(c===0||c===1){return n?null:[s(e,c,f)]}if(h===0||h===1){return n?null:[s(t,h,a)]}return[s(e,c,f)]}o=O(u,f);l=o*o;if(l>0){return null}var d=j(f,u)/v;var y=d+j(f,a)/v;var m=Math.min(d,y);var b=Math.max(d,y);if(m<=1&&b>=0){if(m===1){return n?null:[s(e,m>0?m:0,f)]}if(b===0){return n?null:[s(e,b<1?b:1,f)]}if(n&&m===0&&b===1){return null}return[s(e,m>0?m:0,f),s(e,b<1?b:1,f)]}return null}function C(e,r,t){var i=F(e.kP,e.IP.kP,r.kP,r.IP.kP);var n=i?i.length:0;if(n===0){return 0}if(n===1&&(y(e.kP,r.kP)||y(e.IP.kP,r.IP.kP))){return 0}if(n===2&&e._P===r._P){return 0}if(n===1){if(!y(e.kP,i[0])&&!y(e.IP.kP,i[0])){_(e,i[0],t)}if(!y(r.kP,i[0])&&!y(r.IP.kP,i[0])){_(r,i[0],t)}return 1}var f=[];var a=false;var s=false;if(y(e.kP,r.kP)){a=true}else if($(e,r)===1){f.push(r,e)}else{f.push(e,r)}if(y(e.IP.kP,r.IP.kP)){s=true}else if($(e.IP,r.IP)===1){f.push(r.IP,e.IP)}else{f.push(e.IP,r.IP)}if(a&&s||a){r.type=u;e.type=r.PP===e.PP?v:c;if(a&&!s){_(f[1].IP,f[0].kP,t)}return 2}if(s){_(f[0],f[1].kP,t);return 3}if(f[0]!==f[3].IP){_(f[0],f[1].kP,t);_(f[1],f[2].kP,t);return 3}_(f[0],f[1].kP,t);_(f[3].IP,f[2].kP,t);return 3}function T(e,r){if(e===r){return 0}if(S(e.kP,e.IP.kP,r.kP)!==0||S(e.kP,e.IP.kP,r.IP.kP)!==0){if(y(e.kP,r.kP)){return e.FP(r.IP.kP)?-1:1}if(e.kP[0]===r.kP[0]){return e.kP[1]<r.kP[1]?-1:1}if($(e,r)===1){return r.RP(e.kP)?-1:1}return e.FP(r.kP)?-1:1}if(e._P===r._P){var t=e.kP,i=r.kP;if(t[0]===i[0]&&t[1]===i[1]){t=e.IP.kP;i=r.IP.kP;if(t[0]===i[0]&&t[1]===i[1]){return 0}else{return e.UP>r.UP?1:-1}}}else{return e._P?-1:1}return $(e,r)===1?1:-1}function H(e,r,t,i,n,f){var a=new m(T);var s=[];var u=Math.min(i[2],n[2]);var o,l,v;while(e.length!==0){var c=e.pop();s.push(c);if(f===b&&c.kP[0]>u||f===p&&c.kP[0]>i[2]){break}if(c.left){l=o=a.Xc(c);v=a.MP();if(o!==v){o=a.NM(o)}else{o=null}l=a.next(l);var h=o?o.key:null;var d=void 0;x(c,h,f);if(l){if(C(c,l.key,e)===2){x(c,h,f);x(c,l.key,f)}}if(o){if(C(o.key,c,e)===2){var y=o;if(y!==v){y=a.NM(y)}else{y=null}d=y?y.key:null;x(h,d,f);x(c,h,f)}}}else{c=c.IP;l=o=a.find(c);if(o&&l){if(o!==v){o=a.NM(o)}else{o=null}l=a.next(l);a.remove(c);if(l&&o){C(o.key,l.key,e)}}}}return s}var q=function e(){this.points=[];this.vN=[];this.gN=null;this.depth=null};q.prototype.pN=function e(){return this.gN==null};function V(e){var r,t,i,n;var f=[];for(t=0,i=e.length;t<i;t++){r=e[t];if(r.left&&r.EP||!r.left&&r.IP.EP){f.push(r)}}var a=false;while(!a){a=true;for(t=0,i=f.length;t<i;t++){if(t+1<i&&$(f[t],f[t+1])===1){n=f[t];f[t]=f[t+1];f[t+1]=n;a=false}}}for(t=0,i=f.length;t<i;t++){r=f[t];r.lN=t}for(t=0,i=f.length;t<i;t++){r=f[t];if(!r.left){n=r.lN;r.lN=r.IP.lN;r.IP.lN=n}}return f}function X(e,r,t,i){var n=e+1,f=r[e].kP,a;var s=r.length;if(n<s){a=r[n].kP}while(n<s&&a[0]===f[0]&&a[1]===f[1]){if(!t[n]){return n}else{n++}a=r[n].kP}n=e-1;while(t[n]&&n>i){n--}return n}function J(e,r,t){var i=new q;if(e.CP!=null){var n=e.CP;var f=n.dN;var a=n.hN;if(a>0){var s=r[f];if(s.gN!=null){var u=s.gN;r[u].vN.push(t);i.gN=u;i.depth=r[f].depth}else{r[f].vN.push(t);i.gN=f;i.depth=r[f].depth+1}}else{i.gN=null;i.depth=r[f].depth}}else{i.gN=null;i.depth=0}return i}function Y(e){var a,r;var s=V(e);var u={};var o=[];var t=function(){if(u[a]){return}var r=o.length;var e=J(s[a],o,r);var t=function(e){u[e]=true;s[e].dN=r};var i=a;var n=a;var f=s[a].kP;e.points.push(f);while(true){t(i);i=s[i].lN;t(i);e.points.push(s[i].kP);i=X(i,s,u,n);if(i==n){break}}o.push(e)};for(a=0,r=s.length;a<r;a++)t();return o}var Z=Q;var K=Q;function Q(e,r){if(!(this instanceof Q)){return new Q(e,r)}this.data=e||[];this.length=this.data.length;this.compare=r||ee;if(this.length>0){for(var t=(this.length>>1)-1;t>=0;t--){this.zP(t)}}}function ee(e,r){return e<r?-1:e>r?1:0}Q.prototype={push:function(e){this.data.push(e);this.length++;this.El(this.length-1)},pop:function(){if(this.length===0){return undefined}var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this.zP(0)}this.data.pop();return e},GP:function(){return this.data[0]},El:function(e){var r=this.data;var t=this.compare;var i=r[e];while(e>0){var n=e-1>>1;var f=r[n];if(t(i,f)>=0){break}r[e]=f;e=n}r[e]=i},zP:function(e){var r=this.data;var t=this.compare;var i=this.length>>1;var n=r[e];while(e<i){var f=(e<<1)+1;var a=f+1;var s=r[f];if(a<this.length&&t(r[a],s)<0){f=a;s=r[a]}if(t(s,n)>=0){break}r[e]=s;e=f}r[e]=n}};Z.default=K;var re=Math.max;var te=Math.min;var ie=0;function ne(e,r,t,i,n,f){var a,s,u,o,l,v;for(a=0,s=e.length-1;a<s;a++){u=e[a];o=e[a+1];l=new d(u,false,undefined,r);v=new d(o,false,l,r);l.IP=v;if(u[0]===o[0]&&u[1]===o[1]){continue}l.UP=v.UP=t;if(!f){l.DP=false;v.DP=false}if($(l,v)>0){v.left=true}else{l.left=true}var c=u[0],h=u[1];n[0]=te(n[0],c);n[1]=te(n[1],h);n[2]=re(n[2],c);n[3]=re(n[3],h);i.push(l);i.push(v)}}function fe(e,r,t,i,n){var f=new Z(null,$);var a,s,u,o,l,v;for(u=0,o=e.length;u<o;u++){a=e[u];for(l=0,v=a.length;l<v;l++){s=l===0;if(s){ie++}ne(a[l],true,ie,f,t,s)}}for(u=0,o=r.length;u<o;u++){a=r[u];for(l=0,v=a.length;l<v;l++){s=l===0;if(n===p){s=false}if(s){ie++}ne(a[l],false,ie,f,i,s)}}return f}var ae=[];function se(e,r,t){var i=null;if(e.length*r.length===0){if(t===b){i=ae}else if(t===p){i=e}else if(t===s||t===h){i=e.length===0?r:e}}return i}function ue(e,r,t,i,n){var f=null;if(t[0]>i[2]||i[0]>t[2]||t[1]>i[3]||i[1]>t[3]){if(n===b){f=ae}else if(n===p){f=e}else if(n===s||n===h){f=e.concat(r)}}return f}function oe(e,r,t){if(typeof e[0][0][0]===\"number\"){e=[e]}if(typeof r[0][0][0]===\"number\"){r=[r]}var i=se(e,r,t);if(i){return i===ae?null:i}var n=[Infinity,Infinity,-Infinity,-Infinity];var f=[Infinity,Infinity,-Infinity,-Infinity];var a=fe(e,r,n,f,t);i=ue(e,r,n,f,t);if(i){return i===ae?null:i}var s=H(a,e,r,n,f,t);var u=Y(s);var o=[];for(var l=0;l<u.length;l++){var v=u[l];if(v.pN()){var c=[v.points];for(var h=0;h<v.vN.length;h++){var d=v.vN[h];c.push(u[d].points)}o.push(c)}}return o}function le(e,r){return oe(e,r,s)}function ve(e,r){return oe(e,r,p)}function ce(e,r){return oe(e,r,h)}function he(e,r){return oe(e,r,b)}var de={VP:s,BP:p,HP:b,WP:h};e.ZP=ve;e.qP=he;e.YP=de;e.$q=le;e.xor=ce;Object.defineProperty(e,\"gP\",{value:true})})});var ia=ea(ta);var na={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function fa(e,r){function t(e){switch(e){case\"EPSG3857\":return wf.getProjection(\"EPSG:3857\");case\"EPSG4326\":return wf.getProjection(\"EPSG:4326\")}return wf.getProjection(\"EPSG3857\")}var i=t(e);return{project:function(e){if(Vf.isArray(e)){e=new ha(e[0],e[1])}return i.project(e.lng,e.lat)},unproject:function(e){if(Vf.isArray(e)){e=new Cf(e[0],e[1])}return i.unproject(e.x,e.y)},normalizePoint:function(e){return Vf.parseLngLatData(e)},distance:function(e,r){r=this[\"normalizePoint\"](r);if(Vf.isArray(r)){return this[\"distanceToLine\"](e,r)}e=this[\"normalizePoint\"](e);var t=na.vr;var i=Math.cos;var n=e.lat*t,f=e.lng*t,a=r.lat*t,s=r.lng*t;var u=na.yr*2;var o=a-n;var l=s-f;var v=(1-i(o)+(1-i(l))*i(n)*i(a))/2;return u*Math.asin(Math.sqrt(v))},ringArea:function(e){e=this[\"normalizeLine\"](e);var r=na.yr*na.vr;var t=0,i=e,n=i.length;if(n<3){return 0}var f=0;for(;f<n-1;f+=1){var a=i[f];var s=i[f+1];var u=a.lng*r*Math.cos(a.lat*na.vr);var o=a.lat*r;var l=s.lng*r*Math.cos(s.lat*na.vr);var v=s.lat*r;t+=u*v-l*o}var c=i[f];var h=i[0];var d=c.lng*r*Math.cos(c.lat*na.vr);var y=c.lat*r;var m=h.lng*r*Math.cos(h.lat*na.vr);var b=h.lat*r;t+=d*b-m*y;var p=.5*Math.abs(t);return p},sphericalCalotteArea:function(e){var r=na.yr;var t=e/r;var i=r-r*Math.cos(t);return 2*Math.PI*r*i}}}function aa(){return{normalizePoint:function(e){if(e&&e[\"x\"]&&e[\"y\"]){return[e[\"x\"],e[\"y\"]]}return e},distance:function(e,r){var t=e[0]-r[0],i=e[1]-r[1];return Math.sqrt(t*t+i*i)},project:function(e){return e},unproject:function(e){return e},ringArea:function(e){var r=[0,0];var t=[0,0];var i=0;var n=e[0];var f=e.length;for(var a=2;a<f;a++){var s=e[a-1];var u=e[a];r[0]=n[0]-u[0];r[1]=n[1]-u[1];t[0]=n[0]-s[0];t[1]=n[1]-s[1];i+=r[0]*t[1]-r[1]*t[0]}return i/2}}}function sa(e){var r=0;var t=e.length;for(var i=0;i<t-1;i++){var n=e[i],f=e[i+1];r+=(f[0]-n[0])*(f[1]+n[1])}if(e[t-1][0]!==e[0][0]||e[t-1][1]!==e[0][1]){var n=e[t-1],f=e[0];r+=(f[0]-n[0])*(f[1]+n[1])}return r>0}var ua=function(){function r(e){this.CLASS_NAME=\"AMap.GeometryUtil\";this._opts=Ar({onSegmentTolerance:5,crs:\"EPSG3857\",maxZoom:Ti[1]},e);this[\"setCrs\"](this._opts[\"crs\"])}r.prototype[\"clone\"]=function(e){return new r(Ar({},this._opts,e))};r.prototype[\"isPoint\"]=function(e){return e&&(e instanceof ha||Vf.isArray(e)&&!isNaN(e[0]))};r.prototype[\"normalizePoint\"]=function(e){return e};r.prototype[\"normalizeLine\"]=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"normalizePoint\"](e[t]))}return r};r.prototype[\"normalizeMultiLines\"]=function(e){if(Vf.isArray(e)&&this[\"isPoint\"](e[0])){e=[e]}var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"normalizeLine\"](e[t]))}return r};r.prototype[\"setCrs\"]=function(e){var r;if(e&&e[\"project\"]&&e[\"unproject\"]){r=e}else if(e===\"plane\"){r=aa()}else{r=fa(e,this._opts[\"maxZoom\"])}Ar(this,r);return};r.prototype[\"distance\"]=function(e,r){throw new Error(\"distance Not implemented!\")};r.prototype.xr=function(e,r){e=this[\"normalizeLine\"](e);if(!this[\"isPoint\"](e[0])){e=e[0]}var t=[];for(var i=0,n=e.length;i<n;i++){t.push(this[\"project\"](e[i]))}if(r===true){t=this[\"makesureClockwise\"](t)}else if(r===false){t=this[\"makesureClockwise\"](t);t.reverse()}return t};r.prototype.br=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"unproject\"](e[t]))}return r};r.prototype[\"closestOnSegment\"]=function(e,r,t){var i=Kf.closestOnSegment(this[\"project\"](e),this.xr([r,t]));return this[\"unproject\"](i)};r.prototype[\"closestOnLine\"]=function(e,r){r=this[\"normalizeLine\"](r);var t=Infinity,i;for(var n=0,f=r.length;n<f-1;n++){var a=this[\"closestOnSegment\"](e,r[n],r[n+1]),s=this[\"distance\"](e,a);if(s<t){t=s;i=a}}return i};r.prototype[\"distanceToSegment\"]=function(e,r,t){return this[\"distanceToLine\"](e,[r,t])};r.prototype[\"distanceToLine\"]=function(e,r){r=this[\"normalizeLine\"](r);if(!this[\"isPoint\"](r[0])){r=r[0]}var t=Infinity;for(var i=0,n=r.length;i<n-1;i++){var f=this[\"closestOnSegment\"](e,r[i],r[i+1]);t=Math.min(t,this[\"distance\"](e,f))}return t};r.prototype[\"distanceToPolygon\"]=function(e,r){if(this[\"isPointInRing\"](e,r)){return 0}else{return this[\"distanceToLine\"](e,r)}};r.prototype[\"isPointOnSegment\"]=function(e,r,t,i){if(!i&&i!==0||i<0){i=this._opts[\"onSegmentTolerance\"]}return this[\"distanceToSegment\"](e,r,t)<=i};r.prototype[\"isPointOnLine\"]=function(e,r,t){r=this[\"normalizeLine\"](r);for(var i=0,n=r.length;i<n-1;i++){if(this[\"isPointOnSegment\"](e,r[i],r[i+1],t)){return true}}return false};r.prototype[\"isPointOnRing\"]=function(e,r,t){r=this[\"normalizeLine\"](r);for(var i=0,n=r.length;i<n;i++){if(this[\"isPointOnSegment\"](e,r[i],r[i===n-1?0:i+1],t)){return true}}return false};r.prototype[\"isPointOnPolygon\"]=function(e,r,t){r=this[\"normalizeMultiLines\"](r);for(var i=0,n=r.length;i<n;i++){if(this[\"isPointOnRing\"](e,r[i],t)){return true}}return false};r.prototype[\"makesureClockwise\"]=function(e){if(!sa(e)){e=[].concat(e);e.reverse()}return e};r.prototype[\"makesureAntiClockwise\"]=function(e){if(sa(e)){e=[].concat(e);e.reverse()}return e};r.prototype[\"pointInRing\"]=function(e,r,t){var i=false;for(var n=0;n<r.length&&!i;n++){if(s(e,r[n][0],t)){var f=false;var a=1;while(a<r[n].length&&!f){if(s(e,r[n][a],!t)){f=true}a++}if(!f){i=true}}}function s(e,r,t){var i=false;if(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]){r=r.slice(0,r.length-1)}for(var n=0,f=r.length-1;n<r.length;f=n++){var a=r[n][0];var s=r[n][1];var u=r[f][0];var o=r[f][1];var l=e[1]*(a-u)+s*(u-e[0])+o*(e[0]-a)===0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(o-e[1])<=0;if(l){return!t}var v=s>e[1]!==o>e[1]&&e[0]<(u-a)*(e[1]-s)/(o-s)+a;if(v){i=!i}}return i}return i};r.prototype[\"isPointInBbox\"]=function(e,r){var t=Infinity;var i=Infinity;var n=-Infinity;var f=-Infinity;for(var a=0;a<r.length;a++){var s=r[a];t=Math.min(t,s[0]);n=Math.max(n,s[0]);i=Math.min(i,s[1]);f=Math.max(f,s[1])}return e[0]>t&&e[0]<n&&e[1]>i&&e[1]<f};r.prototype[\"isPointInRing\"]=function(e,r){r=this[\"normalizeLine\"](r);var t=this.xr(r,true);var i=Kf.ss(this[\"project\"](e),t,false);return i};r.prototype[\"isRingInRing\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this[\"isPointInRing\"](e[t],r)){return false}}return true};r.prototype[\"isRingInRingByOutsea\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this[\"isPointInRing\"](e[t],r)){return true}}for(var t=0,i=r.length;t<i;t++){if(this[\"isPointInRing\"](r[t],e)){return true}}return false};r.prototype[\"isRingInRingByMapbox\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this[\"isPointInRing\"](e[t],r)){return false}}return true};r.prototype[\"isRingInRingByMapboxB\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this[\"isPointInRing\"](e[t],r)){return true}}return false};r.prototype[\"isPixelRingInRing\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){var n=Kf.ss(e[t],r,false);if(n){return true}}return false};r.prototype[\"isPointInPolygon\"]=function(e,r){r=this[\"normalizeMultiLines\"](r);var t;for(var i=0,n=r.length;i<n;i+=1){t=this[\"isPointInRing\"](e,r[i]);if(i>0){t=!t}if(!t){break}}return Boolean(t)};r.prototype[\"isPointInPolygons\"]=function(e,r){for(var t=0;t<r.length;t++){var i=r[t];i=this[\"normalizeMultiLines\"](i);var n=void 0;for(var f=0,a=i.length;f<a;f+=1){n=this[\"isPointInRing\"](e,i[f]);if(f>0){n=!n}if(!n){break}}if(n){return true}}return false};r.prototype[\"doesSegmentsIntersect\"]=function(e,r,t,i){var n=this.xr([e,r,t,i]);e=n[0];r=n[1];t=n[2];i=n[3];var f=false;var a=(i[0]-t[0])*(e[1]-t[1])-(i[1]-t[1])*(e[0]-t[0]);var s=(r[0]-e[0])*(e[1]-t[1])-(r[1]-e[1])*(e[0]-t[0]);var u=(i[1]-t[1])*(r[0]-e[0])-(i[0]-t[0])*(r[1]-e[1]);if(u!==0){var o=a/u;var l=s/u;if(0<=o&&o<=1&&0<=l&&l<=1){f=true}}return f};r.prototype[\"doesSegmentLineIntersect\"]=function(e,r,t){t=this[\"normalizeLine\"](t);for(var i=0,n=t.length;i<n-1;i++){if(this[\"doesSegmentsIntersect\"](e,r,t[i],t[i+1])){return true}}return false};r.prototype[\"doesSegmentRingIntersect\"]=function(e,r,t){t=this[\"normalizeLine\"](t);for(var i=0,n=t.length;i<n;i++){if(this[\"doesSegmentsIntersect\"](e,r,t[i],t[i===n-1?0:i+1])){return true}}return false};r.prototype[\"doesSegmentPolygonIntersect\"]=function(e,r,t){t=this[\"normalizeMultiLines\"](t);for(var i=0,n=t.length;i<n;i++){if(this[\"doesSegmentRingIntersect\"](e,r,t[i])){return true}}return false};r.prototype[\"doesLineLineIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i-1;t++){if(this[\"doesSegmentLineIntersect\"](e[t],e[t+1],r)){return true}}return false};r.prototype[\"doesLineRingIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i-1;t++){if(this[\"doesSegmentRingIntersect\"](e[t],e[t+1],r)){return true}}return false};r.prototype[\"doesPolygonPolygonIntersect\"]=function(e,r){if(this[\"doesRingRingIntersect\"](r,e)||this[\"isRingInRing\"](e,r)||this[\"isRingInRing\"](r,e)){return true}return false};r.prototype[\"doesRingRingIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i;t++){if(this[\"doesSegmentRingIntersect\"](e[t],e[t===i-1?0:t+1],r)){return true}}return false};r.prototype[\"along\"]=function(e,r){var t=0;for(var i=0;i<e.length-1;i+=1){var n=this[\"distance\"](e[i],e[i+1]);if(n+t<r){t+=n;continue}var f=(r-t)/n;return[e[i][0]+f*(e[i+1][0]-e[i][0]),e[i][1]+f*(e[i+1][1]-e[i][1]),i]}return null};r.prototype.gr=function(e,r){e=this[\"makesureAntiClockwise\"](e);r=this[\"makesureClockwise\"](r);var f,a,s,u;var t=function(e){return(a[0]-f[0])*(e[1]-f[1])>(a[1]-f[1])*(e[0]-f[0])};var i=function(){var e=[f[0]-a[0],f[1]-a[1]],r=[s[0]-u[0],s[1]-u[1]],t=f[0]*a[1]-f[1]*a[0],i=s[0]*u[1]-s[1]*u[0],n=1/(e[0]*r[1]-e[1]*r[0]);return[(t*r[0]-i*e[0])*n,(t*r[1]-i*e[1])*n]};var n=e;f=r[r.length-1];for(var o=0,l=r.length;o<l;o++){a=r[o];var v=n;n=[];s=v[v.length-1];for(var c=0,h=v.length;c<h;c++){u=v[c];if(t(u)){if(!t(s)){n.push(i())}n.push(u)}else if(t(s)){n.push(i())}s=u}f=a}return n};r.prototype[\"ringRingClip\"]=function(e,r){e=this.xr(e);r=this.xr(r);if(!ji(e[0],e[e.length-1])){e.push(e[0].slice())}if(!ji(r[0],r[r.length-1])){r.push(r[0].slice())}var t=ia.qP([e],[r]);if(!t||!t[0]||!t[0][0]){return[]}return this.br(t[0][0])};r.prototype[\"ringArea\"]=function(e){throw new Error(\"distance Not implemented!\")};r.prototype[\"distanceOfLine\"]=function(e){e=this[\"normalizeLine\"](e);var r=0;for(var t=0,i=e.length;t<i-1;t++){r+=this[\"distance\"](e[t],e[t+1])}return r};r.prototype[\"isClockwise\"]=function(e){e=this.xr(e);return sa(e)};r.prototype[\"typePolygon\"]=function(e){if(!k(e)||!k(e[0])){return\"never\"}if(e[0][0].length===2||e[0][0]instanceof ha){return\"Polygon\"}else if(e[0][0].length>2&&(e[0][0][0].length===2||e[0][0][0]instanceof ha)){return\"MultiPolygon\"}else{return\"never\"}};return r}();var oa=new ua({});var la=new ua({});la[\"setCrs\"](\"plane\");var va={distance:oa.distance.bind(oa),ringArea:oa.ringArea.bind(oa),isClockwise:oa.isClockwise.bind(oa),typePolygon:oa.typePolygon.bind(oa),makesureClockwise:oa.makesureClockwise.bind(oa),makesureAntiClockwise:oa.makesureAntiClockwise.bind(oa),distanceOfLine:oa.distanceOfLine.bind(oa),ringRingClip:oa.ringRingClip.bind(oa),doesSegmentsIntersect:oa.doesSegmentsIntersect.bind(oa),doesSegmentLineIntersect:oa.doesSegmentLineIntersect.bind(oa),doesSegmentRingIntersect:oa.doesSegmentRingIntersect.bind(oa),doesSegmentPolygonIntersect:oa.doesSegmentPolygonIntersect.bind(oa),doesLineLineIntersect:oa.doesLineLineIntersect.bind(oa),doesLineRingIntersect:oa.doesLineRingIntersect.bind(oa),doesRingRingIntersect:oa.doesRingRingIntersect.bind(oa),pointInRing:oa.pointInRing.bind(oa),isPointInRing:oa.isPointInRing.bind(oa),isPointInBbox:oa.isPointInBbox.bind(oa),isRingInRing:oa.isRingInRing.bind(oa),isPointInPolygon:oa.isPointInPolygon.bind(oa),isPointInPolygons:oa.isPointInPolygons.bind(oa),isPointOnSegment:oa.isPointOnSegment.bind(oa),isPointOnLine:oa.isPointOnLine.bind(oa),isPointOnRing:oa.isPointOnRing.bind(oa),isPointOnPolygon:oa.isPointOnPolygon.bind(oa),closestOnSegment:oa.closestOnSegment.bind(oa),closestOnLine:oa.closestOnLine.bind(oa),distanceToSegment:oa.distanceToSegment.bind(oa),distanceToLine:oa.distanceToLine.bind(oa)};var ca={distance:la.distance.bind(la),ringArea:la.ringArea.bind(la),isClockwise:la.isClockwise.bind(la),typePolygon:la.typePolygon.bind(la),makesureClockwise:la.makesureClockwise.bind(la),makesureAntiClockwise:la.makesureAntiClockwise.bind(la),distanceOfLine:la.distanceOfLine.bind(la),ringRingClip:la.ringRingClip.bind(la),doesSegmentsIntersect:la.doesSegmentsIntersect.bind(la),doesSegmentLineIntersect:la.doesSegmentLineIntersect.bind(la),doesSegmentRingIntersect:la.doesSegmentRingIntersect.bind(la),doesSegmentPolygonIntersect:la.doesSegmentPolygonIntersect.bind(la),doesLineLineIntersect:la.doesLineLineIntersect.bind(la),doesLineRingIntersect:la.doesLineRingIntersect.bind(la),doesRingRingIntersect:la.doesRingRingIntersect.bind(la),pointInRing:la.pointInRing.bind(la),isPointInRing:la.isPointInRing.bind(la),isPointInBbox:la.isPointInBbox.bind(la),isRingInRing:la.isRingInRing.bind(la),isPointInPolygon:la.isPointInPolygon.bind(la),isPointInPolygons:la.isPointInPolygons.bind(la),isPointOnSegment:la.isPointOnSegment.bind(la),isPointOnLine:la.isPointOnLine.bind(la),isPointOnRing:la.isPointOnRing.bind(la),isPointOnPolygon:la.isPointOnPolygon.bind(la),closestOnSegment:la.closestOnSegment.bind(la),closestOnLine:la.closestOnLine.bind(la),distanceToSegment:la.distanceToSegment.bind(la),distanceToLine:la.distanceToLine.bind(la)};var ha=function(){function a(e,r,t){if(t===void 0){t=false}this.className=\"AMap.LngLat\";if(Yf(e)){e=parseFloat(e[0]);r=parseFloat(e[1])}else{r=parseFloat(r);e=parseFloat(e)}if(isNaN(e)||isNaN(r)){throw Error(\"Invalid Object: LngLat(\"+e+\", \"+r+\")\")}if(t!==true){r=Math.max(Math.min(r,90),-90);e=(e+180)%360+(e<-180||e===180?180:-180)}this.kT=r;this.KL=e;this.lng=Math.round(e*1e6)/1e6;this.lat=Math.round(r*1e6)/1e6;this.pos=wf.getProjection(\"EPSG:3857\").project(e,r)}a.from=function(e){if(Xf(e)){return new a(e.KL,e.kT)}return new a(e[0],e[1])};a.prototype[\"setLng\"]=function(e){this.KL=e;this.lng=Math.round(e*1e6)/1e6;return this};a.prototype[\"setLat\"]=function(e){this.kT=e;this.lat=Math.round(e*1e6)/1e6;return this};a.prototype[\"getLng\"]=function(){return this.lng};a.prototype[\"getLat\"]=function(){return this.lat};a.prototype[\"equals\"]=function(e){e=Zf(e);if(!(e instanceof a)){return false}var r=Math.max(Math.abs(this.kT-e.kT),Math.abs(this.KL-e.KL));return r<=1e-9};a.prototype[\"add\"]=function(e,r){return new a(this.KL+e.KL,this.kT+e.kT,r)};a.prototype[\"subtract\"]=function(e,r){return new a(this.KL-e.KL,this.kT-e.kT,r)};a.prototype[\"divideBy\"]=function(e,r){return new a(this.KL/e,this.kT/e,r)};a.prototype[\"multiplyBy\"]=function(e,r){return new a(this.KL*e,this.kT*e,r)};a.prototype[\"offset\"]=function(e,r){if(isNaN(e)||isNaN(r)){throw Error(\"valid offset args, require number\")}var t=2*Math.asin(Math.sin(Math.round(e)/(2*6378137))/Math.cos(this.kT*Math.PI/180));var i=this.KL+t*180/Math.PI;var n=2*Math.asin(Math.round(r)/(2*6378137));var f=this.kT+n*180/Math.PI;return new a(i,f)};a.prototype[\"toString\"]=function(){return this.lng+\",\"+this.lat};a.prototype[\"toArray\"]=function(){return[this.lng,this.lat]};a.prototype[\"toJSON\"]=function(){return[this.lng,this.lat]};a.prototype[\"distanceTo\"]=function(e){return va[\"distance\"](this,e)};a.prototype[\"distance\"]=function(e){return va[\"distance\"](this,e)};return a}();var da=function(){function e(){}e[\"add\"]=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}};return e}();var ya={getViewport:function(e){if(!e){return[0,0]}return[e.clientWidth,e.clientHeight]},getStyle:function(e,r){var t=e.style[r];if((!t||t===\"auto\")&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);t=i?i[r]:null}if((!t||t===\"auto\")&&r===\"height\"){t=e.clientHeight+\"px\"}if((!t||t===\"auto\")&&r===\"width\"){t=e.clientWidth+\"px\"}return t===\"auto\"?null:t},getViewportOffset:function(e){var r=0;var t=0;var i=e;var n=document.body;var f=document.documentElement;var a;do{r+=i.offsetTop||0;t+=i.offsetLeft||0;r+=parseInt(ya.getStyle(i,\"borderTopWidth\"),10)||0;t+=parseInt(ya.getStyle(i,\"borderLeftWidth\"),10)||0;a=ya.getStyle(i,\"position\");if(i.offsetParent===n&&a===\"absolute\"){break}if(a===\"fixed\"){r+=n.scrollTop||f.scrollTop||0;t+=n.scrollLeft||f.scrollLeft||0;break}i=i.offsetParent}while(i);i=e;do{if(i===n){break}r-=i.scrollTop||0;t-=i.scrollLeft||0;if(!ya.m()&&jf.g){t+=i.scrollWidth-i.clientWidth}i=i.parentNode}while(i);return[t,r]},m:function(){var e=false;var r=false;return function(){if(!e){r=ya.getStyle(document.body,\"direction\")===\"ltr\";e=true}return r}}(),create:function(e,r,t,i){var n=document.createElement(e);if(t){n.className=t}if(r){if(i&&i===\"before\"){var f=r.firstChild;r.insertBefore(n,f)}else{r.appendChild(n)}}return n},toggleClass:function(e,r,t){if(t){this.addClass(e,r)}else{this.removeClass(e,r)}},hasClass:function(e,r){if(!e||!r){return}return e.className.length>0&&new RegExp(\"(^|\\\\s)\"+r+\"(\\\\s|$)\").test(e.className)},addClass:function(e,r){if(!e||!r){return}if(e.classList&&e.classList.add){e.classList.add(r)}else if(!this.hasClass(e,r)){e.className+=(e.className?\" \":\"\")+r}},setClass:function(e,r){if(!e){return}e.className=r||\"\"},removeClass:function(e,t){function r(e,r){if(r===t){return\"\"}return e}if(!e||!t){return}if(e.classList&&e.classList.remove){e.classList.remove(t)}else{e.className=e.className.replace(/(\\S+)\\s*/g,r).replace(/(^\\s+|\\s+$)/,\"\")}},watchSize:function(t,i,n){var r=document.createElement(\"iframe\");r.style.cssText=\"width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;\";r.onload=function(){if(r){r.contentWindow.onresize=e}};t.appendChild(r);r.src=\"about:blank\";var f=0;var a=0;e();n.resize=e;function e(){n.k=t.getBoundingClientRect();n.M=[t.clientLeft,t.clientTop];var e=t.offsetWidth;var r=t.offsetHeight;if(e!==f||r!==a){i(e,r);f=e;a=r}}window.onscroll=e;return function(){var e;if(n.resize){n.resize=null}if(window.onscroll){window.onscroll=null}if(r.contentWindow){r.contentWindow.onresize=null;r.contentWindow.document.write(\"\");r.parentNode.removeChild(r);(e=r.contentWindow)===null||e===void 0?void 0:e.close()}}},watchSize2:function(t,i,n){var f=document.createElement(\"_\");f.className=\"expand\";var a=f.appendChild(document.createElement(\"_\"));a.className=\"shrink\";var s=f.appendChild(document.createElement(\"_\"));s.className=\"expandChild\";var e=a.appendChild(document.createElement(\"_\"));e.className=\"shrinkChild\";var u;var o;var r=\"height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1\";a.style.cssText=f.style.cssText=r;e.style.cssText=s.style.cssText=\"display:block;height:100%;transition:0s;width:100%\";e.style.width=e.style.height=\"200%\";t.appendChild(f);l();return c;function l(){v();n.k=t.getBoundingClientRect();n.M=[t.clientLeft,t.clientTop];var e=t.offsetWidth;var r=t.offsetHeight;if(e!==u||r!==o){u=e;o=r;s.style.width=e*2+\"px\";s.style.height=r*2+\"px\";f.scrollLeft=f.scrollWidth;f.scrollTop=f.scrollHeight;a.scrollLeft=a.scrollWidth;a.scrollTop=a.scrollHeight;i(e,r)}a.addEventListener(\"scroll\",l);f.addEventListener(\"scroll\",l)}function v(){a.removeEventListener(\"scroll\",l);f.removeEventListener(\"scroll\",l)}function c(){v();t.removeChild(f)}},mousePos:function(e,r,t){if(e){t.k=e.getBoundingClientRect();t.M=[e.clientLeft,e.clientTop]}var i=t.k;var n=r;if(n.touches&&n.changedTouches){if(n.touches.length>0){n=n.touches[0]}else{n=n.changedTouches[n.changedTouches.length-1]}}return[n.clientX-i.left-t.M[0],n.clientY-i.top-t.M[1]]},remove:function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}},empty:function(e){while(e.firstChild){e.removeChild(e.firstChild)}},closest:function(e,r){if(e){if(this.hasClass(e,r)){return e}else{var t=e.parentElement;if(t){return ya.closest(t,r)}return null}}return null},fillText:function(e,r){if(!e){return}if(e.textContent!==void 0){e.textContent=r}else if(e.innerText!==void 0){e.innerText=r}else{e.innerHTML=r}return e},_L:function(e){var r=document.documentElement.style;for(var t=0;t<e.length;t+=1){if(e[t]in r){return e[t]}}return false},rotate:function(e,r,t){var i=ya.kL;t=t||{x:e.clientWidth/2,y:e.clientHeight/2};if(i){var n=\"\";n+=\" rotate(\"+r+\"deg)\";e.style[i]=n;e.style[ya.ML[i]+\"-origin\"]=t.x+\"px \"+t.y+\"px\"}else{var f=Math.cos(r*Math.PI/180);var a=Math.sin(r*Math.PI/180);e.style.filter=\"progid:DXImageTransform.Microsoft.Matrix()\";if(e[\"filters\"].length>0){var s=e[\"filters\"].item(0);s[\"Dx\"]=-t.x*f+t.y*a+t.x;s[\"Dy\"]=-t.x*a-t.y*f+t.y;s[\"M11\"]=s[\"M22\"]=f;s[\"M12\"]=-(s[\"M21\"]=a)}}},setCss:function(e,r){e=e instanceof Array?e:[e];for(var t=0;t<e.length;t+=1){for(var i in r){if(r.hasOwnProperty(i)){e[t].style[i]=r[i]}}}return this},setOpacity:function(e,r){if(!e.style){return}if(\"opacity\"in e.style){e.style.opacity=\"\"+r}else if(\"filter\"in e.style){var t=\"DXImageTransform.Microsoft.Alpha\";var i=Math.round(r*100);e.style.filter=\"\";if(i!==100){e.style.filter=\" progid:\"+t+\"(opacity=\"+i+\")\"}}},ML:{},kL:false};ya.kL=ya._L([\"WebkitTransform\",\"OTransform\",\"MozTransform\",\"msTransform\",\"transform\"]);ya.ML={transform:\"transform\",WebkitTransform:\"-webkit-transform\",OTransform:\"-o-transform\",MozTransform:\"-moz-transform\",msTransform:\"-ms-transform\"};var ma=function(){function e(){this.Hy=false;this.ex=null;this.Ky=this.nx()}e.prototype.open=function(e,r,t){var i=this;if(this.Hy){return}var n=this.Jy;var f=AMap.getConfig()[\"server\"]+\"/verify/\";if(jf.$e){this.Ky.style.marginLeft=-Math.min(330,screen.width)/2+\"px\";document.body.appendChild(this.Ky)}else{var a=this.Qy(\"amap-container\",document.body)[0];if(a&&a.clientWidth>322&&a.clientHeight>346){this.Ky.style.position=\"absolute\";a.appendChild(this.Ky)}else{var s=.5;var u=.5;var o=0;var l=0;if(a){var v=ya.getViewportOffset(a);o=v[0];l=v[1]}this.Ky.style.top=\"0%\";this.Ky.style.left=\"0%\";var c=s-o;var h=u-l;var d=c/5;var y=h/5;var m=setInterval(function(){o+=d;l+=y;if(s-o<.05&&u-l<.05){i.Ky.style.top=\"50%\";i.Ky.style.left=\"50%\";clearInterval(m)}else{i.Ky.style.top=l*100+\"%\";i.Ky.style.left=o*100+\"%\"}},25);document.body.appendChild(this.Ky)}}var b=true;var p=function(){if(b){b=false;return}else if(i.Hy){if(i.Ky.parentNode){i.Ky.parentNode.removeChild(i.Ky)}i.Hy=false;i.tx()}};n.onload=p;n.src=f+\"jsapi.html?channel=JSAPI-\"+e+\"&from=\"+encodeURIComponent(f+\"success.html\")+\"&th=\"+r+\"&restUrl=\"+encodeURIComponent(t);this.Hy=true};e.prototype.ix=function(e){this.ex=e};e.prototype.tx=function(){if(this.ex){this.ex()}};e.prototype.Qy=function(e,r){if(window.getElementsByClassName){return window.getElementsByClassName(e,r)}var t=(r||document).getElementsByTagName(\"*\");var i=[];for(var n=0;n<t.length;n+=1){var f=t[n];var a=f.className.split(\" \");for(var s=0;s<a.length;s+=1){if(a[s]===e){i.push(f);break}}}return i};e.prototype.nx=function(){var e=document.createElement(\"div\");e.className=\"amap-popup\";e.style.zIndex=\"2147483647\";var r=document.createElement(\"iframe\");r.className=\"amap-popup-content\";e.appendChild(r);r.style.width=Math.min(330,screen.width)+\"px\";this.Jy=r;return e};return e}();var ba={xv:\"ActiveXObject\"in window&&!document.addEventListener,opts:{callback:\"callback\",type:\"json\",charset:\"utf-8\"},setOptions:function(e){this.opts=Ar(this.opts,e)},bv:function(){},gv:function(){this.emit(\"error\",{info:\"TIME_OUT_A\"})},JSONP:function(r,t,e){if(e===void 0){e={}}r=encodeURI(r);var i=Vf.getGuid(\"jsonp_\",6)+\"_\";var n=document.createElement(\"script\");n.type=\"text/javascript\";n.charset=\"utf-8\";n.async=true;e=Ar({},this.opts,e);var f=function(){window[i]=null;n.onerror=null;if(n.parentNode){n.parentNode.removeChild(n)}};n.onerror=function(e){f();if(t){t(\"error\",{url:r,info:\"Request Error\"})}};window[i]=function(e){f();if(t){t(\"complete\",{info:\"ok\",url:r,data:e})}};var a=\"?\";if(r.indexOf(\"?\")!==-1){a=\"&\"}var s=r+a+e[\"callback\"]+\"=\"+i;n.src=s;var u=document.getElementsByTagName(\"body\")[0]||document.getElementsByTagName(\"head\")[0];u.appendChild(n)},Ajax:function(t,e,i){if(window.XMLHttpRequest===undefined&&window.wv){var r=this._v=new window.wv;r.onerror=function(e){i(\"error\",{info:\"Request Error\",url:t,data:\"\"})};r.onload=function(){i(\"complete\",{url:t,data:r.responseText})};r.open(e[\"type\"]||\"GET\",t);setTimeout(function(){r.send(e[\"content\"]||null)},0);return r}else if(window.XMLHttpRequest){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){var e=\"none\";var r=void 0;if(n.responseType===\"arraybuffer\"){r=n.response}else{r=n.responseText}i(\"complete\",{info:\"ok\",url:t,data:r,hederSignature:e})}else{n.abort();i(\"error\",{info:n.status,url:t,data:\"\"})}}};n.onerror=function(e){n.abort();i(\"error\",{info:\"Request Error\",url:t,data:\"\"})};n.open(e[\"type\"]||\"GET\",t,true);n.responseType=e[\"responseType\"]||\"text\";if(e[\"type\"]===\"POST\"){n.setRequestHeader(\"Content-Type\",e[\"requestContentType\"]||\"application/x-www-form-urlencoded\")}n.send(e[\"content\"]||null);return n}else{i(\"error\",{info:\"Not Support Ajax\",url:t,data:\"\"})}}};var pa={\"restapi.amap.com/v3/place/text\":\"KEYWORD\",\"restapi.amap.com/v3/place/polygon\":\"POLYGON\",\"restapi.amap.com/v3/place/around\":\"NEARBY\",\"restapi.amap.com/v3/place/detail\":\"ID\",\"restapi.amap.com/v3/geocode/regeo\":\"REGEO\"};var xa=new ma;xa.ix(function(){wa.ox=false;var e=wa.ax;for(var r=0,t=e.length;r<t;r+=1){var i=e[r];if(t-r>10){e[2]({status:\"error\",info:\"TIME_OUT_A\"});continue}wa.get(i[0],i[1],i[2])}wa.ax=[]});var wa=function(){function m(){}m.get=function(t,i,n,e){if(e===void 0){e={}}if(m.ox){m.ax.push([t,i,n]);return}var r=t.split(\"://\")[1];var f=pa[r];var a=f!==undefined;var s=AMap.getConfig(),u=s[\"key\"],o=s[\"version\"],l=s[\"appname\"],v=s[\"jscode\"],c=s[\"gaodeserver\"];var h=t+\"?platform=JS&s=rsv3&logversion=2.0&key=\"+u+\"&sdkversion=\"+o+\"&appname=\"+l+\"&csid=\"+Vf.uuid();if(v){h+=\"&jscode=\"+v}else if(c&&r&&r.split(\"/\")[0]===\"restapi.amap.com\"){var d=r.replace(r.split(\"/\")[0],c);h=d+\"?platform=JS&s=rsv3&logversion=2.0&key=\"+u+\"&sdkversion=\"+o+\"&appname=\"+l+\"&csid=\"+Vf.uuid()}for(var y in i){if(i.hasOwnProperty(y)){h+=\"&\"+y+\"=\"+i[y]}}ba[\"JSONP\"](h,function(e,r){if(e===\"complete\"){r=r[\"data\"];if(a&&r[\"errcode\"]===3e4&&r[\"data\"]){m.ox=true;m.ax.push([t,i,n]);xa.open(f,r[\"data\"][\"host\"],h)}else{n(e,r)}}else{n(e,r)}},e)};m.post=function(e,r,t){var i=AMap.getConfig(),n=i[\"key\"],f=i[\"version\"],a=i[\"appname\"],s=i[\"jscode\"],u=i[\"gaodeserver\"];var o=e.split(\"://\")[1];var l=e+\"?platform=JS&s=rsv3&logversion=2.0&key=\"+n+\"&sdkversion=\"+f+\"&appname=\"+a+\"&csid=\"+Vf.uuid();if(s){l+=\"&jscode=\"+s}else if(u&&o&&o.split(\"/\")[0]===\"restapi.amap.com\"){var v=o.replace(o.split(\"/\")[0],u);l=v+\"?platform=JS&s=rsv3&logversion=2.0&key=\"+n+\"&sdkversion=\"+f+\"&appname=\"+a+\"&csid=\"+Vf.uuid()}ba[\"Ajax\"](l,{type:\"POST\",content:JSON.stringify(r),requestContentType:\"text/plain\"},function(e,r){if(e===\"complete\"){r=r[\"data\"];t(e,JSON.parse(r))}else{t(e,r)}})};m.ox=false;m.ax=[];return m}();var ka={pointerCursor:true};var ga=function(n){f($,n);function $(e,r,t){var i=n.call(this)||this;i[\"CLASS_NAME\"]=\"AMap.HotSpot\";i.rF=$.aF[\"protocol\"]+\"://vdata.amap.com/mapclick\";i.yF=20037508.342789244;i.Xa=256;i.du=20037508.342789244*2/256/Math.pow(2,20);t=Ar({},ka,t);da.add(i,t);i.$o=r||i.rF;i.dF=t[\"pointerCursor\"]||true;if(e){i.setMap(e)}return i}$.prototype.oF=function(e){var r=e.D$();var t;if(r===\"zh_cn\"){t=this.rF}else{t=$.aF.protocol+\"://mapclick.amap.com/poi\";if(jf.L2){t+=\"_mo\"}if(r!==\"zh_cn\"){t+=\"_\"+r}t+=\"/poi\"}if(this.$o!==t){this.$o=t;$.record={};$.data={};this.hF()}};$.prototype.setMap=function(e){da.add(this,\"setMap\");var r=this._map;if(r){r.off(\"click\",this.lF,this);r.off(\"mousemove\",this.jL,this);r.off(\"moveend\",this.hF,this);r.off(\"zoomend\",this.hF,this);r.off(\"viewreset\",this.hF,this)}this._map=e;if(e){var t=e[\"getViewMode_\"]();if(t!==\"3D\"){this.oF(e);e.on(\"click\",this.lF,this);e.on(\"mousemove\",this.jL,this);e.on(\"moveend\",this.hF,this);e.on(\"zoomend\",this.hF,this);e.on(\"viewreset\",this.hF,this);this.hF()}}else{$.record={}}};$.prototype.fF=function(e,r){var t=parseInt(e[\"ic\"],10);if(r<=18&&r>=14){if(t>=335&&t<=374){return false}if(t>=436&&t<=444){return false}if(t===431||t===432||t===434||t===447||t===448){return false}}if(r===18||r===17){if(t===375||t===3751||t===445||t===376){return false}}if(r===18&&t===323){return false}if(r===13&&t===334){return false}if(r<=18&&r>=10&&t===8e3){return false}if(r<=18&&r>=13&&t===381){return false}return true};$.prototype.lF=function(e){var r=this.uF(e[\"lnglat\"]);if(r&&this._map){this._map.emit(\"hotspotclick\",r)}};$.prototype.jL=function(e){var r=this.uF(e[\"lnglat\"]);if(r&&this.cF!==r){if(this.dF){this._map.setCursor(\"pointer\")}if(this.cF){this._map.emit(\"hotspotout\",this.cF)}this._map.emit(\"hotspotover\",r)}if(!r&&this.cF){if(this.dF){this._map[\"setCursor\"](this._map.getDefaultCursor())}this._map.emit(\"hotspotout\",this.cF)}this.cF=r};$.prototype.hF=function(){var t=this;var e=this._map;if(!e){return}if(!$.data){$.data={}}if(!$.record){$.record={}}var i=this.pF();if(Math.ceil(i)!==this.pF()){return}var r=this.vF();if(r){wa[\"get\"](this.$o,{tiles:r,level:i},function(e,r){if(t._map){t.mF(r,i)}},{callback:\"cbk\"})}};$.prototype.vF=function(){var e=this._map;var r=this.pF();var t=e[\"getBounds\"]();var i=this.du;var n=t.getNorthWest().pos;var f=t.getSouthEast().pos;var a=256;var s=this.yF;var u=n[0]+s;var o=s-f[1];var l=f[0]+s;var v=s-n[1];var c=Math.pow(2,20-r);var h=u/c/i;var d=v/c/i;var y=l/c/i;var m=o/c/i;var b=Math.floor(h/a);var p=Math.floor(d/a);var x=Math.floor(y/a);var w=Math.floor(m/a);var k=Math.pow(2,r);if(b>x){x+=k}var g=[];for(var M=b;M<=x;M+=1){for(var I=p;I<=w;I+=1){var S=[r,M,I].join(\"_\");if(!$.record[S]){g.push(M+\",\"+I);$.record[S]=1}}}if(g.length){return g.join(\";\")}else{return null}};$.prototype.mF=function(e,r){if(e[\"list\"]){var t=e[\"list\"];for(var i in t){if(t.hasOwnProperty(i)){var n=t[i];for(var f=0;f<n.length;f+=1){var a=n[f];if(!this.fF(a,r)){continue}var s={id:a[\"id\"],name:a[\"n\"].replace(/\\^/g,\"\"),lnglat:new ha(a[\"p\"][0],a[\"p\"][1])};var u=[];var o=[\"b\",\"ib\"];for(var l=0,v=o.length;l<v;l++){var c=a[o[l]];if(c){u.push.apply(u,this.xF(new ha(c[0],c[3]),new ha(c[2],c[1]),r))}}for(var h=0;h<u.length;h+=1){var d=u[h][0];var y=u[h][1];if(!$.data[d]){$.data[d]={}}$.data[d][y]=s}}}}}};$.prototype.bF=function(e){var r=this.pF();var t=Math.pow(2,20-r);var i=this.yF;var n=this.du;var f=this._map.getProjection();var a=f.project(e.lng,e.lat);var s=this.Xa;var u=Math.round(i+a[0])/n/t;var o=Math.round(i-a[1])/n/t;var l=Math.floor(u/s);var v=Math.floor(o/s);var c=u%s;var h=o%s;return{gF:l,wF:v,offsetX:c,offsetY:h}};$.prototype.xF=function(e,r,t){var i=this.bF(e);var n=this.bF(r);var f=256;var a=[];n.offsetX+=(n.gF-i.gF)*f;n.offsetY+=(n.wF-i.wF)*f;for(var s=i.gF;s<=n.gF;s+=1){for(var u=i.wF;u<=n.wF;u+=1){var o=[t,s,u].join(\"_\");var l=[Math.max((s-i.gF)*f,i.offsetX)%f,Math.max((u-i.wF)*f,i.offsetY)%f,Math.min((s-i.gF+1)*f-1,n.offsetX)%f,Math.min((u-i.wF+1)*f-1,n.offsetY)%f].join(\"_\");a.push([o,l])}}return a};$.prototype.uF=function(e){var r=this.bF(e);var t=this._map;if(!t){return}var i=[this.pF(),r.gF,r.wF].join(\"_\");if($.data[i]){var n=$.data[i];for(var f in n){if(n.hasOwnProperty(f)){var a=f.split(\"_\");var s=parseInt(a[0],10);var u=parseInt(a[1],10);var o=parseInt(a[2],10);var l=parseInt(a[3],10);if(r.offsetX>=s&&r.offsetX<=o&&r.offsetY>=u&&r.offsetY<=l){return n[f]}}}}return null};$.prototype.pF=function(){var e=this._map;var r=18;var t=r;if(e){t=Math.floor(e[\"getZoom\"]());t=t>r?r:t}return t};$.record={};$.data={};$.aF={protocol:\"https\"};return $}(bf);var Ma=function(r){f(e,r);function e(){var e=r.call(this)||this;e.wo=document.createElement(\"div\");return e}e.prototype[\"getContainer\"]=function(){return this.wo};e.prototype.renderFrame=function(){};return e}(cf);var Ia=function(t){f(e,t);function e(e){var r=t.call(this,e)||this;r.context=void 0;r.Ao=[];r.map=e;r.GT(e[\"getLayers\"]());r._F=new ga(e);return r}e.prototype.to=function(){if(this.map){this.map.setNeedUpdate(true)}};e.prototype.renderFrame=function(e){var r=e.layers.sort(function(e,r){return e.getLayerConfig().zIndex-r.getLayerConfig().zIndex});this.lS(null,e);var t=e.viewState.zoom;var i=true;for(var n=0,f=r.length;n<f;n+=1){var a=r[n];var s=a.getState();var u=r[n].getRender();if(u){if(!a.lo()){i=false}var o=e.uo.getData(r[n].co(),e.viewState,void 0);if(o){u.renderFrame(undefined,o,e,s,this,a)}}}if(!this.map.complete&&i){this.map.emit(\"complete\");this.map.complete=true}if(!this.map.getView().h_()){this.map.getView().aD();this.map.emit(\"viewchange\",{view:this.map[\"getView\"](),type:this.map[\"getView\"]().type||\"3D\"})}};e.prototype.getLayerRender=function(e){switch(e.CLASS_NAME){case\"AMap.NebulaLayer\":case\"AMap.ImageLayer\":return new mf(this.map,e);case\"AMap.VectorLayer\":case\"AMap.VectorSvgLayer\":return e.getRender();case\"AMap.RasterLayer\":return new df(this.map,e);case\"AMap.TileLayer\":return new df(this.map,e);case\"AMap.TileLayer.Flexible\":return new df(this.map,e);case\"AMap.TileLayer.RoadNet\":return new df(this.map,e);case\"AMap.TileLayer.Satellite\":return new df(this.map,e);case\"AMap.TileLayer.Traffic\":return new df(this.map,e);case\"AMap.TileLayer.WMS\":return new df(this.map,e);case\"AMap.TileLayer.WMTS\":return new df(this.map,e);case\"AMap.SkyLayer\":return new Ma;case\"AMap.IndoorMap\":return new vf;case\"AMap.LabelsLayer\":return new Wn;case\"AMap.CustomLayer\":return new nf;default:return new df(this.map,e)}};e.prototype.destroy=function(){for(var e=0,r=this.Ao;e<r.length;e++){var t=r[e];t.layer.destroy()}this.Ao=[]};e.prototype.GT=function(e){for(var r=0;r<e.length;r++){var t=e[r];var i=this.getLayerRender(t);if(!i){continue}var n=i.type===\"labelsLayer\"||i.type===\"customLayer\";t.Do(i);this.Ao.push({layer:t,render:i,div:i&&n?null:i.getContainer()})}};return e}(yf);var Sa=function(){function e(){}e.prototype.clear=function(e,r){if(!e._map){return}if(!e.F$){return}r.removeChild(e.F$)};return e}();var $a=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t){if(!e.q$){return}if(!e.F$){e.F$=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");e.F$.B2=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");e.F$.inner=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");e.F$.appendChild(e.F$.B2);e.F$.appendChild(e.F$.inner)}if(!e.F$){return}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var i=\"\";var n=e.q$;var f=r.Nm;var a=r.resolution;for(var s=0,u=n;s<u.length;s++){var o=u[s];var l=[];var v=[];for(var c=0,h=o.length;c<h;c+=1){var d=o[c];var y=Math.round((d[0]-f[0])/a);var m=Math.round((f[1]-d[1])/a);if(c===0){var b=\"M\"+y+\",\"+m+\" \";v.push(b)}else{var b=\"L\"+y+\",\"+m+\" \";v.push(b)}}l.push(v.join(\"\")+\"\\n\");i+=l.join(\"\")}var p=this.R2(e);e.F$.B2.style.cssText=p.E2;e.F$.inner.style.cssText=p.N2;e.F$.B2.setAttribute(\"d\",i);e.F$.inner.setAttribute(\"d\",i);return i};r.prototype.R2=function(e){var r=e._opts;var t=r[\"outlineColor\"];var i=r[\"strokeColor\"];var n=r[\"strokeWeight\"];var f=r[\"isOutline\"];var a=r[\"strokeOpacity\"];var s=r[\"strokeStyle\"];var u=r[\"strokeDasharray\"];var o=[];if(typeof a===\"number\"){o.push(\"stroke-opacity:\"+a)}o.push(\"stroke-linejoin:\"+(r[\"lineJoin\"]||\"round\"));o.push(\"fill-opacity:0\");if(s){var l=s===\"solid\"?\"none\":u;o.push(\"stroke-dasharray:\"+l.toString())}var v=\"\";var c=\"\";if(e.visible&&f){o.push(\"stroke-width:\"+(n+r[\"borderWeight\"]*2));o.push(\"stroke:\"+t||\"rgba(0,0,0,0)\");v=o.join(\";\");o.pop();o.pop()}else{o.push(\"display:\"+\"none\");v=o.join(\";\");o.pop()}o.push(\"display:\"+(e.visible?\"block\":\"none\")+\";\");o.push(\"stroke-width:\"+n);o.push(\"stroke:\"+i||\"rgba(0,0,0,0)\");c=o.join(\";\");return{E2:v,N2:c}};return r}(Sa);var Aa=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t){if(!e.q$){return}if(!e.F$){e.F$=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");e.F$.inner=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");e.F$.appendChild(e.F$.inner)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var i=e.q$;var n=\"\";for(var f=0,a=i;f<a.length;f++){var s=a[f];var u=[];var o=r.Nm;var l=r.resolution;for(var v=0,c=s.length;v<c;v+=1){var h=s[v];var d=[];for(var y=0,m=h.length;y<m;y+=1){var b=h[y];var p=Math.ceil((b[0]-o[0])/l);var x=Math.ceil((o[1]-b[1])/l);if(y===0){var w=\"M\"+p+\",\"+x+\" \";d.push(w)}else{var w=\"L\"+p+\",\"+x+\" \";d.push(w)}}u.push(d.join(\"\")+\" z\"+\"\\n\")}n+=u.join(\"\")}var k=e.F$.inner;k.style.cssText=this.R2(e);k.setAttribute(\"d\",n)};r.prototype.R2=function(e){var r=e._opts;var t=r[\"strokeColor\"],i=r[\"strokeWeight\"],n=r[\"strokeOpacity\"],f=r[\"fillColor\"],a=r[\"fillOpacity\"],s=r[\"strokeStyle\"],u=r[\"strokeDasharray\"];var o=[];o.push(\"fill-rule:evenodd\");if(t){o.push(\"stroke:\"+t);if(typeof n===\"number\"){o.push(\"stroke-opacity:\"+n)}o.push(\"stroke-linejoin:\"+(r[\"lineJoin\"]||\"miter\"))}else{o.push(\"stroke-opacity:\"+0)}if(f){o.push(\"fill:\"+f);if(typeof a===\"number\"){o.push(\"fill-opacity:\"+a)}}else{o.push(\"fill-opacity:\"+0)}if(i){o.push(\"stroke-width:\"+i)}if(s){var l=s===\"solid\"?\"none\":u;o.push(\"stroke-dasharray:\"+l.toString())}o.push(\"display:\"+(e[\"visible\"]?\"block\":\"none\")+\";\");return o.join(\";\")};return r}(Sa);var _a=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");e.F$.P2=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.F$.appendChild(e.F$.P2)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=AMap[\"Util\"][\"parseLngLatData\"](e.getOptions().center);var s=e[\"getRadius\"]();if(!a||!Jf(s)){return}var u=i.map[\"getResolution\"](a);var o=e._map.getProjection();var l=o.project(a.lng,a.lat);var v=Math.round((l[0]-n[0])/f);var c=Math.round((n[1]-l[1])/f);var h=Math.ceil(s/u);e.F$.P2.style.cssText=this.R2(e);e.F$.P2.setAttribute(\"cx\",\"\"+v);e.F$.P2.setAttribute(\"cy\",\"\"+c);e.F$.P2.setAttribute(\"r\",\"\"+h)};r.prototype.R2=function(e){var r=e._opts;var t=r[\"strokeColor\"],i=r[\"strokeWeight\"],n=r[\"strokeOpacity\"],f=r[\"fillColor\"],a=r[\"fillOpacity\"],s=r[\"strokeStyle\"],u=r[\"strokeDasharray\"];var o=[];if(t){o.push(\"stroke:\"+t);if(typeof n===\"number\"){o.push(\"stroke-opacity:\"+n)}}else{o.push(\"stroke-opacity:\"+0)}if(f){o.push(\"fill:\"+f);if(typeof a===\"number\"){o.push(\"fill-opacity:\"+a)}}else{o.push(\"fill-opacity:\"+0)}if(i){o.push(\"stroke-width:\"+i)}if(s){var l=s===\"solid\"?\"none\":u;o.push(\"stroke-dasharray:\"+l.toString())}o.push(\"display:\"+(e.visible?\"block\":\"none\")+\";\");var v=o.join(\";\");return v};return r}(Sa);var Oa=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");e.F$.inner=document.createElementNS(\"http://www.w3.org/2000/svg\",\"circle\");e.F$.appendChild(e.F$.inner)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=e.getOptions();var s=AMap[\"Util\"][\"parseLngLatData\"](e.getOptions().center);var u=this.Ib(e);if(!s||!u){return}var o=a.radius+a.strokeWeight;var l=(a.strokeWeight/2+a.radius)/o*u;var v=e._map[\"getProjection\"]();var c=v.project(s.lng,s.lat);var h=Math.round((c[0]-n[0])/f);var d=Math.round((n[1]-c[1])/f);var y=e.F$.inner;y.style.cssText=this.R2(e);y.setAttribute(\"cx\",\"\"+h);y.setAttribute(\"cy\",\"\"+d);y.setAttribute(\"r\",\"\"+l)};r.prototype.R2=function(e){var r=e.getOptions();var t=r[\"strokeColor\"],i=r[\"strokeWeight\"],n=r[\"strokeOpacity\"],f=r[\"fillColor\"],a=r[\"fillOpacity\"],s=r[\"strokeStyle\"],u=r[\"strokeDasharray\"];var o=[];if(t){o.push(\"stroke:\"+t);if(typeof n===\"number\"){o.push(\"stroke-opacity:\"+n)}}if(f){o.push(\"fill:\"+f);if(typeof a===\"number\"){o.push(\"fill-opacity:\"+a)}}if(i){var l=this.Ib(e);var v=e.getOptions();var c=v.radius+v.strokeWeight;var h=v.strokeWeight/c*l;o.push(\"stroke-width:\"+h)}if(s){var d=s===\"solid\"?\"none\":u;o.push(\"stroke-dasharray:\"+d.toString())}o.push(\"display:\"+(e.visible?\"block\":\"none\")+\";\");var y=o.join(\";\");return y};r.prototype.Ib=function(e){var r=e.getOptions();var t=r.radius+(r.strokeWeight||0);return Math.min(t,64)};return r}(Sa);var ja=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\");e.F$.ellipse=document.createElementNS(\"http://www.w3.org/2000/svg\",\"ellipse\");e.F$.appendChild(e.F$.ellipse)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=AMap[\"Util\"][\"parseLngLatData\"](e.getOptions().center);var s=e[\"getRadius\"]();if(!a||!s){return}var u=i.map[\"getResolution\"](a);var o=e.F$.ellipse;var l=e._map[\"getProjection\"]();var v=l.project(a.lng,a.lat);var c=Math.round((v[0]-n[0])/f);var h=Math.round((n[1]-v[1])/f);var d=Math.ceil(s[0]/u);var y=Math.ceil(s[1]/u);o.style.cssText=this.R2(e);o.setAttribute(\"cx\",\"\"+c);o.setAttribute(\"cy\",\"\"+h);o.setAttribute(\"rx\",\"\"+d);o.setAttribute(\"ry\",\"\"+y)};r.prototype.R2=function(e){var r=e.getOptions();var t=r[\"strokeColor\"],i=r[\"strokeWeight\"],n=r[\"strokeOpacity\"],f=r[\"fillColor\"],a=r[\"fillOpacity\"],s=r[\"strokeStyle\"],u=r[\"strokeDasharray\"];var o=[];if(t){o.push(\"stroke:\"+t);if(typeof n===\"number\"){o.push(\"stroke-opacity:\"+n)}}if(f){o.push(\"fill:\"+f);if(typeof a===\"number\"){o.push(\"fill-opacity:\"+a)}}if(i){o.push(\"stroke-width:\"+i)}if(s){var l=s===\"solid\"?\"none\":u;o.push(\"stroke-dasharray:\"+l.toString())}o.push(\"display:\"+(e.visible?\"block\":\"none\")+\";\");var v=o.join(\";\");return v};return r}(Sa);var Fa=function(){function e(e,r){var i=this;this._dragObjects={sy:{x:0,y:0},Iz:-1,hy:[0,0]};this.B$=[0,0];this._dragging=false;this.z2=new $a;this.D2=new Aa;this.U2=new _a;this.W2=new Oa;this.G2=new ja;this.H2=[];this.lt=false;this.ey=function(){i._map.off(\"dragstart\",i.q2);i._map.off(\"movestart\",i.q2);i._map.off(\"moveend\",i.V2);i._map.off(\"zoomstart\",i.X2);i._map.off(\"zoomend\",i.gb)};this.q2=function(e){if(i._dragging){return}var r=e.target;i._dragging=true;var t=r.getBounds().toJSON();i._dragObjects.hy=r[\"lngLatToCoords\"]([t[0],t[3]])};this.V2=function(e){i._dragging=false;i._map.setNeedUpdate(true)};this.X2=function(e){i.lt=true;i._dragObjects.Iz=e.target.getZoom()};this.gb=function(e){i.lt=false;i._dragObjects.Iz=e.target.getZoom()};var t=e.kv;r._parent=t.querySelector(\".amap-layers\");var n=document.createElement(\"div\");t.appendChild(n);r._container=n;this.GT(e,r);this._map=e;this.ny();this._dragObjects.Iz=e[\"getZoom\"]()}e.prototype.renderFrame=function(e,r,t,i,n,f){this.J2(t);var a=this.Y2(t);if(this._dragging&&!this.lt){this.Z2(t)}else if(r.sr){this.H2=r.sr;var s=document.createDocumentFragment();for(var u=0,o=r.sr;u<o.length;u++){var l=o[u];switch(l.CLASS_NAME){case\"Overlay.Polyline\":case\"Overlay.BezierCurve\":this.z2.O$(l,a,s);break;case\"Overlay.Polygon\":case\"Overlay.Rectangle\":this.D2.O$(l,a,s);break;case\"Overlay.Circle\":this.U2.O$(l,a,s,t);break;case\"Overlay.CircleMarker\":this.W2.O$(l,a,s,t);break;case\"Overlay.Ellipse\":this.G2.O$(l,a,s,t);break}}this.AM.innerHTML=\"\";this.K2();this.AM.appendChild(s)}};e.prototype[\"getContainer\"]=function(){return this.wo};e.prototype.destroy=function(){this.ey()};e.prototype.GT=function(e,r){this.wo=document.createElement(\"div\");this.wo.className=\"amap-layer amap-layer-overlay amap-\"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+\"\";this.wo.style.opacity=r.getLayerConfig().opacity+\"\";this.wo.style.visibility=r.getLayerConfig().visible?\"visible\":\"hidden\";this.AM=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");this.AM.setAttribute(\"xmlns\",\"http://www.w3.org/2000/svg\");this.wo.appendChild(this.AM);e.do.appendChild(this.wo)};e.prototype.J2=function(e){var r=e.viewState.size;this.AM.setAttribute(\"width\",\"\"+r[0]);this.AM.setAttribute(\"height\",\"\"+r[1])};e.prototype.Y2=function(e){var r=e.viewState.boundsCoord;var t=[r[0],r[3]];return{Nm:t,resolution:e.viewState.resolution}};e.prototype.ny=function(){this._map.on(\"dragstart\",this.q2);this._map.on(\"movestart\",this.q2);this._map.on(\"moveend\",this.V2);this._map.on(\"zoomstart\",this.X2);this._map.on(\"zoomend\",this.gb)};e.prototype.Z2=function(e){var r=e.viewState.boundsCoord;var t=[r[0],r[3]];var i=1;var n=M[\"transform\"];var f=n[e.viewState.projectionId].yo(t[0],t[1],this._dragObjects.Iz);var a=n[e.viewState.projectionId].yo(this._dragObjects.hy[0],this._dragObjects.hy[1],this._dragObjects.Iz);this.wo.style.left=(f[0]-a[0])*i*-1+\"px\";this.wo.style.top=(f[1]-a[1])*i*-1+\"px\"};e.prototype.K2=function(){this.B$=[0,0];this.wo.style.left=\"0px\";this.wo.style.top=\"0px\"};return e}();M.DomRender=Ia;M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.ImageLayer\",undefined,mf);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.CanvasLayer\",undefined,mf);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.VectorLayer\",undefined,Fa);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.VectorSvgLayer\",undefined,Fa);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.RasterLayer\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Flexible\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.RoadNet\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Satellite\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Traffic\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.WMS\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.WMTS\",undefined,df);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.SkyLayer\",undefined,Ma);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.IndoorMap\",undefined,vf);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.LabelsLayer\",undefined,Wn);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.CustomLayer\",undefined,nf)})();\n");
_jsload_('VTLayer.js',"!function(){\"use strict\";var o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(t,i)};var t=AMap.getConfig().protocol+\"://fmap0{1,2,3,4}.amap.com/v3/vectormap?key=\"+AMap.getConfig().key+\"&s=rsv3&x=[x]&y=[y]&zoom=[z]\";AMap.getConfig().jscode?t+=\"&jscode=\"+AMap.getConfig().jscode:AMap.getConfig().gaodeserver&&(t=AMap.getConfig().gaodeserver+\"/v3/vectormap?key=\"+AMap.getConfig().key+\"&s=rsv3&x=[x]&y=[y]&zoom=[z]\");var a,i,e,r={id:\"vtLayer\",tileUrl:t,zooms:[2,26],opacity:1,visible:!0,zIndex:2},t=(a=AMap.TileLayer,o(i=s,e=a),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n),s.prototype.getSourceConfig=function(){return{id:this._id||\"tile\",tileUrl:this.Be||\"\",type:\"vectorTile\",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[2,18],projection:this.hl||\"EPS3857\"}},s);function n(){this.constructor=i}function s(t){var i=this;return(t=void 0===t?r:t).id=r.id,t.tileUrl=r.tileUrl,t.zooms=r.zooms,t.opacity=(void 0===t.opacity?r:t).opacity,t.visible=(void 0===t.visible?r:t).visible,t.zIndex=(void 0===t.zIndex?r:t).zIndex,(i=a.call(this,t)||this).type=\"AMap.VTLayer\",i}AMap.VTLayer=t}();\n");
_jsload_('WebGLRender.js',"(function(){\"use strict\";var extendStatics=function(e,r){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)if(r.hasOwnProperty(t))e[t]=r[t]};return extendStatics(e,r)};function __extends(e,r){extendStatics(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var __assign=function(){__assign=Object.assign||function e(r){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))r[n]=t[n]}return r};return __assign.apply(this,arguments)};function __decorate(e,r,t,i){var a=arguments.length,n=a<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,t):i,o;if(typeof Reflect===\"object\"&&typeof Reflect.yV===\"function\")n=Reflect.yV(e,r,t,i);else for(var f=e.length-1;f>=0;f--)if(o=e[f])n=(a<3?o(n):a>3?o(r,t,n):o(r,t))||n;return a>3&&n&&Object.defineProperty(r,t,n),n}function __spreadArrays(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var i=Array(e),a=0,r=0;r<t;r++)for(var n=arguments[r],o=0,f=n.length;o<f;o++,a++)i[a]=n[o];return i}var freeGlobal=typeof global==\"object\"&&global&&global.Object===Object&&global;var freeSelf=typeof self==\"object\"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function(\"return this\")();var Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(e){var r=hasOwnProperty.call(e,symToStringTag),t=e[symToStringTag];try{e[symToStringTag]=undefined;var i=true}catch(e){}var a=nativeObjectToString.call(e);if(i){if(r){e[symToStringTag]=t}else{delete e[symToStringTag]}}return a}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var nullTag=\"[object Null]\",undefinedTag=\"[object Undefined]\";var symToStringTag$1=Symbol?Symbol.toStringTag:undefined;function baseGetTag(e){if(e==null){return e===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return e!=null&&typeof e==\"object\"}var symbolTag=\"[object Symbol]\";function isSymbol(e){return typeof e==\"symbol\"||isObjectLike(e)&&baseGetTag(e)==symbolTag}function arrayMap(e,r){var t=-1,i=e==null?0:e.length,a=Array(i);while(++t<i){a[t]=r(e[t],t,e)}return a}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(e){if(typeof e==\"string\"){return e}if(isArray(e)){return arrayMap(e,baseToString)+\"\"}if(isSymbol(e)){return symbolToString?symbolToString.call(e):\"\"}var r=e+\"\";return r==\"0\"&&1/e==-INFINITY?\"-0\":r}var reWhitespace=/\\s/;function trimmedEndIndex(e){var r=e.length;while(r--&&reWhitespace.test(e.charAt(r))){}return r}var reTrimStart=/^\\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,\"\"):e}function isObject(e){var r=typeof e;return e!=null&&(r==\"object\"||r==\"function\")}var NAN=0/0;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(e){if(typeof e==\"number\"){return e}if(isSymbol(e)){return NAN}if(isObject(e)){var r=typeof e.valueOf==\"function\"?e.valueOf():e;e=isObject(r)?r+\"\":r}if(typeof e!=\"string\"){return e===0?e:+e}e=baseTrim(e);var t=reIsBinary.test(e);return t||reIsOctal.test(e)?freeParseInt(e.slice(2),t?2:8):reIsBadHex.test(e)?NAN:+e}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){if(!e){return e===0?e:0}e=toNumber(e);if(e===INFINITY$1||e===-INFINITY$1){var r=e<0?-1:1;return r*MAX_INTEGER}return e===e?e:0}function toInteger(e){var r=toFinite(e),t=r%1;return r===r?t?r-t:r:0}function identity(e){return e}var asyncTag=\"[object AsyncFunction]\",funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",proxyTag=\"[object Proxy]\";function isFunction(e){if(!isObject(e)){return false}var r=baseGetTag(e);return r==funcTag||r==genTag||r==asyncTag||r==proxyTag}var coreJsData=root[\"__core-js_shared__\"];var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||\"\");return e?\"Symbol(src)_1.\"+e:\"\"}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(e){if(e!=null){try{return funcToString.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp(\"^\"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");function baseIsNative(e){if(!isObject(e)||isMasked(e)){return false}var r=isFunction(e)?reIsNative:reIsHostCtor;return r.test(toSource(e))}function getValue(e,r){return e==null?undefined:e[r]}function getNative(e,r){var t=getValue(e,r);return baseIsNative(t)?t:undefined}var WeakMap=getNative(root,\"WeakMap\");function apply(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(t){var i=0,a=0;return function(){var e=nativeNow(),r=HOT_SPAN-(e-a);a=e;if(r>0){if(++i>=HOT_COUNT){return arguments[0]}}else{i=0}return t.apply(undefined,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,\"defineProperty\");e({},\"\",{});return e}catch(e){}}();var baseSetToString=!defineProperty?identity:function(e,r){return defineProperty(e,\"toString\",{configurable:true,enumerable:false,value:constant(r),writable:true})};var setToString=shortOut(baseSetToString);function arrayEach(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e}function baseFindIndex(e,r,t,i){var a=e.length,n=t+(i?1:-1);while(i?n--:++n<a){if(r(e[n],n,e)){return n}}return-1}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(e,r){var t=typeof e;r=r==null?MAX_SAFE_INTEGER:r;return!!r&&(t==\"number\"||t!=\"symbol\"&&reIsUint.test(e))&&(e>-1&&e%1==0&&e<r)}function baseAssignValue(e,r,t){if(r==\"__proto__\"&&defineProperty){defineProperty(e,r,{configurable:true,enumerable:true,value:t,writable:true})}else{e[r]=t}}function eq(e,r){return e===r||e!==e&&r!==r}var objectProto$3=Object.prototype;var hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(e,r,t){var i=e[r];if(!(hasOwnProperty$2.call(e,r)&&eq(i,t))||t===undefined&&!(r in e)){baseAssignValue(e,r,t)}}function copyObject(e,r,t,i){var a=!t;t||(t={});var n=-1,o=r.length;while(++n<o){var f=r[n];var s=i?i(t[f],e[f],f,t,e):undefined;if(s===undefined){s=e[f]}if(a){baseAssignValue(t,f,s)}else{assignValue(t,f,s)}}return t}var nativeMax=Math.max;function overRest(n,o,f){o=nativeMax(o===undefined?n.length-1:o,0);return function(){var e=arguments,r=-1,t=nativeMax(e.length-o,0),i=Array(t);while(++r<t){i[r]=e[o+r]}r=-1;var a=Array(o+1);while(++r<o){a[r]=e[r]}a[o]=f(i);return apply(n,this,a)}}function baseRest(e,r){return setToString(overRest(e,r,identity),e+\"\")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return typeof e==\"number\"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction(e)}function isIterateeCall(e,r,t){if(!isObject(t)){return false}var i=typeof r;if(i==\"number\"?isArrayLike(t)&&isIndex(r,t.length):i==\"string\"&&r in t){return eq(t[r],e)}return false}function createAssigner(f){return baseRest(function(e,r){var t=-1,i=r.length,a=i>1?r[i-1]:undefined,n=i>2?r[2]:undefined;a=f.length>3&&typeof a==\"function\"?(i--,a):undefined;if(n&&isIterateeCall(r[0],r[1],n)){a=i<3?undefined:a;i=1}e=Object(e);while(++t<i){var o=r[t];if(o){f(e,o,t,a)}}return e})}var objectProto$4=Object.prototype;function isPrototype(e){var r=e&&e.constructor,t=typeof r==\"function\"&&r.prototype||objectProto$4;return e===t}function baseTimes(e,r){var t=-1,i=Array(e);while(++t<e){i[t]=r(t)}return i}var argsTag=\"[object Arguments]\";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;var propertyIsEnumerable=objectProto$5.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$3.call(e,\"callee\")&&!propertyIsEnumerable.call(e,\"callee\")};function stubFalse(){return false}var freeExports=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module==\"object\"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Zb:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1=\"[object Arguments]\",arrayTag=\"[object Array]\",boolTag=\"[object Boolean]\",dateTag=\"[object Date]\",errorTag=\"[object Error]\",funcTag$1=\"[object Function]\",mapTag=\"[object Map]\",numberTag=\"[object Number]\",objectTag=\"[object Object]\",regexpTag=\"[object RegExp]\",setTag=\"[object Set]\",stringTag=\"[object String]\",weakMapTag=\"[object WeakMap]\";var arrayBufferTag=\"[object ArrayBuffer]\",dataViewTag=\"[object DataView]\",float32Tag=\"[object Float32Array]\",float64Tag=\"[object Float64Array]\",int8Tag=\"[object Int8Array]\",int16Tag=\"[object Int16Array]\",int32Tag=\"[object Int32Array]\",uint8Tag=\"[object Uint8Array]\",uint8ClampedTag=\"[object Uint8ClampedArray]\",uint16Tag=\"[object Uint16Array]\",uint32Tag=\"[object Uint32Array]\";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(r){return function(e){return r(e)}}var freeExports$1=typeof exports==\"object\"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&typeof module==\"object\"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb(\"util\").types;if(e){return e}return freeProcess&&freeProcess.tg&&freeProcess.tg(\"util\")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.rg;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(e,r){var t=isArray(e),i=!t&&isArguments(e),a=!t&&!i&&isBuffer(e),n=!t&&!i&&!a&&isTypedArray(e),o=t||i||a||n,f=o?baseTimes(e.length,String):[],s=f.length;for(var u in e){if((r||hasOwnProperty$4.call(e,u))&&!(o&&(u==\"length\"||a&&(u==\"offset\"||u==\"parent\")||n&&(u==\"buffer\"||u==\"byteLength\"||u==\"byteOffset\")||isIndex(u,s)))){f.push(u)}}return f}function overArg(r,t){return function(e){return r(t(e))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(e){if(!isPrototype(e)){return nativeKeys(e)}var r=[];for(var t in Object(e)){if(hasOwnProperty$5.call(e,t)&&t!=\"constructor\"){r.push(t)}}return r}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;var assign=createAssigner(function(e,r){if(isPrototype(r)||isArrayLike(r)){copyObject(r,keys(r),e);return}for(var t in r){if(hasOwnProperty$6.call(r,t)){assignValue(e,t,r[t])}}});var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(e,r){if(isArray(e)){return false}var t=typeof e;if(t==\"number\"||t==\"symbol\"||t==\"boolean\"||e==null||isSymbol(e)){return true}return reIsPlainProp.test(e)||!reIsDeepProp.test(e)||r!=null&&e in Object(r)}var nativeCreate=getNative(Object,\"create\");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(e){var r=this.has(e)&&delete this.ng[e];this.size-=r?1:0;return r}var HASH_UNDEFINED=\"__lodash_hash_undefined__\";var objectProto$9=Object.prototype;var hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashGet(e){var r=this.ng;if(nativeCreate){var t=r[e];return t===HASH_UNDEFINED?undefined:t}return hasOwnProperty$7.call(r,e)?r[e]:undefined}var objectProto$a=Object.prototype;var hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashHas(e){var r=this.ng;return nativeCreate?r[e]!==undefined:hasOwnProperty$8.call(r,e)}var HASH_UNDEFINED$1=\"__lodash_hash_undefined__\";function hashSet(e,r){var t=this.ng;this.size+=this.has(e)?0:1;t[e]=nativeCreate&&r===undefined?HASH_UNDEFINED$1:r;return this}function Hash(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype[\"delete\"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.ng=[];this.size=0}function assocIndexOf(e,r){var t=e.length;while(t--){if(eq(e[t][0],r)){return t}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(e){var r=this.ng,t=assocIndexOf(r,e);if(t<0){return false}var i=r.length-1;if(t==i){r.pop()}else{splice.call(r,t,1)}--this.size;return true}function listCacheGet(e){var r=this.ng,t=assocIndexOf(r,e);return t<0?undefined:r[t][1]}function listCacheHas(e){return assocIndexOf(this.ng,e)>-1}function listCacheSet(e,r){var t=this.ng,i=assocIndexOf(t,e);if(i<0){++this.size;t.push([e,r])}else{t[i][1]=r}return this}function ListCache(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype[\"delete\"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,\"Map\");function mapCacheClear(){this.size=0;this.ng={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(e){var r=typeof e;return r==\"string\"||r==\"number\"||r==\"symbol\"||r==\"boolean\"?e!==\"__proto__\":e===null}function getMapData(e,r){var t=e.ng;return isKeyable(r)?t[typeof r==\"string\"?\"string\":\"hash\"]:t.map}function mapCacheDelete(e){var r=getMapData(this,e)[\"delete\"](e);this.size-=r?1:0;return r}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,r){var t=getMapData(this,e),i=t.size;t.set(e,r);this.size+=t.size==i?0:1;return this}function MapCache(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype[\"delete\"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT=\"Expected a function\";function memoize(a,n){if(typeof a!=\"function\"||n!=null&&typeof n!=\"function\"){throw new TypeError(FUNC_ERROR_TEXT)}var o=function(){var e=arguments,r=n?n.apply(this,e):e[0],t=o.cache;if(t.has(r)){return t.get(r)}var i=a.apply(this,e);o.cache=t.set(r,i)||t;return i};o.cache=new(memoize.Cache||MapCache);return o}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var r=memoize(e,function(e){if(t.size===MAX_MEMOIZE_SIZE){t.clear()}return e});var t=r.cache;return r}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(e){var a=[];if(e.charCodeAt(0)===46){a.push(\"\")}e.replace(rePropName,function(e,r,t,i){a.push(t?i.replace(reEscapeChar,\"$1\"):r||e)});return a});function toString(e){return e==null?\"\":baseToString(e)}function castPath(e,r){if(isArray(e)){return e}return isKey(e,r)?[e]:stringToPath(toString(e))}var INFINITY$2=1/0;function toKey(e){if(typeof e==\"string\"||isSymbol(e)){return e}var r=e+\"\";return r==\"0\"&&1/e==-INFINITY$2?\"-0\":r}function baseGet(e,r){r=castPath(r,e);var t=0,i=r.length;while(e!=null&&t<i){e=e[toKey(r[t++])]}return t&&t==i?e:undefined}function get(e,r,t){var i=e==null?undefined:baseGet(e,r);return i===undefined?t:i}function arrayPush(e,r){var t=-1,i=r.length,a=e.length;while(++t<i){e[a+t]=r[t]}return e}function stackClear(){this.ng=new ListCache;this.size=0}function stackDelete(e){var r=this.ng,t=r[\"delete\"](e);this.size=r.size;return t}function stackGet(e){return this.ng.get(e)}function stackHas(e){return this.ng.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,r){var t=this.ng;if(t instanceof ListCache){var i=t.ng;if(!Map||i.length<LARGE_ARRAY_SIZE-1){i.push([e,r]);this.size=++t.size;return this}t=this.ng=new MapCache(i)}t.set(e,r);this.size=t.size;return this}function Stack(e){var r=this.ng=new ListCache(e);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype[\"delete\"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(e,r){var t=-1,i=e==null?0:e.length,a=0,n=[];while(++t<i){var o=e[t];if(r(o,t,e)){n[a++]=o}}return n}function stubArray(){return[]}var objectProto$b=Object.prototype;var propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(r){if(r==null){return[]}r=Object(r);return arrayFilter(nativeGetSymbols(r),function(e){return propertyIsEnumerable$1.call(r,e)})};function baseGetAllKeys(e,r,t){var i=r(e);return isArray(e)?i:arrayPush(i,t(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols)}var DataView=getNative(root,\"DataView\");var Promise$1=getNative(root,\"Promise\");var Set=getNative(root,\"Set\");var mapTag$1=\"[object Map]\",objectTag$1=\"[object Object]\",promiseTag=\"[object Promise]\",setTag$1=\"[object Set]\",weakMapTag$1=\"[object WeakMap]\";var dataViewTag$1=\"[object DataView]\";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function(e){var r=baseGetTag(e),t=r==objectTag$1?e.constructor:undefined,i=t?toSource(t):\"\";if(i){switch(i){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return r}}var getTag$1=getTag;var Uint8Array$1=root.Uint8Array;var HASH_UNDEFINED$2=\"__lodash_hash_undefined__\";function setCacheAdd(e){this.ng.set(e,HASH_UNDEFINED$2);return this}function setCacheHas(e){return this.ng.has(e)}function SetCache(e){var r=-1,t=e==null?0:e.length;this.ng=new MapCache;while(++r<t){this.add(e[r])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)){return true}}return false}function cacheHas(e,r){return e.has(r)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(e,r,t,i,a,n){var o=t&COMPARE_PARTIAL_FLAG,f=e.length,s=r.length;if(f!=s&&!(o&&s>f)){return false}var u=n.get(e);var l=n.get(r);if(u&&l){return u==r&&l==e}var v=-1,c=true,h=t&COMPARE_UNORDERED_FLAG?new SetCache:undefined;n.set(e,r);n.set(r,e);while(++v<f){var d=e[v],_=r[v];if(i){var g=o?i(_,d,v,r,e,n):i(d,_,v,e,r,n)}if(g!==undefined){if(g){continue}c=false;break}if(h){if(!arraySome(r,function(e,r){if(!cacheHas(h,r)&&(d===e||a(d,e,t,i,n))){return h.push(r)}})){c=false;break}}else if(!(d===_||a(d,_,t,i,n))){c=false;break}}n[\"delete\"](e);n[\"delete\"](r);return c}function mapToArray(e){var t=-1,i=Array(e.size);e.forEach(function(e,r){i[++t]=[r,e]});return i}function setToArray(e){var r=-1,t=Array(e.size);e.forEach(function(e){t[++r]=e});return t}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1=\"[object Boolean]\",dateTag$1=\"[object Date]\",errorTag$1=\"[object Error]\",mapTag$2=\"[object Map]\",numberTag$1=\"[object Number]\",regexpTag$1=\"[object RegExp]\",setTag$2=\"[object Set]\",stringTag$1=\"[object String]\",symbolTag$1=\"[object Symbol]\";var arrayBufferTag$1=\"[object ArrayBuffer]\",dataViewTag$2=\"[object DataView]\";var symbolProto$1=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(e,r,t,i,a,n,o){switch(t){case dataViewTag$2:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset){return false}e=e.buffer;r=r.buffer;case arrayBufferTag$1:if(e.byteLength!=r.byteLength||!n(new Uint8Array$1(e),new Uint8Array$1(r))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+e,+r);case errorTag$1:return e.name==r.name&&e.message==r.message;case regexpTag$1:case stringTag$1:return e==r+\"\";case mapTag$2:var f=mapToArray;case setTag$2:var s=i&COMPARE_PARTIAL_FLAG$1;f||(f=setToArray);if(e.size!=r.size&&!s){return false}var u=o.get(e);if(u){return u==r}i|=COMPARE_UNORDERED_FLAG$1;o.set(e,r);var l=equalArrays(f(e),f(r),i,a,n,o);o[\"delete\"](e);return l;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(e)==symbolValueOf.call(r)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$c=Object.prototype;var hasOwnProperty$9=objectProto$c.hasOwnProperty;function equalObjects(e,r,t,i,a,n){var o=t&COMPARE_PARTIAL_FLAG$2,f=getAllKeys(e),s=f.length,u=getAllKeys(r),l=u.length;if(s!=l&&!o){return false}var v=s;while(v--){var c=f[v];if(!(o?c in r:hasOwnProperty$9.call(r,c))){return false}}var h=n.get(e);var d=n.get(r);if(h&&d){return h==r&&d==e}var _=true;n.set(e,r);n.set(r,e);var g=o;while(++v<s){c=f[v];var y=e[c],m=r[c];if(i){var p=o?i(m,y,c,r,e,n):i(y,m,c,e,r,n)}if(!(p===undefined?y===m||a(y,m,t,i,n):p)){_=false;break}g||(g=c==\"constructor\")}if(_&&!g){var b=e.constructor,x=r.constructor;if(b!=x&&(\"constructor\"in e&&\"constructor\"in r)&&!(typeof b==\"function\"&&b instanceof b&&typeof x==\"function\"&&x instanceof x)){_=false}}n[\"delete\"](e);n[\"delete\"](r);return _}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2=\"[object Arguments]\",arrayTag$1=\"[object Array]\",objectTag$2=\"[object Object]\";var objectProto$d=Object.prototype;var hasOwnProperty$a=objectProto$d.hasOwnProperty;function baseIsEqualDeep(e,r,t,i,a,n){var o=isArray(e),f=isArray(r),s=o?arrayTag$1:getTag$1(e),u=f?arrayTag$1:getTag$1(r);s=s==argsTag$2?objectTag$2:s;u=u==argsTag$2?objectTag$2:u;var l=s==objectTag$2,v=u==objectTag$2,c=s==u;if(c&&isBuffer(e)){if(!isBuffer(r)){return false}o=true;l=false}if(c&&!l){n||(n=new Stack);return o||isTypedArray(e)?equalArrays(e,r,t,i,a,n):equalByTag(e,r,s,t,i,a,n)}if(!(t&COMPARE_PARTIAL_FLAG$3)){var h=l&&hasOwnProperty$a.call(e,\"__wrapped__\"),d=v&&hasOwnProperty$a.call(r,\"__wrapped__\");if(h||d){var _=h?e.value():e,g=d?r.value():r;n||(n=new Stack);return a(_,g,t,i,n)}}if(!c){return false}n||(n=new Stack);return equalObjects(e,r,t,i,a,n)}function baseIsEqual(e,r,t,i,a){if(e===r){return true}if(e==null||r==null||!isObjectLike(e)&&!isObjectLike(r)){return e!==e&&r!==r}return baseIsEqualDeep(e,r,t,i,baseIsEqual,a)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(e,r,t,i){var a=t.length,n=a,o=!i;if(e==null){return!n}e=Object(e);while(a--){var f=t[a];if(o&&f[2]?f[1]!==e[f[0]]:!(f[0]in e)){return false}}while(++a<n){f=t[a];var s=f[0],u=e[s],l=f[1];if(o&&f[2]){if(u===undefined&&!(s in e)){return false}}else{var v=new Stack;if(i){var c=i(u,l,s,e,r,v)}if(!(c===undefined?baseIsEqual(l,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,i,v):c)){return false}}}return true}function isStrictComparable(e){return e===e&&!isObject(e)}function getMatchData(e){var r=keys(e),t=r.length;while(t--){var i=r[t],a=e[i];r[t]=[i,a,isStrictComparable(a)]}return r}function matchesStrictComparable(r,t){return function(e){if(e==null){return false}return e[r]===t&&(t!==undefined||r in Object(e))}}function baseMatches(r){var t=getMatchData(r);if(t.length==1&&t[0][2]){return matchesStrictComparable(t[0][0],t[0][1])}return function(e){return e===r||baseIsMatch(e,r,t)}}function baseHasIn(e,r){return e!=null&&r in Object(e)}function hasPath(e,r,t){r=castPath(r,e);var i=-1,a=r.length,n=false;while(++i<a){var o=toKey(r[i]);if(!(n=e!=null&&t(e,o))){break}e=e[o]}if(n||++i!=a){return n}a=e==null?0:e.length;return!!a&&isLength(a)&&isIndex(o,a)&&(isArray(e)||isArguments(e))}function hasIn(e,r){return e!=null&&hasPath(e,r,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(t,i){if(isKey(t)&&isStrictComparable(i)){return matchesStrictComparable(toKey(t),i)}return function(e){var r=get(e,t);return r===undefined&&r===i?hasIn(e,t):baseIsEqual(i,r,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(r){return function(e){return e==null?undefined:e[r]}}function basePropertyDeep(r){return function(e){return baseGet(e,r)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){if(typeof e==\"function\"){return e}if(e==null){return identity}if(typeof e==\"object\"){return isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e)}return property(e)}function createBaseFor(s){return function(e,r,t){var i=-1,a=Object(e),n=t(e),o=n.length;while(o--){var f=n[s?o:++i];if(r(a[f],f,a)===false){break}}return e}}var baseFor=createBaseFor();function baseForOwn(e,r){return e&&baseFor(e,r,keys)}function createBaseEach(n,o){return function(e,r){if(e==null){return e}if(!isArrayLike(e)){return n(e,r)}var t=e.length,i=o?t:-1,a=Object(e);while(o?i--:++i<t){if(r(a[i],i,a)===false){break}}return e}}var baseEach=createBaseEach(baseForOwn);function castFunction(e){return typeof e==\"function\"?e:identity}function forEach(e,r){var t=isArray(e)?arrayEach:baseEach;return t(e,castFunction(r))}function arrayEvery(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(!r(e[t],t,e)){return false}}return true}function baseEvery(e,i){var a=true;baseEach(e,function(e,r,t){a=!!i(e,r,t);return a});return a}function every(e,r,t){var i=isArray(e)?arrayEvery:baseEvery;if(t&&isIterateeCall(e,r,t)){r=undefined}return i(e,baseIteratee(r))}function createFind(o){return function(e,r,t){var i=Object(e);if(!isArrayLike(e)){var a=baseIteratee(r);e=keys(e);r=function(e){return a(i[e],e,i)}}var n=o(e,r,t);return n>-1?i[a?e[n]:n]:undefined}}var nativeMax$1=Math.max;function findIndex(e,r,t){var i=e==null?0:e.length;if(!i){return-1}var a=t==null?0:toInteger(t);if(a<0){a=nativeMax$1(i+a,0)}return baseFindIndex(e,baseIteratee(r),a)}var find=createFind(findIndex);function baseMap(e,i){var a=-1,n=isArrayLike(e)?Array(e.length):[];baseEach(e,function(e,r,t){n[++a]=i(e,r,t)});return n}function map(e,r){var t=isArray(e)?arrayMap:baseMap;return t(e,baseIteratee(r))}function isEqual(e,r){return baseIsEqual(e,r)}function isUndefined(e){return e===undefined}function baseSome(e,i){var a;baseEach(e,function(e,r,t){a=i(e,r,t);return!a});return!!a}function some(e,r,t){var i=isArray(e)?arraySome:baseSome;if(t&&isIterateeCall(e,r,t)){r=undefined}return i(e,baseIteratee(r))}var LocalZoom=13;var zoomRange=[2,26];var CONSTS={ID:\"__id__\",Rp:zoomRange[1],Mp:zoomRange[0],jp:.8,Pp:.2,YM:5,KM:{dom:\"div\",id:\"_amap_custom_labellayer_div_\",className:\"amap-layer\",style:{cssText:\"position:absolute;top:0;left:0;\",zIndex:\"\",width:\"\",height:\"\",visible:\"\"}},Dp:{Op:180,Ad:70,Td:360,t1:300,e1:30,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:\"top\",QM:\"right\",tj:\"bottom\",LEFT:\"left\",nj:\"middle\",ij:\"center\",ej:\"alphabetic\"},oj:{CLICK:\"click\",MOUSEOVER:\"mouseover\",MOUSEOUT:\"mouseout\",MOUSEMOVE:\"mousemove\",MOUSEDOWN:\"mousedown\",MOUSEUP:\"mouseup\",aj:\"touchstart\",uj:\"touchend\"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:zoomRange,icon:{type:\"image\",image:\"://visuallocal.amap.com/public/poi-marker.png\",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:\"bottom-center\",angel:0,_2:true,zooms:zoomRange},text:{type:\"billboard\",direction:\"top\",offset:[0,0],zooms:zoomRange,style:{fj:6,fontFamily:\"sans-serif\",fontSize:12,fontWeight:\"normal\",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:\"transparent\",padding:[3,3,3,3],backgroundColor:\"\"}}},hj:{cj:{opacity:.2},vj:\"fadeIn\",lj:\"fadeOut\",dj:{bj:\"start\",RUNNING:\"running\",pj:\"complete\"},yj:{mj:\"opacity\",gj:\"size\"}},_d:3,wj:\"_AMap_sdf_com_words\",Mj:128,pc:[\"://sdf.amap.com\",\"://sdf01.amap.com\",\"://sdf02.amap.com\",\"://sdf03.amap.com\",\"://sdf04.amap.com\"],sp:4,Cd:200/256,Ld:205/256,Aj:{kj:\"纹理加载失败，请重试\",Oj:\"资源加载失败，请重试\"},xj:\"bufferChanged\",Ij:\"frameBufferChanged\",Tj:\"combineFrameBufferChanged\",ic:1,ud:13,Cj:12,Ej:\"__icon_combination\",Nj:\"__text_combination\",Lj:{file:{0:\"://vdata.amap.com/style_icon/2.0/icon-normal-big.png\",1:\"://vdata.amap.com/style_icon/2.0/icon-biz-big.png\"},size:[40,40],Rj:10},Kp:{buffer:3,family:\"ios9\",size:24},Color:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:\"sdf\",RB:\"sdfJson\",FN:\"version\"};var StaticSourceID;(function(e){e[\"nebula\"]=\"nebula\";e[\"nebulaLabel\"]=\"nebulaLabel\"})(StaticSourceID||(StaticSourceID={}));var DangerousFontSize=24;var EnumTextureIndex;(function(e){e[e[\"dynamic\"]=0]=\"dynamic\";e[e[\"icon\"]=1]=\"icon\"})(EnumTextureIndex||(EnumTextureIndex={}));var TextureMaxLength=2;var ImageStatus;(function(e){e[\"BLOB\"]=\"blob\";e[\"TOLOAD\"]=\"toload\";e[\"LOADING\"]=\"loading\";e[\"LOADED\"]=\"loaded\";e[\"UNLOADED\"]=\"unloaded\";e[\"ERROR\"]=\"error\";e[\"RELOADING\"]=\"reloading\";e[\"UNCOMBINED\"]=\"uncombined\";e[\"COMBINING\"]=\"combining\";e[\"COMBINED\"]=\"combined\"})(ImageStatus||(ImageStatus={}));var ColorMode=function(){function e(e,r){this.Ci=e;this.mask=r}e.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771};e.tH=[true,true,true,true];e.iH=[false,false,false,false];e.disabled=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.iH);e.Mi=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.tH);e.Ri=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.zi=new e([e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.Si=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.g2=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ZERO],e.tH);return e}();var StencilMode=function(){function e(e,r,t){this.stencilFunc=e;this.stencilOp=r;this.stencilMask=t}e.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683};e.disable=new e({test:e.wi.ALWAYS,Li:0,mask:0},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.Ai=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.writeWithStencil=new e({test:e.wi.LESS,Li:240,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nH=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.$H=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.DH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.FH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.DECR],255);e.PH=new e({test:e.wi.ALWAYS,Li:255,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.HH=new e({test:e.wi.NOTEQUAL,Li:1,mask:1},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.js=new e({test:e.wi.NOTEQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nbStencil=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.outseaStencil=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.TE=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.FE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.ZERO],255);e.test=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.ZERO,e.wi.ZERO,e.wi.INCR],255);e.HE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.m2=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.b2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.C2=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.S2=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);return e}();var globalInstance=typeof self===undefined?window:self;var assert=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}if(!Boolean(e)){console.log.apply(console,r)}};var URLObject=typeof window!==\"undefined\"?window.URL||window.webkitURL||{createObjectURL:function(){console.error(\"URL not exist, please use more popular browser\")}}:URL||webkitURL||{createObjectURL:function(){console.error(\"URL not exist, please use more popular browser\")}};var AbstractBaseValue=function(){function e(e){this.Oi=same;this.gl=e.gl;this.default=this.Fi();this.current=this.Fi();this.Pi=false}e.prototype.set=function(e){this.current=e};e.prototype.get=function(){return this.current};e.prototype.setDirty=function(){this.Pi=true};e.prototype.reset=function(){this.set(this.default)};e.prototype.ji=function(e){return this.Pi||!this.Oi(e,this.current)};return e}();var Blend=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.BLEND)}else{r.disable(r.BLEND)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var Viewport=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};r.prototype.set=function(e){var r=this.current;if(e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&!this.Pi){return}this.gl.viewport(e[0],e[1],e[2],e[3]);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthTest=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.DEPTH_TEST);r.depthFunc(r.LEQUAL)}else{r.disable(r.DEPTH_TEST)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.DEPTH_TEST,M2:this.gl.LESS}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthFunc(e.M2);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilTest=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.STENCIL_TEST)}else{r.disable(r.STENCIL_TEST)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilFunc(e.test,e.Li,e.mask);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilOp=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).stencilOp.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var CullFace=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.CULL_FACE)}else{r.disable(r.CULL_FACE)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendFunc=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendFunc(e[0],e[1]);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendFuncSeparate=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl.ONE;var r=this.gl.ZERO;return[e,r,e,r]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendFuncSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendEquation=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.FUNC_ADD};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendEquation(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BlendEquationSeparate=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendEquationSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var CullFaceSide=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return e.BACK};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.cullFace(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var FrontFace=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.CCW};r.prototype.set=function(e){if(!this.ji(e)&&!this.Pi){return}this.gl.frontFace(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 1};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearDepth(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ColorClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[0,0,0,0]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).clearColor.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilClear=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearStencil(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ColorMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[true,true,true,true]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).colorMask.apply(r,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var DepthMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return true};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthMask(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var StencilMask=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 65535};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilMask(e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindFramebuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindProgram=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}if(this.current&&this.current!==e){this.current.Ni()}if(e){this.gl.useProgram(e.$i)}else{this.gl.useProgram(null)}this.current=e;this.Pi=false};return r}(AbstractBaseValue);var ActiveTextureUnit=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.TEXTURE0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.activeTexture(this.gl.TEXTURE0+e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindTexture=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindTexture(r.TEXTURE_2D,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var AbstractFramebufferAttachment=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e)||this;t.context=e;t.parent=r;return t}return e}(AbstractBaseValue);var ColorAttachment=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;var t=this.context.bindFramebuffer.current;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);this.context.bindFramebuffer.set(t);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteTexture(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(AbstractFramebufferAttachment);var DepthAttachment=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteRenderbuffer(e);this.current=null}};r.prototype.Fi=function(){return null};return r}(AbstractFramebufferAttachment);var BindArrayBuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(e&&e.xe){assert(true,\"WebGLBuffer deleted\")}if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var BindElementArrayBuffer=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var UnpackFlipYWebgl=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,e);this.current=e;this.Pi=false};return r}(AbstractBaseValue);var Framebuffer=function(){function e(e,r,t){this.context=e;this.width=r;this.height=t;var i=e.gl;var a=i.createFramebuffer();if(!a){throw Error(\"createFramebuffer error\")}this.framebuffer=a;this.Wi=new ColorAttachment(e,this);this.Gi=new DepthAttachment(e,this)}e.prototype.resize=function(e,r){this.Wi.Bi();this.Gi.Bi();this.width=e;this.height=r};e.prototype.destroy=function(){var e=this.context.gl;this.Wi.Bi();this.Gi.Bi();e.deleteFramebuffer(this.framebuffer)};e.prototype.get=function(){return this.framebuffer};return e}();var UglyBrowser=M[\"Support\"];var Texture=function(){function e(e,r,t){this.context=e;this.texture=e.gl.createTexture();this.update(r,t)}e.prototype.update=function(e,r,t){var i=e.width,a=e.height;var n=r&&r.resize||(!this.size||this.size[0]!==i||this.size[1]!==a)&&!t;var o=this.context.gl;var f=r&&r.format||o.RGBA;this.Zi=Boolean(r&&r.Zi);o.bindTexture(o.TEXTURE_2D,this.texture);if(r&&r.Yi){o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)}if(r&&r.flipY){this.context.hB.set(true)}else{this.context.hB.set(false)}if(n){this.size=[i,a];if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||UglyBrowser.imageBitmap&&e instanceof ImageBitmap){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e)}else{o.texImage2D(o.TEXTURE_2D,0,f,i,a,0,f,o.UNSIGNED_BYTE,e.data)}}else{var s=t||{x:0,y:0},u=s.x,l=s.y;if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||UglyBrowser.imageBitmap&&e instanceof ImageBitmap){o.texSubImage2D(o.TEXTURE_2D,0,u,l,o.RGBA,o.UNSIGNED_BYTE,e)}else{o.texSubImage2D(o.TEXTURE_2D,0,u,l,i,a,f,o.UNSIGNED_BYTE,e.data)}}if(this.Zi&&this.Vi()){o.generateMipmap(o.TEXTURE_2D)}if(r&&r.Yi){o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0)}o.bindTexture(o.TEXTURE_2D,null)};e.prototype.generateMipmap=function(){if(this.Vi()){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,this.texture);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}else{console.log(\"generateMipmap error\")}};e.prototype.bind=function(e,r,t){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture);if(r&&r!==this.Xi){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r);this.Xi=r}if(t&&t!==this.Hi){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t);this.Hi=t}if(e&&e!==this.wrap){i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e);this.wrap=e}};e.prototype.Vi=function(){return Math.log(this.size[0])/Math.LN2%1===0&&Math.log(this.size[1])/Math.LN2%1===0};e.prototype.destroy=function(){var e=this.context.gl;e.deleteTexture(this.texture);this.texture=null};e.prototype.get=function(){return this.texture};return e}();function diffArray(e,r){if(e===r){return false}if(e.length!==r.length){return true}for(var t=0,i=e.length;t<i;t++){if(e[t]!==r[t]){return true}}return false}function diffType(e,r){if(typeof e!==typeof r){return true}if(typeof e===\"object\"){return Array.isArray(e)!==Array.isArray(r)}return false}function fastDiff(e,r){return e!==r}function diff(e,r){if(diffType(e,r)){return true}switch(typeof e){case\"boolean\":case\"number\":case\"string\":return fastDiff(e,r);case\"object\":return Array.isArray(e)?diffArray(e,r):fastDiff(e,r);default:return true}}function same(e,r){return!diff(e,r)}var Context=function(){function e(e){this.te=same;this.gl=e;this.Z_=this.gl.getSupportedExtensions();this.extensions={};this.be=new Viewport(this);this.ie=new Blend(this);this.ee=new BlendFuncSeparate(this);this.blendEquation=new BlendEquation(this);this.cullFace=new CullFace(this);this.he=new CullFaceSide(this);this.frontFace=new FrontFace(this);this.depthTest=new DepthTest(this);this.depthFunc=new DepthFunc(this);this.se=new StencilTest(this);this.stencilFunc=new StencilFunc(this);this.stencilOp=new StencilOp(this);this.stencilMask=new StencilMask(this);this.le=new StencilClear(this);this.ue=new ColorClear(this);this.ce=new DepthClear(this);this.bindFramebuffer=new BindFramebuffer(this);this.ge=new BindProgram(this);this.bindTexture=new BindTexture(this);this.activeTexture=new ActiveTextureUnit(this);this.de=new BindArrayBuffer(this);this.me=new BindElementArrayBuffer(this);this.colorMask=new ColorMask(this);this.depthMask=new DepthMask(this);this.ye={};this.hB=new UnpackFlipYWebgl(this)}e.prototype.clear=function(e){var r=0;var t=this.gl;if(e.color){r=r|t.COLOR_BUFFER_BIT}if(e.depth){r=r|t.DEPTH_BUFFER_BIT}if(e.stencil){r=r|t.STENCIL_BUFFER_BIT}if(r!==0){t.clear(r)}};e.prototype.Qi=function(e){if(this.te(e,ColorMode.Mi)){this.ie.set(false);this.colorMask.set(ColorMode.tH)}else if(this.te(e,ColorMode.disabled)){this.colorMask.set(ColorMode.iH)}else{this.ie.set(true);this.ee.set(e.Ci);this.colorMask.set(e.mask)}};e.prototype.ne=function(e){this.depthTest.set(e)};e.prototype.ae=function(e){if(this.te(e.stencilFunc.test,StencilMode.wi.ALWAYS)&&!e.stencilMask){this.se.set(false)}else{this.se.set(true);this.stencilFunc.set(e.stencilFunc);this.stencilOp.set(e.stencilOp);this.stencilMask.set(e.stencilMask)}};e.prototype.re=function(e){if(!e.enable){this.cullFace.set(false)}else{this.cullFace.set(e.enable);this.he.set(e.mode);this.frontFace.set(e.frontFace)}};e.prototype.reset=function(){this.ie.reset();this.ee.reset();this.blendEquation.reset();this.cullFace.reset();this.he.reset();this.frontFace.reset();this.depthTest.reset();this.se.reset();this.stencilFunc.reset();this.stencilOp.reset();this.stencilMask.reset();this.le.reset();this.ue.reset();this.ce.reset();this.bindFramebuffer.set(null)};e.prototype.createFramebuffer=function(e,r){return new Framebuffer(this,e,r)};e.prototype.createRenderbuffer=function(e,r){var t=this.gl;var i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i);t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,r);if(!i){throw Error(\"bindRenderbuffer error\")}return i};e.prototype.createTexture=function(e,r){return new Texture(this,e,r)};e.prototype.fe=function(e,r,t){if(t===void 0){t=\"STATIC_DRAW\"}var i=this.gl;var a=i.createBuffer();if(!a){throw Error(\"createBuffer error\")}a.context=this;a.size=r;a.length=e.byteLength/r;var n=this.de.current;this.de.set(a);i.bufferData(i.ARRAY_BUFFER,e,i[t]);this.de.set(n);return a};e.prototype.ve=function(e){var r=this.gl;var t=r.createBuffer();if(!t){throw Error(\"createBuffer error\")}t.context=this;t.length=e.length;t.type=\"int\";t.G_=true;if(e instanceof Uint16Array){t.size=16}else{t.size=32}var i=this.me.current;this.me.set(t);r.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.STATIC_DRAW);this.me.set(i);return t};e.prototype.getSize=function(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}};e.prototype.getParameter=function(e){if(!this.ye[e]){this.ye[e]=this.gl.getParameter(this.gl[e])}return this.ye[e]};e.prototype.deleteBuffer=function(e){this.de.set(null);this.me.set(null);this.gl.deleteBuffer(e);e.xe=true};e.prototype.getExtension=function(e){if(this.extensions[e]){return this.extensions[e]}if(!this.Z_){console.error(\"WebGL: supportedExtension not exist\");return}if(this.Z_.indexOf(e)<0){console.error(\"WebGL: supportedExtension not exist \"+e);return}if(!this.extensions[e]){this.extensions[e]=this.gl.getExtension(e);if(!this.extensions[e]){console.error(\"WebGL: getExtension \"+e+\" failed\")}}};e.prototype.setDirty=function(){this.ge.setDirty();this.bindTexture.setDirty();this.bindFramebuffer.setDirty();this.de.setDirty();this.me.setDirty();this.be.setDirty();this.activeTexture.setDirty();this.colorMask.setDirty();this.depthMask.setDirty();this.se.setDirty();this.le.setDirty();this.stencilMask.setDirty();this.stencilFunc.setDirty();this.stencilOp.setDirty();this.colorMask.setDirty();this.ie.setDirty();this.blendEquation.setDirty();this.ee.setDirty();this.depthTest.setDirty();this.cullFace.setDirty();this.he.setDirty();this.frontFace.setDirty();this.hB.setDirty()};return e}();var CullFaceMode=function(){function e(e,r,t){this.enable=e;this.mode=r;this.frontFace=t}e.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032};e.we=new e(false,e.wi.FRONT_AND_BACK,e.wi.CW);e._e=new e(true,e.wi.FRONT,e.wi.CW);e.back=new e(true,e.wi.BACK,e.wi.CW);return e}();var Util=AMap[\"Util\"];var LayerRender=function(){function e(){this.hS=Util.stamp(this)}e.prototype.destroy=function(){};e.prototype.fH=function(e){var r=e.Ro;var t=e.localCoord.center;var i=[r[0]-t[0],r[1]-t[1]];var a=[r[0]-t[0],r[3]-t[1]];var n=[r[2]-t[0],r[1]-t[1]];var o=[r[2]-t[0],r[3]-t[1]];return __spreadArrays(i,n,a,n,o,a)};e.prototype.OH=function(e,r){if(e===void 0){e=false}if(!r){return StencilMode.nH}if(r&&!e){return StencilMode.DH}if(r&&e){return StencilMode.HH}};e.prototype.BH=function(e,r){if(e===void 0){e=false}if(!r){return StencilMode.$H}if(r&&!e){return StencilMode.FH}if(r&&e){return StencilMode.PH}};return e}();var Support=M[\"Support\"];var scale=Support.scale;var LabelsRender=function(){function e(){this.Lz={De:[],sizes:[]};this._f=null;this.CG=0}e.prototype.Mz=function(e){var r=e.map,t=e.R_,i=e.z_,a=e.$i;this._map=r;this.Mf=t;this.ac=i;this._f=a};e.prototype.Ce=function(e,r,t,i){if(t===void 0){t={}}var a=CONSTS.ud,n=CONSTS.sp;var o=this._f;var f=e.viewState,s=e.size;if(!f){return i.iterator}var u=f.mvpMatrix,l=f.zoom,v=f.viewMode;var c=s[0],h=s[1];var d=i.Sa,_=i.from,g=_===void 0?\"inner\":_,y=i.opacity,m=y===void 0?1:y,p=i.offset,b=p===void 0?[0,0]:p,x=i.Sz,C=i.LF,S=C===void 0?{}:C;var M=i.iterator;var w=1;if(v===\"3D\"){w=e.map.getView().EF()}var k=t.Rz,T=t.buffer,I=t.od,A=t.zz;r.bindFramebuffer.set(null);r.be.set([0,0,c*scale,h*scale]);var $=k.pp;var F=T;var P=this.fd(i.w2),L=P.De,R=L===void 0?[]:L,E=P.sizes,O=E===void 0?[]:E;var D=a*n;var U=$.length;if(!F||!I){return M}if(U){r.ge.set(o);o.Ae({a_vertex:{type:\"vec2\",buffer:F,Re:D,offset:0},a_texcoord:{type:\"vec2\",buffer:F,Re:D,offset:2*n},a_origin:{type:\"vec2\",buffer:F,Re:D,offset:4*n},a_texIndex:{type:\"float\",buffer:F,Re:D,offset:6*n},a_type:{type:\"float\",buffer:F,Re:D,offset:7*n},a_zooms:{type:\"vec2\",buffer:F,Re:D,offset:8*n},a_height:{type:\"float\",buffer:F,Re:D,offset:10*n},a_highflag:{type:\"float\",buffer:F,Re:D,offset:12*n},a_visible:{type:\"float\",buffer:I,Re:0,offset:A[M]&&A[M].start}});var N=this.l_===\"inner\"?ColorMode.Ri:ColorMode.Si;for(var B=0;B<U;B++){var H=$[B];var z=H.start,G=z===void 0?0:z,j=H.end,V=j===void 0?0:j,W=H.dp;M++;if(!(V-G)){continue}var q=void 0;if(g===\"labelsLayer\"&&H.pd){var Z=this.ac.getImage(H.pd);if(Z.img){var Y=this.dd(r,Z),K=Y.texture,X=Y.size;if(K&&K.context){R[EnumTextureIndex.icon]=K;q=O.slice(0);q[EnumTextureIndex.icon*2]=X[0];q[EnumTextureIndex.icon*2+1]=X[1]}}}var J=H.vd;var Q=J.GV(\"fillColor\");var ee=J.GV(\"strokeColor\");var re=J.GV(\"backgroundColor\");var te=J.GV(\"borderColor\");o.Le({u_matrix:u,u_texture:{De:R,count:4},u_gl_size:[c,h],u_texsize:q?q:O,u_color:Q,u_strokeColor:ee,u_borderColor:te,u_gamma:J.GV(\"u_gamma\"),u_borderBuffer:J.GV(\"u_borderBuffer\"),u_buffer:J.GV(\"u_buffer\"),u_backgroundColor:re,u_opacity:H.opacity*m,u_zoom:l,u_event:0,u_delta_center:d,u_offset:b,u_transform:[0,0,1,0],u_skyHeight:w,u_fontSizeFactor:J.GV(\"u_fontSizeFactor\"),u_highlightFillColor:J.GV(\"u_highlightFillColor\"),u_highlightStrokeColor:J.GV(\"u_highlightStrokeColor\")});o.Pe((V-G)/a,G/a,undefined,undefined,S.depthTest,N)}}return M};e.prototype.Cz=function(e,r,t,i,a){var n=this._f;var o=CONSTS.sp,f=CONSTS.ud;var s=e.viewState,u=e.size;var l=s.zoom||zoomRange[1];var v=s.mvpMatrix||null;var c=u[0],h=u[1];var d=a.Az,_=a.Iz,g=a.centerCoord;var y=1;if(s.viewMode===\"3D\"){y=e.map.getView().EF()}if(!v){return}var m=i.$z||{};var p=m.pp,b=m.zs,x=m.od;var C=b&&b.buffer;var S=Math.pow(2,l-_);r.be.set([0,0,c*scale,h*scale]);var M=this.fd(a.w2),w=M.De,k=w===void 0?[]:w,T=M.sizes,I=T===void 0?[]:T;var A=p.length;var $=f*o;var F;var P;var L;var R;var E;var O;var D;var U=_>=l?S:1;var N=[0,0,U,0];if(!C||!x){return}if(A){r.ge.set(this._f);n.Ae({a_vertex:{type:\"vec2\",buffer:C,Re:$,offset:0},a_texcoord:{type:\"vec2\",buffer:C,Re:$,offset:2*o},a_origin:{type:\"vec2\",buffer:C,Re:$,offset:4*o},a_texIndex:{type:\"float\",buffer:C,Re:$,offset:6*o},a_type:{type:\"float\",buffer:C,Re:$,offset:7*o},a_zooms:{type:\"vec2\",buffer:C,Re:$,offset:8*o},a_height:{type:\"float\",buffer:C,Re:$,offset:10*o},a_angle:{type:\"float\",buffer:C,Re:$,offset:11*o},a_highflag:{type:\"float\",buffer:C,Re:$,offset:12*o},a_visible:{type:\"float\",buffer:x,Re:0,offset:0}})}var B;for(var H=0;H<A;H++){var z=p[H];F=z[0];P=z[1];L=z[11];R=z[12];E=z[13];D=z[14];if(!(R-L)){continue}for(var G=0,j=d;G<j.length;G++){var V=j[G];B=t[V];if(B&&V===E){O=B.Sa}}if(!O||S<.6){continue}if(!B){continue}O=[0,0];n.Le({u_matrix:v,u_delta_center:O,u_transform:N,u_texture:{De:k,count:k.length},u_gl_size:u,u_texsize:I,u_color:z[3],u_strokeColor:z[4],u_gamma:z[5],u_borderBuffer:z[7],u_buffer:z[8],u_backgroundColor:z[9],u_opacity:1,u_zoom:l,u_event:0,u_skyHeight:y,u_fontSizeFactor:1});n.Pe((R-L)/f,L/f,undefined,undefined,undefined,ColorMode.Si)}};e.prototype.gp=function(e,r){var t=e.context;var i=e.Jn();var a=r;var n=t.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);if(!a){return}i.Ce({u_texture:a},{a_pos:{type:\"vec2\",buffer:n,Re:8,offset:0},a_coord:{type:\"vec2\",buffer:n,Re:8,offset:4}},4,undefined,\"TRIANGLE_FAN\",undefined,ColorMode.Mi)};e.prototype.reset=function(){this.Df()};e.prototype.destroy=function(){if(this.Lz){for(var e=0,r=this.Lz.De;e<r.length;e++){var t=r[e];t.destroy()}delete this.Lz}};e.prototype.Dz=function(e,r,t){var i=t.start,a=i===void 0?0:i,n=t.dp,o=t.style;var f=6;var s=a;var u=0;var l;var v;for(var c=0,h=n;c<h.length;c++){var d=h[c];l=d.id;v=d.kd;var _=r[l];if(e.uf<a+u+v){e.ff(e.uf*2)}var g=e.value;if(_){var y=o[l]||{},m=y.showText,p=m===void 0?1:m,b=y.showIcon,x=b===void 0?true:b;var C=0;var S=Infinity;var M=-Infinity;var w=Infinity;var k=-Infinity;if(x){C=w=0;k=d.icon*f;while(C<k){g[s+u+C]=1;C++}}if(p){C=S=d.icon*f;M=(d.icon+d.Rd+d.bg)*f;while(C<M){g[s+u+C]=1;C++}}}u+=v}s+=u;return s};e.prototype.Df=function(){};e.prototype.fd=function(e){var r=[];var t=[];if(e){r[0]=e;t[0]=e.size[0];t[1]=e.size[1]}var i=this._map.so.texture;if(i){r.push(i);var a=i.size;t.push(a[0],a[1])}return{De:r,sizes:t}};e.prototype.dd=function(e,r){var t=e.gl;var i=r.img,a=r.width,n=r.height;var o=i;if(i&&!i.context){o=e.createTexture(i);o.bind(t.CLAMP_TO_EDGE,t.LINEAR,t.LINEAR);r.img=o}return{texture:o,size:[a,n]}};return e}();var transforms=M[\"transform\"];var Support$1=M[\"Support\"];var LabelsRenderUtil=M[\"LabelsRenderUtil\"];var LabelsRenderDOMRender=function(){function e(){this._size=[0,0];this.Wz=1;var e=this.canvas=document.createElement(\"canvas\");this.Nz=e.getContext(\"2d\")}e.prototype.Ce=function(e,r,t,i,a){if(!e){return}this.wf=e;var n=e.size;this._size=n;var o=a.centerCoord,f=a.Uf,s=f===void 0?{}:f,u=a.$f,l=a.Sa,v=l===void 0?[0,0]:l;this.Tz();this.Pz();var c=e.viewState;var h=c.zoom;var d=c.viewMode;if(!this.Oz(h,r.zooms)){return}if(!this._map&&i){var _=c.projectionId;this._map=i;this.If=transforms[_];this._view=i.getView();this.ac=i.z_}if(!t[\"other\"]){return}var g=t&&t.other,y=g.coords,m=g.style,p=g.Nf,b=g.Fz,x=b===void 0?[]:b;var C={viewState:c,size:this.wf.size,transform:this.If,view:this._view,viewMode:d,centerCoord:o};this.Bz(r);for(var S=0,M=x;S<M.length;S++){var w=M[S];for(var k=0;k<w.length;k++){var T=w[k];if(!s[T]){continue}var I=p[T]||{};var A=y[T]||{};var $=m[T]||{};var F=I.data.extData||{};var P=F.Sa||v||[0,0];var L=I.data||{};var R=L[\"txt\"];var E=I.opts||{};var O=($.icon||[])[0]||{};var D=O.image;var U=isUndefined($.opacity)?1:E.opacity;var N=$.text;if(D&&O&&this.Oz(h,$.icon&&$.icon.zooms)){var B=this.ac[\"getImage\"](D),H=B.img,z=B.width,G=B.height;var j={size:[z,G],opacity:U};var V=A.icon.origin;var W=A.icon.anchorOffset;var q=LabelsRenderUtil.wu(V[0]+P[0],V[1]+P[1],h,C);var Z=[q[0]+W[0],q[1]+W[1]];this.drawImage(H,O,Z,j)}if(R&&N&&this.Oz(h,$.text&&$.text.zooms)){var Y={opacity:U,padding:A.padding};var V=A.text.origin;var W=A.text.offset;var K=LabelsRenderUtil.wu(V[0]+P[0],V[1]+P[1],h,C);var X=N.style;var J=X.fontSize||12;var Q=[K[0]+W[0],K[1]+W[1]+J];this.Ez($.text,K,Y);var ee=R.length;var re=X.fold===false?100:6;var te=Math.ceil(ee/re);var ie=Math.floor(ee/te);var ae=3;for(var ne=0;ne<te;ne++){var oe=ne===te-1?ee-ne*ie:ie;var fe=R.substr(ne*ie,oe);this.gp(fe,N,Q,Y);var se=J*5/4+ae;Q[1]=Q[1]+se}}}}};e.prototype.Ez=function(e,r,t){var i=this.Nz;var a=Support$1.scale,n=a===void 0?1:a;var o=e.style.backgroundColor;var f=t.padding;var s=f.offsetX,u=f.offsetY,l=f.w,v=f.h;var c=r[0]+s;var h=r[1]+u;if(i&&o){i.fillStyle=o;i.fillRect(c*n,h*n,l*n,v*n)}};e.prototype.drawImage=function(e,r,t,i){var a=Support$1.scale;var n=this.Nz;if(!n||!r){return}var o=r[\"image\"];var f=r[\"size\"];var s=r[\"clipOrigin\"];var u=r[\"angel\"];var l=r[\"clipSize\"];var v=i.opacity,c=v===void 0?1:v;var h=f[0];var d=f[1];var _=e.width||h;var g=e.height||d;var y=l[0];var m=l[1];var p=s[0];var b=s[1];if(isUndefined(y)){y=h}if(isUndefined(m)){m=d}if(y>_){y=_}if(m>g){m=g}n.globalAlpha=c*this.Wz;n.drawImage(e,p,b,y,m,t[0]*a,t[1]*a,h*a,d*a)};e.prototype.gp=function(e,r,t,i){var a=Support$1.scale,n=a===void 0?1:a;var o=this.Nz;if(!o){return}var f=r.style,s=f===void 0?{}:f;var u=i.opacity,l=u===void 0?1:u;var v=s.fontWeight,c=s.fontSize,h=s.fontFamily,d=h===void 0?\"sans-serif\":h,_=s.fillColor,g=s.strokeColor,y=s.strokeWidth,m=y===void 0?1:y,p=s.textAlign,b=p===void 0?\"center\":p,x=s.Gz,C=x===void 0?\"Alphabetic\":x;o.globalAlpha=l;o.globalAlpha=1;o.font=v+\" \"+c*n+\"px \"+d;o.textAlign=b;o.textBaseline=C;var S=t[0];var M=t[1];o.lineJoin=\"round\";if(g&&m){o.strokeStyle=g;o.lineWidth=m;o.strokeText(e,S*n,M*n)}o.fillStyle=_;o.fillText(e,S*n,M*n)};e.prototype.Pz=function(){var e=this.canvas;var r=Support$1.scale;var t=this._size||[0,0],i=t[0],a=t[1]};e.prototype.Tz=function(){this.canvas.width=this.canvas.width};e.prototype.reset=function(){this.Pz()};e.prototype.destroy=function(){this.Pz()};e.prototype.Oz=function(e,r){if(r===void 0){r=[]}var t=r[0]||zoomRange[0];var i=r[1]||zoomRange[1];if(e>=t&&e<=i){return true}return false};e.prototype.Bz=function(e){var r=this._container;if(!r){r=this._container=this.T2(this._map)}var t=Support$1.scale;var i=e.zIndex,a=i===void 0?100:i,n=e.opacity,o=e.visible,f=e.zooms,s=f===void 0?zoomRange:f;var u=this.wf.viewState.zoom;var l=this.Oz(u,s);if(!o||!l||n===0){r.style.display=\"none\"}else{r.style.display=\"block\"}this.Wz=n;var v=this._size;r.setAttribute(\"width\",v[0]*t+\"px\");r.setAttribute(\"height\",v[1]*t+\"px\");r.style.width=v[0]+\"px\";r.style.height=v[1]+\"px\";r.style.zIndex=a+\"\"};e.prototype.T2=function(e){var r=e.getContainer();var t=r.querySelector(\".amap-layers\");if(t){t.appendChild(this.canvas)}AMap.DomUtil.addClass(this.canvas,\"amap-labellayers\");return this.canvas};return e}();var SmartTypedArray=M[\"SmartTypedArray\"];var LabelsLayerBaseRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.type=\"labelsLayer\";e.wf=null;e.Ps={};e._viewMode=\"2D\";e.Wf={};e.Bf={};e.TG={};e.uu=[0,0];return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!this.ac){this._map=a;this._view=a.getView();this.ac=a.z_;this.Mf=a.R_;this._viewMode=r.viewState.viewMode;this.fz=a.fS();if(!this._map.isDOMMode()){if(!this.Zz){this.Zz=new LabelsRender}}else{if(!this.Vz){this.Vz=new LabelsRenderDOMRender}}if(this.Zz){this.Zz.Mz({map:a,z_:a.z_,R_:a.R_,$i:e.Zn()})}}};e.prototype.Jz=function(){return{centerCoord:this.uu}};e.prototype.vi=function(e){if(this.fz){var r=this.fz.vi(e,\"\");return r}return null};e.prototype.destroy=function(){if(this.Zz){this.Zz.destroy();delete this.Zz}if(this.Vz){this.Vz.destroy();delete this.Vz}this.AG()};e.prototype.reset=function(){if(this.Zz){this.Zz.reset()}if(this.Vz){this.Vz.reset()}};e.prototype.Yz=function(e,r,t,i,a){this.Vz.Ce(e,r,t,i,a)};e.prototype.SG=function(){var e=typeof Int8Array!==\"undefined\";var r;if(e){r=new SmartTypedArray(\"uint8\",5e5);r.value.fill(0)}return r};e.prototype.zG=function(e){if(!this.TG[e]){this.TG[e]={iterator:0}}var r=this.TG[e];if(!r.LG){r.LG=this.SG()}if(!r.zz){r.zz=[]}return this.TG[e]};e.prototype.AG=function(){var e=this.TG||{};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];delete t.zz;if(t.od){t.od.destroy();delete t.od}t.iterator=0;if(t.LG){t.LG.value.fill(0)}}}};return e}(LayerRender);var Util$1=AMap[\"Util\"];var transforms$1=M[\"transform\"];var lcs=M[\"geo\"][\"lcs\"];var SmartArrayBuffer=M[\"SmartArrayBuffer\"];var LabelsLayerRender=function(_){__extends(e,_);function e(){var e=_.call(this)||this;e.type=\"labelsLayer\";e.l_=\"labelsLayer\";return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!i||!r){return}_.prototype.Hz.call(this,e,r,t,i,a,n);this.wf=r;var o=r.viewState;var f=o.projectionId;this.If=transforms$1[f];var s=o.zoom;if(r&&n.visible&&n.opacity&&Util$1.dS(s,n.zooms)){if(!i.Nf){return}if(!this._map.isDOMMode()){var u=e.context;i.upload(u)}if(!i){return}var l=i.rp,v=i.buffer,c=i.zo;var h=o.centerCoord;this.uu=lcs.getLocalByCoord([h[0],h[1]]).center||[0,0];var d=this.Ps=i;this.Ps.lp=l.up;return d}return null};e.prototype.renderFrame=function(e,r,t,i,a){var n=this.fz;if(n){this.Wf=n.Uf;this.Bf=n.$f}if(!this._map){return}if(!this._map.isDOMMode()){this.Jh(e,t,r,i,a)}else{var o=this.Ps.zo;var f=Util$1.hp(o,this.wf);this.Yz(t,i,r,this._map,{Sa:f,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}};e.prototype.Jz=function(){var e=this.Ps.zo;var r=Util$1.hp(e,this.wf);var t={Sa:r,from:\"labelsLayer\",opacity:1,offset:[0,0],centerCoord:this.uu};return t};e.prototype.Jh=function(e,r,t,i,a){var n=this.Zz;var o=e.context;if(!t){return}if(!t[\"other\"]){return}var f=t[\"other\"],s=f.rp,u=f.buffer,l=f.zo;var v=Util$1.hp(l,r);if(!s||!s.up){return}this.AG();var c=this.zG(this.l_);var h=c.LG,d=c.od;var _=CONSTS.sp;var g=s&&s.pp;var y=g.length;var m=0;var p=0;var b=[];var x=this.Ps.style||{};for(var C=0;C<y;C++){var S=g[C];var M=S.dp||[];m=p;p=n.Dz(h,this.Wf,{start:m,dp:M,style:x});b.push({start:m,end:p})}if(d){d.update(h.value)}else{c.od=new SmartArrayBuffer(o,h.value,_)}c.zz=b;if(i.ce){e.context.clear({depth:true})}n.Ce(r,o,{Rz:s,buffer:u,od:c.od.buffer,zz:c.zz},{from:this.type,Sz:true,Sa:v,oo:e,LF:i,yZ:true,w2:a.I2})};return e}(LabelsLayerBaseRender);var utils=M[\"Util\"];var LabelsRenderUtil$1=M[\"LabelsRenderUtil\"];var labelsUtil=M[\"labelsUtil\"];var vector=M[\"vector\"];var SmartArrayBuffer$1=M[\"SmartArrayBuffer\"];var SmartTypedArray$1=M[\"SmartTypedArray\"];var rbush=M[\"rbush\"];var Support$2=M[\"Support\"];var LabelLine=function(){function e(){this._viewMode=\"2D\";this.Gf=rbush();this.Cf=null;this.u_=null;this.Jp=0;this.bo=zoomRange[1];this.Xf={};this.Lf=new Uint8Array(1e5).fill(1);this.Qp=new SmartTypedArray$1(\"float32\",1e5)}e.prototype.Ns=function(e,r){if(r===void 0){r={}}var t=r.DG,i=r.transform,a=r.view,n=r.centerCoord,o=r.FG,f=r.context,s=r.Uf,u=r.bounds,l=r.Iz;if(!this._map){this._map=r.map;this.b$=r.fz}this.wf=t;this.aa=t.viewState;this.If=i;this._view=a;this._viewMode=t.viewState.viewMode;this.uu=n;this.HG=o;this.Wf=s;this.bo=l;this.Kz();if(!this.Cf){this.Cf=f.fe(this.Lf,1)}this.Xf=r.tZ;this.Kf(e,r);this.Qf(this.Xf,r);return this.ip(f,r.DG)};e.prototype.destroy=function(){this.Kz();delete this.Xf;if(this.Cf&&this.Cf.context){this.Cf.context.deleteBuffer(this.Cf);delete this.Cf}};e.prototype.Kf=function(e,r){if(r===void 0){r={}}var t=this.aa;var i=(t||{}).zoom,a=i===void 0?zoomRange[1]:i;var n=this.If;var o=this.Xf;var f=CONSTS.Color;var s=r.bounds;if(!t){return}var u={};var l=t.rotation||0;for(var v=0,c=e;v<c.length;v++){var h=c[v];var d=h.rank;if(!u[d]){u[d]=[]}u[d].push(h)}var _=Object.keys(u);var g=_.length;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I;var A;var $;var F;var P;var L;var R;var E;var O;var D;var U=0;var N;var B;var H;var z=this._map.getMapState().Tf;for(var G=g-1;G>=0;G--){y=u[_[G]];for(var j=0,V=y;j<V.length;j++){var W=V[j];m=W.name;B=W.$G;p=W.CO;b=W.EG;N=W.BG;x=W.path;C=W.positionType||\"absolute\";S=W.zooms;M=W.rank;w=W.style;I=W.Bp;H=W.extData;k=LabelsRenderUtil$1.kz([[-W.Sa[0],-W.Sa[1]]],I,a,{centerCoord:this.uu})[0];T=W.key;k=LabelsRenderUtil$1.MG(I,k);var q=W.extData&&W.extData.mainkey&&W.extData.subkey?this._map.mapStyle.dn(W.extData.mainkey,W.extData.subkey,t.optimalZoom):null;A=w.fontSize;$=w.fillColor;F=w.strokeColor||f.Gp;if(q&&q[1]){A=q[1]?q[1].fontSize:w.fontSize;$=q[1].faceColor?q[1].faceColor.normalize():$;F=q[1].borderColor?q[1].borderColor.normalize():F}P=A*1.3;L=this.Zp(x,P,{zoom:a,transform:n,bounds:s,Bp:I,BG:N,positionType:C});U=0;for(var Z=0,Y=L;Z<Y.length;Z++){var K=Y[Z];R=K.length||0;if(R<2){continue}E={transform:n,fontSize:A,qp:P,zoom:a,name:m,CO:p,EG:b,BG:N,Sa:k,bounds:s,Tf:z,nF:l};O=this.Yp(K,E,U++<1);if(O.Id){if(!O.pos.length||!O.pos[0].length){continue}}D={name:m,$G:B,CO:p,rank:M,fontSize:A,fillColor:$,strokeColor:F,zooms:S,Sa:k,key:T,Bp:I,extData:H};this.Vp(O,o,D)}}}return o};e.prototype.Zp=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r=20}if(t===void 0){t={}}var i=CONSTS.Dp,a=i.Ad,n=i.Bd;var o=t.zoom,f=t.Bp,s=t.BG,u=t.positionType;var l=0;var v=0;var c=0;var h;var d;var _;var g=e.length-1;var y=[[]];var m=o<12?10:a;var p=this.aa;var b;var x;if(!p){return y}var C={viewState:p,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:u};for(var S=0;S<g-1;S+=2){var M=LabelsRenderUtil$1.kz([[e[S],e[S+1]],[e[S+2],e[S+3]]],f,o,{centerCoord:this.uu}),w=M[0],k=M[1];_=h;h=S===0?this._viewMode===\"2D\"?this.If.transform(w[0],w[1],o):LabelsRenderUtil$1.wu(w[0],w[1],o,C):d;d=this._viewMode===\"2D\"?this.If.transform(k[0],k[1],o):LabelsRenderUtil$1.wu(k[0],k[1],o,C);v=labelsUtil.Sd(h,d);c=l;l+=v;var T=v/r;var I=void 0;if(l>m){if(c/m<.3&&v/m>=2){h=labelsUtil.OG(h,d,m/v)}if(_){var A=vector.Ip(h,_);var $=vector.Ip(d,h);I=vector.Qj(A,$)}else{I=0}if(!b){b=labelsUtil.Ed([h,d],s);x=b}else{b=labelsUtil.Ed([h,d],s)}if(I<=n&&b===x&&(T>1||o<12&&T>=.6)){y[y.length-1].push(h)}else{y[y.length-1].push(h);b=x=undefined;var F=y[y.length-1];if(F[0]!==undefined){y.push([])}}if(S===g-3){y[y.length-1].push(d)}}}for(var S=0;S<y.length;S++){var P=y[S];var L=labelsUtil.Ed(P,s);if(L){y[S].reverse()}}return y};e.prototype.Yp=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r={}}if(t===void 0){t=false}var i=0;var a=CONSTS.Dp;var n=a.A2,o=a.e1;var f=r.transform,s=r.fontSize,u=s===void 0?12:s,l=r.zoom,v=l===void 0?20:l,c=r.BG,h=c===void 0?0:c,d=r.CO,_=d===void 0?[]:d,g=r.EG;var y={index:0,Id:0,pos:[],Dd:[],Pd:[],points:[],EG:[]};var m=r.qp||24;var p=e.length;var b=_.length;var x;var C=false;var S;var M;var w;var k;var T;var I;var A;var $;var F=0;var P=0;var L=false;var R={viewMode:this._viewMode,transform:f,view:this._view};while(F<p-1&&P<30){P++;var E=y.index;if(!y.pos[E]){y.pos[E]=[];y.Pd[E]=[];y.points[E]=[];y.Dd[E]=[]}var O=void 0;var D=void 0;var U=e[F+1];I=labelsUtil.getAngle(e[F],U);if(!L){O=e[F]}else{O=x}var N=_[y.Id];var B=g[N];var H=24;var z=u/H;var G=h===\"ch\";m=G?u*1.3:B&&B.char[4]*z*1.3;if(C){x=labelsUtil.jd(x,e[F],e[F+1],m)}else{x=labelsUtil.Od(O,I,m)}S=y.index;if(y.Id<b&&t){if(this._viewMode===\"2D\"){M=f.Xs(O[0],O[1],v);w=f.Xs(x[0],x[1],v)}else{M=LabelsRenderUtil$1.nt(O[0],O[1],v,R);w=LabelsRenderUtil$1.nt(x[0],x[1],v,R)}k=labelsUtil.Fd(M,w,1)[0];D=labelsUtil.Fd(O,x,1)[0];T=false;A=T?labelsUtil.Nd(x,O,G?\"\":\"x\"):labelsUtil.Nd(O,x,G?\"\":\"x\");y.pos[S].push(k);y.points[S].push(D);y.Pd[E].push(A);y.Id++}else{t=true;y.index++;y.Id=0;i++;F=this.zd(e,F,i*n+b*o);L=false;C=false;continue}if(y.Id===b-1){y.pos[S].$d=false;y.EG[S]=g}$=labelsUtil.Sd(x,U);if($<m){F++;C=true;L=true}else{L=true;C=false}}return y};e.prototype.Vp=function(e,r,t){if(e===void 0){e={}}if(t===void 0){t={}}var i=t.name,a=i===void 0?\"\":i,n=t.$G,o=n===void 0?[]:n,f=t.CO,s=f===void 0?[]:f,u=t.rank,l=u===void 0?1:u,v=t.fontSize,c=v===void 0?12:v,h=t.fillColor,d=t.strokeColor,_=t.zooms,g=t.Sa,y=t.key,m=t.Bp,p=t.extData,b=p===void 0?{}:p;var x=s.length;var C=e.pos.length;var S;var M;var w;var k;var T;var I=[];var A=[];var $=[];var F=false;var P=0;for(var L=0;L<C;L++){S=e.pos[L]||[];I=e.Pd[L]||[];$=e.EG[L]||[];M=S.$d;if(S.length===x){for(P=0;P<x;P++){w=M?x-1-P:P;k=S[w];if(!k||!this.Ud(I,P)){F=true;break}if(o&&o.length){T=a.substring.apply(a,o.slice(P,P+2))}else{T=a.substr(P,1)}var R={data:{id:utils.stamp(this),position:k,name:a,extData:{Sa:g,key:y,Bp:m,CO:s.slice(P,P+1),Lp:b.mainkey,Ap:b.subkey},txt:T,rank:l},opts:{type:\"normal\",angle:I[w]||0,zooms:_,text:{direction:\"center\",offset:[0,0],EG:$,style:{fontSize:c,fillColor:h,strokeColor:d,strokeWidth:2}}}};var E=this._map.getLayerByClass(\"AMap.MaskLayer\");if(E){var O=E.getRender();if(O){if(!O.EH(R.data.position,this.wf)){return false}}}A.push(R)}if(!F){if(!r[y]){r[y]=[]}if(r[y].indexOf(A)<0){r[y].push(A)}}}}};e.prototype.zd=function(e,r,t){if(e===void 0){e=[]}if(r===void 0){r=0}if(t===void 0){t=0}var i=0;var a=e.length-1;var n=r;for(;n<a;n++){var o=e[n];var f=e[n+1];var s=labelsUtil.Sd(o,f);i+=s;if(i>=t){break}}return n};e.prototype.Ud=function(e,r){if(e===void 0){e=[]}if(r===void 0){r=0}var t=CONSTS.Dp.Bd;var i=r-1;if(i<0){return true}var a=e[r];var n=e[i];if(Math.abs(a-n)>=t){return false}return true};e.prototype.Qf=function(e,r){if(r===void 0){r={}}var t=this.aa;if(!t){return}var i=t&&t.zoom||20;var a=this.b$;var n=t.zoom,o=n===void 0?zoomRange[1]:n;var f=r.bounds;var s=this.Gf;var u;var l;var v;var c=false;var h=0;var d=[];for(var _ in e){if(e.hasOwnProperty(_)){v=e[_];for(var g=0,y=v;g<y.length;g++){var m=y[g];for(var p=0,b=m;p<b.length;p++){var x=b[p];var C=x.data;var S=x.opts;var M=C.txt;var w=C.position;var k=C.extData;var T=k.Bp;var I=LabelsRenderUtil$1.kz([vector.multiply(k.Sa,-1)],T,o,{centerCoord:this.uu})[0];var A=k.Lp?this._map.mapStyle.dn(k.Lp,k.Ap,i):null;var $=A&&A[1];var F=LabelsRenderUtil$1.gz(w,f);u=[];if(F&&$){var P=$&&$.fontSize;var L=LabelsRenderUtil$1.wu(w[0],w[1],o,{viewState:t,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:\"relative\"});var R=this.Xp(L,P);l=this.b$.iC(R,{padding:5,id:M,type:\"road\"});u=a.search(l);if(!u.length){u=s.search(l)}}if(!F||!$){c=true;break}var E=0;var O=u.length;while(E<O){if(this.Wf[u[E].id]||u[E].type===\"road\"){c=true;break}E++}if(l){d.push(l)}}if(!c){h+=m.length;for(var D=0,U=d;D<U.length;D++){var N=U[D];s.Xc(N)}d=[]}m.hide=c;c=false}}}this.Jp=h};e.prototype.ip=function(e,r){var t;var i=CONSTS.sp,a=CONSTS.Kp,n=CONSTS.ud;var o=this.Xf||{};var f=this.aa;var s=0;if(f&&this._map){var u=f.zoom;var l=0;var v=2;var c=this.bo;var h=this._map.getMapState().Af;var d=this.Jp;var _=n*6;var g=void 0;if(d*_>1e5){this.Qp.ff(d*_);g=this.Qp.value}else{g=this.Qp.value}var y=[];var m=0;var p=void 0;var b=void 0;var x=void 0;var C=void 0;var S=void 0;var M=void 0;var w=void 0;var k=void 0;var T=void 0;var I=void 0;var A=void 0;var $=void 0;var F=void 0;var P=void 0;var L=void 0;var R=void 0;var E=void 0;var O=void 0;var D=void 0;var U=void 0;var N=void 0;var B=void 0;var H=void 0;var z=void 0;var G=void 0;var j=void 0;var V=void 0;var W=void 0;var q=void 0;var Z=void 0;var Y=void 0;var K=void 0;var X=void 0;var J=void 0;var Q=void 0;var ee=void 0;var re=void 0;var te=void 0;var ie=void 0;var ae=void 0;var ne=void 0;var oe=void 0;var fe=void 0;var se=void 0;var ue=void 0;var le=void 0;var ve=void 0;var ce=void 0;var he=void 0;var de=0;var _e=void 0;var ge=void 0;var ye=void 0;var me=0;for(var pe in o){if(o.hasOwnProperty(pe)){var be=o[pe];m=be.length;for(var xe=0;xe<m;xe++){ge=be[xe];if(ge.hide){continue}for(var Ce=0,Se=ge;Ce<Se.length;Ce++){var Me=Se[Ce];p=Me.data;b=Me.opts;x=p.position;C=p.extData;ye=C.CO;_e=C.Bp;S=b.angle||0;M=b.zooms;w=b.text;N=w.EG||{};k=w.style;T=k.fontSize;I=k.fillColor;A=k.strokeColor;$=k.strokeWidth||0;F=this.td(T,$);P=F.gamma;L=F.ed;E=F.backgroundColor;O=F.strokeWidth;R=F.nd;D=1;for(var we=0;we<D;we++){U=ye;B=N[U]||{index:EnumTextureIndex.dynamic,char:(t=this._map.yH)===null||t===void 0?void 0:t.LB(pe)[U],pos:{startX:0,startY:0}};if(!B||!B.char){continue}H=B.index;z=B.char;G=x[we];j=x[we+1];if(!G||!j||!z){continue}V=M[0];W=M[1];q=T/a.size;Z=1;if(h&&c>u){q=q/Math.pow(2,c-u)}Y=z[0];K=z[1];X=z[2];J=z[3];Q=z[5];ee=z[6];re=a.buffer;var ke=T/24*(z[4]+CONSTS.ic);var Te={x:-ke/2,y:-T/2};if(Y>0&&K>0){Y+=re*2;K+=re*2;te=Te.x;ie=Te.y;ae=Z*(te+(X-re)*q);ne=Z*(te+(X-re+Y)*q);oe=Z*(ie-J*q);fe=Z*(ie+(K-J)*q);se=0;ue=0;se+=B.pos.startX;ue+=B.pos.startY;le=se+Q;ve=ue+ee;ce=H;g.set([ae,oe,le,ve,G,j,ce,v,V,W,l,S,me,ne,oe,le+Y,ve,G,j,ce,v,V,W,l,S,me,ae,fe,le,ve+K,G,j,ce,v,V,W,l,S,me,ae,fe,le,ve+K,G,j,ce,v,V,W,l,S,me,ne,oe,le+Y,ve,G,j,ce,v,V,W,l,S,me,ne,fe,le+Y,ve+K,G,j,ce,v,V,W,l,S,me],de);de+=_;he=s*n*6;y.push([T,[G,j],S,I,A,P,re,R,L,E,O,he,he+6*n,C.key,_e]);s++}}}}}}var Ie=this.u_;if(Ie){Ie.update(g)}else{Ie=this.u_=new SmartArrayBuffer$1(e,g,i)}return{pp:y,zs:Ie,od:this.Cf}}return{pp:[],od:null,zs:null}};e.prototype.Xp=function(e,r){if(r===void 0){r=12}var t=r*1.3;var i=r*1.3;var a=e[0],n=e[1];var o=[a-t/2,n-i/2];return{x:o[0],y:o[1],width:t,height:i}};e.prototype.td=function(e,r){if(e===void 0){e=12}if(r===void 0){r=0}var t=CONSTS.Cd,i=CONSTS.Ld,a=CONSTS.Color;var n=DangerousFontSize;var o=0;var f=e<12?t:i;if(r){r=r*Support$2.scale>10?10:r;o=f*(1-r/10.1)}var s=e>n||Support$2.scale>1?1.7:1.5;s=s*1.4142/e;var u=f-1/256*(Support$2.scale-1);return{gamma:s,nd:o,ed:u,backgroundColor:a.Gp,strokeWidth:r}};e.prototype.Kz=function(){if(this.Gf){this.Gf.clear()}};return e}();var _a;var SmartArrayBuffer$2=M[\"SmartArrayBuffer\"];var Util$2=AMap[\"Util\"];var NebulaLabelFormat=M[\"NebulaLabelFormat\"];var MapboxLabelFormat=M[\"MapboxLabelFormat\"];var labelsUtil$1=M[\"labelsUtil\"];var LabelsRenderUtil$2=M[\"LabelsRenderUtil\"];var vector$1=M[\"vector\"];var transforms$2=M[\"transform\"];var lcs$1=M[\"geo\"][\"lcs\"];var LabelFormatMap=(_a={},_a[NebulaLabelFormat.id]=NebulaLabelFormat,_a[MapboxLabelFormat.id]=MapboxLabelFormat,_a[\"nebula\"]=NebulaLabelFormat,_a);var TileLabelsLayerRender=function(O){__extends(e,O);function e(){var e=O.call(this)||this;e.type=\"nebula-labelslayer\";e.Xz=false;e.l_=\"inner\";e.vf=[];e.mf={};e.bo=20;e.Xf={};e.tp={pp:[],od:null,zs:null};e.kp={};e.NG={};e.WG=new LabelLine;e.F2=new LabelStyleChangeManager;return e}e.prototype.Hz=function(e,r,t,i,a,n){if(!i||!r){return}O.prototype.Hz.call(this,e,r,t,i,a,n);var o=r.viewState.zoom;if(i&&r&&n.visible&&n.opacity&&Util$2.dS(o,n.zooms)){var f=[];var s=true;var u=void 0;this.NG={};for(var l=0;l<i.length;l++){var v=i[l];var c=v.tiles||[];for(var h=0;h<c.length;h++){var d=c[h];f.push(d)}if(c.length){s=s&&v.fo}u=v.Ca}var _={};for(var g=0,y=f;g<y.length;g++){var m=y[g];_[m.zo.key]=m}s=true;this.Xz=s;if(s){this.vf=Object.keys(_);this.mf=_;this.mf.yf=u||[]}var p=this.vf;if(!p){return}var b=void 0;var x=void 0;var C=void 0;for(var S=0,M=p;S<M.length;S++){var w=M[S];x=this.mf[w];var k=Array.isArray(x.data)?x.data:[x.data]||[];for(var T=0,I=k;T<I.length;T++){C=I[T];if(C&&C.labels){b=labelsUtil$1.xf(C.labels,this.mf.yf);if(!this._map.isDOMMode()){for(var A=0,$=b;A<$.length;A++){var F=$[A];F.upload(e.context)}}C.gf=b}}}var P=r.viewState;var L=P.projectionId,R=P.centerCoord;this.If=transforms$2[L];this.uu=lcs$1.getLocalByCoord([R[0],R[1]]).center;var E=this.Ps=this.Pf(this.mf,e);return E}return null};e.prototype.renderFrame=function(e,r,t,i,a){this.wf=t;var n=t.viewState;var o=this.vf;var f=this.Zz;if(!o||!n){return}var s=e.context;var u=this.fz;var l=this._map;if(!l){return}if(this._map.bZ.MZ.drawMode!==\"fast\"&&(!this._map.bZ.dynamic.get(\"firstLabelDataAllLoaded\")||!this._map.bZ.dynamic.get(\"firstAllLoaded\"))){return}var v=l.qz();var c=l.Qz();var h=this._map.isDOMMode();var d=r.tile[0].yZ;if(r.tile[1]){d=d||r.tile[1].yZ}if(v){this.Bf=u.$f;this.Wf=u.Uf;if(!h){this.Jh(e,t,o,{yZ:d,w2:a.I2})}else{this.Yz(t,i,r,this._map,{centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}}if(h){return}var _=this._map.TL();var g=this.Ps;if(c&&d){if(g.Vf&&!_){this.Xf={};var y=LabelsRenderUtil$2.getBounds(n,{zoom:n.zoom,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode});this.bo=t.viewState.zoom;var m={map:this._map,fz:this.fz,R_:this.Mf,DG:t,transform:this.If,view:this._view,centerCoord:this.uu,FG:t.size,context:s,Uf:this.Wf,bounds:y,Iz:this.bo,tZ:this.Xf};var p=this.Jf(this.mf);this.tp=this.WG.Ns(p,m)}f.Cz(t,s,this.mf,{$z:this.tp},{Az:this.vf,Iz:this.bo,centerCoord:this.uu,yZ:d,w2:a.I2})}};e.prototype.destroy=function(){delete this.tp;delete this.kp;delete this.vf;delete this.mf;if(this.WG&&this.WG[\"destroy\"]){this.WG.destroy();delete this.WG}if(this.F2){delete this.F2}O.prototype.destroy.call(this)};e.prototype.reset=function(){this.Xf={};if(this.tp.zs){this.tp.pp=[]}O.prototype.reset.call(this)};e.prototype.Jh=function(e,r,t,i){var a=this.Zz;var n=e.context;var o=this.Ps.lp||0;if(!o){return}this.qf(n,this.mf);var f;var s;var u;var l;for(var v=0;v<t.length;v++){var c=t[v];l=this.mf[c];if(l&&l.data){f=Array.isArray(l.data)?l.data:[l.data];var h=l.type;var d=this.zG(h);var _=d.od,g=d.zz;var y=d.iterator;if(!_){continue}for(var m=0,p=f;m<p.length;m++){s=p[m];u=l.Sa;var b=s.gf;u=LabelsRenderUtil$2.MG(l.zo.z,u);if(b){for(var x=0;x<b.length;x++){var C=b[x];y=a.Ce(r,e.context,{Rz:C.rp,buffer:C.buffer,od:_.buffer,zz:g},{iterator:y,Sa:u,oo:e,yZ:i.yZ,w2:i.w2})}}}d.iterator=y}}};e.prototype.Pf=function(e,r){var t=this.wf;var i=t&&t.viewState;if(!i){return{}}var a=i&&i.optimalZoom||20;var n=i&&i.zoom||20;var o=false;var f=0;var s=LabelsRenderUtil$2.getBounds(i,{zoom:a,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode});var u=CONSTS.Mp,l=CONSTS.Rp;var v;var c;var h;var d;var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I=a>20?20:a<3?3:a;var A=this.vf;var $=A.length;var F=[u,l];var P={};var L={};var R={};var E={};var O;var D;var U=i.zoom;var N=true;for(var B=0;B<$;B++){d=e[A[B]];O=Array.isArray(d.data)?d.data:[d.data];for(var H=0,z=O;H<z.length;H++){D=z[H];if(D&&D.gf){var G=D.gf;for(var j=0,V=G;j<V.length;j++){_=V[j];g=_.coords;if(g){m=_.Nf;b=_.zp;x=b[I]||[];p=_.rp;f+=p.up;for(var W=0,q=x;W<q.length;W++){var Z=q[W];N=false;S=m[Z];M=g[Z];C=d.Sa;C=LabelsRenderUtil$2.MG(d.zo.z,C);k=vector$1.add(M.origin,C);T=LabelsRenderUtil$2.gz(k,s);if(!T&&!P[Z]){if(!this.Bf[Z]){E[Z]=1}this.Bf[Z]=1;continue}v=m[Z].data.extData;c=v.Lp?this._map.mapStyle.dn(v.Lp,v.Ap,n):null;h=S.opts||{};w=h.zooms||F;if(!P[Z]&&(U<w[0]||U>w[1]||v.Lp&&!c)){if(!this.Bf[Z]){E[Z]=1}this.Bf[Z]=1;continue}if(E[Z]){delete this.Bf[Z]}y=_.style;P[Z]=S;L[Z]=M;R[Z]=y[Z];v.Sa=C;if(v.Lp===40001){R[Z].showText=c?c.showText===0?false:true:true;R[Z].showIcon=c?c.iconID===\"0\"?false:true:true;R[Z].forceShow=c?c.forceShow:false}else{R[Z].showIcon=c?c.iconID!==\"0\":true;R[Z].showText=c?c.showText:true;R[Z].forceShow=c?c.forceShow:false}o=true}}this.F2.P2(this._map.bZ.MZ.KY.iX);this.F2.L2(_,this._map.mapStyle,_.Nf,_.style,n,this._map.bZ.MZ.KY.iX);_.upload(r.context)}}}}if(N){o=true}return{Vf:o,lp:f,Nf:P,coords:L,style:R}};e.prototype.qf=function(e,r){var t=this.Zz;var i=this.vf;var a=this.Ps.lp||0;var n=a/12;var o=1;var f={};var s;var u;var l;var v;var c;var h;var d;var _;if(!n){return}this.AG();for(var g=0,y=i;g<y.length;g++){var m=y[g];s=r[m];var p=s.type;var b=this.zG(p);b.LG.ff(n);var x=f[p];if(!x){x=f[p]={start:0,end:0}}if(s){u=Array.isArray(s.data)?s.data:[s.data];for(var C=0,S=u;C<S.length;C++){l=S[C];var M=l.gf;var w=this.Ps.style||{};if(M){for(var k=0,T=M;k<T.length;k++){var I=T[k];v=I.rp;c=v&&v.pp;h=c.length;for(var A=0;A<h;A++){d=c[A];_=d.dp;x.start=x.end;x.end=t.Dz(b.LG,this.Wf,{dp:_,style:w,start:x.start});b.zz.push({start:x.start,end:x.end})}}}}}}var $=this.TG;for(var F in $){if($.hasOwnProperty(F)){var P=$[F];var L=P.od;var R=P.LG.value;if(!L){L=new SmartArrayBuffer$2(e,R,o)}else{L.update(R)}P.od=L}}};e.prototype.Jf=function(e){var r=CONSTS.Op;var t=this.wf;if(!t){return}var i=t.viewState;var a=i&&i.zoom;var n=[];var o=this.vf;var f=o.length;var s=this.Xf;var u;var l;var v;var c;var h;var d;var _;var g;for(var y=0;y<f;y++){var m=e[o[y]];h=Array.isArray(m.data)?m.data:[m.data];for(var p=0,b=h;p<b.length;p++){d=b[p];if(a&&d&&d.XE){u=d.road||d.Dh||[];_=d.XE;l=m.Sa;v=m.zo.key;c=m.zo.z;if(s[v]){continue}for(var x=0,C=_;x<C.length;x++){var S=C[x];g=LabelsRenderUtil$2.wu(S.distance,0,a,{viewState:i,size:t.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu});if(Math.abs(g[0]-g[1])<r){continue}S.Sa=l;S.key=v;S.Bp=c;n.push(S)}}}}return n};return e}(LabelsLayerBaseRender);var LabelStyleChangeManager=function(){function e(){this.R2=0;this.E2=\"\";this.O2=undefined;this.D2=-1}e.prototype.P2=function(e){if(e!==this.E2&&this.O2&&this.D2>=0&&this.R2>=0){this.U2(this.O2.rp.rp,this.D2,this.R2,0);this.O2.destroy();this.O2=undefined}};e.prototype.U2=function(e,r,t,i){for(var a=0;a<t;a++){var n=(r+a)*13+12;e[n]=i}};e.prototype.L2=function(e,r,t,i,a,n){var o=0;for(var f=0,s=e.rp.pp;f<s.length;f++){var u=s[f];var l=void 0;for(var v=0,c=u.dp;v<c.length;v++){var h=c[v];l=h.id;var d=t[h.id].data.extData;if(!d||!d.Lp||!d.Ap){continue}var _=r.dn(d.Lp,d.Ap,a);var g=i[h.id];if(!_){o+=h.kd;continue}if(!g.text){o+=h.kd;continue}if(d.Lp===40001){u.vd.VV(\"u_fontSizeFactor\",1)}else{var y=_.fontSize;var m=g.text.style.fontSize;var p=y/m;u.vd.VV(\"u_fontSizeFactor\",p)}var b=_&&_.faceColor&&_.faceColor.normalize();if(n&&n===d.id&&_[\"sel-highlight\"]){this.U2(e.rp.rp,o,h.kd,1);this.O2=e;this.D2=o;this.R2=h.kd;this.E2=n;if(_[\"sel-textFillColor\"]){u.vd.VV(\"u_highlightFillColor\",_[\"sel-textFillColor\"])}if(_[\"sel-textStrokeColor\"]){u.vd.VV(\"u_highlightStrokeColor\",_[\"sel-textStrokeColor\"])}e.destroy()}if(b){u.vd.VV(\"fillColor\",b)}var x=_.borderColor&&_.borderColor.normalize();if(x){u.vd.VV(\"strokeColor\",x)}var C=_[\"holoColor\"]&&_[\"holoColor\"].normalize();var S=_[\"label-bg\"];if(S&&C){u.vd.VV(\"backgroundColor\",C)}else{u.vd.VV(\"backgroundColor\",[0,0,0,0])}o+=h.kd}}};return e}();var fillExtFragmentString=\"precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\nuniform bool u_isPick;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        gl_FragColor = v_roofColor;\\n        // gl_FragColor = u_roofColor;\\n    } else {\\n        // 渐变色，暂时不用\\n        // float hFactor = v_fragHeight / v_fullHeight / 8.0 + 1.0;\\n        gl_FragColor = v_color;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    if(u_isPick) {\\n        gl_FragColor = vec4(v_roofColor.rgba / 255.0);\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var fillExtVertextString=\"precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        // a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n        a_pos.z * u_heightFactor\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n\";var fillExtPatternFragmentString=\"precision mediump float;\\n\\n// uniform vec4 u_roofColor;\\n// uniform vec4 u_wallColor;\\nuniform vec3 u_lightColor;\\nuniform vec3 u_lightDir;\\nuniform mat4 u_normalMatrix;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\nuniform vec2 u_skyBMRange;\\n\\n// pattern\\nuniform float u_resolution;\\nuniform sampler2D u_image;\\nuniform vec2 u_imageSize;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\n// varying vec4 v_color;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_roofColor;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    // 环境光\\n    vec3 ambientLightColor = vec3(1, 1, 1);\\n    float ambientStrength = 0.92;\\n    vec3 ambient = ambientStrength * ambientLightColor;\\n\\n    // 平行光的漫反射\\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\\n    vec3 lightDir = u_lightDir;\\n    vec3 lightColor = vec3(1, 1, 1);\\n    float lightStrength = 0.1;\\n    vec3 norm = normalize(v_normal);\\n    float nDotL = max(dot(lightDir, norm), 0.0);\\n    vec3 diff = lightStrength * lightColor * nDotL;\\n\\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\\n    float topOpacity = 1.0;\\n    if(v_fragHeight >= v_fullHeight) {\\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\\n    }\\n\\n    // 根据楼高判断颜色\\n    if(v_fragHeight >= v_fullHeight) {\\n        // vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n        // gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor = v_roofColor;\\n    } else if(v_textureCoord.x<0.0){\\n        gl_FragColor = v_color;\\n      \\n    }else{\\n        vec2 v_texture_pos = v_textureCoord;\\n        gl_FragColor = texture2D(u_image, v_texture_pos);\\n        gl_FragColor.a *= v_color.a;\\n    }\\n\\n    gl_FragColor.rgb *= diff + ambient;\\n    gl_FragColor.a *= u_opacity * topOpacity;\\n\\n    // 雾化\\n    // float y = v_pos.y / v_pos.w;\\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\\n    if(u_skyHeight < 1.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        // gl_FragColor.a *= fogFactor;\\n\\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var fillExtPatternVertextString=\"precision highp float;\\nattribute vec4 a_pos;\\n// attribute vec4 a_color;\\n// attribute float a_flag;\\nattribute vec3 a_normal;\\nattribute vec2 a_textureCoord;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_pitch;\\nuniform float u_heightFactor;\\nuniform vec4 u_roofColor;\\nuniform vec4 u_wallColor;\\n\\nvarying vec3 v_normal;\\nvarying vec4 v_color;\\nvarying vec4 v_roofColor;\\n// varying vec4 v_color;\\n// varying float v_height;\\n// varying float v_flag;\\nvarying float v_fullHeight;\\nvarying float v_fragHeight;\\nvarying vec4 v_pos;\\nvarying vec3 v_coord;\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n    vec3 pos = vec3(\\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\\n        // a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\\n        a_pos.z * u_heightFactor\\n    );\\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\\n\\n    // v_color = a_color;\\n    // v_flag = a_flag;\\n    v_coord = pos;\\n    v_textureCoord = a_textureCoord;\\n    v_pos = gl_Position;\\n    // vec4(a_pos, 1);\\n    v_fragHeight = a_pos.z;\\n    v_fullHeight = a_pos.w;\\n    // v_height = pos.z / a_pos.w;\\n    v_normal = normalize(a_normal);\\n    // 1.4 拿过来的\\n    v_roofColor = u_roofColor;\\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\\n}\\n\";var Color=M[\"Color\"];function linearColor(e,i,a){var n=[0,0,0,1];forEach(e.rgba,function(e,r){var t=i.rgba[r];n[r]=linearNumber(e,t,a)/255});return n}function linearNumber(e,r,t){var i=r-e;return e+i*t}var Property=function(){function e(e,r,t){if(t===void 0){t=\"other\"}this.key=e;this.type=r;this.sort=t}e.prototype.An=function(e,r,t,i,a){var n=this.Tn(e,r,t,i);if(!n){return null}var o=n[this.key];if(o&&o.rgba){return this.In(o.rgba)}else{return o}};e.prototype.In=function(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]/255]};e.prototype.Dn=function(e,r,t,i,a){var n=Math.floor(i);var o=Math.ceil(i);var f=i-n<.8?n:o;var s=this.Tn(e,r,t,n);var u=this.Tn(e,r,t,o);if(!s&&f===n){return undefined}if(!s&&!u){return undefined}if(s&&!u&&f===o){return undefined}if(!s&&u&&n===f){return undefined}var l=i-n;if(!s){l=(l-.8)/.2}l=Math.max(l,0);if(this.type===\"const\"){return this.Pn(e,r,t,f)}if(this.type===\"linear\"&&n===o){return this.Pn(e,r,t,n)}if(!s&&u){var v=u[this.key];if(typeof v===\"number\"){var c=0;return linearNumber(c,v,l)}var h=v.normalize();if(h&&this.sort!==\"line\"){h[3]=h[3]*l}return h}if(s&&!u){return this.Pn(e,r,t,n)}var d=s[this.key];var _=u[this.key];if(!d){if(typeof _===\"number\"){var g=0;return linearNumber(g,_,l)}var h=_.normalize();if(this.sort!==\"line\"){h[3]=h[3]*l}return h}else if(typeof d===\"number\"){return linearNumber(d,_,l)}else{return linearColor(d,_,l)}};e.prototype.Pn=function(e,r,t,i){var a;switch(this.sort){case\"line\":a=this.jn(e,r,t,i);break;case\"other\":a=this.On(e,r,t,i);break;default:a=this.On(e,r,t,i)}return a};e.prototype.Tn=function(e,r,t,i){var a;switch(this.sort){case\"line\":a=this.Fn(e,r,t,i);break;case\"other\":a=this.En(e,r,t,i);break;default:a=this.En(e,r,t,i)}return a};e.prototype.Fn=function(e,r,t,i){var a=e.dn(r,t,i);if(this.Nn(a)){return a[0]}return undefined};e.prototype.En=function(e,r,t,i){var a=e.dn(r,t,i);if(this.Nn(a)){return a}return undefined};e.prototype.jn=function(e,r,t,i){var a=Math.floor(i);var n=Math.ceil(i);var o=e.dn(r,t,a);if(o){var f=o[0][this.key];if(f&&f.normalize){return f.normalize()}return f}else{var s=e.dn(r,t,n);var f=s[0][this.key];if(f&&f.normalize){return f.normalize()}return f}};e.prototype.On=function(e,r,t,i){var a=Math.floor(i);var n=Math.ceil(i);var o=e.dn(r,t,a);if(o){var f=o[this.key];if(f instanceof Color){return f.normalize()}return f}else{var s=e.dn(r,t,n);var f=s[this.key];if(f instanceof Color){return f.normalize()}return f}};return e}();var LineProperty=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e,r,\"line\")||this;t.key=e;t.type=r;return t}e.prototype.Nn=function(e){return e&&e[0].roadColor};return e}(Property);var LineBorderProperty=function(i){__extends(e,i);function e(e,r){var t=i.call(this,e,r,\"line\")||this;t.key=e;t.type=r;return t}e.prototype.Nn=function(e){return e&&e[0].borderColor};return e}(Property);var FillProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.faceColor};return r}(Property);var BuildingProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.faceColor};return r}(Property);var BuildingBorderProperty=function(e){__extends(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Nn=function(e){return e&&e.wallColor2};return r}(Property);var fillExtUniforms={u_skyBMRange:\"vec2\",u_skyHeight:\"float\",u_viewHeight:\"float\",u_heightFactor:\"float\",u_roofColor:\"vec4\",u_wallColor:\"vec4\",u_lightDir:\"vec3\",u_opacity:\"float\",u_pitch:\"float\",u_offset:\"vec2\",u_matrix:\"mat4\",u_normalMatrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_isPick:\"bool\"};var fillExtAttributes={a_pos:{Me:\"float32\",Oe:\"vec4\"},a_normal:{Me:\"float32\",Oe:\"vec3\"}};var fillExt={uniforms:fillExtUniforms,attributes:fillExtAttributes,vertexSource:fillExtVertextString,fragmentSource:fillExtFragmentString};var getFillExtUniformValues=function(e,r,t,i,a,n,o){if(t===void 0){t=[0,0]}var f=e.viewState.zoom;var s=e.viewState.pitch;var u=e.viewState.size[1];var l=[16,zoomRange[1]];var v=1;var c=1;if(i.layer.CLASS_NAME===\"AMap.Buildings\"){l=i.zooms;v=i.opacity;c=i.heightFactor}c=c*Math.min((s+20)/50,.8);if(i.layer.CLASS_NAME===\"AMap.MapboxVectorTileLayer\"||i.layer.CLASS_NAME===\"AMap.VectorLayer\"){l=i.zooms;v=i.opacity;c=1}if(l[0]>f||l[1]<f){return}return{u_skyBMRange:o,u_skyHeight:n,u_viewHeight:u,u_heightFactor:c,u_roofColor:a.roofColor,u_wallColor:a.wallColor,u_lightDir:calcSunX(e.viewState.center),u_opacity:v,u_pitch:s,u_matrix:e.viewState.mvpMatrix,u_offset:[0,0],u_normalMatrix:e.viewState.N2,u_localDeltaCenter:t,u_isPick:false}};function calcSunX(e){var r=new Date;var t=r.getHours()+r.getMinutes()/60;var i=-15*t+300;var a=Math.sin(e[0]-i);return[a,1,.75]}var fillExtPatternUniforms={u_skyBMRange:\"vec2\",u_skyHeight:\"float\",u_viewHeight:\"float\",u_heightFactor:\"float\",u_roofColor:\"vec4\",u_wallColor:\"vec4\",u_lightDir:\"vec3\",u_opacity:\"float\",u_pitch:\"float\",u_offset:\"vec2\",u_matrix:\"mat4\",u_normalMatrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_image:\"sampler2D\",u_imageSize:\"vec2\",u_resolution:\"float\"};var fillExtPatternAttributes={a_pos:{Me:\"float32\",Oe:\"vec4\"},a_normal:{Me:\"float32\",Oe:\"vec3\"},a_textureCoord:{Me:\"uint16\",Oe:\"vec2\"}};var fillExtPattern={uniforms:fillExtPatternUniforms,attributes:fillExtPatternAttributes,vertexSource:fillExtPatternVertextString,fragmentSource:fillExtPatternFragmentString};var fillExtProperties={texture:new BuildingProperty(\"texture\",\"const\")};var getFillExtPatternUniformValues=function(e,r,t,i,a,n,o,f){if(t===void 0){t=[0,0]}var s=e.map.bZ.MZ.drawMode===\"fast\"?e.viewState.optimalZoom:e.viewState.zoom;var u=e.viewState.pitch;var l=e.viewState.size[1];var v=[16,zoomRange[1]];var c=1;var h=1;var d;if(i.layer.CLASS_NAME===\"AMap.Buildings\"){v=i.zooms;c=i.opacity;h=i.heightFactor}h=h*Math.min((u+20)/50,.8);if(i.layer.CLASS_NAME===\"AMap.MapboxVectorTileLayer\"||i.layer.CLASS_NAME===\"AMap.VectorLayer\"){v=i.zooms;c=i.opacity;d=r.bz;h=1}if(v[0]>s||v[1]<s){return}var _=r.mainkey,g=r.subkey,y=r.minzoom;if(f){d=fillExtProperties.texture.An(f,_,g,s,y)}if(!d){return}return{u_skyBMRange:o,u_skyHeight:n,u_viewHeight:l,u_heightFactor:h,u_roofColor:a.roofColor,u_wallColor:a.wallColor,u_lightDir:calcSunX(e.viewState.center),u_opacity:c,u_pitch:u,u_matrix:e.viewState.mvpMatrix,u_offset:[0,0],u_normalMatrix:e.viewState.N2,u_localDeltaCenter:t,u_image:d,u_imageSize:[1,1],u_resolution:e.viewState.optimalResolution}};var find$1=M[\"lodash\"][\"find\"];var map$1=M[\"lodash\"][\"map\"];var TileState=M[\"TileState\"];var vector$2=M[\"vector\"];var BuildingRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}if(!a.map.mapStyle.vn){return}var n=r.tiles;var o={};for(var f=0,s=n;f<s.length;f++){var u=s[f];if(u.status===TileState.LOADED){var l=u.zo.z;if(!o[l]){o[l]=[]}o[l].push(u)}}var v=i.layer;var c=v.uo.getSource(v.co());var h=c.ra(t.viewState.optimalZoom);var d=map$1(Object.keys(o),function(e){return parseInt(e,10)});d.sort(function(e,r){return e-r});var _=d.indexOf(h);if(_>=0){d.splice(_,1);d.push(h)}if(i.ce){e.context.clear({depth:true})}for(var g=0,y=d;g<y.length;g++){var m=y[g];var p=o[m];for(var b=0,x=p;b<x.length;b++){var u=x[b];if(u.status!==TileState.LOADED){continue}this.S_(e,u,t,i,a,true)}for(var C=0,S=p;C<S.length;C++){var u=S[C];if(u.status!==TileState.LOADED){continue}this.S_(e,u,t,i,a)}}};e.prototype.S_=function(e,r,t,i,a,n){if(n===void 0){n=false}var o=r.data;var f=t.map;var s=t.viewState;var u=t.viewState.size;var l=f.getView();var v={roofColor:i.roofColor,wallColor:i.wallColor};var c=f.getBuildingColor();var h=1;if(t.viewState.viewMode===\"3D\"){h=l.EF()}else{return}var d=l.X(u[0]/2,l.Uu()+5);var _=l.X(u[0]/2,l.Uu()-5);var g=l.pz().getPosition();var y=d[0]-g[0];var m=d[1]-g[1];var p=_[0]-g[0];var b=_[1]-g[1];var x=[Math.sqrt(y*y+m*m),Math.sqrt(p*p+b*b)];for(var C=0,S=o;C<S.length;C++){var M=S[C];var w=M.A_;if(!w){continue}var k=M.C_;w.upload(e.context,true);var T=w.zs;var I=find$1(t.map.getLayers(),function(e){return e.CLASS_NAME===\"AMap.IndoorMap\"});var A=void 0;if(I){A=I.yD().show}for(var $=0,F=k.jc;$<F.length;$++){var P=F[$];var L=f.mapStyle.vn.dn(P.mainkey,P.subkey,s.zoom);var R={};R.roofColor=P.roofColor||v.roofColor||c.roofColor||L&&L.faceColor&&vector$2.Up(L.faceColor.rgba,255);R.wallColor=P.wallColor||v.wallColor||c.wallColor||L&&L.faceColor&&vector$2.Up(L.borderColor.rgba,255);if(!R.wallColor||!R.roofColor){return}var E=fillExtProperties.texture.An(a.map.mapStyle,P.mainkey,P.subkey,t.viewState.zoom,P.minzoom);if(!I||!(P.bz&&A)){if(E){var O=getFillExtPatternUniformValues(t,P,r.Sa,i,R,h,x,a.map.mapStyle);if(O){var D=a.map.getImage(O.u_image);if(D){O.u_image=D;O.u_imageSize=D.size;var U=e.sH();U.Ce(O,{a_pos:{type:\"vec4\",Re:T.size,offset:0,buffer:T},a_normal:{type:\"vec3\",Re:T.size,offset:4*4,buffer:T},a_textureCoord:{type:\"vec2\",Re:T.size,offset:4*7,buffer:T}},P.length,undefined,\"TRIANGLES\",i.depthTest,n?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,P.offset)}else if(O.u_image&&a.map.I_&&!a.map.I_.MH(O.u_image)){a.map.addImage(O.u_image,{url:O.u_image,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return a.map.setNeedUpdate(true)}})}}}else{var O=getFillExtUniformValues(t,P,r.Sa,i,R,h,x);if(O){var U=e.k_();U.Ce(O,{a_pos:{type:\"vec4\",Re:T.size,offset:0,buffer:T},a_normal:{type:\"vec3\",Re:T.size,offset:4*4,buffer:T}},P.length,undefined,\"TRIANGLES\",i.depthTest,n?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,P.offset)}}}}}};return e}(LayerRender);var isSupportFloat32Array=typeof Float32Array!==\"undefined\";if(!isSupportFloat32Array){window[\"Float32Array\"]=undefined;setMatrixArrayType(Array)}var EPSILON=1e-6;var ARRAY_TYPE=typeof Float32Array!==\"undefined\"?Float32Array:Array;function setMatrixArrayType(e){ARRAY_TYPE=e}if(!Math.hypot)Math.hypot=function(){var e=0,r=arguments.length;while(r--){e+=arguments[r]*arguments[r]}return Math.sqrt(e)};function equals(e,r){var t=e[0],i=e[1],a=e[2],n=e[3];var o=e[4],f=e[5],s=e[6],u=e[7];var l=e[8],v=e[9],c=e[10],h=e[11];var d=e[12],_=e[13],g=e[14],y=e[15];var m=r[0],p=r[1],b=r[2],x=r[3];var C=r[4],S=r[5],M=r[6],w=r[7];var k=r[8],T=r[9],I=r[10],A=r[11];var $=r[12],F=r[13],P=r[14],L=r[15];return Math.abs(t-m)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(m))&&Math.abs(i-p)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(n-x)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-C)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(f-S)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(s-M)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-w)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-k)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(v-T)<=EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(c-I)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-A)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-$)<=EPSILON*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(_-F)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(g-P)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(y-L)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(L))}function create(){var e=new ARRAY_TYPE(3);if(ARRAY_TYPE!=Float32Array){e[0]=0;e[1]=0;e[2]=0}return e}function copy(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];return e}function set(e,r,t,i){e[0]=r;e[1]=t;e[2]=i;return e}function subtract(e,r,t){e[0]=r[0]-t[0];e[1]=r[1]-t[1];e[2]=r[2]-t[2];return e}var forEach$1=function(){var s=create();return function(e,r,t,i,a,n){var o,f;if(!r){r=3}if(!t){t=0}if(i){f=Math.min(i*r+t,e.length)}else{f=e.length}for(o=t;o<f;o+=r){s[0]=e[o];s[1]=e[o+1];s[2]=e[o+2];a(s,s,n);e[o]=s[0];e[o+1]=s[1];e[o+2]=s[2]}return e}}();var isSupportFloat64Array=typeof Float64Array!==\"undefined\";var isSupportFloat32Array$1=typeof Float32Array!==\"undefined\";if(isSupportFloat64Array){setMatrixArrayType(Float64Array)}else if(isSupportFloat32Array$1){setMatrixArrayType(Float32Array)}else{window[\"Float32Array\"]=undefined;setMatrixArrayType(Array)}var DomUtil=AMap[\"DomUtil\"];var CustomRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.type=\"customLayer\";e.OF=create();e.VM=create();return e}e.prototype.renderFrame=function(e,r,t,i){if(!i.alwaysRender&&this.OF&&this.EI&&this.BF&&this.NF&&(equals(this.NF,t.viewState.mvpMatrix)||t.map.TL())){var a=Math.pow(2,t.viewState.zoom-this.EI);subtract(this.VM,t.viewState.centerCoord,this.OF);set(this.VM,-(this.VM[0]/this.BF)*a,this.VM[1]/this.BF*a,0);if(a!==1){i.kv.style[DomUtil.kL]=\"scale3d(\"+a+\",\"+a+\",1)\"}i.kv.style.top=this.VM[1]+\"px\";i.kv.style.left=this.VM[0]+\"px\"}else{var n=i.layer;copy(this.OF,t.viewState.centerCoord);this.EI=t.viewState.zoom;this.NF=t.viewState.mvpMatrix;this.BF=t.viewState.resolution;if(n[\"render\"]){var o=n.getLayerConfig().zooms;if(t.viewState.zoom>=o[0]&&t.viewState.zoom<=o[1]){n.canvas.style.visibility=\"visible\";n[\"render\"]()}else{if(n&&n.canvas&&n.canvas){n.canvas.style.visibility=\"hidden\"}}}i.kv.style[DomUtil.kL]=\"\";i.kv.style.top=\"\";i.kv.style.left=\"\";i.kv.style.height=\"\";i.kv.style.visibility=\"\"}};return e}(LayerRender);var GLCustomRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.kC=true;return e}e.prototype.renderFrame=function(e,r,t,i){if(!e){return}var a=e.context;var n=a.gl;var o=i.layer;if(this.kC){this.kC=false;o.init(n)}if(o.render){var f=o.getLayerConfig().zooms;if(t.viewState.zoom>=f[0]&&t.viewState.zoom<=f[1]){o.render(n,t,t.viewState,a);a.setDirty()}}return};return e}(LayerRender);var ImageRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=e.context;var n=e.Gn();var o=i.layer.getLayerConfig().zooms;if(t.viewState.zoom<o[0]||t.viewState.zoom>o[1]){return}var f=t.viewState;var s=t.map;var u=1;if(f.viewMode===\"3D\"){u=s.getView().EF()}var l=s.JF(t.viewState.optimalZoom);var v=l||[1,1,1,0];if(i.ce){e.context.clear({depth:true})}n.Ce({u_skyColor:v,u_skyHeight:u,u_viewHeight:f.size[1],u_opacity:i.opacity,u_texture:r.texture,u_mvpMatrix:f.mvpMatrix,u_localDeltaCenter:r.Sa,u_flterFlag:false,u_colorscale:null},{a_Position:{type:\"vec4\",buffer:r.zs,Re:0,offset:0}},6,undefined,undefined,i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil);return};return e}(LayerRender);var NebulaTagType;(function(e){e[\"LITE\"]=\"lite\";e[\"LEFT\"]=\"left\";e[\"ALL\"]=\"all\";e[\"NONE\"]=\"\"})(NebulaTagType||(NebulaTagType={}));var extend=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}var i=Array.prototype.slice.call(arguments,1);var a;var n;var o;for(a=0,n=i.length;a<n;a=a+1){o=i[a]||{};for(var f in o){if(o.hasOwnProperty(f)){var s=o[f];if(typeof s!==\"function\"||!e.prototype){e[f]=s}else{e.prototype[f]=s}}}}return e};function isBrowser(){return typeof window!==\"undefined\"&&typeof document!==\"undefined\"}function isWasmSuppport(){try{if(typeof WebAssembly===\"object\"&&typeof WebAssembly.instantiate===\"function\"&&TextDecoder&&TextEncoder){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module){return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}}catch(e){}return false}var testWepP=function(e){var r=new Image;r.src=\"data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMw\"+\"AgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA\";r.onload=r.onerror=function(){e(r.height===2)}};function isWorkerEnv(){try{var e=!!document;return false}catch(e){return true}}function getSupport(e){var r={runSupport:(new Date).getTime()};var t=false;var i=false;var a=false;var n=false;var o=false;var f=isWasmSuppport();var s=navigator.userAgent.toLowerCase();var u=function(e){return s.indexOf(e)!==-1};var l=true;var v=u(\"macintosh\");var c=u(\"ipad;\")||u(\"ipad \"),h=u(\"ipod touch;\"),d=u(\"iphone;\")||u(\"iphone \"),_=d||c||h,g=(v||_)&&u(\"safari\")&&u(\"version/\"),y=u(\"macwechat\"),m=u(\"windowswechat\");var p={YV:o,WV:v,Ue:t,g:n,$e:i,scale:1,HV:a,DW:isWorkerEnv(),AJ:f,safari:g,AQ:y,gQ:m,amapRunTime:r};if(isBrowser()){var b=window,x=document,C=x.documentElement,S=/([a-z0-9]*\\d+[a-z0-9]*)/,M=function(e){if(!e){return null}e=e.toLowerCase();var r=null;var t=e.match(/angle \\((.*)\\)/);if(t){e=t[1];e=e.replace(/\\s*direct3d.*$/,\"\")}e=e.replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,\"\");if(e.indexOf(\"intel\")>=0){r=[\"Intel\"];if(0<=e.indexOf(\"mobile\")){r.push(\"Mobile\")}if(0<=e.indexOf(\"gma\")||0<=e.indexOf(\"graphics media accelerator\")){r.push(\"GMA\")}if(0<=e.indexOf(\"haswell\")){r.push(\"Haswell\")}else if(0<=e.indexOf(\"ivy\")){r.push(\"HD 4000\")}else if(0<=e.indexOf(\"sandy\")){r.push(\"HD 3000\")}else if(0<=e.indexOf(\"ironlake\")){r.push(\"HD\")}else{if(0<=e.indexOf(\"hd\")){r.push(\"HD\")}var i=e.match(S);if(i){r.push(i[1].toUpperCase())}}r=r.join(\" \");return r}if(e.indexOf(\"nvidia\")>=0||e.indexOf(\"quadro\")>=0||e.indexOf(\"geforce\")>=0||e.indexOf(\"nvs\")>=0){r=[\"nVidia\"];if(0<=e.indexOf(\"geforce\")){r.push(\"geForce\")}if(0<=e.indexOf(\"quadro\")){r.push(\"Quadro\")}if(0<=e.indexOf(\"nvs\")){r.push(\"NVS\")}if(e.match(/\\bion\\b/)){r.push(\"ION\")}if(e.match(/gtx\\b/)){r.push(\"GTX\")}else if(e.match(/gts\\b/)){r.push(\"GTS\")}else if(e.match(/gt\\b/)){r.push(\"GT\")}else if(e.match(/gs\\b/)){r.push(\"GS\")}else if(e.match(/ge\\b/)){r.push(\"GE\")}else if(e.match(/fx\\b/)){r.push(\"FX\")}var i=e.match(S);if(i){r.push(i[1].toUpperCase().replace(\"GS\",\"\"))}if(0<=e.indexOf(\"titan\")){r.push(\"TITAN\")}else if(0<=e.indexOf(\"ti\")){r.push(\"Ti\")}r=r.join(\" \");return r}if(e.indexOf(\"amd\")>=0||e.indexOf(\"ati\")>=0||e.indexOf(\"radeon\")>=0||e.indexOf(\"firegl\")>=0||e.indexOf(\"firepro\")>=0){r=[\"AMD\"];if(0<=e.indexOf(\"mobil\")){r.push(\"Mobility\")}var a=e.indexOf(\"radeon\");if(0<=a){r.push(\"Radeon\")}if(0<=e.indexOf(\"firepro\")){r.push(\"FirePro\")}else if(0<=e.indexOf(\"firegl\")){r.push(\"FireGL\")}if(0<=e.indexOf(\"hd\")){r.push(\"HD\")}if(a>=0){e=e.substring(a)}var i=e.match(S);if(i){r.push(i[1].toUpperCase().replace(\"HD\",\"\"))}r=r.join(\" \");return r}return e.substring(0,100)},w=\"google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965\".split(\";\"),k=\"ActiveXObject\"in b,T=window[\"detectRetina\"]==false?false:\"devicePixelRatio\"in b&&b[\"devicePixelRatio\"]>1||k&&\"matchMedia\"in b&&b.matchMedia(\"(min-resolution:144dpi)\")&&b.matchMedia(\"(min-resolution:144dpi)\").matches,I=u(\"windows nt\"),A=s.search(/windows nt [1-5]\\./)!==-1,$=s.search(/windows nt 5\\.[12]/)!==-1,F=u(\"windows nt 10\"),P=u(\"windows phone\"),L=u(\"Mb2345Browser\"),R=_&&s.search(/ os [456]_/)!==-1,E=_&&s.search(/ os [4-8]_/)!==-1,O=_&&s.search(/ os [78]_/)!==-1,D=_&&u(\"os 8_\"),U=_&&u(\"os 10_\"),N=u(\"android\");var B=0;if(N){B=parseInt(s.split(\"android\")[1])||0}var H=N&&B<4,z=N&&B>=5,G=z||s.search(/android 4.4/)!==-1,j=N?\"android\":_?\"ios\":I?\"windows\":v?\"mac\":\"other\",V=k&&!b[\"XMLHttpRequest\"],W=k&&!x.querySelector,q=k&&!x.addEventListener,Z=k&&u(\"msie 9\"),Y=k&&u(\"msie 10\"),K=k&&u(\"rv:11\"),X=q||Z,J=u(\"edge\"),Q=u(\"qtweb\"),ee=u(\"ucbrowser\"),re=u(\"alipay\")||N&&ee,te=u(\"miuibrowser\"),ie=u(\"micromessenger\"),ae=u(\"dingtalk\"),ne=u(\"mqqbrowser\"),oe=u(\"baidubrowser\"),fe=u(\"crios/\"),se=u(\"chrome/\"),ue=(se||fe)&&u(\"chromium\"),le=!ue&&(se&&parseInt(s.split(\"chrome/\")[1])>30||fe&&parseInt(s.split(\"crios/\")[1])>30),ve=u(\"firefox\"),ce=ve&&parseInt(s.split(\"firefox/\")[1])>27,he=g&&parseInt(s.split(\"version/\")[1])>7,de=_&&u(\"aliapp\"),_e=N||_||P||u(\"mobile\"),ge=\"ontouchstart\"in x,ye=b[\"navigator\"]&&b[\"navigator\"][\"msPointerEnabled\"]&&!!b[\"navigator\"][\"msMaxTouchPoints\"],me=b[\"navigator\"]&&!!b[\"navigator\"][\"maxTouchPoints\"],pe=!ge&&(me||ye),be=ge||pe,xe=function(){if(!_e){return b.devicePixelRatio||1}var e=document.getElementsByTagName(\"meta\");if(window.parent&&window.parent!==window){try{if(window.parent.location.origin===window.location.origin){e=window.parent.document.getElementsByTagName(\"meta\")}else{return 1}}catch(e){return 1}}for(var r=e.length-1;r>=0;r-=1){if(e[r].name===\"viewport\"){var t=e[r].content;var i=void 0,a=void 0,n=void 0;if(t.indexOf(\"initial-scale\")!==-1){i=parseFloat(t.split(\"initial-scale=\")[1])}if(t.indexOf(\"minimum-scale\")!==-1){a=parseFloat(t.split(\"minimum-scale=\")[1])}else{a=0}if(t.indexOf(\"maximum-scale\")!==-1){n=parseFloat(t.split(\"maximum-scale=\")[1])}else{n=Infinity}if(i){if(n>=a){if(i>n){return n}else if(i<a){return a}else{return i}}else{console&&console.log&&console.log(\"viewport参数不合法\");return null}}else{if(n>=a){if(a>=1){return 1}else{return Math.min(n,1)}}else{console&&console.log&&console.log(\"viewport参数不合法\");return null}}}}return undefined},Ce=xe(),Se=T&&(!_e||!!Ce&&Ce>=1),Me=k&&\"transition\"in C.style,we=!!x.createElementNS&&!!x.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\")[\"createSVGRect\"],ke=x.createElement(\"canvas\"),Te=!!(ke&&ke.getContext),Ie=window[\"URL\"]||window[\"webkitURL\"],Ae=false;var $e=window[\"disableWorker\"]!==true&&!k&&!(ee&&N&&!le)&&window[\"Worker\"]&&Ie&&Ie[\"createObjectURL\"]&&window[\"Blob\"],Fe=\"\",Pe=\"\",Le=0,Re=window[\"higtQualityRender\"]==false?T?false:true:true,Ee=window[\"movingDraw\"],Oe=window[\"forceWebGL\"]?{alpha:true,antialias:Re,depth:true,stencil:true}:{alpha:true,antialias:Re,depth:true,stencil:true},De=function(){if(!Te||!$e){return false}var e=[\"webgl\",\"experimental-webgl\",\"moz-webgl\"];var r=null;for(var t=0;t<e.length;t+=1){try{var i=Oe;r=ke.getContext(e[t],i)}catch(e){}if(!r){continue}else{if(r.drawingBufferWidth!==ke.width||r.drawingBufferHeight!==ke.height){return false}if(!r.getShaderPrecisionFormat||!r.getParameter||!r.getExtension){return false}Le=r.getParameter(r.MAX_RENDERBUFFER_SIZE);var a=r.getParameter(r.MAX_VIEWPORT_DIMS);if(!a){return false}Le=Math.min(Le,a[0],a[1]);if(g&&j===\"mac\"){Le=Math.min(Le,4096)}var n=Math.max(screen.width,screen.height);if(Se){n*=Math.min(2,window.devicePixelRatio||1)}if(n>Le){return false}if(23>r.getShaderPrecisionFormat(35632,36338).precision||23>r.getShaderPrecisionFormat(35633,36338).precision){return false}Pe=r.getExtension(\"WEBGL_debug_renderer_info\")?r.getParameter(37446):null;var o=M(Pe);if(o){if(o.indexOf(\"google swiftshader\")>-1){l=false;return false}if(-1!==w.indexOf(o)){return false}}Fe=e[t];return true}}return false},Ue=De(),Ne=e[8]!==undefined?e[8]:true,Be=window[\"Uint8Array\"]&&Ne&&!window[\"forbidenWebGL\"]&&Ue&&(window[\"forceWebGL\"]||(le||ce||he||J||ie||ae)&&j!==\"other\"),He=window[\"forceWebGLBaseRender\"]?\"w\":Be?\"w\":\"d\",ze=u(\"webkit\"),Ge=\"WebKitCSSMatrix\"in b&&\"m11\"in new window[\"WebKitCSSMatrix\"],je=\"MozPerspective\"in C.style,Ve=\"vV\"in C.style,We=Me||Ge||je||Ve,qe=false,Ze=e[12]!==undefined?e[12]:null;var Ye=true;try{if(typeof b.localStorage===\"undefined\"){Ye=false}else{var Ke=(new Date).getTime()+\"\";b.localStorage.setItem(\"_test\",Ke);if(b.localStorage.getItem(\"_test\")!==Ke){Ye=false}b.localStorage.removeItem(\"_test\")}}catch(e){Ye=false}var Xe=function(e,r){var t={};extend(t,Oe);extend(t,r);return e.getContext(Fe,t)};var Je=parseInt(s.split(\"chrome/\")[1]);p={qV:c,KV:d,size:d?100:N?200:500,WV:v,ZV:I,JV:_,uT:U,HV:N,QV:H,cT:re,eq:j,rq:oe,nq:ne,safari:g,iq:ie,ie:k,aq:V,oq:W,sq:Z,uq:Y,xv:q,fT:X,cq:K,fq:J,hT:k&&!K,lT:L,RL:Ye,vT:Ze,geolocation:_e||k&&!q||J,SL:ee,uc:ee&&!se,chrome:se,gT:true,hq:ve,B2:l,$e:_e,lq:_e&&ze,dq:_e&&Ge,vq:_e&&b.opera,Ue:T,bT:Ce,Mr:Se,YV:be,gq:ye,pq:me,yT:pe,pT:se&&Je>=57,mT:!_e&&se&&Je>=64,g:ze,bq:Me,yq:Ge,mq:je,Tq:Ve,Mq:We,Aq:we,xq:Te,Eb:$e,TT:qe,Tm:Be,AT:Fe,xT:Oe,ST:Pe,wT:Le,MT:Ae,movingDraw:Ee,baseRender:Ne?He:\"d\",scale:T?2:1,getContext:Xe,mH:false,AJ:f,amapRunTime:r,sY:De};testWepP(function(e){p.mH=e})}return p}var Browser=getSupport(typeof config===\"undefined\"?[]:config);if(typeof createImageBitmap!==\"undefined\"&&typeof ImageBitmap!==\"undefined\"){Browser.imageBitmap=true}var canceledWorkerFetch=Boolean(Browser.DW?!Browser.safari&&!Browser.AQ&&!Browser.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty(\"signal\"):!Browser.safari&&!Browser.AQ&&!Browser.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty(\"signal\"));Browser.LZ=canceledWorkerFetch;Browser[\"amapRunTime\"]={workerTime:{}};var projections={};var Projection=function(){function e(e,r,t,i){this.project=r;this.unproject=t;this.getResolution=i;projections[e]=this}e.prototype.Sq=function(e,r,t){var i=this.getResolution(t);var a=r[0]*i;var n=r[1]*i;var o=this.project(e[0],e[1]);return this.unproject(o[0]+a,o[1]+n)};e.prototype.wq=function(e,r){var t=this.project(e[0],e[1]);var i=[t[0]+r[0],t[1]+r[1]];return this.unproject(i[0],i[1])};return e}();var ProjectionManager={getProjection:function(e){return projections[e]}};var LngLat=function(){var e=function(e,r){return[e,r]};var r=function(e,r){return[e,r]};var t=function(e){return 180/256/Math.pow(2,e)};return new Projection(\"EPSG:4326\",e,r,t)}();var SphericalMercator=function(){var n=Math.PI/180;var a=180/Math.PI;var o=6378137;var f=85.0511287798;var e=function(e,r){var t=f;r=Math.max(Math.min(t,r),-t);var i=e*n;var a=r*n;a=Math.log(Math.tan(Math.PI/4+a/2));return[i*o,a*o]};var r=function(e,r){var t=e/o*a;var i=(2*Math.atan(Math.exp(r/o))-Math.PI/2)*a;return[t,i]};var t=function(e){return 20037508.342789244*2/256/Math.pow(2,e)};return new Projection(\"EPSG:3857\",e,r,t)}();var LCS=function(){function e(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244];this.cg=128;this.vg=128;this.lg=(this.hg[2]-this.hg[0])/this.cg;this.dg=(this.hg[3]-this.hg[1])/this.vg}e.prototype.setMap=function(e){this.map=e};e.prototype.getSize=function(){return[this.lg,this.dg]};e.prototype.getNum=function(){return[this.cg,this.vg]};e.prototype.getLocalByLnglat=function(e){var r;var t=(r=ProjectionManager.getProjection(\"EPSG:3857\")).project.apply(r,e);return this.getLocalByCoord(t)};e.prototype.getLocalByCoord=function(e){var r=Math.floor(e[0]/this.lg);var t=Math.floor(e[1]/this.dg);var i=this.getLocalCenterByXY(r,t);var a=[e[0]-i.center[0],e[1]-i.center[1]];return{Sa:a,x:r,y:t,center:i.center,Ro:i.Ro}};e.prototype.getLocalCenterByXY=function(e,r){var t={x:e,y:r,center:[0,0],Ro:[0,0,0,0]};t.center=[(e+.5)*this.lg,(r+.5)*this.dg];t.Ro=[e*this.lg,r*this.dg,(e+1)*this.lg,(r+1)*this.dg];return t};e.prototype.getDeltaCoord=function(e){var r=this.getLocalByCoord(e);return[e[0]-r.center[0],e[1]-r.center[1]]};return e}();var lcs$2=new LCS;var E4326=ProjectionManager.getProjection(\"EPSG:4326\");var E3857=ProjectionManager.getProjection(\"EPSG:3857\");var LngLat$1={Ro:[-180,-90,180,90],project:function(e,r,t){var i=E4326.project(e,r);return this.transform(i[0],i[1],t)},unproject:function(e,r,t){var i=this.Xs(e,r,t);return E4326.unproject(i[0],i[1])},transform:function(e,r,t){var i;if(t===undefined){i=180}else{i=256<<t}var a=i;var n=i*2;var o=this.Ro[2]-this.Ro[0];var f=this.Ro[3]-this.Ro[1];e=(e-this.Ro[0])/o*n;r=a-(r-this.Ro[1])/f*a;return[e,r]},Xs:function(e,r,t){var i;if(t===undefined){i=180}else{i=256<<t}var a=i;var n=i*2;e=(e/n-.5)*360;r=-(r/a-.5)*180;return[e,r]},nt:function(e,r,t){return this.Xs(e,r,t)},wu:function(e,r,t){return this.Xs(e,r,t)},yo:function(e,r,t){var i=0;if(e/this.Ro[3]>0){i=Math.abs(Math.floor(e/this.Ro[3]))}else{i=Math.abs(Math.ceil(e/this.Ro[3]))}var a=0;if(r/this.Ro[3]>0){a=Math.abs(Math.floor(r/this.Ro[3]))}else{a=Math.abs(Math.ceil(r/this.Ro[3]))}var n=e%this.Ro[3];var o=r%this.Ro[3];var f=this.transform(n,o,t);e=this.wu(e,e,t)[0]*i+f[0];r=this.wu(r,r,t)[1]*a+f[1];var s=this.transform(0,0,t),u=s[0],l=s[1];return[e-u,r-l]},Bb:function(e,r,t){return t.X(e,r)},qb:function(e,r,t){return t.H(e,r)},Gd:function(e,r,t,i){var a=i.X(e[0],e[1]);var n=i.X(e[0]+r,e[1]+t);return[n[0]-a[0],n[1]-a[1]]}};var SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(e,r,t){var i=E3857.project(e,r);return this.transform(i[0],i[1],t)},unproject:function(e,r,t){var i=this.Xs(e,r,t);return E3857.unproject(i[0],i[1])},transform:function(e,r,t){e=Math.min(20037508.342789244,Math.max(e,-20037508.342789244));r=Math.min(20037508.342789244,Math.max(r,-20037508.342789244));var i;if(t===undefined){i=20037508.342789244*2}else{i=256*Math.pow(2,t)}var a=this.Ro[2]-this.Ro[0];var n=this.Ro[3]-this.Ro[1];e=(e-this.Ro[0])/a*i;r=i-(r-this.Ro[1])/n*i;return[e,r]},Xs:function(e,r,t){var i;if(t===undefined){i=20037508.342789244*2}else{i=256*Math.pow(2,t)}e=(e/i-.5)*this.Ro[2]*2;r=-(r/i-.5)*this.Ro[2]*2;return[e,r]},nt:function(e,r,t,i){e=this.Xs(e,r,t)[0]-this.Ro[0];r=this.Ro[2]-this.Xs(e,r,t)[1];return[e,r]},wu:function(e,r,t,i){var a=i.center,n=i.size;var o=(i.rotation||0)/180*Math.PI;var f=this.transform(e,r,t),s=f[0],u=f[1];var l=this.transform(a[0],a[1],t),v=l[0],c=l[1];var h=s-v;var d=u-c;var _=Math.sqrt(Math.pow(h,2)+Math.pow(d,2));var g=d===0?Math.PI/2:Math.atan(Math.abs(h/d));var y;if(h*d<=0){y=g+o}else{y=g-o}var m=h>0?y:-y;var p=d>0?1:-1;var b=n[0]/2+_*Math.sin(m);var x=n[1]/2+_*Math.cos(y)*p;return[b,x]},yo:function(e,r,t,i){var a=0;if(e/this.Ro[3]>0){a=Math.abs(Math.floor(e/this.Ro[3]))}else{a=Math.abs(Math.ceil(e/this.Ro[3]))}var n=0;if(r/this.Ro[3]>0){n=Math.abs(Math.floor(r/this.Ro[3]))}else{n=Math.abs(Math.ceil(r/this.Ro[3]))}var o=e%this.Ro[3];var f=r%this.Ro[3];var s=this.transform(o,f,t);var u=this.transform(0,0,t),l=u[0],v=u[1];e=l*a+s[0];r=v*n+s[1];return[e-l,r-v]},Bb:function(e,r,t){return t.X(e,r)},qb:function(e,r,t){return t.H(e,r)},Gd:function(e,r,t,i){var a=i.X(e[0],e[1]);var n=i.X(e[0]+r,e[1]+t);return[n[0]-a[0],n[1]-a[1]]}};var transform={\"EPSG:4326\":LngLat$1,\"EPSG:3857\":SphericalMercator$1};var labelsUtil$2={Bj:function(e){if(e===void 0){e={}}var r={};for(var t in e){if(e.hasOwnProperty(t)){r[t]=1}}return r},zj:function(e,r){e.gs=r;e.qj=r.options||{};e.Wj=r.Wj||{};e.Fs=r.Fs||{};e.Gj=r.Gj||{};e.Hj=r.Hj||{};e.Vj=r.Vj||{};e.$j=r.$j||0},Yj:function(e,r){if(e===void 0){e=[NaN,NaN,NaN,NaN]}if(r===void 0){r=[0,0,0,1]}for(var t=0;t<e.length;t++){var i=e[t];if(isNaN(i)){e[t]=r[t]}}return e},Kj:function(e){var r=255;var t=65280;var i=16711680;var a=e&r;var n=(e&t)>>8;var o=(e&i)>>16;var f=255;return[o/f,n/f,a/f,1]},Xj:function(e,r){if(r===void 0){r={}}var t=[];var i=r.qw,a=r.Aw,n=r.complete;for(var o=0,f=e;o<f.length;o++){var s=f[o];var u=new Promise(s);t.push(u)}var l=0;Promise.all(t).then(function(){if(i){i.apply(void 0,arguments)}if(n&&!l){l=1;n.apply(void 0,arguments)}}).catch(function(){if(a){a.apply(void 0,arguments)}if(n&&!l){l=1;n.apply(void 0,arguments)}})},Jj:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l;if(i<=f){if(n>=f){if(n>u){l=[f,u]}else{l=[f,n]}}else{l=null}}else{l=labelsUtil$2.Jj(r,e)}return l},measureText:function(e,r,t,i){if(r===void 0){r=\"\"}if(i===void 0){i=\"3D\"}if(i===\"3D\"){return e.measureText(r,t)}},lnglatToContainer:function(e,r){var t=r.zoom,i=t===void 0?20:t;if(i<LocalZoom){return e}var a=lcs$2.getLocalByCoord(e);var n=vector$3.Ip(e,a.center);return n},Sd:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l=Math.abs(f-i);var v=Math.abs(u-n);var c=Math.sqrt(Math.pow(l,2)+Math.pow(v,2));return c},getAngle:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;var l=f-i;var v=u-n;var c;if(l!==0){c=Math.atan(v/l)}else if(v<0){return Math.PI*3/2}else{return Math.PI/2}var h;if(c===0){if(l>=0){h=c}else{h=c+Math.PI}}else if(c>0){if(l>=0){h=c}else{h=c+Math.PI}}else{if(l>0){h=2*Math.PI+c}else{h=Math.PI+c}}return h},Fd:function(e,r,t){var i=e[0],a=i===void 0?0:i,n=e[1],o=n===void 0?0:n;var f=r[0],s=f===void 0?0:f,u=r[1],l=u===void 0?0:u;var v=s-a;var c=l-o;var h=[];var d=0;while(d<t){var _=a+v/(t+1)*(d+1);var g=o+c/(t+1)*(d+1);var y=[_,g];h.push(y);d++}return h},OG:function(e,r,t){if(t!==0){var i=e[0]+(r[0]-e[0])*t;var a=e[1]+(r[1]-e[1])*t;return[i,a]}return e},Ed:function(e,r){if(e===void 0){e=[]}if(r===void 0){r=\"ch\"}var t=e.length;if(!t){return false}var i=e[0];var a=t>=4?Math.floor(t/4*3):t-1;var n=e[a];var o=i[0],f=i[1];var s=n[0],u=n[1];var l=u-f;var v=s-o;var c=l/v;var h=[s-o,u-f];var d;if(r===\"ch\"){if(Math.abs(c)>1){d=vector$3.Zj(h,[0,1])}else{d=vector$3.Zj(h,[1,0])}}else{d=vector$3.Zj(h,[1,0])}return d<0},Nd:function(e,r,t){var i=e[0],a=e[1];var n=r[0],o=r[1];var f=o-a;var s=n-i;var u=f/s;var l=[n-i,o-a];var v;var c;if(Math.abs(u)>1&&t!==\"x\"){v=vector$3.Zj(l,[0,-1]);if(v>0){c=vector$3.Qj(l,[0,-1])}else{c=vector$3.Qj(l,[0,1])}if(u>0){c=-c}}else{v=vector$3.Zj(l,[1,0]);if(v>0){c=vector$3.Qj(l,[1,0])}else{c=vector$3.Qj(l,[-1,0])}if(u<0){c=-c}}return c},Od:function(e,r,t){var i;var a;i=t*Math.sin(r);a=t*Math.cos(r);var n=e[0],o=e[1];var f=n+a;var s=o+i;return[f,s]},jd:function(e,r,t,i){var a=vector$3.Ip(e,r);var n=vector$3.length(a);var o=vector$3.Ip(t,r);var f=vector$3.length(o);var s=vector$3.Zj(a,o);var u=Math.acos(s/(n*f));var l=Math.PI-u;var v=n*Math.sin(l);var c=n*Math.cos(l);var h=Math.sqrt(Math.pow(i,2)-Math.pow(v,2));var d=h-c;var _=o[0]===0?o[1]>0?Math.PI/2:-Math.PI/2:Math.atan(o[1]/o[0]);var g=Math.abs(d*Math.sin(_));var y=d*Math.cos(_);var m=vector$3.Zj(o,[1,0]);var p=vector$3.Zj(o,[0,1]);var b=[m>=0?y:-y,p>=0?g:-g];var x=vector$3.add(r,b);return x},rank:function(e){var r=[];for(var t=0;t<e.length;t++){var i=parseFloat(e[t]);if(i<0){e.splice(t--,1);r.push(i)}else{e[t]=i}}e.sort(function(e,r){return e-r});e=r.concat(e);return e},$p:function(e){var r=CONSTS.Mp,t=CONSTS.Rp;if(e[1]>=zoomRange[1]){e[1]=t}if(e[0]<=zoomRange[0]){e[0]=r}return e},toString:function(e,r){if(r===void 0){r=4}var t=\"\";if(!e){return t}for(var i=0,a=e;i<a.length;i++){var n=a[i];if((n+\"\").length<r){t+=n}else{t+=n.toFixed(r)}}return t},xf:function(e,r){var t=[];var i=r.ja,a=r.Fa,n=r.Oa,o=r.Ea;for(var f in e){if(e.hasOwnProperty(f)){if(f===CONSTS.gH||f===CONSTS.FN||f===CONSTS.RB){continue}if(f===\"shields\"){t.push(e[f]);continue}if(i){var s=f.split(\"-\");var u=parseInt(s[1],10);var l=parseInt(s[2],10);if(u>=i&&u<=n&&l>=a&&l<=o){t.push(e[f])}}else{t.push(e[f])}}}if(!t.length){t=e}return t},EQ:function(e,r){var t=[];var i=r.length;for(var a=0;a<i-1;a++){var n=e.substring(r[a],r[a+1]);t.push(n)}if(!i){t=e.split(\"\")}return t},aQ:function(e){var r=[];for(var t=0;t<e.length;t++){var i=e[t];var a=[];for(var n=0;n<i.length;n++){var o=i.charCodeAt(n);a.push(o)}var f=a.join(\"|\");r.push(f)}return r},tQ:function(e,r,t){var i=\"\";var a=[];var n=\"\";if(e.name){if(e.JQ&&e.JQ.length>0){i=getSpiltLineWithSpiltIndex(e.name,e.JQ);n=\"ch\"}else if(t){var o=t.lineBreak(e.name,{from:\"labelsLayer\",CO:[]});var f=0;var s=\"\";if(o.oQ.length>=2){for(var u=1,l=o.oQ.length-1;u<l;u++){s+=e.name.slice(f,o.oQ[u])+\" \";f=o.oQ[u]}s+=e.name.slice(f)}else{s=e.name}i=s;n=\"ch\"}else{i=e.name;n=\"ch\"}}else{switch(r){case\"en\":{i=e.H2;a=e.iQ;n=\"en\";break}case\"local\":{i=e.QQ;a=e.$G;n=e.CQ;break}case\"zh_cn\":{i=e.BQ;n=\"ch\";break}default:{i=e.BQ;n=\"ch\"}}if(!i){if(e.H2){i=e.H2;a=e.iQ;n=\"en\"}else if(e.QQ){i=e.QQ;a=e.$G;n=e.QQ}}}return{name:i,$G:a,type:n}}};var vector$3={add:function(e,r){var t=[];for(var i=0;i<e.length;i++){t[i]=e[i]+r[i]}return t},Ip:function(e,r){var t=[];for(var i=0;i<e.length;i++){t.push(e[i]-r[i])}return t},multiply:function(e,r){var t=[];for(var i=0,a=e;i<a.length;i++){var n=a[i];t.push(n*r)}return t},Up:function(e,r){var t=[];for(var i=0;i<e.length;i++){t[i]=e[i]/r}return t},tA:function(e){return this.multiply(e,-1)},Zj:function(e,r){var t=e[0],i=t===void 0?0:t,a=e[1],n=a===void 0?0:a;var o=r[0],f=o===void 0?0:o,s=r[1],u=s===void 0?0:s;return i*f+n*u},Qj:function(e,r){var t=vector$3.Zj(e,r);var i=vector$3.length(e);var a=vector$3.length(r);var n=Math.acos(t/(i*a));return n},length:function(e){var r=e[0],t=e[1];return Math.sqrt(Math.pow(r,2)+Math.pow(t,2))}};function getSpiltLineWithSpiltIndex(e,r){r.shift();if(r.length===0){return e}var t=\"\";var i=0;for(var a=0,n=r.length;a<n;a++){t+=e.substr(i,r[a]-i)+\" \";i=r[a]}t+=e.substr(r[r.length-1]);return t}var scale$1=Browser.scale;var LabelsRenderUtil$3={getBounds:function(e,r){if(r===void 0){r={}}var t=r.zoom,i=r.centerCoord,a=r.view;var n=15;var o=[10*n*scale$1,10*n*scale$1,10*n*scale$1,10*n*scale$1];var f=e.boundsCoord;var s=f[0],u=f[1],l=f[2],v=f[3];var c=this.nt(0,0,t,r);var h=vector$3.Ip(this.nt(o[0],o[1],t,r),c);var d=vector$3.Ip(this.nt(o[2],o[3],t,r),c);var _=t>=LocalZoom?i:[0,0],g=_[0],y=_[1];var m=[s-g-Math.abs(d[1]),u-y-Math.abs(d[0])];var p=[l-g+Math.abs(h[1]),v-y+Math.abs(h[0])];return[m,p]},gz:function(e,r){var t=r[0],i=r[1];var a=e[0],n=e[1];var o=a-t[0];var f=n-t[1];var s=i[0]-a;var u=i[1]-n;return o>=0&&f>=0&&s>=0&&u>=0},wz:function(e,r){if(r===void 0){r={}}var t=r.forceShow,i=t===void 0?0:t,a=r._z,n=a===void 0?0:a;var o=e[\"data\"]||{};var f=o[\"rank\"]||1;var s=n/100;var u=2e5;f=i?f-1e5:s*u+f;return f},wu:function(e,r,t,i){if(e===void 0){e=0}if(r===void 0){r=0}if(i){var a=i.viewState,n=i.size,o=i.transform,f=i.view,s=i.viewMode,u=i.centerCoord,l=i.positionType,v=l===void 0?\"relative\":l;if(s===\"2D\"){var c={center:a.centerCoord,rotation:a.rotation,size:n};var h=a.optimalZoom>=LocalZoom?u:[0,0],d=h[0],_=h[1];return o.wu(e+d,r+_,t,c)}else{return v===\"relative\"?f.H(e,r):f._u(e,r)}}},r0:function(e,r,t,i,a){if(e===void 0){e=0}if(r===void 0){r=0}if(t===void 0){t=0}if(a){var n=a.viewState,o=a.size,f=a.transform,s=a.view,u=a.viewMode,l=a.centerCoord,v=a.positionType,c=v===void 0?\"relative\":v;if(u===\"2D\"){var h={center:n.centerCoord,rotation:n.rotation,size:o};var d=n.optimalZoom>=LocalZoom?l:[0,0],_=d[0],g=d[1];return f.wu(e+_,r+g,i,h)}else{return c===\"relative\"?s.H(e,r,t):s._u(e,r,t)}}},kz:function(e,r,t,i){if(e===void 0){e=[]}if(i===void 0){i={}}var a=i.centerCoord;if(r<LocalZoom&&t>=LocalZoom){var n=a[0],o=a[1];var f=[];for(var s=0,u=e;s<u.length;s++){var l=u[s];f.push([l[0]-n,l[1]-o])}return f}return e},nt:function(e,r,t,i){if(e===void 0){e=0}if(r===void 0){r=0}var a=i.view,n=i.transform,o=i.viewMode;if(o===\"2D\"){return n.nt(e,r,t)}else{return a.X(e,r)}},MG:function(e,r){if(e<LocalZoom-1){r=[0,0]}return r}};function isLngLat(e){return e&&e.className===\"AMap.LngLat\"}function isNumber(e){var r=+e;return typeof+r===\"number\"&&!isNaN(r)}function isNumberArray(e){return Array.isArray(e)&&isNumber(e[0])}function parseLngLatData(e){if(Array.isArray(e)){if(Array.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=parseLngLatData(e[r])}}else{var t=typeof e[0];if(t===\"string\"||t===\"number\"){return new LngLat$2(e[0],e[1])}else{return e}}}return e}var Coordinate={lr:function(e,r){var t=Infinity;for(var i=0,a=1,n=r.length;a<n;i=a,a+=1){t=Math.min(t,this.ur(e,[r[i],r[a]]))}return Math.sqrt(t)},ur:function(e,r){return this.cr(e,this.closestOnSegment(e,r))},cr:function(e,r){var t=e[0]-r[0];var i=e[1]-r[1];return t*t+i*i},pr:function(e,r,t,i){i=i||1e-6;if(t[0]===r[0]){var a=Math.min(r[1],t[1]);var n=Math.max(r[1],t[1]);return Math.abs(e[0]-t[0])<i&&e[1]>=a&&e[1]<=n}var o=Math.min(r[0],t[0]);var f=Math.max(r[0],t[0]);var s=(t[1]-r[1])/(t[0]-r[0])*(e[0]-r[0])+r[1];return Math.abs(s-e[1])<i&&e[0]>=o&&e[0]<=f},closestOnSegment:function(e,r){var t=e[0];var i=e[1];var a=r[0];var n=r[1];var o=a[0];var f=a[1];var s=n[0];var u=n[1];var l=s-o;var v=u-f;var c=l===0&&v===0?0:(l*(t-o)+v*(i-f))/(l*l+v*v||0);var h;var d;if(c<=0){h=o;d=f}else if(c>=1){h=s;d=u}else{h=o+c*l;d=f+c*v}return[h,d]},isClockwise:function(e){var r=e.length;var t=0;var i=e[r-1];var a=i[0];var n=i[1];var o;var f;var s;for(var u=0;u<r;u+=1){s=e[u];o=s[0];f=s[1];t+=(o-a)*(f+n);a=o;n=f}return t>0},ss:function(e,r,t){var i=e[0];var a=e[1];var n=false;var o;var f;var s;var u;var l=r.length;for(var v=0,c=l-1;v<l;c=v,v+=1){var h=false;o=r[v][0];f=r[v][1];s=r[c][0];u=r[c][1];if(o===i&&f===a||s===i&&u===a){return t?true:false}if(f<a===u>=a){var d=(s-o)*(a-f)/(u-f)+o;if(i===d){return t?true:false}else{h=i<d}}if(h){n=!n}}return n},dr:function(e,r){var t=function(e,r,t){return(t[0]-r[0])*(e[1]-r[1])>(t[1]-r[1])*(e[0]-r[0])};var i=function(e,r,t,i){var a=[e[0]-r[0],e[1]-r[1]],n=[t[0]-i[0],t[1]-i[1]],o=e[0]*r[1]-e[1]*r[0],f=t[0]*i[1]-t[1]*i[0],s=1/(a[0]*n[1]-a[1]*n[0]);return[(o*n[0]-f*a[0])*s,(o*n[1]-f*a[1])*s]};var a,n,o,f;var s=e;a=r[r.length-2];for(var u=0,l=r.length-1;u<l;u++){n=r[u];var v=s;s=[];o=v[v.length-1];for(var c=0,h=v.length;c<h;c++){f=v[c];if(t(f,a,n)){if(!t(o,a,n)){s.push(i(a,n,o,f))}s.push(f)}else if(t(o,a,n)){s.push(i(a,n,o,f))}o=f}a=n}if(s.length<3){return[]}s.push(s[0]);return s}};var Pixel=function(){function t(e,r,t){if(t===void 0){t=false}this.className=\"AMap.Pixel\";if(isNaN(e)||isNaN(r)){throw new Error(\"Invalid Object: Pixel(\"+e+\", \"+r+\")\")}this[\"x\"]=t?Math.round(e):Number(e);this[\"y\"]=t?Math.round(r):Number(r)}t.prototype[\"getX\"]=function(){return this.x};t.prototype[\"round\"]=function(){return new t(Math.round(this.x),Math.round(this.y))};t.prototype[\"getY\"]=function(){return this.y};t.prototype[\"toString\"]=function(){return this.x+\",\"+this.y};t.prototype[\"equals\"]=function(e){if(!(e instanceof t)){return false}var r=Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y));return r<=1e-9};t.prototype[\"toArray\"]=function(){return[this.x,this.y]};t.prototype[\"subtract\"]=function(e,r){return new t(this.x-e.x,this.y-e.y,r)};t.prototype[\"multiplyBy\"]=function(e,r){return new t(this.x*e,this.y*e,r)};t.prototype[\"direction\"]=function(){var e=this.x;var r=this.y;if(e===0&&r===0){return null}if(e===0){return r>0?90:270}var t=Math.atan(r/e)*180/Math.PI;if(e<0&&r>0){return t+180}else if(e<0&&r<0){return t+180}else if(e>0&&r<0){return t+360}else{return t}};t.prototype.toJSON=function(){return[this.x,this.y]};return t}();var commonjsGlobal=typeof globalThis!==\"undefined\"?globalThis:typeof window!==\"undefined\"?window:typeof global!==\"undefined\"?global:typeof self!==\"undefined\"?self:{};function unwrapExports(e){return e&&e.gP&&Object.prototype.hasOwnProperty.call(e,\"default\")?e[\"default\"]:e}function createCommonjsModule(e,r){return r={exports:{}},e(r,r.exports),r.exports}function getCjsExportFromNamespace(e){return e&&e[\"default\"]||e}var dist=createCommonjsModule(function(e,t){(function(e,r){r(t)})(commonjsGlobal,function(e){function i(e,r){return e>r?1:e<r?-1:0}var g=function e(r,t){if(r===void 0)r=i;if(t===void 0)t=false;this.bP=r;this.yP=null;this._size=0;this.mP=!!t};var r={size:{configurable:true}};g.prototype.TP=function e(r){var t=r.right;if(t){r.right=t.left;if(t.left){t.left.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.left=r}r.parent=t};g.prototype.wP=function e(r){var t=r.left;if(t){r.left=t.right;if(t.right){t.right.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.right=r}r.parent=t};g.prototype.AP=function e(r){while(r.parent){var t=r.parent;if(!t.parent){if(t.left===r){this.wP(t)}else{this.TP(t)}}else if(t.left===r&&t.parent.left===t){this.wP(t.parent);this.wP(t)}else if(t.right===r&&t.parent.right===t){this.TP(t.parent);this.TP(t)}else if(t.left===r&&t.parent.right===t){this.wP(t);this.TP(t)}else{this.TP(t);this.wP(t)}}};g.prototype.xP=function e(r){var t,i,a,n,o;while(r.parent){t=r.parent;i=t.parent;if(i&&i.parent){a=i.parent;if(a.left===i){a.left=r}else{a.right=r}r.parent=a}else{r.parent=null;this.yP=r}n=r.left;o=r.right;if(r===t.left){if(i){if(i.left===t){if(t.right){i.left=t.right;i.left.parent=i}else{i.left=null}t.right=i;i.parent=t}else{if(n){i.right=n;n.parent=i}else{i.right=null}r.left=i;i.parent=r}}if(o){t.left=o;o.parent=t}else{t.left=null}r.right=t;t.parent=r}else{if(i){if(i.right===t){if(t.left){i.right=t.left;i.right.parent=i}else{i.right=null}t.left=i;i.parent=t}else{if(o){i.left=o;o.parent=i}else{i.left=null}r.right=i;i.parent=r}}if(n){t.right=n;n.parent=t}else{t.right=null}r.left=t;t.parent=r}}};g.prototype.replace=function e(r,t){if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.parent=r.parent}};g.prototype.MP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.left){r=r.left}}return r};g.prototype.SP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.right){r=r.right}}return r};g.prototype.Xc=function e(r,t){var i=this.yP;var a=null;var n=this.bP;var o;if(this.mP){while(i){a=i;o=n(i.key,r);if(o===0){return}else if(n(i.key,r)<0){i=i.right}else{i=i.left}}}else{while(i){a=i;if(n(i.key,r)<0){i=i.right}else{i=i.left}}}i={key:r,data:t,left:null,right:null,parent:a};if(!a){this.yP=i}else if(n(a.key,i.key)<0){a.right=i}else{a.left=i}this.xP(i);this._size++;return i};g.prototype.find=function e(r){var t=this.yP;var i=this.bP;while(t){var a=i(t.key,r);if(a<0){t=t.right}else if(a>0){t=t.left}else{return t}}return null};g.prototype.contains=function e(r){var t=this.yP;var i=this.bP;while(t){var a=i(r,t.key);if(a===0){return true}else if(a<0){t=t.left}else{t=t.right}}return false};g.prototype.remove=function e(r){var t=this.find(r);if(!t){return false}this.xP(t);if(!t.left){this.replace(t,t.right)}else if(!t.right){this.replace(t,t.left)}else{var i=this.MP(t.right);if(i.parent!==t){this.replace(i,i.right);i.right=t.right;i.right.parent=i}this.replace(t,i);i.left=t.left;i.left.parent=i}this._size--;return true};g.prototype.removeNode=function e(r){if(!r){return false}this.xP(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var t=this.MP(r.right);if(t.parent!==r){this.replace(t,t.right);t.right=r.right;t.right.parent=t}this.replace(r,t);t.left=r.left;t.left.parent=t}this._size--;return true};g.prototype.$P=function e(r){var t=this.find(r);if(!t){return}this.xP(t);var i=t.left;var a=t.right;var n=null;if(i){i.parent=null;n=this.SP(i);this.xP(n);this.yP=n}if(a){if(i){n.right=a}else{this.yP=a}a.parent=n}this._size--};g.prototype.pop=function e(){var r=this.yP,t=null;if(r){while(r.left){r=r.left}t={key:r.key,data:r.data};this.remove(r.key)}return t};g.prototype.next=function e(r){var t=r;if(t){if(t.right){t=t.right;while(t&&t.left){t=t.left}}else{t=r.parent;while(t&&t.right===r){r=t;t=t.parent}}}return t};g.prototype.NM=function e(r){var t=r;if(t){if(t.left){t=t.left;while(t&&t.right){t=t.right}}else{t=r.parent;while(t&&t.left===r){r=t;t=t.parent}}}return t};g.prototype.forEach=function e(r){var t=this.yP;var i=[],a=false,n=0;while(!a){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();r(t,n++);t=t.right}else{a=true}}}return this};g.prototype.range=function e(r,t,i,a){var n=[];var o=this.bP;var f=this.yP,s;while(n.length!==0||f){if(f){n.push(f);f=f.left}else{f=n.pop();s=o(f.key,t);if(s>0){break}else if(o(f.key,r)>=0){if(i.call(a,f)){return this}}f=f.right}}return this};g.prototype.keys=function e(){var r=this.yP;var t=[],i=[],a=false;while(!a){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.key);r=r.right}else{a=true}}}return i};g.prototype.values=function e(){var r=this.yP;var t=[],i=[],a=false;while(!a){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.data);r=r.right}else{a=true}}}return i};g.prototype.at=function e(r){var t=this.yP;var i=[],a=false,n=0;while(!a){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();if(n===r){return t}n++;t=t.right}else{a=true}}}return null};g.prototype.load=function e(r,t,i){if(r===void 0)r=[];if(t===void 0)t=[];if(i===void 0)i=false;if(this._size!==0){throw new Error(\"bulk-load: tree is not empty\")}var a=r.length;if(i){u(r,t,0,a-1,this.bP)}this.yP=l(null,r,t,0,a);this._size=a;return this};g.prototype.min=function e(){var r=this.MP(this.yP);if(r){return r.key}else{return null}};g.prototype.max=function e(){var r=this.SP(this.yP);if(r){return r.key}else{return null}};g.prototype.isEmpty=function e(){return this.yP===null};r.size.get=function(){return this._size};g.LP=function e(r,t,i,a,n){return new g(i,n).load(r,t,a)};Object.defineProperties(g.prototype,r);function l(e,r,t,i,a){var n=a-i;if(n>0){var o=i+Math.floor(n/2);var f=r[o];var s=t[o];var u={key:f,data:s,parent:e};u.left=l(u,r,t,i,o);u.right=l(u,r,t,o+1,a);return u}return null}function u(e,r,t,i,a){if(t>=i){return}var n=e[t+i>>1];var o=t-1;var f=i+1;while(true){do{o++}while(a(e[o],n)<0);do{f--}while(a(e[f],n)>0);if(o>=f){break}var s=e[o];e[o]=e[f];e[f]=s;s=r[o];r[o]=r[f];r[f]=s}u(e,r,t,f,a);u(e,r,f+1,i,a)}var o=0;var s=1;var v=2;var c=3;var y=0;var f=1;var m=2;var h=3;function p(e,r,t){if(r===null){e.PP=false;e.OP=true}else{if(e._P===r._P){e.PP=!r.PP;e.OP=r.OP}else{e.PP=!r.OP;e.OP=r.NP()?!r.PP:r.PP}if(r){e.CP=!a(r,t)||r.NP()?r.CP:r}}var i=a(e,t);if(i){e.hN=n(e,t)}else{e.hN=0}}function a(e,r){switch(e.type){case o:switch(r){case y:return!e.OP;case f:return e.OP;case m:return e._P&&e.OP||!e._P&&!e.OP;case h:return true}break;case v:return r===y||r===f;case c:return r===m;case s:return false}return false}function n(e,r){var t=!e.PP;var i=!e.OP;var a;switch(r){case y:a=t&&i;break;case f:a=t||i;break;case h:a=t^i;break;case m:if(e._P){a=t&&!i}else{a=i&&!t}break}return a?+1:-1}var d=function e(r,t,i,a,n){this.left=t;this.point=r;this.IP=i;this._P=a;this.type=n||o;this.PP=false;this.OP=false;this.CP=null;this.hN=0;this.lN=-1;this.dN=-1;this.DP=true};var t={EP:{configurable:true}};d.prototype.FP=function e(r){var t=this.point,i=this.IP.point;return this.left?(t[0]-r[0])*(i[1]-r[1])-(i[0]-r[0])*(t[1]-r[1])>0:(i[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(i[1]-r[1])>0};d.prototype.RP=function e(r){return!this.FP(r)};d.prototype.NP=function e(){return this.point[0]===this.IP.point[0]};t.EP.get=function(){return this.hN!==0};d.prototype.clone=function e(){var r=new d(this.point,this.left,this.IP,this._P,this.type);r.UP=this.UP;r.hN=this.hN;r.CP=this.CP;r.DP=this.DP;r.PP=this.PP;r.OP=this.OP;return r};Object.defineProperties(d.prototype,t);function _(e,r){if(e[0]===r[0]){if(e[1]===r[1]){return true}else{return false}}return false}var b=11102230246251565e-32;var R=134217729;var E=(3+8*b)*b;function O(e,r,t,i,a){var n,o,f,s;var u=r[0];var l=i[0];var v=0;var c=0;if(l>u===l>-u){n=u;u=r[++v]}else{n=l;l=i[++c]}var h=0;if(v<e&&c<t){if(l>u===l>-u){o=u+n;f=n-(o-u);u=r[++v]}else{o=l+n;f=n-(o-l);l=i[++c]}n=o;if(f!==0){a[h++]=f}while(v<e&&c<t){if(l>u===l>-u){o=n+u;s=o-n;f=n-(o-s)+(u-s);u=r[++v]}else{o=n+l;s=o-n;f=n-(o-s)+(l-s);l=i[++c]}n=o;if(f!==0){a[h++]=f}}}while(v<e){o=n+u;s=o-n;f=n-(o-s)+(u-s);u=r[++v];n=o;if(f!==0){a[h++]=f}}while(c<t){o=n+l;s=o-n;f=n-(o-s)+(l-s);l=i[++c];n=o;if(f!==0){a[h++]=f}}if(n!==0||h===0){a[h++]=n}return h}function D(e,r){var t=r[0];for(var i=1;i<e;i++){t+=r[i]}return t}function x(e){return commonjsGlobal.Float64Array?new Float64Array(e):new Array(e)}var C=(3+16*b)*b;var U=(2+12*b)*b;var N=(9+64*b)*b*b;var B=x(4);var H=x(8);var z=x(12);var G=x(16);var j=x(4);function S(e,r,t,i,a,n,o){var f,s,u,l;var v,c,h,d,_,g,y,m,p,b,x,C,S,M;var w=e-a;var k=t-a;var T=r-n;var I=i-n;b=w*I;c=R*w;h=c-(c-w);d=w-h;c=R*I;_=c-(c-I);g=I-_;x=d*g-(b-h*_-d*_-h*g);C=T*k;c=R*T;h=c-(c-T);d=T-h;c=R*k;_=c-(c-k);g=k-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;B[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;B[1]=p-(y+v)+(v-C);M=m+y;v=M-m;B[2]=m-(M-v)+(y-v);B[3]=M;var A=D(4,B);var $=U*o;if(A>=$||-A>=$){return A}v=e-w;f=e-(w+v)+(v-a);v=t-k;u=t-(k+v)+(v-a);v=r-T;s=r-(T+v)+(v-n);v=i-I;l=i-(I+v)+(v-n);if(f===0&&s===0&&u===0&&l===0){return A}$=N*o+E*Math.abs(A);A+=w*l+I*f-(T*u+k*s);if(A>=$||-A>=$){return A}b=f*I;c=R*f;h=c-(c-f);d=f-h;c=R*I;_=c-(c-I);g=I-_;x=d*g-(b-h*_-d*_-h*g);C=s*k;c=R*s;h=c-(c-s);d=s-h;c=R*k;_=c-(c-k);g=k-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var F=O(4,B,4,j,H);b=w*l;c=R*w;h=c-(c-w);d=w-h;c=R*l;_=c-(c-l);g=l-_;x=d*g-(b-h*_-d*_-h*g);C=T*u;c=R*T;h=c-(c-T);d=T-h;c=R*u;_=c-(c-u);g=u-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var P=O(F,H,4,j,z);b=f*l;c=R*f;h=c-(c-f);d=f-h;c=R*l;_=c-(c-l);g=l-_;x=d*g-(b-h*_-d*_-h*g);C=s*u;c=R*s;h=c-(c-s);d=s-h;c=R*u;_=c-(c-u);g=u-_;S=d*g-(C-h*_-d*_-h*g);y=x-S;v=x-y;j[0]=x-(y+v)+(v-S);m=b+y;v=m-b;p=b-(m-v)+(y-v);y=p-C;v=p-y;j[1]=p-(y+v)+(v-C);M=m+y;v=M-m;j[2]=m-(M-v)+(y-v);j[3]=M;var L=O(P,z,4,j,G);return G[L-1]}function M(e,r,t,i,a,n){var o=(r-n)*(t-a);var f=(e-a)*(i-n);var s=o-f;if(o===0||f===0||o>0!==f>0){return s}var u=Math.abs(o+f);if(Math.abs(s)>=C*u){return s}return-S(e,r,t,i,a,n,u)}function w(e,r,t){var i=M(e[0],e[1],r[0],r[1],t[0],t[1]);if(i>0){return-1}if(i<0){return 1}return 0}function k(e,r){var t=e.point;var i=r.point;if(t[0]>i[0]){return 1}if(t[0]<i[0]){return-1}if(t[1]!==i[1]){return t[1]>i[1]?1:-1}return T(e,r,t)}function T(e,r,t,i){if(e.left!==r.left){return e.left?1:-1}if(w(t,e.IP.point,r.IP.point)!==0){return!e.FP(r.IP.point)?1:-1}return!e._P&&r._P?1:-1}function I(e,r,t){var i=new d(r,false,e,e._P);var a=new d(r,true,e.IP,e._P);if(_(e.point,e.IP.point)){console.warn(\"what is that, a collapsed segment?\",e)}i.UP=a.UP=e.UP;if(k(a,e.IP)>0){e.IP.left=true;a.left=false}e.IP.IP=a;e.IP=i;t.push(a);t.push(i);return t}function A(e,r){return e[0]*r[1]-e[1]*r[0]}function $(e,r){return e[0]*r[0]+e[1]*r[1]}function F(e,r,t,i,a){var n=[r[0]-e[0],r[1]-e[1]];var o=[i[0]-t[0],i[1]-t[1]];function f(e,r,t){return[e[0]+r*t[0],e[1]+r*t[1]]}var s=[t[0]-e[0],t[1]-e[1]];var u=A(n,o);var l=u*u;var v=$(n,n);if(l>0){var c=A(s,o)/u;if(c<0||c>1){return null}var h=A(s,n)/u;if(h<0||h>1){return null}if(c===0||c===1){return a?null:[f(e,c,n)]}if(h===0||h===1){return a?null:[f(t,h,o)]}return[f(e,c,n)]}u=A(s,n);l=u*u;if(l>0){return null}var d=$(n,s)/v;var _=d+$(n,o)/v;var g=Math.min(d,_);var y=Math.max(d,_);if(g<=1&&y>=0){if(g===1){return a?null:[f(e,g>0?g:0,n)]}if(y===0){return a?null:[f(e,y<1?y:1,n)]}if(a&&g===0&&y===1){return null}return[f(e,g>0?g:0,n),f(e,y<1?y:1,n)]}return null}function P(e,r,t){var i=F(e.point,e.IP.point,r.point,r.IP.point);var a=i?i.length:0;if(a===0){return 0}if(a===1&&(_(e.point,r.point)||_(e.IP.point,r.IP.point))){return 0}if(a===2&&e._P===r._P){return 0}if(a===1){if(!_(e.point,i[0])&&!_(e.IP.point,i[0])){I(e,i[0],t)}if(!_(r.point,i[0])&&!_(r.IP.point,i[0])){I(r,i[0],t)}return 1}var n=[];var o=false;var f=false;if(_(e.point,r.point)){o=true}else if(k(e,r)===1){n.push(r,e)}else{n.push(e,r)}if(_(e.IP.point,r.IP.point)){f=true}else if(k(e.IP,r.IP)===1){n.push(r.IP,e.IP)}else{n.push(e.IP,r.IP)}if(o&&f||o){r.type=s;e.type=r.PP===e.PP?v:c;if(o&&!f){I(n[1].IP,n[0].point,t)}return 2}if(f){I(n[0],n[1].point,t);return 3}if(n[0]!==n[3].IP){I(n[0],n[1].point,t);I(n[1],n[2].point,t);return 3}I(n[0],n[1].point,t);I(n[3].IP,n[2].point,t);return 3}function L(e,r){if(e===r){return 0}if(w(e.point,e.IP.point,r.point)!==0||w(e.point,e.IP.point,r.IP.point)!==0){if(_(e.point,r.point)){return e.FP(r.IP.point)?-1:1}if(e.point[0]===r.point[0]){return e.point[1]<r.point[1]?-1:1}if(k(e,r)===1){return r.RP(e.point)?-1:1}return e.FP(r.point)?-1:1}if(e._P===r._P){var t=e.point,i=r.point;if(t[0]===i[0]&&t[1]===i[1]){t=e.IP.point;i=r.IP.point;if(t[0]===i[0]&&t[1]===i[1]){return 0}else{return e.UP>r.UP?1:-1}}}else{return e._P?-1:1}return k(e,r)===1?1:-1}function V(e,r,t,i,a,n){var o=new g(L);var f=[];var s=Math.min(i[2],a[2]);var u,l,v;while(e.length!==0){var c=e.pop();f.push(c);if(n===y&&c.point[0]>s||n===m&&c.point[0]>i[2]){break}if(c.left){l=u=o.Xc(c);v=o.MP();if(u!==v){u=o.NM(u)}else{u=null}l=o.next(l);var h=u?u.key:null;var d=void 0;p(c,h,n);if(l){if(P(c,l.key,e)===2){p(c,h,n);p(c,l.key,n)}}if(u){if(P(u.key,c,e)===2){var _=u;if(_!==v){_=o.NM(_)}else{_=null}d=_?_.key:null;p(h,d,n);p(c,h,n)}}}else{c=c.IP;l=u=o.find(c);if(u&&l){if(u!==v){u=o.NM(u)}else{u=null}l=o.next(l);o.remove(c);if(l&&u){P(u.key,l.key,e)}}}}return f}var W=function e(){this.points=[];this.vN=[];this.gN=null;this.depth=null};W.prototype.pN=function e(){return this.gN==null};function q(e){var r,t,i,a;var n=[];for(t=0,i=e.length;t<i;t++){r=e[t];if(r.left&&r.EP||!r.left&&r.IP.EP){n.push(r)}}var o=false;while(!o){o=true;for(t=0,i=n.length;t<i;t++){if(t+1<i&&k(n[t],n[t+1])===1){a=n[t];n[t]=n[t+1];n[t+1]=a;o=false}}}for(t=0,i=n.length;t<i;t++){r=n[t];r.lN=t}for(t=0,i=n.length;t<i;t++){r=n[t];if(!r.left){a=r.lN;r.lN=r.IP.lN;r.IP.lN=a}}return n}function Z(e,r,t,i){var a=e+1,n=r[e].point,o;var f=r.length;if(a<f){o=r[a].point}while(a<f&&o[0]===n[0]&&o[1]===n[1]){if(!t[a]){return a}else{a++}o=r[a].point}a=e-1;while(t[a]&&a>i){a--}return a}function Y(e,r,t){var i=new W;if(e.CP!=null){var a=e.CP;var n=a.dN;var o=a.hN;if(o>0){var f=r[n];if(f.gN!=null){var s=f.gN;r[s].vN.push(t);i.gN=s;i.depth=r[n].depth}else{r[n].vN.push(t);i.gN=n;i.depth=r[n].depth+1}}else{i.gN=null;i.depth=r[n].depth}}else{i.gN=null;i.depth=0}return i}function K(e){var o,r;var f=q(e);var s={};var u=[];var t=function(){if(s[o]){return}var r=u.length;var e=Y(f[o],u,r);var t=function(e){s[e]=true;f[e].dN=r};var i=o;var a=o;var n=f[o].point;e.points.push(n);while(true){t(i);i=f[i].lN;t(i);e.points.push(f[i].point);i=Z(i,f,s,a);if(i==a){break}}u.push(e)};for(o=0,r=f.length;o<r;o++)t();return u}var X=Q;var J=Q;function Q(e,r){if(!(this instanceof Q)){return new Q(e,r)}this.data=e||[];this.length=this.data.length;this.compare=r||ee;if(this.length>0){for(var t=(this.length>>1)-1;t>=0;t--){this.zP(t)}}}function ee(e,r){return e<r?-1:e>r?1:0}Q.prototype={push:function(e){this.data.push(e);this.length++;this.El(this.length-1)},pop:function(){if(this.length===0){return undefined}var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this.zP(0)}this.data.pop();return e},GP:function(){return this.data[0]},El:function(e){var r=this.data;var t=this.compare;var i=r[e];while(e>0){var a=e-1>>1;var n=r[a];if(t(i,n)>=0){break}r[e]=n;e=a}r[e]=i},zP:function(e){var r=this.data;var t=this.compare;var i=this.length>>1;var a=r[e];while(e<i){var n=(e<<1)+1;var o=n+1;var f=r[n];if(o<this.length&&t(r[o],f)<0){n=o;f=r[o]}if(t(f,a)>=0){break}r[e]=f;e=n}r[e]=a}};X.default=J;var re=Math.max;var te=Math.min;var ie=0;function ae(e,r,t,i,a,n){var o,f,s,u,l,v;for(o=0,f=e.length-1;o<f;o++){s=e[o];u=e[o+1];l=new d(s,false,undefined,r);v=new d(u,false,l,r);l.IP=v;if(s[0]===u[0]&&s[1]===u[1]){continue}l.UP=v.UP=t;if(!n){l.DP=false;v.DP=false}if(k(l,v)>0){v.left=true}else{l.left=true}var c=s[0],h=s[1];a[0]=te(a[0],c);a[1]=te(a[1],h);a[2]=re(a[2],c);a[3]=re(a[3],h);i.push(l);i.push(v)}}function ne(e,r,t,i,a){var n=new X(null,k);var o,f,s,u,l,v;for(s=0,u=e.length;s<u;s++){o=e[s];for(l=0,v=o.length;l<v;l++){f=l===0;if(f){ie++}ae(o[l],true,ie,n,t,f)}}for(s=0,u=r.length;s<u;s++){o=r[s];for(l=0,v=o.length;l<v;l++){f=l===0;if(a===m){f=false}if(f){ie++}ae(o[l],false,ie,n,i,f)}}return n}var oe=[];function fe(e,r,t){var i=null;if(e.length*r.length===0){if(t===y){i=oe}else if(t===m){i=e}else if(t===f||t===h){i=e.length===0?r:e}}return i}function se(e,r,t,i,a){var n=null;if(t[0]>i[2]||i[0]>t[2]||t[1]>i[3]||i[1]>t[3]){if(a===y){n=oe}else if(a===m){n=e}else if(a===f||a===h){n=e.concat(r)}}return n}function ue(e,r,t){if(typeof e[0][0][0]===\"number\"){e=[e]}if(typeof r[0][0][0]===\"number\"){r=[r]}var i=fe(e,r,t);if(i){return i===oe?null:i}var a=[Infinity,Infinity,-Infinity,-Infinity];var n=[Infinity,Infinity,-Infinity,-Infinity];var o=ne(e,r,a,n,t);i=se(e,r,a,n,t);if(i){return i===oe?null:i}var f=V(o,e,r,a,n,t);var s=K(f);var u=[];for(var l=0;l<s.length;l++){var v=s[l];if(v.pN()){var c=[v.points];for(var h=0;h<v.vN.length;h++){var d=v.vN[h];c.push(s[d].points)}u.push(c)}}return u}function le(e,r){return ue(e,r,f)}function ve(e,r){return ue(e,r,m)}function ce(e,r){return ue(e,r,h)}function he(e,r){return ue(e,r,y)}var de={VP:f,BP:m,HP:y,WP:h};e.ZP=ve;e.qP=he;e.YP=de;e.$q=le;e.xor=ce;Object.defineProperty(e,\"gP\",{value:true})})});var martinez=unwrapExports(dist);var Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(e,r){function t(e){switch(e){case\"EPSG3857\":return ProjectionManager.getProjection(\"EPSG:3857\");case\"EPSG4326\":return ProjectionManager.getProjection(\"EPSG:4326\")}return ProjectionManager.getProjection(\"EPSG3857\")}var i=t(e);return{project:function(e){if(Util$3.isArray(e)){e=new LngLat$2(e[0],e[1])}return i.project(e.lng,e.lat)},unproject:function(e){if(Util$3.isArray(e)){e=new Pixel(e[0],e[1])}return i.unproject(e.x,e.y)},normalizePoint:function(e){return Util$3.parseLngLatData(e)},distance:function(e,r){r=this[\"normalizePoint\"](r);if(Util$3.isArray(r)){return this[\"distanceToLine\"](e,r)}e=this[\"normalizePoint\"](e);var t=Const.vr;var i=Math.cos;var a=e.lat*t,n=e.lng*t,o=r.lat*t,f=r.lng*t;var s=Const.yr*2;var u=o-a;var l=f-n;var v=(1-i(u)+(1-i(l))*i(a)*i(o))/2;return s*Math.asin(Math.sqrt(v))},ringArea:function(e){e=this[\"normalizeLine\"](e);var r=Const.yr*Const.vr;var t=0,i=e,a=i.length;if(a<3){return 0}var n=0;for(;n<a-1;n+=1){var o=i[n];var f=i[n+1];var s=o.lng*r*Math.cos(o.lat*Const.vr);var u=o.lat*r;var l=f.lng*r*Math.cos(f.lat*Const.vr);var v=f.lat*r;t+=s*v-l*u}var c=i[n];var h=i[0];var d=c.lng*r*Math.cos(c.lat*Const.vr);var _=c.lat*r;var g=h.lng*r*Math.cos(h.lat*Const.vr);var y=h.lat*r;t+=d*y-g*_;var m=.5*Math.abs(t);return m},sphericalCalotteArea:function(e){var r=Const.yr;var t=e/r;var i=r-r*Math.cos(t);return 2*Math.PI*r*i}}}function getPlanarCrs(){return{normalizePoint:function(e){if(e&&e[\"x\"]&&e[\"y\"]){return[e[\"x\"],e[\"y\"]]}return e},distance:function(e,r){var t=e[0]-r[0],i=e[1]-r[1];return Math.sqrt(t*t+i*i)},project:function(e){return e},unproject:function(e){return e},ringArea:function(e){var r=[0,0];var t=[0,0];var i=0;var a=e[0];var n=e.length;for(var o=2;o<n;o++){var f=e[o-1];var s=e[o];r[0]=a[0]-s[0];r[1]=a[1]-s[1];t[0]=a[0]-f[0];t[1]=a[1]-f[1];i+=r[0]*t[1]-r[1]*t[0]}return i/2}}}function isClockwise(e){var r=0;var t=e.length;for(var i=0;i<t-1;i++){var a=e[i],n=e[i+1];r+=(n[0]-a[0])*(n[1]+a[1])}if(e[t-1][0]!==e[0][0]||e[t-1][1]!==e[0][1]){var a=e[t-1],n=e[0];r+=(n[0]-a[0])*(n[1]+a[1])}return r>0}var GeometryUtilCls=function(){function r(e){this.CLASS_NAME=\"AMap.GeometryUtil\";this._opts=assign({onSegmentTolerance:5,crs:\"EPSG3857\",maxZoom:zoomRange[1]},e);this[\"setCrs\"](this._opts[\"crs\"])}r.prototype[\"clone\"]=function(e){return new r(assign({},this._opts,e))};r.prototype[\"isPoint\"]=function(e){return e&&(e instanceof LngLat$2||Util$3.isArray(e)&&!isNaN(e[0]))};r.prototype[\"normalizePoint\"]=function(e){return e};r.prototype[\"normalizeLine\"]=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"normalizePoint\"](e[t]))}return r};r.prototype[\"normalizeMultiLines\"]=function(e){if(Util$3.isArray(e)&&this[\"isPoint\"](e[0])){e=[e]}var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"normalizeLine\"](e[t]))}return r};r.prototype[\"setCrs\"]=function(e){var r;if(e&&e[\"project\"]&&e[\"unproject\"]){r=e}else if(e===\"plane\"){r=getPlanarCrs()}else{r=getSphericalCrs(e,this._opts[\"maxZoom\"])}assign(this,r);return};r.prototype[\"distance\"]=function(e,r){throw new Error(\"distance Not implemented!\")};r.prototype.xr=function(e,r){e=this[\"normalizeLine\"](e);if(!this[\"isPoint\"](e[0])){e=e[0]}var t=[];for(var i=0,a=e.length;i<a;i++){t.push(this[\"project\"](e[i]))}if(r===true){t=this[\"makesureClockwise\"](t)}else if(r===false){t=this[\"makesureClockwise\"](t);t.reverse()}return t};r.prototype.br=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this[\"unproject\"](e[t]))}return r};r.prototype[\"closestOnSegment\"]=function(e,r,t){var i=Coordinate.closestOnSegment(this[\"project\"](e),this.xr([r,t]));return this[\"unproject\"](i)};r.prototype[\"closestOnLine\"]=function(e,r){r=this[\"normalizeLine\"](r);var t=Infinity,i;for(var a=0,n=r.length;a<n-1;a++){var o=this[\"closestOnSegment\"](e,r[a],r[a+1]),f=this[\"distance\"](e,o);if(f<t){t=f;i=o}}return i};r.prototype[\"distanceToSegment\"]=function(e,r,t){return this[\"distanceToLine\"](e,[r,t])};r.prototype[\"distanceToLine\"]=function(e,r){r=this[\"normalizeLine\"](r);if(!this[\"isPoint\"](r[0])){r=r[0]}var t=Infinity;for(var i=0,a=r.length;i<a-1;i++){var n=this[\"closestOnSegment\"](e,r[i],r[i+1]);t=Math.min(t,this[\"distance\"](e,n))}return t};r.prototype[\"distanceToPolygon\"]=function(e,r){if(this[\"isPointInRing\"](e,r)){return 0}else{return this[\"distanceToLine\"](e,r)}};r.prototype[\"isPointOnSegment\"]=function(e,r,t,i){if(!i&&i!==0||i<0){i=this._opts[\"onSegmentTolerance\"]}return this[\"distanceToSegment\"](e,r,t)<=i};r.prototype[\"isPointOnLine\"]=function(e,r,t){r=this[\"normalizeLine\"](r);for(var i=0,a=r.length;i<a-1;i++){if(this[\"isPointOnSegment\"](e,r[i],r[i+1],t)){return true}}return false};r.prototype[\"isPointOnRing\"]=function(e,r,t){r=this[\"normalizeLine\"](r);for(var i=0,a=r.length;i<a;i++){if(this[\"isPointOnSegment\"](e,r[i],r[i===a-1?0:i+1],t)){return true}}return false};r.prototype[\"isPointOnPolygon\"]=function(e,r,t){r=this[\"normalizeMultiLines\"](r);for(var i=0,a=r.length;i<a;i++){if(this[\"isPointOnRing\"](e,r[i],t)){return true}}return false};r.prototype[\"makesureClockwise\"]=function(e){if(!isClockwise(e)){e=[].concat(e);e.reverse()}return e};r.prototype[\"makesureAntiClockwise\"]=function(e){if(isClockwise(e)){e=[].concat(e);e.reverse()}return e};r.prototype[\"pointInRing\"]=function(e,r,t){var i=false;for(var a=0;a<r.length&&!i;a++){if(f(e,r[a][0],t)){var n=false;var o=1;while(o<r[a].length&&!n){if(f(e,r[a][o],!t)){n=true}o++}if(!n){i=true}}}function f(e,r,t){var i=false;if(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]){r=r.slice(0,r.length-1)}for(var a=0,n=r.length-1;a<r.length;n=a++){var o=r[a][0];var f=r[a][1];var s=r[n][0];var u=r[n][1];var l=e[1]*(o-s)+f*(s-e[0])+u*(e[0]-o)===0&&(o-e[0])*(s-e[0])<=0&&(f-e[1])*(u-e[1])<=0;if(l){return!t}var v=f>e[1]!==u>e[1]&&e[0]<(s-o)*(e[1]-f)/(u-f)+o;if(v){i=!i}}return i}return i};r.prototype[\"isPointInBbox\"]=function(e,r){var t=Infinity;var i=Infinity;var a=-Infinity;var n=-Infinity;for(var o=0;o<r.length;o++){var f=r[o];t=Math.min(t,f[0]);a=Math.max(a,f[0]);i=Math.min(i,f[1]);n=Math.max(n,f[1])}return e[0]>t&&e[0]<a&&e[1]>i&&e[1]<n};r.prototype[\"isPointInRing\"]=function(e,r){r=this[\"normalizeLine\"](r);var t=this.xr(r,true);var i=Coordinate.ss(this[\"project\"](e),t,false);return i};r.prototype[\"isRingInRing\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this[\"isPointInRing\"](e[t],r)){return false}}return true};r.prototype[\"isRingInRingByOutsea\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this[\"isPointInRing\"](e[t],r)){return true}}for(var t=0,i=r.length;t<i;t++){if(this[\"isPointInRing\"](r[t],e)){return true}}return false};r.prototype[\"isRingInRingByMapbox\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this[\"isPointInRing\"](e[t],r)){return false}}return true};r.prototype[\"isRingInRingByMapboxB\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this[\"isPointInRing\"](e[t],r)){return true}}return false};r.prototype[\"isPixelRingInRing\"]=function(e,r){for(var t=0,i=e.length;t<i;t++){var a=Coordinate.ss(e[t],r,false);if(a){return true}}return false};r.prototype[\"isPointInPolygon\"]=function(e,r){r=this[\"normalizeMultiLines\"](r);var t;for(var i=0,a=r.length;i<a;i+=1){t=this[\"isPointInRing\"](e,r[i]);if(i>0){t=!t}if(!t){break}}return Boolean(t)};r.prototype[\"isPointInPolygons\"]=function(e,r){for(var t=0;t<r.length;t++){var i=r[t];i=this[\"normalizeMultiLines\"](i);var a=void 0;for(var n=0,o=i.length;n<o;n+=1){a=this[\"isPointInRing\"](e,i[n]);if(n>0){a=!a}if(!a){break}}if(a){return true}}return false};r.prototype[\"doesSegmentsIntersect\"]=function(e,r,t,i){var a=this.xr([e,r,t,i]);e=a[0];r=a[1];t=a[2];i=a[3];var n=false;var o=(i[0]-t[0])*(e[1]-t[1])-(i[1]-t[1])*(e[0]-t[0]);var f=(r[0]-e[0])*(e[1]-t[1])-(r[1]-e[1])*(e[0]-t[0]);var s=(i[1]-t[1])*(r[0]-e[0])-(i[0]-t[0])*(r[1]-e[1]);if(s!==0){var u=o/s;var l=f/s;if(0<=u&&u<=1&&0<=l&&l<=1){n=true}}return n};r.prototype[\"doesSegmentLineIntersect\"]=function(e,r,t){t=this[\"normalizeLine\"](t);for(var i=0,a=t.length;i<a-1;i++){if(this[\"doesSegmentsIntersect\"](e,r,t[i],t[i+1])){return true}}return false};r.prototype[\"doesSegmentRingIntersect\"]=function(e,r,t){t=this[\"normalizeLine\"](t);for(var i=0,a=t.length;i<a;i++){if(this[\"doesSegmentsIntersect\"](e,r,t[i],t[i===a-1?0:i+1])){return true}}return false};r.prototype[\"doesSegmentPolygonIntersect\"]=function(e,r,t){t=this[\"normalizeMultiLines\"](t);for(var i=0,a=t.length;i<a;i++){if(this[\"doesSegmentRingIntersect\"](e,r,t[i])){return true}}return false};r.prototype[\"doesLineLineIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i-1;t++){if(this[\"doesSegmentLineIntersect\"](e[t],e[t+1],r)){return true}}return false};r.prototype[\"doesLineRingIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i-1;t++){if(this[\"doesSegmentRingIntersect\"](e[t],e[t+1],r)){return true}}return false};r.prototype[\"doesPolygonPolygonIntersect\"]=function(e,r){if(this[\"doesRingRingIntersect\"](r,e)||this[\"isRingInRing\"](e,r)||this[\"isRingInRing\"](r,e)){return true}return false};r.prototype[\"doesRingRingIntersect\"]=function(e,r){e=this[\"normalizeLine\"](e);for(var t=0,i=e.length;t<i;t++){if(this[\"doesSegmentRingIntersect\"](e[t],e[t===i-1?0:t+1],r)){return true}}return false};r.prototype[\"along\"]=function(e,r){var t=0;for(var i=0;i<e.length-1;i+=1){var a=this[\"distance\"](e[i],e[i+1]);if(a+t<r){t+=a;continue}var n=(r-t)/a;return[e[i][0]+n*(e[i+1][0]-e[i][0]),e[i][1]+n*(e[i+1][1]-e[i][1]),i]}return null};r.prototype.gr=function(e,r){e=this[\"makesureAntiClockwise\"](e);r=this[\"makesureClockwise\"](r);var n,o,f,s;var t=function(e){return(o[0]-n[0])*(e[1]-n[1])>(o[1]-n[1])*(e[0]-n[0])};var i=function(){var e=[n[0]-o[0],n[1]-o[1]],r=[f[0]-s[0],f[1]-s[1]],t=n[0]*o[1]-n[1]*o[0],i=f[0]*s[1]-f[1]*s[0],a=1/(e[0]*r[1]-e[1]*r[0]);return[(t*r[0]-i*e[0])*a,(t*r[1]-i*e[1])*a]};var a=e;n=r[r.length-1];for(var u=0,l=r.length;u<l;u++){o=r[u];var v=a;a=[];f=v[v.length-1];for(var c=0,h=v.length;c<h;c++){s=v[c];if(t(s)){if(!t(f)){a.push(i())}a.push(s)}else if(t(f)){a.push(i())}f=s}n=o}return a};r.prototype[\"ringRingClip\"]=function(e,r){e=this.xr(e);r=this.xr(r);if(!isEqual(e[0],e[e.length-1])){e.push(e[0].slice())}if(!isEqual(r[0],r[r.length-1])){r.push(r[0].slice())}var t=martinez.qP([e],[r]);if(!t||!t[0]||!t[0][0]){return[]}return this.br(t[0][0])};r.prototype[\"ringArea\"]=function(e){throw new Error(\"distance Not implemented!\")};r.prototype[\"distanceOfLine\"]=function(e){e=this[\"normalizeLine\"](e);var r=0;for(var t=0,i=e.length;t<i-1;t++){r+=this[\"distance\"](e[t],e[t+1])}return r};r.prototype[\"isClockwise\"]=function(e){e=this.xr(e);return isClockwise(e)};r.prototype[\"typePolygon\"]=function(e){if(!isArray(e)||!isArray(e[0])){return\"never\"}if(e[0][0].length===2||e[0][0]instanceof LngLat$2){return\"Polygon\"}else if(e[0][0].length>2&&(e[0][0][0].length===2||e[0][0][0]instanceof LngLat$2)){return\"MultiPolygon\"}else{return\"never\"}};return r}();var GeometryUtilInstance=new GeometryUtilCls({});var PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance[\"setCrs\"](\"plane\");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isPointInBbox:GeometryUtilInstance.isPointInBbox.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointInPolygons:GeometryUtilInstance.isPointInPolygons.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)};var PlaneGeometryUtil={distance:PlaneGeometryUtilInstance.distance.bind(PlaneGeometryUtilInstance),ringArea:PlaneGeometryUtilInstance.ringArea.bind(PlaneGeometryUtilInstance),isClockwise:PlaneGeometryUtilInstance.isClockwise.bind(PlaneGeometryUtilInstance),typePolygon:PlaneGeometryUtilInstance.typePolygon.bind(PlaneGeometryUtilInstance),makesureClockwise:PlaneGeometryUtilInstance.makesureClockwise.bind(PlaneGeometryUtilInstance),makesureAntiClockwise:PlaneGeometryUtilInstance.makesureAntiClockwise.bind(PlaneGeometryUtilInstance),distanceOfLine:PlaneGeometryUtilInstance.distanceOfLine.bind(PlaneGeometryUtilInstance),ringRingClip:PlaneGeometryUtilInstance.ringRingClip.bind(PlaneGeometryUtilInstance),doesSegmentsIntersect:PlaneGeometryUtilInstance.doesSegmentsIntersect.bind(PlaneGeometryUtilInstance),doesSegmentLineIntersect:PlaneGeometryUtilInstance.doesSegmentLineIntersect.bind(PlaneGeometryUtilInstance),doesSegmentRingIntersect:PlaneGeometryUtilInstance.doesSegmentRingIntersect.bind(PlaneGeometryUtilInstance),doesSegmentPolygonIntersect:PlaneGeometryUtilInstance.doesSegmentPolygonIntersect.bind(PlaneGeometryUtilInstance),doesLineLineIntersect:PlaneGeometryUtilInstance.doesLineLineIntersect.bind(PlaneGeometryUtilInstance),doesLineRingIntersect:PlaneGeometryUtilInstance.doesLineRingIntersect.bind(PlaneGeometryUtilInstance),doesRingRingIntersect:PlaneGeometryUtilInstance.doesRingRingIntersect.bind(PlaneGeometryUtilInstance),pointInRing:PlaneGeometryUtilInstance.pointInRing.bind(PlaneGeometryUtilInstance),isPointInRing:PlaneGeometryUtilInstance.isPointInRing.bind(PlaneGeometryUtilInstance),isPointInBbox:PlaneGeometryUtilInstance.isPointInBbox.bind(PlaneGeometryUtilInstance),isRingInRing:PlaneGeometryUtilInstance.isRingInRing.bind(PlaneGeometryUtilInstance),isPointInPolygon:PlaneGeometryUtilInstance.isPointInPolygon.bind(PlaneGeometryUtilInstance),isPointInPolygons:PlaneGeometryUtilInstance.isPointInPolygons.bind(PlaneGeometryUtilInstance),isPointOnSegment:PlaneGeometryUtilInstance.isPointOnSegment.bind(PlaneGeometryUtilInstance),isPointOnLine:PlaneGeometryUtilInstance.isPointOnLine.bind(PlaneGeometryUtilInstance),isPointOnRing:PlaneGeometryUtilInstance.isPointOnRing.bind(PlaneGeometryUtilInstance),isPointOnPolygon:PlaneGeometryUtilInstance.isPointOnPolygon.bind(PlaneGeometryUtilInstance),closestOnSegment:PlaneGeometryUtilInstance.closestOnSegment.bind(PlaneGeometryUtilInstance),closestOnLine:PlaneGeometryUtilInstance.closestOnLine.bind(PlaneGeometryUtilInstance),distanceToSegment:PlaneGeometryUtilInstance.distanceToSegment.bind(PlaneGeometryUtilInstance),distanceToLine:PlaneGeometryUtilInstance.distanceToLine.bind(PlaneGeometryUtilInstance)};var LngLat$2=function(){function o(e,r,t){if(t===void 0){t=false}this.className=\"AMap.LngLat\";if(isNumberArray(e)){e=parseFloat(e[0]);r=parseFloat(e[1])}else{r=parseFloat(r);e=parseFloat(e)}if(isNaN(e)||isNaN(r)){throw Error(\"Invalid Object: LngLat(\"+e+\", \"+r+\")\")}if(t!==true){r=Math.max(Math.min(r,90),-90);e=(e+180)%360+(e<-180||e===180?180:-180)}this.kT=r;this.KL=e;this.lng=Math.round(e*1e6)/1e6;this.lat=Math.round(r*1e6)/1e6;this.pos=ProjectionManager.getProjection(\"EPSG:3857\").project(e,r)}o.from=function(e){if(isLngLat(e)){return new o(e.KL,e.kT)}return new o(e[0],e[1])};o.prototype[\"setLng\"]=function(e){this.KL=e;this.lng=Math.round(e*1e6)/1e6;return this};o.prototype[\"setLat\"]=function(e){this.kT=e;this.lat=Math.round(e*1e6)/1e6;return this};o.prototype[\"getLng\"]=function(){return this.lng};o.prototype[\"getLat\"]=function(){return this.lat};o.prototype[\"equals\"]=function(e){e=parseLngLatData(e);if(!(e instanceof o)){return false}var r=Math.max(Math.abs(this.kT-e.kT),Math.abs(this.KL-e.KL));return r<=1e-9};o.prototype[\"add\"]=function(e,r){return new o(this.KL+e.KL,this.kT+e.kT,r)};o.prototype[\"subtract\"]=function(e,r){return new o(this.KL-e.KL,this.kT-e.kT,r)};o.prototype[\"divideBy\"]=function(e,r){return new o(this.KL/e,this.kT/e,r)};o.prototype[\"multiplyBy\"]=function(e,r){return new o(this.KL*e,this.kT*e,r)};o.prototype[\"offset\"]=function(e,r){if(isNaN(e)||isNaN(r)){throw Error(\"valid offset args, require number\")}var t=2*Math.asin(Math.sin(Math.round(e)/(2*6378137))/Math.cos(this.kT*Math.PI/180));var i=this.KL+t*180/Math.PI;var a=2*Math.asin(Math.round(r)/(2*6378137));var n=this.kT+a*180/Math.PI;return new o(i,n)};o.prototype[\"toString\"]=function(){return this.lng+\",\"+this.lat};o.prototype[\"toArray\"]=function(){return[this.lng,this.lat]};o.prototype[\"toJSON\"]=function(){return[this.lng,this.lat]};o.prototype[\"distanceTo\"]=function(e){return GeometryUtil[\"distance\"](this,e)};o.prototype[\"distance\"]=function(e){return GeometryUtil[\"distance\"](this,e)};return o}();var Size=function(){function e(e,r,t){if(t===void 0){t=false}this.className=\"AMap.Size\";if(isNaN(e)||isNaN(r)){throw new Error(\"Invalid Object: Pixel(\"+e+\", \"+r+\")\")}this[\"width\"]=t?Math.round(e):Number(e);this[\"height\"]=t?Math.round(r):Number(r)}e.prototype[\"getWidth\"]=function(){return this.width};e.prototype[\"getHeight\"]=function(){return this.height};e.prototype[\"toString\"]=function(){return this.width+\",\"+this.height};e.prototype[\"toArray\"]=function(){return[this.width,this.height]};return e}();var easing=function(){var o={};var f=4;var l=.001;var s=1e-7;var u=10;var v=11;var c=1/(v-1);var h=typeof Float32Array===\"function\";function i(e,r){return 1-3*r+3*e}function a(e,r){return 3*r-6*e}function n(e){return 3*e}function d(e,r,t){return((i(r,t)*e+a(r,t))*e+n(r))*e}function _(e,r,t){return 3*i(r,t)*e*e+2*a(r,t)*e+n(r)}function g(e,r,t,i,a){var n,o,f=0;do{o=r+(t-r)/2;n=d(o,i,a)-e;if(n>0){t=o}else{r=o}}while(Math.abs(n)>s&&++f<u);return o}function y(e,r,t,i){for(var a=0;a<f;++a){var n=_(r,t,i);if(n===0){return r}var o=d(r,t,i)-e;r-=o/n}return r}function m(e){return e}return function(f,r,s,t){if(!(0<=f&&f<=1&&0<=s&&s<=1)){throw new Error(\"bezier x values must be in [0, 1] range\")}var e=arguments.toString();if(o[e]){return o[e]}if(f===r&&s===t){return m}var u=h?new Float32Array(v):new Array(v);for(var i=0;i<v;++i){u[i]=d(i*c,f,s)}function a(e){var r=0;var t=1;var i=v-1;for(;t!==i&&u[t]<=e;++t){r+=c}--t;var a=(e-u[t])/(u[t+1]-u[t]);var n=r+a*c;var o=_(n,f,s);if(o>=l){return y(e,n,f,s)}else if(o===0){return n}else{return g(e,r,r+c,f,s)}}var n=function(e){if(e===0){return 0}if(e===1){return 1}return d(a(e),r,t)};o[e]=n;return n}}();function getQuadBezierValue(e,r,t,i){if(e>=1){return i}var a=1-e;return a*a*r+2*a*e*t+e*e*i}function cubic(e,r,t,i,a){if(e>=1){return a}var n=3*(t.pos[0]-r.pos[0]),o=3*(i.pos[0]-t.pos[0])-n,f=a.pos[0]-r.pos[0]-n-o;var s=3*(t.pos[1]-r.pos[1]),u=3*(i.pos[1]-t.pos[1])-s,l=a.pos[1]-r.pos[1]-s-u;var v=f*Math.pow(e,3)+o*Math.pow(e,2)+n*e+r.pos[0];var c=l*Math.pow(e,3)+u*Math.pow(e,2)+s*e+r.pos[1];return ProjectionManager.getProjection(\"EPSG:3857\").unproject(v,c)}function quad(e,r,t,i){return ProjectionManager.getProjection(\"EPSG:3857\").unproject(getQuadBezierValue(e,r.pos[0],t.pos[0],i.pos[0]),getQuadBezierValue(e,r.pos[1],t.pos[1],i.pos[1]))}function p20CoordsToLngLat(e,r){if(Array.isArray(r)){r=new Pixel(r[0],r[1])}return e.ai(r,20)}function getSplitNum(e,r){var t={tolerance:4,interpolateNumLimit:[3,300]};var i=t[\"tolerance\"],a=t[\"interpolateNumLimit\"];i=Math.max(2,i);var n=0,o=0;for(var f=0,s=e.length;f<s-1;f++){var u=e[f],l=e[f+1];n+=Math.abs(l.pos[0]-u.pos[0]);o+=Math.abs(l.pos[1]-u.pos[1])}return Math.min(a[1],Math.max(a[0],Math.round(Math.max(n,o)/r/i)))}function interpolateCoords(e,r){var t=null;switch(r.length){case 3:t=quad;break;case 4:t=cubic;break;default:return null}var i=[];var a=[0].concat(r);for(var n=1;n<e-2;n++){a[0]=n/e;i.push(t.apply(null,a))}i.push(r[r.length-1]);return i}function getCoordsWithControlPoints(e,r,t,i){var a=null;if(e&&t&&t.length){var n=[e];n.push.apply(n,t);n.push(r);var o=n.length;var f=getSplitNum(n,i);a=interpolateCoords(f,n)}return a||[r]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(e,r){var t,i,a=[];for(t=0,i=e.length;t<i;t+=1){a.push.apply(a,getCoordsWithControlPoints(e[t-1],e[t],e[t][\"controlPoints\"],r))}return a},fg:function(e,r,t,i){var a=this.xb(e,r,t,i);var n=[];for(var o=0,f=a.length;o<f;o++){n.push(p20CoordsToLngLat(r,a[o]))}return n}};var TagMap={2:\"all\",3:\"all\",4:\"all\",5:\"all\",6:\"lite\",7:\"all\",8:\"lite\",9:\"all\",10:\"lite\",11:\"lite\",12:\"all\",13:\"all\",14:\"all\",15:\"lite\",16:\"lite\",17:\"all\",18:\"all\",19:\"all\",20:\"all\"};var colorNameDist={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",grey:\"#808080\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"};var Util$3=function(){var s={CLASS_NAME:\"AMap.Util\",WorldAxesCenter:{x:0,y:0},Single:{},stamp:function(){var r=Browser.DW===true;var t=1e5;var i=\"_amap_id\";return function(e){e[i]=r?++t:--t;return e[i]}}(),singlton:function(e){var r=c.Single;var t=r[e];if(!t){t=new e}return t},getOptimalZoom:function(e){return e<Math.floor(e)+.8?Math.floor(e):Math.ceil(e)},join:function(e,r){if(e.join){return e.join(r)}else{var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(i+\"=\"+(e[i]||\"\"))}}return t.join(r)}},getGuid:function(e,r){if(r===void 0){r=10}return(e||\"\")+Math.round(Math.random()*Math.pow(10,r))+\"_\"+(new Date).getTime()},uuid:function(){var o=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\");return function(e,r){if(e===void 0){e=0}if(r===void 0){r=62}var t=o;var i=[];var a;r=r||t.length;if(e){for(a=0;a<e;a++){i[a]=t[0|Math.random()*r]}}else{var n=void 0;i[8]=i[13]=i[18]=i[23]=\"-\";i[14]=\"4\";for(a=0;a<36;a++){if(!i[a]){n=0|Math.random()*16;i[a]=t[a===19?n&3|8:n]}}}return i.join(\"\")}}(),endsWith:function(e,r){if(e[\"endsWith\"]){return e[\"endsWith\"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)===r){return true}return false},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(r){r.startTime=new Date;r.jg=[];var t=(new Date).getTime();var i=function(){var e=(new Date).getTime();r.jg.push(e-t);t=e;r.id=c.requestAnimFrame(i)};r.id=c.requestAnimFrame(i)},cancel:function(e){if(e.id){c.cancelAnimFrame(e.id)}},stop:function(e){e.Ag=Date.now()-e.startTime;this.cancel(e);e.Mg=Math.round(1e3/(e.Ag/(e.jg.length+1)))}},kg:function(e,r,t,i,a){if(i===void 0){i=\"linear\"}if(a===void 0){a=false}if(e===r){return r}else{switch(i){case\"ease\":t=BezierUtil.sg(.25,.1,.25,1)(t);break;case\"ease-in\":t=BezierUtil.sg(.42,0,1,1)(t);break;case\"ease-out\":t=BezierUtil.sg(0,0,.58,1)(t);break;case\"ease-in-out\":t=BezierUtil.sg(.42,0,.58,1)(t);break}var n=e+(r-e)*t;if(a){n=n>>0}return n}},createObjectURL:function(e,r){if(r===void 0){r=\"text/javascript; charset=utf-8\"}var t=null;try{var i=globalInstance[\"URL\"]||globalInstance[\"webkitURL\"];t=i[\"createObjectURL\"](new Blob([e],{type:r}))}catch(e){t=null}return t},revokeObjectURL:function(e){try{var r=globalInstance[\"URL\"]||globalInstance[\"webkitURL\"];r[\"revokeObjectURL\"](e)}catch(e){}},Og:function(e){var r={};for(var t=0,i=e.length;t<i;t++){r[e[t]]=t}return r},EV:function(e,r){var t=Math.pow(2,r);var i=360/t;var a=180/t;var n=Math.floor(e[0]/i)+t/2;var o=t/2-Math.ceil(e[1]/a);return[n,o]},WY:function(e,r,t){if(t===void 0){t=false}var i=[e[0],e[3]];var a=[e[2],e[1]];var n=this.EV(i,r);var o=this.EV(a,r);var f=n[0];var s=n[1];var u=o[0];var l=o[1];if(t){return{ja:f,Fa:s,Oa:u,Ea:l,z:r}}this.Pa={ja:f,Fa:s,Oa:u,Ea:l,z:r};var v=[];for(var c=f;c<=u;c+=1){for(var h=s;h<=l;h+=1){v.push([r,c,h])}}return v},xg:function(e){var r={};if(c.is(e,\"object\")){for(var t in e){if(e.hasOwnProperty(t)){r[e[t]]=t}}}return r},Ig:function(e,r){if(r.length<5e4){e.push.apply(e,r);return}for(var t=0,i=r.length;t<i;t+=1){e.push(r[t])}},clone:function(e){if(typeof e===\"object\"&&e!==null){if(e.Tg||this.is(e,\"Float32Array\")||this.is(e,\"Uint16Array\")){return e}else{var r=this.isArray(e)?[]:{};for(var t in e){if(e.hasOwnProperty(t)){r[t]=c.clone(e[t])}}return r}}else{return e}},isInteger:function(e){return(e|0)===e},vB:function(e){return!isNaN(e)},setPrototypeOf:function(){if(typeof Object[\"setPrototypeOf\"]===\"function\"){return Object[\"setPrototypeOf\"]}else{return function(e,r){for(var t in r){e[t]=r[t]}}}}(),isFunction:function(e){return typeof e===\"function\"},_g:function(e,r){if(r===void 0){r=\"webgl\"}if(!e){return e}var t=[];for(var i=0,a=e.length;i<a;i+=2){var n=parseInt(e.substr(i,2),16);if(r===\"webgl\"||r===\"rgba\"&&i===0){n=this.format(n/255,3)}t.push(n)}t.push(t.shift());return t},Sg:function(){},keys:function(){if(typeof Object.keys===\"function\"){return Object.keys}else{return function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}}return r}}}(),map:function(i,a,n){if(n===void 0){n=null}var o=[];if(i&&i.length){c.Cg(i,function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var t=e[1];o[t]=a.apply(n||i,e)})}else{return i}return o},forEach:function(e,r){if(e&&e.length){var t=e.length;if(t>0){r(e[0],0);if(t>1){r(e[1],1);for(var i=2;i<t;i++){r(e[i],i)}}}}},Cg:function(e,r,t){if(t===void 0){t=null}if(e&&e.length){for(var i=0,a=e.length;i<a;i++){if(r.call(t,e[i],i,e)===false){break}}}},find:function(e,r,t){if(t===void 0){t=null}for(var i=0,a=e.length;i<a;i++){if(typeof r===\"function\"){if(r.call(t,e[i],i,e)){return e[i]}}else{if(e[i]===r){return e[i]}}}return null},isDOM:function(e){if(typeof HTMLElement===\"object\"){return e instanceof HTMLElement}else{return e&&typeof e===\"object\"&&e.nodeType===1&&typeof e.nodeName===\"string\"}},Eg:function(e,r){var t=\"ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM\";r=r||\"v5\";var i,a;if(r>\"v5\"){i=t.length;a=512}else{i=27;t=t.substr(0,27);a=333}var n,o,f,s,u;o=[];f=NaN;for(s=0,u=e.length;s<u;s++){n=e[s];n=t.indexOf(n);if(isNaN(f)){f=n*i}else{o.push(f+n-a);f=NaN}}return o},Ng:function(e,r){var t=1;if(r.length>512){t=Math.round(Math.pow(r.length,.5))}else{t=r.length}var i=Math.ceil(r.length/t);for(var a=0;a<i;a+=1){var n=t*a;var o=n+t;if(o>r.length){o=r.length}for(var f=n;f<o;f+=1){e(r[f])}}},Lg:function(e){if(/^rgba\\(/.test(e)){return this.Dg(e)}else{var r=this.colorNameToHex(e);var t=r;if(r[0]===\"#\"){r=r.substring(1);if(r.length===3){r=r.replace(/./g,function(e){return e+e})}t=this.argbHex2Rgba(r.length===8?r:\"ff\"+r)}return this.Dg(t)}},colorNameToHex:function(e){if(e===void 0){e=\"\"}e=e.toLowerCase();if(typeof e===\"string\"){if(colorNameDist[e]){return colorNameDist[e]}else{return e}}else{return e}},Rg:function(e,r,t){var i,a,n,o,f,s;o=Math.floor(t/2);n=t-o;i=(1<<o)-1<<n;a=(1<<n)-1;s=r&i|e&a;f=e&i|r&a;return[t,f,s]},Pg:function(e){if(e){return encodeURIComponent(e)}return\"\"},getStyle:function(e,r,t,i){var a,n,o;o=e[r][\"i\"][t];if(typeof o===\"undefined\"){return null}n=e[r][\"s\"];if(typeof o===\"number\"){return n[o]}while(typeof o[i.toString()]===\"undefined\"){i-=1;if(i<3){break}}a=o[i.toString()];if(typeof a===\"number\"){return n[a]}else{return null}},Dg:function(e){var r=e.split(\",\");r[0]=parseFloat(r[0].split(\"rgba(\")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;r[3]=parseFloat(r[3]);return r},Ug:function(e){var r=e.split(\",\");r[0]=parseFloat(r[0].split(\"rgb(\")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;return r},Bg:function(e){return\"rgba(\"+e[0]*255+\",\"+e[1]*255+\",\"+e[2]*255+\",\"+e[3]+\")\"},color2Rgba:function(e){return this.Bg(this.color2RgbaArray(e))},color2RgbaArray:function(e){if(e instanceof Array){if(e.length==3){e.push(1)}return e}var r=this.colorNameToHex(e);if(r.indexOf(\"rgb(\")==0){var t=this.Ug(r);t.push(1);return t}else if(r.indexOf(\"rgba(\")==0){return this.Dg(r)}else if(r.indexOf(\"#\")==0){if(r.length===4){var i=r.substr(1);var a=i.replace(/./g,function(e){return e+e});return this.zg(a)}else if(r.length==7){return this.zg(r.substr(1))}else if(r.length==9){var n=r.substr(1);return this.qg(n)}}else if(r.indexOf(\"hsla\")===0){var o=e.substr(5).split(\",\");var f=parseInt(o[0],10)/360;var s=parseInt(o[1],10)/100;var u=parseInt(o[2],10)/100;var l=parseFloat(o[3]);return this.GQ(f,s,u,l)}else if(r.indexOf(\"hsl\")===0){var o=e.substr(4).split(\",\");var f=parseInt(o[0],10)/360;var s=parseInt(o[1],10)/100;var u=parseInt(o[2],10)/100;return this.GQ(f,s,u,1)}else{if(r.length===3){var a=r.replace(/./g,function(e){return e+e});return this.zg(a)}else if(r.length==6){return this.zg(r)}else if(r.length==8){return this.qg(r)}}},GQ:function(e,r,t,i){var a;var n;var o;if(r===0){a=n=o=t}else{var f=t<.5?t*(1+r):t+r-t*r;var s=2*t-f;a=this.uQ(s,f,e+1/3);n=this.uQ(s,f,e);o=this.uQ(s,f,e-1/3)}return[a,n,o,i]},uQ:function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e},rgbHex2Rgba:function(e){if(e.startsWith(\"#\")){e=e.slice(1)}return c.argbHex2Rgba(\"ff\"+e)},argbHex2Rgba:function(e){if(e.startsWith(\"#\")){e=e.slice(1)}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push((r.shift()/255).toFixed(2));return\"rgba(\"+r.join(\",\")+\")\"},Opacity2Rgba:function(e,r){var t=r;if(r&&r[3]&&e){r[3]=Math.floor(255*e)}return t},Hex2Rgba:function(e){if(typeof e!==\"string\"){return false}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(parseInt(r.shift()));return r},zg:function(e){return this.uE(e+\"ff\")},qg:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16)/255)}r.push(r.shift());return r},uE:function(e){var r=parseInt(e,16);var t=[(r>>24&255)/255,(r>>16&255)/255,(r>>8&255)/255,(r&255)/255];return t},isEmpty:function(e){for(var r in e){if(e.hasOwnProperty(r)){return false}}return true},Wg:function(e,r){if(r>=0){e.splice(r,1)}return e},startsWith:function(e,r){if(e[\"startsWith\"]){return e[\"startsWith\"](r)}else{return e.substr(0,r.length)===r}},deleteItemFromArray:function(e,r){var t=c.indexOf(e,r);return c.Wg(e,t)},deleteItemFromArrayByIndex:function(e,r){return c.Wg(e,r)},filter:function(e,t,i){var a=[];c.Cg(e,function(e,r){if(t.call(i,e,r)){a.push(e)}});return a},indexOf:function(e,r){if(!e||!e.length){return-1}if(e[\"indexOf\"]){return e[\"indexOf\"](r)}else{for(var t=0;t<e.length;t+=1){if(e[t]===r){return t}}return-1}},Gg:function(e,r){if(e[\"endsWith\"]){return e[\"endsWith\"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)==r){return true}return false},bind:function(){var i=false;if(Boolean(Function.prototype.bind)){i=true}return function(e,r){var t=arguments.length>2?Array.prototype.slice.call(arguments,2):null;if(i){if(t){t.unshift(r);return e.bind.apply(e,t)}else{return e.bind(r)}}else{return function(){return e.apply(r,t||arguments)}}}}(),setOptions:function(e,r){r=r||{};e.opts=assign({},e.opts,r);return e.opts},yn:function(e,r,t){return typeof r==\"function\"?this.Hg(e,true,this.Vg(r,t,1)):this.Hg(e,true)},Hg:function(t,i,a,e,r,n,o){var f;if(a){f=r?a(t,e,r):a(t)}if(f!==undefined){return f}if(!this.$g(t)){return t}var s=this.isArray(t);if(s){f=this.Yg(t);if(!i){return this.Kg(t,f)}}else{var u=Object.prototype.toString.call(t),l=u==\"[object Function]\";if(u==\"[object Object]\"||u==\"[object Arguments]\"||l&&!r){f=this.Xg(l?{}:t);if(!i){return this.baseAssign(f,t)}}else{return r?t:{}}}n||(n=[]);o||(o=[]);var v=n.length;while(v--){if(n[v]==t){return o[v]}}n.push(t);o.push(f);(s?this.Zg:this.Qg)(t,function(e,r){f[r]=c.Hg(e,i,a,r,t,n,o)});return f},baseAssign:function(e,r){return r==null?e:this.tM(r,Object.keys(r),e)},$g:function(e){var r=typeof e;return!!e&&(r==\"object\"||r==\"function\")},rM:function(e){return!!e&&typeof e==\"object\"},nM:function(e){return typeof e==\"number\"&&e>-1&&e%1==0&&e<=9007199254740991},Yg:function(e){var r=e.length,t=new Array(r);if(r&&typeof e[0]==\"string\"&&Object.hasOwnProperty.call(e,\"index\")){t.index=e.index;t.input=e.input}return t},Kg:function(e,r){var t=-1,i=e.length;r||(r=Array(i));while(++t<i){r[t]=e[t]}return r},Xg:function(e){var r=e.constructor;if(!(typeof r==\"function\"&&r instanceof r)){r=Object}return new r},Vg:function(n,o,e){if(typeof n!=\"function\"){return this.identity}if(o===undefined){return n}switch(e){case 1:return function(e){return n.call(o,e)};case 3:return function(e,r,t){return n.call(o,e,r,t)};case 4:return function(e,r,t,i){return n.call(o,e,r,t,i)};case 5:return function(e,r,t,i,a){return n.call(o,e,r,t,i,a)}}return function(){return n.apply(o,arguments)}},Zg:function(e,r){var t=-1,i=e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e},identity:function(e){return e},iM:function(s){return function(e,r,t){var i=c.eM(e),a=t(e),n=a.length,o=s?n:-1;while(s?o--:++o<n){var f=a[o];if(r(i[f],f,i)===false){break}}return e}},Qg:function(e,r){var t=c.iM();return t(e,r,Object.keys)},eM:function(e){return c.$g(e)?e:Object(e)},tM:function(e,r,t){t||(t={});var i=-1,a=r.length;while(++i<a){var n=r[i];t[n]=e[n]}return t},oM:function(){return false},aM:\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\",uM:function(){return Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}}(),sM:function(e,r,t,i){var a;if(i){var n=0,o,f=this.uM;a=function(){o=f();if(o-n<r){return false}n=o;e.apply(t,arguments)}}else{var s,u,l;l=function(){s=false;if(u){a.apply(t,u);u=false}};a=function(){if(s){u=arguments}else{s=true;e.apply(t,arguments);setTimeout(l,r)}}}return a},format:function(e,r){if(e===e<<0){return e}return+parseFloat(e+\"\").toFixed(r||0)},isArray:function(){if(Array.isArray){return Array.isArray}else{return function(e){return this.is(e,\"array\")}}}(),is:function(e,r){return Object.prototype.toString.call(e).split(\" \")[1].slice(0,-1).toLowerCase()===r.toLowerCase()},includes:function(){if(typeof Array.prototype.includes===\"function\"){return function(e,r){return e.includes(r)}}else{return function(e,r){return this.indexOf(e,r)!==-1}}}(),fM:function(e){var r=0;if(e.length===0){return r}var t;for(var i=0,a=e.length;i<a;i+=1){t=e.charCodeAt(i);r=(r<<5)-r+t;r=r&r}return r},hM:function(e,r){r=r?Math.ceil(parseInt(r.substr(6))/24):1;var t=\"\";for(var i=0,a=e.length;i<a;i++){t+=String.fromCharCode((e.charCodeAt(i)-256-r+65535)%65535)}return t},cM:function(e,r){var t=(e+\"\").slice(-2);var i=(r+\"\").slice(-2);e=e.slice(0,-2);r=r.slice(0,-2);var a=parseInt((i+t).slice(1));var n=Math.ceil(a/250)%2?1:-1;var o=a/500>1?1:-1;var f=parseInt(\"1\"+t)/3e3;var s=parseInt(\"1\"+i)/3e3;e-=f*n;r-=s*o;return new LngLat$2(parseFloat(e).toFixed(5),parseFloat(r).toFixed(5))},vM:function(e){if(typeof JSON!==\"undefined\"&&JSON.stringify){return c.fM(JSON.stringify(e))}return null},lM:function(e,r){var t=\"_amap_hash\";if(r||!e.hasOwnProperty(t)){var i=c.vM(e);if(i){e[t]=i}}return e[t]},parseLngLatData:function(e){if(c.isArray(e)){if(c.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=c.parseLngLatData(e[r])}}else{var t=typeof e[0];if(t===\"string\"||t===\"number\"){return new LngLat$2(e[0],e[1])}else{return e}}}return e},dM:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=1){r[t]=[e[t].x,e[t].y]}return r},bM:function(e){if(c.isArray(e)){return new Size(e[0],e[1])}return e},hp:function(e,r){var t=[0,0];var i=c.getOptimalZoom(r.viewState.zoom);if(e&&i>=LocalZoom){var a=lcs$2.getSize();var n=r.viewState.centerCoord;var o=lcs$2.getLocalByCoord([n[0],n[1]]);var f=e.x-o.x;var s=e.y-o.y;if(f!==0){f*=a[0];t[0]=f}if(s!==0){s*=a[1];t[1]=s}}else if(e){t[0]+=e.center[0];t[1]+=e.center[1]}return t},dS:function(e,r){return e>=r[0]&&e<=r[1]},kD:function(e,r,t){if(e===void 0){e=\"\"}if(t===void 0){t=false}var i=e.split(\",\")[0]||\"\";if(t){return\"all\"}if(i&&r){return TagMap[r]||\"all\"}return\"all\"},VF:function(e,r,t){if(t===void 0){t=false}if(t){return\"all\"}if(e&&r){return TagMap[r]||\"all\"}return\"all\"},LD:function(e,r){var t=false;if(!e||!r){return t}var i=this.iN(e);var a=this.iN(r);return i>=a},SD:function(e){if(e===void 0){e=\"all\"}var r;switch(e){case\"lite\":{r=0;break}case\"left\":{r=1;break}case\"all\":default:{r=2}}return r},pW:function(e){if(e===void 0){e=2}var r;switch(e){case 0:{r=NebulaTagType.LITE;break}case 1:{r=NebulaTagType.LEFT;break}case 2:default:{r=NebulaTagType.ALL}}return r},iN:function(e){var r=0;switch(e){case\"lite\":{r=0;break}case\"left\":{r=1;break}case\"all\":{r=2;break}}return r}};(function(){var i=0;function e(e){var r=+new Date,t=Math.max(0,(Browser.HV?50:20)-(r-i));i=r+t;return globalInstance.setTimeout(e,50)}var r=function(e){globalInstance.clearTimeout(e)};if(Browser.DW){var a=e;var t=r;s[\"requestAnimFrame\"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return a(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};s[\"cancelAnimFrame\"]=function(e){if(e){t.call(globalInstance,e)}};return}function n(e){var r,t,i=[\"webkit\",\"moz\",\"o\",\"ms\"];for(r=0;r<i.length&&!t;r+=1){t=globalInstance[i[r]+e]}return t}var o=globalInstance.requestAnimationFrame||n(\"RequestAnimationFrame\")||e;var f=globalInstance.cancelAnimationFrame||n(\"CancelAnimationFrame\")||n(\"CancelRequestAnimationFrame\")||r;s[\"requestAnimFrame\"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return o(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};s[\"cancelAnimFrame\"]=function(e){if(e){f.call(globalInstance,e)}}})();(function(){if(Browser.DW){return}s[\"requestIdleCallback\"]=globalInstance[\"requestIdleCallback\"]?function(e,r){return globalInstance[\"requestIdleCallback\"](e,r)}:function(e,r){if(r===void 0){r={}}var t=c.uM();return setTimeout(function(){e({didTimeout:false,timeRemaining:function(){return Math.max(0,70-(c.uM()-t))}})},r.timeout||0)};s[\"cancelIdleCallback\"]=globalInstance[\"cancelIdleCallback\"]?function(e){return globalInstance[\"cancelIdleCallback\"](e)}:function(e){clearTimeout(e)}})();var c=s;return c}();var LabelFormat=function(){function e(){this.Fs={};this.Es={};this.Ts=[]}e.prototype.Ns=function(e,r){if(r.lang){this.lang=r.lang}};e.prototype.rV=function(e,r){return e};e.prototype.Ws=function(e,r){if(e===void 0){e=\"\"}if(r===void 0){r=[]}var t=this.Es;var i=labelsUtil$2.EQ(e,r);var a=labelsUtil$2.aQ(i);for(var n=0;n<a.length;n++){t[a[n]]=1}};e.id=\"labelFormat\";return e}();var SmartTypedArray$2=function(){function e(e,r){if(r===void 0){r=1024}this.type=e;this.length=0;this.uf=0;this.value=this.cf(r)}e.prototype.set=function(e){if(!this.check(e)){assert(\"SmartTypedArray: error value\");return}if(e.length<this.uf){this.value.set(e);return}this.cf(e.length);this.value.set(e);this.length=e.length};e.prototype.check=function(e){if(Array.isArray(e)){return true}var r=false;switch(this.type){case\"uint8\":r=e instanceof Uint8Array;break;case\"int8\":r=e instanceof Int8Array;break;case\"uint16\":r=e instanceof Uint16Array;break;case\"int16\":r=e instanceof Int16Array;break;case\"uint32\":r=e instanceof Uint32Array;break;case\"int32\":r=e instanceof Int32Array;break;case\"float32\":r=e instanceof Float32Array;break;case\"float64\":r=e instanceof Float64Array;break;default:r=false}return r};e.prototype.subarray=function(e,r){return this.value.subarray(e,r)};e.prototype.ff=function(e){if(this.uf<e){this.cf(e)}this.length=e};e.prototype.cf=function(e){var r=this.pf();var t=this.value;this.value=new r(e);if(t){this.value.set(t)}this.uf=e;return this.value};e.prototype.pf=function(){var e=Float32Array;switch(this.type){case\"uint8\":e=Uint8Array;break;case\"int8\":e=Int8Array;break;case\"uint16\":e=Uint16Array;break;case\"int16\":e=Int16Array;break;case\"uint32\":e=Uint32Array;break;case\"int32\":e=Int32Array;break;case\"float32\":e=Float32Array;break;case\"float64\":e=Float64Array;break;default:e=Float32Array}return e};e=__decorate([InnerClass(\"SmartTypedArray\")],e);return e}();var EnumSDFProperty;(function(e){e[e[\"fontWidth\"]=0]=\"fontWidth\";e[e[\"fontHeight\"]=1]=\"fontHeight\";e[e[\"horiBearingX\"]=2]=\"horiBearingX\";e[e[\"horiBearingY\"]=3]=\"horiBearingY\";e[e[\"horiAdvance\"]=4]=\"horiAdvance\";e[e[\"posX\"]=5]=\"posX\";e[e[\"posY\"]=6]=\"posY\";e[e[\"iconWidth\"]=7]=\"iconWidth\";e[e[\"iconHeight\"]=8]=\"iconHeight\"})(EnumSDFProperty||(EnumSDFProperty={}));var INF=1e20;var ControlChars=[[0,31],[127,159]];var ZeroWidthChars=[[8203,8207]];var f=new SmartTypedArray$2(\"float64\",64*64);var d=new SmartTypedArray$2(\"float64\",64*64);var z=new SmartTypedArray$2(\"float64\",64*64);var v=new SmartTypedArray$2(\"float64\",64*64);var ua=navigator.userAgent;var TinySDF=function(){function e(e,r,t,i,a,n,o){this.fontSize=e||24;this.buffer=t===undefined?3:t;this.MU=a||.25;this.fontFamily=n||\"sans-serif\";this.fontWeight=o||\"lighter\";this.radius=i||8;this.size=r;this.xU();var f=r[0]*r[1];this.TU=new SmartTypedArray$2(\"float64\",f);this.AU=new SmartTypedArray$2(\"float64\",f);var s=ua.indexOf(\"Gecko/\")>=0||ua.indexOf(\"Windows\")>=0;this.wU=Math.round(r[1]/2*(s?1.2:1))}e.prototype.bU=function(e){this.size=e||[];this.xU();this.mU()};e.prototype.Ce=function(e){var r=this.size,t=r[0],i=r[1];var a=t*i;var n=this.Nz;if(n){n.clearRect(0,0,t,i);n.fillText(e,this.buffer,this.wU);var o=n.getImageData(0,0,t,i);var f=new Uint8ClampedArray(a);var s=new Array(9).fill(0);s[0]=1;s[1]=1;var u=e.charCodeAt(0);if(this.RU(u)){return{bitmap:f,info:s}}var l=0;var v=0;var c=INF;var h=INF;var d=0;var _=0;for(var g=0;g<a;g++){l=Math.floor(g/t);v=g-l*t;var y=o.data[g*4+3]/255;if(y>0){if(c>l){c=l}if(h>v){h=v}if(d<l){d=l}if(_<v){_=v}}this.TU.value[g]=y===1?0:y===0?INF:Math.pow(Math.max(0,.5-y),2);this.AU.value[g]=y===1?INF:y===0?0:Math.pow(Math.max(0,y-.5),2)}var m=this.buffer;var p=this.getWidth(e,_-h);var b=d-c;var x=h;var C=-c+m;var S=p;var M=h-3;var w=c-3;var k=void 0;if(u===32){k=[6,6,0,-21,9,0,0,t,i]}else{k=[p,b,x,C,S,M,w,t,i]}edt(this.TU.value,t,i);edt(this.AU.value,t,i);for(var g=0;g<a;g++){var T=this.TU.value[g]-this.AU.value[g];var I=Math.max(0,Math.min(255,Math.round(255-255*(T/this.radius+this.MU))));f[g]=I}return{bitmap:f,info:k}}return{}};e.prototype.getWidth=function(e,r){var t;switch(e){case\"y\":case\"A\":case\"T\":case\"V\":case\"W\":case\"Y\":{t=r;break}default:t=r+2}return t};e.prototype.measureText=function(e){return this.Nz.measureText(e)};e.prototype.xU=function(){var e=this.size;if(!this.canvas){this.canvas=document.createElement(\"canvas\")}this.canvas.width=e[0];this.canvas.height=e[1];this.Nz=this.canvas.getContext(\"2d\");if(this.Nz){this.Nz.font=this.fontWeight+\" \"+this.fontSize+\"px \"+this.fontFamily;this.Nz.textBaseline=\"middle\";this.Nz.fillStyle=\"black\"}};e.prototype.mU=function(){var e=this.size,r=e[0],t=e[1];var i=r*t;if(i>this.AU.uf){this.AU.ff(i);this.TU.ff(i)}var a=ua.indexOf(\"Gecko/\")>=0||ua.indexOf(\"Windows\")>=0;this.wU=Math.round(t/2*(a?1.2:1))};e.prototype.RU=function(e){var r=this.SU(e,ControlChars);var t=this.SU(e,ZeroWidthChars);return r||t};e.prototype.SU=function(e,r){for(var t=0,i=r;t<i.length;t++){var a=i[t];if(e>=a[0]&&e<=a[1]){return true}}};return e}();function expandTypeArray(e){f.ff(e);d.ff(e);z.ff(e);v.ff(e)}function edt(e,r,t){if(f.uf<t){expandTypeArray(t)}for(var i=0;i<r;i++){for(var a=0;a<t;a++){f.value[a]=e[a*r+i]}edt1d(f.value,d.value,v.value,z.value,t);for(var a=0;a<t;a++){e[a*r+i]=d.value[a]}}if(f.uf<r){expandTypeArray(t)}for(var a=0;a<t;a++){for(var i=0;i<r;i++){f.value[i]=e[a*r+i]}edt1d(f.value,d.value,v.value,z.value,r);for(var i=0;i<r;i++){e[a*r+i]=Math.sqrt(d.value[i])}}}function edt1d(e,r,t,i,a){t[0]=0;i[0]=-INF;i[1]=+INF;for(var n=1,o=0;n<a;n++){var f=(e[n]+n*n-(e[t[o]]+t[o]*t[o]))/(2*n-2*t[o]);while(f<=i[o]){o--;f=(e[n]+n*n-(e[t[o]]+t[o]*t[o]))/(2*n-2*t[o])}o++;t[o]=n;i[o]=f;i[o+1]=+INF}for(var n=0,o=0;n<a;n++){while(i[o+1]<n){o++}r[n]=(n-t[o])*(n-t[o])+e[t[o]]}}var LangConf={ch:{type:\"ch\",size:[32,32],fontSize:24,name:\"中文简体\"},en:{type:\"en\",size:[32,32],fontSize:24,name:\"英文\"},th:{type:\"th\",size:[32,32],fontSize:24,name:\"泰语\"},my:{type:\"my\",size:[56,56],fontSize:24,name:\"缅甸语\"},ja:{type:\"ja\",size:[32,32],fontSize:24,name:\"日文\"},km:{type:\"km\",size:[40,40],fontSize:24,name:\"高棉语\"},PU:{type:\"lao\",size:[40,40],fontSize:24,name:\"老挝语\"},$U:{type:\"arabic\",size:[40,40],fontSize:24,name:\"阿拉伯语\"},default:{type:\"ch\",size:[32,32],fontSize:24,name:\"汉语\"}};var Lang=function(){function e(e){var r=this.CU=e,t=r.type,i=r.size,a=r.fontSize;this.type=t;var n=this.width=i[0];var o=this.height=i[1];this.NU=new TinySDF(a,[n,o],(n-a)/2,8,.25,\"PingFang SC\",\"normal\")}e.prototype.Ce=function(e){if(this.type===LangConf.PU.type){this.width=Math.floor(this.NU.measureText(e).width/10)*10+10+LangConf.PU.fontSize/2;this.NU.bU([this.width,this.height])}else if((this.type===LangConf.my.type||this.type===LangConf.PU.type||this.type===LangConf.th.type||this.type===LangConf.$U.type||this.type===LangConf.km.type)&&e.length>1){this.width=Math.floor(this.CU.size[0]*e.length*.5);this.NU.bU([this.width,this.height])}return this.NU.Ce(e)};return e}();var LangManager=function(){function i(){this.OU={}}i.gG=function(e){var r=e.split(\"|\");var t=parseInt(r[0],10);return this.IU(t)};i.kU=function(e){var r=[];for(var t=0;t<e.length;t++){r.push(e.charCodeAt(t))}return i.gG(r.join(\"|\"))};i.LU=function(e){var r=i.kU(e);return i.EU.indexOf(r)!==-1};i.IU=function(e){var r=\"\";if(e>32&&e<591){r=\"en\"}else if(e>=4096&&e<=4255){r=\"my\"}else if(e>=3584&&e<=3711){r=\"th\"}else if(e>=6016&&e<=6143){r=\"km\"}else if(e>=3712&&e<=3839){r=\"lao\"}else if(e>=1536&&e<=1791){r=\"arabic\"}else{r=\"ch\"}return r};i.prototype.D$=function(e){if(e===void 0){e=\"ch\"}var r=this.OU[e];if(!r){var t=LangConf[e]?LangConf[e]:LangConf.default;r=new Lang(t);this.OU[e]=r}return r};i.EU=[LangConf.my.type,LangConf.km.type,LangConf.PU.type];return i}();var CHN=[[\"90.398619\",\"47.62125\"],[\"90.493569\",\"47.512157\"],[\"90.491338\",\"47.430787\"],[\"90.552986\",\"47.391174\"],[\"90.522859\",\"47.318461\"],[\"90.584915\",\"47.224989\"],[\"90.782025\",\"47.019194\"],[\"90.923517\",\"46.97996\"],[\"90.986624\",\"46.807403\"],[\"91.082926\",\"46.722064\"],[\"91.051812\",\"46.596604\"],[\"91.100242\",\"46.564068\"],[\"91.102624\",\"46.537196\"],[\"90.935125\",\"46.300398\"],[\"91.032801\",\"46.126363\"],[\"91.055181\",\"46.011658\"],[\"90.741148\",\"45.713536\"],[\"90.699563\",\"45.544726\"],[\"90.700228\",\"45.504993\"],[\"90.795887\",\"45.449956\"],[\"90.832257\",\"45.31629\"],[\"90.919719\",\"45.26871\"],[\"90.920899\",\"45.225065\"],[\"91.136978\",\"45.244316\"],[\"91.253943\",\"45.164928\"],[\"91.372068\",\"45.142003\"],[\"91.45689\",\"45.18485\"],[\"91.624753\",\"45.098124\"],[\"92.062061\",\"45.11548\"],[\"92.497694\",\"45.030848\"],[\"92.887666\",\"45.075869\"],[\"93.513157\",\"44.997233\"],[\"94.22699\",\"44.694971\"],[\"94.374082\",\"44.542037\"],[\"94.620202\",\"44.47394\"],[\"94.737532\",\"44.366876\"],[\"95.002041\",\"44.282908\"],[\"95.42701\",\"44.324539\"],[\"95.440292\",\"44.292217\"],[\"95.365491\",\"44.054053\"],[\"95.549126\",\"44.026335\"],[\"95.883651\",\"43.431746\"],[\"95.911953\",\"43.287656\"],[\"96.385653\",\"42.919774\"],[\"96.41151\",\"42.75927\"],[\"97.176454\",\"42.824161\"],[\"98.198333\",\"42.682435\"],[\"99.505985\",\"42.597497\"],[\"99.964106\",\"42.676693\"],[\"100.259793\",\"42.666107\"],[\"100.320604\",\"42.718863\"],[\"100.867753\",\"42.700052\"],[\"101.814637\",\"42.530852\"],[\"102.090733\",\"42.250567\"],[\"102.451458\",\"42.173439\"],[\"102.716911\",\"42.181644\"],[\"103.426452\",\"41.910629\"],[\"103.858223\",\"41.830321\"],[\"104.537873\",\"41.903108\"],[\"104.55755\",\"41.881352\"],[\"104.554117\",\"41.69046\"],[\"104.929798\",\"41.682608\"],[\"105.010371\",\"41.620463\"],[\"105.220141\",\"41.778353\"],[\"105.732529\",\"41.977008\"],[\"106.776853\",\"42.319288\"],[\"107.167833\",\"42.354897\"],[\"107.458928\",\"42.487147\"],[\"107.937949\",\"42.433308\"],[\"108.241189\",\"42.489425\"],[\"108.84269\",\"42.425722\"],[\"109.022141\",\"42.487574\"],[\"109.290662\",\"42.465227\"],[\"109.534657\",\"42.500548\"],[\"109.723763\",\"42.60669\"],[\"110.100045\",\"42.671172\"],[\"110.420666\",\"42.80617\"],[\"111.005001\",\"43.354829\"],[\"111.446257\",\"43.521761\"],[\"111.555004\",\"43.519925\"],[\"111.780481\",\"43.697712\"],[\"111.925235\",\"43.719055\"],[\"111.936243\",\"43.796237\"],[\"111.863286\",\"43.902314\"],[\"111.643689\",\"44.039247\"],[\"111.386948\",\"44.360034\"],[\"111.610923\",\"44.793044\"],[\"111.742544\",\"44.988614\"],[\"111.9942\",\"45.118751\"],[\"112.435906\",\"45.103062\"],[\"112.61512\",\"44.956037\"],[\"112.806373\",\"44.882816\"],[\"113.624854\",\"44.775834\"],[\"113.896701\",\"44.9424\"],[\"114.104283\",\"44.984106\"],[\"114.437113\",\"45.233044\"],[\"114.543629\",\"45.41585\"],[\"114.742713\",\"45.46746\"],[\"114.977202\",\"45.40645\"],[\"115.36123\",\"45.421513\"],[\"115.688202\",\"45.487095\"],[\"116.023886\",\"45.712008\"],[\"116.163919\",\"45.717567\"],[\"116.251037\",\"45.785617\"],[\"116.213851\",\"45.874652\"],[\"116.246574\",\"45.98171\"],[\"116.56904\",\"46.316673\"],[\"116.83033\",\"46.413023\"],[\"117.353361\",\"46.390324\"],[\"117.41533\",\"46.528251\"],[\"117.39222\",\"46.582448\"],[\"117.411768\",\"46.610108\"],[\"117.618878\",\"46.628442\"],[\"117.72387\",\"46.549579\"],[\"118.312433\",\"46.768455\"],[\"118.774374\",\"46.71799\"],[\"118.828619\",\"46.795917\"],[\"118.912926\",\"46.804113\"],[\"118.941979\",\"46.764971\"],[\"119.028625\",\"46.769292\"],[\"119.119864\",\"46.669494\"],[\"119.724391\",\"46.623078\"],[\"119.791059\",\"46.707882\"],[\"119.884572\",\"46.701717\"],[\"119.896224\",\"46.880494\"],[\"119.836485\",\"46.899381\"],[\"119.742007\",\"47.13776\"],[\"119.30249\",\"47.404711\"],[\"119.315214\",\"47.461827\"],[\"119.134262\",\"47.517476\"],[\"119.10804\",\"47.64174\"],[\"118.755577\",\"47.747779\"],[\"118.55396\",\"47.96464\"],[\"118.177657\",\"48.02096\"],[\"117.82558\",\"47.987997\"],[\"117.388809\",\"47.612384\"],[\"117.082887\",\"47.796869\"],[\"116.816533\",\"47.867783\"],[\"116.452289\",\"47.808327\"],[\"116.270714\",\"47.845797\"],[\"115.938377\",\"47.653883\"],[\"115.559971\",\"47.900966\"],[\"115.500727\",\"48.161305\"],[\"115.791907\",\"48.279437\"],[\"115.776629\",\"48.537807\"],[\"116.042275\",\"48.826715\"],[\"116.024444\",\"48.890046\"],[\"116.709459\",\"49.880215\"],[\"117.07866\",\"49.723328\"],[\"117.482128\",\"49.648667\"],[\"117.801998\",\"49.554185\"],[\"117.858689\",\"49.620567\"],[\"118.068073\",\"49.643304\"],[\"118.210831\",\"49.759243\"],[\"118.358674\",\"49.80286\"],[\"118.37378\",\"49.853853\"],[\"118.468623\",\"49.857768\"],[\"118.559926\",\"49.957101\"],[\"119.082034\",\"50.01451\"],[\"119.311051\",\"50.169532\"],[\"119.328389\",\"50.327724\"],[\"119.175332\",\"50.320094\"],[\"119.103534\",\"50.373674\"],[\"119.103642\",\"50.409488\"],[\"119.224019\",\"50.469114\"],[\"119.262214\",\"50.625767\"],[\"119.470096\",\"50.763554\"],[\"119.480245\",\"50.910299\"],[\"119.734497\",\"51.106944\"],[\"119.73542\",\"51.228925\"],[\"119.789064\",\"51.243368\"],[\"119.787948\",\"51.298691\"],[\"119.896417\",\"51.365189\"],[\"119.889615\",\"51.410731\"],[\"119.950318\",\"51.426267\"],[\"120.067241\",\"51.699773\"],[\"120.632029\",\"51.963004\"],[\"120.755196\",\"52.16206\"],[\"120.733974\",\"52.23734\"],[\"120.60276\",\"52.318868\"],[\"120.688398\",\"52.529211\"],[\"120.459208\",\"52.615218\"],[\"120.046556\",\"52.554881\"],[\"120.004778\",\"52.785297\"],[\"120.275145\",\"52.889292\"],[\"120.877526\",\"53.323248\"],[\"121.231921\",\"53.310391\"],[\"122.338707\",\"53.534212\"],[\"122.443142\",\"53.474191\"],[\"122.84101\",\"53.486577\"],[\"123.278553\",\"53.592823\"],[\"123.480492\",\"53.533829\"],[\"123.518364\",\"53.587614\"],[\"123.901491\",\"53.509565\"],[\"124.129157\",\"53.379309\"],[\"124.260864\",\"53.404185\"],[\"124.447374\",\"53.252351\"],[\"124.696798\",\"53.233398\"],[\"124.854212\",\"53.143501\"],[\"124.877429\",\"53.19179\"],[\"125.14374\",\"53.233437\"],[\"125.500989\",\"53.129213\"],[\"125.53472\",\"53.084642\"],[\"125.631731\",\"53.108131\"],[\"125.776978\",\"53.000452\"],[\"125.732839\",\"52.906456\"],[\"125.842016\",\"52.927481\"],[\"125.973551\",\"52.795444\"],[\"126.049747\",\"52.829373\"],[\"126.137295\",\"52.788424\"],[\"126.136093\",\"52.7501\"],[\"126.082878\",\"52.727183\"],[\"126.094744\",\"52.66376\"],[\"126.01078\",\"52.632295\"],[\"126.225078\",\"52.557751\"],[\"126.227546\",\"52.502887\"],[\"126.28664\",\"52.498733\"],[\"126.378071\",\"52.405299\"],[\"126.365626\",\"52.334723\"],[\"126.460233\",\"52.313556\"],[\"126.457937\",\"52.278438\"],[\"126.370797\",\"52.21752\"],[\"126.587327\",\"52.146539\"],[\"126.544647\",\"52.022831\"],[\"126.483493\",\"52.004144\"],[\"126.489866\",\"51.963387\"],[\"126.757379\",\"51.72942\"],[\"126.769931\",\"51.638237\"],[\"126.737959\",\"51.604012\"],[\"126.870396\",\"51.541384\"],[\"126.8313\",\"51.449554\"],[\"126.939726\",\"51.411373\"],[\"126.952021\",\"51.35238\"],[\"127.007918\",\"51.339647\"],[\"126.930671\",\"51.194554\"],[\"126.950047\",\"51.077214\"],[\"127.328668\",\"50.761993\"],[\"127.324612\",\"50.674039\"],[\"127.399564\",\"50.585975\"],[\"127.336199\",\"50.480736\"],[\"127.39435\",\"50.441709\"],[\"127.374866\",\"50.346296\"],[\"127.622938\",\"50.242265\"],[\"127.624762\",\"50.159938\"],[\"127.524126\",\"50.053819\"],[\"127.569466\",\"49.832087\"],[\"127.686474\",\"49.798414\"],[\"127.716987\",\"49.69577\"],[\"127.838395\",\"49.617717\"],[\"128.185065\",\"49.56898\"],[\"128.533065\",\"49.633229\"],[\"128.791094\",\"49.618148\"],[\"128.84167\",\"49.562161\"],[\"128.811865\",\"49.506248\"],[\"129.022107\",\"49.485245\"],[\"129.11165\",\"49.389985\"],[\"129.230032\",\"49.429552\"],[\"129.343135\",\"49.392234\"],[\"129.383497\",\"49.461849\"],[\"129.526126\",\"49.451932\"],[\"129.593332\",\"49.316758\"],[\"129.745059\",\"49.313625\"],[\"129.972146\",\"49.057136\"],[\"130.243692\",\"48.89923\"],[\"130.444579\",\"48.939218\"],[\"130.526934\",\"48.889044\"],[\"130.693552\",\"48.907086\"],[\"130.705612\",\"48.869994\"],[\"130.580449\",\"48.630526\"],[\"130.630317\",\"48.609845\"],[\"130.648105\",\"48.52472\"],[\"130.790884\",\"48.525345\"],[\"130.778868\",\"48.413864\"],[\"130.875106\",\"48.300724\"],[\"130.708423\",\"48.108792\"],[\"130.914073\",\"47.945556\"],[\"131.01546\",\"47.736076\"],[\"131.552374\",\"47.750448\"],[\"131.621768\",\"47.692216\"],[\"131.711934\",\"47.740348\"],[\"131.958075\",\"47.703033\"],[\"131.995368\",\"47.741041\"],[\"132.235458\",\"47.739381\"],[\"132.340472\",\"47.796162\"],[\"132.546873\",\"47.750881\"],[\"132.655685\",\"47.89209\"],[\"132.654505\",\"47.979308\"],[\"132.811511\",\"47.967327\"],[\"133.097413\",\"48.158185\"],[\"133.473394\",\"48.128346\"],[\"133.728504\",\"48.281365\"],[\"134.199908\",\"48.411499\"],[\"134.519091\",\"48.448618\"],[\"134.797053\",\"48.402511\"],[\"134.903462\",\"48.476549\"],[\"135.111473\",\"48.465979\"],[\"135.087461\",\"48.366044\"],[\"134.70854\",\"48.235879\"],[\"134.705815\",\"48.142967\"],[\"134.587133\",\"47.991745\"],[\"134.802439\",\"47.732613\"],[\"134.805079\",\"47.701502\"],[\"134.584837\",\"47.454022\"],[\"134.327302\",\"47.405829\"],[\"134.203448\",\"47.309543\"],[\"134.189801\",\"47.25835\"],[\"134.258273\",\"47.190339\"],[\"134.25029\",\"47.096963\"],[\"134.160018\",\"47.066453\"],[\"134.091868\",\"46.968583\"],[\"134.042215\",\"46.633997\"],[\"133.892806\",\"46.477753\"],[\"133.978872\",\"46.404235\"],[\"133.938468\",\"46.35728\"],[\"133.943124\",\"46.251663\"],[\"133.734856\",\"46.143924\"],[\"133.77584\",\"46.068467\"],[\"133.698828\",\"45.924364\"],[\"133.509421\",\"45.823745\"],[\"133.533154\",\"45.779212\"],[\"133.488886\",\"45.719859\"],[\"133.513906\",\"45.69461\"],[\"133.496869\",\"45.599732\"],[\"133.229721\",\"45.489276\"],[\"133.168674\",\"45.414886\"],[\"133.124621\",\"45.258199\"],[\"133.158975\",\"45.105773\"],[\"132.946351\",\"44.989767\"],[\"131.996377\",\"45.226214\"],[\"131.893723\",\"45.301592\"],[\"131.80903\",\"45.186922\"],[\"131.72307\",\"45.208468\"],[\"131.688416\",\"45.166214\"],[\"131.716461\",\"45.107939\"],[\"131.507506\",\"44.942491\"],[\"131.131804\",\"44.90387\"],[\"131.021662\",\"44.839439\"],[\"131.137726\",\"44.723122\"],[\"131.338398\",\"44.056058\"],[\"131.273661\",\"43.974086\"],[\"131.248341\",\"43.566337\"],[\"131.344342\",\"43.514183\"],[\"131.346252\",\"43.391702\"],[\"131.236002\",\"43.22857\"],[\"131.242955\",\"43.131057\"],[\"131.13749\",\"43.018486\"],[\"131.168904\",\"42.923466\"],[\"131.065779\",\"42.901952\"],[\"131.05005\",\"42.834641\"],[\"130.673962\",\"42.819219\"],[\"130.46123\",\"42.731347\"],[\"130.617421\",\"42.685874\"],[\"130.650616\",\"42.595365\"],[\"130.604267\",\"42.509264\"],[\"130.661752\",\"42.412289\"],[\"130.553477\",\"42.421191\"],[\"130.507536\",\"42.571366\"],[\"130.42958\",\"42.523293\"],[\"130.416105\",\"42.590452\"],[\"130.235238\",\"42.692151\"],[\"130.237405\",\"42.873951\"],[\"130.125611\",\"42.876169\"],[\"130.075765\",\"42.911319\"],[\"130.092008\",\"42.956423\"],[\"129.933178\",\"42.975108\"],[\"129.878311\",\"42.92378\"],[\"129.795163\",\"42.719399\"],[\"129.815032\",\"42.601778\"],[\"129.735103\",\"42.411401\"],[\"129.607751\",\"42.418118\"],[\"129.55415\",\"42.330996\"],[\"129.383025\",\"42.403749\"],[\"129.268527\",\"42.323223\"],[\"129.222093\",\"42.257635\"],[\"129.2434\",\"42.19201\"],[\"128.992774\",\"42.075243\"],[\"128.959644\",\"41.997184\"],[\"128.121765\",\"41.974471\"],[\"128.183949\",\"41.746614\"],[\"128.336234\",\"41.608881\"],[\"128.268621\",\"41.434008\"],[\"128.127944\",\"41.337429\"],[\"128.00482\",\"41.417516\"],[\"127.65285\",\"41.377517\"],[\"127.537794\",\"41.447986\"],[\"127.248116\",\"41.454805\"],[\"127.234962\",\"41.492217\"],[\"127.08566\",\"41.544545\"],[\"127.128081\",\"41.592273\"],[\"127.012339\",\"41.679643\"],[\"127.035706\",\"41.702541\"],[\"126.914964\",\"41.778689\"],[\"126.809177\",\"41.669562\"],[\"126.74607\",\"41.691325\"],[\"126.612003\",\"41.629975\"],[\"126.529799\",\"41.412013\"],[\"126.562243\",\"41.368516\"],[\"126.557908\",\"41.33825\"],[\"126.45328\",\"41.325763\"],[\"126.3043\",\"41.139979\"],[\"126.148946\",\"41.070584\"],[\"126.132917\",\"40.990783\"],[\"126.041744\",\"40.924117\"],[\"126.041787\",\"40.876401\"],[\"125.721896\",\"40.840697\"],[\"125.681319\",\"40.80754\"],[\"125.712733\",\"40.774611\"],[\"125.686641\",\"40.761853\"],[\"125.582743\",\"40.75319\"],[\"125.423162\",\"40.624246\"],[\"125.310595\",\"40.636606\"],[\"125.022783\",\"40.521123\"],[\"125.06057\",\"40.46396\"],[\"124.907556\",\"40.445935\"],[\"124.374311\",\"40.078794\"],[\"124.388452\",\"39.905638\"],[\"123.741782\",\"39.10294\"],[\"123.282201\",\"38.058466\"],[\"124.24299\",\"31.368588\"],[\"124.714351\",\"29.508006\"],[\"125.072136\",\"25.859069\"],[\"124.935837\",\"25.676612\"],[\"123.836839\",\"25.5127\"],[\"122.751321\",\"24.515956\"],[\"121.947788\",\"22.070621\"],[\"121.867355\",\"21.383021\"],[\"119.827087\",\"18.177352\"],[\"119.026527\",\"16.873489\"],[\"119.11665\",\"15.951676\"],[\"119.101406\",\"14.063252\"],[\"119.100623\",\"12.209516\"],[\"119.07742\",\"11.23357\"],[\"116.011301\",\"7.678721\"],[\"114.941852\",\"6.182877\"],[\"114.229887\",\"5.47862\"],[\"113.86269\",\"4.692236\"],[\"112.795642\",\"3.695169\"],[\"111.953841\",\"3.231846\"],[\"109.894631\",\"3.714037\"],[\"108.659956\",\"4.748032\"],[\"107.925439\",\"5.91737\"],[\"107.96348\",\"6.895899\"],[\"108.555028\",\"9.28242\"],[\"110.128544\",\"11.338543\"],[\"109.983314\",\"12.44102\"],[\"109.806102\",\"13.535124\"],[\"109.636428\",\"14.636855\"],[\"109.78629\",\"15.402577\"],[\"109.449813\",\"15.723154\"],[\"108.117871\",\"17.258818\"],[\"107.310076\",\"18.842045\"],[\"107.374728\",\"19.467179\"],[\"108.051095\",\"20.114414\"],[\"108.328478\",\"21.187373\"],[\"108.278139\",\"21.403412\"],[\"108.107378\",\"21.47839\"],[\"107.943356\",\"21.509097\"],[\"107.849844\",\"21.619412\"],[\"107.547355\",\"21.55724\"],[\"107.470751\",\"21.571209\"],[\"107.451932\",\"21.615722\"],[\"107.357798\",\"21.570152\"],[\"107.289755\",\"21.702532\"],[\"107.207551\",\"21.682454\"],[\"106.998789\",\"21.79714\"],[\"107.015655\",\"21.907972\"],[\"106.951239\",\"21.893876\"],[\"106.768184\",\"21.978429\"],[\"106.703854\",\"21.935422\"],[\"106.674027\",\"21.941175\"],[\"106.664565\",\"22.266461\"],[\"106.643493\",\"22.30484\"],[\"106.538715\",\"22.328641\"],[\"106.53142\",\"22.460275\"],[\"106.592939\",\"22.622033\"],[\"106.708553\",\"22.615477\"],[\"106.793547\",\"22.794758\"],[\"106.548972\",\"22.899047\"],[\"106.304634\",\"22.830954\"],[\"106.190543\",\"22.951201\"],[\"106.088791\",\"22.966118\"],[\"105.867991\",\"22.889816\"],[\"105.712488\",\"23.033058\"],[\"105.550311\",\"23.045755\"],[\"105.530806\",\"23.163759\"],[\"105.330691\",\"23.346393\"],[\"105.249667\",\"23.237422\"],[\"105.089657\",\"23.231409\"],[\"104.951169\",\"23.149476\"],[\"104.843495\",\"23.101267\"],[\"104.893084\",\"22.94393\"],[\"104.747257\",\"22.79551\"],[\"104.567764\",\"22.813411\"],[\"104.371855\",\"22.65974\"],[\"104.249053\",\"22.720536\"],[\"104.237015\",\"22.806132\"],[\"104.137495\",\"22.783462\"],[\"104.078336\",\"22.740585\"],[\"104.017096\",\"22.520843\"],[\"103.962035\",\"22.492019\"],[\"103.666692\",\"22.741534\"],[\"103.525093\",\"22.580551\"],[\"103.458703\",\"22.648987\"],[\"103.394201\",\"22.751092\"],[\"103.341286\",\"22.767397\"],[\"103.306804\",\"22.661878\"],[\"103.215652\",\"22.621855\"],[\"103.205309\",\"22.536362\"],[\"103.107505\",\"22.486567\"],[\"103.076606\",\"22.416444\"],[\"102.91784\",\"22.456309\"],[\"102.840786\",\"22.583305\"],[\"102.610223\",\"22.696625\"],[\"102.558017\",\"22.673838\"],[\"102.493515\",\"22.738071\"],[\"102.424293\",\"22.676273\"],[\"102.446694\",\"22.621241\"],[\"102.327948\",\"22.511268\"],[\"102.278531\",\"22.386786\"],[\"102.142661\",\"22.36867\"],[\"102.03475\",\"22.427651\"],[\"101.942096\",\"22.415036\"],[\"101.8765\",\"22.355136\"],[\"101.764791\",\"22.472926\"],[\"101.700847\",\"22.453176\"],[\"101.694624\",\"22.349917\"],[\"101.579332\",\"22.223979\"],[\"101.631925\",\"21.988099\"],[\"101.718335\",\"21.962549\"],[\"101.79863\",\"21.848016\"],[\"101.778824\",\"21.73654\"],[\"101.856952\",\"21.62392\"],[\"101.847124\",\"21.595911\"],[\"101.773932\",\"21.558438\"],[\"101.760328\",\"21.349162\"],[\"101.862724\",\"21.239522\"],[\"101.764727\",\"21.115389\"],[\"101.663511\",\"21.164623\"],[\"101.587808\",\"21.146813\"],[\"101.574161\",\"21.209359\"],[\"101.53264\",\"21.221881\"],[\"101.293538\",\"21.149214\"],[\"101.203866\",\"21.206559\"],[\"101.216612\",\"21.289294\"],[\"101.114173\",\"21.403592\"],[\"101.183052\",\"21.497378\"],[\"101.111941\",\"21.560533\"],[\"101.095719\",\"21.734009\"],[\"100.901892\",\"21.659343\"],[\"100.747526\",\"21.494902\"],[\"100.586185\",\"21.423588\"],[\"100.468576\",\"21.433695\"],[\"100.414267\",\"21.504705\"],[\"100.248806\",\"21.434534\"],[\"100.115855\",\"21.481604\"],[\"100.078626\",\"21.591362\"],[\"100.11579\",\"21.654357\"],[\"100.010068\",\"21.666462\"],[\"99.916813\",\"21.811046\"],[\"99.968591\",\"21.972539\"],[\"99.950867\",\"22.023392\"],[\"99.699748\",\"22.008512\"],[\"99.585378\",\"22.083453\"],[\"99.19384\",\"22.094388\"],[\"99.129961\",\"22.147006\"],[\"99.24403\",\"22.347694\"],[\"99.226069\",\"22.407775\"],[\"99.348979\",\"22.505302\"],[\"99.289627\",\"22.751963\"],[\"99.429595\",\"22.858203\"],[\"99.422858\",\"22.95454\"],[\"99.521735\",\"22.955884\"],[\"99.488432\",\"23.051046\"],[\"99.336512\",\"23.101188\"],[\"99.258964\",\"23.048934\"],[\"99.10449\",\"23.057463\"],[\"98.99924\",\"23.151389\"],[\"98.858693\",\"23.167152\"],[\"98.89811\",\"23.292382\"],[\"98.844295\",\"23.323341\"],[\"98.878284\",\"23.4184\"],[\"98.821571\",\"23.466061\"],[\"98.773527\",\"23.530055\"],[\"98.849638\",\"23.617887\"],[\"98.774085\",\"23.751823\"],[\"98.656368\",\"23.775684\"],[\"98.63961\",\"23.801661\"],[\"98.649909\",\"23.978332\"],[\"98.828974\",\"24.077833\"],[\"98.83893\",\"24.109859\"],[\"98.594849\",\"24.051324\"],[\"98.534853\",\"24.098401\"],[\"98.118939\",\"24.06406\"],[\"97.652578\",\"23.812007\"],[\"97.500916\",\"23.916402\"],[\"97.507889\",\"23.946076\"],[\"97.703905\",\"24.12772\"],[\"97.7321\",\"24.242073\"],[\"97.646012\",\"24.307132\"],[\"97.678134\",\"24.384313\"],[\"97.653759\",\"24.420913\"],[\"97.528617\",\"24.403523\"],[\"97.504349\",\"24.421636\"],[\"97.520614\",\"24.750904\"],[\"97.686181\",\"24.867223\"],[\"97.726886\",\"24.872596\"],[\"97.701159\",\"24.901891\"],[\"97.691374\",\"25.085579\"],[\"97.816257\",\"25.289948\"],[\"97.844152\",\"25.297669\"],[\"97.93803\",\"25.249897\"],[\"98.122308\",\"25.413237\"],[\"98.152177\",\"25.643055\"],[\"98.313818\",\"25.589382\"],[\"98.380058\",\"25.615679\"],[\"98.510756\",\"25.863626\"],[\"98.635018\",\"25.83211\"],[\"98.668857\",\"25.860517\"],[\"98.546226\",\"26.121072\"],[\"98.648708\",\"26.171346\"],[\"98.686366\",\"26.138757\"],[\"98.648\",\"26.279486\"],[\"98.751404\",\"26.620222\"],[\"98.701365\",\"26.849746\"],[\"98.733852\",\"27.033154\"],[\"98.685272\",\"27.065508\"],[\"98.663149\",\"27.194049\"],[\"98.708661\",\"27.325701\"],[\"98.657935\",\"27.422786\"],[\"98.67244\",\"27.532116\"],[\"98.574979\",\"27.540164\"],[\"98.537407\",\"27.61841\"],[\"98.464022\",\"27.631357\"],[\"98.417695\",\"27.512725\"],[\"98.29766\",\"27.498051\"],[\"98.144388\",\"27.832814\"],[\"98.155954\",\"27.920407\"],[\"98.109477\",\"27.953809\"],[\"98.111\",\"28.123353\"],[\"97.991245\",\"28.182664\"],[\"97.984571\",\"28.253152\"],[\"97.904449\",\"28.328541\"],[\"97.775702\",\"28.306704\"],[\"97.650433\",\"28.498038\"],[\"97.537651\",\"28.471615\"],[\"97.537544\",\"28.300942\"],[\"97.374809\",\"28.215134\"],[\"97.340262\",\"28.085365\"],[\"97.441328\",\"28.020526\"],[\"97.41045\",\"27.866111\"],[\"97.271254\",\"27.865238\"],[\"97.104206\",\"27.710621\"],[\"97.074959\",\"27.716851\"],[\"96.959302\",\"27.833554\"],[\"96.799979\",\"27.862962\"],[\"96.485238\",\"28.041967\"],[\"96.435456\",\"28.122218\"],[\"96.282742\",\"28.11548\"],[\"96.254032\",\"28.195619\"],[\"96.011753\",\"28.160892\"],[\"95.866721\",\"28.266533\"],[\"95.747824\",\"28.246895\"],[\"95.417182\",\"28.118906\"],[\"95.304315\",\"27.916842\"],[\"94.898787\",\"27.716889\"],[\"94.531603\",\"27.567615\"],[\"94.290032\",\"27.552854\"],[\"93.888688\",\"27.17204\"],[\"93.845987\",\"27.008916\"],[\"93.571308\",\"26.909059\"],[\"92.944937\",\"26.862668\"],[\"92.647405\",\"26.922873\"],[\"92.093539\",\"26.830122\"],[\"92.094247\",\"26.952103\"],[\"91.998589\",\"27.089524\"],[\"92.083004\",\"27.299047\"],[\"92.034273\",\"27.387239\"],[\"91.995907\",\"27.444668\"],[\"91.729424\",\"27.433927\"],[\"91.566002\",\"27.518015\"],[\"91.534996\",\"27.644815\"],[\"91.602566\",\"27.75719\"],[\"91.514804\",\"27.82382\"],[\"91.562676\",\"27.867913\"],[\"91.468799\",\"27.914302\"],[\"91.441784\",\"27.98019\"],[\"91.319818\",\"28.026891\"],[\"91.09123\",\"27.815659\"],[\"90.700164\",\"28.042914\"],[\"90.592875\",\"27.992071\"],[\"90.457885\",\"28.016188\"],[\"90.284765\",\"28.126494\"],[\"90.15898\",\"28.149257\"],[\"90.026414\",\"28.108761\"],[\"89.808083\",\"28.209972\"],[\"89.741178\",\"28.14466\"],[\"89.620585\",\"28.133666\"],[\"89.394701\",\"27.853894\"],[\"89.261577\",\"27.776101\"],[\"89.129934\",\"27.494282\"],[\"89.208705\",\"27.359876\"],[\"89.003119\",\"27.183627\"],[\"88.914757\",\"27.261172\"],[\"88.754318\",\"27.459692\"],[\"88.742559\",\"27.575756\"],[\"88.824484\",\"27.683585\"],[\"88.858366\",\"27.84585\"],[\"88.817167\",\"27.989323\"],[\"88.749833\",\"28.04227\"],[\"88.643789\",\"28.079175\"],[\"88.414536\",\"27.948938\"],[\"88.164768\",\"27.927649\"],[\"88.119621\",\"27.836742\"],[\"87.844298\",\"27.914245\"],[\"87.731731\",\"27.773994\"],[\"87.596998\",\"27.78341\"],[\"87.555606\",\"27.832169\"],[\"87.226918\",\"27.783961\"],[\"87.114007\",\"27.809055\"],[\"87.017899\",\"27.921014\"],[\"86.741974\",\"28.007834\"],[\"86.699681\",\"28.06541\"],[\"86.621253\",\"28.036683\"],[\"86.583402\",\"28.057988\"],[\"86.53626\",\"27.935498\"],[\"86.410089\",\"27.875861\"],[\"86.21079\",\"27.953771\"],[\"86.168518\",\"28.117581\"],[\"86.115561\",\"28.075237\"],[\"86.149271\",\"27.905693\"],[\"85.994046\",\"27.879218\"],[\"85.944521\",\"27.932939\"],[\"85.832512\",\"28.151055\"],[\"85.730202\",\"28.210313\"],[\"85.701256\",\"28.320003\"],[\"85.608344\",\"28.222546\"],[\"85.501399\",\"28.296408\"],[\"85.379283\",\"28.245137\"],[\"85.108273\",\"28.308745\"],[\"85.080035\",\"28.467918\"],[\"85.159664\",\"28.55567\"],[\"85.153999\",\"28.618263\"],[\"85.06716\",\"28.641711\"],[\"84.995663\",\"28.560816\"],[\"84.851232\",\"28.539159\"],[\"84.68178\",\"28.609315\"],[\"84.624424\",\"28.696084\"],[\"84.465938\",\"28.711423\"],[\"84.389849\",\"28.828396\"],[\"84.202845\",\"28.880867\"],[\"84.21602\",\"29.009754\"],[\"84.163899\",\"29.035197\"],[\"84.138279\",\"29.170731\"],[\"84.156046\",\"29.210987\"],[\"84.110534\",\"29.218441\"],[\"84.085858\",\"29.266484\"],[\"83.922973\",\"29.294016\"],[\"83.658078\",\"29.134976\"],[\"83.571818\",\"29.151918\"],[\"83.232014\",\"29.552591\"],[\"83.070545\",\"29.578981\"],[\"82.920063\",\"29.684809\"],[\"82.816744\",\"29.661877\"],[\"82.675381\",\"29.739992\"],[\"82.684436\",\"29.800693\"],[\"82.605515\",\"29.811846\"],[\"82.541184\",\"29.930689\"],[\"82.159367\",\"30.045582\"],[\"82.174859\",\"30.141657\"],[\"82.084479\",\"30.216893\"],[\"82.077913\",\"30.310431\"],[\"81.993091\",\"30.291904\"],[\"81.637645\",\"30.413095\"],[\"81.562006\",\"30.34101\"],[\"81.44238\",\"30.380465\"],[\"81.419613\",\"30.185719\"],[\"81.306617\",\"30.138261\"],[\"81.279452\",\"29.994378\"],[\"81.11603\",\"30.010804\"],[\"80.995588\",\"30.23662\"],[\"80.302677\",\"30.539587\"],[\"80.0878\",\"30.543727\"],[\"79.94236\",\"30.672449\"],[\"79.868267\",\"30.834188\"],[\"79.825373\",\"30.839126\"],[\"79.673774\",\"30.945519\"],[\"79.593372\",\"30.894565\"],[\"79.4033\",\"31.036535\"],[\"79.346716\",\"31.001927\"],[\"79.336288\",\"30.933391\"],[\"79.224193\",\"30.920174\"],[\"79.170227\",\"30.981969\"],[\"79.092743\",\"30.963258\"],[\"78.986249\",\"31.027673\"],[\"78.96668\",\"31.157988\"],[\"78.856924\",\"31.281503\"],[\"78.783796\",\"31.274131\"],[\"78.728542\",\"31.344273\"],[\"78.757918\",\"31.433515\"],[\"78.697536\",\"31.51499\"],[\"78.804524\",\"31.611708\"],[\"78.62458\",\"31.82264\"],[\"78.722126\",\"31.927562\"],[\"78.578596\",\"31.999524\"],[\"78.497701\",\"32.11424\"],[\"78.432641\",\"32.118838\"],[\"78.402622\",\"32.220389\"],[\"78.4762\",\"32.31131\"],[\"78.36638\",\"32.528271\"],[\"78.381336\",\"32.554898\"],[\"78.75176\",\"32.731065\"],[\"78.809223\",\"32.496551\"],[\"78.976872\",\"32.364195\"],[\"79.005883\",\"32.376536\"],[\"79.080126\",\"32.394077\"],[\"79.114029\",\"32.491665\"],[\"79.279168\",\"32.61355\"],[\"79.272795\",\"32.713951\"],[\"79.195912\",\"32.779409\"],[\"79.222884\",\"32.93039\"],[\"79.135616\",\"33.001861\"],[\"79.1289\",\"33.16414\"],[\"78.818901\",\"33.407102\"],[\"78.715496\",\"33.540948\"],[\"78.723736\",\"33.604683\"],[\"78.656015\",\"33.65053\"],[\"78.749506\",\"33.746395\"],[\"78.715582\",\"33.972994\"],[\"78.631468\",\"34.014908\"],[\"78.635867\",\"34.100789\"],[\"78.894839\",\"34.171104\"],[\"78.97243\",\"34.341399\"],[\"78.867137\",\"34.336615\"],[\"78.698266\",\"34.491737\"],[\"78.566988\",\"34.478543\"],[\"78.527312\",\"34.539705\"],[\"78.430667\",\"34.514354\"],[\"78.403587\",\"34.570207\"],[\"78.247139\",\"34.615374\"],[\"78.238835\",\"34.685346\"],[\"78.179204\",\"34.722162\"],[\"78.172767\",\"34.964414\"],[\"78.056982\",\"35.102584\"],[\"77.985699\",\"35.231108\"],[\"77.986279\",\"35.376996\"],[\"78.060694\",\"35.455461\"],[\"77.904546\",\"35.435236\"],[\"77.815948\",\"35.484733\"],[\"77.688854\",\"35.41908\"],[\"77.389219\",\"35.439747\"],[\"77.300084\",\"35.509365\"],[\"77.189727\",\"35.490691\"],[\"76.844516\",\"35.637645\"],[\"76.746969\",\"35.630442\"],[\"76.675837\",\"35.721674\"],[\"76.57151\",\"35.752903\"],[\"76.552477\",\"35.878323\"],[\"76.372211\",\"35.795695\"],[\"76.149781\",\"35.797227\"],[\"76.124933\",\"35.947734\"],[\"75.922673\",\"36.058952\"],[\"75.911558\",\"36.150212\"],[\"76.037836\",\"36.25097\"],[\"75.962627\",\"36.325913\"],[\"75.987883\",\"36.449905\"],[\"75.852334\",\"36.642976\"],[\"75.645268\",\"36.740208\"],[\"75.442793\",\"36.696296\"],[\"75.389578\",\"36.92691\"],[\"75.229053\",\"36.936669\"],[\"75.144038\",\"36.993436\"],[\"74.896481\",\"36.905551\"],[\"74.830134\",\"37.022531\"],[\"74.731107\",\"36.999897\"],[\"74.690745\",\"37.052831\"],[\"74.559724\",\"37.004866\"],[\"74.481919\",\"37.046871\"],[\"74.437845\",\"37.120308\"],[\"74.499922\",\"37.266966\"],[\"74.739861\",\"37.314987\"],[\"74.866312\",\"37.253902\"],[\"75.109062\",\"37.372562\"],[\"75.102367\",\"37.44057\"],[\"74.921629\",\"37.536802\"],[\"74.864573\",\"37.654148\"],[\"74.964759\",\"37.773242\"],[\"74.890065\",\"37.834937\"],[\"74.908884\",\"37.982278\"],[\"74.777327\",\"38.153069\"],[\"74.761705\",\"38.335766\"],[\"74.838288\",\"38.415972\"],[\"74.834661\",\"38.466073\"],[\"74.630191\",\"38.571841\"],[\"74.373536\",\"38.625873\"],[\"74.159667\",\"38.646204\"],[\"74.103234\",\"38.581\"],[\"74.111817\",\"38.521998\"],[\"74.000838\",\"38.494528\"],[\"73.77285\",\"38.599147\"],[\"73.670411\",\"38.8621\"],[\"73.725193\",\"38.95749\"],[\"73.802719\",\"38.951449\"],[\"73.807654\",\"38.986017\"],[\"73.72221\",\"39.008697\"],[\"73.473516\",\"39.38863\"],[\"73.616295\",\"39.498494\"],[\"73.852308\",\"39.511093\"],[\"73.918183\",\"39.600828\"],[\"73.897347\",\"39.705585\"],[\"73.808942\",\"39.800228\"],[\"73.93934\",\"39.994893\"],[\"73.923182\",\"40.040084\"],[\"74.206402\",\"40.150079\"],[\"74.349396\",\"40.120697\"],[\"74.57305\",\"40.295485\"],[\"74.65313\",\"40.30568\"],[\"74.68538\",\"40.371234\"],[\"74.834146\",\"40.370645\"],[\"74.764109\",\"40.445837\"],[\"74.82522\",\"40.547706\"],[\"74.991968\",\"40.485604\"],[\"75.234225\",\"40.478276\"],[\"75.595829\",\"40.68866\"],[\"75.623209\",\"40.675235\"],[\"75.670288\",\"40.537172\"],[\"75.761075\",\"40.482617\"],[\"75.702088\",\"40.361506\"],[\"75.718331\",\"40.319244\"],[\"75.831778\",\"40.356634\"],[\"75.909498\",\"40.327457\"],[\"75.962198\",\"40.405801\"],[\"76.169136\",\"40.4108\"],[\"76.276231\",\"40.468254\"],[\"76.350474\",\"40.381058\"],[\"76.518981\",\"40.485522\"],[\"76.629574\",\"40.63177\"],[\"76.618888\",\"40.769281\"],[\"76.705191\",\"40.836687\"],[\"76.738064\",\"40.970777\"],[\"76.866853\",\"41.052415\"],[\"77.002079\",\"41.102703\"],[\"77.174621\",\"41.038594\"],[\"77.761016\",\"41.051719\"],[\"77.819595\",\"41.177071\"],[\"78.104789\",\"41.252161\"],[\"78.153155\",\"41.41058\"],[\"78.633699\",\"41.494773\"],[\"78.691227\",\"41.573398\"],[\"79.204752\",\"41.752489\"],[\"79.314144\",\"41.836204\"],[\"79.760721\",\"41.919283\"],[\"79.886034\",\"42.062214\"],[\"80.133162\",\"42.067184\"],[\"80.141101\",\"42.212865\"],[\"80.253518\",\"42.271926\"],[\"80.176806\",\"42.427971\"],[\"80.233755\",\"42.509043\"],[\"80.134728\",\"42.629333\"],[\"80.233669\",\"42.836907\"],[\"80.527124\",\"42.908804\"],[\"80.358446\",\"43.012006\"],[\"80.363209\",\"43.05597\"],[\"80.77054\",\"43.196057\"],[\"80.751915\",\"43.283969\"],[\"80.657952\",\"43.321619\"],[\"80.722024\",\"43.489763\"],[\"80.498157\",\"43.799783\"],[\"80.367136\",\"44.112086\"],[\"80.382199\",\"44.282371\"],[\"80.320637\",\"44.484489\"],[\"80.375676\",\"44.600628\"],[\"80.200903\",\"44.711915\"],[\"80.153825\",\"44.809898\"],[\"79.982829\",\"44.769908\"],[\"79.863417\",\"44.896027\"],[\"79.863911\",\"44.925979\"],[\"80.099001\",\"45.081976\"],[\"80.380783\",\"45.073778\"],[\"80.472493\",\"45.151008\"],[\"80.593643\",\"45.1361\"],[\"80.723355\",\"45.20611\"],[\"80.897505\",\"45.157969\"],[\"81.777248\",\"45.412611\"],[\"81.933761\",\"45.262246\"],[\"82.295816\",\"45.254845\"],[\"82.544253\",\"45.206065\"],[\"82.569401\",\"45.340669\"],[\"82.52743\",\"45.402307\"],[\"82.265496\",\"45.514783\"],[\"82.238288\",\"45.626914\"],[\"82.311373\",\"45.780155\"],[\"82.319655\",\"45.956177\"],[\"82.440763\",\"46.003982\"],[\"82.822452\",\"46.775333\"],[\"83.012309\",\"47.24291\"],[\"83.148286\",\"47.241861\"],[\"83.371532\",\"47.179737\"],[\"83.583899\",\"47.087891\"],[\"83.927865\",\"46.999324\"],[\"84.753106\",\"47.038661\"],[\"84.955001\",\"46.896507\"],[\"85.227256\",\"47.083274\"],[\"85.529079\",\"47.087102\"],[\"85.670679\",\"47.295094\"],[\"85.656817\",\"47.416255\"],[\"85.581307\",\"47.505664\"],[\"85.500433\",\"48.023314\"],[\"85.564678\",\"48.210504\"],[\"85.778117\",\"48.445159\"],[\"86.21609\",\"48.461326\"],[\"86.297393\",\"48.520485\"],[\"86.571493\",\"48.56921\"],[\"86.745751\",\"48.738276\"],[\"86.72689\",\"48.79468\"],[\"86.785169\",\"48.850936\"],[\"86.706676\",\"48.980358\"],[\"86.708565\",\"49.011387\"],[\"86.889625\",\"49.162344\"],[\"87.145572\",\"49.183316\"],[\"87.435358\",\"49.10582\"],[\"87.476878\",\"49.120484\"],[\"87.490826\",\"49.169134\"],[\"87.836187\",\"49.198616\"],[\"87.895432\",\"49.115877\"],[\"87.87024\",\"49.056222\"],[\"87.9406\",\"48.974696\"],[\"87.803872\",\"48.87904\"],[\"88.125672\",\"48.72326\"],[\"88.023491\",\"48.591881\"],[\"88.35763\",\"48.495848\"],[\"88.450756\",\"48.423234\"],[\"88.527102\",\"48.435337\"],[\"88.631537\",\"48.352171\"],[\"88.608513\",\"48.280466\"],[\"88.657844\",\"48.207172\"],[\"88.828926\",\"48.136652\"],[\"88.942652\",\"48.146274\"],[\"89.088199\",\"48.017358\"],[\"89.571383\",\"48.066881\"],[\"89.777999\",\"47.863838\"],[\"90.077548\",\"47.910676\"],[\"90.155997\",\"47.747389\"],[\"90.399628\",\"47.669347\"],[\"90.413575\",\"47.647046\"],[\"90.398619\",\"47.62125\"]];var JPN=[[\"145.824681\",\"43.408601\"],[\"145.802708\",\"43.198731\"],[\"145.188847\",\"43.068449\"],[\"144.992667\",\"42.907867\"],[\"143.970938\",\"42.890345\"],[\"143.384543\",\"42.351736\"],[\"143.299399\",\"41.875506\"],[\"142.95333\",\"42.100071\"],[\"142.391844\",\"42.272669\"],[\"141.369501\",\"42.535185\"],[\"140.832544\",\"42.147648\"],[\"141.028863\",\"41.945699\"],[\"141.296655\",\"41.765675\"],[\"141.564447\",\"41.265171\"],[\"141.675004\",\"40.481173\"],[\"141.829516\",\"40.300647\"],[\"141.982619\",\"40.122464\"],[\"142.142627\",\"39.594221\"],[\"142.025897\",\"39.368452\"],[\"142.021777\",\"39.317473\"],[\"141.850783\",\"38.901626\"],[\"140.939308\",\"35.65669\"],[\"139.436268\",\"34.193845\"],[\"137.347075\",\"34.1603\"],[\"135.63835\",\"33.29272\"],[\"133.488103\",\"32.70897\"],[\"131.614016\",\"31.325292\"],[\"130.633951\",\"28.842845\"],[\"127.785048\",\"25.789008\"],[\"126.597333\",\"26.344784\"],[\"128.404011\",\"28.563857\"],[\"128.940636\",\"30.856318\"],[\"128.544464\",\"32.79621\"],[\"129.194642\",\"34.475467\"],[\"129.324698\",\"34.765641\"],[\"129.502255\",\"34.700627\"],[\"129.480282\",\"33.855809\"],[\"130.439605\",\"33.915587\"],[\"130.801388\",\"34.159716\"],[\"130.791882\",\"34.445506\"],[\"131.121471\",\"34.437578\"],[\"131.298124\",\"34.567727\"],[\"132.535148\",\"35.287335\"],[\"132.978675\",\"36.154847\"],[\"133.268559\",\"36.366209\"],[\"134.710796\",\"35.708808\"],[\"135.303308\",\"35.794165\"],[\"136.404389\",\"36.456814\"],[\"136.612743\",\"37.37546\"],[\"137.409252\",\"37.580348\"],[\"137.291471\",\"36.906421\"],[\"137.982237\",\"37.126821\"],[\"138.504087\",\"37.383552\"],[\"138.758146\",\"37.83898\"],[\"139.207212\",\"38.04151\"],[\"139.310081\",\"38.315743\"],[\"139.737028\",\"38.85997\"],[\"139.403318\",\"39.234917\"],[\"139.952634\",\"39.328459\"],[\"140.002073\",\"39.745742\"],[\"139.695586\",\"39.824208\"],[\"139.679107\",\"40.025361\"],[\"139.935912\",\"40.077921\"],[\"140.001079\",\"40.309807\"],[\"139.922802\",\"40.434311\"],[\"139.828954\",\"40.646676\"],[\"139.95008\",\"40.766604\"],[\"139.957833\",\"41.432491\"],[\"140.001779\",\"42.027933\"],[\"139.389291\",\"42.038134\"],[\"139.346719\",\"42.242877\"],[\"139.63099\",\"42.291658\"],[\"139.72712\",\"42.641155\"],[\"139.942098\",\"42.710048\"],[\"140.194783\",\"42.842098\"],[\"140.30396\",\"42.856193\"],[\"140.309453\",\"43.306551\"],[\"140.393224\",\"43.399418\"],[\"140.61976\",\"43.355264\"],[\"140.788732\",\"43.238558\"],[\"140.923314\",\"43.24556\"],[\"141.029058\",\"43.24356\"],[\"141.083989\",\"43.216544\"],[\"141.141667\",\"43.185513\"],[\"141.336675\",\"43.240561\"],[\"141.328435\",\"43.731771\"],[\"141.350408\",\"43.792272\"],[\"141.594854\",\"43.937818\"],[\"141.565334\",\"44.291761\"],[\"141.70541\",\"44.45177\"],[\"141.708157\",\"44.742196\"],[\"141.683437\",\"45.002047\"],[\"141.226594\",\"45.076599\"],[\"141.053559\",\"45.165748\"],[\"140.987641\",\"45.335905\"],[\"140.943696\",\"45.481498\"],[\"141.201589\",\"45.501064\"],[\"141.972005\",\"45.52416\"],[\"142.341996\",\"45.204477\"],[\"142.567215\",\"45.014513\"],[\"142.747966\",\"44.801094\"],[\"143.487122\",\"44.343678\"],[\"144.463587\",\"44.078617\"],[\"144.874201\",\"44.098345\"],[\"145.125513\",\"44.222478\"],[\"145.300832\",\"44.391445\"],[\"145.487445\",\"44.320885\"],[\"145.111163\",\"43.848378\"],[\"145.420933\",\"43.545126\"],[\"145.451146\",\"43.393635\"]];var EAST=[[\"73.757316\",\"29.95798\"],[\"73.045185\",\"28.989136\"],[\"72.434431\",\"28.60931\"],[\"72.060098\",\"28.097836\"],[\"71.631749\",\"27.60702\"],[\"70.67236\",\"27.593264\"],[\"69.82743\",\"27.041579\"],[\"70.337045\",\"26.566045\"],[\"70.070655\",\"26.098932\"],[\"70.070655\",\"25.85946\"],[\"70.290717\",\"25.713457\"],[\"70.626599\",\"25.671708\"],[\"70.68451\",\"25.201036\"],[\"70.974064\",\"24.791642\"],[\"70.811914\",\"24.612763\"],[\"70.139151\",\"24.465923\"],[\"69.268014\",\"24.435423\"],[\"68.313114\",\"24.267539\"],[\"67.911051\",\"23.808548\"],[\"68.547651\",\"23.00912\"],[\"69.11724\",\"22.684917\"],[\"68.748682\",\"22.406416\"],[\"69.301519\",\"21.536417\"],[\"70.153052\",\"20.55461\"],[\"71.170222\",\"20.332219\"],[\"72.234349\",\"21.204506\"],[\"72.501752\",\"21.087142\"],[\"72.627589\",\"19.003767\"],[\"72.973641\",\"16.878922\"],[\"74.267757\",\"13.888898\"],[\"75.369075\",\"10.48118\"],[\"76.976429\",\"7.781262\"],[\"78.374805\",\"8.242836\"],[\"79.427902\",\"9.641233\"],[\"80.513091\",\"10.734685\"],[\"80.254133\",\"11.953377\"],[\"80.702994\",\"13.082541\"],[\"80.402232\",\"15.312175\"],[\"82.991824\",\"16.887862\"],[\"85.259974\",\"19.051683\"],[\"87.784208\",\"21.10679\"],[\"89.263244\",\"21.658877\"],[\"89.121009\",\"23.437218\"],[\"88.869364\",\"23.717994\"],[\"88.93501\",\"24.317619\"],[\"88.267603\",\"24.596482\"],[\"88.727129\",\"25.073086\"],[\"89.186656\",\"25.132532\"],[\"88.891246\",\"25.626788\"],[\"88.650542\",\"25.666241\"],[\"88.201956\",\"25.892841\"],[\"88.420778\",\"26.12883\"],[\"88.54113\",\"26.285892\"],[\"89.241361\",\"26.020727\"],[\"89.613359\",\"25.863309\"],[\"89.657124\",\"25.330477\"],[\"90.190932\",\"25.070998\"],[\"91.175632\",\"25.051175\"],[\"91.811935\",\"25.05221\"],[\"92.234344\",\"24.983507\"],[\"92.104658\",\"24.649259\"],[\"91.844714\",\"24.363456\"],[\"91.46563\",\"24.215373\"],[\"90.999897\",\"23.839459\"],[\"91.216517\",\"23.054471\"],[\"91.389672\",\"22.300847\"],[\"92.125338\",\"20.623521\"],[\"93.946113\",\"18.753448\"],[\"92.823675\",\"16.135717\"],[\"91.224276\",\"9.998681\"],[\"93.522355\",\"5.752403\"],[\"96.409859\",\"0.991383\"],[\"100.048825\",\"-3.72227\"],[\"104.60328\",\"-7.736835\"],[\"114.01025\",\"-9.967468\"],[\"123.433702\",\"-11.032285\"],[\"123.717523\",\"-10.536628\"],[\"124.427075\",\"-10.257467\"],[\"125.004217\",\"-9.79418\"],[\"125.026253\",\"-9.527403\"],[\"125.12788\",\"-9.406056\"],[\"125.031601\",\"-9.358561\"],[\"124.946021\",\"-9.216037\"],[\"125.026253\",\"-9.168516\"],[\"125.192065\",\"-9.13155\"],[\"125.181368\",\"-8.982538\"],[\"124.999509\",\"-8.987821\"],[\"124.919277\",\"-8.924418\"],[\"125.095787\",\"-8.596662\"],[\"125.555784\",\"-8.088612\"],[\"125.721597\",\"-8.120384\"],[\"127.292232\",\"-8.326419\"],[\"132.424841\",\"-8.447132\"],[\"139.646777\",\"-8.512957\"],[\"141.039618\",\"-9.209048\"],[\"141.025347\",\"-6.894209\"],[\"140.978655\",\"-6.887392\"],[\"140.92235\",\"-6.851943\"],[\"140.912737\",\"-6.791946\"],[\"140.905871\",\"-6.737397\"],[\"140.850939\",\"-6.695117\"],[\"140.903124\",\"-6.59554\"],[\"140.945696\",\"-6.509588\"],[\"141.000442\",\"-6.341825\"],[\"140.971754\",\"-2.322171\"],[\"131.63417\",\"2.671779\"],[\"125.182746\",\"17.665698\"],[\"120.512231\",\"19.243264\"],[\"119.486602\",\"16.550429\"],[\"119.820154\",\"12.379244\"],[\"115.293339\",\"5.77989\"],[\"114.675587\",\"4.850295\"],[\"114.550618\",\"4.735342\"],[\"113.923024\",\"4.60805\"],[\"113.581092\",\"3.881824\"],[\"113.423754\",\"3.763395\"],[\"113.138025\",\"3.427757\"],[\"112.798973\",\"3.119213\"],[\"111.886744\",\"2.960093\"],[\"109.608393\",\"3.016867\"],[\"108.771364\",\"3.935896\"],[\"107.181008\",\"7.101455\"],[\"110.509765\",\"12.398562\"],[\"108.171244\",\"18.449712\"],[\"108.482399\",\"21.923911\"],[\"106.042422\",\"23.36869\"],[\"103.861684\",\"23.500971\"],[\"101.853026\",\"22.51803\"],[\"101.964992\",\"22.453371\"],[\"102.079606\",\"22.467488\"],[\"102.100842\",\"22.366033\"],[\"102.192713\",\"22.264854\"],[\"102.457234\",\"22.052786\"],[\"102.482552\",\"21.991854\"],[\"102.505944\",\"21.933096\"],[\"102.598494\",\"21.858522\"],[\"102.635027\",\"21.768076\"],[\"102.625285\",\"21.706993\"],[\"102.652076\",\"21.663993\"],[\"102.749497\",\"21.641356\"],[\"102.798208\",\"21.673047\"],[\"102.841349\",\"21.836472\"],[\"102.857688\",\"21.688772\"],[\"102.936435\",\"21.684707\"],[\"102.971433\",\"21.587108\"],[\"102.897061\",\"21.530145\"],[\"102.831439\",\"21.416153\"],[\"102.853313\",\"21.363197\"],[\"102.770191\",\"21.249074\"],[\"102.905811\",\"20.975636\"],[\"103.219101\",\"20.747931\"],[\"103.517772\",\"20.714677\"],[\"103.809332\",\"20.581588\"],[\"103.928404\",\"20.796397\"],[\"104.17602\",\"20.868718\"],[\"104.456453\",\"20.674762\"],[\"104.597217\",\"20.649539\"],[\"104.494205\",\"20.561152\"],[\"104.33078\",\"20.448774\"],[\"104.574769\",\"20.381484\"],[\"104.658948\",\"20.213054\"],[\"104.76838\",\"20.149846\"],[\"104.838529\",\"20.181454\"],[\"104.938282\",\"20.043215\"],[\"104.745932\",\"19.888842\"],[\"104.790827\",\"19.817585\"],[\"104.656142\",\"19.725166\"],[\"104.580381\",\"19.643265\"],[\"104.41625\",\"19.738372\"],[\"104.315236\",\"19.711959\"],[\"104.004834\",\"19.776374\"],[\"103.978829\",\"19.601517\"],[\"104.057089\",\"19.487272\"],[\"103.795479\",\"19.292317\"],[\"104.05618\",\"19.205901\"],[\"104.303857\",\"19.041792\"],[\"104.509718\",\"18.953592\"],[\"104.638381\",\"18.819682\"],[\"104.82816\",\"18.734411\"],[\"105.081179\",\"18.714495\"],[\"105.090265\",\"18.561021\"],[\"105.010482\",\"18.494337\"],[\"105.215532\",\"18.232365\"],[\"105.507333\",\"18.022503\"],[\"105.673181\",\"17.706155\"],[\"105.959258\",\"17.411042\"],[\"106.393016\",\"16.974064\"],[\"106.530565\",\"16.907086\"],[\"106.511314\",\"16.705452\"],[\"106.610307\",\"16.485756\"],[\"106.704089\",\"16.360817\"],[\"106.855183\",\"16.430793\"],[\"106.917705\",\"16.245803\"],[\"107.074009\",\"16.275813\"],[\"107.178212\",\"16.130721\"],[\"107.386617\",\"15.975505\"],[\"107.256364\",\"15.895346\"],[\"107.157745\",\"15.729918\"],[\"107.270294\",\"15.538977\"],[\"107.541111\",\"15.371176\"],[\"107.598724\",\"15.119441\"],[\"107.495192\",\"15.087312\"],[\"107.421241\",\"14.973038\"],[\"107.491494\",\"14.719275\"],[\"107.439728\",\"14.558285\"],[\"107.365777\",\"14.619117\"],[\"107.28443\",\"14.576179\"],[\"107.125343\",\"14.454386\"],[\"107.058787\",\"14.468707\"],[\"106.862816\",\"14.336197\"],[\"106.714913\",\"14.443644\"],[\"106.640961\",\"14.525985\"],[\"106.467176\",\"14.622607\"],[\"106.385829\",\"14.475868\"],[\"106.219438\",\"14.500928\"],[\"106.189858\",\"14.42932\"],[\"106.104814\",\"14.407834\"],[\"105.956911\",\"14.346944\"],[\"105.993887\",\"14.192854\"],[\"106.138092\",\"14.056594\"],[\"106.067838\",\"13.984846\"],[\"105.938423\",\"13.948964\"],[\"105.860774\",\"14.067355\"],[\"105.570516\",\"14.196239\"],[\"105.40579\",\"14.123984\"],[\"105.307739\",\"14.207645\"],[\"105.23322\",\"14.257067\"],[\"105.284207\",\"14.321679\"],[\"105.397946\",\"14.336879\"],[\"105.499919\",\"14.435654\"],[\"105.550906\",\"14.617894\"],[\"105.535217\",\"14.773437\"],[\"105.660723\",\"14.90613\"],[\"105.629347\",\"15.019802\"],[\"105.511685\",\"15.118269\"],[\"105.543062\",\"15.182626\"],[\"105.660723\",\"15.2848\"],[\"105.543062\",\"15.368016\"],[\"105.641113\",\"15.40205\"],[\"105.652879\",\"15.526792\"],[\"105.672489\",\"15.723201\"],[\"105.433244\",\"15.866611\"],[\"105.419865\",\"16.077323\"],[\"105.134284\",\"16.158015\"],[\"105.05029\",\"16.303179\"],[\"104.798307\",\"16.56635\"],[\"104.815106\",\"16.791639\"],[\"104.807079\",\"17.064937\"],[\"104.834545\",\"17.357467\"],[\"104.746654\",\"17.518618\"],[\"104.392993\",\"17.569592\"],[\"104.221867\",\"17.790865\"],[\"104.071113\",\"18.043041\"],[\"103.989584\",\"18.196169\"],[\"103.880878\",\"18.236734\"],[\"103.692584\",\"18.269917\"],[\"103.616878\",\"18.310466\"],[\"103.546996\",\"18.349162\"],[\"103.428584\",\"18.336313\"],[\"103.370348\",\"18.277339\"],[\"103.302336\",\"18.221647\"],[\"103.237773\",\"18.102183\"],[\"103.207191\",\"18.040806\"],[\"103.105249\",\"17.937384\"],[\"102.938746\",\"17.875949\"],[\"102.914959\",\"17.827432\"],[\"102.813018\",\"17.765959\"],[\"102.687291\",\"17.753015\"],[\"102.568359\",\"17.830667\"],[\"102.510593\",\"17.840371\"],[\"102.422244\",\"17.921219\"],[\"102.310109\",\"17.960013\"],[\"102.204769\",\"17.995566\"],[\"102.143605\",\"18.066652\"],[\"101.987295\",\"17.966477\"],[\"101.868364\",\"17.927685\"],[\"101.647491\",\"17.811257\"],[\"101.148809\",\"17.535022\"],[\"101.023374\",\"17.599797\"],[\"101.039054\",\"17.808912\"],[\"101.175591\",\"17.993048\"],[\"101.212078\",\"18.10208\"],[\"101.219896\",\"18.173904\"],[\"101.206865\",\"18.240749\"],[\"101.212078\",\"18.344679\"],[\"101.107829\",\"18.394147\"],[\"101.092192\",\"18.45349\"],[\"101.206865\",\"18.578877\"],[\"101.31372\",\"18.655442\"],[\"101.272021\",\"18.741845\"],[\"101.272021\",\"18.830671\"],[\"101.311114\",\"18.939171\"],[\"101.370997\",\"19.079681\"],[\"101.298023\",\"19.148632\"],[\"101.279779\",\"19.212632\"],[\"101.22818\",\"19.375675\"],[\"101.230424\",\"19.441269\"],[\"101.295484\",\"19.487804\"],[\"101.29997\",\"19.591402\"],[\"101.239397\",\"19.633668\"],[\"101.145173\",\"19.587175\"],[\"101.093574\",\"19.629442\"],[\"100.94102\",\"19.650571\"],[\"100.893907\",\"19.65691\"],[\"100.864742\",\"19.616763\"],[\"100.835578\",\"19.570265\"],[\"100.770518\",\"19.534326\"],[\"100.611233\",\"19.574493\"],[\"100.584312\",\"19.52164\"],[\"100.525983\",\"19.540669\"],[\"100.46541\",\"19.637894\"],[\"100.436245\",\"19.777288\"],[\"100.541687\",\"19.91867\"],[\"100.597773\",\"20.190526\"],[\"100.502946\",\"20.195053\"],[\"100.428788\",\"20.262059\"],[\"100.379218\",\"20.36601\"],[\"100.329779\",\"20.413638\"],[\"100.244635\",\"20.387895\"],[\"100.173224\",\"20.317079\"],[\"100.160865\",\"20.244943\"],[\"100.114789\",\"20.260301\"],[\"100.107922\",\"20.315689\"],[\"100.155988\",\"20.507461\"],[\"100.211891\",\"20.650056\"],[\"100.290818\",\"20.736459\"],[\"100.399973\",\"20.811825\"],[\"100.562866\",\"20.788277\"],[\"100.673701\",\"20.899705\"],[\"100.59616\",\"20.954029\"],[\"100.751867\",\"21.254036\"],[\"100.998402\",\"21.338663\"],[\"101.211622\",\"21.580378\"],[\"101.209043\",\"21.846211\"],[\"100.909901\",\"21.894492\"],[\"100.207565\",\"21.580378\"],[\"100.051491\",\"22.159742\"],[\"99.466212\",\"22.436515\"],[\"99.71333\",\"23.024318\"],[\"99.352488\",\"23.281431\"],[\"99.03983\",\"24.3247\"],[\"98.101855\",\"24.95993\"],[\"98.855913\",\"25.608485\"],[\"98.911088\",\"26.812993\"],[\"98.892697\",\"27.483968\"],[\"98.340947\",\"27.826069\"],[\"98.120247\",\"28.377665\"],[\"97.586888\",\"28.733061\"],[\"97.108705\",\"28.329109\"],[\"96.658506\",\"27.787659\"],[\"96.296725\",\"28.010502\"],[\"95.847241\",\"28.136253\"],[\"95.288126\",\"27.787659\"],[\"94.685158\",\"27.233428\"],[\"93.281889\",\"26.647032\"],[\"92.037851\",\"26.720259\"],[\"90.141229\",\"26.820605\"],[\"88.984724\",\"26.833974\"],[\"88.731159\",\"27.080308\"],[\"88.794435\",\"27.331629\"],[\"88.741186\",\"27.914582\"],[\"88.223484\",\"27.953015\"],[\"88.169108\",\"27.50057\"],[\"87.774017\",\"27.262697\"],[\"88.215457\",\"26.870398\"],[\"87.783036\",\"26.535989\"],[\"87.047344\",\"26.702224\"],[\"84.777332\",\"27.310285\"],[\"83.539214\",\"27.665305\"],[\"82.385985\",\"27.880248\"],[\"81.010299\",\"28.662263\"],[\"80.547568\",\"29.001896\"],[\"81.345045\",\"30.304903\"],[\"80.749935\",\"31.185747\"],[\"80.056967\",\"31.015739\"],[\"79.215234\",\"31.178494\"],[\"78.991224\",\"31.346766\"],[\"79.254658\",\"31.656243\"],[\"78.835019\",\"31.979804\"],[\"78.65109\",\"32.12011\"],[\"78.595912\",\"32.240756\"],[\"78.591313\",\"32.400075\"],[\"78.669483\",\"32.54361\"],[\"78.739513\",\"32.426665\"],[\"78.84424\",\"32.288005\"],[\"79.067657\",\"32.24668\"],[\"79.277111\",\"32.470789\"],[\"79.395802\",\"32.676713\"],[\"79.235221\",\"33.233259\"],[\"79.011803\",\"33.47819\"],[\"78.84424\",\"33.681772\"],[\"79.182009\",\"34.336185\"],[\"78.821102\",\"34.565916\"],[\"78.428537\",\"34.758609\"],[\"78.294895\",\"34.940474\"],[\"78.23791\",\"35.530039\"],[\"77.722544\",\"35.628785\"],[\"77.294994\",\"35.609184\"],[\"76.821489\",\"35.701892\"],[\"76.684572\",\"35.988603\"],[\"76.399329\",\"35.919333\"],[\"76.159724\",\"35.933192\"],[\"76.165429\",\"36.20986\"],[\"76.074151\",\"36.366207\"],[\"75.999987\",\"36.641347\"],[\"75.714744\",\"36.787688\"],[\"75.562518\",\"36.805399\"],[\"75.481245\",\"36.811057\"],[\"75.45651\",\"36.950968\"],[\"75.253968\",\"37.023882\"],[\"75.084541\",\"37.066268\"],[\"74.894884\",\"37.084426\"],[\"74.735572\",\"37.122745\"],[\"74.643309\",\"37.074934\"],[\"74.566145\",\"37.033976\"],[\"74.549925\",\"36.938948\"],[\"74.491692\",\"37.015218\"],[\"74.377803\",\"36.998366\"],[\"74.261908\",\"36.915016\"],[\"74.132106\",\"36.91687\"],[\"74.057933\",\"36.840851\"],[\"73.967535\",\"36.853836\"],[\"73.925813\",\"36.892775\"],[\"73.808039\",\"36.908632\"],[\"73.728388\",\"36.920709\"],[\"73.639124\",\"36.911926\"],[\"73.699986\",\"36.820121\"],[\"73.765904\",\"36.814624\"],[\"73.833196\",\"36.776135\"],[\"73.853795\",\"36.743128\"],[\"73.834569\",\"36.711208\"],[\"73.735692\",\"36.736525\"],[\"73.657414\",\"36.707906\"],[\"73.599736\",\"36.711208\"],[\"73.57227\",\"36.735425\"],[\"73.517339\",\"36.729922\"],[\"73.397862\",\"36.757433\"],[\"73.319585\",\"36.738726\"],[\"73.241307\",\"36.720664\"],[\"73.175389\",\"36.732772\"],[\"73.112218\",\"36.71516\"],[\"73.032567\",\"36.686532\"],[\"73.039433\",\"36.651284\"],[\"73.060033\",\"36.609405\"],[\"73.036687\",\"36.564195\"],[\"73.002355\",\"36.529994\"],[\"72.958409\",\"36.507921\"],[\"72.944676\",\"36.475904\"],[\"72.886998\",\"36.474799\"],[\"72.855412\",\"36.448292\"],[\"72.848546\",\"36.400777\"],[\"72.832334\",\"36.374217\"],[\"72.796629\",\"36.362053\"],[\"72.685258\",\"36.303681\"],[\"72.663286\",\"36.274901\"],[\"72.574022\",\"36.267151\"],[\"72.461412\",\"36.175196\"],[\"73.530389\",\"35.809316\"],[\"74.170542\",\"35.420826\"],[\"74.340245\",\"35.055408\"],[\"73.9237\",\"34.612198\"],[\"73.676858\",\"34.332391\"],[\"73.880481\",\"33.422673\"],[\"74.651862\",\"32.906095\"],[\"75.747223\",\"32.542685\"],[\"75.623802\",\"32.256112\"],[\"74.975842\",\"31.968632\"],[\"74.759855\",\"31.732749\"],[\"74.759855\",\"30.955369\"],[\"74.327882\",\"30.584206\"],[\"74.18929\",\"30.224947\"],[\"74.035013\",\"29.864372\"]];var getOutseaData=function(e){if(e&&e===\"mapbox\"){return{boundsP16:[[CHN]],nebulaOutSea:[]}}else{return{boundsP16:[[CHN],[JPN],[EAST]],nebulaOutSea:[[JPN],[EAST]]}}};var geoUtil=new GeometryUtilCls({});var CONSTS$1={sV:\"http://47.93.246.7/api/static/style_icon/sprite_v8@2x.png\",EU:[LangConf.my.type,LangConf.km.type,LangConf.PU.type,LangConf.th.type,LangConf.$U.type]};var MapboxLabelFormat$1=function(t){__extends(e,t);function e(e){var r=t.call(this)||this;r.kQ={};return r}e.prototype.Ns=function(e,r){t.prototype.Ns.call(this,e,r);return this.rV(e,r)};e.prototype.rV=function(e,r){var t=e.data||{};var i=t.poilabel||[];var a=e.road||[];var n={};var o=this.hV(e);var f;for(var s in i){if(i.hasOwnProperty(s)){f=i[s];var u=this.nV(f,o,r.zoom,r.VQ);n[s]=u}}var l=this.oV(a,{});return n};e.prototype.nV=function(e,r,t,i){var a=[];var n=this.kQ;for(var o=0,f=e;o<f.length;o++){var s=f[o];var u=s.name,l=s.position,v=s.id,c=s.minzoom,h=s.maxzoom,d=s.style,_=d===void 0?{}:d;if(i!==\"mapbox\"&&t>=9&&r&&!this.uV(l[0])){continue}var g=_.lV,y=_.th,m=_.ih,p=_.nh,b=_.qU,x=_.eh,C=_.textAnchor,S=C===void 0?\"bottom\":C,M=_.rh,w=_.sh,k=_.Kr,T=_.Qr;var I=[c,h];var A=null;if(p&&b&&x){this.Fs[CONSTS$1.sV]=1;A=[{image:CONSTS$1.sV,size:[b[6]/2,b[7]/2],clipOrigin:[b[4],b[5]],clipSize:[b[6],b[7]]}]}var $=null;if(u&&k){if(!n[k]){n[k]=Util$3.color2RgbaArray(k)}var F=n[k];var P=void 0;var L=0;if(!n[T]){n[T]=Util$3.color2RgbaArray(T||\"\")}if(n[T]){P=n[T];L=3}var R=this.fV(u)?[0,u.length]:[];this.Ws(u,R);$={txt:u,$G:R,direction:S||\"center\",offset:[0,0],style:{fontSize:M,fillColor:F,strokeColor:P,strokeWidth:L,fold:false}}}var E={data:{id:v,name:u,txt:u,position:l[0],positionType:\"relative\",zooms:[y,m],extData:{id:v,type:\"poi\"}},opts:{zIndex:g,zooms:I,visible:true}};if(A){E.opts.icon=A}if($){E.opts.text=$}if(E.opts.text||E.opts.icon){a.push(E)}}return a};e.prototype.oV=function(e,r){var t;var i;for(var a=0,n=e;a<n.length;a++){var o=n[a];t=o.name;i=this.fV(t)?[0,t.length]:[];if(t){this.Ws(t,i)}}};e.prototype.DQ=function(e,r){var t=[];var i;var a;var n;var o;var f;for(var s=0,u=e;s<u.length;s++){var l=u[s];i=l.path;a=l.name||\"\";n=labelsUtil$2.aQ(a.split(\"\"));f=l.distance||1e5;o=l.style&&l.style[1]||{};o=l.style||{};var v=o.th,c=v===void 0?zoomRange[0]:v,h=o.ih,d=h===void 0?zoomRange[1]:h,_=o.Kr,g=o.Qr,y=o.rh,m=o.zIndex,p=o.Hr,b=p===void 0?\"name_en\":p;var x=_;var C=g;if(a&&i&&i.length){var S={path:i,positionType:\"absolute\",name:a,$G:[],CO:n,rank:m,BG:b,distance:f,zooms:[c,d],style:{fontSize:y||12,fillColor:x,strokeColor:C}};t.push(S)}}return t};e.prototype.fV=function(e){var r=LangManager.kU(e);return CONSTS$1.EU.indexOf(r)!==-1};e.prototype.uV=function(e){var r=\"EPSG:3857\";var t=ProjectionManager.getProjection(r).unproject(e[0],e[1]);var i=getOutseaData(\"mapbox\");var a=i.boundsP16;for(var n=0;n<a.length;n++){var o=a[n];var f=geoUtil.isPointInPolygon(t,o[0]);if(f){return false}}return true};e.prototype.hV=function(e){var r=e.Ro;var t=[[r[0],r[1]],[r[2],r[1]],[r[2],r[3]],[r[0],r[3]]];return this.cV(t)};e.prototype.cV=function(e){var r=[];for(var t=0;t<e.length;t++){var i=e[t];var a=\"EPSG:3857\";var n=ProjectionManager.getProjection(a).unproject(i[0],i[1]);r.push(n)}var o=getOutseaData(\"mapbox\");var f=o.boundsP16;for(var s=0;s<f.length;s++){var u=f[s];var l=geoUtil[\"isRingInRingByMapboxB\"](r,u[0]);if(l){return true}}return false};e.id=\"mapbox\";return e}(LabelFormat);var Color$1=function(){function e(e){this.type=\"AMap.Color\";this.rgba=[];this.Vb(e)}r=e;e.Wb=function(e,r){return{rgba:e.rgba}};e.Gb=function(e){return new r(e.rgba)};e.FV=function(e,r){var t=this.DV(e[0],e[1],e[2],e[3]);var i=t[0];var a=t[1];var n=t[2];var o=t[3];var f=.35;n=n-(n-.5)*r*f;a=a-(a-.5)*r*f*5;i=i+(i>.5?-.5:.5)*r*f;var s=this.GQ(i,a,n,o);return s};e.DV=function(e,r,t,i){var a=Math.max(e,r,t),n=Math.min(e,r,t),o,f,s=(a+n)/2,u;if(a===n){o=f=0}else{u=a-n;f=s>.5?u/(2-a-n):u/(a+n);switch(a){case e:o=(r-t)/u+(r<t?6:0);break;case r:o=(t-e)/u+2;break;case t:o=(e-r)/u+4;break}o/=6}return[o,f,s,i]};e.uQ=function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e};e.GQ=function(e,r,t,i){var a,n,o;if(r===0){a=n=o=t}else{var f=t<.5?t*(1+r):t+r-t*r,s=2*t-f;a=this.uQ(s,f,e+1/3);n=this.uQ(s,f,e);o=this.uQ(s,f,e-1/3)}return[a,n,o,i]};e.Hb=function(e,r){if(r===void 0){r=[]}for(var t=0,i=e.length;t<i;t+=2){r[t/2]=parseInt(e.substr(t,2),16)}return r};e.Yx=function(e){if(e.startsWith(\"#\")){e=e.substr(1)}if(colorNames[e]){return r.Hb(colorNames[e].substr(1))}if(e.length===1){return r.Hb(e+e+e+e+e+e)}if(e.length===3){return r.Hb(e[0]+e[0]+e[1]+e[1]+e[2]+e[2])}if(e.length===6){return r.Hb(e)}return[0,0,0]};e.normalize=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r[t]=e[t]/255}return r};e.create=function(e){if(e){return new r(e)}else{return null}};e.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]};e.prototype.Vb=function(e){if(typeof e===\"string\"){if(colorNames[e]){this.Hb(colorNames[e].substr(1));return}if(e.length===0){return}if(e.startsWith(\"#\")){e=e.substr(1)}if(e.length===1){this.Hb(e+e+e+e+e+e);return}if(e.length===3){this.Hb(e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);return}if(e.length===6){this.Hb(e);return}if(e.length===8){this.$b(e);return}if(e.startsWith(\"rgba(\")){this.Yb(colorNames[e].substr(1));return}if(e.startsWith(\"rgb(\")){this.Kb(colorNames[e].substr(1));return}}else if(e instanceof Array){this.rgba[0]=e[0];this.rgba[1]=e[1];this.rgba[2]=e[2];this.rgba[3]=e[3]||255}};e.prototype.Hb=function(e){this.$b(e+\"FF\")};e.prototype.$b=function(e){for(var r=0,t=e.length;r<t;r+=2){this.rgba[r/2]=parseInt(e.substr(r,2),16)}};e.prototype.Kb=function(e){var r=e.split(\",\");this.rgba[0]=parseInt(r[0].substr(4),10);this.rgba[1]=parseInt(r[1],10);this.rgba[2]=parseInt(r[2],10);this.rgba[3]=255};e.prototype.Yb=function(e){var r=e.split(\",\");this.rgba[0]=parseInt(r[0].substr(5),10);this.rgba[1]=parseInt(r[1],10);this.rgba[2]=parseInt(r[2],10);this.rgba[3]=parseFloat(r[3])*255<<0};var r;e=r=__decorate([InnerClass(\"Color\")],e);return e}();var colorNames={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgrey:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370d8\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#d87093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"};var NebulaLabelFormat$1=function(t){__extends(e,t);function e(e){var r=t.call(this)||this;r.bt=20;r.WW=20;r._opts={};r.uA={};r.vn=e.vn;return r}e.prototype.Ns=function(e,r){if(r.lang){this.lang=r.lang}this._opts=r;this.bt=r.zoom;this.WW=r.ZL;return this.rV(e,r.R_)};e.prototype.rV=function(e,r){var t=e.data||{};var i=t.poilabel||[];var a={};var n=e.cQ;for(var o in i){if(i.hasOwnProperty(o)){var f=this.nV(i[o],{aV:e.zo.z<10,cQ:n,R_:r});a[o]=f}}var s=t.roadName||[];var u=this.oV(s,{R_:r});a.eA=u;return a};e.prototype.nV=function(e,r){if(r===void 0){r={}}var t=CONSTS.Lj,i=t.file,a=t.size;var n=CONSTS.Mp,o=CONSTS.Rp,f=CONSTS.Pp,s=CONSTS.jp;var u=this._opts.scale;var l=r.aV,v=r.cQ;var c=this.bt;var h=[];var d=\"https\";var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w;var k;var T;var I;var A;var $;var F;var P;var L;var R;var E;var O;var D;var U;var N;var B;var H;var z=this.lang;var G=!v&&c>=5;for(var j=0,V=e;j<V.length;j++){var W=V[j];_=W.cw;g=W.ew;y=W.pos;H=labelsUtil$2.tQ(W,z,G?r.R_:undefined);m=H.name;B=H.$G||[];p=W.rank;b=W.minzoom||n;x=l?zoomRange[1]:W.maxzoom||o;C=W.Fp;S=W.Ep;if(b===3){b=2}if(C===10002&&S===28){continue}M=this.oA(C,S,this.WW);if(!M){continue}w=u>1||M.fontSize>9?M.fontSize:9;A=M.sn;$=M.Qe;F=M.forceShow;P=M.zIndex;L=M.zooms;R=labelsUtil$2.Jj([b,zoomRange[1]],L);if(!R){continue}R=labelsUtil$2.$p(R);var q=R[0];var Z=[];var Y={};while(q<=R[1]){var K=this.vn.dn(C,S,q);if(K&&K.iconID!==\"0\"){var X=K.iconID;if(Z.indexOf(X)===-1){Z.push(X);Y[X]=[]}Y[X].push(q)}q++}if((C!==10002||S!==20&&S!==18)&&w>16){w=15}var J=[R[0]-f,R[1]+s];if(C===10002&&(S===13||S===18)&&J[0]<=3){J[0]=2.5}E=A&&d+i[A];O={data:{id:_?_+S:\"\",position:y,name:m,txt:m,rank:p,BG:H.type,extData:{Lp:C,Ap:S,id:_,type:\"poi\",bz:g}},opts:{type:\"billboard\",angle:0,forceShow:F,zIndex:P,visible:true,zooms:J}};D=M.nn||0;U=M.an||0;var Q=[];var ee=void 0;var re=[0,0];var te=void 0;for(var ie=0;ie<Z.length;ie++){var X=Z[ie];var ae=A&&this.aA(parseInt(X,10));var ne=[0,0];var oe=a;var fe=labelsUtil$2.$p(Y[X]);var se=1;if(m&&(X===\"152\"||X===\"153\"||X===\"154\")){se=m.length<=2?1:m.length/2}te=vector$3.Up(oe,2);if(E){Q.push({type:\"image\",image:E,clipOrigin:vector$3.add(ae,ne),clipSize:oe,size:[te[0]*se,te[1]],anchor:[10-D*20/24,10-U*20/24],angle:0,_2:true,zooms:[fe[0]-f,fe[fe.length-1]+s]})}}if(m){if(m===\"曾母暗沙\"){ee=\"top\";re=[0,5]}else if(Q.length&&Q[0].image){var X=Z[0];if(v){ee=\"bottom\";re=[0,0]}if(m===\"北京\"){ee=\"top\";re=[0,3]}else if(m===\"澳门\"){ee=\"left\";re=[0,-2]}else if(m===\"合肥\"){ee=\"bottom\";re=[0,-3]}else if(m===\"太原\"){ee=\"bottom\";re=[0,-3]}else if(m===\"西安\"){ee=\"bottom\";re=[0,-3]}else if(m===\"郑州\"){ee=\"bottom\";re=[0,-3]}else if(m===\"杭州\"){ee=\"bottom\";re=[0,-3]}else if(m===\"台北\"){ee=\"bottom\";re=[0,-3]}else if(m===\"加德满都\"){ee=\"bottom\";re=[0,-3]}else if(C===10002&&(S===31||S===32||S===34||S===5)){ee=\"right\";re=[-3,-3]}else if($===1){ee=\"right\";re=[0,-2]}else if(X===\"152\"||X===\"153\"||X===\"154\"){ee=\"center\";re=[0,-1]}else{ee=\"right\";re=[0,-2]}}else{ee=\"center\";re=[D,U]}}var ue=\"\"+C+S;var le=this.uA[ue];if(le){k=le.faceColor;T=le.borderColor;I=le.holoColor}else{k=M.faceColor&&Color$1.normalize(M.faceColor.rgba);T=M.borderColor&&Color$1.normalize(M.borderColor.rgba);I=M.Qe===3?M.holoColor&&Color$1.normalize(M.holoColor.rgba):null;this.uA[ue]={faceColor:k,borderColor:T,holoColor:I}}N=m?{direction:ee,offset:re,$G:B,style:{fontSize:w,strokeWidth:2,padding:[0,1,0,1],fold:!v&&c>=5}}:{};if(O.opts){O.opts.icon=Q;O.opts.text=N}if(E){this.Fs[E]=1}if(m){this.Ws(m,B)}h.push(O);M=null}return h};e.prototype.oV=function(e,r){if(r===void 0){r={}}var t=CONSTS.Lj,i=t.file,a=t.size;var n=CONSTS.Mp,o=CONSTS.Rp,f=CONSTS.Pp,s=CONSTS.jp;var u=[];var l=this._opts.scale;var v=this.lang;var c=r&&r.R_&&r.R_[\"protocol\"]||\"https\";var h;var d;var _;var g;var y;var m;var p;var b;for(var x=0,C=e;x<C.length;x++){var S=C[x];_=S.path;g=S.rank;y=S.minzoom||n;m=S.maxzoom||o;p=S.shield;b=S.shieldType;var M=labelsUtil$2.tQ(S,v);h=M.name;d=M.$G;if(h){this.Ws(h,d)}if(!p){continue}var w=Math.floor(_.length/2);if(w<1){continue}var k=[_[w-1],_[w]];var T=40001;var I=b;var A=this.oA(T,I,this.WW);if(!A){continue}var $=l>1||A.fontSize>9?A.fontSize:9;var F=A.faceColor;var P=A.iconID;var L={data:{id:Util$3.stamp(this),position:k,positionType:\"relative\",name:h,txt:p,rank:g,BG:M.type,extData:{type:\"shield\",Lp:T,Ap:I}},opts:{type:\"billboard\",angle:0,zooms:[y-f,m+s],visible:true}};var R=[0,0];var E=\"center\";var O=this.aA(parseInt(P,10));var D=p.length/4>1?p.length/4:1;D=l>1?D:D*9/7;var U=c+i[\"0\"];var N={type:\"image\",image:U,clipOrigin:O,clipSize:a,size:[24*D,24],anchor:\"center\",angle:0,_2:true};var B=p?{direction:E,offset:R,style:{fontSize:$,fillColor:F&&Color$1.normalize(F.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{};if(L.opts){L.opts.text=B;L.opts.icon=[N]}if(p){this.Ws(p)}u.push(L)}return u};e.prototype.DQ=function(e,r){var t;var i=CONSTS.Mp,a=CONSTS.Rp,n=CONSTS.Pp,o=CONSTS.jp;var f=this.WW=r.zoom;var s;var u;var l;var v;var c=0;var h;var d;var _;var g;var y;var m;var p;var b;var x;var C;var S;var M;var w=[];var k=this.lang;var T;for(var I=0,A=e;I<A.length;I++){var $=A[I];T=$.id;_=labelsUtil$2.tQ($,k);s=_.name;g=_.$G||[];if(!s){continue}y=_.type;m=labelsUtil$2.EQ(s,g);p=labelsUtil$2.aQ(m);u=$.rank;l=$.Fp;v=$.Ep;c=$.distance||0;h=$.minzoom||i;d=$.maxzoom||a;b=this.vn.dn(l,v,f);x=b&&b[1]||{};C=x.fontSize;S=x.faceColor;M=x.borderColor;t=labelsUtil$2.$p([h,d]),h=t[0],d=t[1];d=d>=20?zoomRange[1]:d;if(s&&T&&C&&S){var F={id:T,positionType:\"relative\",name:s,$G:g,CO:p,rank:u,BG:y,distance:c,zooms:[h-n,d+o],path:$.path.length>0?$.path:undefined,style:{fontSize:C,fillColor:vector$3.Up(S.rgba,255),strokeColor:M&&vector$3.Up(M.rgba,255)},extData:{mainkey:l,subkey:v}};w.push(F)}}return w};e.prototype.aA=function(e){var r=CONSTS.Lj,t=r.Rj,i=t,a=r.size;var n=Math.floor(e/i);if(e%10===0){n=n-1}var o=e-i*n-1;var f=[o*a[0],n*a[1]];return f};e.prototype.oA=function(e,r,t){var i=[3,20];var a=this.vn.dn(e,r,t);var n=this.vn.mn(e,r);if(!a){var o=1;while(t-o>=i[0]||t+o<=i[1]){a=this.vn.dn(e,r,t-o);if(!a){a=this.vn.dn(e,r,t+o)}if(a){break}else{o++}}}if(a){a.zooms=n}return a};e.prototype.mN=function(e,r){var t=[0,0];if(e===\"0\"){switch(r){case\"3\":{t=[6,6];break}case\"4\":case\"5\":case\"6\":{t=[9,9];break}}}return t};e.prototype.TN=function(e,r,t){if(t===void 0){t=[0,0]}var i=t;if(e===\"0\"){switch(r){case\"3\":{i=[30,30];break}case\"4\":case\"5\":case\"6\":{i=[20,20];break}}}return i};e.id=StaticSourceID.nebulaLabel;return e}(LabelFormat);function quickselect(e,r,t,i,a){quickselectStep(e,r,t||0,i||e.length-1,a||defaultCompare)}function quickselectStep(e,r,t,i,a){while(i>t){if(i-t>600){var n=i-t+1;var o=r-t+1;var f=Math.log(n);var s=.5*Math.exp(2*f/3);var u=.5*Math.sqrt(f*s*(n-s)/n)*(o-n/2<0?-1:1);var l=Math.max(t,Math.floor(r-o*s/n+u));var v=Math.min(i,Math.floor(r+(n-o)*s/n+u));quickselectStep(e,r,l,v,a)}var c=e[r];var h=t;var d=i;swap(e,t,r);if(a(e[i],c)>0)swap(e,t,i);while(h<d){swap(e,h,d);h++;d--;while(a(e[h],c)<0)h++;while(a(e[d],c)>0)d--}if(a(e[t],c)===0)swap(e,t,d);else{d++;swap(e,d,i)}if(d<=r)t=d+1;if(r<=d)i=d-1}}function swap(e,r,t){var i=e[r];e[r]=e[t];e[t]=i}function defaultCompare(e,r){return e<r?-1:e>r?1:0}var quickselect$1=Object.freeze({__proto__:null,default:quickselect});var quickselect$2=getCjsExportFromNamespace(quickselect$1);var _rbush_2_0_2_rbush=rbush$1;var default_1=rbush$1;function rbush$1(e,r){if(!(this instanceof rbush$1))return new rbush$1(e,r);this.Bc=Math.max(4,e||9);this.Wc=Math.max(2,Math.ceil(this.Bc*.4));if(r){this.Gc(r)}this.clear()}rbush$1.prototype={all:function(){return this.qc(this.data,[])},search:function(e){var r=this.data,t=[],i=this.Yc;if(!intersects(e,r))return t;var a=[],n,o,f,s;while(r){for(n=0,o=r.children.length;n<o;n++){f=r.children[n];s=r.Zc?i(f):f;if(intersects(e,s)){if(r.Zc)t.push(f);else if(contains(e,s))this.qc(f,t);else a.push(f)}}r=a.pop()}return t},Vc:function(e){var r=this.data,t=this.Yc;if(!intersects(e,r))return false;var i=[],a,n,o,f;while(r){for(a=0,n=r.children.length;a<n;a++){o=r.children[a];f=r.Zc?t(o):o;if(intersects(e,f)){if(r.Zc||contains(e,f))return true;i.push(o)}}r=i.pop()}return false},load:function(e){if(!(e&&e.length))return this;if(e.length<this.Wc){for(var r=0,t=e.length;r<t;r++){this.Xc(e[r])}return this}var i=this.Hc(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=i}else if(this.data.height===i.height){this.Jc(this.data,i)}else{if(this.data.height<i.height){var a=this.data;this.data=i;i=a}this.Kc(i,this.data.height-i.height-1,true)}return this},Xc:function(e){if(e)this.Kc(e,this.data.height-1);return this},clear:function(){this.data=createNode([]);return this},remove:function(e,r){if(!e)return this;var t=this.data,i=this.Yc(e),a=[],n=[],o,f,s,u;while(t||a.length){if(!t){t=a.pop();f=a[a.length-1];o=n.pop();u=true}if(t.Zc){s=findItem(e,t.children,r);if(s!==-1){t.children.splice(s,1);a.push(t);this.Qc(a);return this}}if(!u&&!t.Zc&&contains(t,i)){a.push(t);n.push(o);o=0;f=t;t=t.children[0]}else if(f){o++;t=f.children[o];u=false}else t=null}return this},Yc:function(e){return e},tf:compareNodeMinX,if:compareNodeMinY,toJSON:function(){return this.data},ef:function(e){this.data=e;return this},qc:function(e,r){var t=[];while(e){if(e.Zc)r.push.apply(r,e.children);else t.push.apply(t,e.children);e=t.pop()}return r},Hc:function(e,r,t,i){var a=t-r+1,n=this.Bc,o;if(a<=n){o=createNode(e.slice(r,t+1));calcBBox(o,this.Yc);return o}if(!i){i=Math.ceil(Math.log(a)/Math.log(n));n=Math.ceil(a/Math.pow(n,i-1))}o=createNode([]);o.Zc=false;o.height=i;var f=Math.ceil(a/n),s=f*Math.ceil(Math.sqrt(n)),u,l,v,c;multiSelect(e,r,t,s,this.tf);for(u=r;u<=t;u+=s){v=Math.min(u+s-1,t);multiSelect(e,u,v,f,this.if);for(l=u;l<=v;l+=f){c=Math.min(l+f-1,v);o.children.push(this.Hc(e,l,c,i-1))}}calcBBox(o,this.Yc);return o},nf:function(e,r,t,i){var a,n,o,f,s,u,l,v;while(true){i.push(r);if(r.Zc||i.length-1===t)break;l=v=Infinity;for(a=0,n=r.children.length;a<n;a++){o=r.children[a];s=bboxArea(o);u=enlargedArea(e,o)-s;if(u<v){v=u;l=s<l?s:l;f=o}else if(u===v){if(s<l){l=s;f=o}}}r=f||r.children[0]}return r},Kc:function(e,r,t){var i=this.Yc,a=t?e:i(e),n=[];var o=this.nf(a,this.data,r,n);o.children.push(e);extend$1(o,a);while(r>=0){if(n[r].children.length>this.Bc){this.af(n,r);r--}else break}this.sf(a,n,r)},af:function(e,r){var t=e[r],i=t.children.length,a=this.Wc;this.rf(t,a,i);var n=this.hf(t,a,i);var o=createNode(t.children.splice(n,t.children.length-n));o.height=t.height;o.Zc=t.Zc;calcBBox(t,this.Yc);calcBBox(o,this.Yc);if(r)e[r-1].children.push(o);else this.Jc(t,o)},Jc:function(e,r){this.data=createNode([e,r]);this.data.height=e.height+1;this.data.Zc=false;calcBBox(this.data,this.Yc)},hf:function(e,r,t){var i,a,n,o,f,s,u,l;s=u=Infinity;for(i=r;i<=t-r;i++){a=distBBox(e,0,i,this.Yc);n=distBBox(e,i,t,this.Yc);o=intersectionArea(a,n);f=bboxArea(a)+bboxArea(n);if(o<s){s=o;l=i;u=f<u?f:u}else if(o===s){if(f<u){u=f;l=i}}}return l},rf:function(e,r,t){var i=e.Zc?this.tf:compareNodeMinX,a=e.Zc?this.if:compareNodeMinY,n=this.lf(e,r,t,i),o=this.lf(e,r,t,a);if(n<o)e.children.sort(i)},lf:function(e,r,t,i){e.children.sort(i);var a=this.Yc,n=distBBox(e,0,r,a),o=distBBox(e,t-r,t,a),f=bboxMargin(n)+bboxMargin(o),s,u;for(s=r;s<t-r;s++){u=e.children[s];extend$1(n,e.Zc?a(u):u);f+=bboxMargin(n)}for(s=t-r-1;s>=r;s--){u=e.children[s];extend$1(o,e.Zc?a(u):u);f+=bboxMargin(o)}return f},sf:function(e,r,t){for(var i=t;i>=0;i--){extend$1(r[i],e)}},Qc:function(e){for(var r=e.length-1,t;r>=0;r--){if(e[r].children.length===0){if(r>0){t=e[r-1].children;t.splice(t.indexOf(e[r]),1)}else this.clear()}else calcBBox(e[r],this.Yc)}},Gc:function(e){var r=[\"return a\",\" - b\",\";\"];this.tf=new Function(\"a\",\"b\",r.join(e[0]));this.if=new Function(\"a\",\"b\",r.join(e[1]));this.Yc=new Function(\"a\",\"return {minX: a\"+e[0]+\", minY: a\"+e[1]+\", maxX: a\"+e[2]+\", maxY: a\"+e[3]+\"};\")}};function findItem(e,r,t){if(!t)return r.indexOf(e);for(var i=0;i<r.length;i++){if(t(e,r[i]))return i}return-1}function calcBBox(e,r){distBBox(e,0,e.children.length,r,e)}function distBBox(e,r,t,i,a){if(!a)a=createNode(null);a.ja=Infinity;a.Fa=Infinity;a.Oa=-Infinity;a.Ea=-Infinity;for(var n=r,o;n<t;n++){o=e.children[n];extend$1(a,e.Zc?i(o):o)}return a}function extend$1(e,r){e.ja=Math.min(e.ja,r.ja);e.Fa=Math.min(e.Fa,r.Fa);e.Oa=Math.max(e.Oa,r.Oa);e.Ea=Math.max(e.Ea,r.Ea);return e}function compareNodeMinX(e,r){return e.ja-r.ja}function compareNodeMinY(e,r){return e.Fa-r.Fa}function bboxArea(e){return(e.Oa-e.ja)*(e.Ea-e.Fa)}function bboxMargin(e){return e.Oa-e.ja+(e.Ea-e.Fa)}function enlargedArea(e,r){return(Math.max(r.Oa,e.Oa)-Math.min(r.ja,e.ja))*(Math.max(r.Ea,e.Ea)-Math.min(r.Fa,e.Fa))}function intersectionArea(e,r){var t=Math.max(e.ja,r.ja),i=Math.max(e.Fa,r.Fa),a=Math.min(e.Oa,r.Oa),n=Math.min(e.Ea,r.Ea);return Math.max(0,a-t)*Math.max(0,n-i)}function contains(e,r){return e.ja<=r.ja&&e.Fa<=r.Fa&&r.Oa<=e.Oa&&r.Ea<=e.Ea}function intersects(e,r){return r.ja<=e.Oa&&r.Fa<=e.Ea&&r.Oa>=e.ja&&r.Ea>=e.Fa}function createNode(e){return{children:e,height:1,Zc:true,ja:Infinity,Fa:Infinity,Oa:-Infinity,Ea:-Infinity}}function multiSelect(e,r,t,i,a){var n=[r,t],o;while(n.length){t=n.pop();r=n.pop();if(t-r<=i)continue;o=r+Math.ceil((t-r)/i/2)*i;quickselect$2(e,o,r,t,a);n.push(r,o,o,t)}}_rbush_2_0_2_rbush.default=default_1;var Status;(function(e){e[\"loading\"]=\"loading\";e[\"loaded\"]=\"loaded\"})(Status||(Status={}));var M$1;M$1=getModule();function getModule(){if(!M$1){M$1={nS:function(clsName,clsText){try{eval(clsText)}catch(e){throw e}},eS:{iS:\"__detaiVersion__\",BY:Browser.DW?false:config[13]}}}return M$1}var Module=getModule();function InnerClass(r){return function(e){getModule()[r]=e}}getModule()[\"MapboxLabelFormat\"]=MapboxLabelFormat$1;getModule()[\"NebulaLabelFormat\"]=NebulaLabelFormat$1;getModule()[\"_LocalZoom\"]={Ra:13,za:12,Ge:\"\"};getModule()[\"Support\"]=Browser;getModule()[\"geo\"]={lcs:lcs$2,ProjectionManager:ProjectionManager};getModule()[\"transform\"]=transform;getModule()[\"Util\"]=Util$3;getModule()[\"TileState\"]=TileState$1;getModule()[\"assign\"]=assign;getModule()[\"labelsUtil\"]=labelsUtil$2;getModule()[\"LabelsRenderUtil\"]=LabelsRenderUtil$3;getModule()[\"vector\"]=vector$3;getModule()[\"rbush\"]=_rbush_2_0_2_rbush;getModule()[\"lodash\"]={map:map,find:find,assign:assign,every:every,some:some};var TileState$1;(function(e){e[\"TOLOAD\"]=\"toload\";e[\"LOADING\"]=\"loading\";e[\"LOADED\"]=\"loaded\";e[\"UNLOADED\"]=\"unloaded\";e[\"ERROR\"]=\"error\";e[\"RELOADING\"]=\"reloading\"})(TileState$1||(TileState$1={}));var TileCoord=function(){function e(e,r,t){this.x=r;this.y=t;this.z=e;this.key=e+\",\"+r+\",\"+t}a=e;e.prototype.s0=function(e){var r=e-this.z;var t=Math.floor(Math.pow(2,r)*this.x);var i=Math.floor(Math.pow(2,r)*this.y);return new a(e,t,i)};var a;e=a=__decorate([InnerClass(\"TileCoord\")],e);return e}();var Tile=function(){function e(e){this.type=\"tile\";this.Ro=[0,0,0,0];this.stamp=0;this.zo=e;this.status=TileState$1.TOLOAD;this._v=null;this.data={}}e.YH=function(e){return e.status===TileState$1.LOADED||e.status===TileState$1.RELOADING};e.prototype.destroy=function(){assert(true,\"Tile should not implement destroy\")};e.prototype.nG=function(e){this.type=e};e=__decorate([InnerClass(\"Tile\")],e);return e}();var NebulaTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type=\"nebula\";e.region=\"world\";e.aN=NebulaTagType.NONE;e.BN=NebulaTagType.NONE;return e}Object.defineProperty(e.prototype,\"tag\",{get:function(){return this.nN},set:function(e){this.aN=this.tag;this.nN=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,\"gB\",{get:function(){return this.VN},set:function(e){this.BN=this.gB;this.VN=e},enumerable:false,configurable:true});Object.defineProperty(e.prototype,\"data\",{get:function(){var e=[];if(this.qc&&this.qc.Dc){e.push(this.qc)}else{if(this.sN){e.push(this.sN)}if(this.uN){e.push(this.uN)}}if(this.lU&&this.lU.Dc){e.push(this.lU)}else{if(this.fU){e.push(this.fU)}if(this.cU){e.push(this.cU)}}if(this.zN&&this.zN.labels){e.push(this.zN)}else{if(this.HN){e.push(this.HN)}if(this.WN){e.push(this.WN)}}if(this.dU&&this.dU.labels){e.push(this.dU)}else{if(this.vU){e.push(this.vU)}if(this.gU){e.push(this.gU)}}return e},set:function(e){},enumerable:false,configurable:true});e.prototype.xa=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.uN=__assign(__assign({},this.uN),e);break}case NebulaTagType.LEFT:{this.sN=__assign(__assign({},this.sN),e);break}case NebulaTagType.ALL:default:{this.qc=__assign(__assign({},this.qc),e)}}};e.prototype.JE=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.cU=__assign(__assign({},this.cU),e);break}case NebulaTagType.LEFT:{this.fU=__assign(__assign({},this.fU),e);break}case NebulaTagType.ALL:default:{this.lU=__assign(__assign({},this.lU),e)}}};e.prototype.rO=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.WN=__assign(__assign({},this.WN),e);break}case NebulaTagType.LEFT:{this.HN=__assign(__assign({},this.HN),e);break}case NebulaTagType.ALL:default:{this.zN=__assign(__assign({},this.zN),e)}}};e.prototype.qE=function(e,r){if(r===void 0){r=NebulaTagType.ALL}if(!Object.keys(e)){return}switch(r){case NebulaTagType.LITE:{this.gU=__assign(__assign({},this.gU),e);break}case NebulaTagType.LEFT:{this.vU=__assign(__assign({},this.vU),e);break}case NebulaTagType.ALL:default:{this.dU=__assign(__assign({},this.dU),e)}}};e.prototype.ID=function(e){if(e){if(e.uN){this.uN=e.uN}if(e.sN){this.sN=e.sN}if(e.qc){this.qc=e.qc}if(e.WN){this.WN=e.WN}if(e.HN){this.HN=e.HN}if(e.zN){this.zN=e.zN}}};e.prototype.rN=function(){if(this.aN){this.nN=this.aN}else{this.nN=NebulaTagType.NONE}if(this.BN){this.VN=this.BN;this.nN=NebulaTagType.NONE}};e.prototype.AB=function(){var e=[];if(this.qc&&this.qc.road&&this.zN&&this.zN.labels){e.push(this.qc)}else{if(this.sN&&this.sN.road&&this.HN&&this.HN.labels){e.push(this.sN)}if(this.uN&&this.uN.road&&this.WN&&this.WN.labels){e.push(this.uN)}}return e};e.prototype.LY=function(e,r){var t=this.data;for(var i=0,a=t;i<a.length;i++){var n=a[i];if(n.Dc){n.Dc.upload(e,true)}if(n.$c){n.$c.upload(e,true)}if(n.A_){n.A_.upload(e,true)}if(n.FD){n.FD.upload(e,true)}}};e.prototype.destroy=function(){var e=this.data;if(!e){return}for(var r=0,t=e;r<t.length;r++){var i=t[r];if(i.Dc){i.Dc.destroy();delete i.Dc}if(i.$c){i.$c.destroy();delete i.$c}if(i.labels){for(var a=0,n=i.labels;a<n.length;a++){var o=n[a];o.destroy()}delete i.labels}i.Ta=false;delete i.gf}};e.prototype.KE=function(e){var r=this.data;var t;var i=[];for(var a=0,n=e;a<n.length;a++){var o=n[a];if(o.road){i.push(o.road)}}for(var f=0,s=r;f<s.length;f++){var o=s[f];if(o.XE){t=o.XE;this.pU(i,t)}}};e.prototype.reload=function(){delete this.lU;delete this.cU;delete this.fU;delete this.zN;delete this.WN;delete this.HN;delete this.VN;this.BN=NebulaTagType.NONE};e.prototype.pU=function(e,r){for(var t=0,i=r;t<i.length;t++){var a=i[t];var n=a.id;if(!a.path){for(var o=0,f=e;o<f.length;o++){var s=f[o];a.path=this.yU(s,n)}}else{break}}};e.prototype.yU=function(e,r){for(var t=0,i=e;t<i.length;t++){var a=i[t];if(a.id===r){return a.path}}};e.prototype.oN=function(){var e=false;var r=this.qc;var t=Object.keys(r||{});if(!t.length){e=false}else if(t.length===1&&t[0]===\"sdfLoaded\"){e=false}else{e=true}return e};e=__decorate([InnerClass(\"NebulaTile\")],e);return e}(Tile);var RasterTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type=\"raster\";return e}e.prototype.destroy=function(){var e=this.data;if(!e){return}if(e.texture){e.texture.destroy();delete e.texture}if(e.zs){e.zs.context.deleteBuffer(e.zs);delete e.zs}if(e.Js){e.Js.destroy();delete e.Js}};return e}(Tile);var VectorTile=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.type=\"vector\";return e}e.prototype.destroy=function(){var e=this.data;if(!e){return}if(e.$c){e.$c.destroy();delete e.$c}if(e.Uc){delete e.Uc}};e=__decorate([InnerClass(\"VectorTile\")],e);return e}(Tile);var Support$3=M[\"Support\"];var scale$2=Support$3.scale;var MapboxVTRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){this.o2=e;var a=t.viewState.optimalZoom;if(a<i.zooms[0]||a>i.zooms[1]){return}if(i.ce){e.context.clear({depth:true})}var n=r.tiles;n.sort(function(e,r){return r.zo.z-e.zo.z});var o=i.layer[\"getLabelsLayer\"]();var f=n.every(function(e){return o.Ho.indexOf(e.zo.key)>-1});if(!f){o.Ho=[];o[\"remove\"](o[\"getAllOverlays\"]())}if(n&&n.length){e.context.clear({stencil:true});for(var s=0,u=n;s<u.length;s++){var l=u[s];if(l.status!==TileState$1.LOADED){continue}if(!f){this.z2(o,l.data.labels,l)}this.lH(e,l,t,1);this.Lc(e,l,t,i);this.Ac(e,l,t,i);this.Ic(e,l,t,i);this.Cb(e,l,t,i);this.lH(e,l,t,2)}for(var v=0,c=n;v<c.length;v++){var l=c[v];if(l.status!==TileState$1.LOADED){continue}this.S_(e,l,t,i,true)}for(var h=0,d=n;h<d.length;h++){var l=d[h];if(l.status!==TileState$1.LOADED){continue}this.S_(e,l,t,i)}}var _=t.map.getMask();this.PB(e,t,i,_)};e.prototype.pickRender=function(e,r,t){var i=this.o2;if(!i){return}var a=i.context;var n=i.context.gl;var o=e.size[0]*scale$2;var f=e.size[1]*scale$2;var s=e.viewState.bounds.toString();var u=false;if(!this.G2){this.G2=this.IC(n,o,f,s);u=true}else if(o!==this.G2.w||f!==this.G2.h){this.j2(this.G2,n,o,f,s);u=true}else if(s!==this.G2.bounds){this.G2.bounds=s;u=true}if(u){a.bindFramebuffer.set(this.G2);a.be.set([0,0,o,f]);a.clear({color:true,stencil:true,depth:true});for(var l=0,v=t;l<v.length;l++){var c=v[l];if(c.status!==TileState$1.LOADED){continue}this.S_(i,c,e,r,false,true)}a.bindFramebuffer.set(null);a.setDirty()}return this.G2};e.prototype.destroy=function(){this[\"clearPickFbo\"]()};e.prototype[\"clearPickFbo\"]=function(){if(this.G2&&this.o2){var e=this.o2.context.gl;e.deleteTexture(this.G2.texture);e.deleteRenderbuffer(this.G2.AC);e.deleteFramebuffer(this.G2);delete this.G2}};e.prototype.Lc=function(e,r,t,i){var a=e.Wn();var n=r.data;var o=n.Dc;if(!o){return}o.upload(a.context,true);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=i.opacity;var v=[r.Sa[0],r.Sa[1]];var c=1;if(t.viewState.viewMode===\"3D\"){c=t.map.getView().EF()}var h=r.zo.z;if(h<LocalZoom){var d=r.localCoord.center;v[0]+=d[0];v[1]+=d[1]}for(var _=0,g=u.jc;_<g.length;_++){var y=g[_];var m=y.mainkey.split(\":\")[0];m=m.split(\",\");m[3]*=l;var p={u_matrix:t.viewState.mvpMatrix,u_color:m,u_offset:[0,0],u_localDeltaCenter:v,u_viewHeight:t.viewState.size[1],u_skyHeight:c};if(p){a.context.getExtension(\"OES_element_index_uint\");a.Ce(p,{a_pos:{type:\"vec2\",Re:f.size,offset:0,buffer:f}},y.length,s,\"TRIANGLES\",i.depthTest,ColorMode.Si,StencilMode.b2,undefined,y.offset)}}};e.prototype.Ac=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,\"MapboxVT tile have no data\");return}var n=r.data;var o=n.pX;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Fc;if(!u){return}var l=u.jc;var v=[r.Sa[0],r.Sa[1]];var c=r.zo.z;if(c<LocalZoom){var h=r.localCoord.center;v[0]+=h[0];v[1]+=h[1]}var d=i.opacity;var _=1;if(t.viewState.viewMode===\"3D\"){_=t.map.getView().EF()}for(var g=0,y=l.length;g<y;g++){var m=l[g];var p=m.mainkey.split(\":\");var b=p[0].split(\",\");b[3]*=d;var x=p[1].split(\",\");var C=+p[2];var S={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_color:b,u_border:0,u_width:C,u_dash:x,u_localDeltaCenter:v,u_skyHeight:_,u_viewHeight:t.viewState.size[1]};var M=f.size;a.context.getExtension(\"OES_element_index_uint\");a.Ce(S,{a_pos:{type:\"vec2\",buffer:f,Re:M,offset:4*0},a_normal:{type:\"vec2\",buffer:f,Re:M,offset:4*2},a_distance:{type:\"float\",buffer:f,Re:M,offset:4*4},a_dir:{type:\"vec2\",buffer:f,Re:M,offset:4*5}},m.length,s,\"TRIANGLES\",i.depthTest,ColorMode.Si,StencilMode.b2,undefined,m.offset)}};e.prototype.S_=function(e,r,t,i,a,n){if(a===void 0){a=false}if(n===void 0){n=false}var o=r.data;var f=o.A_;if(!f){return}f.upload(e.context,true);var s=t.map;var u=s.getView();var l=t.viewState.size;var v=1;if(t.viewState.viewMode===\"3D\"){v=u.EF()}else{return}var c=u.X(l[0]/2,u.Uu()+5);var h=u.X(l[0]/2,u.Uu()-5);var d=u.pz().getPosition();var _=c[0]-d[0];var g=c[1]-d[1];var y=h[0]-d[0];var m=h[1]-d[1];var p=[Math.sqrt(_*_+g*g),Math.sqrt(y*y+m*m)];var b=[r.Sa[0],r.Sa[1]];var x=r.zo.z;if(x<LocalZoom){var C=r.localCoord.center;b[0]+=C[0];b[1]+=C[1]}var S=f.zs;var M=o.E0;for(var w=0,k=M.jc;w<k.length;w++){var T=k[w];var I=T.roofColor;var A=T.wallColor;var $=!!T.bz;if(!$&&(!I||!A)){continue}var F=void 0;if(n){F=i.layer.colorPick.find(T.mainkey);if(!F){F=i.layer.colorPick.add(T.mainkey)}}if(n&&!F){continue}if($&&!n){var P=getFillExtPatternUniformValues(t,T,b,i,{wallColor:A,roofColor:I},v,p);if(P){var L=s.getImage(P.u_image);if(L){P.u_image=L;P.u_imageSize=L.size;var R=e.sH();R.Ce(P,{a_pos:{type:\"vec4\",Re:S.size,offset:0,buffer:S},a_normal:{type:\"vec3\",Re:S.size,offset:4*4,buffer:S},a_textureCoord:{type:\"vec2\",Re:S.size,offset:4*7,buffer:S}},T.length,undefined,\"TRIANGLES\",true,a?ColorMode.disabled:ColorMode.Si,a?StencilMode.disable:StencilMode.S2,CullFaceMode.back,T.offset)}else if(P.u_image&&s.I_&&!s.I_.MH(P.u_image)){s.addImage(P.u_image,{url:P.u_image,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return s.setNeedUpdate(true)}})}}}else{var P=getFillExtUniformValues(t,T,b,i,{wallColor:n?F:A,roofColor:n?F:I},v,p);if(P){P[\"u_isPick\"]=n;var R=e.k_();R.Ce(P,{a_pos:{type:\"vec4\",Re:S.size,offset:0,buffer:S},a_normal:{type:\"vec3\",Re:S.size,offset:4*4,buffer:S}},T.length,undefined,\"TRIANGLES\",true,a?ColorMode.disabled:ColorMode.Si,a?StencilMode.disable:StencilMode.S2,CullFaceMode.back,T.offset)}}}};e.prototype.Ic=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,\"MapboxVT tile have no data\");return}var n=r.data;var o=n.$c;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Uc;if(!u){return}var l=u.jc;var v=[r.Sa[0],r.Sa[1]];var c=r.zo.z;if(c<LocalZoom){var h=r.localCoord.center;v[0]+=h[0];v[1]+=h[1]}var d=i.opacity;var _=1;if(t.viewState.viewMode===\"3D\"){_=t.map.getView().EF()}for(var g=0,y=l.length;g<y;g++){var m=l[g];var p=m.mainkey.split(\":\"),b=p[0],x=p[1],C=p[2];b=b.split(\",\");b[3]*=d;C=C.split(\",\");x=+x;var S={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_color:b,u_border:0,u_width:x,u_dash:C,u_localDeltaCenter:v,u_skyHeight:_,u_viewHeight:t.viewState.size[1]};var M=f.size;a.context.getExtension(\"OES_element_index_uint\");a.Ce(S,{a_pos:{type:\"vec2\",buffer:f,Re:M,offset:4*0},a_normal:{type:\"vec2\",buffer:f,Re:M,offset:4*2},a_distance:{type:\"float\",buffer:f,Re:M,offset:4*4},a_dir:{type:\"vec2\",buffer:f,Re:M,offset:4*5}},m.length,s,\"TRIANGLES\",i.depthTest,ColorMode.Si,StencilMode.b2,undefined,m.offset)}};e.prototype.Cb=function(e,r,t,i){var a=r.data;var n=a.dX;if(!n){return}var o=e.V2();n.upload(o.context);var f=n.zs;var s=a.IX;if(!s){return}var u=1;if(t.viewState.viewMode===\"3D\"){u=t.map.getView().EF()}var l=[r.Sa[0],r.Sa[1]];var v=r.zo.z;if(v<LocalZoom){var c=r.localCoord.center;l[0]+=c[0];l[1]+=c[1]}var h=i.opacity;var d=s.jc;for(var _=0,g=d.length;_<g;_++){var y=d[_];var m={u_offset:[0,0],u_matrix:t.viewState.mvpMatrix,u_localDeltaCenter:l,u_skyHeight:u,u_viewHeight:t.viewState.size[1],u_retinaRatio:Support$3.Ue?2:1,u_opacity:h};o.Ce(m,{a_pos:{buffer:f,type:\"vec2\",Re:f.size,offset:0},a_radius:{buffer:f,type:\"float\",Re:f.size,offset:4*2},a_borderWidth:{buffer:f,type:\"float\",Re:f.size,offset:4*3},a_color:{buffer:f,type:\"vec4\",Re:f.size,offset:4*4},a_borderColor:{buffer:f,type:\"vec4\",Re:f.size,offset:4*8},a_visible:{buffer:f,type:\"float\",Re:f.size,offset:4*12}},y.length,undefined,\"POINTS\",i.depthTest,ColorMode.Si,StencilMode.b2,undefined,y.offset)}};e.prototype.lH=function(e,r,t,i){if(i===void 0){i=1}var a=e.Wn();var n=a.context;var o=new Float32Array(this.fH(r));var f=[r.Sa[0],r.Sa[1]];var s=n.fe(o,8);var u=r.zo.z;if(u<LocalZoom){var l=r.localCoord.center;f[0]+=l[0];f[1]+=l[1]}var v=[0,1,0,0];if(u===t.viewState.optimalZoom-1){v=[1,0,0,0]}var c={u_matrix:t.viewState.mvpMatrix,u_color:v,u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:t.viewState.size[1],u_skyHeight:1};a.Ce(c,{a_pos:{type:\"vec2\",buffer:s,Re:0,offset:0}},6,undefined,\"TRIANGLES\",false,ColorMode.Si,i===1?StencilMode.m2:StencilMode.C2,undefined,0)};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass(\"AMap.MaskLayer\");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};e.prototype.z2=function(e,r,t){if(!r){return}if(e.Ho&&e.Ho.indexOf(t.zo.key)>-1){return}var i=[];for(var a=0;a<r.length;a++){var n=r[a];var o=new AMap.LabelMarker(n);i.push(o)}e.add(i);e.Ho.push(t.zo.key)};e.prototype.IC=function(e,r,t,i){var a=e.createFramebuffer();a.w=r;a.h=t;a.bounds=i;var n=e.createTexture();a.texture=n;e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,t,0,e.RGBA,e.UNSIGNED_BYTE,null);var o=e.createRenderbuffer();a.AC=o;e.bindRenderbuffer(e.RENDERBUFFER,o);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r,t);e.bindFramebuffer(e.FRAMEBUFFER,a);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,o);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==f){console.log(\"Frame buffer object is incomplete: \"+f.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return a};e.prototype.j2=function(e,r,t,i,a){e.w=t;e.h=i;e.bounds=a;r.bindTexture(r.TEXTURE_2D,e.texture);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,i,0,r.RGBA,r.UNSIGNED_BYTE,null);r.bindRenderbuffer(r.RENDERBUFFER,e.AC);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t,i);r.bindTexture(r.TEXTURE_2D,null);r.bindRenderbuffer(r.RENDERBUFFER,null)};return e}(LayerRender);var Support$4=M[\"Support\"];var lcs$3=M[\"geo\"][\"lcs\"];var MaskLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.SC=new Uint8Array(0);return e}e.prototype.EH=function(e,r){var t=r.map.coordToContainer([e[0],e[1]]);var i=Math.round(t[0]);var a=Math.round(t[1]);var n=r.size[0];var o=r.size[1];var f=((o-a)*n+i)*4+3;if(i<0||a<0||i>=n||a>=o){return false}if(this.SC[f]){return true}return false};e.prototype.renderFrame=function(e,r,t,i,a,n){var o=e.aS();var f=t.viewState;var s=f.centerCoord;var u=o.context;var l=[0,0];if(t.viewState.optimalZoom<LocalZoom){l=r.LS.center}else{var v=lcs$3.getLocalByCoord([s[0],s[1]]).center;l=[r.LS.center[0]-v[0],r.LS.center[1]-v[1]]}r.Dc.upload(o.context,true);var c={data:r,$i:o,viewState:f,Sa:l};this.RC(u,t,c);this.zC(u,c)};e.prototype.zC=function(e,r){var t=e.gl;var i=r.data.Dc.zs;var a=r.data.Dc.Pc;var n=r.data.Oc;var o=n.jc;for(var f=0,s=o.length;f<s;f++){var u=o[f];r.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:r.Sa,u_mvpMatrix:r.viewState.mvpMatrix},{a_pos:{type:\"vec2\",buffer:i,Re:i.size,offset:0}},u.length,a,\"TRIANGLES\",undefined,ColorMode.zi,StencilMode.Ai,undefined,u.offset)}};e.prototype.RC=function(e,r,t){var i=e.gl;var a=r.size[0];var n=r.size[1];if(!this.CC){this.CC=this.IC(i,r)}i.bindFramebuffer(i.FRAMEBUFFER,this.CC);i.viewport(0,0,a,n);i.clear(i.COLOR_BUFFER_BIT);var o=t.data.Dc.zs;var f=t.data.Dc.Pc;var s=t.data.Oc;var u=s.jc;for(var l=0,v=u.length;l<v;l++){var c=u[l];t.$i.Ce({u_color:[1,0,0,1],u_deltaCenter:t.Sa,u_mvpMatrix:t.viewState.mvpMatrix},{a_pos:{type:\"vec2\",buffer:o,Re:o.size,offset:0}},c.length,f,\"TRIANGLES\",undefined,ColorMode.zi,undefined,c.offset)}var h=a*n*4;if(!this.SC||h!==this.SC.length){this.SC=new Uint8Array(h)}i.readPixels(0,0,a,n,i.RGBA,i.UNSIGNED_BYTE,this.SC);i.bindFramebuffer(i.FRAMEBUFFER,null);var d=Support$4.Ue?2:1;i.viewport(0,0,a*d,n*d)};e.prototype.IC=function(e,r){var t=e.createFramebuffer();var i=r.size[0];var a=r.size[1];var n=e.createRenderbuffer();t.AC=n;n.w=i;n.h=a;e.bindRenderbuffer(e.RENDERBUFFER,n);e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i,a);e.bindFramebuffer(e.FRAMEBUFFER,t);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==o){console.log(\"Frame buffer object is incomplete: \"+o.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return t};return e}(LayerRender);var lineFragmentString=\"precision highp float;\\n\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform vec4 u_dash;\\nuniform float u_border;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;\\n\\nvarying highp float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    float offset = mod(v_distance, u_dash.r + u_dash.g + u_dash.b + u_dash.a);\\n    if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n        discard;\\n    }else if(offset> u_dash.r + u_dash.g + u_dash.b){\\n        discard;\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n    gl_FragColor = u_color;\\n    // gl_FragColor.a *= opacity;\\n\\n    // gl_FragColor = vec4(1, 0, 0, 1);\\n\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var lineVertextString=\"precision highp float;\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_width;\\n\\nvarying float v_distance;\\nvarying vec2 v_normal;\\nvarying float v_width;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width * 0.5);\\n\\n    vec2 pos=a_pos;\\n    pos.x+=u_localDeltaCenter.x;\\n    pos.y+=u_localDeltaCenter.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_normal = normalize(a_normal*sign(width*u_meter_per_pixel*.5));\\n    v_width = width;\\n    v_pos = gl_Position;\\n}\";var ColorConstructor=M[\"Color\"];var lineUniforms={u_skyHeight:\"float\",u_viewHeight:\"float\",u_width:\"float\",u_border:\"float\",u_matrix:\"mat4\",u_meter_per_pixel:\"float\",u_color:\"vec4\",u_dash:\"vec4\",u_localDeltaCenter:\"vec2\"};var lineAttributes={a_pos:{Oe:\"vec2\",Me:\"float32\"},a_normal:{Oe:\"vec2\",Me:\"float32\"},a_distance:{Oe:\"float\",Me:\"float32\"},a_dir:{Oe:\"vec2\",Me:\"float32\"}};var linePropertys={roadColor:new LineProperty(\"roadColor\",\"linear\"),roadWidth:new LineProperty(\"roadWidth\",\"linear\"),roadDash:new LineProperty(\"roadDash\",\"const\"),borderColor:new LineBorderProperty(\"borderColor\",\"linear\"),borderWidth:new LineBorderProperty(\"borderWidth\",\"linear\"),borderDash:new LineBorderProperty(\"borderDash\",\"const\")};var line={uniforms:lineUniforms,attributes:lineAttributes,vertexSource:lineVertextString,fragmentSource:lineFragmentString};var getLineUniformValues=function(e,r,t,i,a,n){if(i===void 0){i=[0,0]}var o=r.minzoom;var f=r.maxzoom;var s=e.viewState.zoom;if(o-.2>s&&o>3||f+.8<s&&f<18){return}var u=r.mainkey;var l=r.subkey;if(t){return getLineBorderUniformValues(e,r,i,a,n)}else{return getLineFaceUniformValues(e,r,i,a,n)}};function getLineBorderUniformValues(e,r,t,i,a){if(t===void 0){t=[0,0]}var n=e.map.bZ.MZ.drawMode===\"fast\"?e.viewState.optimalZoom:e.viewState.zoom;var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=linePropertys.borderColor.An(i,o,f,n,s);if(!u){return undefined}var l=e.map.bZ.MZ.KY;if(l&&o===l.Lp&&l.Ap.indexOf(f)>-1){u=ColorConstructor.FV(u,l.NY)}var v=linePropertys.roadWidth.An(i,o,f,n,s)+linePropertys.borderWidth.An(i,o,f,n,s);var c=linePropertys.borderDash.An(i,o,f,n,s)||[1,0,1,0];return{u_skyHeight:a,u_matrix:e.viewState.mvpMatrix,u_meter_per_pixel:e.viewState.resolution,u_width:v,u_border:1,u_color:u,u_dash:c,u_localDeltaCenter:t,u_viewHeight:e.size[1]}}function getLineFaceUniformValues(e,r,t,i,a){if(t===void 0){t=[0,0]}var n=e.map.bZ.MZ.drawMode===\"fast\"?e.viewState.optimalZoom:e.viewState.zoom;var o=r.mainkey,f=r.subkey,s=r.minzoom,u=r.maxzoom;var l=linePropertys.roadColor.An(i,o,f,n,s);if(f<0&&o<0){l=[1,0,0,e.debug?1:0]}if(!l){return undefined}var v=e.map.bZ.MZ.KY;if(v&&o===v.Lp&&v.Ap.indexOf(f)>-1){l=ColorConstructor.FV(l,v.NY)}var c=linePropertys.roadWidth.An(i,o,f,n,s);var h=linePropertys.roadDash.An(i,o,f,n,s)||[1,0,1,0];return{u_matrix:e.viewState.mvpMatrix,u_meter_per_pixel:e.viewState.resolution,u_width:c,u_color:l,u_dash:h,u_border:0,u_localDeltaCenter:t,u_viewHeight:e.size[1],u_skyHeight:a}}var fillFragmentString=\"precision highp float;\\nuniform vec4 u_color;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = v_color;\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n    // return;\\n\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\\n\";var fillVertextString=\"precision highp float;\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n}\\n\";var fillPatternFragmentString=\"precision highp float;\\n#define GLSLIFY 1\\nuniform vec4 u_color;\\nuniform sampler2D u_image;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform float u_resolution;\\nuniform vec2 u_imageSize;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n// varying vec2 v_texture_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\\n    gl_FragColor = texture2D(u_image, v_texture_pos);\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n   \\n    float y = v_pos.y / v_pos.w;\\n    if(u_skyHeight > 0.0 && y > u_skyHeight) {\\n        gl_FragColor.a = 1.0 - smoothstep(u_skyHeight, 1.0, y);\\n    }\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var fillPatternVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform float u_resolution;\\nuniform vec2 u_offset;\\nvarying vec4 v_pos;\\nvarying vec2 v_coord;\\n\\n// varying vec2 v_texture_pos;\\nvoid main(){\\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    v_pos = gl_Position;\\n    v_coord = pos;\\n}\\n\";var fillUniforms={u_skyColor:\"vec3\",u_color:\"vec4\",u_skyHeight:\"float\",u_viewHeight:\"float\",u_offset:\"vec2\",u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\"};var fillAttributes={a_pos:{Me:\"float32\",Oe:\"vec2\"}};var fill={uniforms:fillUniforms,attributes:fillAttributes,vertexSource:fillVertextString,fragmentSource:fillFragmentString};var fillProperties={faceColor:new FillProperty(\"faceColor\",\"linear\"),borderWidth:new FillProperty(\"borderWidth\",\"linear\"),borderColor:new FillProperty(\"borderColor\",\"linear\"),texture:new FillProperty(\"texture\",\"const\")};var ColorConstructor$1=M[\"Color\"];var getFillUniformValues=function(e,r,t,i,a){if(t===void 0){t=[0,0]}if(a===void 0){a=1}var n=e.map.bZ.MZ.drawMode===\"fast\"?e.viewState.optimalZoom:e.viewState.zoom;if(r.minzoom-.2>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillProperties.faceColor.An(i,o,f,n,s);if(!u){return undefined}var l=e.map;var v=e.map.bZ.MZ.KY;if(v&&o===v.Lp&&v.Ap.indexOf(f)>-1){u=ColorConstructor$1.FV(u,v.NY)}var c=l.JF(e.viewState.optimalZoom);return{u_matrix:e.viewState.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:a,u_viewHeight:e.viewState.size[1],u_skyColor:c||[1,1,1,0],u_image:fillProperties.texture.An(i,o,f,n,s),u_imageSize:[1,1],u_localDeltaCenter:t,u_resolution:e.viewState.optimalResolution}};var getFillPatternUniformValues=function(e,r,t,i,a){if(t===void 0){t=[0,0]}if(a===void 0){a=1}var n=e.viewState.zoom;if(r.minzoom-.2>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillProperties.faceColor.An(i,o,f,n,s);var l=e.map;var v=l.JF(e.viewState.optimalZoom);if(!u){return undefined}return{u_matrix:e.viewState.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:a,u_viewHeight:e.viewState.size[1],u_skyColor:v||[1,1,1,0],u_image:fillProperties.texture.An(i,o,f,n,s),u_imageSize:[1,1],u_localDeltaCenter:t,u_resolution:e.viewState.optimalResolution}};var fillPatternUniforms={u_color:\"vec4\",u_skyColor:\"vec4\",u_viewHeight:\"float\",u_skyHeight:\"float\",u_offset:\"vec2\",u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_image:\"sampler2D\",u_resolution:\"float\",u_imageSize:\"vec2\"};var fillPatternAttributes={a_pos:{Me:\"float32\",Oe:\"vec2\"}};var fillPattern={uniforms:fillPatternUniforms,attributes:fillPatternAttributes,vertexSource:fillPatternVertextString,fragmentSource:fillPatternFragmentString};function drawFillPattern(e,r,t,i,a,n,o,f,s,u,l){if(n===void 0){n=\"TRIANGLES\"}if(o===void 0){o=false}if(f===void 0){f=ColorMode.Mi}if(s===void 0){s=StencilMode.disable}if(u===void 0){u=CullFaceMode.we}if(l===void 0){l=0}var v=e.aH();v.Ce(r,t,i,a,n,o,f,s,u,l)}var lineFragmentString$1=\"precision mediump float;\\nuniform vec4 u_color;\\nvarying vec4 v_pos;\\n// uniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nvoid main(){\\n    // float dist=length(v_pos-gl_FragCoord.xy);\\n    // float alpha=1.-smoothstep(0.,1.,dist);\\n    gl_FragColor=u_color;\\n    // gl_FragColor=vec4(0.8, 0.8, 0.8, 0.5);\\n    // 雾化\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    #ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor=vec4(1.);\\n    #endif\\n}\\n\";var lineVertextString$1=\"precision highp float;\\nattribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x,a_pos.y+u_localDeltaCenter.y);\\n    gl_Position=u_matrix*vec4(pos,0,1);\\n    v_pos=gl_Position;\\n}\\n\";var fillOutlineUniforms={u_color:\"vec4\",u_normal:\"vec3\",u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var fillOutlineAttributes={a_pos:{Oe:\"vec2\",Me:\"float32\"}};var fillOutline={uniforms:fillOutlineUniforms,attributes:fillOutlineAttributes,vertexSource:lineVertextString$1,fragmentSource:lineFragmentString$1};var fillOutlineProperties={faceColor:new BuildingProperty(\"faceColor\",\"linear\"),borderWidth:new BuildingBorderProperty(\"borderWidth\",\"const\"),borderColor:new BuildingBorderProperty(\"borderColor\",\"linear\"),wallColor1:new BuildingProperty(\"wallColor1\",\"linear\"),wallColor2:new BuildingProperty(\"wallColor2\",\"linear\")};var getFillOutlineUniformValues=function(e,r,t,i,a){if(a===void 0){a=1}var n=e.map.bZ.MZ.drawMode===\"fast\"?e.viewState.optimalZoom:e.viewState.zoom;if(r.minzoom-.5>e.viewState.zoom&&r.minzoom>3){return}var o=r.mainkey,f=r.subkey,s=r.minzoom;var u=fillOutlineProperties.borderColor.An(i,o,f,n,s);if(!u){return undefined}return{u_color:u,u_normal:[0,0,-.1],u_matrix:e.viewState.mvpMatrix,u_localDeltaCenter:t,u_skyHeight:a,u_viewHeight:e.viewState.size[1]}};var Tile$1=M[\"Tile\"];var lcs$4=M[\"geo\"][\"lcs\"];var find$2=M[\"lodash\"][\"find\"];var map$2=M[\"lodash\"][\"map\"];var Browser$1=M[\"Support\"];var NebulaRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.yz=1;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!a.map.mapStyle.vn){return}this.kG=i.rejectMapMask||!t.map[\"getMask\"]()?undefined:StencilMode[\"writeWithStencil\"];var n=t.map.getOutseaState();var o=t.map.getOutseaDataType();if(n&&t.viewState.optimalZoom>=9.8){this.kG=StencilMode[\"nbStencil\"];var f=r&&r.outseaData;if(f){this.wG(e,t,i,a,f)}}if(t.map.bZ.MZ.drawMode!==\"fast\"&&!r.s_){return}var s=r.tiles;var u={};for(var l=0,v=s;l<v.length;l++){var c=v[l];if(Tile$1.YH(c)){var h=c.zo.z;if(!u[h]){u[h]=[]}u[h].push(c)}}var d=i.layer;var _=t.map.getStatus().features;var g=d.uo.getSource(d.co());var y=g.ra(t.viewState.optimalZoom);var m=map$2(Object.keys(u),function(e){return parseInt(e,10)});m.sort(function(e,r){return e-r});var p=m.indexOf(y);if(p>=0){m.splice(p,1);m.push(y)}if(t.viewState.viewMode===\"3D\"){this.yz=t.map.getView().EF()}for(var b=0,x=m;b<x.length;b++){var C=x[b];var S=u[C];if(!(_&&_.indexOf(\"bg\")===-1)){for(var M=0,w=S;M<w.length;M++){var c=w[M];if(!Tile$1.YH(c)){continue}this.Lc(e,c,t,i,a)}}if(!(_&&_.indexOf(\"building\")===-1)){for(var k=0,T=S;k<T.length;k++){var c=T[k];if(!Tile$1.YH(c)){continue}this.PD(e,c,t,i,a)}}if(!(_&&_.indexOf(\"building\")===-1)){for(var I=0,A=S;I<A.length;I++){var c=A[I];if(!Tile$1.YH(c)){continue}this.Ac(e,c,t,i,a)}}if(!(_&&_.indexOf(\"road\")===-1)){for(var $=0,F=S;$<F.length;$++){var c=F[$];if(!Tile$1.YH(c)){continue}this.Tc(e,c,t,i,a)}}if(!(_&&_.indexOf(\"road\")===-1)){for(var P=0,L=S;P<L.length;P++){var c=L[P];if(!Tile$1.YH(c)){continue}this.Ic(e,c,t,i,a)}}}if(r.tiles&&r.tiles.length>0){a.map.bZ.dynamic.set(\"firstPaint\",true)}if(window[\"testTime\"]&&!window[\"testTime\"][\"renderTime\"]&&s&&s.length>0){var R=(new Date).getTime();window[\"testTime\"][\"renderTime\"]=R-window[\"testTime\"][\"start\"]}if(n&&t.viewState.optimalZoom>=10){this.kG=StencilMode[\"nbStencil\"];var f=r&&r.outseaData;if(f){e.context.clear({stencil:true})}}};e.prototype.destroy=function(){};e.prototype.wG=function(e,r,t,i,a){if(!a||!a.LS){return}var n=e.aS();var o=n.context;var f=r.viewState;var s=[0,0];var u=f.centerCoord;if(r.viewState.optimalZoom<LocalZoom){s=a.LS.center}else{var l=lcs$4.getLocalByCoord([u[0],u[1]]).center;var v=a.LS.center[0]-l[0];var c=a.LS.center[1]-l[1];s=[v,c]}var h={outseaData:a,$i:n,viewState:f,Sa:s};this.zC(o,h)};e.prototype.zC=function(e,r){r.outseaData.Dc.upload(e,true);var t=r.outseaData.Dc.zs;var i=r.outseaData.Dc.Pc;var a=r.outseaData.Oc;var n=a.jc;for(var o=0,f=n.length;o<f;o++){var s=n[o];r.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:r.Sa,u_mvpMatrix:r.viewState.mvpMatrix},{a_pos:{type:\"vec2\",buffer:t,Re:t.size,offset:0}},s.length,i,\"TRIANGLES\",undefined,ColorMode.zi,StencilMode[\"outseaStencil\"],undefined,s.offset)}};e.prototype.Lc=function(e,r,t,i,a){var n=e.Wn();var o=r.data;var f=true;for(var s=0,u=o;s<u.length;s++){var l=u[s];var v=l.Dc;if(!v){continue}v.upload(n.context,true);var c=v.zs;var h=v.Pc;var d=l.Oc;var _=f?0:1;f=false;var g={a_pos:{type:\"vec2\",Re:c.size,offset:0,buffer:c}};for(var y=_,m=d.jc.length;y<m;y++){var p=d.jc[y];var b=fillProperties.texture.An(a.map.mapStyle,p.mainkey,p.subkey,t.viewState.optimalZoom,p.minzoom);if(b){var x=getFillPatternUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(x){var C=a.map.getImage(x.u_image);if(C&&x.u_image){x.u_image=C;x.u_imageSize=C.size;drawFillPattern(e,x,g,p.length,h,\"TRIANGLES\",false,ColorMode.Si,this.kG,undefined,p.offset)}else if(x.u_image&&a.map.I_&&!a.map.I_.MH(x.u_image)){a.map.I_[\"addImage\"](x.u_image,{url:x.u_image,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return a.map.setNeedUpdate(true)}})}}}else{var x=getFillUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(x){n.Ce(x,g,p.length,h,\"TRIANGLES\",false,ColorMode.Si,this.kG,undefined,p.offset)}}}}};e.prototype.PD=function(e,r,t,i,a){var n=e.Wn();var o=r.data;var f=find$2(t.map.getLayers(),function(e){return e.CLASS_NAME===\"AMap.IndoorMap\"});var s;if(f){s=f.yD().show}var u=true;for(var l=0,v=o;l<v.length;l++){var c=v[l];var h=c.FD;if(!h){continue}h.upload(n.context,true);var d=h.zs;var _=h.Pc;var g=c.BD;if(!g){continue}var y=u?0:1;u=false;var m={a_pos:{type:\"vec2\",Re:d.size,offset:0,buffer:d}};for(var p=y,b=g.jc.length;p<b;p++){var x=g.jc[p];if(!f||!(x.bz&&x.bz!==\"indoor_out_building\"&&s)){var C=getFillUniformValues(t,x,r.Sa,a.map.mapStyle,this.yz);if(C){n.Ce(C,m,x.length,_,\"TRIANGLES\",false,ColorMode.Si,this.kG,undefined,x.offset)}}}}};e.prototype.Ac=function(e,r,t,i,a){var n=e.Yn();var o=r.data;var f=find$2(t.map.getLayers(),function(e){return e.CLASS_NAME===\"AMap.IndoorMap\"});var s;if(f){s=f.yD().show}for(var u=0,l=o;u<l.length;u++){var v=l[u];var c=v.Dc;if(!c){continue}c.upload(n.context,true);var h=v.Fc;var d=c.Ec;var _=c.Nc;var g={a_pos:{type:\"vec2\",Re:0,offset:0,buffer:d}};for(var y=0,m=h.jc.length;y<m;y++){var p=h.jc[y];var b=getFillOutlineUniformValues(t,p,r.Sa,a.map.mapStyle,this.yz);if(!f||!(p.bz&&p.bz!==\"indoor_out_building\"&&s)){if(b){n.Ce(b,g,p.length,_,\"LINES\",false,ColorMode.Si,this.kG,undefined,p.offset)}}}}};e.prototype.Ic=function(e,r,t,i,a){var n=e.Vn();if(!r.data){assert(r.data,\"tile have no data\");return}var o=r.data;for(var f=0,s=o;f<s.length;f++){var u=s[f];var l=u.$c;if(!l){continue}n.context.getExtension(\"OES_element_index_uint\");l.upload(n.context,true);var v=u.$c.zs.buffer;var c=u.$c.Pc.buffer;var h=u.Uc;var d=h.jc;var _=v.size;var g={a_pos:{type:\"vec2\",buffer:v,Re:_,offset:4*0},a_normal:{type:\"vec2\",buffer:v,Re:_,offset:4*2},a_distance:{type:\"float\",buffer:v,Re:_,offset:4*4},a_dir:{type:\"vec2\",buffer:v,Re:_,offset:4*5}};for(var y=0,m=d.length;y<m;y++){var p=d[y];var b=getLineUniformValues(t,p,false,r.Sa,a.map.mapStyle,this.yz);if(p.mainkey===-2&&a.map.debug){b={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:2,u_color:[1,0,0,1],u_dash:0,u_border:0,u_localDeltaCenter:r.Sa,u_skyHeight:1,u_viewHeight:1}}if(!b){continue}if(b){n.Ce(b,g,p.length,c,\"TRIANGLES\",false,ColorMode.Si,this.kG,undefined,p.offset)}}}};e.prototype.Tc=function(e,r,t,i,a){var n=e.Vn();if(!r.data){assert(r.data,\"tile have no data\");return}var o=r.data;for(var f=0,s=o;f<s.length;f++){var u=s[f];var l=u.$c;if(!l){continue}n.context.getExtension(\"OES_element_index_uint\");l.upload(n.context,true);var v=u.$c.zs.buffer;var c=u.$c.Pc.buffer;var h=u.Uc;var d=h.jc;var _=v.size;var g={a_pos:{type:\"vec2\",buffer:v,Re:_,offset:4*0},a_normal:{type:\"vec2\",buffer:v,Re:_,offset:4*2},a_distance:{type:\"float\",buffer:v,Re:_,offset:4*4},a_dir:{type:\"vec2\",buffer:v,Re:_,offset:4*5}};for(var y=0,m=d.length;y<m;y++){var p=d[y];var b=getLineUniformValues(t,p,true,r.Sa,a.map.mapStyle,this.yz);if(b){n.Ce(b,g,p.length,c,\"TRIANGLES\",false,ColorMode.Si,this.kG,undefined,p.offset)}}}};return e}(LayerRender);var TileState$2=M[\"TileState\"];var ColorScaleConstructor=M[\"ColorScale\"];var RasterLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a,n){if(!a.map.mapStyle.vn){return}var o=t.viewState;var f=n.getLayerConfig();var s=f.zooms;var u=o.size,l=o.pitch,v=o.optimalZoom;if(o.optimalZoom<s[0]||o.optimalZoom>s[1]){return}var c=e.Gn();var h=t.map;var d=h.JF(t.viewState.optimalZoom);var _=d||[1,1,1,0];var g=r.tiles;var y=1;if(t.viewState.viewMode===\"3D\"){y=t.map.getView().EF()}if(i.ce){e.context.clear({depth:true})}var m=null;if(f.OY){var p=h.mapStyle.vn.MS(\"satellite\");if(p&&p[\"filter\"]){m=ColorScaleConstructor[\"getTexture\"](e.context,p[\"filter\"])||null}}for(var b=0,x=g.length;b<x;b+=1){var C=g[b];for(var S=0,M=C.length;S<M;S+=1){var w=C[S];if(w.status===TileState$2.LOADED){c.Ce({u_skyColor:_,u_viewHeight:o.size[1],u_skyHeight:y,u_opacity:f.opacity||1,u_texture:w.data.texture,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:w.data.Sa,u_flterFlag:m?true:false,u_colorscale:m},{a_Position:{type:\"vec4\",buffer:w.data.zs,Re:0,offset:0}},6,undefined,undefined,i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil)}}for(var S=0,M=C.length;S<M;S+=1){var w=C[S];if(w.status===TileState$2.LOADED&&t.debug){c.Ce({u_skyColor:_,u_viewHeight:o.size[1],u_skyHeight:y,u_opacity:f.opacity||1,u_texture:w.data.Js,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:w.data.Sa,u_flterFlag:false,u_colorscale:null},{a_Position:{type:\"vec4\",buffer:w.data.zs,Re:0,offset:0}},6,undefined,\"TRIANGLES\",undefined,undefined,undefined)}}}return};return e}(LayerRender);var Util$4=AMap[\"Util\"];var PolygonWebglRender=function(){function e(e){this.a2=e}e.prototype.render=function(e,r,t){if(!e._map){return}if(e._opts.extrusionHeight&&e._opts.extrusionHeight>0){this.S_(e,r,t)}else{this.Wx(e,r,t);this.Gx(e,r,t)}};e.prototype.S_=function(e,r,t,i,a){if(i===void 0){i=false}if(a===void 0){a=false}if(!e.visible){return}var n=e.Q0;if(!n){return}n.upload(t.context,true);var o=r.map;var f=r.viewState.size;var s=o.getView();var u=e.rY(r);var l={zooms:e._opts.zooms,layer:{CLASS_NAME:\"AMap.VectorLayer\"},opacity:1,heightFactor:1,visible:true,zIndex:e._opts.zIndex,depthTest:true};var v=1;if(r.viewState.viewMode===\"3D\"){v=s.EF()}else{return}var c=s.X(f[0]/2,s.Uu()+5);var h=s.X(f[0]/2,s.Uu()-5);var d=s.pz().getPosition();var _=c[0]-d[0];var g=c[1]-d[1];var y=h[0]-d[0];var m=h[1]-d[1];var p=[Math.sqrt(_*_+g*g),Math.sqrt(y*y+m*m)];var b=e.K0;var x=n.zs;for(var C=0,S=b.jc;C<S.length;C++){var M=S[C];var w=Util$4.color2RgbaArray(e._opts.roofColor);var k=Util$4.color2RgbaArray(e._opts.wallColor);var T=void 0;if(a){T=this.a2.find(M.mainkey);if(!T){T=this.a2.add(M.mainkey)}}if(a&&!T){return}var I=!!M.bz;if(I&&!a){var A=getFillExtPatternUniformValues(r,M,u,l,{wallColor:k,roofColor:w},v,p);if(A){var $=o.getImage(A.u_image);if($){A.u_image=$;A.u_imageSize=$.size;var F=t.sH();F.Ce(A,{a_pos:{type:\"vec4\",Re:x.size,offset:0,buffer:x},a_normal:{type:\"vec3\",Re:x.size,offset:4*4,buffer:x},a_textureCoord:{type:\"vec2\",Re:x.size,offset:4*7,buffer:x}},M.length,undefined,\"TRIANGLES\",l.depthTest,i?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,M.offset)}else if(A.u_image&&o.I_&&!o.I_.MH(A.u_image)){o.addImage(A.u_image,{url:A.u_image,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return o.setNeedUpdate(true)}})}}}else{var A=getFillExtUniformValues(r,M,u,l,{wallColor:a?T:k,roofColor:a?T:w},v,p);if(A){var F=t.k_();A.u_isPick=a;F.Ce(A,{a_pos:{type:\"vec4\",Re:x.size,offset:0,buffer:x},a_normal:{type:\"vec3\",Re:x.size,offset:4*4,buffer:x}},M.length,undefined,\"TRIANGLES\",l.depthTest,i?ColorMode.disabled:ColorMode.Si,undefined,CullFaceMode.back,M.offset)}}}};e.prototype.qx=function(e,r,t){var i=e.rY(r);var a=e._opts;if(!a.fillColor){return}var n;if(typeof a.fillColor===\"function\"){n=Util$4.color2RgbaArray(a.fillColor(t))}else{n=Util$4.color2RgbaArray(a.fillColor)}if(!n){return}n=n.slice(0,3);var o;if(typeof a.fillOpacity===\"function\"){o=a.fillOpacity(t)}else{o=a.fillOpacity}n.push(o);return{u_offset:e.zx,u_color:n,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Vx=function(e,r,t){var i=e.rY(r);var a=e._opts;if(!a.strokeColor){return}var n;if(typeof a.strokeColor===\"function\"){n=Util$4.color2RgbaArray(a.strokeColor(t))}else{n=Util$4.color2RgbaArray(a.strokeColor)}if(!n){return}n=n.slice(0,3);n.push(a.strokeOpacity);var o=this.Xx(e);return{u_color:n,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_width:a.strokeWeight,u_offset:e.zx,u_meter_per_pixel:r.viewState.resolution,u_dash:o.dash,u_dashType:o.Jx,u_border:false,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Wx=function(e,r,t){if(!e.Dx){return}var i=e.Dx;var a=e.XB;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var n=i.zs;var o=t.Wn();o.context.getExtension(\"OES_element_index_uint\");for(var f=0,s=a.jc.length;f<s;f++){var u=this.qx(e,r,f);if(!u){continue}var l=a.jc[f];o.Ce(u,{a_pos:{buffer:n,type:\"vec2\",Re:n.size,offset:0}},l.length,i.Pc,undefined,undefined,ColorMode.Si,undefined,undefined,l.offset)}};e.prototype.Gx=function(e,r,t){if(!e.Px){return}var i=e.Px;var a=e.qB;i.upload(t.context);if(!i.uploaded&&!i.zs){return}var n=i.zs.buffer;if(!e.visible){return}var o=t.Xn();o.context.getExtension(\"OES_element_index_uint\");for(var f=0,s=a.jc.length;f<s;f++){var u=this.Vx(e,r,f);if(!u){continue}var l=a.jc[f];o.Ce(u,{a_pos:{buffer:n,type:\"vec2\",Re:n.size,offset:0},a_normal:{type:\"vec2\",buffer:n,Re:n.size,offset:4*2},a_distance:{type:\"float\",buffer:n,Re:n.size,offset:4*4},a_dir:{type:\"vec2\",buffer:n,Re:n.size,offset:4*5}},l.length,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,l.offset)}};e.prototype.Xx=function(e){var r=e._opts;var t=2;var i=[1,0,0];if(r.strokeStyle===\"dashed\"&&r.strokeDasharray){if(r.strokeDasharray.length>=3){t=3;i=r.strokeDasharray.slice(0,3)}else{t=2;i=__spreadArrays(r.strokeDasharray.slice(0),[0])}}return{Jx:t,dash:i}};return e}();var Util$5=AMap[\"Util\"];var PolylineWebglRender=function(){function e(){this.W2=performance.now()}e.prototype.render=function(e,r,t){if(!e._map){return}var i=e._opts;this.Tc(e,r,t);this.Ic(e,r,t);if(i.lineGradient){this.nC(e,r,t)}if(i.showDir){this.N_(e,r,t,i)}};e.prototype.fb=function(e,r){var t=e.rY(r);var i=e._opts;var a=i.strokeWeight||-1;if(a<=0){return}if(i.strokeOpacity<=0){return}if(!i.strokeColor){return}var n=Util$5.color2RgbaArray(i.strokeColor);if(!n){return}n=n.slice(0,3);var o=this.Xx(e);n.push(i.strokeOpacity);if(i.unit===\"meter\"){a/=r.viewState.resolution}return{u_color:n,u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:a,u_offset:e.zx,u_localDeltaCenter:t,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.pb=function(e,r){var t=e.rY(r);var i=e._opts;if(!i.outlineColor){return}var a=Util$5.color2RgbaArray(i.outlineColor);if(!a){return}a=a.slice(0,3);a.push(i.strokeOpacity);var n=i.strokeWeight+i.borderWeight*2;if(n<=0){return}if(i.strokeOpacity<=0){return}var o=this.Xx(e);return{u_color:a,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:t,u_width:n,u_offset:e.zx,u_meter_per_pixel:r.viewState.resolution,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.B_=function(e,r,t){if(!e._map){return}var i=e.rY(r);var a=e._opts;var n=a.strokeWeight;var o;if(n<=0){return}var f=Boolean(a.dirImg);if(f){e.U_(t);o=e.E_}else{o=e._map.getImage(\"AMapArrow\")}if(!o){return}var s=Util$5.color2RgbaArray(a.dirColor).slice(0,3);if(a.unit===\"meter\"){n/=r.viewState.resolution}return{u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_meter_per_pixel_optimal:r.viewState.optimalResolution,u_width:n,u_offset:e.zx,u_localDeltaCenter:i,u_texture:o,u_iconsize:o.size,u_custom_img_flag:f,u_dir_color:s,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1],u_timer:performance.now()-this.W2,u_speed:a.speed,u_size_scale:a[\"dirImgGap\"],u_animate:!!a.animate}};e.prototype.oC=function(e,r,t){if(!e._map){return}var i=e.rY(r);var a=e._opts;if(!a.lineGradient){return}var n=a.strokeWeight;if(n<=0){return}if(!e.rC){e.aC(t,a.lineGradient)}if(a.unit===\"meter\"){n/=r.viewState.resolution}return{u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:n,u_offset:e.zx,u_localDeltaCenter:i,u_texture:e.rC,u_total_distance:e.sC,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.U_=function(e,r){if(e.F_){if(!e.E_){e.E_=r.createTexture(e.F_,{Zi:true});e.E_.bind(r.gl.CLAMP_TO_EDGE,r.gl.LINEAR,r.gl.LINEAR)}}};e.prototype.aC=function(e,r,t){if(!e.rC){var i=createLineGradinetCanvas(t.values);e.rC=r.createTexture(i,{Zi:true});var a=r.gl;e.rC.bind(a.CLAMP_TO_EDGE,a.NEAREST,a.NEAREST_MIPMAP_NEAREST)}};e.prototype.Xx=function(e){var r=e._opts;var t=2;var i=[1,0,0];if(r.strokeStyle===\"dashed\"&&r.strokeDasharray){if(r.strokeDasharray.length>=3){t=3;i=r.strokeDasharray.slice(0,3)}else{t=2;i=__spreadArrays(r.strokeDasharray.slice(0),[0])}}return{Jx:t,dash:i}};e.prototype.N_=function(e,r,t,i){if(!e.Px){return}var a=e.Px;a.upload(t.context);if(!a.uploaded||!a.zs){return}if(!e.visible){return}var n=a.zs.buffer;var o=this.B_(e,r,t.context);if(!o){return}var f=t.M_();f.Ce(o,{a_pos:{buffer:n,type:\"vec2\",Re:n.size,offset:0},a_normal:{type:\"vec2\",buffer:n,Re:n.size,offset:4*2},a_distance:{type:\"float\",buffer:n,Re:n.size,offset:4*4},a_dir:{type:\"vec2\",buffer:n,Re:n.size,offset:4*5}},a.Qx.length*3,a.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);f.Ni()};e.prototype.Ic=function(e,r,t){if(!e.Px){return}var i=e.Px;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var a=i.zs.buffer;var n=this.fb(e,r);if(!n){return}var o=t.Xn();o.Ce(n,{a_pos:{buffer:a,type:\"vec2\",Re:a.size,offset:0},a_normal:{type:\"vec2\",buffer:a,Re:a.size,offset:4*2},a_distance:{type:\"float\",buffer:a,Re:a.size,offset:4*4},a_dir:{type:\"vec2\",buffer:a,Re:a.size,offset:4*5}},i.Qx.length*3,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);o.Ni()};e.prototype.nC=function(e,r,t){if(!e.Px){return}var i=e.Px;i.upload(t.context);if(!i.uploaded||!i.zs){return}if(!e.visible){return}var a=i.zs.buffer;var n=this.oC(e,r,t.context);if(!n){return}var o=t.sS();o.Ce(n,{a_pos:{buffer:a,type:\"vec2\",Re:a.size,offset:0},a_normal:{type:\"vec2\",buffer:a,Re:a.size,offset:4*2},a_distance:{type:\"float\",buffer:a,Re:a.size,offset:4*4},a_dir:{type:\"vec2\",buffer:a,Re:a.size,offset:4*5}},i.Qx.length*3,i.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);o.Ni()};e.prototype.Tc=function(e,r,t){var i=e._opts;if(!i||!i.isOutline){return}if(!e.Px){return}var a=e.Px;a.upload(t.context);if(!a.uploaded&&!a.zs){return}var n=a.zs.buffer;if(!e.visible){return}var o=this.pb(e,r);if(!o){return}var f=t.Xn();f.Ce(o,{a_pos:{buffer:n,type:\"vec2\",Re:n.size,offset:0},a_normal:{type:\"vec2\",buffer:n,Re:n.size,offset:4*2},a_distance:{type:\"float\",buffer:n,Re:n.size,offset:4*4},a_dir:{type:\"vec2\",buffer:n,Re:n.size,offset:4*5}},a.Qx.length*3,a.Pc.buffer,undefined,undefined,ColorMode.Si,undefined,undefined,0);f.Ni()};return e}();function createLineGradinetCanvas(e){var r=document.createElement(\"canvas\");var t=4096;r.height=1;r.width=t;var i=r.getContext(\"2d\");var a=i.createImageData(t,1);var n=0;for(var o=0;o<t;o++){var f=void 0;for(;n<e.length;n++){if(n===e.length-1){f=e[n][1];break}var s=e[n+1][0];if(o>s*t){continue}f=e[n][1];break}f=e[n][1];var u=Util$5.color2RgbaArray(f);a.data[o*4]=u[0]*255;a.data[o*4+1]=u[1]*255;a.data[o*4+2]=u[2]*255;a.data[o*4+3]=u[3]*255}i.putImageData(a,0,0);return r}var Util$6=AMap[\"Util\"];var Support$5=M[\"Support\"];var CircleWebglRender=function(){function e(){}e.prototype.render=function(e,r,t){if(!e._map){return}if(!e[\"getRadius\"]()){return}if(Support$5[\"safari\"]){this.q2(e,r,t)}else{this.Cb(e,r,t)}};e.prototype.Cb=function(e,r,t){if(!e.visible){return}var i=this.Ab(e,r);if(!i){return}var a=t.Un();a.Ce(i,{},1,undefined,\"POINTS\",false,ColorMode.Si,undefined,undefined,0)};e.prototype.q2=function(e,r,t){var i=e.Sb;if(!i){return}i.upload(t.context);if(!i.upload){return}if(!e.visible){return}var a=i.zs;var n=this.Ab(e,r);if(!n){return}var o=t.Z2();o.Ce(n,{a_pos:{buffer:a,type:\"vec2\",Re:a.size,offset:0}},i._b.length,undefined,\"POINTS\",false,ColorMode.Si,undefined,undefined,0)};e.prototype.Lb=function(e,r,t){if(!e.visible){return}var i=this.Tb(e,r);if(!i){return}var a=t.Un();a.Ce(i,{},1,undefined,\"POINTS\",false,ColorMode.Si,undefined,undefined,0)};e.prototype.Ab=function(e,r){var t=e.KB;if(!t){return}var i=e.rY(r);var a=e._opts;if(!a.fillColor){return}var n=Util$6.color2RgbaArray(a.fillColor).slice(0,3);n.push(a.fillOpacity);var o=a.radius+(a.strokeWeight||0);var f=[0,a.radius/o];var s=[0,0,0,0];if(a.strokeColor&&a.strokeWeight&&a.strokeOpacity){s=Util$6.color2RgbaArray(a.strokeColor).slice(0,3);s.push(a.strokeOpacity)}return{u_pos:t,u_color:n,u_borderColor:s,u_offset:e.zx,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_radius:this.Ib(e),u_range:f,u_retinaRatio:Support$5.Ue?2:1,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Tb=function(e,r){var t=e.KB;if(!t){return}var i=e.rY(r);var a=e._opts;if(!a.strokeWeight){return}if(!a.strokeColor){return}var n=Util$6.color2RgbaArray(a.strokeColor).slice(0,3);n.push(a.strokeOpacity);var o=a.radius+a.strokeWeight;var f=[a.radius/o,1];var s=n.slice(0,3);s.push(0);return{u_pos:t,u_color:n,u_borderColor:s,u_offset:e.zx,u_matrix:r.viewState.mvpMatrix,u_localDeltaCenter:i,u_radius:this.Ib(e),u_range:f,u_retinaRatio:Support$5.Ue?2:1,u_skyHeight:r.viewState.skyHeight,u_viewHeight:r.viewState.size[1]}};e.prototype.Ib=function(e){var r=e._opts;var t=r.radius+(r.strokeWeight||0);return Math.min(t,64)};return e}();var ColorPick=function(){function e(){this.uA={};this.Y2=[0,0,0,255];this.K2=256}e.prototype.add=function(e){this.uA[this.X2()]=e;return __spreadArrays(this.Y2)};e.prototype.find=function(e){var r=this.K2;var t=r*r;for(var i in this.uA){var a=Number(i);if(isEqual(this.uA[a],e)){return[a%r,~~(a/r)%r,~~(a/t)%r,255]}}return undefined};e.prototype.clear=function(){this.Y2=[0,0,0,255];this.uA={}};e.prototype.J2=function(){return __spreadArrays(this.Y2)};e.prototype.GV=function(e){var r=this.K2;var t=r*r;var i=e[0],a=e[1],n=e[2];var o=i+a*r+n*t;return this.uA[o]};e.prototype.X2=function(){var e=this.K2;var r=e*e;var t=this.Y2,i=t[0],a=t[1],n=t[2];var o=i+a*e+n*r+1;this.Y2[0]=o%e;this.Y2[1]=~~(o/e)%e;this.Y2[2]=~~(o/r)%e;return o};return e}();var Support$6=M[\"Support\"];var scale$3=Support$6.scale;var OverlayRender=function(r){__extends(e,r);function e(){var e=r!==null&&r.apply(this,arguments)||this;e.a2=new ColorPick;e.uC=new PolygonWebglRender(e.a2);e.cC=new PolylineWebglRender;e.dC=new CircleWebglRender;return e}e.prototype.renderFrame=function(e,r,t,i,a){var n=t.viewState.zoom;this.wf=t;this.o2=e;this.Q2=r.sr;this.pu=scale$3;if(r.sr){for(var o=0,f=r.sr;o<f.length;o++){var s=f[o];if(n<s._opts.zooms[0]||n>s._opts.zooms[1]){continue}switch(s.CLASS_NAME){case\"Overlay.Polygon\":case\"Overlay.Rectangle\":case\"Overlay.Circle\":case\"Overlay.Ellipse\":this.hC(s,t,e);break;case\"Overlay.Polyline\":case\"Overlay.BezierCurve\":this.lC(s,t,e);break;case\"Overlay.CircleMarker\":this.fC(s,t,e);break}}}};e.prototype.pickRender=function(e,r){if(!this.o2){return}var t=this.o2.context;var i=this.o2.context.gl;if(!e){return}var a=e.size[0]*scale$3;var n=e.size[1]*scale$3;var o=e.viewState.bounds.toString();var f=false;if(!this.G2){this.G2=this.e4(i,a,n,o);f=true}else if(a!==this.G2.w||n!==this.G2.h){this.r4(this.G2,i,a,n,o);f=true}else if(o!==this.G2.bounds){this.G2.bounds=o;f=true}if(f){t.bindFramebuffer.set(this.G2);t.be.set([0,0,a,n]);t.clear({color:true,stencil:true,depth:true});if(this.Q2){var s=e.viewState.zoom;for(var u=0,l=this.Q2;u<l.length;u++){var v=l[u];var c=v;if(s<v._opts.zooms[0]||s>v._opts.zooms[1]){continue}if(v.CLASS_NAME===\"Overlay.Polygon\"&&c._opts.extrusionHeight>0){this.uC.S_(c,e,this.o2,false,true)}}}t.bindFramebuffer.set(null)}return this.G2};e.prototype.t4=function(){if(this.o2){var e=this.o2.context;e.bindFramebuffer.set(null);e.setDirty()}};e.prototype.destroy=function(){if(this.a2&&this.a2[\"clear\"]){this.a2.clear();delete this.a2}if(this.G2&&this.o2){var e=this.o2.context.gl;if(e){e.deleteFramebuffer(this.G2)}this.G2=null;delete this.G2}if(this.Q2){this.Q2=[]}};e.prototype.hC=function(e,r,t){this.uC.render(e,r,t)};e.prototype.lC=function(e,r,t){this.cC.render(e,r,t)};e.prototype.fC=function(e,r,t){this.dC.render(e,r,t)};e.prototype.e4=function(e,r,t,i){var a=e.createFramebuffer();a.w=r;a.h=t;a.bounds=i;var n=e.createTexture();a.texture=n;e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,t,0,e.RGBA,e.UNSIGNED_BYTE,null);var o=e.createRenderbuffer();a.AC=o;e.bindRenderbuffer(e.RENDERBUFFER,o);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r,t);e.bindFramebuffer(e.FRAMEBUFFER,a);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,o);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);if(e.FRAMEBUFFER_COMPLETE!==f){console.log(\"Frame buffer object is incomplete: \"+f.toString());return}e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);return a};e.prototype.r4=function(e,r,t,i,a){e.w=t;e.h=i;e.bounds=a;r.bindTexture(r.TEXTURE_2D,e.texture);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,i,0,r.RGBA,r.UNSIGNED_BYTE,null);r.bindRenderbuffer(r.RENDERBUFFER,e.AC);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t,i);r.bindTexture(r.TEXTURE_2D,null);r.bindRenderbuffer(r.RENDERBUFFER,null)};return e}(LayerRender);var TileState$3=M[\"TileState\"];var VectorTrafficRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=t.viewState.optimalZoom;if(a<i.zooms[0]||a>i.zooms[1]){return}if(i.ce){e.context.clear({depth:true})}var n=r.tiles[0];if(n&&n.length){for(var o=0,f=n;o<f.length;o++){var s=f[o];if(s.status!==TileState$3.LOADED){continue}this.Ic(e,s,t,i)}}};e.prototype.destroy=function(){};e.prototype.Ic=function(e,r,t,i){var a=e.Vn();if(!r.data){assert(r.data,\"tile have no data\");return}var n=r.data;var o=n.$c;if(!o){return}o.upload(a.context,true);var f=o.zs.buffer;var s=o.Pc.buffer;var u=n.Uc;if(!u){return}var l=u.jc;var v=t.viewState.optimalZoom;var c=n.Sa;var h=i.opacity;var d=1;if(t.viewState.viewMode===\"3D\"){d=t.map.getView().EF()}for(var _=0,g=l.length;_<g;_++){var y=l[_];var m=i.HY[y.color]||i.HY[4];var p={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:y.width,u_color:[m[0],m[1],m[2],m[3]*h],u_border:0,u_dash:undefined,u_localDeltaCenter:c,u_skyHeight:d,u_viewHeight:t.viewState.size[1]};var b=f.size;a.context.getExtension(\"OES_element_index_uint\");a.Ce(p,{a_pos:{type:\"vec2\",buffer:f,Re:b,offset:4*0},a_normal:{type:\"vec2\",buffer:f,Re:b,offset:4*2},a_distance:{type:\"float\",buffer:f,Re:b,offset:4*4},a_dir:{type:\"vec2\",buffer:f,Re:b,offset:4*5}},y.length,s,\"TRIANGLES\",i.depthTest,ColorMode.Si,i.rejectMapMask||!t.map.getMask()?undefined:StencilMode.writeWithStencil,undefined,y.offset)}};return e}(LayerRender);var VTRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i){var a=e.context;var n=a.gl;return};return e}(LayerRender);var skyFragmentString=\"precision highp float;\\nuniform float u_opacity;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n  // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity;\\n}\";var skyVertextString=\"precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute vec4 a_color;\\nvarying vec4 v_color;\\nvarying vec4 v_pos;\\n\\nvoid main() {\\n    vec4 pos = vec4(a_pos.xy, 0, 1);\\n    // vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_color = a_color;\\n    v_pos = gl_Position;\\n}\\n\";var skyPatternFragmentString=\"precision highp float;\\nuniform sampler2D u_texture;\\n\\nuniform float u_opacity;\\nuniform float u_rotation;\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\nvoid main() {\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n  gl_FragColor = texture2D(u_texture, vec2(v_coord.x+u_rotation, v_coord.y));\\n  // // float x = v_pos.x / v_pos.w;\\n  gl_FragColor.a *= u_opacity*v_opacity;\\n}\";var skyPatternVertextString=\"precision highp float;\\nuniform vec2 u_skyline;\\nuniform mat4 u_mvpMatrix;\\nattribute vec4 a_pos;\\nattribute float a_opacity;\\nattribute vec2 a_coord;\\n\\n\\nvarying vec2 v_coord;\\nvarying float v_opacity;\\n\\nvoid main() {\\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\\n    gl_Position = pos;\\n    v_coord = a_coord;\\n    v_opacity = a_opacity;\\n}\\n\";var skyUniforms={u_mvpMatrix:\"mat4\",u_opacity:\"float\",u_skyline:\"vec2\"};var skyAttributes={a_pos:{Me:\"float32\",Oe:\"vec4\"},a_color:{Me:\"float32\",Oe:\"vec4\"}};function getAtmosphereTexture(e,r){var t=e.vn.nX(\"00001\",\"2\",\"texture\",r);if(t){return\"https://\"+t}return\"\"}function getSkyTexture(e,r){var t=e.vn.nX(\"00001\",\"1\",\"texture\",r);if(t){return\"https://\"+t}return\"\"}var sky={uniforms:skyUniforms,attributes:skyAttributes,vertexSource:skyVertextString,fragmentSource:skyFragmentString};var skyPatternUniforms={u_mvpMatrix:\"mat4\",u_opacity:\"float\",u_skyline:\"vec2\",u_texture:\"sampler2D\",u_rotation:\"float\"};var skyPatternAttributes={a_pos:{Me:\"float32\",Oe:\"vec4\"},a_opacity:{Me:\"float32\",Oe:\"float\"},a_coord:{Me:\"float32\",Oe:\"vec2\"}};var skyPattern={uniforms:skyPatternUniforms,attributes:skyPatternAttributes,vertexSource:skyPatternVertextString,fragmentSource:skyPatternFragmentString};var SmartArrayBuffer$3=M[\"SmartArrayBuffer\"];var SkyLayerRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;return e}e.prototype.renderFrame=function(e,r,t,i,a,n){if(!a.map.mapStyle.vn){return}var o=getAtmosphereTexture(a.map.mapStyle,t.viewState.optimalZoom);var f=o?a.map.getImage(o):undefined;if(f){this.jB(e,t,a,o,t.viewState.zoom<12?1:0)}else if(o&&a.map.I_&&!a.map.I_.MH(o)){a.map.addImage(o,{url:o,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return a.map.setNeedUpdate(true)}})}if(!o||!f){this.NB(e,t,t.map.sX(t.viewState.optimalZoom),t.viewState.zoom<12?1:0)}var s=getSkyTexture(a.map.mapStyle,t.viewState.optimalZoom);var u=s?a.map.getImage(s):undefined;if(u){this.jB(e,t,a,s,step(t.viewState.zoom-11,1,0))}else if(s&&a.map.I_&&!a.map.I_.MH(s)){a.map.addImage(s,{url:s,filter:\"LINEAR\",wrap:\"REPEAT\",cb:function(){return a.map.setNeedUpdate(true)}})}if(!s||!u){this.NB(e,t,t.map.JF(t.viewState.optimalZoom),step(t.viewState.zoom-11,1,0))}return};e.prototype.NB=function(e,r,t,i){var a=e.rS();var n=r.viewState;var o=e.context;var f=r.map.getView();var s=n.size,u=n.pitch,l=n.optimalZoom;if(f.type===\"2D\"){return}var v=f.Uu();v=this.yz(f.getStatus().pitch,v,f.getStatus().size[1],l);if(v<=0||u<=0){return}var c=r.map;var h=this.WF(v,t,n,f);if(!this.zs){this.zs=new SmartArrayBuffer$3(o,h,32,\"ARRAY_BUFFER\")}else{this.zs.update(h)}var d=this.zs.buffer;a.Ce({u_opacity:i,u_mvpMatrix:n.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:\"vec4\",buffer:d,Re:d.size,offset:0},a_color:{type:\"vec4\",buffer:d,Re:d.size,offset:16}},d.length,undefined,\"TRIANGLES\",undefined,ColorMode.Si,undefined)};e.prototype.jB=function(e,r,t,i,a){if(a===0){return}var n=e.EB();var o=e.rS();var f=r.viewState;var s=e.context;var u=r.map.getView();var l=f.size,v=f.pitch,c=f.optimalZoom;if(u.type===\"2D\"){return}var h=u.Uu();h=this.yz(u.getStatus().pitch,h,u.getStatus().size[1],c);if(h<=0||v<=0){return}var d=r.map;var _=d.JF(f.optimalZoom);var g=(180-f.rotation)/360;var y=this.WB(h,f,u);if(!this.zs){this.zs=new SmartArrayBuffer$3(s,y,32,\"ARRAY_BUFFER\")}else{this.zs.update(y)}var m=this.zs.buffer;var p=t.map.getImage(i);if(p){n.Ce({u_opacity:a,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0],u_texture:p,u_rotation:g},{a_pos:{type:\"vec4\",buffer:m,Re:m.size,offset:0},a_opacity:{type:\"float\",buffer:m,Re:m.size,offset:16},a_coord:{type:\"vec2\",buffer:m,Re:m.size,offset:24}},m.length/2,undefined,\"TRIANGLES\",undefined,ColorMode.Si,undefined);o.Ce({u_opacity:1,u_mvpMatrix:f.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:\"vec4\",buffer:m,Re:m.size,offset:0},a_color:{type:\"vec4\",buffer:m,Re:m.size,offset:16}},m.length/2,undefined,\"TRIANGLES\",undefined,ColorMode.Si,undefined,undefined,m.length/2)}};e.prototype.WF=function(e,r,t,i){var a=t.size[1]/2;var n=t.pitch,o=t.zoom;var f=[-1,1-e/a];var s=[1,1-e/a];r[3]=1;var u=i.map.mapStyle.dn(30001,1,o);var l=[.988,.976,.949,1];if(u&&u.faceColor){l=u.faceColor.normalize()}var v=__spreadArrays(l);v[3]=1;var c=__spreadArrays(l)||[1,1,1,0];c[3]=0;var h=__spreadArrays(l)||[1,1,1,Math.min(.1,1/o)];h[3]=Math.min(.1,5/o);var d=__spreadArrays(r)||[1,1,1,1];d[3]=-.7;var _=new Float32Array(__spreadArrays([f[0],f[1],0,0],v,[-1,1,0,0],r,[s[0],s[1],0,0],v,[s[0],s[1],0,0],v,[-1,1,0,0],r,[1,1,0,0],r,[f[0],f[1],0,0],h,[-1,1,0/3,0],c,[s[0],s[1],0,0],h,[s[0],s[1],0,0],h,[-1,1,0/3,0],c,[1,1,0/3,0],c));return _};e.prototype.WB=function(e,r,t){var i=r.size[1]/2;var a=r.pitch,n=r.zoom,o=r.rotation;var f=t.X(0,e);var s=t.X(r.size[0],e);var u=t.X(0,e+0);var l=t.X(r.size[0],e+0);var v=.5;var c=t.pz().dz()*v;var h=0;var d=r.fov/Math.PI/2/2;var _=0-d;var g=0+d;var y=-0;var m=1;var p=t.map.mapStyle.dn(30001,1,n);var b=[.988,.976,.949,1];if(p&&p.faceColor){b=p.faceColor.normalize()}var x=__spreadArrays(b)||[1,1,1,0];x[3]=0;var C=__spreadArrays(b)||[1,1,1,Math.min(.1,1/n)];C[3]=Math.min(.1,5/n);var S=new Float32Array(__spreadArrays([f[0],f[1],h,0,1,0,_,m,f[0],f[1],c,0,1,0,_,y,s[0],s[1],h,0,1,0,g,m,s[0],s[1],h,0,1,0,g,m,s[0],s[1],c,0,1,0,g,y,f[0],f[1],c,0,1,0,_,y,u[0],u[1],0,0],C,[u[0],u[1],c/3,0],x,[l[0],l[1],0,0],C,[l[0],l[1],0,0],C,[l[0],l[1],c/3,0],x,[u[0],u[1],c/3,0],x));return S};e.prototype.yz=function(e,r,t,i){var a=Math.max(e/100-.4,0);var n=Math.max((i-24)*4,0)/100;return t*(a-n)};return e}(LayerRender);function step(e,r,t){return Math.max(Math.min(e,r),t)}var indoorStyles={PoiStyle:[{$:{mainkey:\"10001\",subkey:\"1\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"2\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"3\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"4\"},StyleItem:[{$:{level:\"18\",desc:\"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0\"}},{$:{level:\"19,20\",desc:\"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"5\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"6\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"7\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"8\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,9,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"9\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,10,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"10\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"11\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"12\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"13\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"14\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"15\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"16\"},StyleItem:[{$:{level:\"20\",desc:\"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"17\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"18\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"19\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"20\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,39,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"21\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"22\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"23\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"24\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"25\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"26\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"27\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"28\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"29\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"30\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"31\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"32\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"33\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"34\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"35\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"36\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"37\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"38\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"39\"},StyleItem:[{$:{level:\"17\",desc:\"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"40\"},StyleItem:[{$:{level:\"17\",desc:\"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"41\"},StyleItem:[{$:{level:\"20\",desc:\"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"42\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"43\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,31,1,1,12,0xff000000,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"44\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"45\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"46\"},StyleItem:[{$:{level:\"18\",desc:\"50,34,2,1,0,0xff935676,0xffffffff,0x0,0\"}},{$:{level:\"19,20\",desc:\"50,34,1,1,12,0xff935676,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"47\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"48\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"49\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"50\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"51\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"52\"},StyleItem:[{$:{level:\"20\",desc:\"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"53\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"54\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"55\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"56\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff000000,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"57\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"58\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"59\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"60\"},StyleItem:[{$:{level:\"16,17\",desc:\"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"62\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"63\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"64\"},StyleItem:[{$:{level:\"17\",desc:\"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"65\"},StyleItem:[{$:{level:\"17\",desc:\"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"66\"},StyleItem:[{$:{level:\"17\",desc:\"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"67\"},StyleItem:[{$:{level:\"17\",desc:\"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"68\"},StyleItem:[{$:{level:\"17\",desc:\"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"69\"},StyleItem:[{$:{level:\"17\",desc:\"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"70\"},StyleItem:[{$:{level:\"17\",desc:\"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"71\"},StyleItem:[{$:{level:\"17\",desc:\"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"72\"},StyleItem:[{$:{level:\"17\",desc:\"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"18,19,20\",desc:\"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"73\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"74\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"75\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"76\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"77\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"78\"},StyleItem:[{$:{level:\"18,19\",desc:\"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0\"}},{$:{level:\"20\",desc:\"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"79\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"80\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"81\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"82\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"83\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"84\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"85\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"86\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"87\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"88\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"89\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"90\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"91\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"92\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"93\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"94\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"95\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"96\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"97\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"98\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"99\"},StyleItem:[{$:{level:\"18,19,20\",desc:\"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1\"}}]},{$:{mainkey:\"10001\",subkey:\"105\"},StyleItem:[{$:{level:\"16,17,18\",desc:\"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"106\"},StyleItem:[{$:{level:\"19,20\",desc:\"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0\"}}]},{$:{mainkey:\"10001\",subkey:\"107\"},StyleItem:[{$:{level:\"16,17,18,19,20\",desc:\"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0\"}}]}],LineStyle:[{$:{mainkey:\"20001\",subkey:\"1\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00\"}}]},{$:{mainkey:\"20001\",subkey:\"2\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080\"}}]}],RegionStyle:[{$:{mainkey:\"30001\",subkey:\"1\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"90,1,0xfffcfbed\"}}]},{$:{mainkey:\"30001\",subkey:\"99\"},StyleItem:[{$:{level:\"19,20\",desc:\"90,1,0x1a151b2b\"}}]},{$:{mainkey:\"30001\",subkey:\"98\"},StyleItem:[{$:{level:\"19,20\",desc:\"90,1,0x8c151b2b\"}}]}],BuildingStyle:[{$:{mainkey:\"30001\",subkey:\"2\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255\"}}]},{$:{mainkey:\"30001\",subkey:\"3\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255\"}}]},{$:{mainkey:\"30001\",subkey:\"4\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"5\"},StyleItem:[{$:{level:\"17,18,19,20\",desc:\"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"6\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"7\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"8\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"9\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"10\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255\"}}]},{$:{mainkey:\"30001\",subkey:\"11\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255\"}}]},{$:{mainkey:\"30001\",subkey:\"12\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255\"}}]},{$:{mainkey:\"30001\",subkey:\"13\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"14\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255\"}}]},{$:{mainkey:\"30001\",subkey:\"15\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255\"}}]},{$:{mainkey:\"30001\",subkey:\"16\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255\"}}]},{$:{mainkey:\"30001\",subkey:\"17\"},StyleItem:[{$:{level:\"15,16,17,18,19,20\",desc:\"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255\"}}]}]};var allowedStyleKeys=[\"strokeColor\",\"strokeOpacity\",\"strokeWeight\",\"fillColor\",\"fillOpacity\",\"strokeStyle\",\"strokeDasharray\",\"fontSize\"];var indoorStyleSet={setOptions:function(e){},init:function(){this.NC={};this.UC(indoorStyles);this.WC=[];return this.NC},GC:function(e){var r=AMap.getConfig()[\"protocol\"]+\"://webapi.amap.com\"+\"/images/indoor_icon/\"+(\"36/\"+e+\"@2x\")+\".png\";return r},HC:function(e){var r=true;for(var t=13;t<=22;t++){var i=this.VC(e,t);if(i&&(i.fontSize>0||i.iconId)){r=false;break}}return r},VC:function(e,r){return this.Tn(e,r)},ZC:function(e,r){return this.Tn(e,r)},Pr:function(e,r){return this.Tn(e,r)},YC:function(e,r){var t=allowedStyleKeys;if(r){for(var i in r){if(r.hasOwnProperty(i)&&t.indexOf(i)>=0&&e[i]===void 0){e[i]=r[i]}}}return e},JC:function(e,r){if(!e){return null}var t=allowedStyleKeys;var i={};for(var a=0,n=t.length;a<n;a++){var o=t[a];if(e.hasOwnProperty(o)&&e[o]!==void 0){i[o]=e[o]}}this.YC(i,r);return i},Tn:function(e,r){var t=e[0];var i=e[1];var a=t+\"_\"+i;r=Math.round(r);var n=this.NC[a];if(!n){if(this.WC.indexOf(a)<0){this.WC.push(a)}return null}for(var o=0,f=n.length;o<f;o++){if(n[o].levels.indexOf(\"\"+r)>=0){return n[o].styleOpts}}if(r>20){var s=n[n.length-1];if(s.levels.indexOf(\"20\")>=0){s.levels.push(\"\"+r);return s.styleOpts}}return null},UC:function(e){for(var r in e){if(e.hasOwnProperty(r)){this.XC(e[r],r)}}},XC:function(e,r){for(var t=0,i=e.length;t<i;t++){this.qC(e[t],r)}},qC:function(e,r){var t=e[\"$\"];if(!t){return}var i=t[\"mainkey\"];var a=t[\"subkey\"];var n=e[\"StyleItem\"];var o=i+\"_\"+a;if(this.NC[o]);this.NC[o]=this.QC(n,r)},QC:function(e,r){var t=[];for(var i=0,a=e.length;i<a;i++){var n=this.KC(e[i],r);if(!n){continue}t.push(n)}return t},KC:function(e,r){var t=e[\"$\"];if(!t){return}var i={};i[\"levels\"]=t[\"level\"].split(\",\");i[\"desc\"]=t[\"desc\"].split(\",\");i[\"styleOpts\"]=this.$I(i,i.desc,r);i[\"styleOpts\"][\"levels\"]=i.levels;return i},BI:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(r.shift());r=r.slice(0,3);var a=\"rgb(\"+r.join(\",\")+\")\";return a},WI:function(e){if(e.trim){e=e.trim()}var r=this.BI(e.substr(2,8));return r},GI:function(){return this.HI++},$I:function(e,r,t){var i;switch(t){case\"PoiStyle\":i={iconId:parseInt(r[1],10),fontSize:Math.min(15,parseInt(r[4],10)||0),fillColor:this.WI(r[5]),strokeColor:this.WI(r[6]),VI:parseInt(r[8],10)===0};if(i.iconId===1){i.iconId=0}break;case\"LineStyle\":i={fillColor:\"rgb(252, 249, 242)\",strokeColor:this.WI(r[7]),strokeWeight:Math.max(2,Math.round(parseInt(r[2],10)/3))};break;case\"RegionStyle\":i={fillColor:this.WI(r[2])};break;case\"BuildingStyle\":i={fillColor:this.WI(r[1]),strokeColor:this.WI(r[2])};break;default:return null}i[\"_uid\"]=this.GI();return i}};var assign$1=M[\"lodash\"][\"assign\"];var outLineStyle={high:{fillColor:\"rgb(252, 249, 242)\",strokeColor:\"rgb(230,142,0)\"},unHigh:{fillColor:\"rgb(252, 249, 242)\",strokeColor:\"rgb(171,171,171)\"}};var IndoorRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e._config=AMap[\"getConfig\"]();e.YI=[17,zoomRange[1]];e.l$=indoorStyleSet.init();e.a$=new AMap[\"LabelsLayer\"]({opacity:1,collision:true,allowCollision:true,zIndex:9,zooms:[17,zoomRange[1]],visible:false});e.GL=false;e.i$=false;e.WL=\"\";e._map=null;e.f$=false;e.UL=null;e.pD=false;e.t$();e.sZ=false;return e}e.prototype[\"getContainer\"]=function(){return document.createElement(\"div\")};e.prototype.renderFrame=function(e,r,t,i,a){};e.prototype.render=function(e){var r=this;var t=e.data;if(!t||t.length<1||!this.gs){return false}this._map=this.gs.map;if(!this.sZ){this.sZ=true;this._map.on(\"click\",function(e){if(r.e$){r.e$.hide()}r.gs.oZ()})}var i=this.gs.ZI();var a=i.indoor,n=i.floorInfo;if(i&&i[\"visible\"]===false){return false}var o=this.qI(t);this.UL=t;if(!o){return false}if(!i[\"changeFloor\"]){var f={centerId:o};this.gs.setRenderData(f)}var s=Object.keys(t);for(var u=0;u<s.length;u++){var l=s[u];var v=t[l];var c=v[\"building\"];if(!c||!c[\"properties\"]){continue}var h=this.gs[\"getIntersect\"](c[\"properties\"][\"outside_outline\"]);if(!h){continue}if(!a[l]){var d=\"1\";if(n[l]){d=n[l]}this.gS(v,d)}else{var _=a[l][\"curFloor\"];var d=n[l];if(_!==d){this.gS(v,d)}}}};e.prototype.HF=function(e){this.gs=e};e.prototype.t$=function(){var e=this;if(!this.i$){AMap[\"plugin\"](\"AMap.IndoorMapFloorBar\",function(){e.i$=true})}};e.prototype.QI=function(e,r){var o=this;var t=this.gs.ZI();var i=t.floorInfo,a=t.showId,n=t.centerId,f=t.i4;var s=null;var u=null;var l=Number(i[r])||1;var v=e.properties;if(v&&v[\"floor_nonas\"]){s=v[\"floor_nonas\"];u=v[\"floor_indexs\"]}if(!s||!u){return false}if(u.length>1){if(u[0]>u[1]){s=s.reverse();u=u.reverse()}}if(!this.e$&&this.i$){if(M&&M[\"IndoorMapFloorBar\"]){this.e$=new M[\"IndoorMapFloorBar\"]({floors:s,floorIndexs:u,currentFloor:l});this.WL=n;this.gs.setBar(this.e$);this.gs.setRenderData({barCenterId:this.WL})}if(!this.e$){return false}this._map.addControl(this.e$);this.e$.on(\"floorchange\",function(e){o.pD=true;var r=e[\"currentIndex\"];var t=o.gs.ZI();var i=r;var a=t.centerId;o.gs.n$(a,i);var n=o._map.Mv.getSource(o.gs.co());if(a){o.gs.setRenderData({changeFloor:true});n.JR(a,i)}})}else if(this.e$){this.WL=n;this.e$[\"setOption\"]({floors:s,floorIndexs:u,currentFloor:l});this.gs.setRenderData({barCenterId:this.WL})}if(f&&this.e$){this.e$.hide()}if(!this.GL&&this._map){this.GL=true;this._map.on(\"moveend\",function(){var e=o.vD();if(e){var r={centerId:e};o.gs.setRenderData(r)}o.gs.setRenderData({changeFloor:false});o.a4();o.gs.uD()})}};e.prototype.a4=function(){var e=1;var r=this.gs.ZI();var t=r.centerId;if(t===this.WL){return false}if(r[\"floorInfo\"][t]){e=r[\"floorInfo\"][t]}if(this.UL&&this.UL[t]&&this.UL[t][\"building\"]){var i=this.UL[t][\"building\"];var a=i.properties;var n=null;var o=null;if(a&&a[\"floor_nonas\"]){n=a[\"floor_nonas\"];o=a[\"floor_indexs\"]}if(!n||!o){return false}if(o.length>1){if(o[0]>o[1]){n=n.reverse();o=o.reverse()}}if(this.e$){this.e$[\"setOption\"]({floors:n,floorIndexs:o,currentFloor:Number(e)});this.WL=t;this.gs.setRenderData({barCenterId:this.WL})}}};e.prototype.qI=function(e){var r=this._map.getCenter().toJSON();var t=null;var i=\"\";var a=Object.keys(e);for(var n=0;n<a.length;n++){var o=a[n];var f=e[o];if(f[\"building\"]&&f[\"building\"][\"properties\"]&&f[\"building\"][\"properties\"][\"centerPoint\"]){var s=f[\"building\"][\"properties\"][\"centerPoint\"];var u=new AMap[\"LngLat\"](s[0],s[1]);var l=AMap[\"GeometryUtil\"][\"distance\"](r,u);if(t){if(l<t){t=l;i=o}}else{t=l;i=o}}}return i};e.prototype.vD=function(){var e=this._map.getCenter().toJSON();var r=null;var t=\"\";var i=this.gs.ZI();var a=i[\"indoor\"];var n=Object.keys(a);for(var o=0;o<n.length;o++){var f=n[o];var s=a[f];if(s[\"buildingCenter\"]){var u=s[\"buildingCenter\"];var l=new AMap[\"LngLat\"](u[0],u[1]);var v=AMap[\"GeometryUtil\"][\"distance\"](e,l);if(r){if(v<r){r=v;t=f}}else{r=v;t=f}}}return t};e.prototype.fD=function(e,r){var t=this.gs.ZI();if(!t[\"floorInfo\"]){t[\"floorInfo\"]={}}t[\"floorInfo\"][e]=r;this.gs.setRenderData(t)};e.prototype.gS=function(e,r){var t=Object.keys(e[\"data\"])[0];if(r){t=r}if(!e[\"data\"][t]){return false}var i=e[\"data\"][t][\"floor\"];var a=e[\"data\"][t][\"id\"];if(!i||!a){return false}var n=this.gs.ZI();this.fD(a,r);var o=n[\"centerId\"];if(o===a){this.QI(e[\"building\"],a)}this.o$(i,a,e[\"building\"],r);this.gs.mD(true)};e.prototype.ar=function(e){var r=this.gs.ZI();var t=r.indoor;if(t&&t[e]){if(t[e][\"polygons\"]){this.gs.$F.remove(t[e][\"polygons\"])}if(t[e]&&t[e][\"markers\"]&&t[e][\"markers\"].length>0){this.a$.remove(t[e][\"markers\"])}}};e.prototype.h$=function(e){var r=this;if(!e||!e[\"properties\"]){return null}var t=e[\"properties\"][\"poitype\"];var i=e[\"position\"];var a=t.join(\"_\");var n=this.l$[a]&&this.l$[a][0];var o=this.gs.ZI();if(n&&n[\"styleOpts\"]&&n[\"styleOpts\"][\"iconId\"]){var f=n[\"styleOpts\"][\"iconId\"];var s=indoorStyleSet.GC(f);var u={position:i,zooms:e[\"zooms\"],opacity:o[\"opacity\"],rank:3e5,icon:{size:[18,18],image:s,anchor:\"center\"},extData:e[\"properties\"],innerOverlay:true,bubble:true};if(e[\"text\"]){var l=n[\"styleOpts\"][\"fillColor\"]||\"rgb(132,99,142)\";var v=n[\"styleOpts\"][\"strokeColor\"]||\"#FFFFFF\";u=assign$1(u,{text:{content:e[\"text\"],direction:\"bottom\",style:{fillColor:l,strokeColor:v,fontSize:12}}})}var c=new AMap[\"LabelMarker\"](u);c.on(\"click\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"click\",e)}});c.on(\"mousemove\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"mousemove\",e)}});c.on(\"mouseout\",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi(\"mousemove\",e)}});return c}return null};e.prototype.bi=function(e,r){var t=\"hotspot\";var i;var a=r.target.getExtData();switch(e){case\"click\":i=t+e;break;case\"mouseover\":i=t+\"over\";break;case\"mouseout\":i=t+\"out\";break}if(i){var n=this._map.getProjection();var o=n[\"unproject\"](r[\"lnglat\"][\"lng\"],r[\"lnglat\"][\"lat\"]),f=o[0],s=o[1];var u={type:i,id:a[\"pid\"],name:a[\"name\"],lnglat:r[\"lnglat\"],originEvent:r[\"originEvent\"]};this._map.emit(i,u)}};e.prototype.o$=function(e,r,t,i){var s=this;if(!this._map||!r){return false}var a=this.gs.ZI();this.ar(r);var n=this._map[\"getZoom\"]();var o=[];var f=[];var u=e[\"shops\"];var l=e[\"floor\"];var v=e[\"cons\"];var c={building_id:r,floor:l};var h=u.length;var d=[];var _=[];var g=[];var y=[];var m=[];for(var p=0;p<h;p++){var b=u[p];var x=b.properties,C=b.geometry;var S=assign$1({shop:{id:x[\"cpid\"],name:x[\"name\"]}},c);var M=\"#FFFFFF\";var w=\"#FE9A2E\";if(x&&x[\"regiontype\"]){var k=x[\"regiontype\"].join(\"_\");var T=this.l$[k]&&this.l$[k][0];if(T&&T[\"styleOpts\"]){M=T[\"styleOpts\"][\"fillColor\"];w=T[\"styleOpts\"][\"strokeColor\"]}}_.push(M);g.push(w);m.push(a[\"opacity\"]);y.push({indoorPolygon:true,indoorData:S,id:r});d.push(C.coordinates);if(x[\"zoom_min\"]&&x[\"zoom_max\"]&&x[\"font_anthor_point\"]){var I=x[\"font_anthor_point\"];var A={position:[I[0],I[1]],text:x[\"name\"],properties:x,zooms:[x[\"zoom_min\"],x[\"zoom_max\"]]};var $=this.h$(A);if($){f.push($)}}}var F=new AMap[\"Polygon\"]({bubble:true,path:d,innerOverlay:true,cursor:a[\"cursor\"],zooms:this.YI,async:true,fillColor:function(e){return _[e]},strokeColor:function(e){return g[e]},fillOpacity:function(e){return m[e]},strokeOpacity:a[\"opacity\"],strokeWeight:1,zIndex:a[\"zIndex\"]+2});F.on(\"click\",function(e){var r=y[e.vectorIndex];var t=r.id;if(s.e$){s.e$.show()}if(t){var i={centerId:t,changeFloor:true};s.gs.setRenderData(i);s.a4();s.gs.uD()}r[\"indoorData\"][\"ext\"]={type:\"polygon\",data:e};s.gs.emit(\"click\",r[\"indoorData\"])});F.on(\"mouseover\",function(e){for(var r=0,t=y.length;r<t;r++){var i=y[r];if(i[\"originFillOpacity\"]&&i[\"originFillColor\"]){_[r]=i[\"originFillColor\"];m[r]=i[\"originFillOpacity\"]}}var a=y[e.vectorIndex];var n=e.lnglat;a[\"originFillOpacity\"]=m[e.vectorIndex];a[\"originFillColor\"]=_[e.vectorIndex];_[e.vectorIndex]=\"#B45F04\";m[e.vectorIndex]=.4;if(a[\"indoorData\"]&&a[\"indoorData\"][\"shop\"]&&a[\"indoorData\"][\"shop\"][\"name\"]){var o=a[\"indoorData\"][\"shop\"][\"name\"];var f=\"<div style=\"+'\"padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;\">'+o+\"</div>\";s.JT=new AMap[\"Marker\"]({position:n,content:f,anchor:\"bottom-left\",map:s._map,noSelect:true})}F.to()});F.on(\"mouseout\",function(e){for(var r=0,t=y.length;r<t;r++){var i=y[r];if(i[\"originFillOpacity\"]&&i[\"originFillColor\"]){_[r]=i[\"originFillColor\"];m[r]=i[\"originFillOpacity\"]}}if(s.JT){s._map.remove(s.JT)}F.to()});o.push(F);var P=null;var L=[];if(l[\"geometry\"]&&l[\"geometry\"][\"coordinates\"]){var M=outLineStyle[\"unHigh\"][\"fillColor\"];var w=outLineStyle[\"unHigh\"][\"strokeColor\"];if(a[\"centerId\"]===r){w=outLineStyle[\"high\"][\"strokeColor\"]}var R=l[\"geometry\"][\"coordinates\"];if(l[\"geometry\"][\"type\"]&&l[\"geometry\"][\"type\"]===\"MultiPolygon\"){if(R[0]&&R[0].length>1){var E=[];for(var O=0;O<R[0].length;O++){E.push(R[0][O])}R=E}}for(var D=0;D<R.length;D++){var U=new AMap[\"Polygon\"]({bubble:true,async:true,strokeWeight:3,innerOverlay:true,zooms:this.YI,path:R[D],fillColor:M,strokeColor:w,zIndex:a[\"zIndex\"]+1,fillOpacity:a[\"opacity\"],strokeOpacity:a[\"opacity\"],extData:{indoorPolygon:true,id:r}});P=true;U.on(\"click\",function(e){var r=e.target.getExtData();var t=r.id;if(s.e$){s.e$.show()}if(t){var i={centerId:t,changeFloor:true};s.gs.setRenderData(i)}s.a4();s.gs.uD()});L.push(U);o.push(U)}}if(a[\"showId\"]){this.gs.setRenderData({centerId:a[\"showId\"]})}this.gs.uD();this.gs.$F.add(o);if(!a[\"indoor\"][r]){a[\"indoor\"][r]={}}a[\"indoor\"][r][\"curFloor\"]=i;a[\"indoor\"][r][\"polygons\"]=o;a[\"indoor\"][r][\"outline\"]=L;if(t&&t[\"properties\"]&&t[\"properties\"][\"centerPoint\"]){a[\"indoor\"][r][\"buildingCenter\"]=t[\"properties\"][\"centerPoint\"]}if(a&&a[\"showId\"]===r&&P){if(a[\"animateState\"]!==\"undefined\"){this._map.setStatus({animateEnable:a[\"animateState\"]})}}var N=v.length;for(var B=0;B<N;B++){var H=v[B];var C=H.geometry,x=H.properties;var z=x.zoom_min,G=x.zoom_max;var A={properties:x,position:[C[\"coordinates\"][0],C[\"coordinates\"][1]],zooms:[z,G]};var $=this.h$(A);if($){f.push($)}}if(!this.f$){this._map.add(this.a$);this.gs.setRenderData({labelsLayer:this.a$});this.f$=true}a[\"indoor\"][r][\"markers\"]=f;if(typeof a[\"zIndex\"]!==\"undefined\"){this.a$.setzIndex(a[\"zIndex\"]+9)}this.a$.add(f);var j=this._map&&this._map[\"showLabel\"];if(a[\"showLabels\"]&&j){this.a$.show()}this.gs.KI(a);var V={status:0,id:r,building:{id:r}};if(t[\"properties\"]){var W=t[\"properties\"];V[\"building\"][\"name\"]=W[\"name_cn\"];V[\"building\"][\"lnglat\"]=W[\"centerPoint\"];V[\"building\"][\"floor\"]=i||1;V[\"building\"][\"floor_details\"]={floor_indexs:W[\"floor_indexs\"],floor_nonas:W[\"floor_nonas\"],floor_names:W[\"floor_names\"]};this.gs.setRenderData(V)}if(!a[\"complete\"]){a[\"complete\"]={}}if(!a[\"complete\"][r]){a[\"complete\"][r]={}}if(!a[\"complete\"][r][i]){this.gs.emit(\"floor_complete\",V);a[\"complete\"][r][i]=true}else if(this.pD){this.gs.emit(\"floor_complete\",V);this.pD=false}this.gs.setRenderData(a[\"complete\"])};return e}(LayerRender);var map$3=M[\"lodash\"][\"map\"];var DistrictRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.gC={Nation_Border_China:\"nation-stroke\",Nation_Border_Foreign:\"nation-stroke\",Coastline_China:\"coastline-stroke\",Coastline_Foreign:\"coastline-stroke\",Province_Border_China:\"province-stroke\",Province_Border_Foreign:\"province-stroke\",City_Border_China:\"city-stroke\",County_Border_China:\"county-stroke\"};e.xC={};return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}var n=t.viewState.optimalZoom;var o=t.map.getMask();var f=r.tiles;var s=i.layer.getLayerOptions(),u=s.styles,l=s.adcode;if(i.ce){e.context.clear({depth:true})}for(var v=0,c=f;v<c.length;v++){var h=c[v];if(h.status!==TileState$1.LOADED){continue}this.Lc(e,h,t,i,u,l);this.Ic(e,h,t,i,u,l);this.lH(e,h,t,i)}this.PB(e,t,i,o)};e.prototype.destroy=function(){};e.prototype.clearStyleCache=function(){this.xC={}};e.prototype.Lc=function(e,r,t,i,a,n){var o=e.Wn();var f=r.data;var s=f.Dc;if(!s){return}s.upload(o.context,true);var u=s.zs;var l=s.Pc;var v=f.Oc;var c=i.opacity;var h=[r.Sa[0],r.Sa[1]];var d=1;if(t.viewState.viewMode===\"3D\"){d=t.map.getView().EF()}var _=r.zo.z;if(_<LocalZoom){var g=r.localCoord.center;h[0]+=g[0];h[1]+=g[1]}for(var y=0,m=v.jc;y<m.length;y++){var p=m[y];var b=JSON.parse(\"\"+p[\"mainkey\"]);var x=this.Mn(a,b,\"polygon\");var C=x[\"fill\"];if(!C||C.length!==4||n&&!n[b.adcode]&&!n[b.SOC]&&!n[b.adcode_pro]&&!n[b.adcode_cit]){continue}var S={u_matrix:t.viewState.mvpMatrix,u_color:[C[0],C[1],C[2],C[3]*c],u_offset:[0,0],u_localDeltaCenter:h,u_viewHeight:t.viewState.size[1],u_skyHeight:d};if(S){o.context.getExtension(\"OES_element_index_uint\");o.Ce(S,{a_pos:{type:\"vec2\",Re:u.size,offset:0,buffer:u}},p.length,l,\"TRIANGLES\",i.depthTest,ColorMode.Si,this.OH(i.rejectMapMask,!!t.map.getMask()),undefined,p.offset)}}};e.prototype.Ic=function(e,r,t,i,s,a){var u=this;var n=e.Vn();if(!r.data){console.error(\"tile have no data\");return}var o=r.data;var f=o.$c;if(!f){return}f.upload(n.context,true);var l=f.zs.buffer;var v=f.Pc.buffer;var c=o.Uc;var h=c.jc;var d=t.viewState.optimalZoom;var _=[r.Sa[0],r.Sa[1]];var g=i.opacity;var y=1;if(t.viewState.viewMode===\"3D\"){y=t.map.getView().EF()}var m=r.zo.z;if(m<LocalZoom){var p=r.localCoord.center;_[0]+=p[0];_[1]+=p[1]}var b={};var x={};if(h.length===1){var C=h[0][\"mainkey\"];var S=JSON.parse(C,undefined);var M=this.Mn(s,S,\"line\");b[C]=M;x[C]=S}h.sort(function(e,r){var t=e[\"mainkey\"];var i=JSON.parse(t,undefined);var a=u.Mn(s,i,\"line\");if(!b[t]){b[t]=a}if(!x[t]){x[t]=i}var n=r[\"mainkey\"];var o=JSON.parse(n,undefined);var f=u.Mn(s,o,\"line\");if(!b[n]){b[n]=f}if(!x[n]){x[n]=o}return a.zIndex-f.zIndex});for(var w=0,k=h.length;w<k;w++){var T=h[w];var C=T[\"mainkey\"];var S=x[C];var I=+S.type_;var M=b[C];var A=[1,0,1,0];if(M[\"dash\"]){A=__spreadArrays(M[\"dash\"])}if(I===1||I===8){A=[3,2,3,2]}else if(I===10){A=[1,2,1,2]}else if(I===11){A=[5,5,5,5]}else if(I===4){A=[2,2,6,2]}var $=M[this.gC[S.type]];if(!$||$.length!==4||a&&!a[S.adcode]&&!a[S.SOC]&&!a[S.adcode_pro]&&!a[S.adcode_cit]){continue}var F={u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:M[\"stroke-width\"],u_color:[$[0],$[1],$[2],$[3]*g],u_dash:A,u_border:0,u_localDeltaCenter:_,u_viewHeight:t.viewState.size[1],u_skyHeight:y};if(!F){continue}if(F){var P=l.size;n.context.getExtension(\"OES_element_index_uint\");n.Ce(F,{a_pos:{type:\"vec2\",buffer:l,Re:P,offset:4*0},a_normal:{type:\"vec2\",buffer:l,Re:P,offset:4*2},a_distance:{type:\"float\",buffer:l,Re:P,offset:4*4},a_dir:{type:\"vec2\",buffer:l,Re:P,offset:4*5}},T.length,v,\"TRIANGLES\",i.depthTest,ColorMode.Si,this.OH(i.rejectMapMask,!!t.map.getMask()),undefined,T.offset)}}};e.prototype.lH=function(e,r,t,i){var a=e.Wn();var n=a.context;var o=new Float32Array(this.fH(r));var f=[r.Sa[0],r.Sa[1]];var s=n.fe(o,8);var u=r.zo.z;if(u<LocalZoom){var l=r.localCoord.center;f[0]+=l[0];f[1]+=l[1]}var v=[0,1,0,0];if(u===t.viewState.optimalZoom-1){v=[1,0,0,0]}var c={u_matrix:t.viewState.mvpMatrix,u_color:v,u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:t.viewState.size[1],u_skyHeight:1};a.Ce(c,{a_pos:{type:\"vec2\",buffer:s,Re:0,offset:0}},6,undefined,\"TRIANGLES\",false,ColorMode.Si,this.BH(i.rejectMapMask,!!t.map.getMask()),undefined,0)};e.prototype.Mn=function(e,r,t){var i=JSON.stringify(r);if(this.xC[i]){return this.xC[i]}var a=[\"nation-stroke\",\"coastline-stroke\",\"province-stroke\",\"city-stroke\",\"county-stroke\"];var n={};if(!r){return n}if(t===\"line\"){for(var o=0,f=a.length;o<f;o++){var s=a[o];if(e[s]){if(AMap.Util[\"isFunction\"](e[s])){n[s]=AMap.Util.color2RgbaArray(e[s](r))}else{n[s]=AMap.Util.color2RgbaArray(e[s])}}}if(AMap.Util[\"isFunction\"](e[\"stroke-width\"])){n[\"stroke-width\"]=e[\"stroke-width\"](r)}else{n[\"stroke-width\"]=e[\"stroke-width\"]}if(r&&(r[\"adcode_pro\"]||r[\"adcode_city\"])){n[\"dash\"]=AMap.Util[\"isFunction\"](e[\"dash\"])?e[\"dash\"](r):e[\"dash\"]}if(r&&e[\"zIndex\"]!==undefined){n[\"zIndex\"]=AMap.Util[\"isFunction\"](e[\"zIndex\"])?e[\"zIndex\"](r):e[\"zIndex\"]}}else if(t===\"polygon\"){if(AMap.Util[\"isFunction\"](e[\"fill\"])){n[\"fill\"]=AMap.Util.color2RgbaArray(e[\"fill\"](r))}else{n[\"fill\"]=AMap.Util.color2RgbaArray(e[\"fill\"])}n[\"stroke-width\"]=e[\"stroke-width\"]}this.xC[i]=n;return n};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass(\"AMap.MaskLayer\");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};return e}(LayerRender);var Util$7=AMap[\"Util\"];var MapboxRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.yz=1;e.VG=1;e.VG=1;e.ZG=StencilMode.HE;return e}e.prototype.renderFrame=function(e,r,t,i,a){if(!r.s_){return}if(!r||r.tiles.length<1){return}var n=t.viewState.optimalZoom;if(n<=9.8){this.ZG=undefined}else{this.ZG=StencilMode.HE}for(var o=0;o<r.tiles.length;o++){var f=r.tiles[o];if(!f){continue}this.GG(e,f,t,i);this.Lc(e,f,t,i);this.sT(e,f,t,i);this.Ic(e,f,t,i)}if(r.tiles&&r.tiles.length>0){a.map.bZ.dynamic.set(\"firstPaint\",true)}var s=t.map.getMask();this.PB(e,t,i,s)};e.prototype.GG=function(e,r,t,i){var a=e.Wn();var n=r.stencil;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode===\"3D\"){h=t.map.getView().EF()}if(l<LocalZoom){c=[0,0]}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(y&&o.Qx){a.context.getExtension(\"OES_element_index_uint\");a.Ce(y,{a_pos:{type:\"vec2\",Re:f.size,offset:0,buffer:f}},g.length,s,\"TRIANGLES\",undefined,ColorMode.Si,StencilMode.TE,undefined,g.offset)}}};e.prototype.UG=function(e,r,t,i){var a=e.Wn();var n=r.stencil;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode===\"3D\"){h=t.map.getView().EF()}if(l<LocalZoom){c=[0,0]}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(y&&o.Qx){a.context.getExtension(\"OES_element_index_uint\");a.Ce(y,{a_pos:{type:\"vec2\",Re:f.size,offset:0,buffer:f}},g.length,s,\"TRIANGLES\",undefined,ColorMode.Si,StencilMode.FE,undefined,g.offset)}}};e.prototype.Lc=function(e,r,t,i){var a=e.Wn();var n=r.data;if(!n){return}var o=n.Dc;if(!o){return}o.upload(a.context);var f=o.zs;var s=o.Pc;var u=n.Oc;var l=t.viewState.optimalZoom;var v=i.opacity;var c=[r.Sa[0],r.Sa[1]];var h=1;if(t.viewState.viewMode===\"3D\"){h=t.map.getView().EF()}if(l<LocalZoom){if(r.fY);else{c=[0,0]}}for(var d=0,_=u.jc;d<_.length;d++){var g=_[d];var y={u_matrix:t.viewState.mvpMatrix,u_color:n.bgColor,u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:t.viewState.size[1],u_skyHeight:h};if(g.style){var m=g.style;if(m.fillColor){var p=m.fillColor;y[\"u_color\"]=p}}if(y&&o.Qx){a.context.getExtension(\"OES_element_index_uint\");a.Ce(y,{a_pos:{type:\"vec2\",Re:f.size,offset:0,buffer:f}},g.length,s,\"TRIANGLES\",undefined,ColorMode.Si,this.ZG,undefined,g.offset)}}};e.prototype.Ic=function(e,r,t,i){var a=r.data;if(!a||!a.$c){return}var n=a.Uc;var o=t.viewState.optimalZoom;var f=[r.Sa[0],r.Sa[1]];if(o<LocalZoom){f=[0,0]}var s=a.$c;s.upload(e.context);if(!s.uploaded||!s.zs){return}n.jc.sort(function(e,r){if(e.style&&e.style[0]&&e.style[0].jr&&r.style&&r.style[0]&&r.style[0].jr){if(r.style[0].jr<e.style[0].jr){return 1}else{return-1}}return 0});for(var u=0,l=n.jc;u<l.length;u++){var v=l[u];var c=s.zs.buffer;if(!v.style||v.style.length<1){continue}var h={u_color:[0,0,0,.5],u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:\"vec3\",u_dashType:\"int\",u_skyHeight:1,u_viewHeight:1};var d=v.style[0];if(d&&d[\"faceColor\"]&&d[\"faceWidth\"]&&d[\"type\"]&&d[\"type\"]===\"line\"){var _=v.style[0][\"faceColor\"];h[\"u_color\"]=_;h[\"u_width\"]=d[\"faceWidth\"]}else{continue}if(!h){return}var g=e.Xn();g.context.getExtension(\"OES_element_index_uint\");g.Ce(h,{a_pos:{buffer:c,type:\"vec2\",Re:c.size,offset:0},a_normal:{type:\"vec2\",buffer:c,Re:c.size,offset:4*2},a_distance:{type:\"float\",buffer:c,Re:c.size,offset:4*4},a_dir:{type:\"vec2\",buffer:c,Re:c.size,offset:4*5}},v.length,s.Pc.buffer,undefined,undefined,ColorMode.Si,this.ZG,undefined,v.offset)}};e.prototype.sT=function(e,r,t,i){var a=r.data;if(!a||!a.$c){return}var n=a.Uc;var o=t.viewState.optimalZoom;var f=[r.Sa[0],r.Sa[1]];if(o<LocalZoom){f=[0,0]}var s=a.$c;s.upload(e.context);if(!s.uploaded||!s.zs){return}n.jc.sort(function(e,r){if(e.style&&e.style[0]&&e.style[0].Or&&r.style&&r.style[0]&&r.style[0].Or){if(r.style[0].Or<e.style[0].Or){return 1}else{return-1}}return 0});for(var u=0,l=n.jc;u<l.length;u++){var v=l[u];var c=s.zs.buffer;if(!v.style||v.style.length<1){continue}var h={u_color:[0,0,0,.5],u_matrix:t.viewState.mvpMatrix,u_meter_per_pixel:t.viewState.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:f,u_dash:\"vec3\",u_dashType:\"int\",u_skyHeight:1,u_viewHeight:1};var d=v.style[0];if(d&&d[\"borderColor\"]&&d[\"borderWidth\"]&&d[\"type\"]&&d[\"type\"]===\"line\"){var _=v.style[0][\"borderColor\"];h[\"u_color\"]=_;h[\"u_width\"]=d[\"borderWidth\"]}else{continue}if(!h){return}var g=e.Xn();g.context.getExtension(\"OES_element_index_uint\");g.Ce(h,{a_pos:{buffer:c,type:\"vec2\",Re:c.size,offset:0},a_normal:{type:\"vec2\",buffer:c,Re:c.size,offset:4*2},a_distance:{type:\"float\",buffer:c,Re:c.size,offset:4*4},a_dir:{type:\"vec2\",buffer:c,Re:c.size,offset:4*5}},v.length,s.Pc.buffer,undefined,undefined,ColorMode.Si,this.ZG,undefined,v.offset)}};e.prototype.PB=function(e,r,t,i){e.context.clear({stencil:true});if(i){var a=r.map.getLayerByClass(\"AMap.MaskLayer\");if(a){var n=r.uo.getData(a.co(),r.viewState,e.context);var o=a.getRender();if(n&&o){o.renderFrame(e,n,r,t)}}}};e.prototype.fb=function(e,r){var t={strokeWeight:2,strokeOpacity:1,strokeColor:\"rgb(0,0,0)\"};var i=t.strokeWeight;var a=Util$7.color2RgbaArray(t.strokeColor);if(!a){return}a=a.slice(0,3);a.push(t.strokeOpacity);return{u_color:a,u_matrix:r.viewState.mvpMatrix,u_meter_per_pixel:r.viewState.resolution,u_width:i,u_offset:e.zx}};return e}(LayerRender);var Attribute=function(){function e(e,r,t,i,a,n){if(a===void 0){a=false}if(n===void 0){n=0}this.context=e;this.type=r;this.Me=t;this.location=i;this.normalize=a;this.n4=n}e.prototype.set=function(e){var r=this.context.gl;if(!e){this.current=undefined;r.disableVertexAttribArray(this.location);return}if(e.type!==this.type){console.error(\"error webglBuffer type,need \"+this.type+\", receive \"+e.type+\" \");return}if(!this.ke(e)){return}this.current=e;var t;r.enableVertexAttribArray(this.location);this.context.de.set(e.buffer);switch(this.type){case\"float\":case\"int\":t=1;break;case\"vec2\":t=2;break;case\"vec3\":t=3;break;case\"vec4\":t=4;break;default:t=1}var i;switch(this.Me){case\"int8\":i=r.BYTE;break;case\"uint8\":i=r.UNSIGNED_BYTE;break;case\"int16\":i=r.SHORT;break;case\"uint16\":i=r.UNSIGNED_SHORT;break;case\"float32\":i=r.FLOAT;break}assert(i,\"invalid datatype \"+this.Me);r.vertexAttribPointer(this.location,t,i,this.normalize,e.Re,e.offset);var a=this.context.getExtension(\"ANGLE_instanced_arrays\");if(a){a.vertexAttribDivisorANGLE(this.location,0)}if(this.n4>0){if(a){a.vertexAttribDivisorANGLE(this.location,this.n4)}}};e.prototype.ke=function(e){return true};return e}();var Uniform=function(){function e(e,r,t){this.context=e;this.type=r;this.location=t;this.Re=0;this.offset=0;this.te=same;this.ze=e.gl}e.prototype.set=function(e){if(this.te(this.current,e)){return}if(e!==undefined){switch(this.type){case\"bool\":case\"int\":case\"sampler2D\":this.ze.uniform1i(this.location,e);break;case\"sampler2D[]\":this.ze.uniform1iv(this.location,e);break;case\"float\":this.ze.uniform1f(this.location,e);break;case\"float[]\":this.ze.uniform1fv(this.location,e);break;case\"vec2\":this.ze.uniform2f(this.location,e[0],e[1]);break;case\"vec3\":this.ze.uniform3f(this.location,e[0],e[1],e[2]);break;case\"vec4\":this.ze.uniform4f(this.location,e[0],e[1],e[2],e[3]);break;case\"mat2\":this.ze.uniformMatrix2fv(this.location,false,new Float32Array(e));break;case\"mat3\":this.ze.uniformMatrix3fv(this.location,false,new Float32Array(e));break;case\"mat4\":this.ze.uniformMatrix4fv(this.location,false,new Float32Array(e));break}this.current=e}};return e}();var Program=function(){function d(e,r,t,i,a,n){this.name=n;this.Ie=[];this.context=e;this.attributes={};this.Te={};var o=e.gl;var f=d.createProgram(o,r,t);this.$i=f;if(!this.$i){console.log(\"createProgram fail\",this.name);this.je=false;return this}this.je=true;for(var s in i){if(i.hasOwnProperty(s)){var u=i[s].Oe;var l=i[s].Me;var v=o.getAttribLocation(this.$i,s);var c=i[s].normalize;var h=i[s].n4;this.attributes[s]=new Attribute(e,u,l,v,c,h)}}for(var s in a){if(a.hasOwnProperty(s)){var u=a[s];var v=o.getUniformLocation(this.$i,s);if(v){this.Te[s]=new Uniform(e,u,v)}if(u===\"sampler2D\"){this.Ie.push(s)}}}}d.createProgram=function(e,r,t){var i=d.Se(e,e.VERTEX_SHADER,r);var a=d.Se(e,e.FRAGMENT_SHADER,t);if(!i||!a){return null}var n=e.createProgram();if(!n){return null}e.attachShader(n,i);e.attachShader(n,a);e.bindAttribLocation(n,0,\"a_Position\");e.linkProgram(n);var o=e.getProgramParameter(n,e.LINK_STATUS);e.deleteShader(a);e.deleteShader(i);if(!o){var f=e.getProgramInfoLog(n);console.log(\"Failed to link program: \"+f);e.deleteProgram(n);return null}return n};d.Se=function(e,r,t){var i=e.createShader(r);if(i===null){return null}e.shaderSource(i,t);e.compileShader(i);var a=e.getShaderParameter(i,e.COMPILE_STATUS);if(!a){var n=e.getShaderInfoLog(i);console.log(\"Failed to compile shader: \"+n);e.deleteShader(i);return null}return i};d.prototype.Ce=function(e,r,t,i,a,n,o,f,s,u,l){if(a===void 0){a=\"TRIANGLES\"}if(n===void 0){n=false}if(o===void 0){o=ColorMode.Mi}if(f===void 0){f=StencilMode.disable}if(s===void 0){s=CullFaceMode.we}if(u===void 0){u=0}if(!this.je){return}var v=this.context;var c=v.gl;v.ge.set(this);v.ne(n);v.ae(f);v.Qi(o);v.re(s);v.hB.set(false);this.Le(e);this.Ae(r);if(i){v.me.set(i);if(l){var h=v.getExtension(\"ANGLE_instanced_arrays\");if(h){if(i.size===32){h.drawElementsInstancedANGLE(c[a],t,c.UNSIGNED_INT,i.size/8*u,l.divisor)}else{h.drawElementsInstancedANGLE(c[a],t,c.UNSIGNED_SHORT,i.size/8*u,l.divisor)}}}else{if(i.size===32){c.drawElements(c[a],t,c.UNSIGNED_INT,i.size/8*u)}else{c.drawElements(c[a],t,c.UNSIGNED_SHORT,i.size/8*u)}}}else{if(l){var h=v.getExtension(\"ANGLE_instanced_arrays\");if(h){h.drawArraysInstancedANGLE(c[a],u,t,l.divisor)}}else{c.drawArrays(c[a],u,t)}}};d.prototype.Le=function(e){if(!this.je){return}for(var r in this.Te){var t=this.Te[r];if(t.type===\"sampler2D\"){var i=this.Ie.indexOf(r);if(i>=0){var a=e[r];if(a){this.context.bindTexture.setDirty();this.context.activeTexture.set(i);this.context.bindTexture.set(a.texture)}else{this.context.activeTexture.set(i);this.context.bindTexture.setDirty();this.context.bindTexture.set(null)}t.set(i)}}else if(t.type===\"sampler2D[]\"){var n=e[r];var o=n.De;var f=n.offset||0;var s=n.count||o.length;var u=[];for(var l=0;l<s;l++){var a=o[l];var i=f+l;if(a){this.context.activeTexture.set(i);this.context.bindTexture.set(a.texture);u.push(i)}else{this.context.activeTexture.set(f);var v=o[0];this.context.bindTexture.set(v.texture);u.push(f)}}t.set(u)}else{t.set(e[r])}}};d.prototype.Ae=function(e){if(!this.je){return}for(var r in this.attributes){if(this.attributes.hasOwnProperty(r)){this.attributes[r].set(e[r])}}};d.prototype.Pe=function(e,r,t,i,a,n,o,f){if(r===void 0){r=0}if(i===void 0){i=\"TRIANGLES\"}if(a===void 0){a=false}if(n===void 0){n=ColorMode.Mi}if(o===void 0){o=StencilMode.disable}if(f===void 0){f=CullFaceMode.we}if(!this.je){return}var s=this.context;var u=s.gl;s.ge.set(this);s.ne(a);s.ae(o);s.Qi(n);s.re(f);if(t){s.me.set(t);u.drawElements(u[i],e,u.UNSIGNED_SHORT,t.size/8*r)}else{u.drawArrays(u[i],r,e)}};d.prototype.Ni=function(){if(!this.je){return}for(var e in this.attributes){if(this.attributes.hasOwnProperty(e)){this.attributes[e].set(null)}}};d.prototype.destroy=function(){if(!this.je){return}this.context.gl.deleteProgram(this.$i);this.$i=null};return d}();M[\"Program\"]=Program;var rasterVertextString=\"precision highp float;\\n\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nattribute vec4 a_Position;\\n\\nvoid main(){\\n    v_TextureCoord=a_Position.zw;\\n    vec4 pos=vec4(a_Position.x+u_localDeltaCenter.x,a_Position.y+u_localDeltaCenter.y,0.,1.);\\n    gl_Position=u_mvpMatrix*pos;\\n    v_pos = gl_Position;\\n}\\n\";var rasterFragmentString=\"precision highp float;\\n\\nuniform sampler2D u_texture;\\nuniform float u_opacity;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nuniform vec3 u_skyColor;\\nuniform bool u_flterFlag;\\nuniform sampler2D u_colorscale; \\n\\nvarying vec2 v_TextureCoord;\\nvarying vec4 v_pos;\\n\\nvoid main(void) {\\n    vec4 smpColor = texture2D(u_texture, v_TextureCoord);\\n    if(smpColor.a < 0.01){\\n        discard;\\n    }\\n    if(u_flterFlag){\\n       float grey = (smpColor.r*0.299) + (smpColor.g*0.587) + (smpColor.b*0.114);\\n       smpColor = texture2D(u_colorscale,vec2(grey,0.5));\\n    }\\n    gl_FragColor = smpColor;\\n    gl_FragColor.a *= u_opacity;\\n\\n    float y = v_pos.y / v_pos.w;\\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\\n    vec3 fogColor = vec3(0.9, 0.9, 0.9);\\n    if(u_skyHeight < 1.0 && y > 0.0) {\\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\\n        gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\\n        gl_FragColor.a *= fogFactor;\\n    }\\n    // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n\";var rasterUniforms={u_skyColor:\"vec3\",u_viewHeight:\"float\",u_skyHeight:\"float\",u_texture:\"sampler2D\",u_opacity:\"float\",u_mvpMatrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_flterFlag:\"bool\",u_colorscale:\"sampler2D\"};var rasterAttributes={a_Position:{Oe:\"vec4\",Me:\"float32\"}};var raster={uniforms:rasterUniforms,attributes:rasterAttributes,vertexSource:rasterVertextString,fragmentSource:rasterFragmentString};var labelsLayerVertexString=\"precision mediump float;\\nattribute highp vec2 a_vertex;\\nattribute vec2 a_texcoord;\\nattribute highp vec2 a_origin;\\nattribute lowp float a_type;\\nattribute lowp float a_texIndex;\\nattribute vec4 a_color;\\nattribute lowp vec2 a_zooms;\\nattribute lowp float a_visible;\\nattribute highp float a_height;\\nattribute lowp float a_angle;\\nattribute lowp float a_highflag;\\n\\nuniform lowp vec2 u_gl_size;\\nuniform highp mat4 u_matrix;\\nuniform float u_texsize[_TotalTextureLenTwice];\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform highp vec2 u_delta_center;\\nuniform highp vec2 u_offset;\\n// u_transform.x => rotate; u_transform.y => pinch; u_transform.z => scale\\nuniform lowp vec4 u_transform;\\nuniform lowp float u_skyHeight;\\nuniform lowp float u_fontSizeFactor;\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\nvarying float v_highflag;\\n\\nmat4 rotateMat4(mat4 a, float rad, vec3 axis) {\\n    float x = axis[0], y = axis[1], z = axis[2];\\n    float len = length(axis);\\n    float s, c, t;\\n    float a00, a01, a02, a03;\\n    float a10, a11, a12, a13;\\n    float a20, a21, a22, a23;\\n    float b00, b01, b02;\\n    float b10, b11, b12;\\n    float b20, b21, b22;\\n\\n    len = 1.0 / len;\\n    x *= len;\\n    y *= len;\\n    z *= len;\\n\\n    s = sin(rad);\\n    c = cos(rad);\\n    t = 1.0 - c;\\n\\n    a00 = a[0][0]; a01 = a[0][1]; a02 = a[0][2]; a03 = a[0][3];\\n    a10 = a[1][0]; a11 = a[1][1]; a12 = a[1][2]; a13 = a[1][3];\\n    a20 = a[2][0]; a21 = a[2][1]; a22 = a[2][2]; a23 = a[2][3];\\n\\n    // Construct the elements of the rotation matrix\\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\\n\\n    // Perform rotation-specific matrix multiplication\\n    mat4 outMatrix = mat4(\\n    a00 * b00 + a10 * b01 + a20 * b02,\\n    a00 * b10 + a10 * b11 + a20 * b12,\\n    a00 * b20 + a10 * b21 + a20 * b22,\\n    a[3][0],\\n\\n    a01 * b00 + a11 * b01 + a21 * b02,\\n    a01 * b10 + a11 * b11 + a21 * b12,\\n    a01 * b20 + a11 * b21 + a21 * b22,\\n    a[3][1],\\n\\n    a02 * b00 + a12 * b01 + a22 * b02,\\n    a02 * b10 + a12 * b11 + a22 * b12,\\n    a02 * b20 + a12 * b21 + a22 * b22,\\n    a[3][2],\\n\\n    a03 * b00 + a13 * b01 + a23 * b02,\\n    a03 * b10 + a13 * b11 + a23 * b12,\\n    a03 * b20 + a13 * b21 + a23 * b22,\\n    a[3][3]\\n    );\\n\\n\\n    //    outMatrix = mat4(1.0);\\n    return outMatrix;\\n}\\n\\nmat4 scaleMat4(mat4 a, vec3 v) {\\n    float x = v.x, y = v.y, z = v.z;\\n\\n    mat4 outMatrix = mat4(\\n        a[0][0] * x, a[1][0] * y, a[2][0] * z, a[3][0],\\n        a[0][1] * x, a[1][1] * y, a[2][1] * z, a[3][1],\\n        a[0][2] * x, a[1][2] * y, a[2][2] * z, a[3][2],\\n        a[0][3] * x, a[1][3] * y, a[2][3] * z, a[3][3]\\n    );\\n\\n    return outMatrix;\\n}\\n\\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx){\\n    vec2 texsize;\\n\\n    if (ndx==0){\\n        texsize=vec2(u_texsize[0], u_texsize[1]);\\n    } else if (ndx==1){\\n        texsize=vec2(u_texsize[2], u_texsize[3]);\\n    } \\n    // else if (ndx==2){\\n    //     texsize=vec2(u_texsize[4], u_texsize[5]);\\n    // } else if (ndx==3){\\n    //     texsize=vec2(u_texsize[6], u_texsize[7]);\\n    // } else if (ndx==4){\\n    //     texsize=vec2(u_texsize[8], u_texsize[9]);\\n    // } else if (ndx==5){\\n    //     texsize=vec2(u_texsize[10], u_texsize[11]);\\n    // }else if (ndx==6){\\n    //     texsize=vec2(u_texsize[12], u_texsize[13]);\\n    // }\\n\\n    return texsize;\\n}\\n\\nvoid main(){\\n    float pi = 3.141592653589793238462;\\n    v_highflag = a_highflag;\\n\\nif (a_visible!=0. && u_zoom>=a_zooms.x && u_zoom<=a_zooms.y){\\n        // 绘制背景 || border\\n        if (a_type==6. || a_type==8.){\\n            vec4 cur_position=u_matrix*vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n            gl_Position=cur_position/cur_position.w+vec4(a_vertex.x/u_gl_size.x*2.*u_fontSizeFactor, -a_vertex.y/u_gl_size.y*2.*u_fontSizeFactor, 0, 0);\\n            v_type=a_type;\\n            v_pos = gl_Position.xy;\\n        }else if(a_type==1.){\\n            // 绘制贴地效果文字\\n            gl_Position = u_matrix * vec4(a_vertex.xy*u_fontSizeFactor, 0, 1);\\n        } else {\\n            // 绘制 billborad 效果\\n            mat4 originMatirx = mat4(1.0);\\n            mat4 scaleMatrix = scaleMat4(originMatirx, vec3(u_transform.z));\\n            mat4 rotateMatrix = rotateMat4(originMatirx, a_angle + u_transform.x, vec3(0, 0, 1));\\n            vec4 trans_position = rotateMatrix * scaleMatrix * vec4(a_vertex.x*u_fontSizeFactor, -a_vertex.y*u_fontSizeFactor, 0, 1);\\n\\n            vec4 trans_normalize_position = vec4(trans_position.xy/u_gl_size.xy*2., 0, 1);\\n\\n            vec4 cur_position = u_matrix * vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\\n\\n            // 修复文字超出 z 轴范围没有裁剪的问题，现象就是在地图最大级别、pitch 最大的时候出现文字（不应该在地图中的）悬浮在高空中。\\n            gl_Position=vec4(cur_position.xy/cur_position.w+trans_normalize_position.xy/trans_normalize_position.w,cur_position.z/cur_position.w,1);\\n        }\\n\\n        v_texcoord=a_texcoord/getSizeFromArray(u_texsize, int(a_texIndex));\\n        v_texIndex=a_texIndex;\\n        v_type=floor(a_type + 0.1);\\n        v_pos = gl_Position.xy;\\n    }else {\\n       v_type= -1.0; \\n    }\\n}\\n\";var labelsLayerFragmentString=\"precision mediump float;\\nuniform sampler2D u_texture[_TotalTextureLen];\\nuniform vec4 u_color;\\nuniform vec4 u_borderColor;\\nuniform vec4 u_strokeColor;\\nuniform vec4 u_backgroundColor;\\nuniform float u_borderBuffer;\\nuniform float u_buffer;\\nuniform float u_gamma;\\nuniform lowp int u_event;\\nuniform float u_zoom;\\nuniform lowp float u_opacity;\\nuniform lowp float u_skyHeight;\\nuniform lowp vec3 u_hlColorFactor;\\nuniform vec4 u_highlightFillColor;\\nuniform vec4 u_highlightStrokeColor;\\n\\n\\nvarying vec2 v_texcoord;\\nvarying float v_texIndex;\\nvarying float v_type;\\nvarying vec4 v_color;\\nvarying vec2 v_pos;\\nvarying float v_highflag;\\n\\nfloat skyOpacity() {\\n    if (v_pos.y > u_skyHeight){\\n        return 1.0 - smoothstep(u_skyHeight, u_skyHeight + (1.0 - u_skyHeight) / 6.0, v_pos.y);\\n    }\\n    return 1.0;\\n}\\n\\n/*由于片元着色器的数据index必须是常量，只能如此取出相应的值*/\\n\\nvoid main() {\\n    \\n    // texture5\\n    int texIdx = int(floor(v_texIndex + 0.1));\\n\\n    vec4 distColor;\\n     __SmpColorLoop__\\n    if (v_type == 6.0){\\n        // bg\\n        gl_FragColor = vec4(u_backgroundColor.rgb, u_backgroundColor.a * u_opacity);\\n        gl_FragColor.a *= skyOpacity();\\n    } else if (v_type == 8.0){\\n        // textborder\\n        gl_FragColor = vec4(u_borderColor.rgb, u_borderColor.a * u_opacity);\\n        // gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(v_highflag,0.1));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(v_highflag,0.1));\\n        gl_FragColor.a *= skyOpacity();\\n    } else if(v_type == 0.0){\\n        // icon\\n        // gl_FragColor = vec4(0,0,1.0,0.2);\\n        // return;\\n        float opacity = u_opacity * distColor.a;\\n        if (opacity < 0.03){\\n            discard;\\n        }\\n        gl_FragColor = vec4(distColor.rgb, opacity);\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(v_highflag,0.1));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(v_highflag,0.1));\\n        // gl_FragColor = vec4(distColor.rgb, u_opacity * distColor.a);\\n        gl_FragColor.a *= skyOpacity();\\n    }else if(v_type==2.0){\\n        // text\\n        float dist;\\n        float alpha;\\n\\n        // 后端加载纹理 rgba => [[0, 255], [0, 255], [0, 255], [0, 1]]\\n        // 前端加载纹理 rgba => [[0, 0, 0, [0, 1]]\\n        if (distColor.r != 0.){\\n            dist = distColor.r;\\n        } else if (distColor.a == 1.0){\\n            dist = 0.0;\\n        } else {\\n            dist = distColor.a;\\n        }\\n\\n        //    gl_FragColor = vec4(dist, dist, dist, 1);\\n        //    return;\\n        //    dist = 255.0;\\n       vec4 color = mix(u_color,u_highlightFillColor,step(0.1,v_highflag));\\n       vec4 stokeColor =mix(u_strokeColor,u_highlightStrokeColor,step(0.1,v_highflag));\\n        if (u_borderBuffer == 0.0){\\n            alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n            gl_FragColor = vec4(color.rgb, alpha * color.a * u_opacity);\\n        } else {\\n            if (dist <= u_buffer - u_gamma){\\n                // border 与外界交界\\n                alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\\n                float opacity = alpha * stokeColor.a * u_opacity;\\n                if (opacity == 0.0){\\n                    // gl_FragColor = vec4(1.0,0,0,0.1);\\n                    // return;\\n                    discard;\\n                }\\n                gl_FragColor = vec4(stokeColor.rgb, opacity);\\n                // gl_FragColor = vec4(0,0,1.0,0.2);\\n            } else if (dist < u_buffer){\\n                // 文字与 border 交界\\n                alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\\n                gl_FragColor = vec4(alpha * color.rgb + (1.0 - alpha) * stokeColor.rgb, 1.0 * color.a *\\n                alpha * u_opacity + (1.0 - alpha) * stokeColor.a * u_opacity);\\n            } else {\\n                // 文字\\n                alpha = 1.0;\\n                gl_FragColor = vec4(color.rgb, alpha * color.a * u_opacity);\\n            }\\n        }\\n        // gl_FragColor.r*= 1.0;\\n        // gl_FragColor.g*=1.0;\\n        // gl_FragColor.b*= 1.0;\\n        // gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(0.1,v_highflag));\\n        // gl_FragColor.g*= mix(1.0,u_hlColorFactor.g,step(0.1,v_highflag));\\n        // gl_FragColor.b*= mix(1.0,u_hlColorFactor.b,step(0.1,v_highflag));\\n\\n        // if(v_highflag>0.1){\\n        //     gl_FragColor.r*= mix(1.0,u_hlColorFactor.r,step(v_highflag,0.1));\\n        //     gl_FragColor.g*=u_hlColorFactor.g;\\n        //     gl_FragColor.b*=u_hlColorFactor.b;\\n        // } \\n        gl_FragColor.a *= skyOpacity();\\n\\n    }else {\\n        discard;\\n    }\\n   \\n}\\n\";var labelsLayerUniforms={u_gl_size:\"vec2\",u_matrix:\"mat4\",u_texsize:\"float[]\",u_texture:\"sampler2D[]\",u_event:\"int\",u_zoom:\"float\",u_color:\"vec4\",u_borderColor:\"vec4\",u_strokeColor:\"vec4\",u_backgroundColor:\"vec4\",u_borderBuffer:\"float\",u_buffer:\"float\",u_gamma:\"float\",u_opacity:\"float\",u_delta_center:\"vec2\",u_offset:\"vec2\",u_transform:\"vec4\",u_skyHeight:\"float\",u_fontSizeFactor:\"float\",u_hlColorFactor:\"vec3\",u_highlightFillColor:\"vec4\",u_highlightStrokeColor:\"vec4\"};var labelsLayerAttributes={a_vertex:{Oe:\"vec2\",Me:\"float32\"},a_texcoord:{Oe:\"vec2\",Me:\"float32\"},a_origin:{Oe:\"vec2\",Me:\"float32\"},a_zooms:{Oe:\"vec2\",Me:\"float32\"},a_height:{Oe:\"float\",Me:\"float32\"},a_angle:{Oe:\"float\",Me:\"float32\"},a_type:{Oe:\"float\",Me:\"float32\"},a_texIndex:{Oe:\"float\",Me:\"float32\"},a_visible:{Oe:\"float\",Me:\"uint8\"},a_highflag:{Oe:\"float\",Me:\"float32\"}};var labelsLayer={uniforms:labelsLayerUniforms,attributes:labelsLayerAttributes,vertexSource:labelsLayerVertexString,fragmentSource:labelsLayerFragmentString};var combineTextVertexString=\"precision highp float;\\n\\nattribute vec2 a_targetTexturePos;\\nattribute vec2 a_sourceTexturePos;\\n\\nuniform vec2 u_targetTextureSize;\\nuniform vec2 u_sourceTextureSize;\\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main() {\\n  v_textureCoord = a_sourceTexturePos / u_sourceTextureSize;\\n  // v_textureCoord = vec2(a_sourceTexturePos.x / u_sourceTextureSize.x, a_sourceTexturePos.y / u_sourceTextureSize.y);\\n\\n  vec2 pos = (a_targetTexturePos / u_targetTextureSize) *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = vec2(a_targetTexturePos.x / u_targetTextureSize.x, a_targetTexturePos.y / u_targetTextureSize.y);\\n  // pos.x = (pos.x - 0.5)*2.0;\\n  // pos.y = (pos.y - 0.5)*2.0;\\n\\n  gl_Position = vec4(pos, 0, 1.0);\\n  // gl_Position = vec4(a_targetTexturePos,0,1.0);\\n}\";var combineTextFragmentString=\"precision highp float;\\n\\nuniform sampler2D u_sourceTexture; \\n\\nvarying vec2 v_textureCoord;\\n\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_sourceTexture, v_textureCoord);\\n  // gl_FragColor = vec4(1,0, 0, 0 ,1.0);\\n    // gl_FragColor = vec4(0,0,1.0,1.0);\\n}\";var combineTextUniforms={u_sourceTexture:\"sampler2D\",u_sourceTextureSize:\"vec2\",u_targetTextureSize:\"vec2\"};var combineTextAttributes={a_targetTexturePos:{Oe:\"vec2\",Me:\"uint16\"},a_sourceTexturePos:{Oe:\"vec2\",Me:\"uint16\"}};var combineText={uniforms:combineTextUniforms,attributes:combineTextAttributes,vertexSource:combineTextVertexString,fragmentSource:combineTextFragmentString};var debugImageVertexString=\"precision highp float;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_coord;\\n\\nvarying vec2 v_coord;\\n\\nvoid main() {\\n  v_coord = vec2(a_coord.x,1.0 - a_coord.y) ;\\n  vec2 pos = a_pos *2.0 -vec2(1.0,1.0);\\n  // vec2 pos = a_pos -vec2(,1.0);\\n  gl_Position = vec4(pos,0,1.0);\\n}\";var debugImageFragmentString=\"precision highp float;\\n\\nvarying vec2 v_coord;\\n\\nuniform sampler2D u_texture;\\n\\nvoid main(){\\n  gl_FragColor = texture2D(u_texture, v_coord);\\n  // gl_FragColor = vec4(1.0,0,0,1.0);\\n}\\n\";var debugImageUniforms={u_texture:\"sampler2D\"};var debugImageAttributes={a_pos:{Oe:\"vec2\",Me:\"uint16\"},a_coord:{Oe:\"vec2\",Me:\"uint16\"}};var debugImage={uniforms:debugImageUniforms,attributes:debugImageAttributes,vertexSource:debugImageVertexString,fragmentSource:debugImageFragmentString};var circleFragmentString=\"\\n\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform  float u_radius;\\nuniform  vec2 u_range;\\nuniform highp vec4 u_color;\\nuniform highp vec4 u_borderColor;\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nvarying vec4 v_pos;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\\n  float flag = step(1.0,offset);\\n  float borderFlag = 1.- smoothstep(1.0 -1./u_radius, 1.0, offset);\\n  if(flag > 0.0){\\n    discard;\\n  }\\n  float opacity_t = 1.-smoothstep(u_range[1] -1./u_radius, u_range[1], offset);\\n  gl_FragColor = mix(u_borderColor, u_color, opacity_t);\\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight)*borderFlag;\\n}\";var circleVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nuniform vec2 u_pos;\\nuniform mat4 u_matrix;\\nuniform float u_radius;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(u_pos.x+u_localDeltaCenter.x+u_offset.x,u_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position=u_matrix * vec4(pos,0,1);\\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n}\\n\";var circleAttrVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nuniform mat4 u_matrix;\\nuniform float u_radius;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\nvarying vec4 v_pos;\\n\\nvoid main(){\\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position=u_matrix * vec4(pos,0,1);\\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n}\\n\";var circleUniforms={u_pos:\"vec2\",u_color:\"vec4\",u_borderColor:\"vec4\",u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_offset:\"vec2\",u_radius:\"float\",u_range:\"vec2\",u_retinaRatio:\"float\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var circleAttributes={};var circle={uniforms:circleUniforms,attributes:circleAttributes,vertexSource:circleVertextString,fragmentSource:circleFragmentString};var circleAttrUniforms={u_color:\"vec4\",u_borderColor:\"vec4\",u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_offset:\"vec2\",u_radius:\"float\",u_range:\"vec2\",u_retinaRatio:\"float\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var circleAttrAttributes={a_pos:{Oe:\"vec2\",Me:\"float32\"}};var circleAttr={uniforms:circleAttrUniforms,attributes:circleAttrAttributes,vertexSource:circleAttrVertextString,fragmentSource:circleFragmentString};var pointFragmentString=\"\\n\\nprecision highp float;\\n#define GLSLIFY 1\\nuniform float u_skyHeight;\\nuniform float u_viewHeight; // 地图容器高度，单位像素\\nuniform bool u_pick;\\n\\nvarying vec4 v_pos;\\nvarying float v_radius;\\nvarying float v_visible;\\nvarying float v_borderWidth;\\nvarying vec4 v_color;\\nvarying vec4 v_borderColor;\\n// varying vec4 v_pickColor;\\n\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\\n  float flag = step(1.0,offset);\\n  float borderFlag = 1.- smoothstep(1.0 - 1. / v_radius, 1.0, offset);\\n  if(flag > 0.0){\\n    discard;\\n  }\\n  float range = v_radius / (v_radius + v_borderWidth);\\n  float opacity_t = 1. - smoothstep(range - 1. / v_radius, range, offset);\\n  gl_FragColor = mix(v_borderColor, v_color, opacity_t);\\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight) * borderFlag * v_visible;\\n\\n  // if(u_pick) {\\n  //   gl_FragColor = vec4(v_pickColor.xyz / 256.0, 1);\\n  // }\\n}\";var pointVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute float a_radius;\\nattribute float a_borderWidth;\\nattribute float a_visible;\\nattribute vec4 a_color;\\nattribute vec4 a_borderColor;\\nattribute vec4 a_pickColor;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\nuniform vec2 u_offset;\\nuniform float u_retinaRatio;\\n\\nvarying vec4 v_pos;\\nvarying float v_radius;\\nvarying float v_visible;\\nvarying float v_borderWidth;\\nvarying vec4 v_color;\\nvarying vec4 v_borderColor;\\nvarying vec4 v_pickColor;\\n\\nvoid main() {\\n    vec2 pos = vec2(a_pos.x + u_localDeltaCenter.x + u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\\n    gl_Position = u_matrix * vec4(pos,0,1);\\n    gl_PointSize = (a_radius + a_borderWidth) * u_retinaRatio * 2.0;\\n    v_pos = gl_Position;\\n    v_radius = a_radius;\\n    v_borderWidth = a_borderWidth;\\n    v_color = a_color;\\n    v_borderColor = a_borderColor;\\n    v_visible = a_visible;\\n    v_pickColor = a_pickColor;\\n}\\n\";var pointUniforms={u_matrix:\"mat4\",u_localDeltaCenter:\"vec2\",u_offset:\"vec2\",u_retinaRatio:\"float\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var pointAttributes={a_pos:{Oe:\"vec2\",Me:\"float32\"},a_radius:{Oe:\"float\",Me:\"float32\"},a_borderWidth:{Oe:\"float\",Me:\"float32\"},a_color:{Oe:\"vec4\",Me:\"float32\"},a_borderColor:{Oe:\"vec4\",Me:\"float32\"},a_visible:{Oe:\"float\",Me:\"float32\"}};var point={uniforms:pointUniforms,attributes:pointAttributes,vertexSource:pointVertextString,fragmentSource:pointFragmentString};var lineFragmentString$2=\"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_color;\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\n\\nvarying highp float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // vec2 icon_offset = vec2(80.0, 0.0);\\n    // vec2 icon_size = vec2(40.0, 40.0);\\n    // vec2 icon_offset = vec2(0.0, 0.0);\\n    // vec2 icon_size = vec2(44.0, 32.0);\\n    // vec2 texture_size = vec2(512.0, 2048.0);\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n\\n    float startBlur = 0.0;\\n    float endBlur = 1.0;\\n    // float dist = length(v_normal) * 0.8;\\n\\n    // if(v_width < 4.0 && u_border == 1.0) {\\n    //     startBlur = 0.0;\\n    // } else {\\n    //     // 线主体\\n    //     if(v_width < 4.0 && u_border == 0.0) {\\n    //         startBlur = 0.0;\\n    //     } else {\\n    //         startBlur = 0.4;\\n    //     }\\n    // }\\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\\n\\n    // startBlur = 0.0;\\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\\n\\n    gl_FragColor = u_color;\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var lineVertextString$2=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_width = width;\\n    v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}\";var linePatternFragmentString=\"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform sampler2D u_texture;\\nuniform  highp vec2 u_iconsize;\\nuniform  mediump vec3 u_dir_color;\\nuniform  bool u_custom_img_flag;\\nuniform  highp float u_width;\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\n\\nvarying highp float v_distance;\\n// varying float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\n\\nuniform float u_timer;\\nuniform float u_speed;\\nuniform float u_size_scale;\\nuniform bool u_animate;\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n    // if(abs(v_flag)>=1.0){\\n    //     discard;\\n    // }\\n    vec2 icon_size = u_iconsize * vec2(u_width/u_iconsize.y, 1.0 );\\n    float offset = 0.0;\\n    float ani = u_animate ? u_timer / 1000.0 : 0.0;\\n    float text_offset_x = mod(v_distance - ani * u_speed, (icon_size.x*4.0*u_size_scale)*u_meter_per_pixel_optimal/u_meter_per_pixel);\\n    // float text_offset_x = mod(v_distance, 120.0);\\n\\n    if(text_offset_x<=0.0){\\n        discard;\\n    }\\n    if(text_offset_x>=icon_size.x){\\n        discard;\\n    }\\n\\n    text_offset_x = 1.0 - clamp(0.0,1.0,text_offset_x/icon_size.x);\\n\\n    // float  text_offset_y  = (v_flag+1.0)/2.0  ;\\n    float  text_offset_y  = v_flag  ;\\n\\n    if(u_custom_img_flag){\\n        gl_FragColor = texture2D(u_texture, vec2(text_offset_y, text_offset_x));\\n    }else{\\n        vec4 color = texture2D(u_texture, vec2(text_offset_y,text_offset_x));\\n        if(color.a>0.0){\\n            gl_FragColor = vec4(u_dir_color,1.0);\\n        }\\n    }\\n   gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var linePatternVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform highp float u_meter_per_pixel;\\nuniform highp float u_meter_per_pixel_optimal;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  highp float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\nvarying highp float v_distance;\\n// varying mediump float v_width;\\n// varying vec2 v_normal;\\nvarying highp float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width + 0.0;\\n    float cosValue = dot(a_normal , a_dir);\\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\\n    sinValue = step(0.0, sinValue);\\n    // sinValue = (sinValue - 0.5)* 2.0;\\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n//    gl_PointSize = 3.0;\\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    // v_width = width;\\n    // v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\\n    v_flag = sinValue;\\n    v_pos = gl_Position;\\n\\n}\";var lineGradinetFragmentString=\"precision mediump float;\\n#define GLSLIFY 1\\n\\nuniform vec4 u_outLinecolor;\\n// uniform float u_opacity;\\nuniform vec3 u_dash;\\nuniform int u_dashType;\\nuniform sampler2D u_texture;\\nuniform  mediump float u_width;\\nuniform  highp float u_total_distance;\\n\\nvarying highp float v_distance;\\nvarying vec4 v_pos;\\n\\nuniform float u_skyHeight;\\nuniform float u_viewHeight;  // 地图容器高度，单位像素\\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\\n    float y = pos.y / pos.w;\\n    float fogHeight = 2. / viewHeight * 30.;\\n    float fogFactor = 1.0;\\n    if(skyHeight < 1.0 && y > 0.0) {\\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\\n    }\\n    return fogFactor;\\n}\\n\\nvoid main() {\\n\\n    float offset = 0.0;\\n    if( u_dashType == 2 ){\\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\\n            discard;\\n        }\\n    }else if(u_dashType == 3) {\\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\\n        offset = mod(v_distance, all);\\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\\n\\n        if (offset > solidBound.x && offset <= dashBound.x\\n            || offset > solidBound.y && offset <= dashBound.y\\n            || offset > solidBound.z && offset <= dashBound.z) {\\n            discard;\\n        }\\n    }\\n    float texture_x = v_distance/u_total_distance;\\n    gl_FragColor = texture2D(u_texture, vec2(texture_x,0.5));\\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\\n    #ifdef OVERDRAW_INSPECTOR\\n        gl_FragColor = vec4(1.0);\\n    #endif\\n}\\n\";var lineGradientVertextString=\"precision highp float;\\n#define GLSLIFY 1\\nattribute vec2 a_pos;\\nattribute vec2 a_normal;\\nattribute float a_distance;\\nattribute vec2 a_dir;\\n\\n// attribute vec4 a_color;\\n// attribute float a_width;\\n// attribute vec4 a_dash;\\n\\nuniform float u_meter_per_pixel;\\nuniform mat4 u_matrix;\\nuniform vec2 u_localDeltaCenter;\\n\\nuniform  mediump float u_width;\\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\\n\\nvarying float v_distance;\\nvarying float v_width;\\nvarying vec2 v_normal;\\nvarying float v_flag;\\nvarying vec4 v_pos;\\n\\n#define WORLD_SIZE 20037508.342789244\\n\\nvoid main(){\\n\\n    float width = u_width;\\n    float cosValue = dot(a_normal , a_dir);\\n\\n    v_distance = a_distance + (cosValue * width *0.5)*u_meter_per_pixel;\\n    // v_distance = a_distance;\\n\\n    vec2 pos = a_pos;\\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\\n    v_pos = gl_Position;\\n}\";var lineUniforms$1={u_width:\"float\",u_dashType:\"int\",u_matrix:\"mat4\",u_offset:\"vec2\",u_meter_per_pixel:\"float\",u_color:\"vec4\",u_dash:\"vec3\",u_localDeltaCenter:\"vec2\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var lineAttributes$1={a_pos:{Oe:\"vec2\",Me:\"float32\"},a_normal:{Oe:\"vec2\",Me:\"float32\"},a_distance:{Oe:\"float\",Me:\"float32\"},a_dir:{Oe:\"vec2\",Me:\"float32\"}};var linePatternUniforms={u_width:\"float\",u_matrix:\"mat4\",u_offset:\"vec2\",u_meter_per_pixel:\"float\",u_meter_per_pixel_optimal:\"float\",u_localDeltaCenter:\"vec2\",u_texture:\"sampler2D\",u_iconsize:\"vec2\",u_dir_color:\"vec3\",u_custom_img_flag:\"bool\",u_skyHeight:\"float\",u_viewHeight:\"float\",u_timer:\"float\",u_animate:\"bool\",u_speed:\"float\",u_size_scale:\"float\"};var linePatternAttributes={a_pos:{Oe:\"vec2\",Me:\"float32\"},a_normal:{Oe:\"vec2\",Me:\"float32\"},a_distance:{Oe:\"float\",Me:\"float32\"},a_dir:{Oe:\"vec2\",Me:\"float32\"}};var lineGradientUniforms={u_width:\"float\",u_matrix:\"mat4\",u_offset:\"vec2\",u_meter_per_pixel:\"float\",u_localDeltaCenter:\"vec2\",u_texture:\"sampler2D\",u_total_distance:\"float\",u_skyHeight:\"float\",u_viewHeight:\"float\"};var polyline={uniforms:lineUniforms$1,attributes:lineAttributes$1,vertexSource:lineVertextString$2,fragmentSource:lineFragmentString$2};var polylinePattern={uniforms:linePatternUniforms,attributes:linePatternAttributes,vertexSource:linePatternVertextString,fragmentSource:linePatternFragmentString};var polylineGradient={uniforms:lineGradientUniforms,attributes:linePatternAttributes,vertexSource:lineGradientVertextString,fragmentSource:lineGradinetFragmentString};var maskFragmentString=\"precision highp float;\\n// uniform float u_opacity;\\nuniform vec4 u_color;\\n\\n// varying vec4 v_color;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n    // gl_FragColor = vec4(0, 0, 0, 0);\\n}\";var maskVertextString=\"precision highp float;\\nuniform mat4 u_mvpMatrix;\\nuniform vec2 u_deltaCenter;\\nattribute vec2 a_pos;\\n\\nvoid main() {\\n    gl_Position = u_mvpMatrix * vec4(a_pos.xy+u_deltaCenter, 0, 1);\\n}\\n\";var maskUniforms={u_mvpMatrix:\"mat4\",u_color:\"vec4\",u_deltaCenter:\"vec2\"};var maskAttributes={a_pos:{Me:\"float32\",Oe:\"vec2\"}};var mask={uniforms:maskUniforms,attributes:maskAttributes,vertexSource:maskVertextString,fragmentSource:maskFragmentString};var programs={fill:fill,fillPattern:fillPattern,sky:sky,skyPattern:skyPattern,mask:mask,fillExtrusion:fillExt,fillExtrusionPattern:fillExtPattern,raster:raster,labelsLayer:labelsLayer,fillOutline:fillOutline,line:line,combineText:combineText,debugImage:debugImage,circle:circle,circleAttr:circleAttr,point:point,polyline:polyline,\"polyline-pattern\":polylinePattern,\"polyline-gradient\":polylineGradient};var ProgramManager=function(){function e(e){this.context=e;this.context=e;this.cache={}}e.prototype.Un=function(){return this.Bn(\"circle\")};e.prototype.Z2=function(){return this.Bn(\"circleAttr\")};e.prototype.V2=function(){return this.Bn(\"point\")};e.prototype.rS=function(){return this.Bn(\"sky\")};e.prototype.EB=function(){return this.Bn(\"skyPattern\")};e.prototype.aS=function(){return this.Bn(\"mask\")};e.prototype.Wn=function(){return this.Bn(\"fill\")};e.prototype.aH=function(){return this.Bn(\"fillPattern\")};e.prototype.k_=function(){return this.Bn(\"fillExtrusion\")};e.prototype.sH=function(){return this.Bn(\"fillExtrusionPattern\")};e.prototype.Gn=function(){return this.Bn(\"raster\")};e.prototype.Zn=function(){var e=this.context;var r=e.gl;var t=\"labelsLayer\";if(!this.cache[t]){var i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);var a=Math.min(i,16,TextureMaxLength);var n=programs[t];var o=[];for(var f=0;f<a;f++){o.push((f>0?\"else \":\" \")+\"if(texIdx==\"+f+\"){ distColor = texture2D(u_texture[\"+f+\"], v_texcoord); }\")}n.vertexSource=n.vertexSource.replace(/_TotalTextureLenTwice/g,(a*2).toString()).replace(/_TotalTextureLen/g,a.toString());n.fragmentSource=n.fragmentSource.replace(/_TotalTextureLen/g,a.toString()).replace(/__SmpColorLoop__/g,o.join(\"\\n\"))}return this.Bn(t)};e.prototype.Yn=function(){return this.Bn(\"fillOutline\")};e.prototype.Vn=function(){return this.Bn(\"line\")};e.prototype.Xn=function(){return this.Bn(\"polyline\")};e.prototype.M_=function(){return this.Bn(\"polyline-pattern\")};e.prototype.sS=function(){return this.Bn(\"polyline-gradient\")};e.prototype.Hn=function(){return this.Bn(\"combineText\")};e.prototype.Jn=function(){return this.Bn(\"debugImage\")};e.prototype.destroy=function(){for(var e in this.cache){if(this.cache.hasOwnProperty(e)){var r=this.cache[e];r.destroy();delete this.cache[e]}}};e.prototype.Bn=function(e){if(this.cache[e]){return this.cache[e]}var r=programs[e];if(r){this.cache[e]=new Program(this.context,r.vertexSource,r.fragmentSource,r.attributes,r.uniforms,e)}return this.cache[e]};return e}();var Util$8=AMap[\"Util\"];var LandRender=function(r){__extends(e,r);function e(){var e=r.call(this)||this;e.CLASS_NAME=\"AMap.Land\";e.e_=[0,0,0,0];e.Qn={color:[.9882352941176471,.9764705882352941,.9490196078431372,1]};return e}e.prototype.renderFrame=function(e,r,t,i,a){return};return e}(LayerRender);var MapRenderBase=function(){function e(e){this.map=e}e.prototype.lS=function(e,r){var t=this.map.fS();var i=t.uS();var a={};for(var n in i){if(i.hasOwnProperty(n)){var o=i[n];var f=r.uo.getData(o.co(),r.viewState,this.context||null);a[n]=f}}t.cS(e,r,a)};return e}();var Support$7=M[\"Support\"];var DomUtil$1=AMap[\"DomUtil\"];var utils$1=AMap[\"Util\"];var scale$4=Support$7.scale;var MapRender=function(t){__extends(e,t);function e(e){var r=t.call(this,e)||this;r.map=e;r.gl=e[\"getGL\"]();r.io=r.gl.canvas;r.gl.getExtension(\"OES_standard_derivatives\");r.gl.getExtension(\"OES_element_index_uint\");r.context=new Context(r.gl);r.oo=new ProgramManager(r.context);r.z_=e.z_;r.R_=e.R_;r.no=new LandRender;r.o4();r.I2=r.context.createTexture({height:4096,width:4096,data:null});r.I2.bind(r.context.gl.CLAMP_TO_EDGE,r.context.gl.LINEAR,r.context.gl.LINEAR);return r}e.prototype.getMapState=function(){return this.map&&this.map.getMapState()||{}};e.prototype.f4=function(){return this.map};e.prototype.to=function(){if(this.map){this.map.setNeedUpdate(true)}};e.prototype.renderFrame=function(e){if(e.size[0]*scale$4!==this.io.width){this.io.width=e.size[0]*scale$4;this.io.style.width=e.size[0]+\"px\"}if(e.size[1]*scale$4!==this.io.height){this.io.height=e.size[1]*scale$4;this.io.style.height=e.size[1]+\"px\"}this.context.be.set([0,0,this.io.width,this.io.height]);this.context.clear({stencil:true,color:true,depth:true});var r=e.viewState.zoom;var t=e.layers.sort(function(e,r){return e.getLayerConfig().zIndex-r.getLayerConfig().zIndex});this.no.renderFrame(this.oo,this.map.options.backgroundColor,e,{},this);this.map.so.update(this.oo);var i=this.map.TL();if(!i&&this.map.bZ.MZ.gY.Kv){this.I2.update(this.map.bZ.MZ.gY.mY);this.map.bZ.MZ.gY.Kv=false}if(this.map.bZ.MZ.drawMode!==\"fast\"&&(this.map.bZ.dynamic.get(\"firstLabelDataAllLoaded\")||this.map.bZ.dynamic.get(\"firstLabelLayerDataAllLoaded\"))){this.lS(this.oo,e)}else if(this.map.bZ.MZ.drawMode===\"fast\"&&(this.map.bZ.dynamic.get(\"firstLabelDataAllLoaded\")||this.map.bZ.dynamic.get(\"firstLabelLayerDataAllLoaded\"))&&!i){this.lS(this.oo,e)}var a;var n=true;for(var o=0,f=t.length;o<f;o+=1){a=t[o];var s=a.getState();var u=a.getLayerConfig().zooms;var l=s.opacity>0;if(a.CLASS_NAME===\"AMap.IndoorMap\"){l=s.opacity>=0}if(s.visible&&l&&utils$1.dS(r,u)||a.CLASS_NAME===\"AMap.CustomLayer\"){var v=a.getRender();if(v){if(!a.lo()){n=false}var c=e.uo.getData(t[o].co(),e.viewState,this.context);if(c){a.beforeRender();v.renderFrame(this.oo,c,e,s,this,t[o],c.fo);a.afterRender()}}}}if(!this.map.complete&&n){this.map.emit(\"complete\");this.map.complete=true}if(this.map[\"getView\"]()&&!this.map[\"getView\"]().h_()){this.map.getView().aD();this.map.emit(\"viewchange\",{zoom:e.viewState.zoom,center:e.viewState.center,pitch:e.viewState.pitch,rotation:e.viewState.rotation})}if(!this.map.bZ){return}var h=this.map.bZ.dynamic.get(\"stamp\");var d=Date.now();this.map.bZ.dynamic.set(\"stamp\",d);var _=Math.floor(1e3/(d-h));this.map.bZ.MZ.tY.update();if(_>=50){this.map.bZ.MZ.tY.RZ(\"default\")}if(this.map.bZ.MZ.tY.BZ(\"default\")>0||this.map.bZ.MZ.gY.Kv){this.to()}};e.prototype.destroy=function(){if(this.oo&&this.oo[\"destroy\"]){this.oo.destroy()}if(this.R_&&this.R_[\"destroy\"]){this.R_.destroy();delete this.R_}if(this.context){delete this.context}};e.prototype.o4=function(){var e=this;this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Hn()},UZ:function(){return Boolean(e.oo.cache[\"combineText\"])},group:\"default\",FZ:function(){return 1}});if(this.map[\"getViewMode_\"]()===\"3D\"){this.map.bZ.MZ.tY.add({NZ:function(){e.oo.rS()},UZ:function(){return Boolean(e.oo.cache[\"sky\"])},group:\"default\",FZ:function(){return 1}})}if(!this.map.yS()){this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Yn()},UZ:function(){return Boolean(e.oo.cache[\"fillOutline\"])},group:\"default\",FZ:function(){return 1}})}this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Wn()},UZ:function(){return Boolean(e.oo.cache[\"fill\"])},group:\"default\",FZ:function(){return 1}});this.map.bZ.MZ.tY.add({NZ:function(){e.oo.Vn()},UZ:function(){return Boolean(e.oo.cache[\"line\"])},group:\"default\",FZ:function(){return 1}});this.map.setNeedUpdate(true)};return e}(MapRenderBase);M.s4=MapRender;M.WebGLRender=MapRender;M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.NebulaLayer\",NebulaRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.Buildings\",BuildingRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.Inner.LabelsLayer\",TileLabelsLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.LabelsLayer\",LabelsLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.ImageLayer\",ImageRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.CanvasLayer\",ImageRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.RasterLayer\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Flexible\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.RoadNet\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Satellite\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.Traffic\",VectorTrafficRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.WMTSLayer\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.WMS\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.TileLayer.WMTS\",RasterLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.CustomLayer\",CustomRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.GLCustomLayer\",GLCustomRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.VTLayer\",VTRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.SkyLayer\",SkyLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.MaskLayer\",MaskLayerRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.MapboxLayer\",MapboxRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.VectorLayer\",OverlayRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.VectorSvgLayer\",OverlayRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.IndoorMap\",IndoorRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.DistrictLayer\",DistrictRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.DistrictLayer.World\",DistrictRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.DistrictLayer.Country\",DistrictRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.DistrictLayer.Province\",DistrictRender);M[\"LayerRenderManager\"][\"addLayerRender\"](\"AMap.MapboxVectorTileLayer\",MapboxVTRender)})();\n");
_cssload_('AMap.ArrivalRange.css',".TEST-HAWKEYE{font-size:auto}.TEST-HAWKEYE .JACK{align-self:auto}");
_cssload_('AMap.AutoComplete.css',".amap-sug-result{position:absolute;z-index:1024;background-color:#fefefe;border:1px solid #d1d1d1;bottom:auto}.auto-item:hover{background-color:#cae1ff}.auto-item{white-space:nowrap;font-size:12px;cursor:pointer;padding:4px}.auto-item-span{color:#c1c1c1;padding-left:4px}");
_cssload_('AMap.BezierCurveEditor.css',".amap-bzcv-node{cursor:pointer;width:15px;height:15px}.amap-bzcv-node.amap-bzcv-pathNode{background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/circle-pie.png) 50% 50% no-repeat}.amap-bzcv-node.amap-bzcv-midNode{background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/circle.png) 50% 50% no-repeat}.amap-bzcv-node.amap-bzcv-ctrlNode{background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/double-circle.png) 50% 50% no-repeat}.amap-bzcv-node.amap-bzcv-mobile{width:25px;height:25px;background-color:rgba(23,145,252,.2);border-radius:13px}");
_cssload_('AMap.CircleEditor.css',".amap-circle-node{cursor:pointer;width:15px;height:15px}.amap-circle-node.amap-circle-moveNode{cursor:move}.amap-circle-node.amap-circle-moveNode,.amap-circle-node.amap-circle-resizeNode{background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/circle-pie.png) 50% 50% no-repeat}.amap-circle-node.amap-circle-mobile{background-color:rgba(23,145,252,.2);border-radius:15px;width:25px;height:25px}.amap-circle-node+.amap-marker-label{border-color:#1791fc;border-radius:2px}");
_cssload_('AMap.CitySearch.css',".TEST-HAWKEYE{font-size:auto}.TEST-HAWKEYE .JACK{align-self:auto}");
_cssload_('AMap.CloudDataLayer.css',"");
_cssload_('AMap.CloudDataSearch.css',".amap_lib_cloudDataSearch{font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;color:#565656;font-size:12px;line-height:1.5;word-wrap:break-word;background-color:#fff;border:1px solid silver}.amap_lib_cloudDataSearch .pageLink{cursor:pointer;text-decoration:underline}.amap_lib_cloudDataSearch_list{background:#fff none repeat scroll 0 0}.amap_lib_cloudDataSearch .poibox .poibox-icon{margin-left:2px}.amap_lib_cloudDataSearch_page{white-space:nowrap;text-align:right;background:#e5ecf9 none repeat scroll 0 0;margin-top:5px;padding:2px;overflow:hidden}.amap_lib_cloudDataSearch_page>div{float:left;margin-right:5px}.amap_lib_cloudDataSearch_page>div>p{margin:0;padding:0;white-space:nowrap}.amap_lib_cloudDataSearch_ol{list-style:outside none none;padding:0;margin:0}.amap_lib_cloudDataSearch_li{margin:2px 0;padding:0 5px 5px 0;cursor:pointer;overflow:hidden;line-height:17px}.amap_lib_cloudDataSearch_li .amap_lib_cloudDataSearch_li_wrap{overflow:hidden;padding:0 5px}.amap_lib_cloudDataSearch_li_wrap_selected{background-color:#f0f0f0}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_title{line-height:20px;font-size:12px}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_title span{color:#00c}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_title a{margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:400;text-decoration:none}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_text{padding:2px 0;line-height:18px;*zoom:1;overflow:hidden}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_text b{float:left;font-weight:700;*zoom:1;overflow:hidden;padding-right:5px;*margin-right:-3px}.amap_lib_cloudDataSearch_li>div .amap_lib_cloudDataSearch_li_text span{color:#666;display:block;zoom:1;overflow:hidden}.amap_lib_cloudDataSearch_page span{margin-right:3px}.amap_lib_cloudDataSearch_poi{background:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/mark_b.png) no-repeat;height:31px;width:19px;cursor:pointer;left:-1px;text-align:center;color:#fff;font:12px arial,simsun,sans-serif;padding-top:2px}.amap_lib_cloudDataSearch .amap_lib_cloudDataSearch_poi{position:absolute}.amap_lib_cloudDataSearch ol,.amap_lib_cloudDataSearch ul{list-style:outside none none;margin:0;padding:0}.amap_lib_cloudDataSearch .poibox{border-bottom:1px solid #eaeaea;cursor:pointer;padding:5px 0 0 10px;position:relative}.amap_lib_cloudDataSearch .poibox .poibox-icon{margin-left:7px}.amap_lib_cloudDataSearch .poibox .poi-title{margin-left:25px;font-size:13px;overflow:hidden}.amap_lib_cloudDataSearch .poibox .poi-more{color:#0091ff;font-size:12px;line-height:22px;white-space:nowrap;vertical-align:baseline}.amap_lib_cloudDataSearch .poibox .poi-info{word-break:break-all;margin:0 0 0 25px;overflow:hidden}.amap_lib_cloudDataSearch .poibox .poi-info p{color:#999;font-family:Tahoma;line-height:20px}.amap_lib_cloudDataSearch p{margin:0}.amap_lib_cloudDataSearch h1,.amap_lib_cloudDataSearch h2,.amap_lib_cloudDataSearch h3,.amap_lib_cloudDataSearch h4,.amap_lib_cloudDataSearch h5{font-weight:400;margin:0}.amap_lib_cloudDataSearch .poibox.active,.amap_lib_cloudDataSearch .poibox.hover,.amap_lib_cloudDataSearch .poibox:hover{background:#f6f6f6 none repeat scroll 0 0}.amap_lib_cloudDataSearch .poibox .select-btn{margin-left:25px;margin-top:6px;border:0;color:#fff;cursor:pointer;padding:6px 20px;border-radius:2px;background-color:#0091ff}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.DistrictSearch.css',".TEST-HAWKEYE{font-size:auto}.TEST-HAWKEYE .JACK{align-self:auto}");
_cssload_('AMap.DragRoute.css',".amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-dis{border-width:0;-moz-box-shadow:0 3px 3px #888;box-shadow:0 3px 3px #888}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-ranging-label span img{margin-top:-2px;_margin-bottom:3px;+margin-top:2px}.amap-ranging-label span .delimg{margin-bottom:-3px;_margin-bottom:0;+margin-top:-1px}");
_cssload_('AMap.Driving.css',".amap-lib-driving{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;word-wrap:break-word;background-color:#fff;border:1px solid silver}.amap-lib-driving ol,.amap-lib-driving ul{list-style:outside none none;margin:0;padding:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-call,.amap-lib-driving .planTitle .clearfix a{text-decoration:underline}.amap-lib-driving .blue{color:#3d93fd}.amap-lib-driving p{margin:0}.amap-lib-driving b,.amap-lib-driving strong{font-weight:700}.amap-lib-driving dt{cursor:pointer}.amap-lib-driving .planTitle{position:relative;padding:2px 8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-driving .planTitle:hover{background:#fff}.amap-lib-driving .planTitle.current .sidebar,.amap-lib-driving .planTitle:hover .sidebar{display:block}.amap-lib-driving .planTitle span.red{color:#ff4546}.amap-lib-driving .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-driving .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-driving .planTitle ul{display:none;margin-top:3px}.amap-lib-driving .planTitle ul li{float:left}.amap-lib-driving .planTitle ul li:last-child{border-right:none}.amap-lib-driving .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-driving .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-driving .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-driving .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-driving .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .plan{display:none;font-size:12px;margin:0}.amap-lib-driving .plan .grey{color:#999}.amap-lib-driving .plan .blue{color:#3baeca}.amap-lib-driving .plan dt{position:relative;margin-left:35px;line-height:20px;border-bottom:1px solid #f0f0f0;padding-bottom:3px;padding-top:3px}.amap-lib-driving .plan dt:hover{background:#fafafa}.amap-lib-driving .plan dt span.grey{font-weight:400}.amap-lib-driving .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-driving .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-driving .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-driving .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-driving .afterdt{position:absolute}.amap-lib-driving .plan dt.end,.amap-lib-driving .plan dt.start,.amap-lib-driving .plan dt.via{font-size:14px}.amap-lib-driving .plan dt.end .beforedt,.amap-lib-driving .plan dt.start .beforedt,.amap-lib-driving .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-driving .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-driving .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-driving .plan dt.end .afterdt{height:0%}.amap-lib-driving .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-driving>.plan dt>.afterdt{height:100%}.amap-lib-driving .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-driving .plan dt.bus .beforedt,.amap-lib-driving .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-driving .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-driving .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-driving .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-driving .plan-nobus{margin:0}.amap-lib-driving .plan-nobus dt span{display:block;line-height:18px}.amap-lib-driving .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan-nobus dt.end .beforedt,.amap-lib-driving .plan-nobus dt.start .beforedt,.amap-lib-driving .plan-nobus dt.via .beforedt{border:none}.amap-lib-driving .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-driving .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-driving .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-driving .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-driving .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-driving .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-driving .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-driving .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-driving .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-driving .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-driving .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-driving .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-driving .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-driving .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-driving .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-driving .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-driving .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-driving .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-driving .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:25px;height:30px;color:#e90000;background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/start.png);cursor:pointer}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/end.png);cursor:pointer}.amap-lib-marker-mid{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/mid.png)}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.DrivingRender.css',".amap-lib-driving{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;word-wrap:break-word;background-color:#fff;border:1px solid silver}.amap-lib-driving ol,.amap-lib-driving ul{list-style:outside none none;margin:0;padding:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-call,.amap-lib-driving .planTitle .clearfix a{text-decoration:underline}.amap-lib-driving .blue{color:#3d93fd}.amap-lib-driving p{margin:0}.amap-lib-driving b,.amap-lib-driving strong{font-weight:700}.amap-lib-driving dt{cursor:pointer}.amap-lib-driving .planTitle{position:relative;padding:2px 8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-driving .planTitle:hover{background:#fff}.amap-lib-driving .planTitle.current .sidebar,.amap-lib-driving .planTitle:hover .sidebar{display:block}.amap-lib-driving .planTitle span.red{color:#ff4546}.amap-lib-driving .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-driving .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-driving .planTitle ul{display:none;margin-top:3px}.amap-lib-driving .planTitle ul li{float:left}.amap-lib-driving .planTitle ul li:last-child{border-right:none}.amap-lib-driving .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-driving .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-driving .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-driving .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-driving .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .plan{display:none;font-size:12px;margin:0}.amap-lib-driving .plan .grey{color:#999}.amap-lib-driving .plan .blue{color:#3baeca}.amap-lib-driving .plan dt{position:relative;margin-left:35px;line-height:20px;border-bottom:1px solid #f0f0f0;padding-bottom:3px;padding-top:3px}.amap-lib-driving .plan dt:hover{background:#fafafa}.amap-lib-driving .plan dt span.grey{font-weight:400}.amap-lib-driving .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-driving .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-driving .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-driving .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-driving .afterdt{position:absolute}.amap-lib-driving .plan dt.end,.amap-lib-driving .plan dt.start,.amap-lib-driving .plan dt.via{font-size:14px}.amap-lib-driving .plan dt.end .beforedt,.amap-lib-driving .plan dt.start .beforedt,.amap-lib-driving .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-driving .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-driving .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-driving .plan dt.end .afterdt{height:0%}.amap-lib-driving .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-driving>.plan dt>.afterdt{height:100%}.amap-lib-driving .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-driving .plan dt.bus .beforedt,.amap-lib-driving .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-driving .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-driving .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-driving .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-driving .plan-nobus{margin:0}.amap-lib-driving .plan-nobus dt span{display:block;line-height:18px}.amap-lib-driving .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan-nobus dt.end .beforedt,.amap-lib-driving .plan-nobus dt.start .beforedt,.amap-lib-driving .plan-nobus dt.via .beforedt{border:none}.amap-lib-driving .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-driving .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-driving .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-driving .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-driving .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-driving .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-driving .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-driving .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-driving .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-driving .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-driving .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-driving .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-driving .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-driving .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-driving .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-driving .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-driving .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-driving .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-driving .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:19px;height:31px;color:#e90000}.amap-lib-marker-from{background:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/start.png) no-repeat;cursor:pointer}.amap-lib-marker-to{background:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/end.png) no-repeat;cursor:pointer}.amap-lib-marker-mid{background:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/mid.png) no-repeat}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (min-resolution:144dpi){.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/theme/v1.3/markers/b/start.png)}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/theme/v1.3/markers/b/end.png)}.amap-lib-marker-mid{background-image:url(http://47.93.246.7/api/static/theme/v1.3/markers/b/mid.png)}}");
_cssload_('AMap.EllipseEditor.css',".amap-elps-node{cursor:pointer}.amap-elps-node.amap-elps-moveNode{width:15px;height:15px;background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/circle-pie.png) 50% 50% no-repeat;cursor:move}.amap-elps-node.amap-elps-resizeXNode{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/double-arrow-horizontal.png)}.amap-elps-node.amap-elps-resizeXNode,.amap-elps-node.amap-elps-resizeYNode{width:20px;height:20px;background-repeat:no-repeat;background-position:50%;background-size:80%;background-color:hsla(0,0%,100%,.7);border-radius:50%}.amap-elps-node.amap-elps-resizeYNode{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/double-arrow-vertical.png)}.amap-elps-moveNode.amap-elps-mobile{width:25px;height:25px;background-color:rgba(23,145,252,.2);border-radius:50%}.amap-elps-node+.amap-marker-label{border-color:#1791fc;border-radius:2px}");
_cssload_('AMap.Geolocation.css',"@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg)}to{-webkit-transform:rotate(1turn)}}.amap-geolocation{bottom:15px;right:15px;background-color:#fff;height:32px;width:32px;border-radius:50%;box-shadow:0 0 5px silver;cursor:pointer;background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/locate.png);background-size:24px;background-repeat:no-repeat;background-position:50%}.amap-geolocation img{height:24px;width:24px;background-color:#fff;margin:4px;border-radius:50%;-webkit-animation:rotate 2s linear infinite}.amap-geolocation-marker{width:19px;height:19px;border-radius:50%;box-shadow:0 0 8px #4d95ec;background-color:#fff;opacity:.9}");
_cssload_('AMap.HawkEye.css',".amap-hawkeye{transition:width .2s,height .2s}.amap-hawkeye .button{position:absolute;z-index:1;cursor:pointer;border-color:silver;border-style:solid none none solid;border-width:1px;bottom:0;right:0;background-color:#fff;background-size:12px;background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/arrow.png);background-size:cover}.amap-hawkeye .amap-container{z-index:0;width:100%;height:100%;min-width:1px;min-height:1px}.amap-hawkeye .amap-container .amap-copyright,.amap-hawkeye .amap-container .amap-logo{display:none!important}");
_cssload_('AMap.HeatMap.css',"");
_cssload_('AMap.PlaceSearch.css',".amap_lib_placeSearch{font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;color:#565656;font-size:12px;line-height:22px;word-wrap:break-word;background-color:#fff;border:1px solid silver;-webkit-text-size-adjust:none;text-size-adjust:none;min-width:270px}.amap_lib_placeSearch .pageLink{cursor:pointer;line-height:16px;display:inline-block;text-align:center;padding:0 4px}.amap_lib_placeSearch.mobile .pageLink{border:1px solid #ddd;background:#eee;padding:2px 3px}.amap_lib_placeSearch .amap_lib_placeSearch_page .current{border-color:#0091ff;color:#0091ff;margin-left:-2px}.amap_lib_placeSearch_list{background:#fff none repeat scroll 0 0}.amap_lib_placeSearch .poibox .poibox-icon{margin-left:7px;margin-top:4px}.amap_lib_placeSearch_page{white-space:nowrap;text-align:right;margin:8px 0 5px;padding:2px;overflow:hidden}.amap_lib_placeSearch_page>div{float:left;margin-right:5px}.amap_lib_placeSearch_page>div>p{margin:0;padding:0;white-space:nowrap}.amap_lib_placeSearch_page>div>p>span{display:inline-block;padding:0 2px;min-width:15px;height:18px;border:1px solid #d9d9d9;border-radius:4px;line-height:18px;text-align:center;margin-right:3px}.amap_lib_placeSearch_page>div>p>span:hover{border-color:#1890ff;color:#1890ff;cursor:pointer}.amap_lib_placeSearch_ol{list-style:outside none none;padding:0;margin:0}.amap_lib_placeSearch_li{margin:2px 0;padding:0 5px 5px 0;cursor:pointer;overflow:hidden;line-height:17px}.amap_lib_placeSearch_li .amap_lib_placeSearch_li_wrap{overflow:hidden;padding:0 5px}.amap_lib_placeSearch_li_wrap_selected{background-color:#f0f0f0}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title{line-height:20px;font-size:12px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title span{color:#00c}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title a{margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:400;text-decoration:none}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text{padding:2px 0;line-height:18px;*zoom:1;overflow:hidden}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text b{float:left;font-weight:700;*zoom:1;overflow:hidden;padding-right:5px;*margin-right:-3px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text span{color:#666;display:block;zoom:1;overflow:hidden}.amap-lib-infowindow .amap-lib-infowindow-content-wrap{word-break:break-all;overflow:hidden;zoom:1}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}.selected .amap_lib_placeSearch_poi{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker_red.png)}.amap_lib_placeSearch_poi{background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker_red.png) no-repeat;background-size:20px 25px;width:20px;height:27px;cursor:pointer;left:-1px;text-align:center;color:#fff;font:12px arial,simsun,sans-serif;padding-top:3px}.amap_lib_placeSearch_pic{width:46px;height:46px;float:left;margin:4px 10px 0 0}.amap_lib_placeSearch_pic img{width:46px;height:46px}.selected .amap_lib_placeSearch_child_poi{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker_red.png)}.amap_lib_placeSearch_child_poi{width:11px;height:11px;border:1px solid #eee;border-radius:6px;background:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker_blue.png) no-repeat 50%;text-indent:-10000em;overflow:hidden}.poi-children-box{padding:3px 0 3px 25px}.poi-child-item.selected{border-color:#e17070}.poi-child-item{display:inline-block;line-height:180%;border:1px solid #ccc;background:#f3f3f3;margin:0 3px 3px 0;padding:0 3px;width:27%;min-width:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;text-align:center}.poi-child-item:hover{background:#ddd}.amap_lib_placeSearch{border:1px solid #ebedf0;border-radius:2px;padding:5px 10px 2px}.amap_lib_placeSearch .amap-ellipsis{max-height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.amap_lib_placeSearch .amap_lib_placeSearch_poi{position:absolute}.amap_lib_placeSearch ol,.amap_lib_placeSearch ul{list-style:outside none none;margin:0;padding:0}.amap_lib_placeSearch .poibox{border-bottom:1px solid #e8e8e8;cursor:pointer;padding:10px 5px;position:relative;min-height:35px}.amap_lib_placeSearch .poibox:last-child{border-bottom:none}.amap_lib_placeSearch .poibox .poi-title{margin-left:25px;font-size:14px;font-weight:700;overflow:hidden}.amap_lib_placeSearch .poibox .poi-title a{font-weight:400;text-decoration:none;color:#666;position:absolute;right:2px}.amap_lib_placeSearch .poibox .poi-title a:hover{color:#0091ff}.amap_lib_placeSearch .poibox .poi-title .poi-name{max-width:160px;display:inline-block}.amap_lib_placeSearch .poi-more{color:#0091ff;font-size:12px;line-height:22px;white-space:nowrap;vertical-align:baseline}.amap_lib_placeSearch .poibox .poi-info{word-break:break-all;margin:0 0 0 25px;overflow:hidden}.amap_lib_placeSearch .poibox .poi-info p{color:#999;font-family:Tahoma;line-height:20px}.amap_lib_placeSearch p{margin:0}.amap_lib_placeSearch h1,.amap_lib_placeSearch h2,.amap_lib_placeSearch h3,.amap_lib_placeSearch h4,.amap_lib_placeSearch h5{font-weight:400;margin:0}.amap_lib_placeSearch .poibox.active,.amap_lib_placeSearch .poibox.hover,.amap_lib_placeSearch .poibox:hover{background:#fafafa none repeat scroll 0 0}.amap_lib_placeSearch .poibox .select-btn{margin-left:25px;margin-top:6px;border:0;color:#fff;cursor:pointer;padding:3px 6px;border-radius:2px}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-pl-pc .poi-img{float:right;margin:3px 8px 0;width:90px;height:56px;overflow:hidden}.amap-pl-pc .poi-name{vertical-align:middle}.amap-pl-pc .poi-more{display:inline-block;width:16px;height:16px;text-indent:-1000em;background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/tips.png) no-repeat 50%;vertical-align:middle;cursor:pointer;opacity:.5;margin:1px 0 1px 2px;background-size:85%}.amap-pl-pc .poi-more:hover{opacity:1;background-size:100%}.amap_lib_placeSearch .clear{clear:both}.amap-pls-marker-tip{position:absolute;background:#fff;display:none;top:0;left:-100px;min-width:100px;width:auto;white-space:nowrap;line-height:200%;padding:0 0 0 7px;font-size:13px;border-radius:2px;-webkit-box-shadow:0 0 8px 0 rgba(0,0,0,.5);-moz-box-shadow:0 0 8px 0 rgba(0,0,0,.5);box-shadow:0 0 8px 0 rgba(0,0,0,.5);transition:all .5s 1s;z-index:150}.amap-pls-marker-tip .title{display:inline-block;vertical-align:middle;max-width:150px;overflow:hidden;text-overflow:ellipsis;margin-right:35px}.amap_lib_placeSearch_child_con .amap-pls-marker-tip{top:-7px}.amap-marker .hover .amap_lib_placeSearch_child_con .amap-pls-marker-tip{left:23px}.amap-marker .hover .amap-pls-marker-tip{display:block;left:28px}.amap-marker .hover.selected .amap-pls-marker-tip{display:none}.amap-pls-marker-tip:after,.amap-pls-marker-tip:before{content:\"\";width:0;height:0;top:50%;left:0;margin-top:-7px;margin-left:-15px;position:absolute;border:7px solid transparent;border-right:8px solid rgba(51,51,51,.2)}.amap-pls-marker-tip:after{margin-left:-14px;border-right:8px solid #fff}");
_cssload_('AMap.PlaceSearchRender.css',".amap_lib_placeSearch{font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;color:#565656;font-size:12px;line-height:22px;word-wrap:break-word;background-color:#fff;border:1px solid silver;-webkit-text-size-adjust:none;text-size-adjust:none}.amap_lib_placeSearch .pageLink{cursor:pointer;line-height:16px;display:inline-block;text-align:center;padding:0 4px}.amap_lib_placeSearch.mobile .pageLink{border:1px solid #ddd;background:#eee;padding:2px 3px}.amap_lib_placeSearch .pageLink:hover{background:#ccc}.amap_lib_placeSearch .pageLink.current{background:#0091ff;color:#fff}.amap_lib_placeSearch_list{background:#fff none repeat scroll 0 0}.amap_lib_placeSearch .poibox .poibox-icon{margin-left:7px;margin-top:4px}.amap_lib_placeSearch_page{white-space:nowrap;text-align:right;background:#e5ecf9 none repeat scroll 0 0;margin-top:5px;padding:2px;overflow:hidden}.amap_lib_placeSearch_page>div{float:left;margin-right:5px}.amap_lib_placeSearch_page>div>p{margin:0;padding:0;white-space:nowrap}.amap_lib_placeSearch_ol{list-style:outside none none;padding:0;margin:0}.amap_lib_placeSearch_li{margin:2px 0;padding:0 5px 5px 0;cursor:pointer;overflow:hidden;line-height:17px}.amap_lib_placeSearch_li .amap_lib_placeSearch_li_wrap{overflow:hidden;padding:0 5px}.amap_lib_placeSearch_li_wrap_selected{background-color:#f0f0f0}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title{line-height:20px;font-size:12px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title span{color:#00c}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_title a{margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:400;text-decoration:none}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text{padding:2px 0;line-height:18px;*zoom:1;overflow:hidden}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text b{float:left;font-weight:700;*zoom:1;overflow:hidden;padding-right:5px;*margin-right:-3px}.amap_lib_placeSearch_li>div .amap_lib_placeSearch_li_text span{color:#666;display:block;zoom:1;overflow:hidden}.amap-lib-infowindow .amap-lib-infowindow-content-wrap{word-break:break-all;overflow:hidden;zoom:1}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}.selected .amap_lib_placeSearch_poi{background-image:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/mark_r.png)}.amap_lib_placeSearch_poi{background:url(http://47.93.246.7/api/static/theme/v1.3/markers/n/mark_b.png) no-repeat;height:31px;width:19px;cursor:pointer;left:-1px;text-align:center;color:#fff;font:12px arial,simsun,sans-serif;padding-top:3px}.selected .amap_lib_placeSearch_child_poi{background-image:url(http://47.93.246.7/api/static/theme/v1.3/hotNewRed.png)}.amap_lib_placeSearch_child_poi{width:11px;height:11px;border:1px solid #eee;border-radius:6px;background:url(http://47.93.246.7/api/static/theme/v1.3/hotNew.png) no-repeat 50%;text-indent:-10000em;overflow:hidden}.poi-children-box{padding:3px 0 3px 25px}.poi-child-item.selected{border-color:#e17070}.poi-child-item{display:inline-block;line-height:180%;border:1px solid #ccc;background:#f3f3f3;margin:0 3px 3px 0;padding:0 3px;width:27%;min-width:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;text-align:center}.poi-child-item:hover{background:#ddd}.amap_lib_placeSearch .amap_lib_placeSearch_poi{position:absolute}.amap_lib_placeSearch ol,.amap_lib_placeSearch ul{list-style:outside none none;margin:0;padding:0}.amap_lib_placeSearch .poibox{border-bottom:1px solid #eaeaea;cursor:pointer;padding:5px 0 5px 10px;position:relative;min-height:35px}.amap_lib_placeSearch .poibox:last-child{border-bottom:none}.amap_lib_placeSearch .poibox .poi-title{margin-left:25px;font-size:13px;overflow:hidden}.amap_lib_placeSearch .poi-more{color:#0091ff;font-size:12px;line-height:22px;white-space:nowrap;vertical-align:baseline}.amap_lib_placeSearch .poibox .poi-info{word-break:break-all;margin:0 0 0 25px;overflow:hidden}.amap_lib_placeSearch .poibox .poi-info p{color:#999;font-family:Tahoma;line-height:20px}.amap_lib_placeSearch p{margin:0}.amap_lib_placeSearch h1,.amap_lib_placeSearch h2,.amap_lib_placeSearch h3,.amap_lib_placeSearch h4,.amap_lib_placeSearch h5{font-weight:400;margin:0}.amap_lib_placeSearch .poibox.active,.amap_lib_placeSearch .poibox.hover,.amap_lib_placeSearch .poibox:hover{background:#f6f6f6 none repeat scroll 0 0}.amap_lib_placeSearch .poibox .select-btn{margin-left:25px;margin-top:6px;border:0;color:#fff;cursor:pointer;padding:3px 6px;border-radius:2px;background-color:#0091ff}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-pl-pc .poi-img{float:right;margin:3px 8px 0;width:90px;height:56px;overflow:hidden}.amap-pl-pc .poi-name{vertical-align:middle}.amap-pl-pc .poi-more{display:inline-block;width:16px;height:16px;text-indent:-1000em;background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/tips.png) no-repeat 50%;vertical-align:middle;cursor:pointer;opacity:.5;margin:1px 0 1px 2px;background-size:85%}.amap-pl-pc .poi-more:hover{opacity:1;background-size:100%}.amap_lib_placeSearch .clear{clear:both}.amap-pls-marker-tip{position:absolute;background:#fff;display:none;top:0;left:-100px;min-width:100px;width:auto;white-space:nowrap;line-height:200%;padding:0 0 0 7px;font-size:13px;border-radius:2px;-webkit-box-shadow:0 0 8px 0 rgba(0,0,0,.5);-moz-box-shadow:0 0 8px 0 rgba(0,0,0,.5);box-shadow:0 0 8px 0 rgba(0,0,0,.5);transition:all .5s 1s;z-index:150}.amap-pls-marker-tip .title{display:inline-block;vertical-align:middle;max-width:150px;overflow:hidden;text-overflow:ellipsis;margin-right:35px}.amap_lib_placeSearch_child_con .amap-pls-marker-tip{top:-7px}.amap-marker .hover .amap_lib_placeSearch_child_con .amap-pls-marker-tip{left:23px}.amap-marker .hover .amap-pls-marker-tip{display:block;left:28px}.amap-marker .hover.selected .amap-pls-marker-tip{display:none}.amap-pls-marker-tip:after,.amap-pls-marker-tip:before{content:\"\";width:0;height:0;top:50%;left:0;margin-top:-7px;margin-left:-15px;position:absolute;border:7px solid transparent;border-right:8px solid rgba(51,51,51,.2)}.amap-pls-marker-tip:after{margin-left:-14px;border-right:8px solid #fff}");
_cssload_('AMap.RectangleEditor.css',".amap-rect-node{cursor:pointer;width:30px;height:30px}.amap-rect-node.amap-rect-leftBottomNode,.amap-rect-node.amap-rect-rightTopNode{width:20px;height:20px;background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/editor/double-arrow-top-right.png);background-repeat:no-repeat;background-position:50%;background-size:80%;background-color:hsla(0,0%,100%,.7);border-radius:50%}.amap-rect-node+.amap-marker-label{border-color:#1791fc;border-radius:2px}");
_cssload_('AMap.Riding.css',".amap-lib-driving{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;background-color:#fff;word-wrap:break-word;border:1px solid silver}.amap-lib-driving ol,.amap-lib-driving ul{list-style:outside none none;margin:0;padding:0}.amap-lib-driving .planTitle .clearfix a{text-decoration:underline}.amap-lib-driving .blue{color:#00f}.amap-lib-driving p{margin:0}.amap-lib-driving b,.amap-lib-driving strong{font-weight:700}.amap-lib-driving dt{cursor:pointer}.amap-lib-driving .planTitle{position:relative;padding:2px 8px;margin-bottom:2px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-driving .planTitle:hover{background:#fff}.amap-lib-driving .planTitle.current .sidebar,.amap-lib-driving .planTitle:hover .sidebar{display:block}.amap-lib-driving .planTitle span.red{color:#ff4546}.amap-lib-driving .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-driving .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-driving .planTitle ul{display:none;margin-top:3px}.amap-lib-driving .planTitle ul li{float:left}.amap-lib-driving .planTitle ul li:last-child{border-right:none}.amap-lib-driving .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-driving .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-driving .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-driving .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-driving .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .plan{display:none;font-size:12px}.amap-lib-driving .plan .grey{color:#999}.amap-lib-driving .plan .blue{color:#3baeca}.amap-lib-driving .plan dt{position:relative;margin-left:35px;line-height:25px;border-bottom:1px solid #f0f0f0}.amap-lib-driving .plan dt:hover{background:#fafafa}.amap-lib-driving .plan dt span.grey{font-weight:400}.amap-lib-driving .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-driving .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-driving .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-driving .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-driving .afterdt{position:absolute}.amap-lib-driving .plan dt.end,.amap-lib-driving .plan dt.start,.amap-lib-driving .plan dt.via{font-size:14px}.amap-lib-driving .plan dt.end .beforedt,.amap-lib-driving .plan dt.start .beforedt,.amap-lib-driving .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-driving .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-driving .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-driving .plan dt.end .afterdt{height:0%}.amap-lib-driving .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-driving>.plan dt>.afterdt{height:100%}.amap-lib-driving .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-driving .plan dt.bus .beforedt,.amap-lib-driving .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-driving .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-driving .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-driving .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-driving .plan-nobus{margin-top:5px}.amap-lib-driving .plan-nobus dt span{display:block;line-height:18px}.amap-lib-driving .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan-nobus dt.end .beforedt,.amap-lib-driving .plan-nobus dt.start .beforedt,.amap-lib-driving .plan-nobus dt.via .beforedt{border:none}.amap-lib-driving .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-driving .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-driving .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-driving .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-driving .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-driving .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-driving .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-driving .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-driving .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-driving .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-driving .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-driving .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-driving .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-driving .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-driving .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-driving .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-driving .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-driving .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-driving .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:25px;height:30px;color:#e90000;background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/start.png);cursor:pointer}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/end.png);cursor:pointer}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.Transfer.css',".amap-lib-transfer{background-color:#fff;font-size:12px;border:1px solid silver}.amap-lib-transfer ol,.amap-lib-transfer ul{list-style:outside none none;margin:0;padding:0}.amap-lib-transfer dt{cursor:pointer}.amap-lib-transfer h1,.amap-lib-transfer h2,.amap-lib-transfer h3,.amap-lib-transfer h4,.amap-lib-transfer h5{font-weight:400;margin:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;text-decoration:underline;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-lib-transfer p{margin:0}.amap-lib-transfer a{background-color:transparent;color:#6495ed;text-decoration:none}.amap-lib-transfer a:active,.amap-lib-transfer a:hover{outline:0 none;text-decoration:none;cursor:inherit}.amap-lib-transfer .planTitle{position:relative;padding:6px 5px;margin-bottom:2px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-transfer .planTitle .clearfix a{text-decoration:underline}.amap-lib-transfer .planTitle:hover{background:#fff}.amap-lib-transfer .planTitle:hover .sidebar{display:block}.amap-lib-transfer .planTitle span.red{color:#ff4546}.amap-lib-transfer .planTitle h3{font-size:13px;margin-bottom:1px}.amap-lib-transfer .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-transfer .planTitle ul{display:none;margin-top:7px}.amap-lib-transfer .planTitle.current ul{display:block}.amap-lib-transfer .planTitle ul li{float:left;border-right:1px solid #dcdcdc}.amap-lib-transfer .planTitle ul li:last-child{border-right:none}.amap-lib-transfer .planTitle ul li a{padding-right:8px;height:16px;line-height:16px;background-repeat:no-repeat;text-indent:20px;font-size:12px;color:#00f}.amap-lib-transfer .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-transfer .icon-share{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/share.png);background-position:10px}.amap-lib-transfer .icon-mark{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/mark.png);background-position:9px 0}.amap-lib-transfer .icon-mark:hover{background-position:9px -17px}.amap-lib-transfer .icon-mark.favdired{background-position:9px -33px}.amap-lib-transfer .icon-print{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/print.png);background-position:10px}.amap-lib-transfer .icon-mobile{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/mobile.png);background-position:10px}.amap-lib-transfer .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png);background-position:10px}.amap-lib-transfer .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-transfer .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s}.amap-lib-transfer .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-transfer span.line{position:relative;padding-left:4px;padding-right:4px;display:inline-block;line-height:18px;text-indent:0}.amap-lib-transfer span.line .beforespan{content:\" \";position:absolute;top:0;left:-18px;width:16px;height:100%;background-repeat:no-repeat;background-position:50%}.amap-lib-transfer span.subwayline{color:#fff;margin-left:16px;background-color:#3baeca}.amap-lib-transfer .plan dd.subway.subwayline1 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline1 .afterdt,.amap-lib-transfer .plan dt.subwayline1 span.line,.amap-lib-transfer span.subwayline1{background-color:#d66969}.amap-lib-transfer .plan dd.subway.subwayline2 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline2 .afterdt,.amap-lib-transfer .plan dt.subwayline2 span.line,.amap-lib-transfer span.subwayline2{background-color:#5591ce}.amap-lib-transfer .plan dd.subway.subwayline4 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline4 .afterdt,.amap-lib-transfer .plan dt.subwayline4 span.line,span.subwayline4{background-color:#17beb0}.amap-lib-transfer .plan dd.subway.subwayline5 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline5 .afterdt,.amap-lib-transfer .plan dt.subwayline5 span.line,span.subwayline5{background-color:#cf70b3}.amap-lib-transfer .plan dd.subway.subwayline6 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline6 .afterdt,.amap-lib-transfer .plan dt.subwayline6 span.line,span.subwayline6{background-color:#e2a116}.amap-lib-transfer .plan dd.subway.subwayline7 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline7 .afterdt,.amap-lib-transfer .plan dt.subwayline7 span.line,span.subwayline7{background-color:#b38f65}.amap-lib-transfer .plan dd.subway.subwayline8 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline8 .afterdt,.amap-lib-transfer .plan dt.subwayline8 span.line,span.subwayline8{background-color:#47b852}.amap-lib-transfer .plan dd.subway.subwayline9 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline9 .afterdt,.amap-lib-transfer .plan dt.subwayline9 span.line,span.subwayline9{background-color:#88ad2e}.amap-lib-transfer .plan dd.subway.subwayline10 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline10 .afterdt,.amap-lib-transfer .plan dt.subwayline10 span.line,span.subwayline10{background-color:#3baeca}.amap-lib-transfer .plan dd.subway.subwayline11 .afterdd,.amap-lib-transfer .plan dd.subway.subwayline12 .afterdt,.amap-lib-transfer .plan dt.subway.subwayline11:after,.amap-lib-transfer .plan dt.subway.subwayline12 .afterdt,.amap-lib-transfer .plan dt.subwayline11 span.line,.amap-lib-transfer .plan dt.subwayline12 span.line,span.subwayline11,span.subwayline12{background-color:#5591ce}.amap-lib-transfer .plan dd.subway.subwayline13 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline13 .afterdt,.amap-lib-transfer .plan dt.subwayline13 span.line,span.subwayline13{background-color:#bf7e16}.amap-lib-transfer .plan dd.subway.subwayline14 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline14 .afterdt,.amap-lib-transfer .plan dt.subwayline14 span.line,span.subwayline14{background-color:#b98080}.amap-lib-transfer .plan dd.subway.subwayline15 .afterdd,.amap-lib-transfer .plan dt.subway.subwayline15 .afterdt,.amap-lib-transfer .plan dt.subwayline15 span.line,span.subwayline15{background-color:#8a70b9}.amap-lib-transfer .plan dd.subway.subwaylinebt .afterdd,.amap-lib-transfer .plan dt.subway.subwaylinebt .afterdt,.amap-lib-transfer .plan dt.subwaylinebt span.line,span.subwaylinebt{background-color:#d66969}.amap-lib-transfer .plan dd.subway.subwaylinefs .afterdd,.amap-lib-transfer .plan dd.subway.subwaylineyz .afterdt,.amap-lib-transfer .plan dt.subway.subwaylinefs .afterdt,.amap-lib-transfer .plan dt.subway.subwaylineyz .afterdt,.amap-lib-transfer .plan dt.subwaylinefs span.line,.amap-lib-transfer .plan dt.subwaylineyz span.line,span.subwaylinefs,span.subwaylineyz{background-color:#db8240}.amap-lib-transfer .plan dd.subway.subwaylinecp .afterdd,.amap-lib-transfer .plan dt.subway.subwaylinecp .afterdt,.amap-lib-transfer .plan dt.subwaylinecp span.line,span.subwaylinecp{background-color:#b186a4}.amap-lib-transfer .plan dd.subway.subwaylinejc .afterdd,.amap-lib-transfer .plan dt.subway.subwaylinejc .afterdt,.amap-lib-transfer .plan dt.subwaylinejc span.line,span.subwaylinejc{background-color:#b199bb}.amap-lib-transfer .plan dd.subway.subwaylinexj .afterdd,.amap-lib-transfer .plan dt.subway.subwaylinexj .afterdt,.amap-lib-transfer .plan dt.subwaylinexj span.line,span.subwaylinexj{background-color:#93989b}.amap-lib-transfer span.subwayline .beforespan{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/subway.png)}.amap-lib-transfer span.busline{margin-left:16px;padding-left:0;padding-right:0}.amap-lib-transfer span.busline .beforespan{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/busline.png)}.amap-lib-transfer .planTitle h3 span{position:relative;margin-right:8px;margin-bottom:5px}.amap-lib-transfer .planTitle h3 span:last-child{margin-right:0}.amap-lib-transfer .planTitle h3 span .afterspan{position:absolute;top:0;right:-8px;width:5px;height:100%;background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-left.png) 50% no-repeat}.amap-lib-transfer .planTitle h3 span:last-child .afterspan{background:0 0}.amap-lib-transfer .plan{display:none;font-size:12px}.amap-lib-transfer .plan .grey{color:#999}.amap-lib-transfer .plan .blue{color:#3baeca}.amap-lib-transfer .plan dt{position:relative;margin-left:35px;line-height:30px;border-bottom:1px solid #f0f0f0}.amap-lib-transfer .plan dt:hover{background:#fafafa}.amap-lib-transfer .plan dd{position:relative;margin-left:35px;padding-top:7px;padding-bottom:7px;border-bottom:1px solid #f0f0f0}.amap-lib-transfer .plan dd h4{margin-bottom:7px;color:#666}.amap-lib-transfer .plan dd h4 a{color:#565656;font-weight:700}.amap-lib-transfer .plan dd h4 span{font-weight:400;margin-left:8px}.amap-lib-transfer .plan dd ul{display:none;font-size:12px;color:#666}.amap-lib-transfer .plan dd ul li{margin-bottom:7px}.amap-lib-transfer .plan dd p{font-size:12px;color:#666}.amap-lib-transfer .plan dd a.icon-arrow{position:absolute;right:25px;width:42px;top:5px;height:20px;text-align:right;line-height:20px;color:#0091ff;font-size:12px}.amap-lib-transfer .plan dd a.icon-arrow .aftera{position:absolute;top:5px;right:-18px;width:13px;height:13px;transition:all .4s ease-in 0s;-webkit-transition:all .4s ease-in 0s;-moz-transition:all .4s ease-in 0s;background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png) 100% no-repeat}.amap-lib-transfer .plan dd a.icon-arrow.expand .aftera{background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png) 100% no-repeat}.amap-lib-transfer .plan dd h4:hover,.amap-lib-transfer .plan dd p:hover,.amap-lib-transfer .plan dd ul li:hover{background:#fafafa}.amap-lib-transfer .plan dt span.grey{font-weight:400}.amap-lib-transfer .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-transfer .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-transfer .plan dd .afterdd,.amap-lib-transfer .plan dt .afterdt,.amap-lib-transfer .plan dt .beforedt{z-index:1;position:absolute}.amap-lib-transfer .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-transfer .plan>dt .beforedt{top:50%}.amap-lib-transfer .afterdd{top:19px;height:100%}.amap-lib-transfer .afterdd,.amap-lib-transfer .afterdt{left:-22px;width:4px;z-index:-1;background-color:#e5e7e8;position:absolute}.amap-lib-transfer .afterdt{top:20px;height:500px}.amap-lib-transfer>.plan dt>.afterdt{height:100%}.amap-lib-transfer dt.end .afterdt{height:0}.amap-lib-transfer .plan{margin:3px 0}.amap-lib-transfer .plan dt.end,.amap-lib-transfer .plan dt.start,.amap-lib-transfer .plan dt.via{font-size:14px}.amap-lib-transfer .plan dt.end .beforedt,.amap-lib-transfer .plan dt.start .beforedt,.amap-lib-transfer .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-transfer .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-transfer .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-transfer .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-transfer .plan dt.end .afterdt{height:0}.amap-lib-transfer .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-transfer .plan dt.bus .beforedt,.amap-lib-transfer .plan dt.railway .beforedt,.amap-lib-transfer .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-transfer .plan dd.bus .afterdd,.amap-lib-transfer .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-transfer .plan dd.subway .afterdd,.amap-lib-transfer .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-transfer .plan dt.bus .beforedt{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/bus-stop-rect.png);background-size:100% 100%;height:22px;width:22px}.amap-lib-transfer .plan dt.subway .beforedt{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/subway-stop-rect.png);background-size:100% 100%;height:22px;width:22px}.amap-lib-transfer .plan dt.railway .beforedt{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/railway-stop-rect.png);background-size:100% 100%;height:22px;width:22px}.amap-lib-transfer .plan-nobus dt{height:56px;line-height:28px}.amap-lib-transfer .plan-nobus dt span{display:block;line-height:18px}.amap-lib-transfer .plan-nobus dt.end,.amap-lib-transfer .plan-nobus dt.start,.amap-lib-transfer .plan-nobus dt.via{line-height:56px}.amap-lib-transfer .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-transfer .plan-nobus dt.end .beforedt,.amap-lib-transfer .plan-nobus dt.start .beforedt,.amap-lib-transfer .plan-nobus dt.via .beforedt{border:none}.amap-lib-transfer .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-transfer .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-transfer .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-transfer .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-transfer .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-transfer .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-transfer .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-transfer .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-transfer .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-transfer .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-transfer .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-transfer .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-transfer .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-transfer .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-transfer .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-transfer .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-transfer .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-transfer .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-transfer .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-bus-route-item .amap-lib-marker-stop{top:7px;left:2px}.amap-lib-marker-stop{background:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png) no-repeat scroll 0 0;background-size:100% 100%;cursor:pointer;height:29px;position:absolute;width:22px}.amap-lib-drive-route-description-box{position:relative}.amap-lib-marker-bus-busStop,.amap-lib-marker-bus-railwayStop,.amap-lib-marker-bus-subwayStop{background-size:100% 100%;height:22px;width:22px}.amap-lib-marker-bus-busStop{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/bus-stop-rect.png)}.amap-lib-marker-bus-subwayStop{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/subway-stop-rect.png)}.amap-lib-marker-bus-railwayStop{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/railway-stop-rect.png)}.amap-lib-marker-from,.amap-lib-marker-to{width:25px;height:30px;position:absolute;color:#e90000;cursor:pointer;background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/start.png)}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/end.png)}.amap-lib-iw-content{font-size:12px;padding:10px;background:#fff}.amap-lib-iw-content .amap-lib-bus-route-item{overflow:hidden;zoom:1}.amap-lib-iw-bus{position:relative}.amap-lib-iw-content .amap-lib-curr-place{line-height:24px;font-size:14px;padding-left:2px;border-bottom:1px solid #99adce}.amap-lib-iw-bus .amap-lib-bus-route-item b{font-weight:700;cursor:default}.amap-lib-iw-bus .amap-lib-bus-route-icon{width:20px;height:20px;position:absolute;background:url(http://47.93.246.7/api/static/theme/v1.3/images/way_btn.png) no-repeat}.amap-lib-iw-bus .amap-lib-icon-marker-bus-busStop{background-position:-58px -60px}.amap-lib-iw-bus .amap-lib-icon-marker-bus-railwayStop{background:url(http://47.93.246.7/api/static/theme/v1.3/images/routePlan.png) no-repeat -249px -104px;position:absolute;height:18px;width:16px}.amap-lib-iw-bus .amap-lib-icon-marker-bus-subwayStop{background-position:-30px -60px}.amap-lib-iw-bus .amap-lib-curr-name-addr,.amap-lib-iw-bus .amap-lib-transport-step,.amap-lib-iw-bus .amap-lib-walk-step{float:left;margin-left:30px}.amap-lib-iw-bus .amap-lib-bus-route-item .amap-lib-step-detail,.amap-lib-iw-bus .amap-lib-bus-route-item .amap-lib-walk-time,.amap-lib-transport-step{margin-top:10px}.amap-lib-step-detail{margin-left:-27px}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.TruckDriving.css',".amap-lib-driving{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;word-wrap:break-word;background-color:#fff;border:1px solid silver}.amap-lib-driving ol,.amap-lib-driving ul{list-style:outside none none;margin:0;padding:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-call,.amap-lib-driving .planTitle .clearfix a{text-decoration:underline}.amap-lib-driving .blue{color:#3d93fd}.amap-lib-driving p{margin:0}.amap-lib-driving b,.amap-lib-driving strong{font-weight:700}.amap-lib-driving dt{cursor:pointer}.amap-lib-driving .planTitle{position:relative;padding:2px 8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-driving .planTitle:hover{background:#fff}.amap-lib-driving .planTitle.current .sidebar,.amap-lib-driving .planTitle:hover .sidebar{display:block}.amap-lib-driving .planTitle span.red{color:#ff4546}.amap-lib-driving .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-driving .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-driving .planTitle ul{display:none;margin-top:3px}.amap-lib-driving .planTitle ul li{float:left}.amap-lib-driving .planTitle ul li:last-child{border-right:none}.amap-lib-driving .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-driving .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-driving .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-driving .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-driving .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .plan{display:none;font-size:12px;margin:0}.amap-lib-driving .plan .grey{color:#999}.amap-lib-driving .plan .blue{color:#3baeca}.amap-lib-driving .plan dt{position:relative;margin-left:35px;line-height:20px;border-bottom:1px solid #f0f0f0;padding-bottom:3px;padding-top:3px}.amap-lib-driving .plan dt:hover{background:#fafafa}.amap-lib-driving .plan dt span.grey{font-weight:400}.amap-lib-driving .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-driving .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-driving .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-driving .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-driving .afterdt{position:absolute}.amap-lib-driving .plan dt.end,.amap-lib-driving .plan dt.start,.amap-lib-driving .plan dt.via{font-size:14px}.amap-lib-driving .plan dt.end .beforedt,.amap-lib-driving .plan dt.start .beforedt,.amap-lib-driving .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-driving .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-driving .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-driving .plan dt.end .afterdt{height:0%}.amap-lib-driving .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-driving>.plan dt>.afterdt{height:100%}.amap-lib-driving .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-driving .plan dt.bus .beforedt,.amap-lib-driving .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-driving .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-driving .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-driving .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-driving .plan-nobus{margin:0}.amap-lib-driving .plan-nobus dt span{display:block;line-height:18px}.amap-lib-driving .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan-nobus dt.end .beforedt,.amap-lib-driving .plan-nobus dt.start .beforedt,.amap-lib-driving .plan-nobus dt.via .beforedt{border:none}.amap-lib-driving .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-driving .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-driving .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-driving .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-driving .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-driving .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-driving .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-driving .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-driving .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-driving .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-driving .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-driving .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-driving .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-driving .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-driving .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-driving .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-driving .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-driving .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-driving .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:25px;height:30px;color:#e90000;background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/start.png);cursor:pointer}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/end.png);cursor:pointer}.amap-lib-marker-mid{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/mid.png)}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.UTFGrid.css',"");
_cssload_('AMap.Walking.css',".amap-lib-walking{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;background-color:#fff;word-wrap:break-word;border:1px solid silver}.amap-lib-walking ol,.amap-lib-walking ul{list-style:outside none none;margin:0;padding:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-call,.amap-lib-walking .planTitle .clearfix a{text-decoration:underline}.amap-lib-walking .blue{color:#00f}.amap-lib-walking p{margin:0}.amap-lib-walking b,.amap-lib-walking strong{font-weight:700}.amap-lib-walking dt{cursor:pointer}.amap-lib-walking .planTitle{position:relative;padding:2px 8px;margin-bottom:0;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-walking .planTitle:hover{background:#fff}.amap-lib-walking .planTitle.current .sidebar,.amap-lib-walking .planTitle:hover .sidebar{display:block}.amap-lib-walking .planTitle span.red{color:#ff4546}.amap-lib-walking .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-walking .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-walking .planTitle ul{display:none;margin-top:3px}.amap-lib-walking .planTitle ul li{float:left}.amap-lib-walking .planTitle ul li:last-child{border-right:none}.amap-lib-walking .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-walking .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-walking .icon-arrow-up{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-walking .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-walking .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-walking .planTitle .sidebar div.expand{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-walking .plan{display:none;font-size:12px}.amap-lib-walking .plan .grey{color:#999}.amap-lib-walking .plan .blue{color:#3baeca}.amap-lib-walking .plan dt{position:relative;margin-left:35px;line-height:25px;border-bottom:1px solid #f0f0f0}.amap-lib-walking .plan dt:hover{background:#fafafa}.amap-lib-walking .plan dt span.grey{font-weight:400}.amap-lib-walking .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-walking .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-walking .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-walking .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-walking .afterdt{position:absolute}.amap-lib-walking .plan dt.end,.amap-lib-walking .plan dt.start,.amap-lib-walking .plan dt.via{font-size:14px}.amap-lib-walking .plan dt.end .beforedt,.amap-lib-walking .plan dt.start .beforedt,.amap-lib-walking .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-walking .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-walking .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-walking .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-walking .plan dt.end .afterdt{height:0%}.amap-lib-walking .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-walking>.plan dt>.afterdt{height:100%}.amap-lib-walking .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-walking .plan dt.bus .beforedt,.amap-lib-walking .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-walking .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-walking .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-walking .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-walking .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-walking .plan-nobus{margin:0}.amap-lib-walking .plan-nobus dt span{display:block;line-height:18px}.amap-lib-walking .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/diricon.png)}.amap-lib-walking .plan-nobus dt.end .beforedt,.amap-lib-walking .plan-nobus dt.start .beforedt,.amap-lib-walking .plan-nobus dt.via .beforedt{border:none}.amap-lib-walking .plan-nobus dt.turn-go .beforedt{background-image:url(http://47.93.246.7/api/static/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-walking .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-walking .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-walking .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-walking .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-walking .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-walking .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-walking .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-walking .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-walking .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-walking .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-walking .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-walking .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-walking .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-walking .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-walking .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-walking .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-walking .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-walking .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:25px;height:30px;color:#e90000;background-size:100% 100%}.amap-lib-marker-from{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/start.png);cursor:pointer}.amap-lib-marker-to{background-image:url(http://47.93.246.7/api/static/jsapi/static/image/plugin/marker/end.png);cursor:pointer}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,微软雅黑,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(http://47.93.246.7/api/static/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}");
_cssload_('AMap.convertFrom.css',".TEST-HAWKEYE{font-size:auto}.TEST-HAWKEYE .JACK{align-self:auto}");
_cssload_('style_.css',".amap-custom{top:0;left:0;position:absolute}.amap-container img{max-width:none!important;max-height:none!important}.amap-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAAf1JREFUeAHtmtGpAkEQBE9TMAi/zMb8MzCGU/97Ye8QunDrfQ7qNFUMS8Pbtom/fd8fEx/b/FymdIDL85p/wmmLgEJa5Ad7FTIA0xorpEV+sFchAzCtsUJa5Ad7FTIA0xorpEV+sPcyW1oG33f8WwL3qZ+blebnMs4DXGzqGWFv6hvSYx83KyRi6Q0V0mMfNyskYukNFdJjHzcrJGLpDRXSYx8329QjltrQpp7QH2jWv/5fA5t6EtKc+YY06YfdCglQmiOFNOmH3QoJUJojhTTph90KCVCaI4U06YfdNvUApTiyqSf4NvVEZdGZbwhMvEIUAiMAi+OFKARGABbHC1EIjAAsjk2dJcSmnnzY1BOVRWc+6jDxClEIjAAsjheiEBgBWBwvRCEwArA4/9LUbx+uLxjbM3Fs6omaTT1RWXTmow4TrxCFwAjA4nghCoERgMXxQhQCIwCL8y9NHYb1dBybekJnU09UFp35qMPEK0QhMAKwOF6IQmAEYHG8EIXACMDi2NRZQmzqyYdNPVFZdOajDhOvEIXACMDieCEKgRGAxfFCFAIjAItjU2cJsaknHzb1RGXRmY86TLxCFAIjAIvjhSgERgAWxwtRCIwALI5NnSXEpp582NQTlUVnPuow8QpRCIwALI4XohAYAVgcL0QhMAKwON+m/oRlWjrOG2SeYNIaKe7fAAAAAElFTkSuQmCC);background-color:#f1f1f1;touch-action:none;position:relative;overflow:hidden;-ms-touch-action:none}.amap-drags,.amap-layers{width:100%;height:100%;position:absolute;overflow:hidden;transform:translateZ(0)}.amap-layers canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-layers .amap-layer-tile{transform:translateZ(0)}.amap-layers .amap-layer-tile,.amap-layers .amap-layer-tile img{position:absolute;top:0;left:0;user-select:none;-webkit-user-select:none}.amap-layers .amap-layer-image{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-layers .amap-layer-image img{position:absolute;top:0;left:0}.amap-layer img{pointer-events:none;display:block}.amap-layers .amap-layer-overlay{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-e,.amap-maps{width:100%;height:100%;outline:none}.amap-e,.amap-layers,.amap-maps,.amap-tile-container{position:absolute;left:0;top:0;overflow:hidden}.amap-context,.amap-marker,.amap-markers,.amap-overlays{position:absolute;left:0;top:0}.amap-layers{z-index:0}.amap-overlays{z-index:110;cursor:default}.amap-markers{z-index:120}.amap-controls{z-index:150}.amap-copyright{display:block!important;left:77px;height:16px;bottom:0;padding-bottom:2px;font-size:11px;font-family:Arial,sans-serif}.amap-copyright,.amap-logo{position:absolute;z-index:160;user-select:none;-webkit-user-select:none}.amap-logo{bottom:1px;left:1px;height:20px}.amap-logo img{width:73px!important;height:20px!important;border:none;vertical-align:baseline!important;user-select:none;-webkit-user-select:none}.amap-icon{position:relative;z-index:1}.amap-icon img{position:absolute;z-index:-1}.amap-marker-label{position:absolute;z-index:2;border:1px solid #00f;background-color:#fff;white-space:nowrap;cursor:default;padding:3px;font-size:12px;line-height:14px}.amap-info{left:0;width:fit-content;width:-webkit-fit-content;width:-moz-max-content}.amap-info,.amap-menu{position:absolute;z-index:140}.amap-info-close{position:absolute;right:5px;top:5px;color:#c3c3c3;text-decoration:none;font:700 16px/14px Tahoma,Verdana,sans-serif;width:14px;height:14px;cursor:pointer}.amap-info-outer,.amap-menu-outer{box-shadow:0 1px 2px rgba(0,0,0,.1);background:none repeat scroll 0 0 #fff;border-radius:2px;padding:1px;text-align:left}.amap-info-contentContainer:hover .amap-info-outer,.amap-menu-outer:hover{box-shadow:0 1px 2px rgba(0,0,0,.3)}.amap-info-content{position:relative;background:#fff;padding:10px 18px 10px 10px;line-height:1.4;overflow:auto}.amap-marker-content{position:relative}.amap-info-sharp-old{overflow:hidden;position:absolute;background-image:url(http://47.93.246.7/api/static/images/arrows.png)}.bottom-center .amap-info-sharp-old{height:12px;width:20px;background-position:center 12px;top:100%;left:50%;margin:-9px auto 0 -10px}.bottom-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -46px;top:100%;margin-top:-9px}.bottom-right .amap-info-sharp-old{height:12px;width:13px;top:-1px;background-position:-56px -46px;left:100%;margin-left:-13px;top:100%;margin-top:-9px}.middle-left .amap-info-sharp-old{height:20px;width:12px;background-position:0;top:50%;margin-top:-10px;margin-left:-11px}.center .amap-info-sharp-old{display:none}.middle-right .amap-info-sharp-old{height:20px;margin-right:0;width:12px;background-position:100%;left:100%;margin-left:-9px;top:50%;margin-top:-10px}.top-center .amap-info-sharp-old{height:12px;width:20px;background-position:top;top:0;left:50%;margin:-3px auto 0 -10px}.top-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -3px;top:0;margin-top:-3px}.top-right .amap-info-sharp-old{height:12px;width:13px;background-position:-56px -3px;left:100%;margin-left:-13px;top:0;margin-top:-3px}.amap-info-sharp{position:absolute}.bottom-center .amap-info-sharp{bottom:0;left:50%;border-top:8px solid #fff}.bottom-center .amap-info-sharp,.bottom-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.bottom-center .amap-info-sharp:after{position:absolute;content:\"\";margin-top:-7px;border-top:8px solid rgba(0,0,0,.3);filter:blur(2px);z-index:-1}.amap-info-contentContainer:hover.bottom-center .amap-info-sharp:after{border-top:8px solid rgba(0,0,0,.5)}.bottom-left .amap-info-sharp{border-color:transparent #fff;border-style:solid;border-width:0 0 10px 10px}.bottom-left .amap-info-sharp:after{position:absolute;content:\"\";margin-left:-10px;border-color:transparent rgba(0,0,0,.3);border-style:solid;border-width:0 0 10px 10px;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-left .amap-info-sharp:after{border-color:transparent rgba(0,0,0,.5)}.bottom-left .amap-info-content{border-radius:2px 2px 2px 0}.bottom-right .amap-info-sharp{right:0;border-top:10px solid #fff;border-left:10px solid transparent}.bottom-right .amap-info-sharp:after{position:absolute;margin-top:-9px;margin-left:-10px;content:\"\";border-top:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-right .amap-info-sharp:after{border-top:10px solid rgba(0,0,0,.5)}.bottom-right .amap-info-content{border-radius:2px 2px 0 2px}.top-center .amap-info-sharp{top:0;left:50%;border-bottom:8px solid #fff}.top-center .amap-info-sharp,.top-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.top-center .amap-info-sharp:after{position:absolute;content:\"\";margin-top:0;border-bottom:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.top-left .amap-info-sharp{left:0;top:0;border-bottom:10px solid #fff;border-right:10px solid transparent}.top-left .amap-info-sharp:after{position:absolute;content:\"\";margin-top:0;margin-left:0;border-bottom:10px solid rgba(0,0,0,.3);border-right:10px solid transparent;filter:blur(1px);z-index:-1}.top-right .amap-info-sharp{right:0;top:0;border-bottom:10px solid #fff;border-left:10px solid transparent}.top-right .amap-info-sharp:after{position:absolute;content:\"\";margin-top:0;margin-left:-10px;border-bottom:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.middle-right .amap-info-sharp{right:0;top:50%;border-left:8px solid #fff}.middle-right .amap-info-sharp,.middle-right .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-right .amap-info-sharp:after{position:absolute;content:\"\";margin-left:-8px;border-left:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-right .amap-info-sharp:after{border-left:8px solid rgba(0,0,0,.5)}.middle-left .amap-info-sharp{left:0;top:50%;border-right:8px solid #fff}.middle-left .amap-info-sharp,.middle-left .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-left .amap-info-sharp:after{position:absolute;content:\"\";margin-left:0;border-right:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-left .amap-info-sharp:after{border-right:8px solid rgba(0,0,0,.5)}.amap-info-contentContainer.top-center,.amap-info-contentContainer.top-left,.amap-info-contentContainer.top-right{padding-top:8px}.amap-info-contentContainer.bottom-center,.amap-info-contentContainer.bottom-left,.amap-info-contentContainer.bottom-right{padding-bottom:8px}.amap-info-contentContainer.middle-right{padding-right:8px}.amap-info-contentContainer.middle-left{padding-left:8px}.amap-menu-outer{margin:0;padding:0;list-style-type:none}ul.amap-menu-outer li{height:35px;line-height:35px;word-break:break-all;padding:0 10px;font-size:12px;white-space:nowrap}ul.amap-menu-outer li a{text-decoration:none;font-size:13px;margin:0 5px;color:#000;padding:5px}ul.amap-menu-outer li:hover{background-color:#f3f3ee}.amap-overlay-text-container{display:block;width:auto;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fff;padding:2px 3px;border:1px solid #ccc;border-radius:3px}.amap-overlay-text-container.amap-overlay-text-empty{display:none}.amap-info-content-ie8{border:1px solid #9c9c9c}.amap-control{position:absolute;-webkit-tap-highlight-color:transparent}.amap-toolbar{background-color:#fff;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.5)}.amap-toolbar span{display:block;width:30px;height:30px;line-height:30px;text-align:center;border-radius:0 0 4px 4px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:20px}.amap-toolbar span:first-child{border-bottom:1px solid #eee;border-radius:4px 4px 0 0}.amap-toolbar span:hover{font-weight:bolder;background-color:#f0f0f0}.amap-scalecontrol{pointer-events:none;background-color:hsla(0,0%,100%,.5);border-radius:2px;user-select:none}.amap-scalecontrol .amap-scale-text{font-size:10px;text-align:center;transition:width .3s;user-select:none}.amap-scalecontrol .amap-scale-line{position:relative;height:8px;left:2px;user-select:none}.amap-scalecontrol .amap-scale-edgeleft,.amap-scalecontrol .amap-scale-edgeright,.amap-scalecontrol .amap-scale-middle{position:absolute;background-color:#333;overflow:hidden;box-sizing:content-box!important}.amap-scalecontrol .amap-scale-edgeright{width:1px;height:6px;border:1px solid #fff;transition:left .3s}.amap-scalecontrol .amap-scale-middle{height:2px;left:2px;top:2px;border-top:1px solid #fff;border-bottom:1px solid #fff;transition:width .3s}.amap-scalecontrol .amap-scale-edgeleft{width:1px;height:6px;border:1px solid #fff}.amap-controlbar,.amap-controlbar *{user-select:none}.amap-controlbar .amap-luopan{width:92px;height:92px;background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) -22px -30px no-repeat;background-size:348px 270px;user-select:none}.amap-luopan .amap-compass{top:46px;left:50%;position:absolute;margin:-24px;width:48px;height:48px;z-index:10;background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) -231px -26px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass.amap-compass-black{background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) no-repeat -231px -79px;background-size:348px 270px}.amap-luopan .amap-compass .amap-pointers{position:absolute;width:30px;height:48px;top:0;left:9px;border:none;z-index:2;background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) -281px -26px no-repeat;background-size:348px 270px}.amap-pitchDown,.amap-pitchUp{width:30px;height:25.5px;position:absolute;top:3.5px;margin-left:-15px;left:50%;z-index:1;background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) -302.5px -49px no-repeat;background-size:348px 270px}.amap-pitchDown:hover,.amap-pitchUp:hover{background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) no-repeat -302.5px -23.5px;background-size:348px 270px}.amap-pitchDown{top:66px;transform:rotate(180deg);-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg)}.amap-rotateLeft,.amap-rotateRight{width:21px;height:52px;top:19px;position:absolute;z-index:2;background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) -301.5px -77px no-repeat;background-size:348px 270px}.amap-rotateLeft:hover,.amap-rotateRight:hover{background:url(http://134.85.21.54/api/static/theme/v1.3/controlbar/ctb.png) no-repeat -278.5px -76.5px;background-size:348px 270px}.amap-rotateLeft{left:5px}.amap-rotateRight{right:5px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-ctrl-icon-layer{width:30px;height:30px}.amap-ctrl-icon-layer,.amap-ctrl-list-layer{background-color:#fff;border-radius:3px;box-shadow:0 0 4px 1px rgba(0,0,0,.2)}.amap-ctrl-list-layer{position:absolute;top:0;right:0;overflow:hidden;z-index:1}.amap-ctrl-list-layer ul{overflow:hidden;list-style:none;margin:0;padding:5px 8px}.amap-ctrl-list-layer ul li{float:left;width:100%}.amap-ctrl-list-layer ul p{white-space:nowrap;font-size:12px;height:20px;line-height:20px;padding-left:5px;margin:0 10px}.amap-ctrl-list-layer input{float:left;height:20px;width:12px;margin:0 5px}.amap-ctrl-base-layer{border-bottom:1px solid #eee}.amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-popup{text-align:center;position:fixed;top:50%;left:50%;margin-left:-165px;margin-top:-170px}.amap-popup-content{vertical-align:middle;line-height:200px;overflow:hidden;background-color:#fff;border:solid;border-width:3px 1px;border-radius:5px;border-color:#ddf;margin:0 auto;text-align:center;height:340px}.amap-labellayers{position:absolute;top:0;left:0;transform-origin:0 0}.amap-indoormap-floorbar-control{position:absolute;width:40px;text-align:center;line-height:1.3em;border-radius:20px;box-shadow:0 0 3px 3px rgba(0,0,0,.1);background-color:#fff;margin-top:-100px}.amap-indoormap-floorbar-control .floor-list-box{max-height:160px;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;-webkit-user-select:none;-moz-user-select:none}.floor-list-box::-webkit-scrollbar{width:0!important;height:0!important}.amap-indoormap-floorbar-control ul{list-style:none;margin:0;padding:0 4px;width:40px;box-sizing:border-box}.amap-indoormap-floorbar-control ul li{height:32px;width:32px;border-radius:16px}.amap-indoormap-floorbar-control ul li:hover{background-color:#efefef}.amap-indoormap-floorbar-control ul li div{height:32px;text-align:center;line-height:32px;font-size:12px}.amap-indoormap-floorbar-control ul li.selected{color:#fff;background-color:#4196ff}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{height:32px;width:32px;margin:0 auto;border-radius:16px;position:relative}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:\"\";position:absolute;margin:auto;bottom:4px;left:0;right:0;width:0;height:0;border:7px solid transparent;border-top-color:#777}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;bottom:11px}.amap-indoormap-floorbar-control .floor-plus:hover:after{border-bottom-color:#222}.amap-indoormap-floorbar-control .floor-minus:hover:after{border-top-color:#222}.amap-indoormap-floorbar-control .floor-plus.disabled:after{border-bottom-color:#ddd}.amap-indoormap-floorbar-control .floor-minus.disabled:after{border-top-color:#ddd}.amap-indoormap-floorbar-control .floor-list-item.selected:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}");
